var TQ=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var C7e=TQ((sGe,JS)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function MQ(){Symbol.metadata??(Symbol.metadata=Symbol.for("Symbol.metadata"))}const Oc={get(n,e){var t;return(t=e[Symbol.metadata])==null?void 0:t[n]},define(n,e,...t){var s;let i=(s=Object.getOwnPropertyDescriptor(e,Symbol.metadata))==null?void 0:s.value;i==null&&Object.defineProperty(e,Symbol.metadata,{value:i=Object.create(null),enumerable:!0,configurable:!0,writable:!0});const r=t.length;switch(r){case 0:throw new Error("At least one key must be provided");case 1:i[t[0]]=n;return;case 2:i[t[0]]=i[t[1]]=n;return;default:{for(let o=0;o<r;++o)i[t[o]]=n;return}}},has(n,e){const t=e[Symbol.metadata];return t==null?!1:n in t},delete(n,e){const t=e[Symbol.metadata];t!=null&&Reflect.deleteProperty(t,n)}},Fw=Object.freeze,Q5=Object.assign,AQ=String,nl=Oc.get,Qv=Oc.define,fi=n=>n instanceof Promise,ai=n=>n instanceof Array,$p=n=>n instanceof Set,Ou=n=>n instanceof Map,J5=n=>n instanceof Object;function e_(n){return typeof n=="object"&&n!==null||typeof n=="function"}const kt=n=>typeof n=="function",St=n=>typeof n=="string",PQ=n=>typeof n=="number",on=()=>Object.create(null),ea=Object.is,Xn=(n,...e)=>new Error(`AUR${AQ(n).padStart(4,"0")}: ${OQ(n,...e)}`),IQ={1:"No registration for interface: '{{0}}'",2:`'{{0}}' was registered with "none" resolver, are you injecting the right key?`,3:"Cyclic dependency found: {{0}}",4:"Resolver for {{0}} returned a null factory",5:"Invalid resolver strategy specified: {{0}}. Did you assign an invalid strategy value?",6:"Unable to autoregister dependency: {{0}}",7:'Resource key "{{0}}" already registered',8:"Unable to resolve key: {{0}}",9:"Attempted to jitRegister something that is not a constructor: '{{0}}'. Did you forget to register this resource?",10:'Attempted to jitRegister an intrinsic type: "{{0}}". Did you forget to add @inject(Key)',11:"Invalid resolver, null/undefined returned from the static register method.",12:"Attempted to jitRegister an interface: {{0}}",13:"Cannot call resolve '{{0}}' before calling prepare or after calling dispose.",14:"Key cannot be null or undefined. Are you trying to inject/register something that doesn't exist with DI?A common cause is circular dependency with bundler, did you accidentally introduce circular dependency into your module graph?",15:"'{{0}}' is a native function and cannot be safely constructed by DI. If this is intentional, please use a callback or cachedCallback resolver.",16:'There is not a currently active container to resolve "{{0}}". Are you trying to "new Class(...)" that has a resolve(...) call?',17:"Failed to instantiate '{{0}}' via @newInstanceOf/@newInstanceForScope, there's no registration and no default implementation, or the default implementation does not result in factory for constructing the instances.",18:"Invalid channel name or instance: '{{0}}'.",19:"Invalid channel name or type: {{0}}.",20:"No defined value found when calling firstDefined()",21:"Invalid module transform input: {{0}}. Expected Promise or Object.",22:"The @inject decorator on the target ('{{0}}') type '{{1}}' is not supported.",23:"Resource key '{{0}}' has already been registered."},OQ=(n,...e)=>{let t=IQ[n];for(let i=0;i<e.length;++i)t=t.replace(`{{${i}}}`,String(e[i]));return t},vp=(...n)=>globalThis.console.error(...n),Jv=(()=>{const n={};let e=!1,t=0,i=0,r=0;return s=>{switch(typeof s){case"number":return s>=0&&(s|0)===s;case"string":if(e=n[s],e!==void 0)return e;if(t=s.length,t===0)return n[s]=!1;for(i=0,r=0;r<t;++r)if(i=s.charCodeAt(r),r===0&&i===48&&t>1||i<48||i>57)return n[s]=!1;return n[s]=!0;default:return!1}}})(),e6=function(){const n=Q5(on(),{0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0}),e=t=>t===""?0:t!==t.toUpperCase()?3:t!==t.toLowerCase()?2:n[t]===!0?1:0;return(t,i)=>{const r=t.length;if(r===0)return t;let s=!1,o="",a,l="",c=0,u=t.charAt(0),h=e(u),d=0;for(;d<r;++d)a=c,l=u,c=h,u=t.charAt(d+1),h=e(u),c===0?o.length>0&&(s=!0):(!s&&o.length>0&&c===2&&(s=a===3||h===3),o+=i(l,s),s=!1);return o}}(),Ni=function(){const n=on(),e=(t,i)=>i?t.toUpperCase():t.toLowerCase();return t=>{let i=n[t];return i===void 0&&(i=n[t]=e6(t,e)),i}}(),t6=function(){const n=on();return e=>{let t=n[e];return t===void 0&&(t=Ni(e),t.length>0&&(t=t[0].toUpperCase()+t.slice(1)),n[e]=t),t}}(),n6=function(){const n=on(),e=(t,i)=>i?`-${t.toLowerCase()}`:t.toLowerCase();return t=>{let i=n[t];return i===void 0&&(i=n[t]=e6(t,e)),i}}(),zE=n=>{const e=n.length,t=Array(e);let i=0;for(;i<e;++i)t[i]=n[i];return t},Hf=(n,e)=>{const t=e.name;e.addInitializer(function(){Reflect.defineProperty(this,t,{value:n.bind(this),writable:!0,configurable:!0,enumerable:!1})})},di=(...n)=>{const e=[];let t=0;const i=n.length;let r=0,s,o=0;for(;o<i;++o)if(s=n[o],s!==void 0){r=s.length;let a=0;for(;a<r;++a)e[t++]=s[a]}return e},pu=(...n)=>{const e=n.length;let t,i=0;for(;e>i;++i)if(t=n[i],t!==void 0)return t;throw Xn(20)},kQ=function(){const n=Function.prototype,e=Object.getPrototypeOf,t=new WeakMap;let i=n,r=0,s;return function(o){if(s=t.get(o),s===void 0)for(t.set(o,s=[i=o]),r=0;(i=e(i))!==n;)s[++r]=i;return s}}();function kA(...n){return Q5(on(),...n)}const u$=(()=>{const n=new WeakMap;let e=!1,t="",i=0;return r=>(e=n.get(r),e==null&&(i=(t=r.toString()).length,e=i>28&&t.indexOf("[native code] }")===i-15,n.set(r,e)),e)})(),it=(n,e)=>fi(n)?n.then(e):e(n),Ri=(...n)=>{let e,t,i,r=0,s=n.length;for(;r<s;++r)e=n[r],fi(e=n[r])&&(t===void 0?t=e:i===void 0?i=[t,e]:i.push(e));return i===void 0?t:Promise.all(i)},DQ=(n,e)=>new so(n,0,e),ew=(n,e)=>new so(n,1,e),i6=(n,e)=>new so(n,2,e),LQ=(n,e)=>new so(n,3,e),NQ=(n,e)=>new so(n,3,r6(e)),t_=(n,e)=>new so(e,5,n),HQ=(n,...e)=>new JQ(n,e),h$=new WeakMap,r6=n=>(e,t,i)=>{let r=h$.get(e);if(r===void 0&&h$.set(e,r=new WeakMap),r.has(i))return r.get(i);const s=n(e,t,i);return r.set(i,s),s},zd={instance:DQ,singleton:ew,transient:i6,callback:LQ,cachedCallback:NQ,aliasTo:t_,defer:HQ},Bw=function(n){return function(t){t.register(ew(this,this),t_(this,n))}},Dd="au:annotation",ku=(n,e)=>e===void 0?`${Dd}:${n}`:`${Dd}:${n}:${e}`,$Q=(n,e)=>{const t=nl(Dd,n);t===void 0?Qv([e],n,Dd):t.push(e)},FQ=Fw({name:"au:annotation",appendTo:$Q,set(n,e,t){Qv(t,n,ku(e))},get:(n,e)=>nl(ku(e),n),getKeys(n){let e=nl(Dd,n);return e===void 0&&Qv(e=[],n,Dd),e},isKey:n=>n.startsWith(Dd),keyFor:ku}),Ka="au:resource",bf=(n,e,t)=>`${Ka}:${n}`,s6={annotation:FQ},o6=Object.prototype.hasOwnProperty;function Is(n,e,t,i){let r=nl(ku(n),t);return r===void 0?(r=e[n],r===void 0?(r=t[n],r===void 0||!o6.call(t,n)?i():r):r):r}function Co(n,e,t){let i=nl(ku(n),e);return i===void 0?(i=e[n],i===void 0||!o6.call(e,n)?t():i):i}function So(n,e,t){const i=e[n];return i===void 0?t():i}const dl=Symbol.for("au:registrable"),BQ={none(n){throw Xn(2,n)},singleton:n=>new so(n,1,n),transient:n=>new so(n,2,n)};class Za{constructor(e,t){this.inheritParentResources=e,this.defaultResolver=t}static from(e){return e===void 0||e===Za.DEFAULT?Za.DEFAULT:new Za(e.inheritParentResources??!1,e.defaultResolver??BQ.singleton)}}Za.DEFAULT=Za.from({});const VQ=n=>new Jb(null,Za.from(n)),WQ=new Set("Array ArrayBuffer Boolean DataView Date Error EvalError Float32Array Float64Array Function Int8Array Int16Array Int32Array Map Number Object Promise RangeError ReferenceError RegExp Set SharedArrayBuffer String SyntaxError TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array URIError WeakMap WeakSet".split(" "));let jQ=0,Pn=null;class Jb{get depth(){return this._parent===null?0:this._parent.depth+1}get parent(){return this._parent}constructor(e,t){if(this.id=++jQ,this._registerDepth=0,this._disposableResolvers=new Map,this._parent=e,this.config=t,this._resolvers=new Map,this.res={},e===null)this.root=this,this._factories=new Map;else if(this.root=e.root,this._factories=e._factories,t.inheritParentResources)for(const i in e.res)this.registerResolver(i,e.res[i]);this._resolvers.set(Fp,UQ)}register(...e){var u,h,d,f;if(++this._registerDepth===100)throw Xn(6,...e);let t,i,r,s,o,a=0,l=e.length,c;for(;a<l;++a)if(t=e[a],!!e_(t))if(Hb(t))t.register(this);else if((c=nl(Ka,t))!=null)c.register(this);else if(YQ(t)){const g=(u=t[Symbol.metadata])==null?void 0:u[dl];if(Hb(g))g.register(this);else if(St((h=t.$au)==null?void 0:h.type)){const p=t.$au,m=(t.aliases??bt).concat(p.aliases??bt);let v=`${Ka}:${p.type}:${p.name}`;if(this.has(v,!1)){(d=globalThis.console)==null||d.warn(Xn(7,v));continue}for(t_(t,v).register(this),this.has(t,!1)||ew(t,t).register(this),s=0,o=m.length;s<o;++s){if(v=`${Ka}:${p.type}:${m[s]}`,this.has(v,!1)){(f=globalThis.console)==null||f.warn(Xn(7,v));continue}t_(t,v).register(this)}}else ew(t,t).register(this)}else for(i=Object.keys(t),s=0,o=i.length;s<o;++s)r=t[i[s]],e_(r)&&(Hb(r)?r.register(this):this.register(r));return--this._registerDepth,this}registerResolver(e,t,i=!1){mm(e);const r=this._resolvers,s=r.get(e);if(s==null){if(r.set(e,t),UE(e)){if(this.res[e]!==void 0)throw Xn(7,e);this.res[e]=t}}else s instanceof so&&s._strategy===4?s._state.push(t):r.set(e,new so(e,4,[s,t]));return i&&this._disposableResolvers.set(e,t),t}deregister(e){mm(e);const t=this._resolvers.get(e);t!=null&&(this._resolvers.delete(e),UE(e)&&delete this.res[e],this._disposableResolvers.has(e)&&(t.dispose(),this._disposableResolvers.delete(e)))}registerTransformer(e,t){const i=this.getResolver(e);if(i==null)return!1;if(i.getFactory){const r=i.getFactory(this);return r==null?!1:(r.registerTransformer(t),!0)}return!1}getResolver(e,t=!0){if(mm(e),e.resolve!==void 0)return e;const i=Pn;let r=Pn=this,s,o;try{for(;r!=null;)if(s=r._resolvers.get(e),s==null){if(r._parent==null)return o=g$(e)?this:r,t?this._jitRegister(e,o):null;r=r._parent}else return s}finally{Pn=i}return null}has(e,t=!1){var i;return this._resolvers.has(e)||UE(e)&&e in this.res||((t&&((i=this._parent)==null?void 0:i.has(e,!0)))??!1)}get(e){if(mm(e),e.$isResolver)return e.resolve(this,this);const t=Pn;let i=Pn=this,r,s;try{for(;i!=null;)if(r=i._resolvers.get(e),r==null){if(i._parent==null)return s=g$(e)?this:i,r=this._jitRegister(e,s),r.resolve(i,this);i=i._parent}else return r.resolve(i,this)}finally{Pn=t}throw Xn(8,e)}getAll(e,t=!1){mm(e);const i=Pn,r=Pn=this;let s=r,o,a=bt;try{if(t){for(;s!=null;)o=s._resolvers.get(e),o!=null&&(a=a.concat(f$(o,s,r))),s=s._parent;return a}for(;s!=null;)if(o=s._resolvers.get(e),o==null){if(s=s._parent,s==null)return bt}else return f$(o,s,r)}finally{Pn=i}return bt}invoke(e,t){if(u$(e))throw Xn(15,e);const i=Pn;Pn=this;{let r,s;try{r=$g(e).map(o=>this.get(s=o))}catch(o){throw vp(`[DEV:aurelia] Error during construction of ${e.name?e.name:`(Anonymous) ${String(e)}`}, caused by dependency: ${String(s)}`),Pn=i,o}try{return t===void 0?new e(...r):new e(...r,...t)}catch(o){throw vp(`[DEV:aurelia] Error during construction of ${e.name?e.name:`(Anonymous) ${String(e)}`}`),o}finally{Pn=i}}try{return t===void 0?new e(...$g(e).map(tw,this)):new e(...$g(e).map(tw,this),...t)}finally{Pn=i}}hasFactory(e){return this._factories.has(e)}getFactory(e){let t=this._factories.get(e);if(t===void 0){if(u$(e))throw Xn(15,e);this._factories.set(e,t=new zQ(e,$g(e)))}return t}registerFactory(e,t){this._factories.set(e,t)}createChild(e){return e===void 0&&this.config.inheritParentResources?this.config===Za.DEFAULT?new Jb(this,this.config):new Jb(this,Za.from({...this.config,inheritParentResources:!1})):new Jb(this,Za.from(e??this.config))}disposeResolvers(){var s;const e=this._resolvers,t=this._disposableResolvers;let i,r;for([r,i]of t.entries())(s=i.dispose)==null||s.call(i),e.delete(r);t.clear()}useResources(e){const t=e.res;for(const i in t)this.registerResolver(i,t[i])}find(e,t){var o,a;const i=St(t)?`${Ka}:${e}:${t}`:e;let r=this,s=r.res[i];return s==null&&(r=r.root,s=r.res[i]),s==null?null:((a=(o=s.getFactory)==null?void 0:o.call(s,r))==null?void 0:a.Type)??null}dispose(){this._disposableResolvers.size>0&&this.disposeResolvers(),this._resolvers.clear(),this.root===this&&(this._factories.clear(),this.res={})}_jitRegister(e,t){const i=Hb(e);if(!kt(e)&&!i)throw Xn(9,e);if(WQ.has(e.name))throw Xn(10,e);if(i){const s=e.register(t,e);if(!(s instanceof Object)||s.resolve==null){const o=t._resolvers.get(e);if(o!=null)return o;throw Xn(11,e)}return s}if(e.$isInterface)throw Xn(12,e.friendlyName);const r=this.config.defaultResolver(e,t);return t._resolvers.set(e,r),r}}class zQ{constructor(e,t){this.Type=e,this.dependencies=t,this.transformers=null}construct(e,t){const i=Pn;Pn=e;let r;{let s,o;try{s=this.dependencies.map(a=>e.get(o=a))}catch(a){throw vp(`[DEV:aurelia] Error during construction of ${this.Type.name?this.Type.name:`(Anonymous) ${String(this.Type)}`}, caused by dependency: ${String(o)}`),Pn=i,a}try{return t===void 0?r=new this.Type(...s):r=new this.Type(...s,...t),this.transformers==null?r:this.transformers.reduce(d$,r)}catch(a){throw vp(`[DEV:aurelia] Error during construction of ${this.Type.name?this.Type.name:`(Anonymous) ${String(this.Type)}`}`),a}finally{Pn=i}}try{return t===void 0?r=new this.Type(...this.dependencies.map(tw,e)):r=new this.Type(...this.dependencies.map(tw,e),...t),this.transformers==null?r:this.transformers.reduce(d$,r)}finally{Pn=i}}registerTransformer(e){(this.transformers??(this.transformers=[])).push(e)}}function d$(n,e){return e(n)}function mm(n){if(n==null)throw Xn(14)}function tw(n){return this.get(n)}function ve(...n){if(Pn==null)throw Xn(16,...n);if(n.length===1)try{return Pn.get(n[0])}catch(e){throw vp(`[DEV:aurelia] resolve() call error for: ${String(n[0])}`),e}else{let e;try{return n.map(t=>Pn.get(e=t))}catch(t){throw vp(`[DEV:aurelia] resolve() call error for: ${String(e)}`),t}}return n.length===1?Pn.get(n[0]):n.map(tw,Pn)}const f$=(n,e,t)=>{if(n instanceof so&&n._strategy===4){const i=n._state,r=i.length,s=Array(r);let o=0;for(;o<r;++o)s[o]=i[o].resolve(e,t);return s}return[n.resolve(e,t)]},UQ={$isResolver:!0,resolve(n,e){return e}},Hb=n=>kt(n==null?void 0:n.register),GQ=n=>Hb(n)&&typeof n.registerInRequestor=="boolean",g$=n=>GQ(n)&&n.registerInRequestor,YQ=n=>n.prototype!==void 0,UE=n=>St(n)&&n.indexOf(":")>0;class KQ{constructor(e,t){this._container=e,this._key=t}instance(e){return this._registerResolver(0,e)}singleton(e){return this._registerResolver(1,e)}transient(e){return this._registerResolver(2,e)}callback(e){return this._registerResolver(3,e)}cachedCallback(e){return this._registerResolver(3,r6(e))}aliasTo(e){return this._registerResolver(5,e)}_registerResolver(e,t){const{_container:i,_key:r}=this;return this._container=this._key=void 0,i.registerResolver(r,new so(r,e,t))}}const bm=n=>{const e=n.slice(),t=Object.keys(n),i=t.length;let r;for(let s=0;s<i;++s)r=t[s],Jv(r)||(e[r]=n[r]);return e},uS=ku("di:paramtypes"),qQ=n=>nl(uS,n),a6=n=>nl("design:paramtypes",n),p$=n=>{var e;return(e=n.metadata)[uS]??(e[uS]=[])},$g=n=>{const e=ku("di:dependencies");let t=nl(e,n);if(t===void 0){const i=n.inject;if(i===void 0){const r=a6(n),s=qQ(n);if(r===void 0)if(s===void 0){const o=Object.getPrototypeOf(n);kt(o)&&o!==Function.prototype?t=bm($g(o)):t=[]}else t=bm(s);else if(s===void 0)t=bm(r);else{t=bm(r);let o=s.length,a,l=0;for(;l<o;++l)a=s[l],a!==void 0&&(t[l]=a);const c=Object.keys(s);let u;for(l=0,o=c.length,l=0;l<o;++l)u=c[l],Jv(u)||(t[u]=s[u])}}else t=bm(i);Qv(t,n,e)}return t},kc=(n,e)=>{const t=kt(n)?n:e,i=(St(n)?n:void 0)??"(anonymous)",r={$isInterface:!0,friendlyName:i,toString:()=>`InterfaceSymbol<${i}>`,register:t!=null?(s,o)=>t(new KQ(s,o??r)):void 0};return r},MO=(...n)=>(e,t)=>{switch(t.kind){case"class":{const i=p$(t);let r,s=0;for(;s<n.length;++s)r=n[s],r!==void 0&&(i[s]=r);break}case"field":{const i=p$(t),r=n[0];r!==void 0&&(i[t.name]=r);break}default:throw Xn(22,String(t.name),t.kind)}},Qu=(MQ(),{createContainer:VQ,getDesignParamtypes:a6,getDependencies:$g,createInterface:kc,inject:MO,transient(n){return n.register=function(e){return i6(n,n).register(e,n)},n.registerInRequestor=!1,n},singleton(n,e=QQ){return n.register=function(t){return ew(n,n).register(t,n)},n.registerInRequestor=e.scoped,n}}),Fp=kc("IContainer"),XQ=Fp;function m$(n,e){return Qu.transient(n)}function ZQ(n,e){return n==null?m$:m$(n)}const QQ={scoped:!1};class so{get $isResolver(){return!0}constructor(e,t,i){this._resolving=!1,this._cachedFactory=null,this._key=e,this._strategy=t,this._state=i}register(e,t){return e.registerResolver(t||this._key,this)}resolve(e,t){switch(this._strategy){case 0:return this._state;case 1:{if(this._resolving)throw Xn(3,this._state.name);return this._resolving=!0,this._state=(this._cachedFactory=e.getFactory(this._state)).construct(t),this._strategy=0,this._resolving=!1,this._state}case 2:{const i=e.getFactory(this._state);if(i===null)throw Xn(4,this._key);return i.construct(t)}case 3:return this._state(e,t,this);case 4:return this._state[0].resolve(e,t);case 5:return t.get(this._state);default:throw Xn(5,this._strategy)}}getFactory(e){var t,i;switch(this._strategy){case 1:case 2:return e.getFactory(this._state);case 5:return((i=(t=e.getResolver(this._state))==null?void 0:t.getFactory)==null?void 0:i.call(t,e))??null;case 0:return this._cachedFactory;default:return null}}}class gi{get friendlyName(){return this._name}constructor(e,t=null,i=null){this._name=e,this._instance=t,this._Type=i}prepare(e){this._instance=e}get $isResolver(){return!0}resolve(){if(this._instance==null)throw Xn(13,this._name);return this._instance}getFactory(e){return this._Type==null?null:e.getFactory(this._Type)}dispose(){this._instance=null}}class JQ{constructor(e,t){this.key=e,this.params=t}register(e){e.has(this.key,!0)?e.get(this.key).register(e,...this.params):e.register(...this.params.filter(t=>typeof t=="object"))}}const bt=Fw([]),l6=Fw({});function Qa(){}const Bp=kc("IPlatform");function Vw(n){return function(e){function t(i,r){MO(t)(i,r)}return t.$isResolver=!0,t.resolve=function(i,r){return n(e,i,r)},t}}const AO=(n,e=!1)=>{function t(i,r){MO(t)(i,r)}return t.$isResolver=!0,t.resolve=(i,r)=>r.getAll(n,e),t},c6=Vw((n,e,t)=>{if(t.has(n,!0))return t.get(n)}),eJ=Vw((n,e,t)=>t.has(n,!1)?t.get(n):void 0),wp=Vw((n,e,t)=>t.has(n,!1)?t.get(n):t.root.get(n)),tJ=Vw((n,e,t)=>t.has(n,!1)?t.get(n):t.root.has(n,!1)?t.root.get(n):void 0),nJ=Vw((n,e,t)=>t===t.root?t.getAll(n,!1):t.has(n,!1)?t.getAll(n,!1).concat(t.root.getAll(n,!1)):t.root.getAll(n,!1));function $f(n,e,t,i,r,s){function o(v){if(v!==void 0&&typeof v!="function")throw new TypeError("Function expected");return v}for(var a=i.kind,l=a==="getter"?"get":a==="setter"?"set":"value",c=n?i.static?n:n.prototype:null,u=c?Object.getOwnPropertyDescriptor(c,i.name):{},h,d=!1,f=t.length-1;f>=0;f--){var g={};for(var p in i)g[p]=p==="access"?{}:i[p];for(var p in i.access)g.access[p]=i.access[p];g.addInitializer=function(v){if(d)throw new TypeError("Cannot add initializers after decoration has completed");s.push(o(v||null))};var m=(0,t[f])(a==="accessor"?{get:u.get,set:u.set}:u[l],g);if(a==="accessor"){if(m===void 0)continue;if(m===null||typeof m!="object")throw new TypeError("Object expected");(h=o(m.get))&&(u.get=h),(h=o(m.set))&&(u.set=h),(h=o(m.init))&&r.unshift(h)}else(h=o(m))&&(a==="field"?r.unshift(h):u[l]=h)}c&&Object.defineProperty(c,i.name,u),d=!0}function iJ(n,e,t){for(var i=arguments.length>2,r=0;r<e.length;r++)t=i?e[r].call(n,t):e[r].call(n);return i?t:void 0}const ev=0,tv=1,nv=2,np=3,iv=4,rv=5,rJ=6,sJ=Fw({trace:ev,debug:tv,info:nv,warn:np,error:iv,fatal:rv,none:rJ}),u6=kc("ILogConfig",n=>n.instance(new uJ("no-colors",np))),oJ=kc("ISink"),aJ=kc("ILogEventFactory",n=>n.singleton(dJ)),Ud=kc("ILogger",n=>n.singleton(fJ)),lJ=kc("ILogScope"),cJ=Fw({key:ku("logger-sink-handles"),define(n,e){Qv(e.handles,n,this.key)},getHandles(n){return nl(this.key,n.constructor)}}),Xl=kA({red(n){return`\x1B[31m${n}\x1B[39m`},green(n){return`\x1B[32m${n}\x1B[39m`},yellow(n){return`\x1B[33m${n}\x1B[39m`},blue(n){return`\x1B[34m${n}\x1B[39m`},magenta(n){return`\x1B[35m${n}\x1B[39m`},cyan(n){return`\x1B[36m${n}\x1B[39m`},white(n){return`\x1B[37m${n}\x1B[39m`},grey(n){return`\x1B[90m${n}\x1B[39m`}});class uJ{constructor(e,t){this.colorOptions=e,this.level=t}}const GE=function(){const n={"no-colors":kA({TRC:"TRC",DBG:"DBG",INF:"INF",WRN:"WRN",ERR:"ERR",FTL:"FTL",QQQ:"???"}),colors:kA({TRC:Xl.grey("TRC"),DBG:Xl.grey("DBG"),INF:Xl.white("INF"),WRN:Xl.yellow("WRN"),ERR:Xl.red("ERR"),FTL:Xl.red("FTL"),QQQ:Xl.grey("???")})};return(e,t)=>e<=ev?n[t].TRC:e<=tv?n[t].DBG:e<=nv?n[t].INF:e<=np?n[t].WRN:e<=iv?n[t].ERR:e<=rv?n[t].FTL:n[t].QQQ}(),b$=(n,e)=>e==="no-colors"?n.join("."):n.map(Xl.cyan).join("."),YE=(n,e)=>e==="no-colors"?new Date(n).toISOString():Xl.grey(new Date(n).toISOString());class hJ{constructor(e,t,i,r,s,o){this.severity=e,this.message=t,this.optionalParams=i,this.scope=r,this.colorOptions=s,this.timestamp=o}toString(){const{severity:e,message:t,scope:i,colorOptions:r,timestamp:s}=this;return i.length===0?`${YE(s,r)} [${GE(e,r)}] ${t}`:`${YE(s,r)} [${GE(e,r)} ${b$(i,r)}] ${t}`}getFormattedLogInfo(e=!1){const{severity:t,message:i,scope:r,colorOptions:s,timestamp:o,optionalParams:a}=this;let l=null,c="";e&&i instanceof Error?l=i:c=i;const u=r.length===0?"":` ${b$(r,s)}`;let h=`${YE(o,s)} [${GE(t,s)}${u}] ${c}`;if(a===void 0||a.length===0)return l===null?[h]:[h,l];let d=0;for(;h.includes("%s");)h=h.replace("%s",String(a[d++]));return l!==null?[h,l,...a.slice(d)]:[h,...a.slice(d)]}}class dJ{constructor(){this.config=ve(u6)}createLogEvent(e,t,i,r){return new hJ(t,i,r,e.scope,this.config.colorOptions,Date.now())}}let fJ=(()=>{var n;let e=[],t,i,r,s,o,a;return n=class{constructor(c=ve(u6),u=ve(aJ),h=ve(AO(oJ)),d=ve(c6(lJ))??[],f=null){this.scope=(iJ(this,e),d),this._scopedLoggers=on();let g,p,m,v,y,w;if(this.config=c,this._factory=u,this.sinks=h,f===null){this.root=this,this.parent=this,g=this._traceSinks=[],p=this._debugSinks=[],m=this._infoSinks=[],v=this._warnSinks=[],y=this._errorSinks=[],w=this._fatalSinks=[];for(const R of h){const x=cJ.getHandles(R);((x==null?void 0:x.includes(ev))??!0)&&g.push(R),((x==null?void 0:x.includes(tv))??!0)&&p.push(R),((x==null?void 0:x.includes(nv))??!0)&&m.push(R),((x==null?void 0:x.includes(np))??!0)&&v.push(R),((x==null?void 0:x.includes(iv))??!0)&&y.push(R),((x==null?void 0:x.includes(rv))??!0)&&w.push(R)}}else this.root=f.root,this.parent=f,g=this._traceSinks=f._traceSinks,p=this._debugSinks=f._debugSinks,m=this._infoSinks=f._infoSinks,v=this._warnSinks=f._warnSinks,y=this._errorSinks=f._errorSinks,w=this._fatalSinks=f._fatalSinks}trace(c,...u){this.config.level<=ev&&this._emit(this._traceSinks,ev,c,u)}debug(c,...u){this.config.level<=tv&&this._emit(this._debugSinks,tv,c,u)}info(c,...u){this.config.level<=nv&&this._emit(this._infoSinks,nv,c,u)}warn(c,...u){this.config.level<=np&&this._emit(this._warnSinks,np,c,u)}error(c,...u){this.config.level<=iv&&this._emit(this._errorSinks,iv,c,u)}fatal(c,...u){this.config.level<=rv&&this._emit(this._fatalSinks,rv,c,u)}scopeTo(c){const u=this._scopedLoggers;let h=u[c];return h===void 0&&(h=u[c]=new n(this.config,this._factory,null,this.scope.concat(c),this)),h}_emit(c,u,h,d){const f=kt(h)?h():h,g=this._factory.createLogEvent(this,u,f,d);for(let p=0,m=c.length;p<m;++p)c[p].handleEvent(g)}},(()=>{const l=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;t=[Hf],i=[Hf],r=[Hf],s=[Hf],o=[Hf],a=[Hf],$f(n,null,t,{kind:"method",name:"trace",static:!1,private:!1,access:{has:c=>"trace"in c,get:c=>c.trace},metadata:l},null,e),$f(n,null,i,{kind:"method",name:"debug",static:!1,private:!1,access:{has:c=>"debug"in c,get:c=>c.debug},metadata:l},null,e),$f(n,null,r,{kind:"method",name:"info",static:!1,private:!1,access:{has:c=>"info"in c,get:c=>c.info},metadata:l},null,e),$f(n,null,s,{kind:"method",name:"warn",static:!1,private:!1,access:{has:c=>"warn"in c,get:c=>c.warn},metadata:l},null,e),$f(n,null,o,{kind:"method",name:"error",static:!1,private:!1,access:{has:c=>"error"in c,get:c=>c.error},metadata:l},null,e),$f(n,null,a,{kind:"method",name:"fatal",static:!1,private:!1,access:{has:c=>"fatal"in c,get:c=>c.fatal},metadata:l},null,e),l&&Object.defineProperty(n,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:l})})(),n})();class gJ{constructor(e,t){this.type=e,this.cb=t}handle(e){e instanceof this.type&&this.cb.call(null,e)}}const Ww=kc("IEventAggregator",n=>n.singleton(pJ));class pJ{constructor(){this.eventLookup={},this.messageHandlers=[]}publish(e,t){if(!e)throw Xn(18,e);if(St(e)){let i=this.eventLookup[e];if(i!==void 0){i=i.slice();let r=i.length;for(;r-- >0;)i[r](t,e)}}else{const i=this.messageHandlers.slice();let r=i.length;for(;r-- >0;)i[r].handle(e)}}subscribe(e,t){if(!e)throw Xn(19,e);let i,r;return St(e)?(this.eventLookup[e]===void 0&&(this.eventLookup[e]=[]),i=t,r=this.eventLookup[e]):(i=new gJ(e,t),r=this.messageHandlers),r.push(i),{dispose(){const s=r.indexOf(i);s!==-1&&r.splice(s,1)}}}subscribeOnce(e,t){const i=this.subscribe(e,(r,s)=>{i.dispose(),t(r,s)});return i}}const h6="AccessThis",mJ="AccessBoundary",PO="AccessGlobal",IO="AccessScope",bJ="ArrayLiteral",vJ="ObjectLiteral",wJ="PrimitiveLiteral",yJ="Template",CJ="Unary",SJ="CallScope",_J="CallMember",RJ="CallFunction",EJ="CallGlobal",YR="AccessMember",d6="AccessKeyed",xJ="TaggedTemplate",TJ="Binary",MJ="Conditional",AJ="Assign",PJ="ArrowFunction",IJ="ValueConverter",OJ="BindingBehavior",f6="ArrayBindingPattern",g6="ObjectBindingPattern",p6="BindingIdentifier",kJ="ForOfStatement",DJ="Interpolation",m6="ArrayDestructuring",LJ="ObjectDestructuring",NJ="DestructuringAssignmentLeaf",HJ="Custom";class b6{constructor(e){this.value=e,this.$kind=HJ}evaluate(...e){return this.value}assign(...e){return e}bind(...e){}unbind(...e){}accept(e){}}class $J{constructor(e,t,i){this.expression=e,this.name=t,this.args=i,this.$kind=OJ,this.key=`_bb_${t}`}}class FJ{constructor(e,t,i){this.expression=e,this.name=t,this.args=i,this.$kind=IJ}}class BJ{constructor(e,t,i="="){this.target=e,this.value=t,this.op=i,this.$kind=AJ}}class VJ{constructor(e,t,i){this.condition=e,this.yes=t,this.no=i,this.$kind=MJ}}class WJ{constructor(e){this.name=e,this.$kind=PO}}class sv{constructor(e=0){this.ancestor=e,this.$kind=h6}}class jJ{constructor(){this.$kind=mJ}}class ov{constructor(e,t=0){this.name=e,this.ancestor=t,this.$kind=IO}}const v6=n=>n.$kind===PO||(n.$kind===YR||n.$kind===d6)&&n.accessGlobal;class DA{constructor(e,t,i=!1){this.object=e,this.name=t,this.optional=i,this.$kind=YR,this.accessGlobal=v6(e)}}class w6{constructor(e,t,i=!1){this.object=e,this.key=t,this.optional=i,this.$kind=d6,this.accessGlobal=v6(e)}}class y6{constructor(e,t,i=0,r=!1){this.name=e,this.args=t,this.ancestor=i,this.optional=r,this.$kind=SJ}}class n_{constructor(e,t,i,r=!1,s=!1){this.object=e,this.name=t,this.args=i,this.optionalMember=r,this.optionalCall=s,this.$kind=_J}}class hS{constructor(e,t,i=!1){this.func=e,this.args=t,this.optional=i,this.$kind=RJ}}class zJ{constructor(e,t){this.name=e,this.args=t,this.$kind=EJ}}class UJ{constructor(e,t,i){this.operation=e,this.left=t,this.right=i,this.$kind=TJ}}class v${constructor(e,t,i=0){this.operation=e,this.expression=t,this.pos=i,this.$kind=CJ}}class Bi{constructor(e){this.value=e,this.$kind=wJ}}Bi.$undefined=new Bi(void 0);Bi.$null=new Bi(null);Bi.$true=new Bi(!0);Bi.$false=new Bi(!1);Bi.$empty=new Bi("");class LA{constructor(e){this.elements=e,this.$kind=bJ}}LA.$empty=new LA(bt);class NA{constructor(e,t){this.keys=e,this.values=t,this.$kind=vJ}}NA.$empty=new NA(bt,bt);class i_{constructor(e,t=bt){this.cooked=e,this.expressions=t,this.$kind=yJ}}i_.$empty=new i_([""]);class C6{constructor(e,t,i,r=bt){this.cooked=e,this.func=i,this.expressions=r,this.$kind=xJ,e.raw=t}}class GJ{constructor(e){this.elements=e,this.$kind=f6}}class YJ{constructor(e,t){this.keys=e,this.values=t,this.$kind=g6}}class r_{constructor(e){this.name=e,this.$kind=p6}}class KJ{constructor(e,t,i){this.declaration=e,this.iterable=t,this.semiIdx=i,this.$kind=kJ}}class qJ{constructor(e,t=bt){this.parts=e,this.expressions=t,this.$kind=DJ,this.isMulti=t.length>1,this.firstExpression=t[0]}}class XJ{constructor(e,t,i,r){this.$kind=e,this.list=t,this.source=i,this.initializer=r}}class S6{constructor(e,t,i){this.target=e,this.source=t,this.initializer=i,this.$kind=NJ}}class HA{constructor(e,t,i=!1){this.args=e,this.body=t,this.rest=i,this.$kind=PJ}}const $A=String,dS=()=>Object.create(null),pn=(n,...e)=>new Error(`AUR${$A(n).padStart(4,"0")}: ${QJ(n,...e)}`),ZJ={99:"Method {{0}} not implemented",101:'Ast eval error: binding behavior "{{0}}" could not be found. Did you forget to register it as a dependency?',102:'Ast eval error: binding behavior "{{0}}" already applied.',103:'Ast eval error: value converter "{{0}}" could not be found. Did you forget to register it as a dependency?',105:"Ast eval error: unable to find $host context. Did you forget [au-slot] attribute?",106:'Ast eval error: invalid assignment. "$host" is a reserved keyword.',107:"Ast eval error: expression is not a function.",109:'Ast eval error: unknown unary operator: "{{0}}"',108:'Ast eval error: unknown binary operator: "{{0}}"',110:"Ast eval error: left-hand side of tagged template expression is not a function.",111:'Ast eval error: expected "{{0}}" to be a function',112:"Ast eval error: cannot use non-object value for destructuring assignment.",151:'Expression error: invalid start: "{{0}}"',152:'Expression error: spread operator is not supported: "{{0}}"',153:'Expression error: expected identifier: "{{0}}"',154:'Expression error: invalid member expression: "{{0}}"',155:'Expression error: unexpected end of expression: "{{0}}"',156:'Expression error: unconsumed token: "{{0}}" at position {{1}} of "{{2}}"',157:"Expression error: invalid empty expression. Empty expression is only valid in event bindings (trigger, delegate, capture etc...)",158:'Expression error: left hand side of expression is not assignable: "{{0}}"',159:'Expression error: expected identifier to come after value converter operator: "{{0}}"',160:"Expression error: expected identifier to come after binding behavior operator: {{0}}",161:'Expression error: unexpected keyword "of": "{{0}}"',162:'Expression error: unexpected keyword "import": "{{0}}"',163:'Expression error: invalid BindingIdentifier at left hand side of "of": "{{0}}" | kind: {{1}}',164:'Expression error: invalid or unsupported property definition in object literal: "{{0}}"',165:'Expression error: unterminated quote in string literal: "{{0}}"',166:'Expression error: unterminated template string: "{{0}}"',167:'Expression error: missing expected token "{{0}}" in "{{1}}"',168:'Expression error: unexpected character: "{{0}}"',170:'Expression error: unexpected "{{0}}" at position "{{1}}" for destructuring assignment in "{{2}}"',171:'Expression error: unexpected {{0}} at position "{{1}}" for optional chain in "{{2}}"',172:'Expression error: invalid tagged template on optional chain in "{{1}}"',173:'Expression error: invalid arrow parameter list in "{{0}}"',174:'Expression error: arrow function with default parameters is not supported: "{{0}}"',175:'Expression error: arrow function with destructuring parameters is not supported: "{{0}}"',176:'Expression error: rest parameter must be last formal parameter in arrow function: "{{0}}"',178:'Expression error: arrow function with function body is not supported: "{{0}}"',179:`Expression error: unexpected token '.' at position "{{1}}" in "{{0}}"`},QJ=(n,...e)=>{var i;let t=ZJ[n];for(let r=0;r<e.length;++r){const s=new RegExp(`{{${r}(:.*)?}}`,"g");let o=s.exec(t);for(;o!=null;){const a=(i=o[1])==null?void 0:i.slice(1);let l=e[r];if(l!=null)switch(a){case"toString":l=Object.prototype.toString.call(l);break;case"join(!=)":l=l.join("!=");break;case"element":l=l==="*"?"all elements":`<${l} />`;break;default:a!=null&&a.startsWith(".")?l=$A(l[a.slice(1)]):l=$A(l)}t=t.slice(0,o.index)+l+t.slice(s.lastIndex),o=s.exec(t)}}return t},Vp=Qu.createInterface("IExpressionParser");class _6{constructor(){this._expressionLookup=dS(),this._forOfLookup=dS(),this._interpolationLookup=dS()}parse(e,t){let i;switch(t){case x6:return new b6(e);case s_:return i=this._interpolationLookup[e],i===void 0&&(i=this._interpolationLookup[e]=this.$parse(e,t)),i;case lc:return i=this._forOfLookup[e],i===void 0&&(i=this._forOfLookup[e]=this.$parse(e,t)),i;default:{if(e.length===0){if(t===iee||t===w$)return Bi.$empty;throw wee()}return i=this._expressionLookup[e],i===void 0&&(i=this._expressionLookup[e]=this.$parse(e,t)),i}}}$parse(e,t){return Nt=e,yt=0,il=e.length,bs=0,Gd=0,Pe=6291456,wn="",dn=Yd(0),jt=!0,Ot=!1,$b=!0,kO=-1,Qn(61,t===void 0?w$:t)}}_6.register=Bw(Vp);function OO(n){switch(n){case 98:return 8;case 116:return 9;case 110:return 10;case 118:return 11;case 102:return 12;case 114:return 13;case 34:return 34;case 39:return 39;case 92:return 92;default:return n}}const JJ=Bi.$false,eee=Bi.$true,tee=Bi.$null,R6=Bi.$undefined,av=new sv(0),KE=new sv(1),nee=new jJ,yc="None",s_="Interpolation",lc="IsIterator",E6="IsChainable",iee="IsFunction",w$="IsProperty",x6="IsCustom";let Nt="",yt=0,il=0,bs=0,Gd=0,Pe=6291456,wn="",dn,jt=!0,Ot=!1,$b=!0,kO=-1;const nw=String.fromCharCode,Yd=n=>Nt.charCodeAt(n),Cc=()=>Nt.slice(Gd,yt),ree="Infinity NaN isFinite isNaN parseFloat parseInt decodeURI decodeURIComponent encodeURI encodeURIComponent Array BigInt Boolean Date Map Number Object RegExp Set String JSON Math Intl".split(" ");function Qn(n,e){if(e===x6)return new b6(Nt);if(yt===0){if(e===s_)return dee();if(Ge(),Pe&4194304)throw mee()}jt=513>n,Ot=!1,$b=514>n;let t=!1,i,r=0;if(Pe&131072){const s=Mg[Pe&63];Ge(),i=new v$(s,Qn(514,e)),jt=!1}else{e:switch(Pe){case 12295:r=bs,jt=!1,$b=!1;do switch(Ge(),++r,Pe){case 65546:if(Ge(),!(Pe&12288))throw Wl();break;case 11:case 12:throw Wl();case 2162701:if(Ot=!0,Ge(),!(Pe&12288)){i=r===0?av:r===1?KE:new sv(r),t=!0;break e}break;default:if(Pe&2097152){i=r===0?av:r===1?KE:new sv(r);break e}throw bee()}while(Pe===12295);case 4096:{const s=wn;if(e===lc)i=new r_(s);else if($b&&ree.includes(s))i=new WJ(s);else{if($b&&s==="import")throw Ree();i=new ov(s,r)}if(jt=!Ot,Ge(),Ba(51)){if(Pe===524297)throw I6();const o=Ot,a=bs;++bs;const l=Qn(62,yc);Ot=o,bs=a,jt=!1,i=new HA([new r_(s)],l)}break}case 11:throw Aee();case 12:throw FA();case 12292:switch(jt=!1,Ge(),bs){case 0:i=av;break;case 1:i=KE;break;default:i=new sv(bs);break}break;case 12293:jt=!1,Ge(),i=nee;break;case 2688008:i=aee(e);break;case 2688019:i=Nt.search(/\s+of\s+/)>yt?see():lee(e);break;case 524297:i=hee(e);break;case 2163760:i=new i_([wn]),jt=!1,Ge();break;case 2163761:i=qE(e,i,!1);break;case 16384:case 32768:i=new Bi(wn),jt=!1,Ge();break;case 8194:case 8195:case 8193:case 8192:i=Mg[Pe&63],jt=!1,Ge();break;default:throw yt>=il?vee():XE()}if(e===lc)return uee(i);switch(Pe){case 2228280:case 2228281:i=new v$(Mg[Pe&63],i,1),Ge(),jt=!1;break}if(514<n)return i;if(Pe===11||Pe===12)throw Wl();if(i.$kind===h6)switch(Pe){case 2162701:if(Ot=!0,jt=!1,Ge(),!(Pe&13312))throw DO();if(Pe&12288)i=new ov(wn,i.ancestor),Ge();else if(Pe===2688008)i=new hS(i,zo(),!0);else if(Pe===2688019)i=fS(i,!0);else throw gS();break;case 65546:if(jt=!Ot,Ge(),!(Pe&12288))throw Wl();i=new ov(wn,i.ancestor),Ge();break;case 11:case 12:throw Wl();case 2688008:i=new hS(i,zo(),t);break;case 2688019:i=fS(i,t);break;case 2163760:i=y$(i);break;case 2163761:i=qE(e,i,!0);break}for(;(Pe&65536)>0;)switch(Pe){case 2162701:i=oee(i);break;case 65546:if(Ge(),!(Pe&12288))throw Wl();i=T6(i,!1);break;case 11:case 12:throw Wl();case 2688008:i.$kind===IO?i=new y6(i.name,zo(),i.ancestor,!1):i.$kind===YR?i=new n_(i.object,i.name,zo(),i.optional,!1):i.$kind===PO?i=new zJ(i.name,zo()):i=new hS(i,zo(),!1);break;case 2688019:i=fS(i,!1);break;case 2163760:if(Ot)throw gS();i=y$(i);break;case 2163761:if(Ot)throw gS();i=qE(e,i,!0);break}}if(Pe===11||Pe===12)throw Wl();if(513<n)return i;for(;(Pe&262144)>0;){const s=Pe;if((s&960)<=n)break;Ge(),i=new UJ(Mg[s&63],i,Qn(s&960,e)),jt=!1}if(63<n)return i;if(Ba(6291479)){const s=Qn(62,e);Xo(6291477),i=new VJ(i,s,Qn(62,e)),jt=!1}if(62<n)return i;switch(Pe){case 4194350:case 4194356:case 4194357:case 4194358:case 4194359:{if(!jt)throw yee();const s=Mg[Pe&63];Ge(),i=new BJ(i,Qn(62,e),s);break}}if(61<n)return i;for(;Ba(6291481);){if(Pe===6291456)throw Cee();const s=wn;Ge();const o=new Array;for(;Ba(6291477);)o.push(Qn(62,e));i=new FJ(i,s,o)}for(;Ba(6291480);){if(Pe===6291456)throw See();const s=wn;Ge();const o=new Array;for(;Ba(6291477);)o.push(Qn(62,e));i=new $J(i,s,o)}if(Pe!==6291456){if(e===s_&&Pe===7340046)return i;if(e===E6&&Pe===6291478){if(yt===il)throw XE();return kO=yt-1,i}throw Cc()==="of"?_ee():XE()}return i}function see(){const n=[],e=new XJ(m6,n,void 0,void 0);let t="",i=!0,r=0;for(;i;)switch(Ge(),Pe){case 7340052:i=!1,s();break;case 6291472:s();break;case 4096:t=Cc();break;default:throw Tee()}return Xo(7340052),e;function s(){t!==""?(n.push(new S6(new DA(av,t),new w6(av,new Bi(r++)),void 0)),t=""):r++}}function zo(){const n=Ot;Ge();const e=[];for(;Pe!==7340047&&(e.push(Qn(62,yc)),!!Ba(6291472)););return Xo(7340047),jt=!1,Ot=n,e}function fS(n,e){const t=Ot;return Ge(),n=new w6(n,Qn(62,yc),e),Xo(7340052),jt=!t,Ot=t,n}function oee(n){if(Ot=!0,jt=!1,Ge(),!(Pe&13312))throw DO();if(Pe&12288)return T6(n,!0);if(Pe===2688008)return n.$kind===IO?new y6(n.name,zo(),n.ancestor,!0):n.$kind===YR?new n_(n.object,n.name,zo(),n.optional,!0):new hS(n,zo(),!0);if(Pe===2688019)return fS(n,!0);throw gS()}function T6(n,e){const t=wn;switch(Pe){case 2162701:{Ot=!0,jt=!1;const i=yt,r=Gd,s=Pe,o=dn,a=wn,l=jt,c=Ot;if(Ge(),!(Pe&13312))throw DO();return Pe===2688008?new n_(n,t,zo(),e,!0):(yt=i,Gd=r,Pe=s,dn=o,wn=a,jt=l,Ot=c,new DA(n,t,e))}case 2688008:return jt=!1,new n_(n,t,zo(),e,!1);default:return jt=!Ot,Ge(),new DA(n,t,e)}}function aee(n){Ge();const e=yt,t=Gd,i=Pe,r=dn,s=wn,o=Ot,a=[];let l=1,c=!1;e:for(;;){if(Pe===12){if(Ge(),Pe!==4096)throw Wl();if(a.push(new r_(wn)),Ge(),Pe===6291472)throw Mee();if(Pe!==7340047||(Ge(),Pe!==51))throw FA();Ge();const d=Ot,f=bs;++bs;const g=Qn(62,yc);return Ot=d,bs=f,jt=!1,new HA(a,g,!0)}switch(Pe){case 4096:a.push(new r_(wn)),Ge();break;case 7340047:Ge();break e;case 524297:case 2688019:Ge(),l=4;break;case 6291472:l=2,c=!0;break e;case 2688008:l=2;break e;default:Ge(),l=2;break}switch(Pe){case 6291472:if(Ge(),c=!0,l===1)break;break e;case 7340047:Ge();break e;case 4194350:l===1&&(l=3);break e;case 51:if(c)throw Hy();Ge(),l=2;break e;default:l===1&&(l=2);break e}}if(Pe===51){if(l===1){if(Ge(),Pe===524297)throw I6();const d=Ot,f=bs;++bs;const g=Qn(62,yc);return Ot=d,bs=f,jt=!1,new HA(a,g)}throw Hy()}else if(l===1&&a.length===0)throw P6(51);if(c)switch(l){case 2:throw Hy();case 3:throw _$();case 4:throw R$()}yt=e,Gd=t,Pe=i,dn=r,wn=s,Ot=o;const u=Ot,h=Qn(62,n);if(Ot=u,Xo(7340047),Pe===51)switch(l){case 2:throw Hy();case 3:throw _$();case 4:throw R$()}return h}function lee(n){const e=Ot;Ge();const t=new Array;for(;Pe!==7340052;)if(Ba(6291472)){if(t.push(R6),Pe===7340052)break}else if(t.push(Qn(62,n===lc?yc:n)),Ba(6291472)){if(Pe===7340052)break}else break;return Ot=e,Xo(7340052),n===lc?new GJ(t):(jt=!1,new LA(t))}const cee=[f6,g6,p6,m6,LJ];function uee(n){if(!cee.includes(n.$kind)||Pe!==4204594)throw S$(n.$kind);Ge();const e=n,t=Qn(61,E6);return new KJ(e,t,kO)}function hee(n){const e=Ot,t=new Array,i=new Array;for(Ge();Pe!==7340046;){if(t.push(wn),Pe&49152)Ge(),Xo(6291477),i.push(Qn(62,n===lc?yc:n));else if(Pe&12288){const r=dn,s=Pe,o=yt;Ge(),Ba(6291477)?i.push(Qn(62,n===lc?yc:n)):(dn=r,Pe=s,yt=o,i.push(Qn(515,n===lc?yc:n)))}else throw Eee();Pe!==7340046&&Xo(6291472)}return Ot=e,Xo(7340046),n===lc?new YJ(t,i):(jt=!1,new NA(t,i))}function dee(){const n=[],e=[],t=il;let i="";for(;yt<t;){switch(dn){case 36:if(Yd(yt+1)===123){n.push(i),i="",yt+=2,dn=Yd(yt),Ge();const r=Qn(61,s_);e.push(r);continue}else i+="$";break;case 92:i+=nw(OO(Ze()));break;default:i+=nw(dn)}Ze()}return e.length?(n.push(i),new qJ(n,e)):null}function qE(n,e,t){const i=Ot,r=[wn];Xo(2163761);const s=[Qn(62,n)];for(;(Pe=pee())!==2163760;)r.push(wn),Xo(2163761),s.push(Qn(62,n));return r.push(wn),jt=!1,Ot=i,t?(Ge(),new C6(r,r,e,s)):(Ge(),new i_(r,s))}function y$(n){jt=!1;const e=[wn];return Ge(),new C6(e,e,n)}function Ge(){for(;yt<il;)if(Gd=yt,(Pe=Iee[dn]())!=null)return;Pe=6291456}function Ze(){return dn=Yd(++yt)}function fee(){for(;Oee[Ze()];);const n=Pee[wn=Cc()];return n===void 0?4096:n}function C$(n){let e=dn;if(n===!1){do e=Ze();while(e<=57&&e>=48);if(e!==46)return wn=parseInt(Cc(),10),32768;if(e=Ze(),yt>=il)return wn=parseInt(Cc().slice(0,-1),10),32768}if(e<=57&&e>=48)do e=Ze();while(e<=57&&e>=48);else dn=Yd(--yt);return wn=parseFloat(Cc()),32768}function gee(){const n=dn;Ze();let e=0;const t=new Array;let i=yt;for(;dn!==n;)if(dn===92)t.push(Nt.slice(i,yt)),Ze(),e=OO(dn),Ze(),t.push(nw(e)),i=yt;else{if(yt>=il)throw xee();Ze()}const r=Nt.slice(i,yt);return Ze(),t.push(r),wn=t.join(""),16384}function M6(){let n=!0,e="";for(;Ze()!==96;)if(dn===36)if(yt+1<il&&Yd(yt+1)===123){yt++,n=!1;break}else e+="$";else if(dn===92)e+=nw(OO(Ze()));else{if(yt>=il)throw A6();e+=nw(dn)}return Ze(),wn=e,n?2163760:2163761}const pee=()=>{if(yt>=il)throw A6();return yt--,M6()},Ba=n=>Pe===n?(Ge(),!0):!1,Xo=n=>{if(Pe===n)Ge();else throw P6(n)},mee=()=>pn(151,Nt),FA=()=>pn(152,Nt),Wl=()=>pn(153,Nt),bee=()=>pn(154,Nt),vee=()=>pn(155,Nt),XE=()=>pn(156,Cc(),yt,Nt),wee=()=>pn(157),yee=()=>pn(158,Nt),Cee=()=>pn(159,Nt),See=()=>pn(160,Nt),_ee=()=>pn(161,Nt),Ree=()=>pn(162,Nt),S$=n=>pn(163,Nt,n),Eee=()=>pn(164,Nt),xee=()=>pn(165,Nt),A6=()=>pn(166,Nt),P6=n=>pn(167,Mg[n&63],Nt),Tee=()=>pn(170,Cc(),yt,Nt),DO=()=>pn(171,Cc(),yt-1,Nt),gS=()=>pn(172,Nt),Hy=()=>pn(173,Nt),_$=()=>pn(174,Nt),R$=()=>pn(175,Nt),Mee=()=>pn(176,Nt),I6=()=>pn(178,Nt),Aee=()=>pn(179,yt-1,Nt),Mg=[JJ,eee,tee,R6,"this","$this",null,"$parent","(","{",".","..","...","?.","}",")",",","[","]",":",";","?","'",'"',"&","|","??","||","&&","==","!=","===","!==","<",">","<=",">=","in","instanceof","+","-","typeof","void","*","%","/","=","!",2163760,2163761,"of","=>","+=","-=","*=","/=","++","--"],Pee=Object.assign(dS(),{true:8193,null:8194,false:8192,undefined:8195,this:12293,$this:12292,$parent:12295,in:6562213,instanceof:6562214,typeof:139305,void:139306,of:4204594}),{CharScanners:Iee,IdParts:Oee}=(()=>{const n=()=>{throw pn(168,Nt)};n.notMapped=!0;const e={AsciiIdPart:[36,0,48,58,65,91,95,0,97,123],IdStart:[36,0,65,91,95,0,97,123,170,0,186,0,192,215,216,247,248,697,736,741,7424,7462,7468,7517,7522,7526,7531,7544,7545,7615,7680,7936,8305,0,8319,0,8336,8349,8490,8492,8498,0,8526,0,8544,8585,11360,11392,42786,42888,42891,42927,42928,42936,42999,43008,43824,43867,43868,43877,64256,64263,65313,65339,65345,65371],Digit:[48,58],Skip:[0,33,127,161]},t=(o,a,l,c)=>{const u=l.length;for(let h=0;h<u;h+=2){const d=l[h];let f=l[h+1];f=f>0?f:d+1,o&&o.fill(c,d,f)}},i=(o=>(t(o,null,e.IdStart,1),t(o,null,e.Digit,1),o))(new Uint8Array(65535)),r=o=>()=>(Ze(),o),s=new Array(65535);return s.fill(n,0,65535),t(s,null,e.Skip,()=>(Ze(),null)),t(s,null,e.IdStart,fee),t(s,null,e.Digit,()=>C$(!1)),s[34]=s[39]=()=>gee(),s[96]=()=>M6(),s[33]=()=>Ze()!==61?131119:Ze()!==61?6553950:(Ze(),6553952),s[61]=()=>Ze()===62?(Ze(),51):dn!==61?4194350:Ze()!==61?6553949:(Ze(),6553951),s[38]=()=>Ze()!==38?6291480:(Ze(),6553884),s[124]=()=>Ze()!==124?6291481:(Ze(),6553819),s[63]=()=>{if(Ze()===46){const o=Yd(yt+1);return o<=48||o>=57?(Ze(),2162701):6291479}return dn!==63?6291479:(Ze(),6553754)},s[46]=()=>Ze()<=57&&dn>=48?C$(!0):dn===46?Ze()!==46?11:(Ze(),12):65546,s[60]=()=>Ze()!==61?6554017:(Ze(),6554019),s[62]=()=>Ze()!==61?6554018:(Ze(),6554020),s[37]=r(6554156),s[40]=r(2688008),s[41]=r(7340047),s[42]=()=>Ze()!==61?6554155:(Ze(),4194358),s[43]=()=>Ze()===43?(Ze(),2228280):dn!==61?2490855:(Ze(),4194356),s[44]=r(6291472),s[45]=()=>Ze()===45?(Ze(),2228281):dn!==61?2490856:(Ze(),4194357),s[47]=()=>Ze()!==61?6554157:(Ze(),4194359),s[58]=r(6291477),s[59]=r(6291478),s[91]=r(2688019),s[93]=r(7340052),s[123]=r(524297),s[125]=r(7340046),{CharScanners:s,IdParts:i}})(),fl=Qu.createInterface,Wp=Object.freeze,{aliasTo:E$,singleton:LO}=zd,_o="Interpolation",O6="IsFunction",gl="IsProperty",Ag="custom-element",jw=Wp({default:0,oneTime:1,toView:2,fromView:4,twoWay:6}),KR=fl("ITemplateCompiler"),k6=fl("IAttrMapper"),Kn=(n,...e)=>new Error(`AUR${String(n).padStart(4,"0")}: ${Dee(n,...e)}`),kee={88:"AttributeParser is already initialized; cannot add patterns after initialization.",89:'Attribute pattern "{{0}}" has already been registered.',99:"Method {{0}} not implemented",157:"Binding command {{0}} has already been registered.",701:'Template compilation error in element "{{0:name}}": the root <template> cannot be a local element template.',702:'Template compilation error: attribute "{{0}}" is invalid on element surrogate.',703:'Template compilation error: template controller "{{0}}" is invalid on element surrogate.',704:'Template compilation error: Invalid command "{{0:.command}}" for <let>. Only to-view/bind supported.',706:'Template compilation error: detected projection with [au-slot="{{0}}"] attempted on a non custom element {{1}}.',707:"Template compilation error: creating binding to non-bindable property {{0}} on {{1}}.",708:'Template compilation error: the custom element "{{0}}" does not have any content other than local template(s).',709:'Template compilation error: local element template needs to be defined directly under root of element "{{0}}".',710:'Template compilation error: bindable properties of local element "{{0}}" template needs to be defined directly under <template>.',711:`Template compilation error: the attribute 'property' is missing in {{0:outerHTML}} in local element "{{1}}"`,712:"Template compilation error: Bindable property and attribute needs to be unique; found property: {{0}}, attribute: {{1}}",713:'Template compilation error: unknown binding command: "{{0}}".{{0:bindingCommandHelp}}',714:'Template compilation error: primary already exists on element/attribute "{{0}}"',715:'Template compilation error: the value of "as-custom-element" attribute cannot be empty for local element in element "{{0}}"',716:'Template compilation error: duplicate definition of the local template named "{{0}} in element {{1}}"',717:'Template compilation error: detected a usage of "<slot>" element without specifying shadow DOM options in element: {{0}}',718:'Spreading template controller "{{0}}" is not supported.',719:"Attribute {{0}} has been already registered for {{1:element}}",720:'Spreading syntax "...xxx" is reserved. Encountered "...{{0}}"',721:'Usage of $bindables is only allowed on custom element. Encountered: <{{0}} {{1}}="{{2}}">',722:"Invalid platform object provided to the compilation, no DOM API found.",9998:"Spread binding does not support spreading custom attributes/template controllers. Did you build the spread instruction manually?"},Dee=(n,...e)=>{var i;let t=kee[n];for(let r=0;r<e.length;++r){const s=new RegExp(`{{${r}(:.*)?}}`,"g");let o=s.exec(t);for(;o!=null;){const a=(i=o[1])==null?void 0:i.slice(1);let l=e[r];if(l!=null)switch(a){case"nodeName":l=l.nodeName.toLowerCase();break;case"name":l=l.name;break;case"typeof":l=typeof l;break;case"ctor":l=l.constructor.name;break;case"controller":l=l.controller.name;break;case"target@property":l=`${l.target}@${l.targetProperty}`;break;case"toString":l=Object.prototype.toString.call(l);break;case"join(!=)":l=l.join("!=");break;case"bindingCommandHelp":l=Lee(l);break;case"element":l=l==="*"?"all elements":`<${l} />`;break;default:a!=null&&a.startsWith(".")?l=String(l[a.slice(1)]):l=String(l)}t=t.slice(0,o.index)+l+t.slice(s.lastIndex),o=s.exec(t)}}return t};function Lee(n){switch(n){case"delegate":return`
The ".delegate" binding command has been removed in v2. Binding command ".trigger" should be used instead. If you are migrating v1 application, install compat package to add back the ".delegate" binding command for ease of migration.`;case"call":return`
The ".call" binding command has been removed in v2. If you want to pass a callback that preserves the context of the function call, you can use lambda instead. Refer to lambda expression doc for more details.`;default:return""}}var D6,L6,N6,H6,$6;class NO{constructor(e,t,i,r){if(this.chars=e,this.repeat=t,this.isSymbol=i,this.isInverted=r,r)switch(e.length){case 0:this.has=this._hasOfNoneInverse;break;case 1:this.has=this._hasOfSingleInverse;break;default:this.has=this._hasOfMultipleInverse}else switch(e.length){case 0:this.has=this._hasOfNone;break;case 1:this.has=this._hasOfSingle;break;default:this.has=this._hasOfMultiple}}equals(e){return this.chars===e.chars&&this.repeat===e.repeat&&this.isSymbol===e.isSymbol&&this.isInverted===e.isInverted}_hasOfMultiple(e){return this.chars.includes(e)}_hasOfSingle(e){return this.chars===e}_hasOfNone(e){return!1}_hasOfMultipleInverse(e){return!this.chars.includes(e)}_hasOfSingleInverse(e){return this.chars!==e}_hasOfNoneInverse(e){return!0}}class Nee{constructor(){this.parts=bt,this._pattern="",this._currentRecord={},this._partsRecord={}}get pattern(){const e=this._pattern;return e===""?null:e}set pattern(e){e==null?(this._pattern="",this.parts=bt):(this._pattern=e,this.parts=this._partsRecord[e])}append(e,t){const i=this._currentRecord;i[e]===void 0?i[e]=t:i[e]+=t}next(e){const t=this._currentRecord;let i;t[e]!==void 0&&(i=this._partsRecord,i[e]===void 0?i[e]=[t[e]]:i[e].push(t[e]),t[e]=void 0)}}class HO{get _pattern(){return this._isEndpoint?this._patterns[0]:null}constructor(e,...t){this.charSpec=e,this._nextStates=[],this._types=null,this._isEndpoint=!1,this._patterns=t}findChild(e){const t=this._nextStates,i=t.length;let r=null,s=0;for(;s<i;++s)if(r=t[s],e.equals(r.charSpec))return r;return null}append(e,t){const i=this._patterns;i.includes(t)||i.push(t);let r=this.findChild(e);return r==null&&(r=new HO(e,t),this._nextStates.push(r),e.repeat&&r._nextStates.push(r)),r}findMatches(e,t){const i=[],r=this._nextStates,s=r.length;let o=0,a=null,l=0,c=0;for(;l<s;++l)if(a=r[l],a.charSpec.has(e))if(i.push(a),o=a._patterns.length,c=0,a.charSpec.isSymbol)for(;c<o;++c)t.next(a._patterns[c]);else for(;c<o;++c)t.append(a._patterns[c],e);return i}}class x${constructor(e){this.text=e;const t=this._len=e.length,i=this._specs=[];let r=0;for(;t>r;++r)i.push(new NO(e[r],!1,!1,!1))}eachChar(e){const t=this._len,i=this._specs;let r=0;for(;t>r;++r)e(i[r])}}class Hee{constructor(e){this.text="PART",this._spec=new NO(e,!0,!1,!0)}eachChar(e){e(this._spec)}}class $ee{constructor(e){this.text=e,this._spec=new NO(e,!1,!0,!1)}eachChar(e){e(this._spec)}}class Fee{constructor(){this.statics=0,this.dynamics=0,this.symbols=0}}const Bee=fl("ISyntaxInterpreter",n=>n.singleton(Vee));class Vee{constructor(){this._rootState=new HO(null),this._initialStates=[this._rootState]}add(e){e=e.slice(0).sort((d,f)=>d.pattern>f.pattern?1:-1);const t=e.length;let i,r,s,o,a,l,c,u=0,h;for(;t>u;){for(i=this._rootState,r=e[u],s=r.pattern,o=new Fee,a=this._parse(r,o),l=a.length,c=d=>i=i.append(d,s),h=0;l>h;++h)a[h].eachChar(c);i._types=o,i._isEndpoint=!0,++u}}interpret(e){const t=new Nee,i=e.length;let r=this._initialStates,s=0,o;for(;s<i&&(r=this._getNextStates(r,e.charAt(s),t),r.length!==0);++s);return r=r.filter(Wee),r.length>0&&(r.sort(jee),o=r[0],o.charSpec.isSymbol||t.next(o._pattern),t.pattern=o._pattern),t}_getNextStates(e,t,i){const r=[];let s=null;const o=e.length;let a=0;for(;a<o;++a)s=e[a],r.push(...s.findMatches(t,i));return r}_parse(e,t){const i=[],r=e.pattern,s=r.length,o=e.symbols;let a=0,l=0,c="";for(;a<s;)c=r.charAt(a),o.length===0||!o.includes(c)?a===l&&c==="P"&&r.slice(a,a+4)==="PART"?(l=a=a+4,i.push(new Hee(o)),++t.dynamics):++a:a!==l?(i.push(new x$(r.slice(l,a))),++t.statics,l=a):(i.push(new $ee(r.slice(l,a+1))),++t.symbols,l=++a);return l!==a&&(i.push(new x$(r.slice(l,a))),++t.statics),i}}function Wee(n){return n._isEndpoint}function jee(n,e){const t=n._types,i=e._types;return t.statics!==i.statics?i.statics-t.statics:t.dynamics!==i.dynamics?i.dynamics-t.dynamics:t.symbols!==i.symbols?i.symbols-t.symbols:0}class _s{constructor(e,t,i,r,s=null){this.rawName=e,this.rawValue=t,this.target=i,this.command=r,this.parts=s}}const zee=fl("IAttributePattern"),$O=fl("IAttributeParser",n=>n.singleton(Uee));class Uee{constructor(){this._cache={},this._patterns={},this._initialized=!1,this._allDefinitions=[],this._interpreter=ve(Bee),this._container=ve(Fp)}registerPattern(e,t){if(this._initialized)throw Kn(88);const i=this._patterns;for(const{pattern:r}of e){if(i[r]!=null)throw Kn(89,r);i[r]={patternType:t}}this._allDefinitions.push(...e)}_initialize(){this._interpreter.add(this._allDefinitions);const e=this._container;for(const[,t]of Object.entries(this._patterns))t.pattern=e.get(t.patternType)}parse(e,t){this._initialized||(this._initialize(),this._initialized=!0);let i=this._cache[e];i==null&&(i=this._cache[e]=this._interpreter.interpret(e));const r=i.pattern;return r==null?new _s(e,t,e,null,null):this._patterns[r].pattern[r](e,t,i.parts)}}const Ju=Wp({name:bf("attribute-pattern"),create(n,e){return{register(t){t.get($O).registerPattern(n,e),LO(zee,e).register(t)}}}});class BA{"PART.PART"(e,t,i){return new _s(e,t,i[0],i[1])}"PART.PART.PART"(e,t,i){return new _s(e,t,`${i[0]}.${i[1]}`,i[2])}}D6=Symbol.metadata;BA[D6]={[dl]:Ju.create([{pattern:"PART.PART",symbols:"."},{pattern:"PART.PART.PART",symbols:"."}],BA)};class VA{ref(e,t,i){return new _s(e,t,"element","ref")}"PART.ref"(e,t,i){let r=i[0];return r==="view-model"&&(r="component",console.warn(`[aurelia] Detected view-model.ref usage: "${e}=${t}". This is deprecated and component.ref should be used instead`)),new _s(e,t,r,"ref")}}L6=Symbol.metadata;VA[L6]={[dl]:Ju.create([{pattern:"ref",symbols:""},{pattern:"PART.ref",symbols:"."}],VA)};class WA{"PART.trigger:PART"(e,t,i){return new _s(e,t,i[0],"trigger",i)}"PART.capture:PART"(e,t,i){return new _s(e,t,i[0],"capture",i)}}N6=Symbol.metadata;WA[N6]={[dl]:Ju.create([{pattern:"PART.trigger:PART",symbols:".:"},{pattern:"PART.capture:PART",symbols:".:"}],WA)};class T${":PART"(e,t,i){return new _s(e,t,i[0],"bind")}}H6=Symbol.metadata;T$[H6]={[dl]:Ju.create([{pattern:":PART",symbols:":"}],T$)};class M${"@PART"(e,t,i){return new _s(e,t,i[0],"trigger")}"@PART:PART"(e,t,i){return new _s(e,t,i[0],"trigger",[i[0],"trigger",...i.slice(1)])}}$6=Symbol.metadata;M$[$6]={[dl]:Ju.create([{pattern:"@PART",symbols:"@"},{pattern:"@PART:PART",symbols:"@:"}],M$)};const jA=Oc.get,A$=Oc.define,F6="ra",B6="rb",V6="rc",W6="rd",j6="re",z6="rf",FO="rg",U6="ri",G6="rj",Y6="rk",K6="rl",q6="ha",X6="hb",Z6="hc",Gee="hd",Q6="he",J6="hf",ez="hg",tz="hs",nz="hp",iz="svb",mi=Wp({hydrateElement:F6,hydrateAttribute:B6,hydrateTemplateController:V6,hydrateLetElement:W6,setProperty:j6,interpolation:z6,propertyBinding:FO,letBinding:U6,refBinding:G6,iteratorBinding:Y6,multiAttr:K6,textBinding:q6,listenerBinding:X6,attributeBinding:Z6,stylePropertyBinding:Gee,setAttribute:Q6,setClassAttribute:J6,setStyleAttribute:ez,spreadTransferedBinding:tz,spreadElementProp:nz,spreadValueBinding:iz}),jp=fl("Instruction");class xl{constructor(e,t){this.from=e,this.to=t,this.type=z6}}class zw{constructor(e,t,i){this.from=e,this.to=t,this.mode=i,this.type=FO}}class Yee{constructor(e,t,i){this.forOf=e,this.to=t,this.props=i,this.type=Y6}}class Kee{constructor(e,t){this.from=e,this.to=t,this.type=G6}}class Ff{constructor(e,t){this.value=e,this.to=t,this.type=j6}}class qee{constructor(e,t,i){this.value=e,this.to=t,this.command=i,this.type=K6}}class Xee{constructor(e,t,i,r,s,o){this.res=e,this.props=t,this.projections=i,this.containerless=r,this.captures=s,this.data=o,this.type=F6}}class ZE{constructor(e,t,i){this.res=e,this.alias=t,this.props=i,this.type=B6}}class Zee{constructor(e,t,i,r){this.def=e,this.res=t,this.alias=i,this.props=r,this.type=V6}}class Qee{constructor(e,t){this.instructions=e,this.toBindingContext=t,this.type=W6}}class P${constructor(e,t){this.from=e,this.to=t,this.type=U6}}class Jee{constructor(e){this.from=e,this.type=q6}}class rz{constructor(e,t,i,r){this.from=e,this.to=t,this.capture=i,this.modifier=r,this.type=X6}}class I${constructor(e,t){this.value=e,this.to=t,this.type=Q6}}class O${constructor(e){this.value=e,this.type=J6}}class k${constructor(e){this.value=e,this.type=ez}}class BO{constructor(e,t,i){this.attr=e,this.from=t,this.to=i,this.type=Z6}}class D${constructor(){this.type=tz}}class L${constructor(e){this.instruction=e,this.type=nz}}class zA{constructor(e,t){this.target=e,this.from=t,this.type=iz}}class o_{constructor(e,t,i,r){this.Type=e,this.name=t,this.aliases=i,this.key=r}static create(e,t){let i,r;return St(e)?(i=e,r={name:i}):(i=e.name,r=e),new o_(t,pu(UA(t,"name"),i),di(UA(t,"aliases"),r.aliases,t.aliases),ip(i))}register(e,t){const i=this.Type,r=typeof t=="string"?ip(t):this.key,s=this.aliases;e.has(r,!1)?console.warn(`[DEV:aurelia] ${Kn(157,this.name)}`):e.register(e.has(i,!1)?null:LO(i,i),E$(i,r),...s.map(o=>E$(i,ip(o))))}}const hr="binding-command",pS=bf(hr),ip=n=>`${pS}:${n}`,UA=(n,e)=>jA(s6.annotation.keyFor(e),n),ete=(()=>{const n="__au_static_resource__",e=(t,i,r)=>{var o;let s=jA(n,t);return s==null&&((o=t.$au)==null?void 0:o.type)===i&&(s=r(t.$au,t),A$(s,t,n)),s};return Wp({name:pS,keyFrom:ip,define(t,i){const r=o_.create(t,i),s=r.Type;return A$(r,s,pS,Ka),s},getAnnotation:UA,find(t,i){const r=t.find(hr,i);return r==null?null:jA(pS,r)??e(r,hr,o_.create)??null},get(t,i){try{return t.get(wp(ip(i)))}catch(r){throw console.log(`


[DEV:aurelia] Cannot retrieve binding command with name




`,i),r}return t.get(wp(ip(i)))}})})();class sz{get ignoreAttr(){return!1}build(e,t,i){let s=e.attr.target,o=e.attr.rawValue;return o=o===""?Ni(s):o,e.bindable==null?s=i.map(e.node,s)??Ni(s):s=e.bindable.name,new zw(t.parse(o,gl),s,1)}}sz.$au={type:hr,name:"one-time"};class oz{get ignoreAttr(){return!1}build(e,t,i){let s=e.attr.target,o=e.attr.rawValue;return o=o===""?Ni(s):o,e.bindable==null?s=i.map(e.node,s)??Ni(s):s=e.bindable.name,new zw(t.parse(o,gl),s,2)}}oz.$au={type:hr,name:"to-view"};class az{get ignoreAttr(){return!1}build(e,t,i){const r=e.attr;let s=r.target,o=r.rawValue;return o=o===""?Ni(s):o,e.bindable==null?s=i.map(e.node,s)??Ni(s):s=e.bindable.name,new zw(t.parse(o,gl),s,4)}}az.$au={type:hr,name:"from-view"};class lz{get ignoreAttr(){return!1}build(e,t,i){const r=e.attr;let s=r.target,o=r.rawValue;return o=o===""?Ni(s):o,e.bindable==null?s=i.map(e.node,s)??Ni(s):s=e.bindable.name,new zw(t.parse(o,gl),s,6)}}lz.$au={type:hr,name:"two-way"};class cz{get ignoreAttr(){return!1}build(e,t,i){const r=e.attr,s=e.bindable;let o=r.rawValue,a=r.target,l,c;return o=o===""?Ni(a):o,s==null?(c=i.isTwoWay(e.node,a)?6:2,a=i.map(e.node,a)??Ni(a)):(l=e.def.defaultBindingMode??0,c=s.mode===0||s.mode==null?l==null||l===0?2:l:s.mode,a=s.name),new zw(t.parse(o,gl),a,St(c)?jw[c]??0:c)}}cz.$au={type:hr,name:"bind"};class uz{constructor(){this._attrParser=ve($O)}get ignoreAttr(){return!1}build(e,t){const i=e.bindable===null?Ni(e.attr.target):e.bindable.name,r=t.parse(e.attr.rawValue,"IsIterator");let s=bt;if(r.semiIdx>-1){const o=e.attr.rawValue.slice(r.semiIdx+1),a=o.indexOf(":");if(a>-1){const l=o.slice(0,a).trim(),c=o.slice(a+1).trim(),u=this._attrParser.parse(l,c);s=[new qee(c,u.target,u.command)]}}return new Yee(r,i,s)}}uz.$au={type:hr,name:"for"};class hz{get ignoreAttr(){return!0}build(e,t){var i;return new rz(t.parse(e.attr.rawValue,O6),e.attr.target,!1,((i=e.attr.parts)==null?void 0:i[2])??null)}}hz.$au={type:hr,name:"trigger"};class dz{get ignoreAttr(){return!0}build(e,t){var i;return new rz(t.parse(e.attr.rawValue,O6),e.attr.target,!0,((i=e.attr.parts)==null?void 0:i[2])??null)}}dz.$au={type:hr,name:"capture"};class fz{get ignoreAttr(){return!0}build(e,t){const i=e.attr,r=i.target;let s=i.rawValue;return s=s===""?Ni(r):s,new BO(r,t.parse(s,gl),r)}}fz.$au={type:hr,name:"attr"};class gz{get ignoreAttr(){return!0}build(e,t){return new BO("style",t.parse(e.attr.rawValue,gl),e.attr.target)}}gz.$au={type:hr,name:"style"};class pz{get ignoreAttr(){return!0}build(e,t){return new BO("class",t.parse(e.attr.rawValue,gl),e.attr.target)}}pz.$au={type:hr,name:"class"};class mz{get ignoreAttr(){return!0}build(e,t){return new Kee(t.parse(e.attr.rawValue,gl),e.attr.target)}}mz.$au={type:hr,name:"ref"};class bz{get ignoreAttr(){return!1}build(e){return new zA(e.attr.target,e.attr.rawValue)}}bz.$au={type:hr,name:"spread"};const tte=fl("ITemplateElementFactory",n=>n.singleton(nte)),N$={};class nte{constructor(){this.p=ve(Bp),this._template=this.t()}t(){return this.p.document.createElement("template")}createTemplate(e){var i;if(St(e)){let r=N$[e];if(r===void 0){const s=this._template;s.innerHTML=e;const o=s.content.firstElementChild;t(o)?(this._template=this.t(),r=s):(s.content.removeChild(o),r=o),N$[e]=r}return r.cloneNode(!0)}if(e.nodeName!=="TEMPLATE"){const r=this.t();return r.content.appendChild(e),r}return(i=e.parentNode)==null||i.removeChild(e),e.cloneNode(!0);function t(r){if(r==null||r.nodeName!=="TEMPLATE"||r.nextElementSibling!=null)return!0;const o=r.previousSibling;if(o!=null)switch(o.nodeType){case 3:return o.textContent.trim().length>0}const a=r.nextSibling;if(a!=null)switch(a.nodeType){case 3:return a.textContent.trim().length>0}return!1}}}const QE="au-start",JE="au-end",ex=(n,e,t)=>n.insertBefore(e,t),H$=(n,e,t)=>{if(n===null)return;const i=t.length;let r=0;for(;i>r;)n.insertBefore(t[r],e),++r},ph=(n,e)=>n.content.appendChild(e),$$=(n,e)=>{const t=e.length;let i=0;for(;t>i;)n.content.appendChild(e[i]),++i},F$=n=>n.nodeType===1,B$=n=>n.nodeType===3,vm="au-slot",V$="default",wm=(n=>()=>`anonymous-${++n}`)(0);class vz{constructor(){this.debug=!1,this.resolveResources=!0}compile(e,t){var h,d;if(e.template==null||e.needsCompile===!1)return e;const i=new a_(e,t,null,null,void 0),r=St(e.template)||!e.enhance?i._templateFactory.createTemplate(e.template):e.template,s=r.nodeName===tx&&r.content!=null,o=s?r.content:r,a=lte.findAll(t),l=a.length;let c=0;if(l>0)for(;l>c;)(d=(h=a[c]).compiling)==null||d.call(h,r),++c;if(r.hasAttribute(GA))throw Kn(701,e);return this._compileLocalElement(o,i),this._compileNode(o,i),{...e,name:e.name||wm(),dependencies:(e.dependencies??bt).concat(i.deps??bt),instructions:i.rows,surrogates:s?this._compileSurrogate(r,i):bt,template:r,hasSlots:i.hasSlot,needsCompile:!1}}compileSpread(e,t,i,r,s){const o=new a_(e,i,null,null,void 0),a=[],l=s??o._findElement(r.nodeName.toLowerCase()),c=l!==null,u=o._exprParser,h=t.length;let d=0,f,g=null,p,m,v,y,w,R=null,x,S,T,P;for(;h>d;++d){if(f=t[d],T=f.target,P=f.rawValue,T==="...$attrs"){a.push(new D$);continue}if(R=o._getCommand(f),R!==null&&R.ignoreAttr){ke.node=r,ke.attr=f,ke.bindable=null,ke.def=null,a.push(R.build(ke,o._exprParser,o._attrMapper));continue}if(c&&(v=o._getBindables(l),y=v.attrs[T],y!==void 0)){R==null?(x=u.parse(P,_o),a.push(new L$(x==null?new Ff(P,y.name):new xl(x,y.name)))):(ke.node=r,ke.attr=f,ke.bindable=y,ke.def=l,a.push(new L$(R.build(ke,o._exprParser,o._attrMapper))));continue}if(g=o._findAttr(T),g!==null){if(g.isTemplateController)throw Kn(9998,T);v=o._getBindables(g),S=g.noMultiBindings===!1&&R===null&&nx(P),S?m=this._compileMultiBindings(r,P,g,o):(w=v.primary,R===null?(x=u.parse(P,_o),m=[x===null?new Ff(P,w.name):new xl(x,w.name)]):(ke.node=r,ke.attr=f,ke.bindable=w,ke.def=g,m=[R.build(ke,o._exprParser,o._attrMapper)])),(p??(p=[])).push(new ZE(this.resolveResources?g:g.name,g.aliases!=null&&g.aliases.includes(T)?T:void 0,m));continue}if(R==null)if(x=u.parse(P,_o),x!=null)a.push(new xl(x,o._attrMapper.map(r,T)??Ni(T)));else switch(T){case"class":a.push(new O$(P));break;case"style":a.push(new k$(P));break;default:a.push(new I$(P,T))}else ke.node=r,ke.attr=f,ke.bindable=null,ke.def=null,a.push(R.build(ke,o._exprParser,o._attrMapper))}return $y(),p!=null?p.concat(a):a}_compileSurrogate(e,t){const i=[],r=e.attributes,s=t._exprParser;let o=r.length,a=0,l,c,u,h,d=null,f,g,p,m,v=null,y,w,R,x;for(;o>a;++a){if(l=r[a],c=l.name,u=l.value,h=t._attrParser.parse(c,u),R=h.target,x=h.rawValue,rte[R])throw Kn(702,c);if(v=t._getCommand(h),v!==null&&v.ignoreAttr){ke.node=e,ke.attr=h,ke.bindable=null,ke.def=null,i.push(v.build(ke,t._exprParser,t._attrMapper));continue}if(d=t._findAttr(R),d!==null){if(d.isTemplateController)throw Kn(703,R);p=t._getBindables(d),w=d.noMultiBindings===!1&&v===null&&nx(x),w?g=this._compileMultiBindings(e,x,d,t):(m=p.primary,v===null?(y=s.parse(x,_o),g=y===null?x===""?[]:[new Ff(x,m.name)]:[new xl(y,m.name)]):(ke.node=e,ke.attr=h,ke.bindable=m,ke.def=d,g=[v.build(ke,t._exprParser,t._attrMapper)])),e.removeAttribute(c),--a,--o,(f??(f=[])).push(new ZE(this.resolveResources?d:d.name,d.aliases!=null&&d.aliases.includes(R)?R:void 0,g));continue}if(v===null)if(y=s.parse(x,_o),y!=null)e.removeAttribute(c),--a,--o,i.push(new xl(y,t._attrMapper.map(e,R)??Ni(R)));else switch(c){case"class":i.push(new O$(x));break;case"style":i.push(new k$(x));break;default:i.push(new I$(x,c))}else ke.node=e,ke.attr=h,ke.bindable=null,ke.def=null,i.push(v.build(ke,t._exprParser,t._attrMapper))}return $y(),f!=null?f.concat(i):i}_compileNode(e,t){switch(e.nodeType){case 1:switch(e.nodeName){case"LET":return this._compileLet(e,t);default:return this._compileElement(e,t)}case 3:return this._compileText(e,t);case 11:{let i=e.firstChild;for(;i!==null;)i=this._compileNode(i,t);break}}return e.nextSibling}_compileLet(e,t){const i=e.attributes,r=i.length,s=[],o=t._exprParser;let a=!1,l=0,c,u,h,d,f,g,p,m;for(;r>l;++l){if(c=i[l],h=c.name,d=c.value,h==="to-binding-context"){a=!0;continue}if(u=t._attrParser.parse(h,d),g=u.target,p=u.rawValue,f=t._getCommand(u),f!==null){if(u.command==="bind")s.push(new P$(o.parse(p,gl),Ni(g)));else throw Kn(704,u);continue}m=o.parse(p,_o),m===null&&console.warn(`[DEV:aurelia] Property "${g}" is declared with literal string ${p}. Did you mean ${g}.bind="${p}"?`),s.push(new P$(m===null?new Bi(p):m,Ni(g)))}return t.rows.push([new Qee(s,a)]),this._markAsTarget(e,t).nextSibling}_compileElement(e,t){var z,U,le,ue,be,fe,Z,Y;const i=e.nextSibling,r=(e.getAttribute("as-element")??e.nodeName).toLowerCase(),s=t._findElement(r),o=s!==null,a=o&&s.shadowOptions!=null,l=s==null?void 0:s.capture,c=l!=null&&typeof l!="boolean",u=l?[]:bt,h=t._exprParser,d=this.debug?Qa:()=>{e.removeAttribute(y),--m,--p};let f=e.attributes,g,p=f.length,m=0,v,y,w,R,x,S,T=null,P=!1,E,A,L,W,F,V,H,N=null,j,k,K,ie,b=!0,C=!1,_=!1,I=!1,$,M=0;if(r==="slot"){if(t.root.def.shadowOptions==null)throw Kn(717,t.root.def.name);t.root.hasSlot=!0}for(o&&($={},b=(z=s.processContent)==null?void 0:z.call(s.Type,e,t.p,$),f=e.attributes,p=f.length);p>m;++m){switch(v=f[m],y=v.name,w=v.value,y){case"as-element":case"containerless":d(),C=C||y==="containerless";continue}if(R=t._attrParser.parse(y,w),N=t._getCommand(R),K=R.target,ie=R.rawValue,l&&(!c||c&&l(K))){if(N!=null&&N.ignoreAttr){d(),u.push(R);continue}if(_=K!==vm&&K!=="slot"&&((M=K.indexOf("..."))===-1||M===0&&K==="...$attrs"),_&&(j=t._getBindables(s),j.attrs[K]==null&&!((U=t._findAttr(K))!=null&&U.isTemplateController))){d(),u.push(R);continue}}if(K==="...$attrs"){(x??(x=[])).push(new D$),d();continue}if(N!=null&&N.ignoreAttr){ke.node=e,ke.attr=R,ke.bindable=null,ke.def=null,(x??(x=[])).push(N.build(ke,t._exprParser,t._attrMapper)),d();continue}if(K.indexOf("...")===0){if(o&&(K=K.slice(3))!=="$element"){(S??(S=[])).push(new zA("$bindables",K==="$bindables"?ie:K)),d();continue}throw(K==="$bindable"||K==="bindables")&&console.warn(`[DEV:aurelia] Detected usage of ${K} on <${e.nodeName}>, did you mean "$bindables"?`),Kn(720,K)}if(o){if(j=t._getBindables(s),E=j.attrs[K],E!==void 0){N===null?(V=h.parse(ie,_o),(S??(S=[])).push(V==null?new Ff(ie,E.name):new xl(V,E.name))):(ke.node=e,ke.attr=R,ke.bindable=E,ke.def=s,(S??(S=[])).push(N.build(ke,t._exprParser,t._attrMapper))),d(),T=t._findAttr(K),T!==null&&console.warn(`[DEV:aurelia] Binding with bindable "${K}" on custom element "${s.name}" is ambiguous.There is a custom attribute with the same name.`);continue}if(K==="$bindables"){if(N!=null){ke.node=e,ke.attr=R,ke.bindable=null,ke.def=s;{const ne=N.build(ke,t._exprParser,t._attrMapper);ne instanceof zA||console.warn(`[DEV:aurelia] Binding with "$bindables" on custom element "${s.name}" with command ${R.command}  did not result in a spread binding instruction. This likely won't work as expected.`),(S??(S=[])).push(ne)}}else console.warn(`[DEV:aurelia] Usage of "$bindables" on custom element "<${s.name}>" is ignored.`);d();continue}}if(K==="$bindables")throw Kn(721,e.nodeName,K,ie);if(T=t._findAttr(K),T!==null){j=t._getBindables(T),P=T.noMultiBindings===!1&&N===null&&nx(ie),P?L=this._compileMultiBindings(e,ie,T,t):(k=j.primary,N===null?(V=h.parse(ie,_o),L=V===null?ie===""?[]:[new Ff(ie,k.name)]:[new xl(V,k.name)]):(ke.node=e,ke.attr=R,ke.bindable=k,ke.def=T,L=[N.build(ke,t._exprParser,t._attrMapper)])),d(),T.isTemplateController?(W??(W=[])).push(new Zee(ite,this.resolveResources?T:T.name,void 0,L)):(A??(A=[])).push(new ZE(this.resolveResources?T:T.name,T.aliases!=null&&T.aliases.includes(K)?K:void 0,L));continue}if(N===null){V=h.parse(ie,_o),V!=null&&(d(),(x??(x=[])).push(new xl(V,t._attrMapper.map(e,K)??Ni(K))));continue}ke.node=e,ke.attr=R,ke.bindable=null,ke.def=null,(x??(x=[])).push(N.build(ke,t._exprParser,t._attrMapper)),d()}$y(),this._shouldReorderAttrs(e,x)&&x!=null&&x.length>1&&this._reorder(e,x),o&&(H=new Xee(this.resolveResources?s:s.name,S??bt,null,C,u,$)),(x!=null||H!=null||A!=null)&&(g=bt.concat(H??bt,A??bt,x??bt),I=!0);let B;if(W!=null){p=W.length-1,m=p,F=W[m];let ne;W$(e)?(ne=t.t(),$$(ne,[t._marker(),t._comment(QE),t._comment(JE)])):(this._replaceByMarker(e,t),e.nodeName==="TEMPLATE"?ne=e:(ne=t.t(),ph(ne,e)));const de=ne,he=t._createChild(g==null?[]:[g]);let ce,D,O=!1,G,te,X,re,J,Q,se=0,oe=0,ae=e.firstChild,we=!1;if(b!==!1)for(;ae!==null;){if(D=F$(ae)?ae.getAttribute(vm):null,O=D!==null||o&&!a,ce=ae.nextSibling,O){if(!o)throw Kn(706,D,r);(le=ae.removeAttribute)==null||le.call(ae,vm),we=B$(ae)&&ae.textContent.trim()==="",we||((ue=te??(te={}))[be=D||V$]??(ue[be]=[])).push(ae),e.removeChild(ae)}ae=ce}if(te!=null){G={};for(D in te){for(ne=t.t(),X=te[D],se=0,oe=X.length;oe>se;++se)re=X[se],re.nodeName==="TEMPLATE"?re.attributes.length>0?ph(ne,re):ph(ne,re.content):ph(ne,re);Q=t._createChild(),this._compileNode(ne.content,Q),G[D]={name:wm(),type:Ag,template:ne,instructions:Q.rows,needsCompile:!1}}H.projections=G}if(I&&(o&&(C||s.containerless)?this._replaceByMarker(e,t):this._markAsTarget(e,t)),B=!o||!s.containerless&&!C&&b!==!1,B)if(e.nodeName===tx)this._compileNode(e.content,he);else for(ae=e.firstChild;ae!==null;)ae=this._compileNode(ae,he);for(F.def={name:wm(),type:Ag,template:de,instructions:he.rows,needsCompile:!1};m-- >0;)F=W[m],ne=t.t(),J=t._marker(),$$(ne,[J,t._comment(QE),t._comment(JE)]),F.def={name:wm(),type:Ag,template:ne,needsCompile:!1,instructions:[[W[m+1]]]};t.rows.push([F])}else{g!=null&&t.rows.push(g);let ne=e.firstChild,de,he,ce=!1,D=null,O,G,te,X,re,J=!1,Q=0,se=0;if(b!==!1)for(;ne!==null;){if(he=F$(ne)?ne.getAttribute(vm):null,ce=he!==null||o&&!a,de=ne.nextSibling,ce){if(!o)throw Kn(706,he,r);(fe=ne.removeAttribute)==null||fe.call(ne,vm),J=B$(ne)&&ne.textContent.trim()==="",J||((Z=O??(O={}))[Y=he||V$]??(Z[Y]=[])).push(ne),e.removeChild(ne)}ne=de}if(O!=null){D={};for(he in O){for(X=t.t(),G=O[he],Q=0,se=G.length;se>Q;++Q)te=G[Q],te.nodeName===tx?te.attributes.length>0?ph(X,te):ph(X,te.content):ph(X,te);re=t._createChild(),this._compileNode(X.content,re),D[he]={name:wm(),type:Ag,template:X,instructions:re.rows,needsCompile:!1}}H.projections=D}if(I&&(o&&(C||s.containerless)?this._replaceByMarker(e,t):this._markAsTarget(e,t)),B=!o||!s.containerless&&!C&&b!==!1,B&&e.childNodes.length>0)for(ne=e.firstChild;ne!==null;)ne=this._compileNode(ne,t)}return i}_compileText(e,t){const i=e.parentNode,r=t._exprParser.parse(e.textContent,_o),s=e.nextSibling;let o,a,l,c,u;if(r!==null){for({parts:o,expressions:a}=r,(u=o[0])&&ex(i,t._text(u),e),l=0,c=a.length;c>l;++l)H$(i,e,[t._marker(),t._text(" ")]),(u=o[l+1])&&ex(i,t._text(u),e),t.rows.push([new Jee(a[l])]);i.removeChild(e)}return s}_compileMultiBindings(e,t,i,r){const s=r._getBindables(i),o=t.length,a=[];let l,c,u=0,h=0,d,f,g,p;for(let m=0;m<o;++m)if(h=t.charCodeAt(m),h===92)++m;else if(h===58){for(l=t.slice(u,m);t.charCodeAt(++m)<=32;);for(u=m;m<o;++m)if(h=t.charCodeAt(m),h===92)++m;else if(h===59){c=t.slice(u,m);break}if(c===void 0&&(c=t.slice(u)),f=r._attrParser.parse(l,c),g=r._getCommand(f),p=s.attrs[f.target],p==null)throw Kn(707,f.target,i.name);for(g===null?(d=r._exprParser.parse(c,_o),a.push(d===null?new Ff(c,p.name):new xl(d,p.name))):(ke.node=e,ke.attr=f,ke.bindable=p,ke.def=i,a.push(g.build(ke,r._exprParser,r._attrMapper)));m<o&&t.charCodeAt(++m)<=32;);u=m,l=void 0,c=void 0}return $y(),a}_compileLocalElement(e,t){const i=t.root.def.name,r=e,s=zE(r.querySelectorAll("template[as-custom-element]")),o=s.length;if(o===0)return;if(o===r.childElementCount)throw Kn(708,i);const a=new Set,l=[];for(const u of s){if(u.parentNode!==r)throw Kn(709,i);const h=ate(i,u,a),d=u.content,f=zE(d.querySelectorAll("bindable")),g=new Set,p=new Set,m=f.reduce((y,w)=>{if(w.parentNode!==d)throw Kn(710,h);const R=w.getAttribute("name");if(R===null)throw Kn(711,w,h);const x=w.getAttribute("attribute");if(x!==null&&p.has(x)||g.has(R))throw Kn(712,g,x);x!==null&&p.add(x),g.add(R);const S=zE(w.attributes).filter(T=>!j$.includes(T.name));return S.length>0&&console.warn(`[DEV:aurelia] The attribute(s) ${S.map(T=>T.name).join(", ")} will be ignored for ${w.outerHTML}. Only ${j$.join(", ")} are processed.`),w.remove(),y[R]={name:R,attribute:x??void 0,mode:w.getAttribute("mode")??"default"},y},{});class v{}v.$au={type:Ag,name:h,template:u,bindables:m},Reflect.defineProperty(v,"name",{value:t6(h)}),l.push(v),r.removeChild(u)}const c=(t.root.def.dependencies??[]).concat(t.root.def.Type==null?bt:[t.root.def.Type]);for(const u of l)u.dependencies=c.concat(l.filter(h=>h!==u)),t._addLocalDep(u)}_shouldReorderAttrs(e,t){const i=e.nodeName;return i==="INPUT"&&ste[e.type]===1||i==="SELECT"&&(e.hasAttribute("multiple")||(t==null?void 0:t.some(r=>r.type===FO&&r.to==="multiple")))}_reorder(e,t){switch(e.nodeName){case"INPUT":{const i=t;let r,s,o=0,a;for(let l=0;l<i.length&&o<3;l++)switch(a=i[l],a.to){case"model":case"value":case"matcher":r=l,o++;break;case"checked":s=l,o++;break}s!==void 0&&r!==void 0&&s<r&&([i[r],i[s]]=[i[s],i[r]]);break}case"SELECT":{const i=t;let r=0,s=0,o=0,a;for(let l=0;l<i.length&&o<2;++l){switch(a=i[l],a.to){case"multiple":s=l,o++;break;case"value":r=l,o++;break}o===2&&r<s&&([i[s],i[r]]=[i[r],i[s]])}}}}_markAsTarget(e,t){return ex(e.parentNode,t._comment("au*"),e),e}_replaceByMarker(e,t){if(W$(e))return e;const i=e.parentNode,r=t._marker();return H$(i,e,[r,t._comment(QE),t._comment(JE)]),i.removeChild(e),r}}vz.register=Bw(KR);const tx="TEMPLATE",W$=n=>n.nodeValue==="au*";class a_{constructor(e,t,i,r,s){var a;this.hasSlot=!1,this.deps=null;const o=i!==null;if(this.c=t,this.root=r===null?this:r,this.def=e,this.parent=i,this._resourceResolver=o?i._resourceResolver:t.get(wz),this._commandResolver=o?i._commandResolver:t.get(ote),this._templateFactory=o?i._templateFactory:t.get(tte),this._attrParser=o?i._attrParser:t.get($O),this._exprParser=o?i._exprParser:t.get(Vp),this._attrMapper=o?i._attrMapper:t.get(k6),this._logger=o?i._logger:t.get(Ud),typeof((a=(this.p=o?i.p:t.get(Bp)).document)==null?void 0:a.nodeType)!="number")throw Kn(722);this.localEls=o?i.localEls:new Set,this.rows=s??[]}_addLocalDep(e){var t;return((t=this.root).deps??(t.deps=[])).push(e),this.root.c.register(e),this}_text(e){return this.p.document.createTextNode(e)}_comment(e){return this.p.document.createComment(e)}_marker(){return this._comment("au*")}h(e){const t=this.p.document.createElement(e);return e==="template"&&this.p.document.adoptNode(t.content),t}t(){return this.h("template")}_findElement(e){return this._resourceResolver.el(this.c,e)}_findAttr(e){return this._resourceResolver.attr(this.c,e)}_getBindables(e){return this._resourceResolver.bindables(e)}_createChild(e){return new a_(this.def,this.c,this,this.root,e)}_getCommand(e){const t=e.command;return t===null?null:this._commandResolver.get(this.c,t)}}const nx=n=>{const e=n.length;let t=0,i=0;for(;e>i;){if(t=n.charCodeAt(i),t===92)++i;else{if(t===58)return!0;if(t===36&&n.charCodeAt(i+1)===123)return!1}++i}return!1},$y=()=>{ke.node=ke.attr=ke.bindable=ke.def=null},ite={name:"unnamed",type:Ag},ke={node:null,attr:null,bindable:null,def:null},rte={id:!0,name:!0,"au-slot":!0,"as-element":!0},ste={checkbox:1,radio:1},wz=fl("IResourceResolver"),ote=fl("IBindingCommandResolver",n=>{class e{constructor(){this._cache=new WeakMap}get(i,r){let s=this._cache.get(i);return s||this._cache.set(i,s={}),r in s?s[r]:s[r]=ete.get(i,r)}}return n.singleton(e)}),j$=Wp(["name","attribute","mode"]),GA="as-custom-element",ate=(n,e,t)=>{const i=e.getAttribute(GA);if(i===null||i==="")throw Kn(715,n);if(t.has(i))throw Kn(716,i,n);return t.add(i),e.removeAttribute(GA),i},z$=fl("ITemplateCompilerHooks"),lte=Wp({name:bf("compiler-hooks"),define(n){return{register(e){LO(z$,n).register(e)}}},findAll(n){return n.get(nJ(z$))}}),cte=Object.prototype.hasOwnProperty,Zo=Reflect.defineProperty;function rl(n,e,t){return Zo(n,e,{enumerable:!1,configurable:!0,writable:!0,value:t}),t}function ic(n,e,t){e in n||rl(n,e,t)}const yz=Object.assign,VO=Object.freeze,Kd=String,qR=Qu.createInterface,ute=Oc.get,hte=Oc.define,et=(n,...e)=>new Error(`AUR${Kd(n).padStart(4,"0")}: ${fte(n,...e)}`),dte={99:"Method {{0}} not implemented",101:'Ast eval error: binding behavior "{{0}}" could not be found. Did you forget to register it as a dependency?',102:'Ast eval error: binding behavior "{{0}}" already applied.',103:'Ast eval error: value converter "{{0}}" could not be found. Did you forget to register it as a dependency?',105:"Ast eval error: unable to find $host context. Did you forget [au-slot] attribute?",106:'Ast eval error: invalid assignment. "$host" is a reserved keyword.',107:"Ast eval error: expression is not a function.",109:'Ast eval error: unknown unary operator: "{{0}}"',108:'Ast eval error: unknown binary operator: "{{0}}"',110:"Ast eval error: left-hand side of tagged template expression is not a function.",111:'Ast eval error: expected "{{0}}" to be a function',112:"Ast eval error: cannot use non-object value for destructuring assignment.",113:"Ast eval error: infinite loop detected. Increment operators should only be used in event handlers.",114:'Ast eval error: cannot access property "{{0}}" of {{1}}.',115:'Ast eval error: cannot access key "{{0}}" of {{1}}.',116:'Ast eval error: cannot assign value to property "{{0}}" of null/undefined.',151:'Expression error: invalid start: "{{0}}"',152:'Expression error: spread operator is not supported: "{{0}}"',153:'Expression error: expected identifier: "{{0}}"',154:'Expression error: invalid member expression: "{{0}}"',155:'Expression error: unexpected end of expression: "{{0}}"',156:'Expression error: unconsumed token: "{{0}}" at position {{1}} of "{{2}}"',157:"Expression error: invalid empty expression. Empty expression is only valid in event bindings (trigger, delegate, capture etc...)",158:'Expression error: left hand side of expression is not assignable: "{{0}}"',159:'Expression error: expected identifier to come after value converter operator: "{{0}}"',160:"Expression error: expected identifier to come after binding behavior operator: {{0}}",161:'Expression error: unexpected keyword "of": "{{0}}"',162:'Expression error: unexpected keyword "import": "{{0}}"',163:'Expression error: invalid BindingIdentifier at left hand side of "of": "{{0}}" | kind: {{1}}',164:'Expression error: invalid or unsupported property definition in object literal: "{{0}}"',165:'Expression error: unterminated quote in string literal: "{{0}}"',166:'Expression error: unterminated template string: "{{0}}"',167:'Expression error: missing expected token "{{0}}" in "{{1}}"',168:'Expression error: unexpected character: "{{0}}"',170:'Expression error: unexpected "{{0}}" at position "{{1}}" for destructuring assignment in "{{2}}"',171:'Expression error: unexpected {{0}} at position "{{1}}" for optional chain in "{{2}}"',172:'Expression error: invalid tagged template on optional chain in "{{1}}"',173:'Expression error: invalid arrow parameter list in "{{0}}"',174:'Expression error: arrow function with default parameters is not supported: "{{0}}"',175:'Expression error: arrow function with destructuring parameters is not supported: "{{0}}"',176:'Expression error: rest parameter must be last formal parameter in arrow function: "{{0}}"',178:'Expression error: arrow function with function body is not supported: "{{0}}"',179:`Expression error: unexpected token '.' at position "{{1}}" in "{{0}}"`,199:"Trying to observe property {{0}} on null/undefined",203:"Trying to retrieve a property or build a scope from a null/undefined scope",204:"Trying to create a scope with null/undefined binding context",206:"Trying to switch to a null/undefined connectable",207:"Trying to enter an active connectable",208:"Trying to pop a null/undefined connectable",209:"Trying to exit an inactive connectable",210:"Unrecognised collection type {{0:toString}}.",217:"There is no registration for IDirtyChecker interface. If you want to use your own dirty checker, make sure you register it.",218:"Dirty checked is not permitted in this application. Property key {{0}} is being dirty checked.",219:"Trying to set value for property {{0}} in dirty checker",220:'Map/Set "size" is a readonly property',221:'Trying to assign value to readonly property "{{0}}" through computed observer.',224:"Invalid @observable decorator usage, cannot determine property name",225:"Trying to stop an effect that has already been stopped",226:"Maximum number of recursive effect run reached. Consider handle effect dependencies differently."},fte=(n,...e)=>{var i;let t=dte[n];for(let r=0;r<e.length;++r){const s=new RegExp(`{{${r}(:.*)?}}`,"g");let o=s.exec(t);for(;o!=null;){const a=(i=o[1])==null?void 0:i.slice(1);let l=e[r];if(l!=null)switch(a){case"typeof":l=typeof l;break;case"toString":l=Object.prototype.toString.call(l);break;case"join(!=)":l=l.join("!=");break;case"element":l=l==="*"?"all elements":`<${l} />`;break;default:a!=null&&a.startsWith(".")?l=Kd(l[a.slice(1)]):l=Kd(l)}t=t.slice(0,o.index)+l+t.slice(s.lastIndex),o=s.exec(t)}}return t};class pi{constructor(e,t,i,r){this.parent=e,this.bindingContext=t,this.overrideContext=i,this.isBoundary=r}static getContext(e,t,i){if(e==null)throw et(203);let r=e.overrideContext,s=e;if(i>0){for(;i>0;)if(i--,s=s.parent,s==null)return;return r=s.overrideContext,t in r?r:s.bindingContext}for(;s!=null&&!s.isBoundary&&!(t in s.overrideContext)&&!(t in s.bindingContext);)s=s.parent;return s==null?e.bindingContext:(r=s.overrideContext,t in r?r:s.bindingContext)}static create(e,t,i){if(e==null)throw et(204);return new pi(null,e,t??new G$,i??!1)}static fromParent(e,t,i=new G$){if(e==null)throw et(203);return new pi(e,t,i,!1)}}class U${constructor(e,t){e!==void 0&&(this[e]=t)}}class G${}const{astAssign:iw,astEvaluate:Ln,astBind:eh,astUnbind:th}=(()=>{const n="AccessThis",e="AccessBoundary",t="AccessGlobal",i="AccessScope",r="ArrayLiteral",s="ObjectLiteral",o="PrimitiveLiteral",a="Template",l="Unary",c="CallScope",u="CallMember",h="CallFunction",d="CallGlobal",f="AccessMember",g="AccessKeyed",p="TaggedTemplate",m="Binary",v="Conditional",y="Assign",w="ArrowFunction",R="ValueConverter",x="BindingBehavior",S="ArrayBindingPattern",T="ObjectBindingPattern",P="BindingIdentifier",E="ForOfStatement",A="Interpolation",L="ArrayDestructuring",W="ObjectDestructuring",F="DestructuringAssignmentLeaf",V="Custom",H=pi.getContext;function N(b,C,_,I){var $;switch(b.$kind){case n:{let M=C.overrideContext,B=C,z=b.ancestor;for(;z--&&M;)B=B.parent,M=(B==null?void 0:B.overrideContext)??null;return z<1&&B?B.bindingContext:void 0}case e:{let M=C;for(;M!=null&&!M.isBoundary;)M=M.parent;return M?M.bindingContext:void 0}case i:{const M=H(C,b.name,b.ancestor);I!==null&&I.observe(M,b.name);const B=M[b.name];if(B==null){if(b.name==="$host")throw et(105);return B}return _!=null&&_.boundFn&&kt(B)?B.bind(M):B}case t:return globalThis[b.name];case d:{const M=globalThis[b.name];if(kt(M))return M(...b.args.map(B=>N(B,C,_,I)));if(!(_!=null&&_.strict)&&M==null)return;throw et(107)}case r:return b.elements.map(M=>N(M,C,_,I));case s:{const M={};for(let B=0;B<b.keys.length;++B)M[b.keys[B]]=N(b.values[B],C,_,I);return M}case o:return b.value;case a:{let M=b.cooked[0];for(let B=0;B<b.expressions.length;++B)M+=Kd(N(b.expressions[B],C,_,I)),M+=b.cooked[B+1];return M}case l:{const M=N(b.expression,C,_,I);switch(b.operation){case"void":return;case"typeof":return typeof M;case"!":return!M;case"-":return-M;case"+":return+M;case"--":if(I!=null)throw et(113);return j(b.expression,C,_,M-1)+b.pos;case"++":if(I!=null)throw et(113);return j(b.expression,C,_,M+1)-b.pos;default:throw et(109,b.operation)}}case c:{const M=H(C,b.name,b.ancestor);if(M==null){if(_!=null&&_.strict)throw et(114,b.name,M);return}const B=M[b.name];if(kt(B))return B.apply(M,b.args.map(z=>N(z,C,_,I)));if(B==null){if(_!=null&&_.strict&&!b.optional)throw et(111,b.name);return}throw et(111,b.name)}case u:{const M=N(b.object,C,_,I);if(M==null&&_!=null&&_.strict&&!b.optionalMember)throw et(114,b.name,M);const B=M==null?void 0:M[b.name];if(B==null){if(!b.optionalCall&&(_!=null&&_.strict))throw et(111,b.name);return}if(!kt(B))throw et(111,b.name);const z=B.apply(M,b.args.map(U=>N(U,C,_,I)));return ai(M)&&ie.includes(b.name)&&(I==null||I.observeCollection(M)),z}case h:{const M=N(b.func,C,_,I);if(kt(M))return M(...b.args.map(B=>N(B,C,_,I)));if(M==null){if(!b.optional&&(_!=null&&_.strict))throw et(107);return}throw et(107)}case w:return(...B)=>{const z=b.args,U=b.rest,le=z.length-1,ue=z.reduce((fe,Z,Y)=>(U&&Y===le?fe[Z.name]=B.slice(Y):fe[Z.name]=B[Y],fe),{}),be=pi.fromParent(C,ue);return N(b.body,be,_,I)};case f:{const M=N(b.object,C,_,I);if(M==null){if(!b.optional&&(_!=null&&_.strict))throw et(114,b.name,M);return}I!==null&&!b.accessGlobal&&I.observe(M,b.name);const B=M[b.name];return _!=null&&_.boundFn&&kt(B)?B.bind(M):B}case g:{const M=N(b.object,C,_,I),B=N(b.key,C,_,I);if(M==null){if(!b.optional&&(_!=null&&_.strict))throw et(115,B,M);return}return I!==null&&!b.accessGlobal&&I.observe(M,B),M[B]}case p:{const M=b.expressions.map(z=>N(z,C,_,I)),B=N(b.func,C,_,I);if(!kt(B))throw et(110);return B(b.cooked,...M)}case m:{const M=b.left,B=b.right;switch(b.operation){case"&&":return N(M,C,_,I)&&N(B,C,_,I);case"||":return N(M,C,_,I)||N(B,C,_,I);case"??":return N(M,C,_,I)??N(B,C,_,I);case"==":return N(M,C,_,I)==N(B,C,_,I);case"===":return N(M,C,_,I)===N(B,C,_,I);case"!=":return N(M,C,_,I)!=N(B,C,_,I);case"!==":return N(M,C,_,I)!==N(B,C,_,I);case"instanceof":{const z=N(B,C,_,I);return kt(z)?N(M,C,_,I)instanceof z:!1}case"in":{const z=N(B,C,_,I);return e_(z)?N(M,C,_,I)in z:!1}case"+":return N(M,C,_,I)+N(B,C,_,I);case"-":return N(M,C,_,I)-N(B,C,_,I);case"*":return N(M,C,_,I)*N(B,C,_,I);case"/":return N(M,C,_,I)/N(B,C,_,I);case"%":return N(M,C,_,I)%N(B,C,_,I);case"<":return N(M,C,_,I)<N(B,C,_,I);case">":return N(M,C,_,I)>N(B,C,_,I);case"<=":return N(M,C,_,I)<=N(B,C,_,I);case">=":return N(M,C,_,I)>=N(B,C,_,I);default:throw et(108,b.operation)}}case v:return N(b.condition,C,_,I)?N(b.yes,C,_,I):N(b.no,C,_,I);case y:{let M=N(b.value,C,_,I);if(b.op!=="="){if(I!=null)throw et(113);const B=N(b.target,C,_,I);switch(b.op){case"/=":M=B/M;break;case"*=":M=B*M;break;case"+=":M=B+M;break;case"-=":M=B-M;break;default:throw et(108,b.op)}}return j(b.target,C,_,M)}case R:return($=_==null?void 0:_.useConverter)==null?void 0:$.call(_,b.name,"toView",N(b.expression,C,_,I),b.args.map(M=>N(M,C,_,I)));case x:return N(b.expression,C,_,I);case P:return b.name;case E:return N(b.iterable,C,_,I);case A:if(b.isMulti){let M=b.parts[0],B=0;for(;B<b.expressions.length;++B)M+=Kd(N(b.expressions[B],C,_,I)),M+=b.parts[B+1];return M}else return`${b.parts[0]}${N(b.firstExpression,C,_,I)}${b.parts[1]}`;case F:return N(b.target,C,_,I);case L:return b.list.map(M=>N(M,C,_,I));case S:case T:case W:default:return;case V:return b.evaluate(C,_,I)}}function j(b,C,_,I){var $;switch(b.$kind){case i:{if(b.name==="$host")throw et(106);const M=H(C,b.name,b.ancestor);return M[b.name]=I}case f:{const M=N(b.object,C,_,null);if(M==null){if(_!=null&&_.strict)throw et(116,b.name);j(b.object,C,_,{[b.name]:I})}else e_(M)&&(b.name==="length"&&ai(M)&&!isNaN(I)?M.splice(I):M[b.name]=I);return I}case g:{const M=N(b.object,C,_,null),B=N(b.key,C,_,null);if(M==null){if(_!=null&&_.strict)throw et(116,B);return j(b.object,C,_,{[B]:I}),I}if(ai(M)){if(B==="length"&&!isNaN(I))return M.splice(I),I;if(Jv(B))return M.splice(B,1,I),I}return M[B]=I}case y:return j(b.value,C,_,I),j(b.target,C,_,I);case R:return I=($=_==null?void 0:_.useConverter)==null?void 0:$.call(_,b.name,"fromView",I,b.args.map(M=>N(M,C,_,null))),j(b.expression,C,_,I);case x:return j(b.expression,C,_,I);case L:case W:{const M=b.list,B=M.length;let z,U;for(z=0;z<B;z++)switch(U=M[z],U.$kind){case F:j(U,C,_,I);break;case L:case W:{if(typeof I!="object"||I===null)throw et(112);let le=N(U.source,pi.create(I),_,null);le===void 0&&U.initializer&&(le=N(U.initializer,C,_,null)),j(U,C,_,le);break}}break}case F:{if(b instanceof S6){if(I==null)return;if(typeof I!="object")throw et(112);let M=N(b.source,pi.create(I),_,null);M===void 0&&b.initializer&&(M=N(b.initializer,C,_,null)),j(b.target,C,_,M)}else{if(I==null)return;if(typeof I!="object")throw et(112);const M=b.indexOrProperties;let B;if(Jv(M)){if(!Array.isArray(I))throw et(112);B=I.slice(M)}else B=Object.entries(I).reduce((z,[U,le])=>(M.includes(U)||(z[U]=le),z),{});j(b.target,C,_,B)}break}case V:return b.assign(C,_,I);default:return}}function k(b,C,_){var I,$,M;switch(b.$kind){case x:{(I=_.bindBehavior)==null||I.call(_,b.name,C,b.args.map(B=>N(B,C,_,null))),k(b.expression,C,_);break}case R:{($=_.bindConverter)==null||$.call(_,b.name),k(b.expression,C,_);break}case E:{k(b.iterable,C,_);break}case V:(M=b.bind)==null||M.call(b,C,_)}}function K(b,C,_){var I,$,M;switch(b.$kind){case x:{(I=_.unbindBehavior)==null||I.call(_,b.name,C),K(b.expression,C,_);break}case R:{($=_.unbindConverter)==null||$.call(_,b.name),K(b.expression,C,_);break}case E:{K(b.iterable,C,_);break}case V:(M=b.unbind)==null||M.call(b,C,_)}}const ie="at map filter includes indexOf lastIndexOf findIndex find flat flatMap join reduce reduceRight slice every some sort".split(" ");return{astEvaluate:N,astAssign:j,astBind:k,astUnbind:K}})(),gte=n=>{const e=n.prototype;["bindBehavior","unbindBehavior","bindConverter","unbindConverter","useConverter"].forEach(t=>{rl(e,t,()=>{throw et(99,t)})})},Cz=Qu.createInterface("ICoercionConfiguration"),XR=0,Dc=1,pte=2,mte=4,WO=VO({None:XR,Observer:Dc,Node:pte,Layout:mte});function qd(n=0){const e=Array(n);let t=0;for(;t<n;)e[t]=t++;return e.deletedIndices=[],e.deletedItems=[],e.isIndexMap=!0,e}let bte=!1;const oo=(()=>{function n(a,l){return a==null?s:s(a)}function e(){return rl(this,"subs",new o)}function t(a){return this.subs.add(a)}function i(a){return this.subs.remove(a)}const r=new WeakSet;function s(a,l){if(!r.has(a)){r.add(a);const c=a.prototype;Zo(c,"subs",{get:e}),ic(c,"subscribe",t),ic(c,"unsubscribe",i)}return a}class o{constructor(){this.count=0,this._subs=[],this._requestDirtySubs=[],this._hasDirtySubs=!1}add(l){return this._subs.includes(l)?!1:(this._subs[this._subs.length]=l,"handleDirty"in l&&(this._requestDirtySubs[this._requestDirtySubs.length]=l,this._hasDirtySubs=!0),++this.count,!0)}remove(l){let c=this._subs.indexOf(l);return c!==-1?(this._subs.splice(c,1),c=this._requestDirtySubs.indexOf(l),c!==-1&&(this._requestDirtySubs.splice(c,1),this._hasDirtySubs=this._requestDirtySubs.length>0),--this.count,!0):!1}notify(l,c){for(const u of this._subs.slice(0))u.handleChange(l,c)}notifyCollection(l,c){const u=this._subs.slice(0),h=u.length;let d=0;for(;d<h;++d)u[d].handleCollectionChange(l,c)}notifyDirty(){if(this._hasDirtySubs)for(const l of this._requestDirtySubs.slice(0))l.handleDirty()}}return n})();class Sz{constructor(e){this.owner=e,this.type=Dc,this._value=(this._obj=e.collection).length}getValue(){return this._obj.length}setValue(e){e!==this._value&&(Number.isNaN(e)?console.warn(`Invalid value "${e}" for array length`):(this._obj.splice(e),this._value=this._obj.length))}handleDirty(){this._value!==this._obj.length&&this.subs.notifyDirty()}handleCollectionChange(e,t){const i=this._value,r=this._obj.length;(this._value=r)!==i&&(this.subs.notifyDirty(),this.subs.notify(this._value,i))}}_z(Sz);class jO{constructor(e){this.owner=e,this.type=Dc,this._value=(this._obj=e.collection).size}getValue(){return this._obj.size}setValue(){throw et(220)}handleDirty(){this._value!==this._obj.size&&this.subs.notifyDirty()}handleCollectionChange(e,t){const i=this._value,r=this._obj.size;(this._value=r)!==i&&this.subs.notify(this._value,i)}}_z(jO);function _z(n){const e=n.prototype;return ic(e,"subscribe",vte),ic(e,"unsubscribe",wte),oo(n,null)}function vte(n){this.subs.add(n)&&this.subs.count===1&&this.owner.subscribe(this)}function wte(n){this.subs.remove(n)&&this.subs.count===0&&this.owner.subscribe(this)}const lv=(()=>{const n=Symbol.for("__au_arr_obs__"),e=Array[n]??rl(Array,n,new WeakMap);function t(p,m){return p===m?0:(p=p===null?"null":p.toString(),m=m===null?"null":m.toString(),p<m?-1:1)}function i(p,m){return p===void 0?m===void 0?0:1:m===void 0?-1:0}function r(p,m,v,y,w){let R,x,S,T,P,E,A;for(E=v+1;E<y;E++){for(R=p[E],x=m[E],A=E-1;A>=v&&(S=p[A],T=m[A],P=w(S,R),P>0);A--)p[A+1]=S,m[A+1]=T;p[A+1]=R,m[A+1]=x}}function s(p,m,v,y,w){let R=0,x=0,S,T,P,E,A,L,W,F,V,H,N,j,k,K,ie,b,C,_,I;for(;;){if(y-v<=10){r(p,m,v,y,w);return}R=v+(y-v>>1),S=p[v],E=m[v],T=p[y-1],A=m[y-1],P=p[R],L=m[R],W=w(S,T),W>0&&(H=S,N=E,S=T,E=A,T=H,A=N),F=w(S,P),F>=0?(H=S,N=E,S=P,E=L,P=T,L=A,T=H,A=N):(V=w(T,P),V>0&&(H=T,N=A,T=P,A=L,P=H,L=N)),p[v]=S,m[v]=E,p[y-1]=P,m[y-1]=L,j=T,k=A,K=v+1,ie=y-1,p[R]=p[K],m[R]=m[K],p[K]=j,m[K]=k;e:for(x=K+1;x<ie;x++)if(b=p[x],C=m[x],_=w(b,j),_<0)p[x]=p[K],m[x]=m[K],p[K]=b,m[K]=C,K++;else if(_>0){do{if(ie--,ie==x)break e;I=p[ie],_=w(I,j)}while(_>0);p[x]=p[ie],m[x]=m[ie],p[ie]=b,m[ie]=C,_<0&&(b=p[x],C=m[x],p[x]=p[K],m[x]=m[K],p[K]=b,m[K]=C,K++)}y-ie<K-v?(s(p,m,ie,y,w),y=K):(s(p,m,v,K,w),v=ie)}}const o=Array.prototype,a=["push","unshift","pop","shift","splice","reverse","sort"];let l;function c(){const p=o.push,m=o.unshift,v=o.pop,y=o.shift,w=o.splice,R=o.reverse,x=o.sort;l={push:function(...S){const T=e.get(this);if(T===void 0)return p.apply(this,S);const P=this.length,E=S.length;if(E===0)return P;this.length=T.indexMap.length=P+E;let A=P;for(;A<this.length;)this[A]=S[A-P],T.indexMap[A]=-2,A++;return T.notify(),this.length},unshift:function(...S){const T=e.get(this);if(T===void 0)return m.apply(this,S);const P=S.length,E=new Array(P);let A=0;for(;A<P;)E[A++]=-2;m.apply(T.indexMap,E);const L=m.apply(this,S);return T.notify(),L},pop:function(){const S=e.get(this);if(S===void 0)return v.call(this);const T=S.indexMap,P=v.call(this),E=T.length-1;return T[E]>-1&&(T.deletedIndices.push(T[E]),T.deletedItems.push(P)),v.call(T),S.notify(),P},shift:function(){const S=e.get(this);if(S===void 0)return y.call(this);const T=S.indexMap,P=y.call(this);return T[0]>-1&&(T.deletedIndices.push(T[0]),T.deletedItems.push(P)),y.call(T),S.notify(),P},splice:function(...S){const T=S[0],P=S[1],E=e.get(this);if(E===void 0)return w.apply(this,S);const A=this.length,L=T|0,W=L<0?Math.max(A+L,0):Math.min(L,A),F=E.indexMap,V=S.length,H=V===0?0:V===1?A-W:P;let N=W;if(H>0){const k=N+H;for(;N<k;)F[N]>-1&&(F.deletedIndices.push(F[N]),F.deletedItems.push(this[N])),N++}if(N=0,V>2){const k=V-2,K=new Array(k);for(;N<k;)K[N++]=-2;w.call(F,T,P,...K)}else w.apply(F,S);const j=w.apply(this,S);return(H>0||N>0)&&E.notify(),j},reverse:function(){const S=e.get(this);if(S===void 0)return R.call(this),this;const T=this.length,P=T/2|0;let E=0;for(;E!==P;){const A=T-E-1,L=this[E],W=S.indexMap[E],F=this[A],V=S.indexMap[A];this[E]=F,S.indexMap[E]=V,this[A]=L,S.indexMap[A]=W,E++}return S.notify(),this},sort:function(S){const T=e.get(this);if(T===void 0)return x.call(this,S),this;let P=this.length;if(P<2)return this;s(this,T.indexMap,0,P,i);let E=0;for(;E<P&&this[E]!==void 0;)E++;(S===void 0||!kt(S))&&(S=t),s(this,T.indexMap,0,E,S);let A=!1;for(E=0,P=T.indexMap.length;P>E;++E)if(T.indexMap[E]!==E){A=!0;break}return(A||bte)&&T.notify(),this}};for(const S of a)Zo(l[S],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1})}let u=!1;const h="__au_arr_on__";function d(){if(l===void 0&&c(),!(ute(h,Array)??!1)){hte(!0,Array,h);for(const p of a)o[p].observing!==!0&&rl(o,p,l[p])}}class f{constructor(m){this.type=Dc,u||(u=!0,d()),this.indexObservers={},this.collection=m,this.indexMap=qd(m.length),this.lenObs=void 0,e.set(m,this)}notify(){const m=this.subs;m.notifyDirty();const v=this.indexMap,y=this.collection,w=y.length;this.indexMap=qd(w),m.notifyCollection(y,v)}getLengthObserver(){return this.lenObs??(this.lenObs=new Sz(this))}getIndexObserver(m){var v;return(v=this.indexObservers)[m]??(v[m]=new g(this,m))}}oo(f,null);class g{constructor(m,v){this.owner=m,this.index=v,this.doNotCache=!0,this.value=this.getValue()}getValue(){return this.owner.collection[this.index]}setValue(m){if(m===this.getValue())return;const v=this.owner,y=this.index,w=v.indexMap;w[y]>-1&&w.deletedIndices.push(w[y]),w[y]=-2,v.collection[y]=m,v.notify()}handleDirty(){this.value!==this.getValue()&&this.subs.notifyDirty()}handleCollectionChange(m,v){const y=this.index;if(v[y]===y)return;const R=this.value,x=this.value=this.getValue();R!==x&&this.subs.notify(x,R)}subscribe(m){this.subs.add(m)&&this.subs.count===1&&this.owner.subscribe(this)}unsubscribe(m){this.subs.remove(m)&&this.subs.count===0&&this.owner.unsubscribe(this)}}return oo(g,null),function(m){let v=e.get(m);return v===void 0&&(e.set(m,v=new f(m)),d()),v}})(),l_=(()=>{const n=Symbol.for("__au_set_obs__"),e=Set[n]??rl(Set,n,new WeakMap),{add:t,clear:i,delete:r}=Set.prototype,s=["add","clear","delete"],o={add:function(c){const u=e.get(this);if(u===void 0)return t.call(this,c),this;const h=this.size;return t.call(this,c),this.size===h?this:(u.indexMap[h]=-2,u.notify(),this)},clear:function(){const c=e.get(this);if(c===void 0)return i.call(this);if(this.size>0){const h=c.indexMap;let d=0;for(const f of this.keys())h[d]>-1&&(h.deletedIndices.push(h[d]),h.deletedItems.push(f)),d++;i.call(this),h.length=0,c.notify()}},delete:function(c){const u=e.get(this);if(u===void 0)return r.call(this,c);if(this.size===0)return!1;let d=0;const f=u.indexMap;for(const g of this.keys()){if(g===c){f[d]>-1&&(f.deletedIndices.push(f[d]),f.deletedItems.push(g)),f.splice(d,1);const p=r.call(this,c);return p===!0&&u.notify(),p}d++}return!1}};function a(c){for(const u of s)rl(c,u,o[u])}class l{constructor(u){this.type=Dc,this.collection=u,this.indexMap=qd(u.size),this.lenObs=void 0}notify(){const u=this.subs;u.notifyDirty();const h=this.indexMap,d=this.collection,f=d.size;this.indexMap=qd(f),u.notifyCollection(d,h)}getLengthObserver(){return this.lenObs??(this.lenObs=new jO(this))}}return oo(l,null),function(u){let h=e.get(u);return h===void 0&&(e.set(u,h=new l(u)),a(u)),h}})(),c_=(()=>{const n=Symbol.for("__au_map_obs__"),e=Map[n]??rl(Map,n,new WeakMap),{set:t,clear:i,delete:r}=Map.prototype,s=["set","clear","delete"],o={set:function(c,u){const h=e.get(this);if(h===void 0)return t.call(this,c,u),this;const d=this.get(c),f=this.size;if(t.call(this,c,u),this.size===f){let p=0;for(const m of this.entries()){if(m[0]===c)return m[1]!==d&&(h.indexMap.deletedIndices.push(h.indexMap[p]),h.indexMap.deletedItems.push(m),h.indexMap[p]=-2,h.notify()),this;p++}return this}return h.indexMap[f]=-2,h.notify(),this},clear:function(){const c=e.get(this);if(c===void 0)return i.call(this);if(this.size>0){const h=c.indexMap;let d=0;for(const f of this.keys())h[d]>-1&&(h.deletedIndices.push(h[d]),h.deletedItems.push(f)),d++;i.call(this),h.length=0,c.notify()}},delete:function(c){const u=e.get(this);if(u===void 0)return r.call(this,c);if(this.size===0)return!1;let d=0;const f=u.indexMap;for(const g of this.keys()){if(g===c){f[d]>-1&&(f.deletedIndices.push(f[d]),f.deletedItems.push(g)),f.splice(d,1);const p=r.call(this,c);return p===!0&&u.notify(),p}++d}return!1}};function a(c){for(const u of s)rl(c,u,o[u])}class l{constructor(u){this.type=Dc,this.collection=u,this.indexMap=qd(u.size),this.lenObs=void 0}notify(){const u=this.subs;u.notifyDirty();const h=this.indexMap,d=this.collection,f=d.size;this.indexMap=qd(f),u.notifyCollection(d,h)}getLengthObserver(){return this.lenObs??(this.lenObs=new jO(this))}}return oo(l,null),function(u){let h=e.get(u);return h===void 0&&(e.set(u,h=new l(u)),a(u)),h}})(),Y$=(()=>{class n{constructor(u){this.version=0,this.count=0,this.o=new Map,this.b=u}add(u){this.o.has(u)||(u.subscribe(this.b),++this.count),this.o.set(u,this.version)}clear(){this.o.forEach(t,this),this.count=this.o.size}clearAll(){this.o.forEach(e,this),this.o.clear(),this.count=0}}function e(c,u){u.unsubscribe(this.b)}function t(c,u){this.version!==c&&(u.unsubscribe(this.b),this.o.delete(u))}function i(){return rl(this,"obs",new n(this))}function r(c,u){this.obs.add(this.oL.getObserver(c,u))}function s(c){let u;if(ai(c))u=lv(c);else if($p(c))u=l_(c);else if(Ou(c))u=c_(c);else throw et(210,c);this.obs.add(u)}function o(c){this.obs.add(c)}function a(){throw et(99,"handleChange")}function l(){throw et(99,"handleCollectionChange")}return function(u,h){const d=u.prototype;return ic(d,"observe",r),ic(d,"observeCollection",s),ic(d,"subscribeTo",o),Zo(d,"obs",{get:i}),ic(d,"handleChange",a),ic(d,"handleCollectionChange",l),u}})();function oa(n,e){return n==null?Y$:Y$(n,e)}let Rt=null;const Fg=[];let Ec=!1;function yte(){Ec=!1}function Cte(){Ec=!0}function ZR(){return Rt}function zO(n){if(n==null)throw et(206);if(Rt==null){Rt=n,Fg[0]=Rt,Ec=!0;return}if(Rt===n)throw et(207);Fg.push(n),Rt=n,Ec=!0}function UO(n){if(n==null)throw et(208);if(Rt!==n)throw et(209);Fg.pop(),Rt=Fg.length>0?Fg[Fg.length-1]:null,Ec=Rt!=null}const Ste=VO({get current(){return Rt},get connecting(){return Ec},enter:zO,exit:UO,pause:yte,resume:Cte}),yp=Reflect.get,_te=Object.prototype.toString,YA=new WeakMap,Rte="__au_nw__",Ete="__au_nw";function Rz(n){switch(_te.call(n)){case"[object Object]":return n.constructor[Rte]!==!0;case"[object Array]":case"[object Map]":case"[object Set]":return!0;default:return!1}}const zp="__raw__";function _t(n){return Rz(n)?QR(n):n}function QR(n){return YA.get(n)??xte(n)}function $t(n){return n[zp]??n}function Ir(n){return Rz(n)&&n[zp]||n}function GO(n,e){return e==="constructor"||e==="__proto__"||e==="$observers"||e===Symbol.toPrimitive||e===Symbol.toStringTag||n.constructor[`${Ete}_${Kd(e)}__`]===!0}function xte(n){const e=ai(n)?Mte:Ou(n)||$p(n)?Zte:Tte,t=new Proxy(n,e);return YA.set(n,t),YA.set(t,t),t}const Tte={get(n,e,t){if(e===zp)return n;const i=ZR();return!Ec||GO(n,e)||i==null?yp(n,e,t):(i.observe(n,e),_t(yp(n,e,t)))}},Mte={get(n,e,t){if(e===zp)return n;if(!Ec||GO(n,e)||Rt==null)return yp(n,e,t);switch(e){case"length":return Rt.observe(n,"length"),n.length;case"map":return Ate;case"includes":return Ote;case"indexOf":return kte;case"lastIndexOf":return Dte;case"every":return Pte;case"filter":return Ite;case"find":return Nte;case"findIndex":return Lte;case"flat":return Hte;case"flatMap":return $te;case"join":return Fte;case"push":return Vte;case"pop":return Bte;case"reduce":return qte;case"reduceRight":return Xte;case"reverse":return Ute;case"shift":return Wte;case"unshift":return jte;case"slice":return Kte;case"splice":return zte;case"some":return Gte;case"sort":return Yte;case"keys":return Ez;case"values":case Symbol.iterator:return KA;case"entries":return qA}return Rt.observe(n,e),_t(yp(n,e,t))},ownKeys(n){var e;return(e=ZR())==null||e.observe(n,"length"),Reflect.ownKeys(n)}};function Ate(n,e){const t=$t(this),i=t.map((r,s)=>Ir(n.call(e,_t(r),s,this)));return Un(Rt,t),_t(i)}function Pte(n,e){const t=$t(this),i=t.every((r,s)=>n.call(e,_t(r),s,this));return Un(Rt,t),i}function Ite(n,e){const t=$t(this),i=t.filter((r,s)=>Ir(n.call(e,_t(r),s,this)));return Un(Rt,t),_t(i)}function Ote(n){const e=$t(this),t=e.includes(Ir(n));return Un(Rt,e),t}function kte(n){const e=$t(this),t=e.indexOf(Ir(n));return Un(Rt,e),t}function Dte(n){const e=$t(this),t=e.lastIndexOf(Ir(n));return Un(Rt,e),t}function Lte(n,e){const t=$t(this),i=t.findIndex((r,s)=>Ir(n.call(e,_t(r),s,this)));return Un(Rt,t),i}function Nte(n,e){const t=$t(this),i=t.find((r,s)=>n(_t(r),s,this),e);return Un(Rt,t),_t(i)}function Hte(){const n=$t(this);return Un(Rt,n),_t(n.flat())}function $te(n,e){const t=$t(this);return Un(Rt,t),QR(t.flatMap((i,r)=>_t(n.call(e,_t(i),r,this))))}function Fte(n){const e=$t(this);return Un(Rt,e),e.join(n)}function Bte(){return _t($t(this).pop())}function Vte(...n){return $t(this).push(...n)}function Wte(){return _t($t(this).shift())}function jte(...n){return $t(this).unshift(...n)}function zte(...n){return _t($t(this).splice(...n))}function Ute(...n){const e=$t(this),t=e.reverse();return Un(Rt,e),_t(t)}function Gte(n,e){const t=$t(this),i=t.some((r,s)=>Ir(n.call(e,_t(r),s,this)));return Un(Rt,t),i}function Yte(n){const e=$t(this),t=e.sort(n);return Un(Rt,e),_t(t)}function Kte(n,e){const t=$t(this);return Un(Rt,t),QR(t.slice(n,e))}function qte(n,e){const t=$t(this),i=t.reduce((r,s,o)=>n(r,_t(s),o,this),e);return Un(Rt,t),_t(i)}function Xte(n,e){const t=$t(this),i=t.reduceRight((r,s,o)=>n(r,_t(s),o,this),e);return Un(Rt,t),_t(i)}const Zte={get(n,e,t){if(e===zp)return n;const i=ZR();if(!Ec||GO(n,e)||i==null)return yp(n,e,t);switch(e){case"size":return i.observe(n,"size"),n.size;case"clear":return ine;case"delete":return rne;case"forEach":return Qte;case"add":if($p(n))return nne;break;case"get":if(Ou(n))return ene;break;case"set":if(Ou(n))return tne;break;case"has":return Jte;case"keys":return Ez;case"values":return KA;case"entries":return qA;case Symbol.iterator:return Ou(n)?qA:KA}return _t(yp(n,e,t))}};function Qte(n,e){const t=$t(this);return Un(Rt,t),t.forEach((i,r)=>{n.call(e,_t(i),_t(r),this)})}function Jte(n){const e=$t(this);return Un(Rt,e),e.has(Ir(n))}function ene(n){const e=$t(this);return Un(Rt,e),_t(e.get(Ir(n)))}function tne(n,e){return _t($t(this).set(Ir(n),Ir(e)))}function nne(n){return _t($t(this).add(Ir(n)))}function ine(){return _t($t(this).clear())}function rne(n){return _t($t(this).delete(Ir(n)))}function Ez(){const n=$t(this);Un(Rt,n);const e=n.keys();return{next(){const t=e.next(),i=t.value,r=t.done;return r?{value:void 0,done:r}:{value:_t(i),done:r}},[Symbol.iterator](){return this}}}function KA(){const n=$t(this);Un(Rt,n);const e=n.values();return{next(){const t=e.next(),i=t.value,r=t.done;return r?{value:void 0,done:r}:{value:_t(i),done:r}},[Symbol.iterator](){return this}}}function qA(){const n=$t(this);Un(Rt,n);const e=n.entries();return{next(){const t=e.next(),i=t.value,r=t.done;return r?{value:void 0,done:r}:{value:[_t(i[0]),_t(i[1])],done:r}},[Symbol.iterator](){return this}}}const Un=(n,e)=>n==null?void 0:n.observeCollection(e),sne=VO({getProxy:QR,getRaw:$t,wrap:_t,unwrap:Ir,rawKey:zp});class u_{constructor(e,t,i,r,s){this.type=Dc,this._value=void 0,this._isRunning=!1,this._isDirty=!1,this._callback=void 0,this._coercer=void 0,this._coercionConfig=void 0,this._obj=e,this._wrapped=s?_t(e):e,this.$get=t,this.$set=i,this.oL=r}init(e){this._value=e,this._isDirty=!1}getValue(){return this.subs.count===0?this.$get.call(this._obj,this._obj,this):(this._isDirty&&(this.compute(),this._isDirty=!1),this._value)}setValue(e){if(kt(this.$set))this._coercer!==void 0&&(e=this._coercer.call(null,e,this._coercionConfig)),ea(e,this._value)||(this._isRunning=!0,this.$set.call(this._obj,e),this._isRunning=!1,this.run());else throw et(221)}useCoercer(e,t){return this._coercer=e,this._coercionConfig=t,!0}useCallback(e){return this._callback=e,!0}handleDirty(){this._isDirty||(this._isDirty=!0,this.subs.notifyDirty())}handleChange(){this._isDirty=!0,this.subs.count>0&&this.run()}handleCollectionChange(){this._isDirty=!0,this.subs.count>0&&this.run()}subscribe(e){this.subs.add(e)&&this.subs.count===1&&(this.compute(),this._isDirty=!1)}unsubscribe(e){this.subs.remove(e)&&this.subs.count===0&&(this._isDirty=!0,this.obs.clearAll())}run(){var i;if(this._isRunning)return;const e=this._value,t=this.compute();this._isDirty=!1,ea(t,e)||((i=this._callback)==null||i.call(this,t,e),this.subs.notify(this._value,e))}compute(){this._isRunning=!0,this.obs.version++;try{return zO(this),this._value=Ir(this.$get.call(this._wrapped,this._wrapped,this))}finally{this.obs.clear(),this._isRunning=!1,UO(this)}}}oa(u_,null),oo(u_,null);const YO=qR("IDirtyChecker",n=>n.callback(()=>{throw et(217)})),one={timeoutsPerCheck:25,disabled:!1,throw:!1,resetToDefault(){this.timeoutsPerCheck=6,this.disabled=!1,this.throw=!1}};class ane{static register(e){e.register(zd.singleton(this,this),zd.aliasTo(this,YO))}constructor(){this.tracked=[],this._task=null,this._elapsedFrames=0,this.p=ve(Bp),this.check=()=>{if(++this._elapsedFrames<one.timeoutsPerCheck)return;this._elapsedFrames=0;const e=this.tracked,t=e.length;let i,r=0;for(;r<t;++r)i=e[r],i.isDirty()&&i.flush()},oo(K$,null)}createProperty(e,t){return new K$(this,e,t)}addProperty(e){this.tracked.push(e),this.tracked.length===1&&(this._task=this.p.taskQueue.queueTask(this.check,{persistent:!0}))}removeProperty(e){this.tracked.splice(this.tracked.indexOf(e),1),this.tracked.length===0&&(this._task.cancel(),this._task=null)}}class K${constructor(e,t,i){this.obj=t,this.key=i,this.type=XR,this._oldValue=void 0,this._dirtyChecker=e}getValue(){return this.obj[this.key]}setValue(e){throw et(219,this.key)}isDirty(){return this._oldValue!==this.obj[this.key]}flush(){const e=this._oldValue,t=this.getValue();this._oldValue=t,this.subs.notify(t,e)}subscribe(e){this.subs.add(e)&&this.subs.count===1&&(this._oldValue=this.obj[this.key],this._dirtyChecker.addProperty(this))}unsubscribe(e){this.subs.remove(e)&&this.subs.count===0&&this._dirtyChecker.removeProperty(this)}}class lne{get doNotCache(){return!0}constructor(e,t){this.type=XR,this._obj=e,this._key=t}getValue(){return this._obj[this._key]}setValue(){}subscribe(){}unsubscribe(){}}class xz{constructor(){this.type=XR}getValue(e,t){return e[t]}setValue(e,t,i){t[i]=e}}class KO{constructor(e,t){this.type=Dc,this._value=void 0,this._observing=!1,this._callback=void 0,this._coercer=void 0,this._coercionConfig=void 0,this._obj=e,this._key=t}getValue(){return this._value}setValue(e){var t,i;if(this._coercer!==void 0&&(e=this._coercer.call(void 0,e,this._coercionConfig)),this._observing){if(ea(e,this._value))return;Fy=this._value,this._value=e,this.subs.notifyDirty(),this.subs.notify(e,Fy),ea(e,this._value)&&((t=this._callback)==null||t.call(this,e,Fy))}else this._value=this._obj[this._key]=e,(i=this._callback)==null||i.call(this,e,Fy)}useCallback(e){return this._callback=e,this.start(),!0}useCoercer(e,t){return this._coercer=e,this._coercionConfig=t,this.start(),!0}subscribe(e){this._observing===!1&&this.start(),this.subs.add(e)}start(){return this._observing===!1&&(this._observing=!0,this._value=this._obj[this._key],Zo(this._obj,this._key,{enumerable:!0,configurable:!0,get:yz(()=>this.getValue(),{getObserver:()=>this}),set:e=>{this.setValue(e)}})),this}stop(){return this._observing&&(Zo(this._obj,this._key,{enumerable:!0,configurable:!0,writable:!0,value:this._value}),this._observing=!1),this}}oo(KO,null);let Fy;const XA=new xz,Up=qR("IObserverLocator",n=>n.singleton(hne)),qO=qR("INodeObserverLocator",n=>n.cachedCallback(e=>(e.getAll(Ud).forEach(t=>{t.error("Using default INodeObserverLocator implementation. Will not be able to observe nodes (HTML etc...).")}),new cne)));class cne{handles(){return!1}getObserver(){return XA}getAccessor(){return XA}}const une=qR("IComputedObserverLocator",n=>n.singleton(class{getObserver(t,i,r,s){const o=new u_(t,r.get,r.set,s,!0);return Zo(t,i,{enumerable:r.enumerable,configurable:!0,get:yz(()=>o.getValue(),{getObserver:()=>o}),set:a=>{o.setValue(a)}}),o}}));class hne{constructor(){this._adapters=[],this._dirtyChecker=ve(YO),this._nodeObserverLocator=ve(qO),this._computedObserverLocator=ve(une)}addAdapter(e){this._adapters.push(e)}getObserver(e,t){if(e==null)throw et(199,t);if(!J5(e))return new lne(e,kt(t)?"":t);if(kt(t))return new u_(e,t,void 0,this,!0);const i=Tz(e);let r=i[t];return r===void 0&&(r=this.createObserver(e,t),r.doNotCache||(i[t]=r)),r}getAccessor(e,t){var r;const i=(r=e.$observers)==null?void 0:r[t];return i!==void 0?i:this._nodeObserverLocator.handles(e,t,this)?this._nodeObserverLocator.getAccessor(e,t,this):XA}getArrayObserver(e){return lv(e)}getMapObserver(e){return c_(e)}getSetObserver(e){return l_(e)}createObserver(e,t){var r,s;if(this._nodeObserverLocator.handles(e,t,this))return this._nodeObserverLocator.getObserver(e,t,this);switch(t){case"length":if(ai(e))return lv(e).getLengthObserver();break;case"size":if(Ou(e))return c_(e).getLengthObserver();if($p(e))return l_(e).getLengthObserver();break;default:if(ai(e)&&Jv(t))return lv(e).getIndexObserver(Number(t));break}let i=X$(e,t);if(i===void 0){let o=q$(e);for(;o!==null&&(i=X$(o,t),i===void 0);)o=q$(o)}if(i!==void 0&&!cte.call(i,"value")){let o=this._getAdapterObserver(e,t,i);return o==null&&(o=(s=(r=i.get)==null?void 0:r.getObserver)==null?void 0:s.call(r,e)),o??(i.configurable?this._computedObserverLocator.getObserver(e,t,i,this):this._dirtyChecker.createProperty(e,t))}return new KO(e,t)}_getAdapterObserver(e,t,i){if(this._adapters.length>0)for(const r of this._adapters){const s=r.getObserver(e,t,i,this);if(s!=null)return s}return null}}const XO=n=>{let e;return ai(n)?e=lv(n):Ou(n)?e=c_(n):$p(n)&&(e=l_(n)),e},q$=Object.getPrototypeOf,X$=Object.getOwnPropertyDescriptor,Tz=n=>{let e=n.$observers;return e===void 0&&Zo(n,"$observers",{enumerable:!1,value:e=on()}),e};class dne{constructor(e,t){this.oL=e,this.fn=t,this.maxRunCount=10,this.queued=!1,this.running=!1,this.runCount=0,this.stopped=!1,this._cleanupTask=void 0,this.run=()=>{var i;if(this.stopped)throw et(225);if(!this.running){++this.runCount,this.running=!0,this.queued=!1,++this.obs.version;try{(i=this._cleanupTask)==null||i.call(void 0),zO(this),this._cleanupTask=this.fn(this)}finally{this.obs.clear(),this.running=!1,UO(this)}if(this.queued){if(this.runCount>this.maxRunCount)throw this.runCount=0,et(226);this.run()}else this.runCount=0}},this.stop=()=>{var i;(i=this._cleanupTask)==null||i.call(void 0),this._cleanupTask=void 0,this.stopped=!0,this.obs.clearAll()}}handleChange(){this.queued=!0,this.run()}handleCollectionChange(){this.queued=!0,this.run()}}oa(dne,null);class Z${constructor(e,t,i,r){this.oL=t,this._value=void 0,this.boundFn=!1,this._scope=e,this.ast=i,this._callback=r}handleChange(){this.run()}handleCollectionChange(){this.run()}run(){this.obs.version++;const e=this._value,t=Ln(this.ast,this._scope,this,this);this.obs.clear(),ea(t,e)||(this._value=t,this._callback.call(void 0,t,e))}stop(){this.obs.clearAll(),this._value=void 0}}oa(Z$,null),gte(Z$);const fne=(()=>{function n(s){return s.$observers===void 0&&Zo(s,"$observers",{value:{}}),s.$observers}const e={};function t(s,o){r.mixed||(r.mixed=!0,oo(r,null));let a=!1,l;if(typeof s=="object"?l=s:s!=null?(l={name:s},a=!0):l=l6,arguments.length===0)return function(h,d){if(d.kind!=="field")throw et(224);return c(d)};if((o==null?void 0:o.kind)==="field")return c(o);if(a)return function(h,d){u(h,l.name,()=>e,!0)};return function(h,d){switch(d.kind){case"field":return c(d);case"class":return u(h,l.name,()=>e,!0);default:throw et(224)}};function c(h){let d;return h.addInitializer(function(){u(this,h.name,()=>d,!1)}),function(f){return d=f}}function u(h,d,f,g){const p=l.callback||`${Kd(d)}Changed`,m=l.set,v=function(){var R;const w=i(this,d,p,f,m);return(R=ZR())==null||R.subscribeTo(w),w.getValue()};v.getObserver=function(w){return i(w,d,p,f,m)};const y={enumerable:!0,configurable:!0,get:v,set(w){i(this,d,p,f,m).setValue(w)}};Zo(g?h.prototype:h,d,y)}}function i(s,o,a,l,c){const u=n(s);let h=u[o];if(h==null){const d=l();h=new r(s,a,c,d===e?void 0:d),u[o]=h}return h}class r{constructor(o,a,l,c){this.type=Dc,this._value=void 0,this._oldValue=void 0,this._obj=o,this._setter=l,this._hasSetter=kt(l);const u=o[a];this.cb=kt(u)?u:void 0,this._value=c}getValue(){return this._value}setValue(o){var a;this._hasSetter&&(o=this._setter(o)),ea(o,this._value)||(this._oldValue=this._value,this._value=o,this.subs.notifyDirty(),this.subs.notify(this._value,this._oldValue),ea(o,this._value)&&((a=this.cb)==null||a.call(this._obj,this._value,this._oldValue)))}}return r.mixed=!1,t})(),ym="pending",mS="running",ix="completed",By="canceled",rx=new Map,Q$=n=>()=>{throw Xd(`AUR1005: The PLATFORM did not receive a valid reference to the global function '${n}'.`)};class ZO{constructor(e,t={}){var i,r;this.macroTaskRequested=!1,this.macroTaskHandle=-1,this.globalThis=e,"decodeURI decodeURIComponent encodeURI encodeURIComponent Date Reflect console".split(" ").forEach(s=>{this[s]=s in t?t[s]:e[s]}),"clearInterval clearTimeout queueMicrotask setInterval setTimeout".split(" ").forEach(s=>{var o;this[s]=s in t?t[s]:((o=e[s])==null?void 0:o.bind(e))??Q$(s)}),this.performanceNow="performanceNow"in t?t.performanceNow:((r=(i=e.performance)==null?void 0:i.now)==null?void 0:r.bind(e.performance))??Q$("performance.now"),this.flushMacroTask=this.flushMacroTask.bind(this),this.taskQueue=new QO(this,this.requestMacroTask.bind(this),this.cancelMacroTask.bind(this))}static getOrCreate(e,t={}){let i=rx.get(e);return i===void 0&&rx.set(e,i=new ZO(e,t)),i}static set(e,t){rx.set(e,t)}requestMacroTask(){this.macroTaskRequested=!0,this.macroTaskHandle===-1&&(this.macroTaskHandle=this.setTimeout(this.flushMacroTask,0))}cancelMacroTask(){this.macroTaskRequested=!1,this.macroTaskHandle>-1&&(this.clearTimeout(this.macroTaskHandle),this.macroTaskHandle=-1)}flushMacroTask(){this.macroTaskHandle=-1,this.macroTaskRequested===!0&&(this.macroTaskRequested=!1,this.taskQueue.flush())}}class QO{get isEmpty(){return this._pendingAsyncCount===0&&this._processing.length===0&&this._pending.length===0&&this._delayed.length===0}get _hasNoMoreFiniteWork(){return this._pendingAsyncCount===0&&this._processing.every(sx)&&this._pending.every(sx)&&this._delayed.every(sx)}constructor(e,t,i){this.platform=e,this.$request=t,this.$cancel=i,this._suspenderTask=void 0,this._pendingAsyncCount=0,this._processing=[],this._pending=[],this._delayed=[],this._flushRequested=!1,this._yieldPromise=void 0,this._lastRequest=0,this._lastFlush=0,this._requestFlush=()=>{this._tracer.enabled&&this._tracer.enter(this,"requestFlush"),this._flushRequested||(this._flushRequested=!0,this._lastRequest=this._now(),this.$request()),this._tracer.enabled&&this._tracer.leave(this,"requestFlush")},this._now=e.performanceNow,this._tracer=new mne(e.console)}flush(e=this._now()){if(this._tracer.enabled&&this._tracer.enter(this,"flush"),this._flushRequested=!1,this._lastFlush=e,this._suspenderTask===void 0){let t;if(this._pending.length>0&&(this._processing.push(...this._pending),this._pending.length=0),this._delayed.length>0)for(let r=0;r<this._delayed.length;++r)t=this._delayed[r],t.queueTime<=e&&(this._processing.push(t),this._delayed.splice(r--,1));let i;for(;this._processing.length>0;)if((i=this._processing.shift()).run(),i.status===mS)if(i.suspend===!0){this._suspenderTask=i,this._requestFlush(),this._tracer.enabled&&this._tracer.leave(this,"flush early async");return}else++this._pendingAsyncCount;if(this._pending.length>0&&(this._processing.push(...this._pending),this._pending.length=0),this._delayed.length>0)for(let r=0;r<this._delayed.length;++r)t=this._delayed[r],t.queueTime<=e&&(this._processing.push(t),this._delayed.splice(r--,1));if((this._processing.length>0||this._delayed.length>0||this._pendingAsyncCount>0)&&this._requestFlush(),this._yieldPromise!==void 0&&this._hasNoMoreFiniteWork){const r=this._yieldPromise;this._yieldPromise=void 0,r.resolve()}}else this._requestFlush();this._tracer.enabled&&this._tracer.leave(this,"flush full")}cancel(){this._tracer.enabled&&this._tracer.enter(this,"cancel"),this._flushRequested&&(this.$cancel(),this._flushRequested=!1),this._tracer.enabled&&this._tracer.leave(this,"cancel")}async yield(){this._tracer.enabled&&this._tracer.enter(this,"yield"),this.isEmpty?this._tracer.enabled&&this._tracer.leave(this,"yield empty"):(this._yieldPromise===void 0&&(this._tracer.enabled&&this._tracer.trace(this,"yield - creating promise"),this._yieldPromise=Pz()),await this._yieldPromise,this._tracer.enabled&&this._tracer.leave(this,"yield task"))}queueTask(e,t){this._tracer.enabled&&this._tracer.enter(this,"queueTask");const{delay:i,preempt:r,persistent:s,suspend:o}={...bne,...t};if(r){if(i>0)throw wne();if(s)throw yne()}this._processing.length===0&&this._requestFlush();const a=this._now(),l=new pne(this._tracer,this,a,a+i,r,s,o,e);return r?this._processing[this._processing.length]=l:i===0?this._pending[this._pending.length]=l:this._delayed[this._delayed.length]=l,this._tracer.enabled&&this._tracer.leave(this,"queueTask"),l}remove(e){this._tracer.enabled&&this._tracer.enter(this,"remove");let t=this._processing.indexOf(e);if(t>-1){this._processing.splice(t,1),this._tracer.enabled&&this._tracer.leave(this,"remove processing");return}if(t=this._pending.indexOf(e),t>-1){this._pending.splice(t,1),this._tracer.enabled&&this._tracer.leave(this,"remove pending");return}if(t=this._delayed.indexOf(e),t>-1){this._delayed.splice(t,1),this._tracer.enabled&&this._tracer.leave(this,"remove delayed");return}throw this._tracer.enabled&&this._tracer.leave(this,"remove error"),Xd(`Task #${e.id} could not be found`)}_resetPersistentTask(e){this._tracer.enabled&&this._tracer.enter(this,"resetPersistentTask"),e.reset(this._now()),e.createdTime===e.queueTime?this._pending[this._pending.length]=e:this._delayed[this._delayed.length]=e,this._tracer.enabled&&this._tracer.leave(this,"resetPersistentTask")}_completeAsyncTask(e){var t;if(this._tracer.enabled&&this._tracer.enter(this,"completeAsyncTask"),e.suspend===!0){if(this._suspenderTask!==e)throw this._tracer.enabled&&this._tracer.leave(this,"completeAsyncTask error"),Xd(`Async task completion mismatch: suspenderTask=${(t=this._suspenderTask)==null?void 0:t.id}, task=${e.id}`);this._suspenderTask=void 0}else--this._pendingAsyncCount;if(this._yieldPromise!==void 0&&this._hasNoMoreFiniteWork){const i=this._yieldPromise;this._yieldPromise=void 0,i.resolve()}this.isEmpty&&this.cancel(),this._tracer.enabled&&this._tracer.leave(this,"completeAsyncTask")}}class ZA extends Error{constructor(e){super("Task was canceled."),this.task=e}}let gne=0;class pne{get result(){const e=this._result;if(e===void 0)switch(this._status){case ym:{const t=this._result=Pz();return this._resolve=t.resolve,this._reject=t.reject,t}case mS:throw Xd("Trying to await task from within task will cause a deadlock.");case ix:return this._result=Promise.resolve();case By:return this._result=Promise.reject(new ZA(this))}return e}get status(){return this._status}constructor(e,t,i,r,s,o,a,l){this.taskQueue=t,this.createdTime=i,this.queueTime=r,this.preempt=s,this.persistent=o,this.suspend=a,this.callback=l,this.id=++gne,this._resolve=void 0,this._reject=void 0,this._result=void 0,this._status=ym,this._tracer=e}run(e=this.taskQueue.platform.performanceNow()){if(this._tracer.enabled&&this._tracer.enter(this,"run"),this._status!==ym)throw this._tracer.enabled&&this._tracer.leave(this,"run error"),Xd(`Cannot run task in ${this._status} state`);const{persistent:t,taskQueue:i,callback:r,_resolve:s,_reject:o,createdTime:a}=this;let l;this._status=mS;try{l=r(e-a),l instanceof Promise?l.then(c=>{this.persistent?i._resetPersistentTask(this):(t?this._status=By:this._status=ix,this.dispose()),i._completeAsyncTask(this),this._tracer.enabled&&this._tracer.leave(this,"run async then"),s!==void 0&&s(c)}).catch(c=>{if(this.persistent||this.dispose(),i._completeAsyncTask(this),this._tracer.enabled&&this._tracer.leave(this,"run async catch"),o!==void 0)o(c);else throw c}):(this.persistent?i._resetPersistentTask(this):(t?this._status=By:this._status=ix,this.dispose()),this._tracer.enabled&&this._tracer.leave(this,"run sync success"),s!==void 0&&s(l))}catch(c){if(this.persistent||this.dispose(),this._tracer.enabled&&this._tracer.leave(this,"run sync error"),o!==void 0)o(c);else throw c}}cancel(){if(this._tracer.enabled&&this._tracer.enter(this,"cancel"),this._status===ym){const e=this.taskQueue,t=this._reject;return e.remove(this),e.isEmpty&&e.cancel(),this._status=By,this.dispose(),t!==void 0&&t(new ZA(this)),this._tracer.enabled&&this._tracer.leave(this,"cancel true =pending"),!0}else if(this._status===mS&&this.persistent)return this.persistent=!1,this._tracer.enabled&&this._tracer.leave(this,"cancel true =running+persistent"),!0;return this._tracer.enabled&&this._tracer.leave(this,"cancel false"),!1}reset(e){this._tracer.enabled&&this._tracer.enter(this,"reset");const t=this.queueTime-this.createdTime;this.createdTime=e,this.queueTime=e+t,this._status=ym,this._resolve=void 0,this._reject=void 0,this._result=void 0,this._tracer.enabled&&this._tracer.leave(this,"reset")}dispose(){this._tracer.enabled&&this._tracer.trace(this,"dispose"),this.callback=void 0,this._resolve=void 0,this._reject=void 0,this._result=void 0}}class mne{constructor(e){this.console=e,this.enabled=!1,this.depth=0}enter(e,t){this.log(`${"  ".repeat(this.depth++)}> `,e,t)}leave(e,t){this.log(`${"  ".repeat(--this.depth)}< `,e,t)}trace(e,t){this.log(`${"  ".repeat(this.depth)}- `,e,t)}log(e,t,i){if(t instanceof QO){const r=t._processing.length,s=t._pending.length,o=t._delayed.length,a=t._flushRequested,l=!!t._suspenderTask,c=`processing=${r} pending=${s} delayed=${o} flushReq=${a} susTask=${l}`;this.console.log(`${e}[Q.${i}] ${c}`)}else{const r=t.id,s=Math.round(t.createdTime*10)/10,o=Math.round(t.queueTime*10)/10,a=t.preempt,l=t.persistent,c=t.suspend,u=t._status,h=`id=${r} created=${s} queue=${o} preempt=${a} persistent=${l} status=${u} suspend=${c}`;this.console.log(`${e}[T.${i}] ${h}`)}}}const bne={delay:0,preempt:!1,persistent:!1,suspend:!1};let Mz,Az;const vne=(n,e)=>{Mz=n,Az=e},Pz=()=>{const n=new Promise(vne);return n.resolve=Mz,n.reject=Az,n},sx=n=>n.persistent,wne=()=>Xd("AUR1006: Invalid arguments: preempt cannot be combined with a greater-than-zero delay"),yne=()=>Xd("AUR1007: Invalid arguments: preempt cannot be combined with persistent"),Xd=n=>new Error(n);class Su extends ZO{static getOrCreate(e,t={}){let i=Su._lookup.get(e);return i===void 0&&Su._lookup.set(e,i=new Su(e,t)),i}static set(e,t){Su._lookup.set(e,t)}get domWriteQueue(){return this.console.log("[DEV:aurelia] platform.domQueue is deprecated, please use platform.domQueue instead."),this.domQueue}get domReadQueue(){return this.console.log("[DEV:aurelia] platform.domReadQueue has been removed, please use platform.domQueue instead."),this.domQueue}constructor(e,t={}){super(e,t);const i=r=>()=>{throw new Error(`The PLATFORM did not receive a valid reference to the global function '${r}'.`)};"Node Element HTMLElement CustomEvent CSSStyleSheet ShadowRoot MutationObserver window document customElements".split(" ").forEach(r=>this[r]=r in t?t[r]:e[r]),"fetch requestAnimationFrame cancelAnimationFrame".split(" ").forEach(r=>{var s;return this[r]=r in t?t[r]:((s=e[r])==null?void 0:s.bind(e))??i(r)}),this.domQueue=(()=>{let r=!1,s=-1;const o=()=>{r=!0,s===-1&&(s=this.requestAnimationFrame(l))},a=()=>{r=!1,s>-1&&(this.cancelAnimationFrame(s),s=-1)},l=()=>{s=-1,r===!0&&(r=!1,c.flush())},c=new QO(this,o,a);return c})()}}Su._lookup=new WeakMap;const{default:JO,oneTime:JR,toView:ei,fromView:xc,twoWay:Iz}=jw,dr=Oc.get,e1=Oc.has,ta=Oc.define,{annotation:Cne}=s6,Lc=Cne.keyFor,Uw=Object,Zd=String,Oz=Uw.prototype,_d=Oz.hasOwnProperty,pl=Uw.freeze,kz=Uw.assign,Dz=Uw.getOwnPropertyNames,ek=Uw.keys,J$=on(),QA=(n,e,t)=>{if(J$[e]===!0)return!0;if(!St(e))return!1;const i=e.slice(0,5);return J$[e]=i==="aria-"||i==="data-"||t.isStandardSvgAttribute(n,e)},JA=n=>{throw n},Lz=Reflect.defineProperty,vs=(n,e,t)=>(Lz(n,e,{enumerable:!1,configurable:!0,writable:!0,value:t}),t),Nz=(n,e,t)=>n.addSignalListener(e,t),Hz=(n,e,t)=>n.removeSignalListener(e,t),Sne="Interpolation",_ne="IsIterator",Rne="IsFunction",sl="IsProperty",e2="pending",ox="running",tk=WO.Observer,nh=WO.Node,ml=WO.Layout,Ee=(n,...e)=>new Error(`AUR${Zd(n).padStart(4,"0")}: ${xne(n,...e)}`),Ene={99:"Method {{0}} not implemented",101:'Ast eval error: binding behavior "{{0}}" could not be found. Did you forget to register it as a dependency?',102:'Ast eval error: binding behavior "{{0}}" already applied.',103:'Ast eval error: value converter "{{0}}" could not be found. Did you forget to register it as a dependency?',105:"Ast eval error: unable to find $host context. Did you forget [au-slot] attribute?",106:'Ast eval error: invalid assignment. "$host" is a reserved keyword.',107:"Ast eval error: expression is not a function.",109:'Ast eval error: unknown unary operator: "{{0}}"',108:'Ast eval error: unknown binary operator: "{{0}}"',110:"Ast eval error: left-hand side of tagged template expression is not a function.",111:'Ast eval error: expected "{{0}}" to be a function',112:"Ast eval error: cannot use non-object value for destructuring assignment.",113:"Ast eval error: infinite loop detected. Increment operators should only be used in event handlers.",114:'Ast eval error: cannot access property "{{0}}" of {{1}}.',115:'Ast eval error: cannot access key "{{0}}" of {{1}}.',116:'Ast eval error: cannot assign value to property "{{0}}" of null/undefined.',151:"No binding behavior definition found for type {{0:name}}",152:"No value converter definition found for type {{0:name}}",153:'Element "{{0}}" has already been registered.',154:'Attribute "{{0}}" has already been registered.',155:"Value converter {{0}} has already been registered.",156:"Binding behavior {{0}} has already been registered.",157:"Binding command {{0}} has already been registered.",203:"Trying to retrieve a property or build a scope from a null/undefined scope",204:"Trying to create a scope with null/undefined binding context",227:"@bindable is not supported for properties that uses a symbol for name. Use a string for the property name instead.",228:"@bindable cannot be used as a class decorator when no configuration object is supplied.",229:"@bindable cannot be used as a class decorator when no property name is supplied in the configuration object.",500:"There is no cached controller for the provided ViewModel: {{0}}",501:"Invalid combination: cannot combine the containerless custom element option with Shadow DOM.",502:"Trying to activate a disposed controller: {{0}}.",503:"Controller at {{0}} is in an unexpected state: {{1}} during activation.",504:"Synthetic view at {{0}} is being activated with null/undefined scope.",505:"Controller at {{0}} is in an unexpected state: {{1}} during deactivation.",506:"Invalid callback for @watch decorator: {{0}}",507:"Observer for bindable property {{0}} does not support coercion.",508:"Observer for property {{0}} does not support change handler.",759:"No attribute definition found for type {{0:name}}",760:"No element definition found for type {{0:name}}",761:"Cannot create a custom element definition with only a name and no type: {{0}}",762:"Trying to retrieve a custom element controller from a node, but the provided node <{{0:nodeName}} /> is not a custom element or containerless host.",763:"Trying to retrieve a custom element controller from a node, but the provided node <{{0:nodeName}} /> is not a custom element or containerless host.",764:"Trying to retrieve a custom element controller from a node. But the provided node <{{0:nodeName}} /> does not appear to be part of an Aurelia app DOM tree, or it was added to the DOM in a way that Aurelia cannot properly resolve its position in the component tree.",765:"Trying to retrieve a custom element controller from a node. But the provided node <{{0:nodeName}} /> does not appear to be part of an Aurelia app DOM tree, or it was added to the DOM in a way that Aurelia cannot properly resolve its position in the component tree.",766:"Invalid @processContent hook. Expected the hook to be a function (when defined in a class, it needs to be a static function) but got a {{0:typeof}}.",652:"Aurelia is unable to observe property {{0}}. Register observation mapping with .useConfig().",653:"Mapping for property {{0}} of <{{1}} /> already exists",654:"Array values can only be bound to a multi-select.",714:'Template compilation error: primary already exists on element/attribute "{{0}}"',719:"Attribute {{0}} has been already registered for {{1:element}}",767:"Aurelia.root was accessed without a valid root.",768:"An instance of Aurelia is already registered with the container or an ancestor of it.",769:"Failed to initialize the platform object. The host element's ownerDocument does not have a defaultView, did you create the host from a DOMParser and forget to call adoptNode()?",770:"Aurelia.start() was called without a composition root",771:"The aurelia instance must be fully stopped before it can be disposed",750:"view.ref is not supported. If you are migrating from v1, this can be understood as the controller.",751:`Attempted to reference "{{0}}", but it was not found amongst the target's API.`,752:"Element {{0:.res}} is not registered in {{1:name}}.",753:"Attribute {{0:.res}} is not registered in {{1:name}}.",754:"Attribute {{0:.res}} is not registered in {{1:name}}.",755:"Cannot resolve ViewFactory before the provider was prepared.",756:"Cannot resolve ViewFactory without a (valid) name.",757:"AUR0757: The compiled template is not aligned with the render instructions. There are {{0}} targets and {{1}} instructions.",772:"Invalid @watch decorator config. Expected an expression or a fn but received null/undefined.",773:'Invalid @watch decorator change handler config.Method "{{0}}" not found in class {{1}}',774:"Invalid @watch decorator usage: decorated target {{0}} is not a class method.",775:'Invalid command "{{0}}" usage with [repeat]',776:'Invalid [repeat] usage, found extraneous target "{{0}}"',777:"Unsupported: [repeat] cannot iterate over {{0:toString}}",778:"Unsupported: [repeat] cannot count {{0:toString}}",814:"[repeat] encountered an error: number of views != number of items {{0:join(!=)}}",779:"Invalid portal insertion position: {{0}}",801:'"& self" binding behavior only supports listener binding via trigger/capture command.',802:`"& updateTrigger" invalid usage. This binding behavior requires at least one event name argument: eg <input value.bind="firstName & updateTrigger:'blur'">`,803:'"& updateTrigger" invalid usage. This binding behavior can only be applied to two-way/ from-view bindings.',805:'Invalid scope behavior "{{0}}" on <au-compose />. Only "scoped" or "auto" allowed.',806:`<au-compose /> couldn't find a custom element with name "{{0}}", did you forget to register it locally or globally?`,807:"Composition has already been activated/deactivated. Id: {{0:controller}}",808:"Composition has already been deactivated.",810:"Invalid [else] usage, it should follow an [if]",811:"Invalid portal strict target query, empty query.",812:"Invalid portal strict target resolution, target not found.",813:'Invalid [pending]/[then]/[catch] usage. The parent [promise].resolve not found; only "*[promise.resolve] > *[pending|then|catch]" relation is supported.',815:'Invalid [case/default-case] usage. The parent [switch] not found; only "*[switch] > *[case|default-case]" relation is supported.',816:"Invalid [default-case] usage. Multiple 'default-case's are not allowed.",817:'"& signal" binding behavior can only be used with bindings that have a "handleChange" method',818:`"& signal" invalid usage. At least one signal name must be passed to the signal behavior, e.g. "expr & signal:'my-signal'"`,819:"Spreading to bindables onto non custom element",820:"Invalid spread target {{0}}",9999:"No scope context for spread binding.",9998:"Spread binding does not support spreading custom attributes/template controllers. Did you build the spread instruction manually?",9997:"Marker is malformed. This likely happens when a compiled template has been modified. Did you accidentally modified some compiled template? You can modify template before compilation with compiling Template compiler hook.",9996:"Invalid usage, a rate limit has already been applied. Did you have both throttle and debounce on the same binding?",9995:"The binding already has a target subscriber.",9994:`"& attr" can be only used on property binding. It's used on {{0:ctor}}`,9993:'"& updateTrigger" binding behavior only works with the default implementation of Aurelia HTML observation. Implement your own node observation + updateTrigger',9992:'"& updateTrigger" uses node observer to observe, but it does not know how to use events to observe property <{{0:target@property}} />',9991:"Invalid @children usage. @children decorator can only be used on a field",9990:"Invalid @slotted usage. @slotted decorator can only be used on a field",9989:"Invalid query selector. Only selectors with alpha-numeric characters, or $all are allowed. Got {{0}} instead."},xne=(n,...e)=>{var i;let t=Ene[n];for(let r=0;r<e.length;++r){const s=new RegExp(`{{${r}(:.*)?}}`,"g");let o=s.exec(t);for(;o!=null;){const a=(i=o[1])==null?void 0:i.slice(1);let l=e[r];if(l!=null)switch(a){case"nodeName":l=l.nodeName.toLowerCase();break;case"name":l=l.name;break;case"typeof":l=typeof l;break;case"ctor":l=l.constructor.name;break;case"controller":l=l.controller.name;break;case"target@property":l=`${l.target}@${l.targetProperty}`;break;case"toString":l=Object.prototype.toString.call(l);break;case"join(!=)":l=l.join("!=");break;case"bindingCommandHelp":l=Tne(l);break;case"element":l=l==="*"?"all elements":`<${l} />`;break;default:a!=null&&a.startsWith(".")?l=Zd(l[a.slice(1)]):l=Zd(l)}t=t.slice(0,o.index)+l+t.slice(s.lastIndex),o=s.exec(t)}}return t};function Tne(n){switch(n){case"delegate":return`
The ".delegate" binding command has been removed in v2. Binding command ".trigger" should be used instead. If you are migrating v1 application, install compat package to add back the ".delegate" binding command for ease of migration.`;case"call":return`
The ".call" binding command has been removed in v2. If you want to pass a callback that preserves the context of the function call, you can use lambda instead. Refer to lambda expression doc for more details.`;default:return""}}function Qr(n,e){let t;function i(r,s){var c;let o;switch(s.kind){case"getter":case"field":{const u=s.name;if(typeof u!="string")throw Ee(227);o=u;break}case"class":if(t==null)throw Ee(228);if(typeof t=="string")o=t;else{const u=t.name;if(!u)throw Ee(229);if(typeof u!="string")throw Ee(227);o=u}break}const a=t==null||typeof t=="string"?{name:o}:t,l=(c=s.metadata)[mu]??(c[mu]=on());l[o]=cc.create(o,a)}if(arguments.length>1){t={},i(n,e);return}else if(St(n))return t=n,i;return t=n===void 0?{}:n,i}const mu=Lc("bindables"),us=pl({name:mu,keyFrom:n=>`${mu}:${n}`,from(...n){const e={},t=Array.isArray;function i(o){e[o]=cc.create(o)}function r(o,a){e[o]=a instanceof cc?a:cc.create(o,a===!0?{}:a)}function s(o){t(o)?o.forEach(a=>St(a)?i(a):r(a.name,a)):o instanceof cc?e[o.name]=o:o!==void 0&&ek(o).forEach(a=>r(a,o[a]))}return n.forEach(s),e},getAll(n){const e=[],t=kQ(n);let i=t.length,r;for(;--i>=0;){r=t[i];const s=dr(mu,r);s!=null&&e.push(...Object.values(s))}return e},_add(n,e){let t=dr(mu,e);t==null&&ta(t=on(),e,mu),t[n.name]=n}});class cc{constructor(e,t,i,r,s,o){this.attribute=e,this.callback=t,this.mode=i,this.primary=r,this.name=s,this.set=o}static create(e,t={}){const i=t.mode??ei;return new cc(t.attribute??n6(e),t.callback??`${e}Changed`,St(i)?jw[i]??JO:i,t.primary??!1,t.name??e,t.set??Mne(t))}}const eP={key:Lc("coercer"),define(n,e){ta(n[e].bind(n),n,eP.key)},for(n){return dr(eP.key,n)}};function Mne(n={}){const e=n.type??null;if(e==null)return Qa;let t;switch(e){case Number:case Boolean:case String:case BigInt:t=e;break;default:{const i=e.coerce;t=typeof i=="function"?i.bind(e):eP.for(e)??Qa;break}}return t===Qa?t:Ane(t,n.nullable)}function Ane(n,e){return function(t,i){return i!=null&&i.enableCoercion?(e??!((i==null?void 0:i.coerceNullish)??!1))&&t==null?t:n(t,i):t}}const ln=Qu.createInterface,bl=zd.singleton,Vu=zd.aliasTo,t1=zd.instance,_n=(n,e,t)=>n.registerResolver(e,t),Pne="custom-element",Ine="custom-attribute",Wu=(n,e,t,i="__au_static_resource__")=>{var s;let r=dr(i,n);return r==null&&((s=n.$au)==null?void 0:s.type)===e&&(r=t(n.$au,n),ta(r,n,i)),r};class cv{constructor(e,t,i,r){this.Type=e,this.name=t,this.aliases=i,this.key=r}static create(e,t){let i,r;return St(e)?(i=e,r={name:i}):(i=e.name,r=e),new cv(t,pu(t2(t,"name"),i),di(t2(t,"aliases"),r.aliases,t.aliases),$z.keyFrom(i))}register(e,t){const i=this.Type,r=typeof t=="string"?uv(t):this.key,s=this.aliases;e.has(r,!1)?console.warn(`[DEV:aurelia] ${Ee(156,this.name)}`):e.register(e.has(i,!1)?null:bl(i,i),Vu(i,r),...s.map(o=>Vu(i,uv(o))))}}const eo="binding-behavior",Pg=bf(eo),t2=(n,e)=>dr(Lc(e),n),uv=n=>`${Pg}:${n}`,$z=pl({name:Pg,keyFrom:uv,isType(n){var e;return kt(n)&&(e1(Pg,n)||((e=n.$au)==null?void 0:e.type)===eo)},define(n,e){const t=cv.create(n,e),i=t.Type;return ta(t,i,Pg,Ka),i},getDefinition(n){const e=dr(Pg,n)??Wu(n,eo,cv.create);if(e===void 0)throw Ee(151,n);return e},find(n,e){const t=n.find(eo,e);return t==null?null:dr(Pg,t)??Wu(t,eo,cv.create)??null},get(n,e){try{return n.get(wp(uv(e)))}catch(t){throw console.error("[DEV:aurelia] Cannot retrieve binding behavior with name",e),t}return n.get(wp(uv(e)))}}),ax=new Map,n1=n=>({type:eo,name:n});class i1{bind(e,t){ax.set(t,t.mode),t.mode=this.mode}unbind(e,t){t.mode=ax.get(t),ax.delete(t)}}class Fz extends i1{get mode(){return JR}}Fz.$au=n1("oneTime");class Bz extends i1{get mode(){return ei}}Bz.$au=n1("toView");class Vz extends i1{get mode(){return xc}}Vz.$au=n1("fromView");class Wz extends i1{get mode(){return Iz}}Wz.$au=n1("twoWay");const lx=new WeakMap,One=200;class jz{constructor(){this._platform=ve(Bp)}bind(e,t,i,r){var a;const s={type:"debounce",delay:i??One,now:this._platform.performanceNow,queue:this._platform.taskQueue,signals:St(r)?[r]:r??bt},o=(a=t.limit)==null?void 0:a.call(t,s);o==null?console.warn(`Binding ${t.constructor.name} does not support debounce rate limiting`):lx.set(t,o)}unbind(e,t){var i;(i=lx.get(t))==null||i.dispose(),lx.delete(t)}}jz.$au={type:eo,name:"debounce"};const h_=ln("ISignaler",n=>n.singleton(kne));class kne{constructor(){this.signals=on()}dispatchSignal(e){const t=this.signals[e];if(t===void 0)return;let i;for(i of t.keys())i.handleChange(void 0,void 0)}addSignalListener(e,t){var i;((i=this.signals)[e]??(i[e]=new Set)).add(t)}removeSignalListener(e,t){var i;(i=this.signals[e])==null||i.delete(t)}}class zz{constructor(){this._lookup=new Map,this._signaler=ve(h_)}bind(e,t,...i){if(!("handleChange"in t))throw Ee(817);if(i.length===0)throw Ee(818);this._lookup.set(t,i);let r;for(r of i)Nz(this._signaler,r,t)}unbind(e,t){const i=this._lookup.get(t);this._lookup.delete(t);let r;for(r of i)Hz(this._signaler,r,t)}}zz.$au={type:eo,name:"signal"};const cx=new WeakMap,Dne=200;class Uz{constructor(){({performanceNow:this._now,taskQueue:this._taskQueue}=ve(Bp))}bind(e,t,i,r){var a;const s={type:"throttle",delay:i??Dne,now:this._now,queue:this._taskQueue,signals:St(r)?[r]:r??bt},o=(a=t.limit)==null?void 0:a.call(t,s);o==null?console.warn(`Binding ${t.constructor.name} does not support debounce rate limiting`):cx.set(t,o)}unbind(e,t){var i;(i=cx.get(t))==null||i.dispose(),cx.delete(t)}}Uz.$au={type:eo,name:"throttle"};const tP=ln("IAppTask");class n2{constructor(e,t,i){this.c=void 0,this.slot=e,this.k=t,this.cb=i}register(e){return this.c=e.register(t1(tP,this))}run(){const e=this.k,t=this.cb;return e===null?t():t(this.c.get(e))}}const Lne=pl({creating:mh("creating"),hydrating:mh("hydrating"),hydrated:mh("hydrated"),activating:mh("activating"),activated:mh("activated"),deactivating:mh("deactivating"),deactivated:mh("deactivated")});function mh(n){function e(t,i){return kt(i)?new n2(n,t,i):new n2(n,null,t)}return e}const Fi=Bp,nP=(()=>{const n=new WeakMap;return pl({add(e,t){let i=n.get(e);i==null&&n.set(e,i=[]),i.push(t)},getDefinitions(e){return n.get(e)??bt}})})();class Qd{get type(){return Ine}constructor(e,t,i,r,s,o,a,l,c,u,h){this.Type=e,this.name=t,this.aliases=i,this.key=r,this.defaultBindingMode=s,this.isTemplateController=o,this.bindables=a,this.noMultiBindings=l,this.watches=c,this.dependencies=u,this.containerStrategy=h}static create(e,t){let i,r;St(e)?(i=e,r={name:i}):(i=e.name,r=e);const s=pu(jl(t,"defaultBindingMode"),r.defaultBindingMode,t.defaultBindingMode,ei);for(const o of Object.values(us.from(r.bindables)))us._add(o,t);return new Qd(t,pu(jl(t,"name"),i),di(jl(t,"aliases"),r.aliases,t.aliases),rp(i),St(s)?jw[s]??JO:s,pu(jl(t,"isTemplateController"),r.isTemplateController,t.isTemplateController,!1),us.from(...us.getAll(t),jl(t,"bindables"),t.bindables,r.bindables),pu(jl(t,"noMultiBindings"),r.noMultiBindings,t.noMultiBindings,!1),di(nP.getDefinitions(t),t.watches),di(jl(t,"dependencies"),r.dependencies,t.dependencies),pu(jl(t,"containerStrategy"),r.containerStrategy,t.containerStrategy,"reuse"))}register(e,t){const i=this.Type,r=typeof t=="string"?rp(t):this.key,s=this.aliases;e.has(r,!1)?(Qd.warnDuplicate&&e.get(Ud).warn(Ee(154,this.name)),console.warn(`[DEV:aurelia] ${Ee(154,this.name)}`)):e.register(e.has(i,!1)?null:bl(i,i),Vu(i,r),...s.map(o=>Vu(i,rp(o))))}toString(){return`au:ca:${this.name}`}}Qd.warnDuplicate=!0;const fr="custom-attribute",Cp=bf(fr),rp=n=>`${Cp}:${n}`,jl=(n,e)=>dr(Lc(e),n),Nne=n=>{var e;return kt(n)&&(e1(Cp,n)||((e=n.$au)==null?void 0:e.type)===fr)},Gz=(n,e)=>Ug(n,rp(e))??void 0,nk=(n,e)=>{const t=Qd.create(n,e),i=t.Type;return ta(t,i,Cp,Ka),i},ik=n=>{const e=dr(Cp,n)??Wu(n,fr,Qd.create);if(e===void 0)throw Ee(759,n);return e},Hne=(n,e)=>{let t="",i="";if(St(e))t=rp(e),i=e;else{const s=ik(e);t=s.key,i=s.name}let r=n;for(;r!==null;){const s=Ug(r,t);if(s!=null&&s.is(i))return s;r=g_(r)}return null},rk=pl({name:Cp,keyFrom:rp,isType:Nne,for:Gz,closest:Hne,define:nk,getDefinition:ik,annotate(n,e,t){ta(t,n,Lc(e))},getAnnotation:jl,find(n,e){const t=n.find(fr,e);return t===null?null:dr(Cp,t)??Wu(t,fr,Qd.create)??null}}),Bf=ln("ILifecycleHooks");class $ne{constructor(e,t){this.definition=e,this.instance=t}}class sk{constructor(e,t){this.Type=e,this.propertyNames=t}static create(e,t){const i=new Set;let r=t.prototype;for(;r!==Oz;){for(const s of Dz(r))s!=="constructor"&&!s.startsWith("_")&&i.add(s);r=Object.getPrototypeOf(r)}return new sk(t,i)}}const i2=(()=>{const n=new WeakMap,e=new WeakMap;return pl({define(t,i){const r=sk.create(t,i),s=r.Type;return e.set(s,r),{register(o){bl(Bf,s).register(o)}}},resolve(t){let i=n.get(t);if(i===void 0){n.set(t,i=new Fne);const r=t.root,s=r===t?t.getAll(Bf):t.has(Bf,!1)?r.getAll(Bf).concat(t.getAll(Bf)):r.getAll(Bf);let o,a,l,c,u;for(o of s){a=e.get(o.constructor),l=new $ne(a,o);for(c of a.propertyNames)u=i[c],u===void 0?i[c]=[l]:u.push(l)}}return i}})})();class Fne{}class hv{constructor(e,t,i,r){this.Type=e,this.name=t,this.aliases=i,this.key=r}static create(e,t){let i,r;return St(e)?(i=e,r={name:i}):(i=e.name,r=e),new hv(t,pu(iP(t,"name"),i),di(iP(t,"aliases"),r.aliases,t.aliases),Yz.keyFrom(i))}register(e,t){const i=this.Type,r=typeof t=="string"?dv(t):this.key,s=this.aliases;e.has(r,!1)?console.warn(`[DEV:aurelia] ${Ee(155,this.name)}`):e.register(e.has(i,!1)?null:bl(i,i),Vu(i,r),...s.map(o=>Vu(i,dv(o))))}}const Bg="value-converter",Ig=bf(Bg),iP=(n,e)=>dr(Lc(e),n),dv=n=>`${Ig}:${n}`,Yz=pl({name:Ig,keyFrom:dv,isType(n){var e;return kt(n)&&(e1(Ig,n)||((e=n.$au)==null?void 0:e.type)===Bg)},define(n,e){const t=hv.create(n,e),i=t.Type;return ta(t,i,Ig,Ka),i},getDefinition(n){const e=dr(Ig,n)??Wu(n,Bg,hv.create);if(e===void 0)throw Ee(152,n);return e},annotate(n,e,t){ta(t,n,Lc(e))},getAnnotation:iP,find(n,e){const t=n.find(Bg,e);return t==null?null:dr(Ig,t)??Wu(t,Bg,hv.create)??null},get(n,e){try{return n.get(wp(dv(e)))}catch(t){throw console.error("[DEV:aurelia] Cannot retrieve value converter with name",e),t}return n.get(wp(dv(e)))}});class Bne{constructor(e,t){this._value=void 0,this.b=e,this._flushQueue=t}flush(){this.b.updateSource(this._value)}handleChange(e,t){const i=this.b;e!==Ln(i.ast,i._scope,i,null)&&(this._value=e,this._flushQueue.add(this))}}const vf=(()=>{function n(e){this._scope=e}return e=>{vs(e.prototype,"useScope",n)}})(),Nc=(()=>{class n{}const e=new WeakMap,t=new WeakMap,i=new WeakMap;function r(d){return this.l.get(d)}function s(d,f){let g=t.get(d);return g==null&&t.set(d,g=new n),g[f]??(g[f]=$z.get(d.l,f))}function o(d,f,g){var v;const p=s(this,d);if(p==null)throw Ee(101,d);let m=i.get(this);if(m==null&&i.set(this,m={}),m[d])throw Ee(102,d);(v=p.bind)==null||v.call(p,f,this,...g)}function a(d,f){var m;const g=s(this,d),p=i.get(this);(m=g==null?void 0:g.unbind)==null||m.call(g,f,this),p!=null&&(p[d]=!1)}function l(d,f){let g=e.get(d);return g==null&&e.set(d,g=new n),g[f]??(g[f]=Yz.get(d.l,f))}function c(d){const f=l(this,d);if(f==null)throw Ee(103,d);const g=f.signals;if(g!=null){const p=this.l.get(h_),m=g.length;let v=0;for(;v<m;++v)p.addSignalListener(g[v],this)}}function u(d){const f=l(this,d);if((f==null?void 0:f.signals)===void 0)return;const g=this.l.get(h_);let p=0;for(;p<f.signals.length;++p)g.removeSignalListener(f.signals[p],this)}function h(d,f,g,p){var v;const m=l(this,d);if(m==null)throw Ee(103,d);switch(f){case"toView":return"toView"in m?m.toView(g,...p):g;case"fromView":return"fromView"in m?(v=m.fromView)==null?void 0:v.call(m,g,...p):g}}return d=>{const f=d.prototype;vs(f,"get",r),vs(f,"bindBehavior",o),vs(f,"unbindBehavior",a),vs(f,"bindConverter",c),vs(f,"unbindConverter",u),vs(f,"useConverter",h)}})(),Vne=ln("IFlushQueue",n=>n.singleton(Wne));class Wne{constructor(){this._flushing=!1,this._items=new Set}get count(){return this._items.size}add(e){if(this._items.add(e),!this._flushing){this._flushing=!0;try{this._items.forEach(jne)}finally{this._flushing=!1}}}clear(){this._items.clear(),this._flushing=!1}}const jne=function(n,e,t){t.delete(n),n.flush()},wf=(()=>{const n=new WeakSet,e=(i,r,s)=>{let o,a,l,c=!1;const u=i.queue,h=()=>r(l),d=g=>{l=g,s.isBound?(a=o,o=u.queueTask(h,{delay:i.delay}),a==null||a.cancel()):h()},f=d.dispose=()=>{a==null||a.cancel(),o==null||o.cancel(),a=o=void 0};return d.flush=()=>{c=(o==null?void 0:o.status)===e2,f(),c&&h()},d},t=(i,r,s)=>{let o,a,l=0,c=0,u,h=!1;const d=i.queue,f=()=>i.now(),g=()=>r(u),p=v=>{u=v,s.isBound?(c=f()-l,a=o,c>i.delay?(l=f(),g()):o=d.queueTask(()=>{l=f(),g()},{delay:i.delay-c}),a==null||a.cancel()):g()},m=p.dispose=()=>{a==null||a.cancel(),o==null||o.cancel(),a=o=void 0};return p.flush=()=>{h=(o==null?void 0:o.status)===e2,m(),h&&g()},p};return(i,r)=>{vs(i.prototype,"limit",function(s){if(n.has(this))throw Ee(9996);n.add(this);const o=r(this,s),a=s.signals,l=a.length>0?this.get(h_):null,c=this[o],u=(...f)=>c.call(this,...f),h=s.type==="debounce"?e(s,u,this):t(s,u,this),d=l?{handleChange:h.flush}:null;return this[o]=h,l&&a.forEach(f=>Nz(l,f,d)),{dispose:()=>{l&&a.forEach(f=>Hz(l,f,d)),n.delete(this),h.dispose(),delete this[o]}}})}})(),ih=((n=new WeakSet)=>e=>function(){n.has(this)||(n.add(this),e.call(this))})(),zne={preempt:!0};class md{constructor(e,t,i,r,s,o,a,l,c,u){this.targetAttribute=a,this.targetProperty=l,this.mode=c,this.strict=u,this.isBound=!1,this._scope=void 0,this._task=null,this._value=void 0,this.boundFn=!1,this.l=t,this.ast=s,this._controller=e,this.target=o,this.oL=i,this._taskQueue=r}updateTarget(e){const t=this.target,i=this.targetAttribute,r=this.targetProperty;switch(i){case"class":t.classList.toggle(r,!!e);break;case"style":{let s="",o=Zd(e);St(o)&&o.includes("!important")&&(s="important",o=o.replace("!important","")),t.style.setProperty(r,o,s);break}default:e==null?t.removeAttribute(i):t.setAttribute(i,Zd(e))}}handleChange(){if(!this.isBound)return;let e;this.obs.version++;const t=Ln(this.ast,this._scope,this,(this.mode&ei)>0?this:null);this.obs.clear(),t!==this._value&&(this._value=t,this._controller.state!==ws?(e=this._task,this._task=this._taskQueue.queueTask(()=>{this._task=null,this.updateTarget(t)},zne),e==null||e.cancel()):this.updateTarget(t))}handleCollectionChange(){this.handleChange()}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,eh(this.ast,e,this),this.mode&(ei|JR)&&this.updateTarget(this._value=Ln(this.ast,e,this,(this.mode&ei)>0?this:null)),this.isBound=!0}unbind(){var e;this.isBound&&(this.isBound=!1,th(this.ast,this._scope,this),this._scope=void 0,this._value=void 0,(e=this._task)==null||e.cancel(),this._task=null,this.obs.clearAll())}}md.mix=ih(()=>{vf(md),wf(md,()=>"updateTarget"),oa(md,null),Nc(md)});const Une={preempt:!0};class Gne{constructor(e,t,i,r,s,o,a,l,c){this.ast=s,this.target=o,this.targetProperty=a,this.mode=l,this.strict=c,this.isBound=!1,this._scope=void 0,this._task=null,this._controller=e,this.oL=i,this._taskQueue=r,this._targetObserver=i.getAccessor(o,a);const u=s.expressions,h=this.partBindings=Array(u.length),d=u.length;let f=0;for(;d>f;++f)h[f]=new bd(u[f],o,a,t,i,c,this)}_handlePartChange(){this.updateTarget()}updateTarget(){const e=this.partBindings,t=this.ast.parts,i=e.length;let r="",s=0;if(i===1)r=t[0]+e[0]._value+t[1];else for(r=t[0];i>s;++s)r+=e[s]._value+t[s+1];const o=this._targetObserver,a=this._controller.state!==ws&&(o.type&ml)>0;let l;a?(l=this._task,this._task=this._taskQueue.queueTask(()=>{this._task=null,o.setValue(r,this.target,this.targetProperty)},Une),l==null||l.cancel(),l=null):o.setValue(r,this.target,this.targetProperty)}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e;const t=this.partBindings,i=t.length;let r=0;for(;i>r;++r)t[r].bind(e);this.updateTarget(),this.isBound=!0}unbind(){var r;if(!this.isBound)return;this.isBound=!1,this._scope=void 0;const e=this.partBindings,t=e.length;let i=0;for(;t>i;++i)e[i].unbind();(r=this._task)==null||r.cancel(),this._task=null}useAccessor(e){this._targetObserver=e}}class bd{constructor(e,t,i,r,s,o,a){this.ast=e,this.target=t,this.targetProperty=i,this.strict=o,this.owner=a,this.mode=ei,this.task=null,this.isBound=!1,this._value="",this.boundFn=!1,this.l=r,this.oL=s}updateTarget(){this.owner._handlePartChange()}handleChange(){if(!this.isBound)return;this.obs.version++;const e=Ln(this.ast,this._scope,this,(this.mode&ei)>0?this:null);this.obs.clear(),e!=this._value&&(this._value=e,ai(e)&&this.observeCollection(e),this.updateTarget())}handleCollectionChange(){this.updateTarget()}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,eh(this.ast,e,this),this._value=Ln(this.ast,this._scope,this,(this.mode&ei)>0?this:null),ai(this._value)&&this.observeCollection(this._value),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,th(this.ast,this._scope,this),this._scope=void 0,this.obs.clearAll())}}bd.mix=ih(()=>{vf(bd),wf(bd,()=>"updateTarget"),oa(bd,null),Nc(bd)});const Yne={preempt:!0};class vd{constructor(e,t,i,r,s,o,a,l){this.p=s,this.ast=o,this.target=a,this.strict=l,this.isBound=!1,this.mode=ei,this._task=null,this._value="",this._needsRemoveNode=!1,this.boundFn=!1,this.l=t,this._controller=e,this.oL=i,this._taskQueue=r}updateTarget(e){var r,s;const t=this.target,i=this._value;this._value=e,this._needsRemoveNode&&((r=i.parentNode)==null||r.removeChild(i),this._needsRemoveNode=!1),e instanceof this.p.Node&&((s=t.parentNode)==null||s.insertBefore(e,t),e="",this._needsRemoveNode=!0),t.textContent=Zd(e??"")}handleChange(){var i;if(!this.isBound)return;this.obs.version++;const e=Ln(this.ast,this._scope,this,(this.mode&ei)>0?this:null);if(this.obs.clear(),e===this._value){(i=this._task)==null||i.cancel(),this._task=null;return}this._controller.state!==ws?this._queueUpdate(e):this.updateTarget(e)}handleCollectionChange(){if(!this.isBound)return;this.obs.version++;const e=this._value=Ln(this.ast,this._scope,this,(this.mode&ei)>0?this:null);this.obs.clear(),ai(e)&&this.observeCollection(e),this._controller.state!==ws?this._queueUpdate(e):this.updateTarget(e)}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,eh(this.ast,e,this);const t=this._value=Ln(this.ast,this._scope,this,(this.mode&ei)>0?this:null);ai(t)&&this.observeCollection(t),this.updateTarget(t),this.isBound=!0}unbind(){var e,t;this.isBound&&(this.isBound=!1,th(this.ast,this._scope,this),this._needsRemoveNode&&((e=this._value.parentNode)==null||e.removeChild(this._value)),this._scope=void 0,this.obs.clearAll(),(t=this._task)==null||t.cancel(),this._task=null)}_queueUpdate(e){const t=this._task;this._task=this._taskQueue.queueTask(()=>{this._task=null,this.updateTarget(e)},Yne),t==null||t.cancel()}}vd.mix=ih(()=>{vf(vd),wf(vd,()=>"updateTarget"),oa(vd,null),Nc(vd)});class wd{constructor(e,t,i,r,s,o){this.ast=i,this.targetProperty=r,this.isBound=!1,this._scope=void 0,this.target=null,this.boundFn=!1,this.l=e,this.oL=t,this.strict=o,this._toBindingContext=s}updateTarget(){this.target[this.targetProperty]=this._value}handleChange(){this.isBound&&(this.obs.version++,this._value=Ln(this.ast,this._scope,this,this),this.obs.clear(),this.updateTarget())}handleCollectionChange(){this.handleChange()}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,this.target=this._toBindingContext?e.bindingContext:e.overrideContext,eh(this.ast,e,this),this._value=Ln(this.ast,this._scope,this,this),this.updateTarget(),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,th(this.ast,this._scope,this),this._scope=void 0,this.obs.clearAll())}}wd.mix=ih(()=>{vf(wd),wf(wd,()=>"updateTarget"),oa(wd,null),Nc(wd)});class Pr{constructor(e,t,i,r,s,o,a,l,c){this.ast=s,this.target=o,this.targetProperty=a,this.mode=l,this.strict=c,this.isBound=!1,this._scope=void 0,this._targetObserver=void 0,this._task=null,this._targetSubscriber=null,this.boundFn=!1,this.l=t,this._controller=e,this._taskQueue=r,this.oL=i}updateTarget(e){this._targetObserver.setValue(e,this.target,this.targetProperty)}updateSource(e){iw(this.ast,this._scope,this,e)}handleChange(){if(!this.isBound)return;this.obs.version++;const e=Ln(this.ast,this._scope,this,(this.mode&ei)>0?this:null);this.obs.clear(),this._controller.state!==ws&&(this._targetObserver.type&ml)>0?(Cm=this._task,this._task=this._taskQueue.queueTask(()=>{this.updateTarget(e),this._task=null},Kne),Cm==null||Cm.cancel(),Cm=null):this.updateTarget(e)}handleCollectionChange(){this.handleChange()}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,eh(this.ast,e,this);const t=this.oL,i=this.mode;let r=this._targetObserver;r||(i&xc?r=t.getObserver(this.target,this.targetProperty):r=t.getAccessor(this.target,this.targetProperty),this._targetObserver=r);const s=(i&ei)>0;i&(ei|JR)&&this.updateTarget(Ln(this.ast,this._scope,this,s?this:null)),i&xc&&(r.subscribe(this._targetSubscriber??(this._targetSubscriber=new Bne(this,this.l.get(Vne)))),s||this.updateSource(r.getValue(this.target,this.targetProperty))),this.isBound=!0}unbind(){var e;this.isBound&&(this.isBound=!1,th(this.ast,this._scope,this),this._scope=void 0,this._targetSubscriber&&(this._targetObserver.unsubscribe(this._targetSubscriber),this._targetSubscriber=null),(e=this._task)==null||e.cancel(),this._task=null,this.obs.clearAll())}useTargetObserver(e){var t;(t=this._targetObserver)==null||t.unsubscribe(this),(this._targetObserver=e).subscribe(this)}useTargetSubscriber(e){if(this._targetSubscriber!=null)throw Ee(9995);this._targetSubscriber=e}}Pr.mix=ih(()=>{vf(Pr),wf(Pr,n=>n.mode&xc?"updateSource":"updateTarget"),oa(Pr,null),Nc(Pr)});let Cm=null;const Kne={preempt:!0};class rP{constructor(e,t,i,r){this.ast=t,this.target=i,this.strict=r,this.isBound=!1,this._scope=void 0,this.l=e}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,eh(this.ast,e,this),iw(this.ast,this._scope,this,this.target),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,Ln(this.ast,this._scope,this,null)===this.target&&iw(this.ast,this._scope,this,null),th(this.ast,this._scope,this),this._scope=void 0)}}rP.mix=ih(()=>{Nc(rP)});class qne{constructor(e,t=!1,i){this.prevent=e,this.capture=t,this.onError=i}}class Vg{constructor(e,t,i,r,s,o,a){this.ast=t,this.target=i,this.targetEvent=r,this.strict=a,this.isBound=!1,this.self=!1,this.boundFn=!0,this._modifiedEventHandler=null,this.l=e,this._options=s,this._modifiedEventHandler=o}callSource(e){const t=this._scope.overrideContext;t.$event=e;let i=Ln(this.ast,this._scope,this,null);delete t.$event,kt(i)&&(i=i(e)),i!==!0&&this._options.prevent&&e.preventDefault()}handleEvent(e){var t;if(!(this.self&&this.target!==e.composedPath()[0])&&((t=this._modifiedEventHandler)==null?void 0:t.call(this,e))!==!1)try{this.callSource(e)}catch(i){this._options.onError(e,i)}}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,eh(this.ast,e,this),this.target.addEventListener(this.targetEvent,this,this._options),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,th(this.ast,this._scope,this),this._scope=void 0,this.target.removeEventListener(this.targetEvent,this,this._options))}}Vg.mix=ih(function(){vf(Vg),wf(Vg,()=>"callSource"),Nc(Vg)});const r1=ln("IEventModifier"),Kz=ln("IKeyMapping",n=>n.instance({meta:pl(["ctrl","alt","shift","meta"]),keys:{escape:"Escape",enter:"Enter",space:"Space",tab:"tab",...Array.from({length:25}).reduce((e,t,i)=>{let r=String.fromCharCode(i+65);return e[i+65]=r,r=String.fromCharCode(i+97),e[i+97]=e[r]=r,e},{})}}));class ok{constructor(){this.type=["click","mousedown","mousemove","mouseup","dblclick","contextmenu"],this._mapping=ve(Kz),this._mouseButtons=["left","middle","right"]}static register(e){e.register(bl(r1,ok))}getHandler(e){const t=e.split(/[:+.]/);return i=>{let r=!1,s=!1,o;for(o of t){switch(o){case"prevent":r=!0;continue;case"stop":s=!0;continue;case"left":case"middle":case"right":if(i.button!==this._mouseButtons.indexOf(o))return!1;continue}if(this._mapping.meta.includes(o)&&i[`${o}Key`]!==!0)return!1;console.warn(`Modifier '${o}' is not supported for mouse events.`)}return r&&i.preventDefault(),s&&i.stopPropagation(),!0}}}class ak{constructor(){this._mapping=ve(Kz),this.type=["keydown","keyup"]}static register(e){e.register(bl(r1,ak))}getHandler(e){const t=e.split(/[:+.]/);return i=>{let r=!1,s=!1,o;for(o of t){switch(o){case"prevent":r=!0;continue;case"stop":s=!0;continue}if(this._mapping.meta.includes(o)){if(i[`${o}Key`]!==!0)return!1;continue}if(this._mapping.keys[o]!==i.key)return!1;console.warn(`Modifier '${o}' is not supported for keyboard event with key "${i.key}".`)}return r&&i.preventDefault(),s&&i.stopPropagation(),!0}}}class lk{constructor(){this.type=["$ALL"]}static register(e){e.register(bl(r1,lk))}getHandler(e){const t=e.split(/[:+.]/);return i=>{let r=!1,s=!1,o;for(o of t){switch(o){case"prevent":r=!0;continue;case"stop":s=!0;continue}console.warn(`Modifier '${o}' is not supported for event "${i.type}".`)}return r&&i.preventDefault(),s&&i.stopPropagation(),!0}}}const qz=ln("IEventModifierHandler",n=>n.instance({getHandler:()=>(console.warn("No event modifier handler registered"),null)}));class ck{constructor(){this._reg=ve(AO(r1)).reduce((e,t)=>((ai(t.type)?t.type:[t.type]).forEach(r=>e[r]=t),e),{})}static register(e){e.register(bl(qz,ck))}getHandler(e,t){var i;return St(t)?((i=this._reg[e]??this._reg.$ALL)==null?void 0:i.getHandler(t))??null:null}}const Xne={register(n){n.register(ck,ok,ak,lk)}},Ts=ln("IViewFactory");class s1{constructor(e,t){this.isCaching=!1,this._cache=null,this._cacheSize=-1,this.name=t.name,this.container=e,this.def=t}setCacheSize(e,t){e&&(e==="*"?e=s1.maxCacheSize:St(e)&&(e=parseInt(e,10)),(this._cacheSize===-1||!t)&&(this._cacheSize=e)),this._cacheSize>0?this._cache=[]:this._cache=null,this.isCaching=this._cacheSize>0}canReturnToCache(e){return this._cache!=null&&this._cache.length<this._cacheSize}tryReturnToCache(e){return this.canReturnToCache(e)?(this._cache.push(e),!0):!1}create(e){const t=this._cache;let i;return t!=null&&t.length>0?(i=t.pop(),i):(i=Cs.$view(this,e),i)}}s1.maxCacheSize=65535;const Zne=(()=>{const n=(e,t)=>e.document.createComment(t);return e=>{const t=n(e,"au-end");return t.$start=n(e,"au-start"),t}})(),Vy=(n,e,t)=>{if(n===null)return;const i=t.length;let r=0;for(;i>r;)n.insertBefore(t[r],e),++r},Xz=(n,e)=>new n.ownerDocument.defaultView.MutationObserver(e),Qne=n=>n.nodeType===1,Zz="default",Jne="au-slot",Qz=ln("IAuSlotsInfo");class Jz{constructor(e){this.projectedSlots=e}}const eie=ln("IAuSlotWatcher");class o1{static create(e,t,i,r,s,o,a,l){const c=[],u=r.renderers,h=f=>{let g=f,p=e;for(;p!=null&&g>0;)p=p.parent,--g;if(p==null)throw Ee(9999);return p},d=f=>{var y;const g=h(f),p=new o1(g),m=s.compileSpread(g.controller.definition,((y=g.instruction)==null?void 0:y.captures)??bt,g.controller.container,t,i);let v;for(v of m)switch(v.type){case mi.spreadTransferedBinding:d(f+1);break;case mi.spreadElementProp:u[v.instruction.type].render(p,Ld(t),v.instruction,o,a,l);break;default:u[v.type].render(p,t,v,o,a,l)}c.push(p)};return d(0),c}get container(){return this.locator}get definition(){return this.$controller.definition}get state(){return this.$controller.state}constructor(e){this.isBound=!1,this._innerBindings=[],this.locator=(this.$controller=(this._hydrationContext=e).controller).container}get(e){return this.locator.get(e)}bind(e){if(this.isBound)return;this.isBound=!0;const t=this.scope=this._hydrationContext.controller.scope.parent??void 0;if(t==null)throw Ee(9999);this._innerBindings.forEach(i=>i.bind(t))}unbind(){this._innerBindings.forEach(e=>e.unbind()),this.isBound=!1}addBinding(e){this._innerBindings.push(e)}addChild(e){if(e.vmKind!==hd)throw Ee(9998);this.$controller.addChild(e)}}class Va{constructor(e,t,i,r,s,o,a,l){this.target=t,this.targetKeys=i,this.ast=r,this.strict=l,this.isBound=!1,this._scope=void 0,this.boundFn=!1,this._bindingCache={},this._scopeCache=new WeakMap,this._controller=e,this.oL=s,this.l=o,this._taskQueue=a}updateTarget(){this.obs.version++;const e=Ln(this.ast,this._scope,this,this);this.obs.clear(),this._createBindings(e,!0)}handleChange(){this.isBound&&this.updateTarget()}handleCollectionChange(){this.isBound&&this.updateTarget()}bind(e){if(this.isBound){if(e===this._scope)return;this.unbind()}this.isBound=!0,this._scope=e,eh(this.ast,e,this);const t=Ln(this.ast,e,this,this);this._createBindings(t,!1)}unbind(){if(!this.isBound)return;this.isBound=!1,th(this.ast,this._scope,this),this._scope=void 0;let e;for(e in this._bindingCache)this._bindingCache[e].unbind()}_createBindings(e,t){var o,a;let i;if(!J5(e)){console.warn(`[DEV:aurelia] $bindable spread is given a non object for properties: "${this.targetKeys.join(", ")}" of ${this.target.constructor.name}`);for(i in this._bindingCache)(o=this._bindingCache[i])==null||o.unbind();return}let r,s=this._scopeCache.get(e);s==null&&this._scopeCache.set(e,s=pi.fromParent(this._scope,e));for(i of this.targetKeys)r=this._bindingCache[i],i in e?(r==null&&(r=this._bindingCache[i]=new Pr(this._controller,this.l,this.oL,this._taskQueue,(a=Va._astCache)[i]??(a[i]=new ov(i,0)),this.target,i,jw.toView,this.strict)),r.bind(s)):t&&(r==null||r.unbind())}}Va.mix=ih(()=>{vf(Va),wf(Va,()=>"updateTarget"),oa(Va,null),Nc(Va)});Va._astCache={};const r2=(n,e,t,i)=>{n.addEventListener(e,t,i)},s2=(n,e,t,i)=>{n.removeEventListener(e,t,i)},uk=n=>{let e;const t=n.prototype;vs(t,"subscribe",function(i){var r;if(this.subs.add(i)&&this.subs.count===1){for(e of this._config.events)r2(this._el,e,this);this._listened=!0,(r=this._start)==null||r.call(this)}}),vs(t,"unsubscribe",function(i){var r;if(this.subs.remove(i)&&this.subs.count===0){for(e of this._config.events)s2(this._el,e,this);this._listened=!1,(r=this._stop)==null||r.call(this)}}),vs(t,"useConfig",function(i){if(this._config=i,this._listened){for(e of this._config.events)s2(this._el,e,this);for(e of this._config.events)r2(this._el,e,this)}})},a1=n=>{vs(n.prototype,"subscribe",Qa),vs(n.prototype,"unsubscribe",Qa)};class l1{get doNotCache(){return!0}constructor(e,t={}){this.obj=e,this.mapping=t,this.type=nh|ml,this._value="",this._nameIndex={},this._version=0}getValue(){return this._value}setValue(e){e!==this._value&&(this._value=e,this._flushChanges())}_flushChanges(){const e=this._nameIndex,t=++this._version,i=this.obj.classList,r=e8(this._value),s=r.length;let o=0,a;if(s>0)for(;o<s;o++)a=r[o],a=this.mapping[a]||a,a.length!==0&&(e[a]=this._version,i.add(a));if(t!==1)for(a in e)a=this.mapping[a]||a,e[a]!==t&&i.remove(a)}}a1(l1);function e8(n){if(St(n))return o2(n);if(typeof n!="object")return bt;if(ai(n)){const i=n.length;if(i>0){const r=[];let s=0;for(;i>s;++s)r.push(...e8(n[s]));return r}else return bt}const e=[];let t;for(t in n)n[t]&&(t.includes(" ")?e.push(...o2(t)):e.push(t));return e}function o2(n){const e=n.match(/\S+/g);return e===null?bt:e}const t8=n=>({$isResolver:!0,resolve(e,t){return t.get(Jd).controller.container.get(eJ(n))}}),n8=ln("IRenderer");function Vi(n,e){var i;const t=n[i=Symbol.metadata]??(n[i]=Object.create(null));return t[dl]={register(r){bl(n8,n).register(r)}},n}function ol(n,e,t){return St(e)?n.parse(e,t):e}function c1(n){return n.viewModel!=null?n.viewModel:n}function tie(n,e){if(e==="element")return n;switch(e){case"controller":return Ld(n);case"view":throw Ee(750);case"component":return Ld(n).viewModel;default:{const t=Gz(n,e);if(t!==void 0)return t.viewModel;const i=Ld(n,{name:e});if(i===void 0)throw Ee(751,e);return i.viewModel}}}const nie=Vi(class{constructor(){this.target=mi.setProperty}render(e,t,i){var s;const r=c1(t);((s=r.$observers)==null?void 0:s[i.to])!==void 0?r.$observers[i.to].setValue(i.value):r[i.to]=i.value}}),iie=Vi(class{constructor(){this._rendering=ve(yf),this.target=mi.hydrateElement}render(e,t,i,r,s,o){let a,l,c;const u=i.res,h=i.projections,d=e.container;switch(typeof u){case"string":if(a=Ti.find(d,u),a==null)throw Ee(752,i,e);break;default:a=u}const g=i.containerless||a.containerless?rw(t):null,p=Eie(r,e,t,i,g,h==null?void 0:new Jz(ek(h)));l=p.invoke(a.Type),c=Cs.$el(p,l,t,i,a,g),Rr(t,a.key,c);const m=this._rendering.renderers,v=i.props,y=v.length;let w=0,R;for(;y>w;)R=v[w],m[R.type].render(e,c,R,r,s,o),++w;e.addChild(c)}}),rie=Vi(class{constructor(){this._rendering=ve(yf),this.target=mi.hydrateAttribute}render(e,t,i,r,s,o){let a=e.container,l;switch(typeof i.res){case"string":if(l=rk.find(a,i.res),l==null)throw Ee(753,i,e);break;default:l=i.res}const c=a8(r,l,e,t,i,void 0,void 0),u=Cs.$attr(c.ctn,c.vm,t,l);Rr(t,l.key,u);const h=this._rendering.renderers,d=i.props,f=d.length;let g=0,p;for(;f>g;)p=d[g],h[p.type].render(e,u,p,r,s,o),++g;e.addChild(u)}}),sie=Vi(class{constructor(){this._rendering=ve(yf),this.target=mi.hydrateTemplateController}render(e,t,i,r,s,o){var y,w;let a=e.container,l;switch(typeof i.res){case"string":if(l=rk.find(a,i.res),l==null)throw Ee(754,i,e);break;default:l=i.res}const c=this._rendering.getViewFactory(i.def,l.containerStrategy==="new"?a.createChild({inheritParentResources:!0}):a),u=rw(t),h=a8(r,l,e,t,i,c,u),d=Cs.$attr(h.ctn,h.vm,t,l);Rr(u,l.key,d),(w=(y=h.vm).link)==null||w.call(y,e,d,t,i);const f=this._rendering.renderers,g=i.props,p=g.length;let m=0,v;for(;p>m;)v=g[m],f[v.type].render(e,d,v,r,s,o),++m;e.addChild(d)}}),oie=Vi(class{constructor(){this.target=mi.hydrateLetElement,wd.mix()}render(e,t,i,r,s,o){t.remove();const a=i.instructions,l=i.toBindingContext,c=e.container,u=a.length;let h,d,f=0;for(;u>f;)h=a[f],d=ol(s,h.from,sl),e.addBinding(new wd(c,o,d,h.to,l,e.strict??!1)),++f}}),aie=Vi(class{constructor(){this.target=mi.refBinding}render(e,t,i,r,s){e.addBinding(new rP(e.container,ol(s,i.from,sl),tie(t,i.to),e.strict??!1))}}),lie=Vi(class{constructor(){this.target=mi.interpolation,bd.mix()}render(e,t,i,r,s,o){const a=e.container,l=new Gne(e,a,o,r.domQueue,ol(s,i.from,Sne),c1(t),i.to,ei,e.strict??!1);if(i.to==="class"&&l.target.nodeType>0){const c=a.get(t8(d_));l.useAccessor(new l1(l.target,c))}e.addBinding(l)}}),cie=Vi(class{constructor(){this.target=mi.propertyBinding,Pr.mix()}render(e,t,i,r,s,o){const a=e.container,l=new Pr(e,a,o,r.domQueue,ol(s,i.from,sl),c1(t),i.to,i.mode,e.strict??!1);if(i.to==="class"&&l.target.nodeType>0){const c=a.get(t8(d_));l.useTargetObserver(new l1(l.target,c))}e.addBinding(l)}}),uie=Vi(class{constructor(){this.target=mi.iteratorBinding,Pr.mix()}render(e,t,i,r,s,o){e.addBinding(new Pr(e,e.container,o,r.domQueue,ol(s,i.forOf,_ne),c1(t),i.to,ei,e.strict??!1))}}),hie=Vi(class{constructor(){this.target=mi.textBinding,vd.mix()}render(e,t,i,r,s,o){e.addBinding(new vd(e,e.container,o,r.domQueue,r,ol(s,i.from,sl),t,e.strict??!1))}}),die=ln("IListenerBindingOptions",n=>n.singleton(class{constructor(){this.p=ve(Fi),this.prevent=!1,this.onError=(e,t)=>{const i=new this.p.CustomEvent("au-event-error",{cancelable:!0,detail:{event:e,error:t}});if(this.p.window.dispatchEvent(i),!i.defaultPrevented)throw t}}})),fie=Vi(class{constructor(){this.target=mi.listenerBinding,this._modifierHandler=ve(qz),this._defaultOptions=ve(die),Vg.mix()}render(e,t,i,r,s){e.addBinding(new Vg(e.container,ol(s,i.from,Rne),t,i.to,new qne(this._defaultOptions.prevent,i.capture,this._defaultOptions.onError),this._modifierHandler.getHandler(i.to,i.modifier),e.strict??!1))}}),gie=Vi(class{constructor(){this.target=mi.setAttribute}render(e,t,i){t.setAttribute(i.to,i.value)}}),pie=Vi(class{constructor(){this.target=mi.setClassAttribute}render(e,t,i){_ie(t.classList,i.value)}}),mie=Vi(class{constructor(){this.target=mi.setStyleAttribute}render(e,t,i){t.style.cssText+=i.value}}),bie=["height","width","border-width","padding","padding-left","padding-right","padding-top","padding-right","padding-inline","padding-block","margin","margin-left","margin-right","margin-top","margin-bottom","margin-inline","margin-block","top","right","bottom","left"],vie=Vi(class{constructor(){this.target=mi.stylePropertyBinding,Pr.mix()}render(e,t,i,r,s,o){if(bie.includes(i.to)){e.addBinding(new wie(e,e.container,o,r.domQueue,ol(s,i.from,sl),t.style,i.to,ei,e.strict??!1));return}e.addBinding(new Pr(e,e.container,o,r.domQueue,ol(s,i.from,sl),t.style,i.to,ei,e.strict??!1))}});class wie extends Pr{updateTarget(e){return typeof e=="number"&&e>0&&console.warn(`[DEV]: Setting number ${e} as value for style.${this.targetProperty}. Did you meant "${e}px"?`),super.updateTarget(e)}}const yie=Vi(class{constructor(){this.target=mi.attributeBinding,md.mix()}render(e,t,i,r,s,o){const a=e.container,l=a.has(d_,!1)?a.get(d_):null;e.addBinding(new md(e,a,o,r.domQueue,ol(s,i.from,sl),t,i.attr,l==null?i.to:i.to.split(/\s/g).map(c=>l[c]??c).join(" "),ei,e.strict??!1))}}),Cie=Vi(class{constructor(){this._compiler=ve(KR),this._rendering=ve(yf),this.target=mi.spreadTransferedBinding}render(e,t,i,r,s,o){o1.create(e.container.get(Jd),t,void 0,this._rendering,this._compiler,r,s,o).forEach(a=>e.addBinding(a))}}),Sie=Vi(class{constructor(){this.target=mi.spreadValueBinding,Va.mix()}render(e,t,i,r,s,o){const a=i.target;if(a==="$bindables")e.addBinding(new Va(e,t.viewModel,ek(t.definition.bindables),s.parse(i.from,sl),o,e.container,r.domQueue,e.strict??!1));else throw Ee(820,a)}});function _ie(n,e){const t=e.length;let i=0;for(let r=0;r<t;++r)e.charCodeAt(r)===32?(r!==i&&n.add(e.slice(i,r)),i=r+1):r+1===t&&n.add(e.slice(i))}const i8="IController",r8="IInstruction",Rie="IRenderLocation",s8="ISlotsInfo";function Eie(n,e,t,i,r,s){const o=e.container.createChild();return d1(o,t,n),_n(o,u1,new gi(i8,e)),_n(o,jp,new gi(r8,i)),_n(o,Or,r==null?c8:new l8(r)),_n(o,Ts,u8),_n(o,Qz,s==null?h8:new gi(s8,s)),o}class o8{get $isResolver(){return!0}constructor(e){this.f=e}resolve(){const e=this.f;if(e===null)throw Ee(755);if(!St(e.name)||e.name.length===0)throw Ee(756);return e}}function a8(n,e,t,i,r,s,o,a){const l=t instanceof Cs?t:t.$controller,c=l.container.createChild();return d1(c,i,n),_n(c,u1,new gi(i8,l)),_n(c,jp,new gi(r8,r)),_n(c,Or,o==null?c8:new gi(Rie,o)),_n(c,Ts,s==null?u8:new o8(s)),_n(c,Qz,h8),{vm:c.invoke(e.Type),ctn:c}}class l8{get name(){return"IRenderLocation"}get $isResolver(){return!0}constructor(e){this._location=e}resolve(){return this._location}}const c8=new l8(null),u8=new o8(null),h8=new gi(s8,new Jz(bt)),yf=ln("IRendering",n=>n.singleton(xie));class xie{get renderers(){return this._renderers??(this._renderers=this._ctn.getAll(n8,!1).reduce((e,t)=>{var i;return e[t.target]!==void 0&&console.warn(`[DEV:aurelia] Renderer for target ${t.target} already exists.`),e[i=t.target]??(e[i]=t),e},on()))}constructor(){this._compilationCache=new WeakMap,this._fragmentCache=new WeakMap;const e=this._ctn=ve(Fp).root,t=this._platform=e.get(Fi);this._exprParser=e.get(Vp),this._observerLocator=e.get(Up),this._marker=t.document.createElement("au-m"),this._empty=new fx(t,t.document.createDocumentFragment())}compile(e,t){const i=t.get(KR),r=this._compilationCache;let s=r.get(e);return s==null&&r.set(e,s=Jr.create(e.needsCompile?i.compile(e,t):e)),s}getViewFactory(e,t){return new s1(t,Jr.getOrCreate(e))}createNodes(e){if(e.enhance===!0)return new fx(this._platform,this._transformMarker(e.template));let t,i=!1;const r=this._fragmentCache,s=this._platform,o=s.document;if(r.has(e))t=r.get(e);else{const a=e.template;let l;a==null?t=null:a instanceof s.Node?a.nodeName==="TEMPLATE"?(t=a.content,i=!0):(t=o.createDocumentFragment()).appendChild(a.cloneNode(!0)):(l=o.createElement("template"),St(a)&&(l.innerHTML=a),t=l.content,i=!0),this._transformMarker(t),r.set(e,t)}return t==null?this._empty:new fx(this._platform,i?o.importNode(t,!0):o.adoptNode(t.cloneNode(!0)))}render(e,t,i,r){const s=i.instructions,o=this.renderers,a=t.length;let l=0,c=0,u=s.length,h,d,f;if(a!==u)throw Ee(757,a,u);if(a>0)for(;a>l;){for(h=s[l],f=t[l],c=0,u=h.length;u>c;)d=h[c],o[d.type].render(e,f,d,this._platform,this._exprParser,this._observerLocator),++c;++l}if(r!=null&&(h=i.surrogates,(u=h.length)>0))for(c=0;u>c;)d=h[c],o[d.type].render(e,r,d,this._platform,this._exprParser,this._observerLocator),++c}_transformMarker(e){if(e==null)return null;const t=this._platform.document.createTreeWalker(e,128);let i;for(;(i=t.nextNode())!=null;)i.nodeValue==="au*"&&i.parentNode.replaceChild(t.currentNode=this._marker.cloneNode(),i);return e}}const Tie=ln("IShadowDOMStyleFactory",n=>n.cachedCallback(e=>f8.supported(e.get(Fi))?e.get(Mie):e.get(Aie)));class Mie{constructor(){this.p=ve(Fi),this.cache=new Map}createStyles(e,t){return new f8(this.p,e,this.cache,t)}}class Aie{constructor(){this.p=ve(Fi)}createStyles(e,t){return new Pie(this.p,e,t)}}const a2=ln("IShadowDOMStyles"),d8=ln("IShadowDOMGlobalStyles",n=>n.instance({applyTo:Qa}));class f8{constructor(e,t,i,r=null){this.sharedStyles=r,this.styleSheets=t.map(s=>{let o;return s instanceof e.CSSStyleSheet?o=s:(o=i.get(s),o===void 0&&(o=new e.CSSStyleSheet,o.replaceSync(s),i.set(s,o))),o})}static supported(e){return"adoptedStyleSheets"in e.ShadowRoot.prototype}applyTo(e){this.sharedStyles!==null&&this.sharedStyles.applyTo(e),e.adoptedStyleSheets=[...e.adoptedStyleSheets,...this.styleSheets]}}class Pie{constructor(e,t,i=null){this.p=e,this.localStyles=t,this.sharedStyles=i}applyTo(e){const t=this.localStyles,i=this.p;for(let r=t.length-1;r>-1;--r){const s=i.document.createElement("style");s.innerHTML=t[r],e.prepend(s)}this.sharedStyles!==null&&this.sharedStyles.applyTo(e)}}const Iie={shadowDOM(n){return Lne.creating(Fp,e=>{if(n.sharedStyles!=null){const t=e.get(Tie);e.register(t1(d8,t.createStyles(n.sharedStyles,null)))}})}},{enter:Oie,exit:kie}=Ste,{wrap:Die,unwrap:Lie}=sne;class g8{get value(){return this._value}constructor(e,t,i,r,s){this.obj=e,this.$get=i,this.useProxy=s,this.isBound=!1,this.running=!1,this._value=void 0,this._callback=r,this.oL=t}handleChange(){this.run()}handleCollectionChange(){this.run()}bind(){this.isBound||(this.compute(),this.isBound=!0)}unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll())}run(){if(!this.isBound||this.running)return;const e=this.obj,t=this._value,i=this.compute();ea(i,t)||this._callback.call(e,i,t,e)}compute(){this.running=!0,this.obs.version++;try{return Oie(this),this._value=Lie(this.$get.call(void 0,this.useProxy?Die(this.obj):this.obj,this))}finally{this.obs.clear(),this.running=!1,kie(this)}}}oa(g8,null);class sP{get value(){return this._value}constructor(e,t,i,r,s){this.scope=e,this.l=t,this.oL=i,this.isBound=!1,this.boundFn=!1,this.obj=e.bindingContext,this._expression=r,this._callback=s}handleChange(e){const t=this._expression,i=this.obj,r=this._value;t.$kind==="AccessScope"&&this.obs.count===1||(this.obs.version++,e=Ln(t,this.scope,this,this),this.obs.clear()),ea(e,r)||(this._value=e,this._callback.call(i,e,r,i))}bind(){this.isBound||(this.obs.version++,this._value=Ln(this._expression,this.scope,this,this),this.obs.clear(),this.isBound=!0)}unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll(),this._value=void 0)}}oa(sP,null),Nc(sP);class Cs{get lifecycleHooks(){return this._lifecycleHooks}get isActive(){return(this.state&(ws|yd))>0&&(this.state&fv)===0}get name(){var e;if(this.parent===null)switch(this.vmKind){case hd:return`[${this.definition.name}]`;case Ws:return this.definition.name;case Qi:return this.viewFactory.name}switch(this.vmKind){case hd:return`${this.parent.name}>[${this.definition.name}]`;case Ws:return`${this.parent.name}>${this.definition.name}`;case Qi:return this.viewFactory.name===((e=this.parent.definition)==null?void 0:e.name)?`${this.parent.name}[view]`:`${this.parent.name}[view:${this.viewFactory.name}]`}}get viewModel(){return this._vm}set viewModel(e){this._vm=e,this._vmHooks=e==null||this.vmKind===Qi?Wg.none:new Wg(e)}get strict(){var e;return(e=this.definition)==null?void 0:e.strict}constructor(e,t,i,r,s,o,a){this.container=e,this.vmKind=t,this.definition=i,this.viewFactory=r,this.host=o,this.head=null,this.tail=null,this.next=null,this.parent=null,this.bindings=null,this.children=null,this.hasLockedScope=!1,this.scope=null,this.isBound=!1,this._isBindingDone=!1,this.hostController=null,this.mountTarget=p8,this.shadowRoot=null,this.nodes=null,this.location=null,this._lifecycleHooks=null,this.state=ux,this._fullyNamed=!1,this.$initiator=null,this.$resolve=void 0,this.$reject=void 0,this.$promise=void 0,this._activatingStack=0,this._detachingStack=0,this._unbindingStack=0,this._vm=s,this._vmHooks=t===Qi?Wg.none:new Wg(s),this.logger=null,this.debug=!1,this.location=a,this._rendering=e.root.get(yf),this.coercion=t===Qi?void 0:e.get($ie)}static getCached(e){return Uc.get(e)}static getCachedOrThrow(e){const t=Cs.getCached(e);if(t===void 0)throw Ee(500,e);return t}static $el(e,t,i,r,s=void 0,o=null){if(Uc.has(t))return Uc.get(t);if(s==null)try{s=w8(t.constructor)}catch(c){throw console.error(`[DEV:aurelia] Custom element definition not found for creating a controller with host: <${i.nodeName} /> and component ${t.constructor.name||"(Anonymous) class"}`),c}_n(e,s.Type,new gi(s.key,t,s.Type));const a=new Cs(e,Ws,s,null,t,i,o),l=e.get(c6(Jd));return s.dependencies.length>0&&e.register(...s.dependencies),_n(e,Jd,new gi("IHydrationContext",new m8(a,r,l))),Uc.set(t,a),(r==null||r.hydrate!==!1)&&a._hydrateCustomElement(r),a}static $attr(e,t,i,r){if(Uc.has(t))return Uc.get(t);r=r??ik(t.constructor),_n(e,r.Type,new gi(r.key,t,r.Type));const s=new Cs(e,hd,r,null,t,i,null);return r.dependencies.length>0&&e.register(...r.dependencies),Uc.set(t,s),s._hydrateCustomAttribute(),s}static $view(e,t=void 0){const i=new Cs(e.container,Qi,null,e,null,null,null);return i.parent=t??null,i._hydrateSynthetic(),i}_hydrateCustomElement(e){this.logger=this.container.get(Ud).root,this.debug=this.logger.config.level<=sJ.debug,this.debug&&(this.logger=this.logger.scopeTo(this.name));const t=this.container,i=this._vm,r=this.definition;this.scope=pi.create(i,null,!0),r.watches.length>0&&u2(this,t,r,i),l2(this,r,i),this._lifecycleHooks=i2.resolve(t),t.register(r.Type),r.injectable!==null&&_n(t,r.injectable,new gi("definition.injectable",i)),(e==null||e.hydrate!==!1)&&(this._hydrate(e==null?void 0:e.hostController),this._hydrateChildren())}_hydrate(e){this._lifecycleHooks.hydrating!=null&&this._lifecycleHooks.hydrating.forEach(jie,this),this._vmHooks._hydrating&&(this.debug&&this.logger.trace("invoking hydrating() hook"),this._vm.hydrating(this));const t=this.definition,i=this._compiledDef=this._rendering.compile(t,this.container),r=i.shadowOptions,s=i.hasSlots,o=i.containerless;let a=this.host,l=this.location,c=!1;if(e!=null?(this.hostController=e,c=!0):(this.hostController=Ld(a,Hie))!==null&&(a=this.host=this.container.root.get(Fi).document.createElement(t.name),c=!0),c&&o&&l==null&&(l=this.location=rw(a)),Rr(a,Ui,this),Rr(a,t.key,this),r!==null||s){if(l!=null)throw Ee(501);Rr(this.shadowRoot=a.attachShadow(r??Bie),Ui,this),Rr(this.shadowRoot,t.key,this),this.mountTarget=cd}else l!=null?(Rr(l,Ui,this),Rr(l,t.key,this),this.mountTarget=ud):this.mountTarget=ld;this._vm.$controller=this,this.nodes=this._rendering.createNodes(i),this._lifecycleHooks.hydrated!==void 0&&this._lifecycleHooks.hydrated.forEach(zie,this),this._vmHooks._hydrated&&(this.debug&&this.logger.trace("invoking hydrated() hook"),this._vm.hydrated(this))}_hydrateChildren(){this._rendering.render(this,this.nodes.findTargets(),this._compiledDef,this.host),this._lifecycleHooks.created!==void 0&&this._lifecycleHooks.created.forEach(h2,this),this._vmHooks._created&&(this.debug&&this.logger.trace("invoking created() hook"),this._vm.created(this))}_hydrateCustomAttribute(){const e=this.definition,t=this._vm;e.watches.length>0&&u2(this,this.container,e,t),l2(this,e,t),t.$controller=this,this._lifecycleHooks=i2.resolve(this.container),this._lifecycleHooks.created!==void 0&&this._lifecycleHooks.created.forEach(h2,this),this._vmHooks._created&&(this.debug&&this.logger.trace("invoking created() hook"),this._vm.created(this))}_hydrateSynthetic(){this._compiledDef=this._rendering.compile(this.viewFactory.def,this.container),this._rendering.render(this,(this.nodes=this._rendering.createNodes(this._compiledDef)).findTargets(),this._compiledDef,void 0)}activate(e,t,i){switch(this.state){case ux:case jg:if(!(t===null||t.isActive))return;this.state=ws;break;case yd:return;case cu:throw Ee(502,this.name);default:throw Ee(503,this.name,Vie(this.state))}switch(this.parent=t,this.debug&&!this._fullyNamed&&(this._fullyNamed=!0,(this.logger??(this.logger=this.container.get(Ud).root.scopeTo(this.name))).trace("activate()")),this.vmKind){case Ws:this.scope.parent=i??null;break;case hd:this.scope=i??null;break;case Qi:if(i==null)throw Ee(504,this.name);this.hasLockedScope||(this.scope=i);break}this.$initiator=e,this._enterActivating();let r;return this.vmKind!==Qi&&this._lifecycleHooks.binding!=null&&(this.debug&&this.logger.trace("lifecycleHooks.binding()"),r=Ri(...this._lifecycleHooks.binding.map(Uie,this))),this._vmHooks._binding&&(this.debug&&this.logger.trace("binding()"),r=Ri(r,this._vm.binding(this.$initiator,this.parent))),fi(r)?(this._ensurePromise(),r.then(()=>{this._isBindingDone=!0,this.state!==ws?this._leaveActivating():this.bind()}).catch(s=>{this._reject(s)}),this.$promise):(this._isBindingDone=!0,this.bind(),this.$promise)}bind(){this.debug&&this.logger.trace("bind()");let e=0,t=0,i;if(this.bindings!==null)for(e=0,t=this.bindings.length;t>e;)this.bindings[e].bind(this.scope),++e;if(this.vmKind!==Qi&&this._lifecycleHooks.bound!=null&&(this.debug&&this.logger.trace("lifecycleHooks.bound()"),i=Ri(...this._lifecycleHooks.bound.map(Gie,this))),this._vmHooks._bound&&(this.debug&&this.logger.trace("bound()"),i=Ri(i,this._vm.bound(this.$initiator,this.parent))),fi(i)){this._ensurePromise(),i.then(()=>{this.isBound=!0,this.state!==ws?this._leaveActivating():this._attach()}).catch(r=>{this._reject(r)});return}this.isBound=!0,this._attach()}_append(...e){switch(this.mountTarget){case ld:this.host.append(...e);break;case cd:this.shadowRoot.append(...e);break;case ud:{let t=0;for(;t<e.length;++t)this.location.parentNode.insertBefore(e[t],this.location);break}}}_attach(){if(this.debug&&this.logger.trace("attach()"),this.hostController!==null)switch(this.mountTarget){case ld:case cd:this.hostController._append(this.host);break;case ud:this.hostController._append(this.location.$start,this.location);break}switch(this.mountTarget){case ld:this.nodes.appendTo(this.host,this.definition!=null&&this.definition.enhance);break;case cd:{const i=this.container;(i.has(a2,!1)?i.get(a2):i.get(d8)).applyTo(this.shadowRoot),this.nodes.appendTo(this.shadowRoot);break}case ud:this.nodes.insertBefore(this.location);break}let e=0,t;if(this.vmKind!==Qi&&this._lifecycleHooks.attaching!=null&&(this.debug&&this.logger.trace("lifecycleHooks.attaching()"),t=Ri(...this._lifecycleHooks.attaching.map(Yie,this))),this._vmHooks._attaching&&(this.debug&&this.logger.trace("attaching()"),t=Ri(t,this._vm.attaching(this.$initiator,this.parent))),fi(t)&&(this._ensurePromise(),this._enterActivating(),t.then(()=>{this._leaveActivating()}).catch(i=>{this._reject(i)})),this.children!==null)for(;e<this.children.length;++e)this.children[e].activate(this.$initiator,this,this.scope);this._leaveActivating()}deactivate(e,t){var o;let i;switch(this.state&~zg){case yd:this.state=fv;break;case ws:this.state=fv,i=(o=this.$promise)==null?void 0:o.catch(a=>{this.logger.warn("The activation error will be ignored, as the controller is already scheduled for deactivation. The activation was rejected with: %s",a)});break;case ux:case jg:case cu:case jg|cu:return;default:throw Ee(505,this.name,this.state)}this.debug&&this.logger.trace("deactivate()"),this.$initiator=e,e===this&&this._enterDetaching();let r=0,s;if(this.children!==null)for(r=0;r<this.children.length;++r)this.children[r].deactivate(e,this);return it(i,()=>{if(this.isBound&&(this.vmKind!==Qi&&this._lifecycleHooks.detaching!=null&&(this.debug&&this.logger.trace("lifecycleHooks.detaching()"),s=Ri(...this._lifecycleHooks.detaching.map(qie,this))),this._vmHooks._detaching&&(this.debug&&this.logger.trace("detaching()"),s=Ri(s,this._vm.detaching(this.$initiator,this.parent)))),fi(s)&&(this._ensurePromise(),e._enterDetaching(),s.then(()=>{e._leaveDetaching()}).catch(a=>{e._reject(a)})),e.head===null?e.head=this:e.tail.next=this,e.tail=this,e===this)return this._leaveDetaching(),this.$promise})}removeNodes(){switch(this.vmKind){case Ws:case Qi:this.nodes.remove(),this.nodes.unlink()}if(this.hostController!==null)switch(this.mountTarget){case ld:case cd:this.host.remove();break;case ud:this.location.$start.remove(),this.location.remove();break}}unbind(){this.debug&&this.logger.trace("unbind()");let e=0;if(this.bindings!==null)for(;e<this.bindings.length;++e)this.bindings[e].unbind();switch(this.parent=null,this.vmKind){case hd:this.scope=null;break;case Qi:this.hasLockedScope||(this.scope=null),(this.state&zg)===zg&&!this.viewFactory.tryReturnToCache(this)&&this.$initiator===this&&this.dispose();break;case Ws:this.scope.parent=null;break}this.state=jg,this.$initiator=null,this._resolve()}_ensurePromise(){this.$promise===void 0&&(this.$promise=new Promise((e,t)=>{this.$resolve=e,this.$reject=t}),this.$initiator!==this&&this.parent._ensurePromise())}_resolve(){this.$promise!==void 0&&(hx=this.$resolve,this.$resolve=this.$reject=this.$promise=void 0,hx(),hx=void 0)}_reject(e){this.$promise!==void 0&&(dx=this.$reject,this.$resolve=this.$reject=this.$promise=void 0,dx(e),dx=void 0),this.$initiator!==this&&this.parent._reject(e)}_enterActivating(){++this._activatingStack,this.$initiator!==this&&this.parent._enterActivating()}_leaveActivating(){if(this.state!==ws){--this._activatingStack,this._resolve(),this.$initiator!==this&&this.parent._leaveActivating();return}if(--this._activatingStack===0){if(this.vmKind!==Qi&&this._lifecycleHooks.attached!=null&&(bh=Ri(...this._lifecycleHooks.attached.map(Kie,this))),this._vmHooks._attached&&(this.debug&&this.logger.trace("attached()"),bh=Ri(bh,this._vm.attached(this.$initiator))),fi(bh)){this._ensurePromise(),bh.then(()=>{this.state=yd,this._resolve(),this.$initiator!==this&&this.parent._leaveActivating()}).catch(e=>{this._reject(e)}),bh=void 0;return}bh=void 0,this.state=yd,this._resolve()}this.$initiator!==this&&this.parent._leaveActivating()}_enterDetaching(){++this._detachingStack}_leaveDetaching(){if(--this._detachingStack===0){this.debug&&this.logger.trace("detach()"),this._enterUnbinding(),this.removeNodes();let e=this.$initiator.head,t;for(;e!==null;)e!==this&&(e.debug&&e.logger.trace("detach()"),e.removeNodes()),e._isBindingDone&&(e.vmKind!==Qi&&e._lifecycleHooks.unbinding!=null&&(t=Ri(...e._lifecycleHooks.unbinding.map(Xie,e))),e._vmHooks._unbinding&&(e.debug&&e.logger.trace("unbinding()"),t=Ri(t,e.viewModel.unbinding(e.$initiator,e.parent)))),fi(t)&&(this._ensurePromise(),this._enterUnbinding(),t.then(()=>{this._leaveUnbinding()}).catch(i=>{this._reject(i)})),t=void 0,e=e.next;this._leaveUnbinding()}}_enterUnbinding(){++this._unbindingStack}_leaveUnbinding(){if(--this._unbindingStack===0){this.debug&&this.logger.trace("unbind()");let e=this.$initiator.head,t=null;for(;e!==null;)e!==this&&(e._isBindingDone=!1,e.isBound=!1,e.unbind()),t=e.next,e.next=null,e=t;this.head=this.tail=null,this._isBindingDone=!1,this.isBound=!1,this.unbind()}}addBinding(e){this.bindings===null?this.bindings=[e]:this.bindings[this.bindings.length]=e}addChild(e){this.children===null?this.children=[e]:this.children[this.children.length]=e}is(e){switch(this.vmKind){case hd:case Ws:return this.definition.name===e;case Qi:return this.viewFactory.name===e}}lockScope(e){this.scope=e,this.hasLockedScope=!0}setHost(e){return this.vmKind===Ws&&(Rr(e,Ui,this),Rr(e,this.definition.key,this)),this.host=e,this.mountTarget=ld,this}setShadowRoot(e){return this.vmKind===Ws&&(Rr(e,Ui,this),Rr(e,this.definition.key,this)),this.shadowRoot=e,this.mountTarget=cd,this}setLocation(e){return this.vmKind===Ws&&(Rr(e,Ui,this),Rr(e,this.definition.key,this)),this.location=e,this.mountTarget=ud,this}release(){this.state|=zg}dispose(){this.debug&&this.logger.trace("dispose()"),(this.state&cu)!==cu&&(this.state|=cu,this._vmHooks._dispose&&this._vm.dispose(),this.children!==null&&(this.children.forEach(Wie),this.children=null),this.hostController=null,this.scope=null,this.nodes=null,this.location=null,this.viewFactory=null,this._vm!==null&&(Uc.delete(this._vm),this._vm=null),this._vm=null,this.host=null,this.shadowRoot=null,this.container.disposeResolvers())}accept(e){if(e(this)===!0||this._vmHooks._accept&&this._vm.accept(e)===!0)return!0;if(this.children!==null){const{children:t}=this;for(let i=0,r=t.length;i<r;++i)if(t[i].accept(e)===!0)return!0}}}const Uc=new WeakMap,p8=0,ld=1,cd=2,ud=3,Nie=pl({none:p8,host:ld,shadowRoot:cd,location:ud}),Hie={optional:!0},$ie=tJ(Cz);function l2(n,e,t){var c,u;const i=e.bindables,r=Dz(i),s=r.length,o=n.container.get(Up),a="propertiesChanged"in t;if(s===0)return;const l=a?(()=>{let h={},d,f=0;const g=Promise.resolve(),p=()=>{d==null&&(d=g.then(()=>{var v;const m=h;h={},f=0,d=void 0,n.isBound&&((v=t.propertiesChanged)==null||v.call(t,m),f>0&&p())}))};return(m,v,y)=>{h[m]={newValue:v,oldValue:y},f++,p()}})():Qa;for(let h=0;h<s;++h){const d=r[h],f=i[d],g=f.callback,p=o.getObserver(t,d);if(f.set!==Qa&&((c=p.useCoercer)==null?void 0:c.call(p,f.set,n.coercion))!==!0)throw Ee(507,d);if(t[g]!=null||t.propertyChanged!=null||a){const m=(v,y)=>{var w,R;n.isBound&&((w=t[g])==null||w.call(t,v,y),(R=t.propertyChanged)==null||R.call(t,d,v,y),l(d,v,y))};if(((u=p.useCallback)==null?void 0:u.call(p,m))!==!0)throw Ee(508,d)}}}const c2=new Map,Fie=n=>{let e=c2.get(n);return e==null&&(e=new ov(n,0),c2.set(n,e)),e};function u2(n,e,t,i){const r=e.get(Up),s=e.get(Vp),o=t.watches,a=n.vmKind===Ws?n.scope:pi.create(i,null,!0),l=o.length;let c,u,h,d=0;for(;l>d;++d){if({expression:c,callback:u}=o[d],u=kt(u)?u:Reflect.get(i,u),!kt(u))throw Ee(506,u);kt(c)?n.addBinding(new g8(i,r,c,u,!0)):(h=St(c)?s.parse(c,sl):Fie(c),n.addBinding(new sP(a,e,r,h,u)))}}class Wg{constructor(e){this._define="define"in e,this._hydrating="hydrating"in e,this._hydrated="hydrated"in e,this._created="created"in e,this._binding="binding"in e,this._bound="bound"in e,this._attaching="attaching"in e,this._attached="attached"in e,this._detaching="detaching"in e,this._unbinding="unbinding"in e,this._dispose="dispose"in e,this._accept="accept"in e}}Wg.none=new Wg({});const Bie={mode:"open"},Ws="customElement",hd="customAttribute",Qi="synthetic",ux=0,ws=1,yd=2,fv=4,jg=8,zg=16,cu=32;function Vie(n){const e=[];return(n&ws)===ws&&e.push("activating"),(n&yd)===yd&&e.push("activated"),(n&fv)===fv&&e.push("deactivating"),(n&jg)===jg&&e.push("deactivated"),(n&zg)===zg&&e.push("released"),(n&cu)===cu&&e.push("disposed"),e.length===0?"none":e.join("|")}const u1=ln("IController"),Jd=ln("IHydrationContext");class m8{constructor(e,t,i){this.instruction=t,this.parent=i,this.controller=e}}function Wie(n){n.dispose()}function h2(n){n.instance.created(this._vm,this)}function jie(n){n.instance.hydrating(this._vm,this)}function zie(n){n.instance.hydrated(this._vm,this)}function Uie(n){return n.instance.binding(this._vm,this.$initiator,this.parent)}function Gie(n){return n.instance.bound(this._vm,this.$initiator,this.parent)}function Yie(n){return n.instance.attaching(this._vm,this.$initiator,this.parent)}function Kie(n){return n.instance.attached(this._vm,this.$initiator)}function qie(n){return n.instance.detaching(this._vm,this.$initiator,this.parent)}function Xie(n){return n.instance.unbinding(this._vm,this.$initiator,this.parent)}let hx,dx,bh;class Zie{}function Ug(n,e){var t;return((t=n.$au)==null?void 0:t[e])??null}function Rr(n,e,t){(n.$au??(n.$au=new Zie))[e]=t}const h1=ln("INode"),Qie=ln("IEventTarget",n=>n.cachedCallback(e=>e.has(m_,!0)?e.get(m_).host:e.get(Fi).document)),Or=ln("IRenderLocation"),d_=ln("ICssClassMapping"),f_=new WeakMap;function g_(n){if(f_.has(n))return f_.get(n);let e=0,t=n.nextSibling;for(;t!==null;){if(t.nodeType===8)switch(t.textContent){case"au-start":++e;break;case"au-end":if(e--===0)return t}t=t.nextSibling}if(n.parentNode===null&&n.nodeType===11){const i=Ld(n,{optional:!0});if(i==null)return null;if(i.mountTarget===Nie.shadowRoot)return g_(i.host)}return n.parentNode}function Jie(n,e){if(n.platform!==void 0&&!(n instanceof n.platform.Node)){const t=n.childNodes;for(let i=0,r=t.length;i<r;++i)f_.set(t[i],e)}else f_.set(n,e)}function rw(n){if(b8(n))return n;const e=n.ownerDocument.createComment("au-end"),t=e.$start=n.ownerDocument.createComment("au-start"),i=n.parentNode;return i!==null&&(i.replaceChild(e,n),i.insertBefore(t,e)),e}function b8(n){return n.textContent==="au-end"}class fx{get firstChild(){return this._firstChild}get lastChild(){return this._lastChild}constructor(e,t){this.platform=e,this.next=void 0,this._isMounted=!1,this._isLinked=!1,this.ref=null;const i=(this.f=t).querySelectorAll("au-m");let r=0,s=i.length,o=this.t=Array(s),a,l;for(;s>r;)l=i[r],a=l.nextSibling,l.remove(),a.nodeType===8&&(l=a,(a=a.nextSibling).$start=l),o[r]=a,++r;const c=t.childNodes,u=this.childNodes=Array(s=c.length);for(r=0;s>r;)u[r]=c[r],++r;this._firstChild=t.firstChild,this._lastChild=t.lastChild}findTargets(){return this.t}insertBefore(e){if(this._isLinked&&this.ref)this.addToLinked();else{const t=e.parentNode;if(this._isMounted){let i=this._firstChild,r;const s=this._lastChild;for(;i!=null&&(r=i.nextSibling,t.insertBefore(i,e),i!==s);)i=r}else this._isMounted=!0,e.parentNode.insertBefore(this.f,e)}}appendTo(e,t=!1){if(this._isMounted){let i=this._firstChild,r;const s=this._lastChild;for(;i!=null&&(r=i.nextSibling,e.appendChild(i),i!==s);)i=r}else this._isMounted=!0,t||e.appendChild(this.f)}remove(){if(this._isMounted){this._isMounted=!1;const e=this.f,t=this._lastChild;let i,r=this._firstChild;for(;r!==null&&(i=r.nextSibling,e.appendChild(r),r!==t);)r=i}}addToLinked(){const e=this.ref,t=e.parentNode;if(this._isMounted){let i=this._firstChild,r;const s=this._lastChild;for(;i!=null&&(r=i.nextSibling,t.insertBefore(i,e),i!==s);)i=r}else this._isMounted=!0,t.insertBefore(this.f,e)}unlink(){this._isLinked=!1,this.next=void 0,this.ref=void 0}link(e){this._isLinked=!0,b8(e)?this.ref=e:(this.next=e,this._obtainRefNode())}_obtainRefNode(){this.next!==void 0?this.ref=this.next.firstChild:this.ref=void 0}}const d1=(n,e,t=n.get(Fi))=>(_n(n,t.HTMLElement,_n(n,t.Element,_n(n,h1,new gi("ElementResolver",e)))),n);function aa(n){return function(e,t){return t.addInitializer(function(){v8(n,this)}),e}}const gx=new WeakMap;class Jr{get type(){return Pne}constructor(e,t,i,r,s,o,a,l,c,u,h,d,f,g,p,m,v,y,w){this.Type=e,this.name=t,this.aliases=i,this.key=r,this.capture=s,this.template=o,this.instructions=a,this.dependencies=l,this.injectable=c,this.needsCompile=u,this.surrogates=h,this.bindables=d,this.containerless=f,this.shadowOptions=g,this.hasSlots=p,this.enhance=m,this.watches=v,this.strict=y,this.processContent=w}static create(e,t=null){if(t===null){const r=e;if(St(r))throw Ee(761,e);const s=So("name",r,p_);kt(r.Type)?t=r.Type:t=y8(t6(s));for(const o of Object.values(us.from(r.bindables)))us._add(o,t);return new Jr(t,s,di(r.aliases),So("key",r,()=>Og(s)),Is("capture",r,t,ks),So("template",r,Os),di(r.instructions),di(rs(t,"dependencies"),r.dependencies),So("injectable",r,Os),So("needsCompile",r,mx),di(r.surrogates),us.from(rs(t,"bindables"),r.bindables),Is("containerless",r,t,ks),So("shadowOptions",r,Os),So("hasSlots",r,ks),So("enhance",r,ks),So("watches",r,tre),So("strict",r,px),Co("processContent",t,Os))}if(St(e))return new Jr(t,e,di(rs(t,"aliases"),t.aliases),Og(e),Co("capture",t,ks),Co("template",t,Os),di(rs(t,"instructions"),t.instructions),di(rs(t,"dependencies"),t.dependencies),Co("injectable",t,Os),Co("needsCompile",t,mx),di(rs(t,"surrogates"),t.surrogates),us.from(...us.getAll(t),rs(t,"bindables"),t.bindables),Co("containerless",t,ks),Co("shadowOptions",t,Os),Co("hasSlots",t,ks),Co("enhance",t,ks),di(nP.getDefinitions(t),t.watches),Co("strict",t,px),Co("processContent",t,Os));const i=So("name",e,p_);for(const r of Object.values(us.from(e.bindables)))us._add(r,t);return new Jr(t,i,di(rs(t,"aliases"),e.aliases,t.aliases),Og(i),Is("capture",e,t,ks),Is("template",e,t,Os),di(rs(t,"instructions"),e.instructions,t.instructions),di(rs(t,"dependencies"),e.dependencies,t.dependencies),Is("injectable",e,t,Os),Is("needsCompile",e,t,mx),di(rs(t,"surrogates"),e.surrogates,t.surrogates),us.from(...us.getAll(t),rs(t,"bindables"),t.bindables,e.bindables),Is("containerless",e,t,ks),Is("shadowOptions",e,t,Os),Is("hasSlots",e,t,ks),Is("enhance",e,t,ks),di(e.watches,nP.getDefinitions(t),t.watches),Is("strict",e,t,px),Is("processContent",e,t,Os))}static getOrCreate(e){if(e instanceof Jr)return e;if(gx.has(e))return gx.get(e);const t=Jr.create(e);return gx.set(e,t),ta(t,t.Type,Ui),t}register(e,t){const i=this.Type,r=typeof t=="string"?Og(t):this.key,s=this.aliases;if(e.has(r,!1)){console.warn(Ee(153,this.name));return}e.register(e.has(i,!1)?null:bl(i,i),Vu(i,r),...s.map(o=>Vu(i,Og(o))))}toString(){return`au:ce:${this.name}`}}const ere={name:void 0,searchParents:!1,optional:!1},Os=()=>null,px=()=>{},ks=()=>!1,mx=()=>!0,tre=()=>bt,ef="custom-element",Ui=bf(ef),Og=n=>`${Ui}:${n}`,p_=(n=>()=>`unnamed-${++n}`)(0),nre=(n,e,t)=>{ta(t,n,Lc(e))},v8=(n,e)=>{const t=Jr.create(n,e),i=t.Type;return ta(t,i,Ui,Ka),i},ire=n=>{var e;return kt(n)&&(e1(Ui,n)||((e=n.$au)==null?void 0:e.type)===ef)},Ld=(n,e=ere)=>{if(e.name===void 0&&e.searchParents!==!0){const i=Ug(n,Ui);if(i===null){if(e.optional===!0)return null;throw Ee(762,n)}return i}if(e.name!==void 0){if(e.searchParents!==!0){const s=Ug(n,Ui);if(s===null)throw Ee(763,n);return s.is(e.name)?s:void 0}let i=n,r=!1;for(;i!==null;){const s=Ug(i,Ui);if(s!==null&&(r=!0,s.is(e.name)))return s;i=g_(i)}if(r)return;throw Ee(764,n)}let t=n;for(;t!==null;){const i=Ug(t,Ui);if(i!==null)return i;t=g_(t)}throw Ee(765,n)},rs=(n,e)=>dr(Lc(e),n),w8=n=>{const e=dr(Ui,n)??Wu(n,ef,Jr.create);if(e==null)throw Ee(760,n);return e},rre=()=>{const n={$isInterface:!1,register(){return{$isResolver:!0,resolve(e,t){return t.has(n,!0)?t.get(n):null}}}};return n},y8=function(){const n={value:"",writable:!1,enumerable:!1,configurable:!0},e={};return function(t,i=e){const r=class{};return n.value=t,Lz(r,"name",n),i!==e&&kz(r.prototype,i),r}}(),Ti=pl({name:Ui,keyFrom:Og,isType:ire,for:Ld,define:v8,getDefinition:w8,annotate:nre,getAnnotation:rs,generateName:p_,createInjectable:rre,generateType:y8,find(n,e){const t=n.find(ef,e);return t==null?null:dr(Ui,t)??Wu(t,ef,Jr.create)??null}}),m_=ln("IAppRoot");class d2{get controller(){return this._controller}constructor(e,t,i,r=!1){this.config=e,this.container=t,this._hydratePromise=void 0,this._useOwnAppTasks=r;const s=this.host=e.host;i.prepare(this),_n(t,Qie,new gi("IEventTarget",s)),d1(t,s,this.platform=this._createPlatform(t,s)),this._hydratePromise=it(this._runAppTasks("creating"),()=>{e.allowActionlessForm||s.addEventListener("submit",d=>{const f=d.target,g=!f.getAttribute("action");f.tagName==="FORM"&&g&&d.preventDefault()},!1);const o=r?t:t.createChild(),a=e.component;let l;kt(a)?l=o.invoke(a):l=e.component;const c={hydrate:!1,projections:null},u=r?Jr.create({name:p_(),template:this.host,enhance:!0,strict:e.strictBinding}):void 0,h=this._controller=Cs.$el(o,l,s,c,u);return h._hydrateCustomElement(c),it(this._runAppTasks("hydrating"),()=>(h._hydrate(),it(this._runAppTasks("hydrated"),()=>{h._hydrateChildren(),this._hydratePromise=void 0})))})}activate(){return it(this._hydratePromise,()=>it(this._runAppTasks("activating"),()=>it(this._controller.activate(this._controller,null,void 0),()=>this._runAppTasks("activated"))))}deactivate(){return it(this._runAppTasks("deactivating"),()=>it(this._controller.deactivate(this._controller,null),()=>this._runAppTasks("deactivated")))}_runAppTasks(e){const t=this.container,i=this._useOwnAppTasks&&!t.has(tP,!1)?[]:t.getAll(tP);return Ri(...i.reduce((r,s)=>(s.slot===e&&r.push(s.run()),r),[]))}_createPlatform(e,t){let i;if(e.has(Fi,!1))i=e.get(Fi);else{if(t.ownerDocument.defaultView===null)throw Ee(769);i=new Su(t.ownerDocument.defaultView),e.register(t1(Fi,i))}return i}dispose(){var e;(e=this._controller)==null||e.dispose()}}const f2=ln("IAurelia");let sre=class oP{get isRunning(){return this._isRunning}get isStarting(){return this._isStarting}get isStopping(){return this._isStopping}get root(){if(this._root==null){if(this.next==null)throw Ee(767);return this.next}return this._root}constructor(e=Qu.createContainer()){if(this.container=e,this._isRunning=!1,this._isStarting=!1,this._isStopping=!1,this._root=void 0,this.next=void 0,this._startPromise=void 0,this._stopPromise=void 0,e.has(f2,!0)||e.has(oP,!0))throw Ee(768);_n(e,f2,new gi("IAurelia",this)),_n(e,oP,new gi("Aurelia",this)),_n(e,m_,this._rootProvider=new gi("IAppRoot"))}register(...e){return this.container.register(...e),this}app(e){return this.next=new d2(e,this.container,this._rootProvider),this}enhance(e){const t=e.container??this.container.createChild(),i=_n(t,m_,new gi("IAppRoot")),r=new d2({host:e.host,component:e.component},t,i,!0);return it(r.activate(),()=>r)}async waitForIdle(){const e=this.root.platform;await e.domQueue.yield(),await e.taskQueue.yield()}start(e=this.next){if(e==null)throw Ee(770);return fi(this._startPromise)?this._startPromise:this._startPromise=it(this.stop(),()=>(Reflect.set(e.host,"$aurelia",this),this._rootProvider.prepare(this._root=e),this._isStarting=!0,it(e.activate(),()=>{this._isRunning=!0,this._isStarting=!1,this._startPromise=void 0,this._dispatchEvent(e,"au-started",e.host)})))}stop(e=!1){if(fi(this._stopPromise))return this._stopPromise;if(this._isRunning===!0){const t=this._root;return this._isRunning=!1,this._isStopping=!0,this._stopPromise=it(t.deactivate(),()=>{Reflect.deleteProperty(t.host,"$aurelia"),e&&t.dispose(),this._root=void 0,this._rootProvider.dispose(),this._isStopping=!1,this._dispatchEvent(t,"au-stopped",t.host)})}}dispose(){if(this._isRunning||this._isStopping)throw Ee(771);this.container.dispose()}_dispatchEvent(e,t,i){const r=new e.platform.window.CustomEvent(t,{detail:this,bubbles:!0,cancelable:!0});i.dispatchEvent(r)}};const C8=ln("ISVGAnalyzer",n=>n.singleton(ore));class ore{isStandardSvgAttribute(e,t){return!1}}class S8{constructor(){this.fns=[],this._tagAttrMap=on(),this._globalAttrMap=on(),this.svg=ve(C8),this.useMapping({LABEL:{for:"htmlFor"},IMG:{usemap:"useMap"},INPUT:{maxlength:"maxLength",minlength:"minLength",formaction:"formAction",formenctype:"formEncType",formmethod:"formMethod",formnovalidate:"formNoValidate",formtarget:"formTarget",inputmode:"inputMode"},TEXTAREA:{maxlength:"maxLength"},TD:{rowspan:"rowSpan",colspan:"colSpan"},TH:{rowspan:"rowSpan",colspan:"colSpan"}}),this.useGlobalMapping({accesskey:"accessKey",contenteditable:"contentEditable",tabindex:"tabIndex",textcontent:"textContent",innerhtml:"innerHTML",scrolltop:"scrollTop",scrollleft:"scrollLeft",readonly:"readOnly"})}useMapping(e){var o;let t,i,r,s;for(r in e){t=e[r],i=(o=this._tagAttrMap)[r]??(o[r]=on());for(s in t){if(i[s]!==void 0)throw g2(s,r);i[s]=t[s]}}}useGlobalMapping(e){const t=this._globalAttrMap;for(const i in e){if(t[i]!==void 0)throw g2(i,"*");t[i]=e[i]}}useTwoWay(e){this.fns.push(e)}isTwoWay(e,t){return are(e,t)||this.fns.length>0&&this.fns.some(i=>i(e,t))}map(e,t){var i;return((i=this._tagAttrMap[e.nodeName])==null?void 0:i[t])??this._globalAttrMap[t]??(QA(e,t,this.svg)?t:null)}}S8.register=Bw(k6);function are(n,e){switch(n.nodeName){case"INPUT":switch(n.type){case"checkbox":case"radio":return e==="checked";default:return e==="value"||e==="files"||e==="value-as-number"||e==="value-as-date"}case"TEXTAREA":case"SELECT":return e==="value";default:switch(e){case"textcontent":case"innerhtml":return n.hasAttribute("contenteditable");case"scrolltop":case"scrollleft":return!0;default:return!1}}}function g2(n,e){return Ee(719,n,e)}const lre={register(n){n.register(vz,S8,_8)}};class cre{constructor(e,t,i){this.attrs=e,this.bindables=t,this.primary=i}}class _8{constructor(){this._resourceCache=new WeakMap,this._bindableCache=new WeakMap}el(e,t){let i=this._resourceCache.get(e);return i==null&&this._resourceCache.set(e,i=new p2),t in i._element?i._element[t]:i._element[t]=Ti.find(e,t)}attr(e,t){let i=this._resourceCache.get(e);return i==null&&this._resourceCache.set(e,i=new p2),t in i._attr?i._attr[t]:i._attr[t]=rk.find(e,t)}bindables(e){let t=this._bindableCache.get(e);if(t==null){const i=e.bindables,r=on();let s,o,a=!1,l,c;for(o in i){if(s=i[o],c=s.attribute,s.primary===!0){if(a)throw Ee(714,e);a=!0,l=s}else!a&&l==null&&(l=s);r[c]=cc.create(o,s)}s==null&&e.type==="custom-attribute"&&(l=r.value=cc.create("value",{mode:e.defaultBindingMode??JO})),this._bindableCache.set(e,t=new cre(r,i,l??null))}return t}}_8.register=Bw(wz);class p2{constructor(){this._element=on(),this._attr=on()}}const bx=on();class sw{static forNs(e){return bx[e]??(bx[e]=new sw(e))}constructor(e){this.ns=e,this.type=nh|ml}getValue(e,t){return e.getAttributeNS(this.ns,t)}setValue(e,t,i){e==null?t.removeAttributeNS(this.ns,i):t.setAttributeNS(this.ns,i,e)}}a1(sw);class R8{constructor(){this.type=nh|ml}getValue(e,t){return e.getAttribute(t)}setValue(e,t,i){e==null?t.removeAttribute(i):t.setAttribute(i,e)}}a1(R8);const bS=new R8;class Nd{static _getSelectedOptions(e){const t=[];if(e.length===0)return t;const i=e.length;let r=0,s;for(;i>r;)s=e[r],s.selected&&(t[t.length]=_d.call(s,"model")?s.model:s.value),++r;return t}static _defaultMatcher(e,t){return e===t}constructor(e,t,i,r){this.type=nh|tk|ml,this._value=void 0,this._oldValue=void 0,this._hasChanges=!1,this._arrayObserver=void 0,this._nodeObserver=void 0,this._observing=!1,this._listened=!1,this._el=e,this._observerLocator=r,this._config=i}getValue(){return this._observing?this._value:this._el.multiple?Nd._getSelectedOptions(this._el.options):this._el.value}setValue(e){this._oldValue=this._value,this._value=e,this._hasChanges=e!==this._oldValue,this._observeArray(e instanceof Array?e:null),this._flushChanges()}_flushChanges(){this._hasChanges&&(this._hasChanges=!1,this.syncOptions())}handleCollectionChange(){this.syncOptions()}syncOptions(){const e=this._value,t=this._el,i=ai(e),r=t.matcher??Nd._defaultMatcher,s=t.options;let o=s.length;for(;o-- >0;){const a=s[o],l=_d.call(a,"model")?a.model:a.value;if(i){a.selected=e.findIndex(c=>!!r(l,c))!==-1;continue}a.selected=!!r(l,e)}}syncValue(){const e=this._el,t=e.options,i=t.length,r=this._value;let s=0;if(e.multiple){if(!(r instanceof Array))return!0;let l;const c=e.matcher||Nd._defaultMatcher,u=[];for(;s<i;)l=t[s],l.selected&&u.push(_d.call(l,"model")?l.model:l.value),++s;let h;for(s=0;s<r.length;)h=r[s],u.findIndex(d=>!!c(h,d))===-1?r.splice(s,1):++s;for(s=0;s<u.length;)h=u[s],r.findIndex(d=>!!c(h,d))===-1&&r.push(h),++s;return!1}let o=null,a;for(;s<i;){if(a=t[s],a.selected){o=_d.call(a,"model")?a.model:a.value;break}++s}return this._oldValue=this._value,this._value=o,!0}_start(){(this._nodeObserver=Xz(this._el,this._handleNodeChange.bind(this))).observe(this._el,{childList:!0,subtree:!0,characterData:!0}),this._observeArray(this._value instanceof Array?this._value:null),this._observing=!0}_stop(){var e;this._nodeObserver.disconnect(),(e=this._arrayObserver)==null||e.unsubscribe(this),this._nodeObserver=this._arrayObserver=void 0,this._observing=!1}_observeArray(e){var t;if((t=this._arrayObserver)==null||t.unsubscribe(this),this._arrayObserver=void 0,e!=null){if(!this._el.multiple)throw Ee(654);(this._arrayObserver=this._observerLocator.getArrayObserver(e)).subscribe(this)}}handleEvent(){this.syncValue()&&this._flush()}_handleNodeChange(e){this.syncOptions(),this.syncValue()&&this._flush()}_flush(){const e=this._oldValue;this._oldValue=this._value,this.subs.notify(this._value,e)}}uk(Nd),oo(Nd,null);const ure="--";class E8{constructor(e){this.obj=e,this.type=nh|ml,this._value="",this._oldValue="",this.styles={},this.version=0,this._hasChanges=!1}getValue(){return this.obj.style.cssText}setValue(e){this._value=e,this._hasChanges=e!==this._oldValue,this._flushChanges()}_getStyleTuplesFromString(e){const t=[],i=/url\([^)]+$/;let r=0,s="",o,a,l,c;for(;r<e.length;){if(o=e.indexOf(";",r),o===-1&&(o=e.length),s+=e.substring(r,o),r=o+1,i.test(s)){s+=";";continue}a=s.indexOf(":"),l=s.substring(0,a).trim(),c=s.substring(a+1).trim(),t.push([l,c]),s=""}return t}_getStyleTuplesFromObject(e){let t,i;const r=[];for(i in e)if(t=e[i],t!=null){if(St(t)){if(i.startsWith(ure)){r.push([i,t]);continue}r.push([n6(i),t]);continue}r.push(...this._getStyleTuples(t))}return r}_getStyleTuplesFromArray(e){const t=e.length;if(t>0){const i=[];let r=0;for(;t>r;++r)i.push(...this._getStyleTuples(e[r]));return i}return bt}_getStyleTuples(e){return St(e)?this._getStyleTuplesFromString(e):e instanceof Array?this._getStyleTuplesFromArray(e):e instanceof Object?this._getStyleTuplesFromObject(e):bt}_flushChanges(){if(this._hasChanges){this._hasChanges=!1;const e=this._value,t=this.styles,i=this._getStyleTuples(e);let r,s=this.version;this._oldValue=e;let o,a,l,c=0;const u=i.length;for(;c<u;++c)o=i[c],a=o[0],l=o[1],this.setProperty(a,l),t[a]=s;if(this.styles=t,this.version+=1,s===0)return;s-=1;for(r in t)!_d.call(t,r)||t[r]!==s||this.obj.style.removeProperty(r)}}setProperty(e,t){let i="";t!=null&&kt(t.indexOf)&&t.includes("!important")&&(i="important",t=t.replace("!important","")),this.obj.style.setProperty(e,t,i)}bind(){this._value=this._oldValue=this.obj.style.cssText}}a1(E8);class aP{constructor(e,t,i){this.type=nh|tk|ml,this._value="",this._oldValue="",this._hasChanges=!1,this._listened=!1,this._el=e,this._key=t,this._config=i}getValue(){return this._value}setValue(e){ea(e,this._value)||(this._oldValue=this._value,this._value=e,this._hasChanges=!0,this._config.readonly||this._flushChanges())}_flushChanges(){this._hasChanges&&(this._hasChanges=!1,this._el[this._key]=this._value??this._config.default,this._flush())}handleEvent(){this._oldValue=this._value,this._value=this._el[this._key],this._oldValue!==this._value&&(this._hasChanges=!1,this._flush())}_start(){this._value=this._oldValue=this._el[this._key]}_flush(){const e=this._oldValue;this._oldValue=this._value,this.subs.notify(this._value,e)}}uk(aP),oo(aP,null);const m2=(()=>{const n="http://www.w3.org/1999/xlink",e="http://www.w3.org/XML/1998/namespace",t="http://www.w3.org/2000/xmlns/";return kz(on(),{"xlink:actuate":["actuate",n],"xlink:arcrole":["arcrole",n],"xlink:href":["href",n],"xlink:role":["role",n],"xlink:show":["show",n],"xlink:title":["title",n],"xlink:type":["type",n],"xml:lang":["lang",e],"xml:space":["space",e],xmlns:["xmlns",t],"xmlns:xlink":["xlink",t]})})(),x8=new xz;x8.type=nh|ml;class hk{constructor(){this.allowDirtyCheck=!0,this._events=on(),this._globalEvents=on(),this._overrides=on(),this._globalOverrides=on(),this._locator=ve(XQ),this._platform=ve(Fi),this._dirtyChecker=ve(YO),this.svg=ve(C8);const e=["change","input"],t={events:e,default:""};this.useConfig({INPUT:{value:t,valueAsNumber:{events:e,default:0},checked:{type:lP,events:e},files:{events:e,readonly:!0}},SELECT:{value:{type:Nd,events:["change"],default:""}},TEXTAREA:{value:t}});const i={events:["change","input","blur","keyup","paste"],default:""},r={events:["scroll"],default:0};this.useConfigGlobal({scrollTop:r,scrollLeft:r,textContent:i,innerHTML:i}),this.overrideAccessorGlobal("css","style","class"),this.overrideAccessor({INPUT:["value","checked","model"],SELECT:["value"],TEXTAREA:["value"]})}handles(e,t){return e instanceof this._platform.Node}useConfig(e,t,i){const r=this._events;let s;if(St(e))s=r[e]??(r[e]=on()),s[t]==null?s[t]=i:Wy(e,t);else for(const o in e){s=r[o]??(r[o]=on());const a=e[o];for(t in a)s[t]==null?s[t]=a[t]:Wy(o,t)}}useConfigGlobal(e,t){const i=this._globalEvents;if(typeof e=="object")for(const r in e)i[r]==null?i[r]=e[r]:Wy("*",r);else i[e]==null?i[e]=t:Wy("*",e)}getAccessor(e,t,i){if(t in this._globalOverrides||t in(this._overrides[e.tagName]??l6))return this.getObserver(e,t,i);switch(t){case"src":case"href":case"role":case"minLength":case"maxLength":case"placeholder":case"size":case"pattern":case"title":case"popovertarget":case"popovertargetaction":return(t==="popovertarget"||t==="popovertargetaction")&&e.nodeName!=="INPUT"&&e.nodeName!=="BUTTON"&&console.warn(`[aurelia] Popover API are only valid on <input> or <button>. Detected ${t} on <${e.nodeName.toLowerCase()}>`),bS;default:{const r=m2[t];return r!==void 0?sw.forNs(r[1]):QA(e,t,this.svg)?bS:x8}}}overrideAccessor(e,t){var r,s;let i;if(St(e))i=(r=this._overrides)[e]??(r[e]=on()),i[t]=!0;else for(const o in e)for(const a of e[o])i=(s=this._overrides)[o]??(s[o]=on()),i[a]=!0}overrideAccessorGlobal(...e){for(const t of e)this._globalOverrides[t]=!0}getNodeObserverConfig(e,t){var i;return((i=this._events[e.tagName])==null?void 0:i[t])??this._globalEvents[t]}getNodeObserver(e,t,i){var o;const r=((o=this._events[e.tagName])==null?void 0:o[t])??this._globalEvents[t];let s;return r!=null?(s=new(r.type??aP)(e,t,r,i,this._locator),s.doNotCache||(Tz(e)[t]=s),s):null}getObserver(e,t,i){switch(t){case"class":return new l1(e);case"css":case"style":return new E8(e)}const r=this.getNodeObserver(e,t,i);if(r!=null)return r;const s=m2[t];if(s!==void 0)return sw.forNs(s[1]);if(QA(e,t,this.svg))return bS;if(t in e.constructor.prototype){if(this.allowDirtyCheck)return this._dirtyChecker.createProperty(e,t);throw Ee(652,t)}else return new KO(e,t)}}hk.register=Bw(qO);function hre(n,e){if(n instanceof Array)return e.getArrayObserver(n);if(n instanceof Map)return e.getMapObserver(n);if(n instanceof Set)return e.getSetObserver(n)}function Wy(n,e){throw Ee(653,n,e)}function b2(n,e){return n===e}class lP{constructor(e,t,i,r){this.type=nh|tk|ml,this._value=void 0,this._oldValue=void 0,this._collectionObserver=void 0,this._valueObserver=void 0,this._listened=!1,this._el=e,this.oL=r,this._config=i}getValue(){return this._value}setValue(e){const t=this._value;e!==t&&(this._value=e,this._oldValue=t,this._observe(),this._synchronizeElement(),this._flush())}handleCollectionChange(){this._synchronizeElement()}handleChange(e,t){this._synchronizeElement()}_synchronizeElement(){const e=this._value,t=this._el,i=_d.call(t,"model")?t.model:t.value,r=t.type==="radio",s=t.matcher!==void 0?t.matcher:b2;if(r)t.checked=!!s(e,i);else if(e===!0)t.checked=!0;else{let o=!1;if(ai(e))o=e.findIndex(a=>!!s(a,i))!==-1;else if(e instanceof Set){for(const a of e)if(s(a,i)){o=!0;break}}else if(e instanceof Map)for(const a of e){const l=a[0],c=a[1];if(s(l,i)&&c===!0){o=!0;break}}t.checked=o}}handleEvent(){let e=this._oldValue=this._value;const t=this._el,i=_d.call(t,"model")?t.model:t.value,r=t.checked,s=t.matcher!==void 0?t.matcher:b2;if(t.type==="checkbox"){if(ai(e)){const o=e.findIndex(a=>!!s(a,i));r&&o===-1?e.push(i):!r&&o!==-1&&e.splice(o,1);return}else if(e instanceof Set){const o={};let a=o;for(const l of e)if(s(l,i)===!0){a=l;break}r&&a===o?e.add(i):!r&&a!==o&&e.delete(a);return}else if(e instanceof Map){let o;for(const a of e){const l=a[0];if(s(l,i)===!0){o=l;break}}e.set(o,r);return}e=r}else if(r)e=i;else return;this._value=e,this._flush()}_start(){this._observe()}_stop(){var e,t;this._value=this._oldValue=void 0,(e=this._collectionObserver)==null||e.unsubscribe(this),(t=this._valueObserver)==null||t.unsubscribe(this),this._collectionObserver=this._valueObserver=void 0}_flush(){vx=this._oldValue,this._oldValue=this._value,this.subs.notify(this._value,vx),vx=void 0}_observe(){var t,i,r,s,o;const e=this._el;(r=this._valueObserver??(this._valueObserver=((t=e.$observers)==null?void 0:t.model)??((i=e.$observers)==null?void 0:i.value)))==null||r.subscribe(this),(s=this._collectionObserver)==null||s.unsubscribe(this),this._collectionObserver=void 0,e.type==="checkbox"&&((o=this._collectionObserver=hre(this._value,this.oL))==null||o.subscribe(this))}}uk(lP),oo(lP,null);let vx;class T8{bind(e,t){if(!(t instanceof Pr))throw Ee(9994,t);t.useTargetObserver(bS)}}T8.$au={type:eo,name:"attr"};class M8{bind(e,t){if(!("handleEvent"in t))throw Ee(801);t.self=!0}unbind(e,t){t.self=!1}}M8.$au={type:eo,name:"self"};class A8{constructor(){this._observerLocator=ve(Up),this._nodeObserverLocator=ve(qO)}bind(e,t,...i){if(!(this._nodeObserverLocator instanceof hk))throw Ee(9993);if(i.length===0)throw Ee(802);if(!(t instanceof Pr)||!(t.mode&xc))throw Ee(803);const r=this._nodeObserverLocator.getNodeObserverConfig(t.target,t.targetProperty);if(r==null)throw Ee(9992,t);const s=this._nodeObserverLocator.getNodeObserver(t.target,t.targetProperty,this._observerLocator);s.useConfig({readonly:r.readonly,default:r.default,events:i}),t.useTargetObserver(s)}}A8.$au={type:eo,name:"updateTrigger"};class b_{constructor(){this.elseFactory=void 0,this.elseView=void 0,this.ifView=void 0,this.view=void 0,this.value=!1,this.cache=!0,this.pending=void 0,this._wantsDeactivate=!1,this._swapId=0,this._ifFactory=ve(Ts),this._location=ve(Or)}attaching(e,t){return this._swap(this.value)}detaching(e,t){return this._wantsDeactivate=!0,it(this.pending,()=>{var i;this._wantsDeactivate=!1,this.pending=void 0,(i=this.view)==null||i.deactivate(e,this.$controller)})}valueChanged(e,t){if(this.$controller.isActive&&(e=!!e,t=!!t,e!==t))return this._swap(e)}_swap(e){const t=this.view,i=this.$controller,r=this._swapId++,s=()=>!this._wantsDeactivate&&this._swapId===r+1;let o;return it(this.pending,()=>this.pending=it(t==null?void 0:t.deactivate(t,i),()=>{var a;if(s()&&(e?o=this.view=this.ifView=this.cache&&this.ifView!=null?this.ifView:this._ifFactory.create():o=this.view=this.elseView=this.cache&&this.elseView!=null?this.elseView:(a=this.elseFactory)==null?void 0:a.create(),o!=null))return o.setLocation(this._location),it(o.activate(o,i,i.scope),()=>{s()&&(this.pending=void 0)})}))}dispose(){var e,t;(e=this.ifView)==null||e.dispose(),(t=this.elseView)==null||t.dispose(),this.ifView=this.elseView=this.view=void 0}accept(e){var t;if(((t=this.view)==null?void 0:t.accept(e))===!0)return!0}}b_.$au={type:fr,name:"if",isTemplateController:!0,bindables:{value:!0,cache:{set:n=>n===""||!!n&&n!=="false"}}};class P8{constructor(){this._factory=ve(Ts)}link(e,t,i,r){const s=e.children,o=s[s.length-1];if(o instanceof b_)o.elseFactory=this._factory;else if(o.viewModel instanceof b_)o.viewModel.elseFactory=this._factory;else throw Ee(810)}}P8.$au={type:"custom-attribute",name:"else",isTemplateController:!0};function dre(n){n.dispose()}const fre=["BindingBehavior","ValueConverter"];class I8{constructor(){this.views=[],this.key=null,this._oldViews=[],this._scopes=[],this._oldScopes=[],this._scopeMap=new Map,this._observer=void 0,this._observingInnerItems=!1,this._reevaluating=!1,this._innerItemsExpression=null,this._normalizedItems=void 0,this._hasDestructuredLocal=!1,this._location=ve(Or),this._parent=ve(u1),this._factory=ve(Ts),this._resolver=ve(pre);const t=ve(jp).props[0].props[0];if(t!==void 0){const{to:i,value:r,command:s}=t;if(i==="key")if(s===null)this.key=r;else if(s==="bind")this.key=ve(Vp).parse(r,sl);else throw Ee(775,s);else throw Ee(776,i)}}binding(e,t){const i=this._parent.bindings,r=i.length;let s,o,a=0;for(;r>a;++a)if(s=i[a],s.target===this&&s.targetProperty==="items"){o=this.forOf=s.ast,this._forOfBinding=s;let c=o.iterable;for(;c!=null&&fre.includes(c.$kind);)c=c.expression,this._observingInnerItems=!0;this._innerItemsExpression=c;break}this._refreshCollectionObserver();const l=o.declaration;(this._hasDestructuredLocal=l.$kind==="ArrayDestructuring"||l.$kind==="ObjectDestructuring")||(this.local=Ln(l,this.$controller.scope,s,null))}attaching(e,t){return this._normalizeToArray(),this._createScopes(),this._activateAllViews(e,this._normalizedItems??bt)}detaching(e,t){return this._refreshCollectionObserver(),this._deactivateAllViews(e)}unbinding(e,t){this._scopeMap.clear()}itemsChanged(){this.$controller.isActive&&(this._refreshCollectionObserver(),this._normalizeToArray(),this._createScopes(),this._applyIndexMap(void 0))}handleCollectionChange(e,t){const i=this.$controller;if(i.isActive){if(this._observingInnerItems){if(this._reevaluating)return;this._reevaluating=!0,this.items=Ln(this.forOf.iterable,i.scope,this._forOfBinding,null),this._reevaluating=!1;return}this._normalizeToArray(),this._createScopes(),this._applyIndexMap(t)}}_applyIndexMap(e){const t=this.views;this._oldViews=t.slice();const i=t.length,r=this.key,s=r!==null,o=this._oldScopes,a=this._scopes;if(s||e===void 0){const l=this.local,u=this._normalizedItems.length,d=this.forOf.declaration,f=this._forOfBinding,g=this._hasDestructuredLocal;e=qd(u);let p=0;if(i===0)for(;p<u;++p)e[p]=-2;else if(u===0)for(p=0;p<i;++p)e.deletedIndices.push(p),e.deletedItems.push(vS(g,d,o[p],f,l));else if(s){const m=Array(i);for(p=0;p<i;++p)m[p]=R2(g,r,d,o[p],f,l);const v=Array(i);for(p=0;p<u;++p)v[p]=R2(g,r,d,a[p],f,l);for(p=0;p<u;++p)m.includes(v[p])?e[p]=m.indexOf(v[p]):e[p]=-2;for(p=0;p<i;++p)v.includes(m[p])||(e.deletedIndices.push(p),e.deletedItems.push(vS(g,d,o[p],f,l)))}else{for(p=0;p<u;++p)o.includes(a[p])?e[p]=o.indexOf(a[p]):e[p]=-2;for(p=0;p<i;++p)a.includes(o[p])||(e.deletedIndices.push(p),e.deletedItems.push(vS(g,d,o[p],f,l)))}}if(e.deletedIndices.length>0){const l=it(this._deactivateAndRemoveViewsByKey(e),()=>this._createAndActivateAndSortViewsByKey(e));fi(l)&&l.catch(JA)}else this._createAndActivateAndSortViewsByKey(e)}_refreshCollectionObserver(){var o,a;const e=this.$controller.scope;let t=this._innerItems,i=this._observingInnerItems,r;i&&(t=this._innerItems=Ln(this._innerItemsExpression,e,this._forOfBinding,null)??null,i=this._observingInnerItems=!ea(this.items,t));const s=this._observer;if(this.$controller.isActive){const l=i?t:this.items;r=this._observer=(a=(o=this._resolver.resolve(l)).getObserver)==null?void 0:a.call(o,l),s!==r&&(s==null||s.unsubscribe(this),r==null||r.subscribe(this))}else s==null||s.unsubscribe(this),this._observer=void 0}_createScopes(){const e=this._scopes;this._oldScopes=e.slice();const t=this._normalizedItems,i=t.length,r=this._scopes=Array(t.length),s=this._scopeMap,o=new Map,a=this.$controller.scope,l=this._forOfBinding,c=this.forOf,u=this.local,h=this._hasDestructuredLocal;for(let d=0;d<i;++d)r[d]=yre(s,o,t[d],c,a,l,u,h);s.clear(),this._scopeMap=o}_normalizeToArray(){const e=this.items;if(ai(e)){this._normalizedItems=e.slice(0);return}const t=[];this._resolver.resolve(e).iterate(e,(i,r)=>{t[r]=i}),this._normalizedItems=t}_activateAllViews(e,t){let i,r,s,o;const{$controller:a,_factory:l,_location:c,_scopes:u}=this,h=t.length,d=this.views=Array(h);for(let f=0;f<h;++f)s=d[f]=l.create().setLocation(c),s.nodes.unlink(),o=u[f],zy(o.overrideContext,f,h),r=s.activate(e??s,a,o),fi(r)&&(i??(i=[])).push(r);if(i!==void 0)return i.length===1?i[0]:Promise.all(i)}_deactivateAllViews(e){let t,i,r,s=0;const{views:o,$controller:a}=this,l=o.length;for(;l>s;++s)r=o[s],r.release(),i=r.deactivate(e??r,a),fi(i)&&(t??(t=[])).push(i);if(t!==void 0)return t.length===1?t[0]:Promise.all(t)}_deactivateAndRemoveViewsByKey(e){let t,i,r;const{$controller:s,views:o}=this,a=e.deletedIndices.slice().sort(Sre),l=a.length;let c=0;for(;l>c;++c)r=o[a[c]],r.release(),i=r.deactivate(r,s),fi(i)&&(t??(t=[])).push(i);for(c=0;l>c;++c)o.splice(a[c]-c,1);if(t!==void 0)return t.length===1?t[0]:Promise.all(t)}_createAndActivateAndSortViewsByKey(e){let t,i,r,s=0;const{$controller:o,_factory:a,_location:l,views:c,_scopes:u,_oldViews:h}=this,d=e.length;for(;d>s;++s)e[s]===-2&&(r=a.create(),c.splice(s,0,r));if(c.length!==d)throw Ee(814,[c.length,d]);let f=0;for(s=0;s<e.length;++s)(f=e[s])!==-2&&(c[s]=h[f]);const g=gre(e),p=g.length;let m,v=p-1;for(s=d-1;s>=0;--s)r=c[s],m=c[s+1],r.nodes.link((m==null?void 0:m.nodes)??l),e[s]===-2?(r.setLocation(l),zy(u[s].overrideContext,s,d),i=r.activate(r,o,u[s]),fi(i)&&(t??(t=[])).push(i)):v<0||p===1||s!==g[v]?(zy(r.scope.overrideContext,s,d),r.nodes.insertBefore(r.location)):(zy(r.scope.overrideContext,s,d),--v);if(t!==void 0)return t.length===1?t[0]:Promise.all(t)}dispose(){this.views.forEach(dre),this.views=void 0}accept(e){const{views:t}=this;if(t!==void 0){for(let i=0,r=t.length;i<r;++i)if(t[i].accept(e)===!0)return!0}}}I8.$au={type:fr,name:"repeat",isTemplateController:!0,bindables:["items"]};let v_=16,Tl=new Int32Array(v_),jy=new Int32Array(v_);function gre(n){const e=n.length;e>v_&&(v_=e,Tl=new Int32Array(e),jy=new Int32Array(e));let t=0,i=0,r=0,s=0,o=0,a=0,l=0,c=0;for(;s<e;s++)if(i=n[s],i!==-2){if(o=Tl[t],r=n[o],r!==-2&&r<i){jy[s]=o,Tl[++t]=s;continue}for(a=0,l=t;a<l;)c=a+l>>1,r=n[Tl[c]],r!==-2&&r<i?a=c+1:l=c;r=n[Tl[a]],(i<r||r===-2)&&(a>0&&(jy[s]=Tl[a-1]),Tl[a]=s)}s=++t;const u=new Int32Array(s);for(i=Tl[t-1];t-- >0;)u[t]=i,i=jy[i];for(;s-- >0;)Tl[s]=0;return u}class v2{get $odd(){return!this.$even}get $even(){return this.$index%2===0}get $first(){return this.$index===0}get $middle(){return!this.$first&&!this.$last}get $last(){return this.$index===this.$length-1}constructor(e=0,t=1){this.$index=e,this.$length=t}}const zy=(n,e,t)=>{n.$index=e,n.$length=t},pre=ln("IRepeatableHandlerResolver",n=>n.singleton(mre));class mre{constructor(){this._handlers=ve(AO(bre))}resolve(e){if(w2.handles(e))return w2;if(y2.handles(e))return y2;if(C2.handles(e))return C2;if(S2.handles(e))return S2;if(_2.handles(e))return _2;const t=this._handlers.find(i=>i.handles(e));return t!==void 0?t:vre}}const bre=ln("IRepeatableHandler"),w2={handles:ai,getObserver:XO,iterate(n,e){const t=n.length;let i=0;for(;i<t;++i)e(n[i],i,n)}},y2={handles:$p,getObserver:XO,iterate(n,e){let t=0,i;for(i of n.keys())e(i,t++,n)}},C2={handles:Ou,getObserver:XO,iterate(n,e){let t=0,i;for(i of n.entries())e(i,t++,n)}},S2={handles:PQ,iterate(n,e){let t=0;for(;t<n;++t)e(t,t,n)}},_2={handles:n=>n==null,iterate(){}},vre={handles(n){return!1},iterate(n,e){throw Ee(777,n)}},wre=(n,e,t,i,r,s)=>{n?iw(e,t,i,s):t.bindingContext[r]=s},vS=(n,e,t,i,r)=>n?Ln(e,t,i,null):t.bindingContext[r],R2=(n,e,t,i,r,s)=>typeof e=="string"?vS(n,t,i,r,s)[e]:Ln(e,i,r,null),yre=(n,e,t,i,r,s,o,a)=>{let l=n.get(t);if(l===void 0?l=Cre(t,i,r,s,o,a):l instanceof pi?n.delete(t):l.length===1?(l=l[0],n.delete(t)):l=l.shift(),e.has(t)){const c=e.get(t);c instanceof pi?e.set(t,[c,l]):c.push(l)}else e.set(t,l);return wre(a,i.declaration,l,s,o,t),l},Cre=(n,e,t,i,r,s)=>{if(s){const o=pi.fromParent(t,new U$,new v2);iw(e.declaration,o,i,n)}return pi.fromParent(t,new U$(r,n),new v2)},Sre=(n,e)=>n-e;class O8{constructor(){this.view=ve(Ts).create().setLocation(ve(Or))}valueChanged(e,t){const i=this.$controller,r=this.view.bindings;let s,o=0,a=0;if(i.isActive&&r!=null)for(s=pi.fromParent(i.scope,e===void 0?{}:e),a=r.length;a>o;++o)r[o].bind(s)}attaching(e,t){const{$controller:i,value:r}=this,s=pi.fromParent(i.scope,r===void 0?{}:r);return this.view.activate(e,i,s)}detaching(e,t){return this.view.deactivate(e,this.$controller)}dispose(){this.view.dispose(),this.view=void 0}accept(e){var t;if(((t=this.view)==null?void 0:t.accept(e))===!0)return!0}}O8.$au={type:fr,name:"with",isTemplateController:!0,bindables:["value"]};class dk{constructor(){this.cases=[],this.activeCases=[],this.promise=void 0,this._factory=ve(Ts),this._location=ve(Or)}link(e,t,i,r){this.view=this._factory.create(this.$controller).setLocation(this._location)}attaching(e,t){const i=this.view,r=this.$controller;return this.queue(()=>i.activate(e,r,r.scope)),this.queue(()=>this.swap(e,this.value)),this.promise}detaching(e,t){return this.queue(()=>this.view.deactivate(e,this.$controller)),this.promise}dispose(){var e;(e=this.view)==null||e.dispose(),this.view=void 0}valueChanged(e,t){this.$controller.isActive&&this.queue(()=>this.swap(null,this.value))}caseChanged(e){this.queue(()=>this._handleCaseChange(e))}_handleCaseChange(e){const t=e.isMatch(this.value),i=this.activeCases,r=i.length;if(!t)return r>0&&i[0].id===e.id?this._clearActiveCases(null):void 0;if(r>0&&i[0].id<e.id)return;const s=[];let o=e.fallThrough;if(!o)s.push(e);else{const a=this.cases,l=a.indexOf(e);for(let c=l,u=a.length;c<u&&o;c++){const h=a[c];s.push(h),o=h.fallThrough}}return it(this._clearActiveCases(null,s),()=>(this.activeCases=s,this._activateCases(null)))}swap(e,t){const i=[];let r=!1;for(const o of this.cases)if((r||o.isMatch(t))&&(i.push(o),r=o.fallThrough),i.length>0&&!r)break;const s=this.defaultCase;return i.length===0&&s!==void 0&&i.push(s),it(this.activeCases.length>0?this._clearActiveCases(e,i):void 0,()=>{if(this.activeCases=i,i.length!==0)return this._activateCases(e)})}_activateCases(e){const t=this.$controller;if(!t.isActive)return;const i=this.activeCases,r=i.length;if(r===0)return;const s=t.scope;return r===1?i[0].activate(e,s):Ri(...i.map(o=>o.activate(e,s)))}_clearActiveCases(e,t=[]){const i=this.activeCases,r=i.length;if(r!==0){if(r===1){const s=i[0];return t.includes(s)?void 0:(i.length=0,s.deactivate(e))}return it(Ri(...i.reduce((s,o)=>(t.includes(o)||s.push(o.deactivate(e)),s),[])),()=>{i.length=0})}}queue(e){const t=this.promise;let i;i=this.promise=it(it(t,e),()=>{this.promise===i&&(this.promise=void 0)})}accept(e){if(this.$controller.accept(e)===!0||this.activeCases.some(t=>t.accept(e)))return!0}}dk.$au={type:fr,name:"switch",isTemplateController:!0,bindables:["value"]};let _re=0;const k8=["value",{name:"fallThrough",mode:JR,set(n){switch(n){case"true":return!0;case"false":return!1;default:return!!n}}}];class fk{constructor(){this.id=++_re,this.fallThrough=!1,this.view=void 0,this._factory=ve(Ts),this._locator=ve(Up),this._location=ve(Or),this._logger=ve(Ud).scopeTo(`${this.constructor.name}-#${this.id}`)}link(e,t,i,r){const s=e.parent,o=s==null?void 0:s.viewModel;if(o instanceof dk)this.$switch=o,this.linkToSwitch(o);else throw Ee(815)}detaching(e,t){return this.deactivate(e)}isMatch(e){this._logger.debug("isMatch()");const t=this.value;return ai(t)?(this._observer===void 0&&(this._observer=this._observeCollection(t)),t.includes(e)):t===e}valueChanged(e,t){var i;ai(e)?((i=this._observer)==null||i.unsubscribe(this),this._observer=this._observeCollection(e)):this._observer!==void 0&&this._observer.unsubscribe(this),this.$switch.caseChanged(this)}handleCollectionChange(){this.$switch.caseChanged(this)}activate(e,t){let i=this.view;if(i===void 0&&(i=this.view=this._factory.create().setLocation(this._location)),!i.isActive)return i.activate(e??i,this.$controller,t)}deactivate(e){const t=this.view;if(!(t===void 0||!t.isActive))return t.deactivate(e??t,this.$controller)}dispose(){var e,t;(e=this._observer)==null||e.unsubscribe(this),(t=this.view)==null||t.dispose(),this.view=void 0}linkToSwitch(e){e.cases.push(this)}_observeCollection(e){const t=this._locator.getArrayObserver(e);return t.subscribe(this),t}accept(e){var t;return this.$controller.accept(e)===!0?!0:(t=this.view)==null?void 0:t.accept(e)}}nk({name:"case",bindables:k8,isTemplateController:!0},fk);class D8 extends fk{linkToSwitch(e){if(e.defaultCase!==void 0)throw Ee(816);e.defaultCase=this}}nk({name:"default-case",bindables:k8,isTemplateController:!0},D8);var L8,N8,H8;class gk{constructor(){this.preSettledTask=null,this.postSettledTask=null,this._factory=ve(Ts),this._location=ve(Or),this._platform=ve(Fi),this.logger=ve(Ud).scopeTo("promise.resolve")}link(e,t,i,r){this.view=this._factory.create(this.$controller).setLocation(this._location)}attaching(e,t){const i=this.view,r=this.$controller;return it(i.activate(e,r,this.viewScope=pi.fromParent(r.scope,{})),()=>this.swap(e))}valueChanged(e,t){this.$controller.isActive&&this.swap(null)}swap(e){var u,h;const t=this.value;if(!fi(t)){this.logger.warn(`The value '${Zd(t)}' is not a promise. No change will be done.`);return}const i=this._platform.domQueue,r=this.fulfilled,s=this.rejected,o=this.pending,a=this.viewScope;let l;const c=()=>{Ri(l=(this.preSettledTask=i.queueTask(()=>Ri(r==null?void 0:r.deactivate(e),s==null?void 0:s.deactivate(e),o==null?void 0:o.activate(e,a)))).result.catch(d=>{if(!(d instanceof ZA))throw d}),t.then(d=>{if(this.value!==t)return;const f=()=>{this.postSettlePromise=(this.postSettledTask=i.queueTask(()=>Ri(o==null?void 0:o.deactivate(e),s==null?void 0:s.deactivate(e),r==null?void 0:r.activate(e,a,d)))).result};this.preSettledTask.status===ox?l.then(f):(this.preSettledTask.cancel(),f())},d=>{if(this.value!==t)return;const f=()=>{this.postSettlePromise=(this.postSettledTask=i.queueTask(()=>Ri(o==null?void 0:o.deactivate(e),r==null?void 0:r.deactivate(e),s==null?void 0:s.activate(e,a,d)))).result};this.preSettledTask.status===ox?l.then(f):(this.preSettledTask.cancel(),f())}))};((u=this.postSettledTask)==null?void 0:u.status)===ox?this.postSettlePromise.then(c):((h=this.postSettledTask)==null||h.cancel(),c())}detaching(e,t){var i,r;return(i=this.preSettledTask)==null||i.cancel(),(r=this.postSettledTask)==null||r.cancel(),this.preSettledTask=this.postSettledTask=null,this.view.deactivate(e,this.$controller)}dispose(){var e;(e=this.view)==null||e.dispose(),this.view=void 0}}gk.$au={type:fr,name:"promise",isTemplateController:!0,bindables:["value"]};class $8{constructor(){this.view=void 0,this._factory=ve(Ts),this._location=ve(Or)}link(e,t,i,r){pk(e).pending=this}activate(e,t){let i=this.view;if(i===void 0&&(i=this.view=this._factory.create().setLocation(this._location)),!i.isActive)return i.activate(i,this.$controller,t)}deactivate(e){const t=this.view;if(!(t===void 0||!t.isActive))return t.deactivate(t,this.$controller)}detaching(e){return this.deactivate(e)}dispose(){var e;(e=this.view)==null||e.dispose(),this.view=void 0}}$8.$au={type:fr,name:"pending",isTemplateController:!0,bindables:{value:{mode:ei}}};class F8{constructor(){this.view=void 0,this._factory=ve(Ts),this._location=ve(Or)}link(e,t,i,r){pk(e).fulfilled=this}activate(e,t,i){this.value=i;let r=this.view;if(r===void 0&&(r=this.view=this._factory.create().setLocation(this._location)),!r.isActive)return r.activate(r,this.$controller,t)}deactivate(e){const t=this.view;if(!(t===void 0||!t.isActive))return t.deactivate(t,this.$controller)}detaching(e,t){return this.deactivate(e)}dispose(){var e;(e=this.view)==null||e.dispose(),this.view=void 0}}F8.$au={type:fr,name:"then",isTemplateController:!0,bindables:{value:{mode:xc}}};class B8{constructor(){this.view=void 0,this._factory=ve(Ts),this._location=ve(Or)}link(e,t,i,r){pk(e).rejected=this}activate(e,t,i){this.value=i;let r=this.view;if(r===void 0&&(r=this.view=this._factory.create().setLocation(this._location)),!r.isActive)return r.activate(r,this.$controller,t)}deactivate(e){const t=this.view;if(!(t===void 0||!t.isActive))return t.deactivate(t,this.$controller)}detaching(e,t){return this.deactivate(e)}dispose(){var e;(e=this.view)==null||e.dispose(),this.view=void 0}}B8.$au={type:fr,name:"catch",isTemplateController:!0,bindables:{value:{mode:xc}}};function pk(n){const e=n.parent,t=e==null?void 0:e.viewModel;if(t instanceof gk)return t;throw Ee(813)}class cP{"promise.resolve"(e,t){return new _s(e,t,"promise","bind")}}L8=Symbol.metadata;cP[L8]={[dl]:Ju.create([{pattern:"promise.resolve",symbols:""}],cP)};class uP{then(e,t){return new _s(e,t,"then","from-view")}}N8=Symbol.metadata;uP[N8]={[dl]:Ju.create([{pattern:"then",symbols:""}],uP)};class hP{catch(e,t){return new _s(e,t,"catch","from-view")}}H8=Symbol.metadata;hP[H8]={[dl]:Ju.create([{pattern:"catch",symbols:""}],hP)};class V8{constructor(){this._needsApply=!1,this._element=ve(h1),this._platform=ve(Fi)}binding(){this.valueChanged()}valueChanged(){this.$controller.isActive?this._apply():this._needsApply=!0}attached(){this._needsApply&&(this._needsApply=!1,this._apply()),this._element.addEventListener("focus",this),this._element.addEventListener("blur",this)}detaching(){const e=this._element;e.removeEventListener("focus",this),e.removeEventListener("blur",this)}handleEvent(e){e.type==="focus"?this.value=!0:this._isElFocused||(this.value=!1)}_apply(){const e=this._element,t=this._isElFocused,i=this.value;i&&!t?e.focus():!i&&t&&e.blur()}get _isElFocused(){return this._element===this._platform.document.activeElement}}V8.$au={type:fr,name:"focus",bindables:{value:{mode:Iz}}};class W8{constructor(){this.position="beforeend",this.strict=!1;const e=ve(Ts),t=ve(Or),i=ve(Fi);this._platform=i,this._resolvedTarget=i.document.createElement("div"),(this.view=e.create()).setLocation(this._targetLocation=Zne(i)),Jie(this.view.nodes,t)}attaching(e){this.callbackContext==null&&(this.callbackContext=this.$controller.scope.bindingContext);const t=this._resolvedTarget=this._getTarget();return this._moveLocation(t,this.position),this._activating(e,t)}detaching(e){return this._deactivating(e,this._resolvedTarget)}targetChanged(){const{$controller:e}=this;if(!e.isActive)return;const t=this._getTarget();if(this._resolvedTarget===t)return;this._resolvedTarget=t;const i=it(this._deactivating(null,t),()=>(this._moveLocation(t,this.position),this._activating(null,t)));fi(i)&&i.catch(JA)}positionChanged(){const{$controller:e,_resolvedTarget:t}=this;if(!e.isActive)return;const i=it(this._deactivating(null,t),()=>(this._moveLocation(t,this.position),this._activating(null,t)));fi(i)&&i.catch(JA)}_activating(e,t){const{activating:i,callbackContext:r,view:s}=this;return it(i==null?void 0:i.call(r,t,s),()=>this._activate(e,t))}_activate(e,t){const{$controller:i,view:r}=this;if(e===null)r.nodes.insertBefore(this._targetLocation);else return it(r.activate(e??r,i,i.scope),()=>this._activated(t));return this._activated(t)}_activated(e){const{activated:t,callbackContext:i,view:r}=this;return t==null?void 0:t.call(i,e,r)}_deactivating(e,t){const{deactivating:i,callbackContext:r,view:s}=this;return it(i==null?void 0:i.call(r,t,s),()=>this._deactivate(e,t))}_deactivate(e,t){const{$controller:i,view:r}=this;if(e===null)r.nodes.remove();else return it(r.deactivate(e,i),()=>this._deactivated(t));return this._deactivated(t)}_deactivated(e){const{deactivated:t,callbackContext:i,view:r}=this;return it(t==null?void 0:t.call(i,e,r),()=>this._removeLocation())}_getTarget(){const e=this._platform,t=e.document;let i=this.target,r=this.renderContext;if(i===""){if(this.strict)throw Ee(811);return t.body}if(St(i)){let s=t;St(r)&&(r=t.querySelector(r)),r instanceof e.Node&&(s=r),i=s.querySelector(i)}if(i instanceof e.Node)return i;if(i==null){if(this.strict)throw Ee(812);return t.body}return i}_removeLocation(){this._targetLocation.remove(),this._targetLocation.$start.remove()}_moveLocation(e,t){const i=this._targetLocation,r=i.$start,s=e.parentNode,o=[r,i];switch(t){case"beforeend":Vy(e,null,o);break;case"afterbegin":Vy(e,e.firstChild,o);break;case"beforebegin":Vy(s,e,o);break;case"afterend":Vy(s,e.nextSibling,o);break;default:throw Ee(779,t)}}dispose(){this.view.dispose(),this.view=void 0,this.callbackContext=null}accept(e){var t;if(((t=this.view)==null?void 0:t.accept(e))===!0)return!0}}W8.$au={type:fr,name:"portal",isTemplateController:!0,bindables:[{name:"target",primary:!0},"position","activated","activating","callbackContext",{name:"renderContext",callback:"targetChanged"},"strict","deactivated","deactivating"]};let Rre;class f1{constructor(){var h,d,f,g;this._parentScope=null,this._outerScope=null,this._attached=!1,this.expose=null,this.slotchange=null,this._subs=new Set,this._observer=null;const e=ve(Jd),t=ve(Or),i=ve(jp),r=ve(yf),s=this.name=i.data.name,o=(h=i.projections)==null?void 0:h[Zz],a=(f=(d=e.instruction)==null?void 0:d.projections)==null?void 0:f[s],l=e.controller.container;let c,u;a==null?(u=l.createChild({inheritParentResources:!0}),c=r.getViewFactory(o??Rre??(Rre=Jr.create({name:"au-slot-empty-template",template:"",needsCompile:!1})),u),this._hasProjection=!1):(u=l.createChild(),u.useResources(e.parent.controller.container),_n(u,Jd,new gi(void 0,e.parent)),c=r.getViewFactory(a,u),this._hasProjection=!0,this._slotwatchers=((g=l.getAll(eie,!1))==null?void 0:g.filter(p=>p.slotName==="*"||p.slotName===s))??bt),this._hasSlotWatcher=(this._slotwatchers??(this._slotwatchers=bt)).length>0,this._hdrContext=e,this.view=c.create().setLocation(this._location=t)}get nodes(){const e=[],t=this._location;let i=t.$start.nextSibling;for(;i!=null&&i!==t;)i.nodeType!==8&&e.push(i),i=i.nextSibling;return e}subscribe(e){this._subs.add(e)}unsubscribe(e){this._subs.delete(e)}binding(e,t){var s;for(this._parentScope=t.scope;t.vmKind==="synthetic"&&((s=t.parent)==null?void 0:s.viewModel)instanceof f1;)t=t.parent.parent;const i=t.scope.bindingContext;let r;this._hasProjection&&(r=this._hdrContext.controller.scope.parent,(this._outerScope=pi.fromParent(r,r.bindingContext)).overrideContext.$host=this.expose??i)}attaching(e,t){return it(this.view.activate(e,this.$controller,this._hasProjection?this._outerScope:this._parentScope),()=>{this._hasSlotWatcher&&(this._slotwatchers.forEach(i=>i.watch(this)),this._observe(),this._notifySlotChange(),this._attached=!0)})}detaching(e,t){return this._attached=!1,this._unobserve(),this._slotwatchers.forEach(i=>i.unwatch(this)),this.view.deactivate(e,this.$controller)}exposeChanged(e){this._hasProjection&&this._outerScope!=null&&(this._outerScope.overrideContext.$host=e)}dispose(){this.view.dispose(),this.view=void 0}accept(e){var t;if(((t=this.view)==null?void 0:t.accept(e))===!0)return!0}_observe(){if(this._observer!=null)return;const e=this._location,t=e.parentElement;t!=null&&(this._observer=Xz(t,i=>{Ere(e,i)&&this._notifySlotChange()})).observe(t,{childList:!0})}_unobserve(){var e;(e=this._observer)==null||e.disconnect(),this._observer=null}_notifySlotChange(){var r;const e=this.nodes,t=new Set(this._subs);let i;this._attached&&((r=this.slotchange)==null||r.call(void 0,this.name,e));for(i of t)i.handleSlotChange(this,e)}}f1.$au={type:ef,name:"au-slot",template:null,containerless:!0,processContent(n,e,t){t.name=n.getAttribute("name")??Zz;let i=n.firstChild,r=null;for(;i!==null;)r=i.nextSibling,Qne(i)&&i.hasAttribute(Jne)&&(console.warn("[DEV:aurelia] detected [au-slot] attribute on a child node",`of an <au-slot> element: "<${i.nodeName} au-slot>".`,"This element will be ignored and removed"),n.removeChild(i)),i=r},bindables:["expose","slotchange"]};const Uy=(n,e)=>n.compareDocumentPosition(e),Ere=(n,e)=>{for(const{addedNodes:t,removedNodes:i,nextSibling:r}of e){let s=0,o=t.length,a;for(;s<o;++s)if(a=t[s],Uy(n.$start,a)===4&&Uy(n,a)===2)return!0;if(i.length>0&&r!=null&&Uy(n.$start,r)===4&&Uy(n,r)===2)return!0}};class j8{constructor(){this.scopeBehavior="auto",this._composition=void 0,this.tag=null,this._container=ve(Fp),this.parent=ve(u1),this._host=ve(h1),this._location=ve(Or),this._platform=ve(Fi),this._rendering=ve(yf),this._instruction=ve(jp),this._contextFactory=ve(ZQ(Tre)),this._compiler=ve(KR),this._hydrationContext=ve(Jd),this._exprParser=ve(Vp),this._observerLocator=ve(Up)}get composing(){return this._composing}get composition(){return this._composition}attaching(e,t){return this._composing=it(this.queue(new E2(this.template,this.component,this.model,void 0),e),i=>{this._contextFactory._isCurrent(i)&&(this._composing=void 0)})}detaching(e){const t=this._composition,i=this._composing;return this._contextFactory.invalidate(),this._composition=this._composing=void 0,it(i,()=>t==null?void 0:t.deactivate(e))}propertyChanged(e){var t;if(!(e==="composing"||e==="composition")){if(e==="model"&&this._composition!=null){this._composition.update(this.model);return}if(e==="tag"&&((t=this._composition)==null?void 0:t.controller.vmKind)===Ws){console.warn("[DEV:aurelia] Changing tag name of a custom element composition is ignored.");return}this._composing=it(this._composing,()=>it(this.queue(new E2(this.template,this.component,this.model,e),void 0),i=>{this._contextFactory._isCurrent(i)&&(this._composing=void 0)}))}}queue(e,t){const i=this._contextFactory,r=this._composition;return it(i.create(e),s=>i._isCurrent(s)?it(this.compose(s),o=>i._isCurrent(s)?it(o.activate(t),()=>i._isCurrent(s)?(this._composition=o,it(r==null?void 0:r.deactivate(t),()=>s)):it(o.controller.deactivate(o.controller,this.$controller),()=>(o.controller.dispose(),s))):(o.controller.dispose(),s)):s)}compose(e){const{_template:t,_component:i,_model:r}=e.change,{_container:s,$controller:o,_location:a,_instruction:l}=this,c=this._getDefinition(this._hydrationContext.controller.container,i),u=s.createChild(),h=this._platform.document.createElement(c==null?this.tag??"div":c.name);a.parentNode.insertBefore(h,a);let d;c==null?d=this.tag==null?rw(h):null:d=c.containerless?rw(h):null;const f=()=>{var m;if(h.remove(),d!=null){let v=d.$start.nextSibling,y=null;for(;v!==null&&v!==d;)y=v.nextSibling,v.remove(),v=y;(m=d.$start)==null||m.remove(),d.remove()}},g=this._createComponentInstance(u,typeof i=="string"?c.Type:i,h,d),p=()=>{const m=l.captures??bt;if(c!==null){const v=c.capture,[y,w]=m.reduce((x,S)=>{const T=!(S.target in c.bindables)&&(v===!0||kt(v)&&!!v(S.target));return x[T?0:1].push(S),x},[[],[]]),R=Cs.$el(u,g,h,{projections:l.projections,captures:y},c,d);return this._createSpreadBindings(h,c,w).forEach(x=>R.addBinding(x)),new T2(R,x=>R.activate(x??R,o,o.scope.parent),x=>it(R.deactivate(x??R,o),f),x=>{var S;return(S=g.activate)==null?void 0:S.call(g,x)},e)}else{const v=Jr.create({name:Ti.generateName(),template:t}),y=this._rendering.getViewFactory(v,u),w=Cs.$view(y,o),R=this.scopeBehavior==="auto"?pi.fromParent(this.parent.scope,g):pi.create(g);return w.setHost(h),d==null?this._createSpreadBindings(h,v,m).forEach(x=>w.addBinding(x)):w.setLocation(d),new T2(w,x=>w.activate(x??w,o,R),x=>it(w.deactivate(x??w,o),f),x=>{var S;return(S=g.activate)==null?void 0:S.call(g,x)},e)}};return"activate"in g?it(g.activate(r),()=>p()):p()}_createComponentInstance(e,t,i,r){if(t==null)return new xre;if(typeof t=="object")return t;const s=this._platform;d1(e,i,s),_n(e,Or,new gi("IRenderLocation",r));const o=e.invoke(t);return _n(e,t,new gi("au-compose.component",o)),o}_getDefinition(e,t){if(typeof t=="string"){const r=Ti.find(e,t);if(r==null)throw Ee(806,t);return r}const i=kt(t)?t:t==null?void 0:t.constructor;return Ti.isType(i,void 0)?Ti.getDefinition(i,null):null}_createSpreadBindings(e,t,i){const r=new m8(this.$controller,{projections:null,captures:i},this._hydrationContext.parent);return o1.create(r,e,t,this._rendering,this._compiler,this._platform,this._exprParser,this._observerLocator)}}j8.$au={type:ef,name:"au-compose",capture:!0,containerless:!0,bindables:["template","component","model",{name:"scopeBehavior",set:n=>{if(n==="scoped"||n==="auto")return n;throw Ee(805,n)}},{name:"composing",mode:xc},{name:"composition",mode:xc},"tag"]};class xre{}class Tre{constructor(){this.id=0}_isCurrent(e){return e.id===this.id}create(e){return it(e.load(),t=>new Mre(++this.id,t))}invalidate(){this.id++}}class E2{constructor(e,t,i,r){this._template=e,this._component=t,this._model=i,this._src=r}load(){return fi(this._template)||fi(this._component)?Promise.all([this._template,this._component]).then(([e,t])=>new x2(e,t,this._model,this._src)):new x2(this._template,this._component,this._model,this._src)}}class x2{constructor(e,t,i,r){this._template=e,this._component=t,this._model=i,this._src=r}}class Mre{constructor(e,t){this.id=e,this.change=t}}class T2{constructor(e,t,i,r,s){this.controller=e,this.start=t,this.stop=i,this.update=r,this.context=s,this.state=0}activate(e){if(this.state!==0)throw Ee(807,this);return this.state=1,this.start(e)}deactivate(e){switch(this.state){case 1:return this.state=-1,this.stop(e);case-1:throw Ee(808);default:this.state=-1}}}const Are=ln("ISanitizer",n=>n.singleton(class{sanitize(){throw Ee(99,"sanitize")}}));class z8{constructor(){this._sanitizer=ve(Are)}toView(e){return e==null?null:this._sanitizer.sanitize(e)}}z8.$au={type:Bg,name:"sanitize"};class U8{constructor(){this.el=ve(h1),this.p=ve(Fi),this._isActive=!1,this._task=null,this.$val="",this.$prio="",this.update=()=>{this._task=null,!!this.value!==this._isToggled&&(this._isToggled===this._base?(this._isToggled=!this._base,this.$val=this.el.style.getPropertyValue("display"),this.$prio=this.el.style.getPropertyPriority("display"),this.el.style.setProperty("display","none","important")):(this._isToggled=this._base,this.el.style.setProperty("display",this.$val,this.$prio),this.el.getAttribute("style")===""&&this.el.removeAttribute("style")))};const e=ve(jp);this._isToggled=this._base=e.alias!=="hide"}binding(){this._isActive=!0,this.update()}detaching(){var e;this._isActive=!1,(e=this._task)==null||e.cancel(),this._task=null}valueChanged(){this._isActive&&this._task===null&&(this._task=this.p.domQueue.queueTask(this.update))}}U8.$au={type:fr,name:"show",bindables:["value"],aliases:["hide"]};const Pre=[lre,ane,hk],Ire=[VA,BA,WA,Xne],Ore=[cz,sz,az,oz,lz,uz,mz,hz,dz,pz,gz,fz,bz],kre=[jz,Fz,Bz,Vz,zz,Uz,Wz,z8,b_,P8,I8,O8,dk,fk,D8,gk,$8,F8,B8,cP,uP,hP,T8,M8,A8,j8,W8,V8,U8,f1],Dre=[cie,uie,aie,lie,nie,iie,rie,sie,oie,fie,yie,gie,pie,mie,vie,hie,Cie,Sie],Lre=G8(Qa);function G8(n){return{optionsProvider:n,register(e){const t={coercingOptions:{enableCoercion:!1,coerceNullish:!1}};return n(t),e.register(t1(Cz,t.coercingOptions),_6,...Pre,...kre,...Ire,...Ore,...Dre)},customize(e){return G8(e??n)}}}const Nre=Su.getOrCreate(globalThis);function Hre(){return Qu.createContainer().register(zd.instance(Fi,Nre),Lre)}class gv extends sre{constructor(e=Hre()){super(e)}static app(e){return new gv().app(e)}static enhance(e){return new gv().enhance(e)}static register(...e){return new gv().register(...e)}app(e){if(Ti.isType(e)){const t=Ti.getDefinition(e);let i=document.querySelector(t.name);return i===null&&(i=document.body),super.app({host:i,component:e})}return super.app(e)}}const Y8="my-app",dP=`<!--import from="./components/chartjs"></import>
<import from="./components/chartjs-scatter"></import>
<import from="./components/table"></import>
<import from="./components/chartjs-geo"></import>
<import from="./components/network"></import-->
<!--sv-chartjs-geo datasrc="g/National_Initiatives_Figure_Data.csv"></sv-chartjs-geo-->
<!--sv-tabs idlist="all,help,table1,visual" titlelist="Help,Data Table,Network Graph Visualisation"></sv-tabs-->
<!--div id="all">
    <sv-table datachannel="data" tabid="all" style="position:fixed;opacity:90%;z-index:1;"></sv-table>
    <sv-network tabid="visual" datachannel="data"></sv-network>
</div-->
<sv-table-network>
    <div style="width:400px" class="w3-card w3-margin w3-padding">
    <p><b>Demo</b> representing knowledge graphs as network of nodes and edges.</p>
    <p>Nodes, edges or N&E can be edited to se instant visual change. Visible nodes can be filtered using dialog 'filter' above.</p>
    </div>
</sv-table-network>

`,K8=[],q8={};let wx;function $re(n){wx||(wx=Ti.define({name:Y8,template:dP,dependencies:K8,bindables:q8})),n.register(wx)}const Fre=Object.freeze(Object.defineProperty({__proto__:null,bindables:q8,default:dP,dependencies:K8,name:Y8,register:$re,template:dP},Symbol.toStringTag,{value:"Module"}));var X8;let Z8;function Bre(n,e,t,i,r,s){var o,a,l,c,u,h,d,f=Symbol.metadata||Symbol.for("Symbol.metadata"),g=Object.defineProperty,p=Object.create,m=[p(null),p(null)],v=e.length;function y(S,T,P){return function(E,A){T&&(A=E,E=n);for(var L=0;L<S.length;L++)A=S[L].apply(E,P?[A]:[]);return P?A:E}}function w(S,T,P,E){if(typeof S!="function"&&(E||S!==void 0))throw new TypeError(T+" must "+(P||"be")+" a function"+(E?"":" or undefined"));return S}function R(S,T,P,E,A,L,W,F,V,H,N){function j(Y){if(!N(Y))throw new TypeError("Attempted to access private element on non-instance")}var k=[].concat(T[0]),K=T[3],ie=!W,b=A===1,C=A===3,_=A===4,I=A===2;function $(Y,ne,de){return function(he,ce){return ne&&(ce=he,he=S),de&&de(he),M[Y].call(he,ce)}}if(!ie){var M={},B=[],z=C?"get":_||b?"set":"value";if(V?(H||b?M={get:M2(function(){return K(this)},E,"get"),set:function(Y){T[4](this,Y)}}:M[z]=K,H||M2(M[z],E,I?"":z)):H||(M=Object.getOwnPropertyDescriptor(S,E)),!H&&!V){if((a=m[+F][E])&&(a^A)!=7)throw Error("Decorating two elements with the same name ("+M[z].name+") is not supported yet");m[+F][E]=A<3?1:A}}for(var U=S,le=k.length-1;le>=0;le-=P?2:1){var ue=w(k[le],"A decorator","be",!0),be=P?k[le-1]:void 0,fe={},Z={kind:["field","accessor","method","getter","setter","class"][A],name:E,metadata:o,addInitializer:(function(Y,ne){if(Y.v)throw new TypeError("attempted to call addInitializer after decoration was finished");w(ne,"An initializer","be",!0),L.push(ne)}).bind(null,fe)};if(ie)a=ue.call(be,U,Z),fe.v=1,w(a,"class decorators","return")&&(U=a);else if(Z.static=F,Z.private=V,a=Z.access={has:V?N.bind():function(Y){return E in Y}},_||(a.get=V?I?function(Y){return j(Y),M.value}:$("get",0,j):function(Y){return Y[E]}),I||C||(a.set=V?$("set",0,j):function(Y,ne){Y[E]=ne}),U=ue.call(be,b?{get:M.get,set:M.set}:M[z],Z),fe.v=1,b){if(typeof U=="object"&&U)(a=w(U.get,"accessor.get"))&&(M.get=a),(a=w(U.set,"accessor.set"))&&(M.set=a),(a=w(U.init,"accessor.init"))&&B.unshift(a);else if(U!==void 0)throw new TypeError("accessor decorators must return an object with get, set, or init properties or undefined")}else w(U,(H?"field":"method")+" decorators","return")&&(H?B.unshift(U):M[z]=U)}return A<2&&W.push(y(B,F,1),y(L,F,0)),H||ie||(V?b?W.splice(-1,0,$("get",F),$("set",F)):W.push(I?M[z]:w.call.bind(M[z])):g(S,E,M)),U}function x(S){return g(S,f,{configurable:!0,enumerable:!0,value:o})}return o=p(o??null),u=[],h=function(S){S&&u.push(y(S))},d=function(S,T){for(var P=0;P<t.length;P++){var E=t[P],A=E[1],L=7&A;if((8&A)==S&&!L==T){var W=E[2],F=!!E[3],V=16&A;R(S?n:n.prototype,E,V,F?"#"+W:Vre(W),L,L<2?[]:S?c=c||[]:l=l||[],u,!!S,F,T,S&&F?function(H){return jre(H)===n}:r)}}},d(8,0),d(0,0),d(8,1),d(0,1),h(l),h(c),a=u,v||x(n),{e:a,get c(){var S=[];return v&&[x(n=R(n,[e],i,n.name,5,S)),y(S,1)]}}}function Vre(n){var e=Wre(n,"string");return typeof e=="symbol"?e:e+""}function Wre(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function M2(n,e,t){typeof e=="symbol"&&(e=(e=e.description)?"["+e+"]":"");try{Object.defineProperty(n,"name",{configurable:!0,value:t?t+" "+e:e})}catch{}return n}function jre(n){if(Object(n)!==n)throw TypeError("right-hand side of 'in' should be an object, got "+(n!==null?typeof n:"null"));return n}let Q8;class zre{constructor(){this.message="Hello World 6!"}}X8=zre;[Q8,Z8]=Bre(X8,[aa(Fre)],[]).c;Z8();const J8="chartjs",fP=`<div>
    <canvas ref="mychart"></canvas>
</div>
`,e4=[],t4={};let yx;function Ure(n){yx||(yx=Ti.define({name:J8,template:fP,dependencies:e4,bindables:t4})),n.register(yx)}const Gre=Object.freeze(Object.defineProperty({__proto__:null,bindables:t4,default:fP,dependencies:e4,name:J8,register:Ure,template:fP},Symbol.toStringTag,{value:"Module"}));/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Gw(n){return n+.5|0}const _u=(n,e,t)=>Math.max(Math.min(n,t),e);function Fb(n){return _u(Gw(n*2.55),0,255)}function Du(n){return _u(Gw(n*255),0,255)}function nc(n){return _u(Gw(n/2.55)/100,0,1)}function A2(n){return _u(Gw(n*100),0,100)}const Ds={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},gP=[..."0123456789ABCDEF"],Yre=n=>gP[n&15],Kre=n=>gP[(n&240)>>4]+gP[n&15],Gy=n=>(n&240)>>4===(n&15),qre=n=>Gy(n.r)&&Gy(n.g)&&Gy(n.b)&&Gy(n.a);function Xre(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&Ds[n[1]]*17,g:255&Ds[n[2]]*17,b:255&Ds[n[3]]*17,a:e===5?Ds[n[4]]*17:255}:(e===7||e===9)&&(t={r:Ds[n[1]]<<4|Ds[n[2]],g:Ds[n[3]]<<4|Ds[n[4]],b:Ds[n[5]]<<4|Ds[n[6]],a:e===9?Ds[n[7]]<<4|Ds[n[8]]:255})),t}const Zre=(n,e)=>n<255?e(n):"";function Qre(n){var e=qre(n)?Yre:Kre;return n?"#"+e(n.r)+e(n.g)+e(n.b)+Zre(n.a,e):void 0}const Jre=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function n4(n,e,t){const i=e*Math.min(t,1-t),r=(s,o=(s+n/30)%12)=>t-i*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function ese(n,e,t){const i=(r,s=(r+n/60)%6)=>t-t*e*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function tse(n,e,t){const i=n4(n,1,.5);let r;for(e+t>1&&(r=1/(e+t),e*=r,t*=r),r=0;r<3;r++)i[r]*=1-e-t,i[r]+=e;return i}function nse(n,e,t,i,r){return n===r?(e-t)/i+(e<t?6:0):e===r?(t-n)/i+2:(n-e)/i+4}function mk(n){const t=n.r/255,i=n.g/255,r=n.b/255,s=Math.max(t,i,r),o=Math.min(t,i,r),a=(s+o)/2;let l,c,u;return s!==o&&(u=s-o,c=a>.5?u/(2-s-o):u/(s+o),l=nse(t,i,r,u,s),l=l*60+.5),[l|0,c||0,a]}function bk(n,e,t,i){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,i)).map(Du)}function vk(n,e,t){return bk(n4,n,e,t)}function ise(n,e,t){return bk(tse,n,e,t)}function rse(n,e,t){return bk(ese,n,e,t)}function i4(n){return(n%360+360)%360}function sse(n){const e=Jre.exec(n);let t=255,i;if(!e)return;e[5]!==i&&(t=e[6]?Fb(+e[5]):Du(+e[5]));const r=i4(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=ise(r,s,o):e[1]==="hsv"?i=rse(r,s,o):i=vk(r,s,o),{r:i[0],g:i[1],b:i[2],a:t}}function ose(n,e){var t=mk(n);t[0]=i4(t[0]+e),t=vk(t),n.r=t[0],n.g=t[1],n.b=t[2]}function ase(n){if(!n)return;const e=mk(n),t=e[0],i=A2(e[1]),r=A2(e[2]);return n.a<255?`hsla(${t}, ${i}%, ${r}%, ${nc(n.a)})`:`hsl(${t}, ${i}%, ${r}%)`}const P2={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},I2={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function lse(){const n={},e=Object.keys(I2),t=Object.keys(P2);let i,r,s,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],r=0;r<t.length;r++)s=t[r],a=a.replace(s,P2[s]);s=parseInt(I2[o],16),n[a]=[s>>16&255,s>>8&255,s&255]}return n}let Yy;function cse(n){Yy||(Yy=lse(),Yy.transparent=[0,0,0,0]);const e=Yy[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const use=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function hse(n){const e=use.exec(n);let t=255,i,r,s;if(e){if(e[7]!==i){const o=+e[7];t=e[8]?Fb(o):_u(o*255,0,255)}return i=+e[1],r=+e[3],s=+e[5],i=255&(e[2]?Fb(i):_u(i,0,255)),r=255&(e[4]?Fb(r):_u(r,0,255)),s=255&(e[6]?Fb(s):_u(s,0,255)),{r:i,g:r,b:s,a:t}}}function dse(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${nc(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const Cx=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Vf=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function fse(n,e,t){const i=Vf(nc(n.r)),r=Vf(nc(n.g)),s=Vf(nc(n.b));return{r:Du(Cx(i+t*(Vf(nc(e.r))-i))),g:Du(Cx(r+t*(Vf(nc(e.g))-r))),b:Du(Cx(s+t*(Vf(nc(e.b))-s))),a:n.a+t*(e.a-n.a)}}function Ky(n,e,t){if(n){let i=mk(n);i[e]=Math.max(0,Math.min(i[e]+i[e]*t,e===0?360:1)),i=vk(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function r4(n,e){return n&&Object.assign(e||{},n)}function O2(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=Du(n[3]))):(e=r4(n,{r:0,g:0,b:0,a:1}),e.a=Du(e.a)),e}function gse(n){return n.charAt(0)==="r"?hse(n):sse(n)}let s4=class pP{constructor(e){if(e instanceof pP)return e;const t=typeof e;let i;t==="object"?i=O2(e):t==="string"&&(i=Xre(e)||cse(e)||gse(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=r4(this._rgb);return e&&(e.a=nc(e.a)),e}set rgb(e){this._rgb=O2(e)}rgbString(){return this._valid?dse(this._rgb):void 0}hexString(){return this._valid?Qre(this._rgb):void 0}hslString(){return this._valid?ase(this._rgb):void 0}mix(e,t){if(e){const i=this.rgb,r=e.rgb;let s;const o=t===s?.5:t,a=2*o-1,l=i.a-r.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,i.r=255&c*i.r+s*r.r+.5,i.g=255&c*i.g+s*r.g+.5,i.b=255&c*i.b+s*r.b+.5,i.a=o*i.a+(1-o)*r.a,this.rgb=i}return this}interpolate(e,t){return e&&(this._rgb=fse(this._rgb,e._rgb,t)),this}clone(){return new pP(this.rgb)}alpha(e){return this._rgb.a=Du(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=Gw(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Ky(this._rgb,2,e),this}darken(e){return Ky(this._rgb,2,-e),this}saturate(e){return Ky(this._rgb,1,e),this}desaturate(e){return Ky(this._rgb,1,-e),this}rotate(e){return ose(this._rgb,e),this}};/*!
 * Chart.js v4.4.6
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */function Ml(){}const pse=(()=>{let n=0;return()=>n++})();function Dt(n){return n===null||typeof n>"u"}function On(n){if(Array.isArray&&Array.isArray(n))return!0;const e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Et(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function ti(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function ls(n,e){return ti(n)?n:e}function rt(n,e){return typeof n>"u"?e:n}const mse=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/e,o4=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function vn(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function Jt(n,e,t,i){let r,s,o;if(On(n))for(s=n.length,r=0;r<s;r++)e.call(t,n[r],r);else if(Et(n))for(o=Object.keys(n),s=o.length,r=0;r<s;r++)e.call(t,n[o[r]],o[r])}function w_(n,e){let t,i,r,s;if(!n||!e||n.length!==e.length)return!1;for(t=0,i=n.length;t<i;++t)if(r=n[t],s=e[t],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function y_(n){if(On(n))return n.map(y_);if(Et(n)){const e=Object.create(null),t=Object.keys(n),i=t.length;let r=0;for(;r<i;++r)e[t[r]]=y_(n[t[r]]);return e}return n}function a4(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function bse(n,e,t,i){if(!a4(n))return;const r=e[n],s=t[n];Et(r)&&Et(s)?Rs(r,s,i):e[n]=y_(s)}function Rs(n,e,t){const i=On(e)?e:[e],r=i.length;if(!Et(n))return n;t=t||{};const s=t.merger||bse;let o;for(let a=0;a<r;++a){if(o=i[a],!Et(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)s(l[c],n,o,t)}return n}function pv(n,e){return Rs(n,e,{merger:vse})}function vse(n,e,t){if(!a4(n))return;const i=e[n],r=t[n];Et(i)&&Et(r)?pv(i,r):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=y_(r))}const k2={"":n=>n,x:n=>n.x,y:n=>n.y};function wse(n){const e=n.split("."),t=[];let i="";for(const r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(t.push(i),i="");return t}function yse(n){const e=wse(n);return t=>{for(const i of e){if(i==="")break;t=t&&t[i]}return t}}function ju(n,e){return(k2[e]||(k2[e]=yse(e)))(n)}function wk(n){return n.charAt(0).toUpperCase()+n.slice(1)}const ow=n=>typeof n<"u",zu=n=>typeof n=="function",D2=(n,e)=>{if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0};function Cse(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const En=Math.PI,Rn=2*En,Sse=Rn+En,C_=Number.POSITIVE_INFINITY,_se=En/180,oi=En/2,vh=En/4,L2=En*2/3,Ru=Math.log10,Ja=Math.sign;function mv(n,e,t){return Math.abs(n-e)<t}function N2(n){const e=Math.round(n);n=mv(n,e,n/1e3)?e:n;const t=Math.pow(10,Math.floor(Ru(n))),i=n/t;return(i<=1?1:i<=2?2:i<=5?5:10)*t}function Rse(n){const e=[],t=Math.sqrt(n);let i;for(i=1;i<t;i++)n%i===0&&(e.push(i),e.push(n/i));return t===(t|0)&&e.push(t),e.sort((r,s)=>r-s).pop(),e}function Sp(n){return!isNaN(parseFloat(n))&&isFinite(n)}function Ese(n,e){const t=Math.round(n);return t-e<=n&&t+e>=n}function l4(n,e,t){let i,r,s;for(i=0,r=n.length;i<r;i++)s=n[i][t],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Ko(n){return n*(En/180)}function yk(n){return n*(180/En)}function H2(n){if(!ti(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function c4(n,e){const t=e.x-n.x,i=e.y-n.y,r=Math.sqrt(t*t+i*i);let s=Math.atan2(i,t);return s<-.5*En&&(s+=Rn),{angle:s,distance:r}}function mP(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function xse(n,e){return(n-e+Sse)%Rn-En}function ps(n){return(n%Rn+Rn)%Rn}function aw(n,e,t,i){const r=ps(n),s=ps(e),o=ps(t),a=ps(s-r),l=ps(o-r),c=ps(r-s),u=ps(r-o);return r===s||r===o||i&&s===o||a>l&&c<u}function $i(n,e,t){return Math.max(e,Math.min(t,n))}function Tse(n){return $i(n,-32768,32767)}function uc(n,e,t,i=1e-6){return n>=Math.min(e,t)-i&&n<=Math.max(e,t)+i}function Ck(n,e,t){t=t||(o=>n[o]<e);let i=n.length-1,r=0,s;for(;i-r>1;)s=r+i>>1,t(s)?r=s:i=s;return{lo:r,hi:i}}const hc=(n,e,t,i)=>Ck(n,t,i?r=>{const s=n[r][e];return s<t||s===t&&n[r+1][e]===t}:r=>n[r][e]<t),Mse=(n,e,t)=>Ck(n,t,i=>n[i][e]>=t);function Ase(n,e,t){let i=0,r=n.length;for(;i<r&&n[i]<e;)i++;for(;r>i&&n[r-1]>t;)r--;return i>0||r<n.length?n.slice(i,r):n}const u4=["push","pop","shift","splice","unshift"];function Pse(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),u4.forEach(t=>{const i="_onData"+wk(t),r=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...s){const o=r.apply(this,s);return n._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...s)}),o}})})}function $2(n,e){const t=n._chartjs;if(!t)return;const i=t.listeners,r=i.indexOf(e);r!==-1&&i.splice(r,1),!(i.length>0)&&(u4.forEach(s=>{delete n[s]}),delete n._chartjs)}function h4(n){const e=new Set(n);return e.size===n.length?n:Array.from(e)}const d4=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function f4(n,e){let t=[],i=!1;return function(...r){t=r,i||(i=!0,d4.call(window,()=>{i=!1,n.apply(e,t)}))}}function Ise(n,e){let t;return function(...i){return e?(clearTimeout(t),t=setTimeout(n,e,i)):n.apply(this,i),e}}const Sk=n=>n==="start"?"left":n==="end"?"right":"center",rr=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,Ose=(n,e,t,i)=>n===(i?"left":"right")?t:n==="center"?(e+t)/2:e;function g4(n,e,t){const i=e.length;let r=0,s=i;if(n._sorted){const{iScale:o,_parsed:a}=n,l=o.axis,{min:c,max:u,minDefined:h,maxDefined:d}=o.getUserBounds();h&&(r=$i(Math.min(hc(a,l,c).lo,t?i:hc(e,l,o.getPixelForValue(c)).lo),0,i-1)),d?s=$i(Math.max(hc(a,o.axis,u,!0).hi+1,t?0:hc(e,l,o.getPixelForValue(u),!0).hi+1),r,i)-r:s=i-r}return{start:r,count:s}}function p4(n){const{xScale:e,yScale:t,_scaleRanges:i}=n,r={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!i)return n._scaleRanges=r,!0;const s=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==t.min||i.ymax!==t.max;return Object.assign(i,r),s}const qy=n=>n===0||n===1,F2=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*Rn/t)),B2=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*Rn/t)+1,bv={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*oi)+1,easeOutSine:n=>Math.sin(n*oi),easeInOutSine:n=>-.5*(Math.cos(En*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>qy(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>qy(n)?n:F2(n,.075,.3),easeOutElastic:n=>qy(n)?n:B2(n,.075,.3),easeInOutElastic(n){return qy(n)?n:n<.5?.5*F2(n*2,.1125,.45):.5+.5*B2(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-bv.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?bv.easeInBounce(n*2)*.5:bv.easeOutBounce(n*2-1)*.5+.5};function _k(n){if(n&&typeof n=="object"){const e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function V2(n){return _k(n)?n:new s4(n)}function Sx(n){return _k(n)?n:new s4(n).saturate(.5).darken(.1).hexString()}const kse=["x","y","borderWidth","radius","tension"],Dse=["color","borderColor","backgroundColor"];function Lse(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:Dse},numbers:{type:"number",properties:kse}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function Nse(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const W2=new Map;function Hse(n,e){e=e||{};const t=n+JSON.stringify(e);let i=W2.get(t);return i||(i=new Intl.NumberFormat(n,e),W2.set(t,i)),i}function Yw(n,e,t){return Hse(e,t).format(n)}const m4={values(n){return On(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";const i=this.chart.options.locale;let r,s=n;if(t.length>1){const c=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(c<1e-4||c>1e15)&&(r="scientific"),s=$se(n,t)}const o=Ru(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Yw(n,i,l)},logarithmic(n,e,t){if(n===0)return"0";const i=t[e].significand||n/Math.pow(10,Math.floor(Ru(n)));return[1,2,3,5,10,15].includes(i)||e>.8*t.length?m4.numeric.call(this,n,e,t):""}};function $se(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var g1={formatters:m4};function Fse(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:g1.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const tf=Object.create(null),bP=Object.create(null);function vv(n,e){if(!e)return n;const t=e.split(".");for(let i=0,r=t.length;i<r;++i){const s=t[i];n=n[s]||(n[s]=Object.create(null))}return n}function _x(n,e,t){return typeof e=="string"?Rs(vv(n,e),t):Rs(vv(n,""),e)}class Bse{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>Sx(r.backgroundColor),this.hoverBorderColor=(i,r)=>Sx(r.borderColor),this.hoverColor=(i,r)=>Sx(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return _x(this,e,t)}get(e){return vv(this,e)}describe(e,t){return _x(bP,e,t)}override(e,t){return _x(tf,e,t)}route(e,t,i,r){const s=vv(this,e),o=vv(this,i),a="_"+t;Object.defineProperties(s,{[a]:{value:s[t],writable:!0},[t]:{enumerable:!0,get(){const l=this[a],c=o[r];return Et(l)?Object.assign({},c,l):rt(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(t=>t(this))}}var Dn=new Bse({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Lse,Nse,Fse]);function Vse(n){return!n||Dt(n.size)||Dt(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function S_(n,e,t,i,r){let s=e[r];return s||(s=e[r]=n.measureText(r).width,t.push(r)),s>i&&(i=s),i}function Wse(n,e,t,i){i=i||{};let r=i.data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(r=i.data={},s=i.garbageCollect=[],i.font=e),n.save(),n.font=e;let o=0;const a=t.length;let l,c,u,h,d;for(l=0;l<a;l++)if(h=t[l],h!=null&&!On(h))o=S_(n,r,s,o,h);else if(On(h))for(c=0,u=h.length;c<u;c++)d=h[c],d!=null&&!On(d)&&(o=S_(n,r,s,o,d));n.restore();const f=s.length/2;if(f>t.length){for(l=0;l<f;l++)delete r[s[l]];s.splice(0,f)}return o}function wh(n,e,t){const i=n.currentDevicePixelRatio,r=t!==0?Math.max(t/2,.5):0;return Math.round((e-r)*i)/i+r}function j2(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function __(n,e,t,i){b4(n,e,t,i,null)}function b4(n,e,t,i,r){let s,o,a,l,c,u,h,d;const f=e.pointStyle,g=e.rotation,p=e.radius;let m=(g||0)*_se;if(f&&typeof f=="object"&&(s=f.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){n.save(),n.translate(t,i),n.rotate(m),n.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),n.restore();return}if(!(isNaN(p)||p<=0)){switch(n.beginPath(),f){default:r?n.ellipse(t,i,r/2,p,0,0,Rn):n.arc(t,i,p,0,Rn),n.closePath();break;case"triangle":u=r?r/2:p,n.moveTo(t+Math.sin(m)*u,i-Math.cos(m)*p),m+=L2,n.lineTo(t+Math.sin(m)*u,i-Math.cos(m)*p),m+=L2,n.lineTo(t+Math.sin(m)*u,i-Math.cos(m)*p),n.closePath();break;case"rectRounded":c=p*.516,l=p-c,o=Math.cos(m+vh)*l,h=Math.cos(m+vh)*(r?r/2-c:l),a=Math.sin(m+vh)*l,d=Math.sin(m+vh)*(r?r/2-c:l),n.arc(t-h,i-a,c,m-En,m-oi),n.arc(t+d,i-o,c,m-oi,m),n.arc(t+h,i+a,c,m,m+oi),n.arc(t-d,i+o,c,m+oi,m+En),n.closePath();break;case"rect":if(!g){l=Math.SQRT1_2*p,u=r?r/2:l,n.rect(t-u,i-l,2*u,2*l);break}m+=vh;case"rectRot":h=Math.cos(m)*(r?r/2:p),o=Math.cos(m)*p,a=Math.sin(m)*p,d=Math.sin(m)*(r?r/2:p),n.moveTo(t-h,i-a),n.lineTo(t+d,i-o),n.lineTo(t+h,i+a),n.lineTo(t-d,i+o),n.closePath();break;case"crossRot":m+=vh;case"cross":h=Math.cos(m)*(r?r/2:p),o=Math.cos(m)*p,a=Math.sin(m)*p,d=Math.sin(m)*(r?r/2:p),n.moveTo(t-h,i-a),n.lineTo(t+h,i+a),n.moveTo(t+d,i-o),n.lineTo(t-d,i+o);break;case"star":h=Math.cos(m)*(r?r/2:p),o=Math.cos(m)*p,a=Math.sin(m)*p,d=Math.sin(m)*(r?r/2:p),n.moveTo(t-h,i-a),n.lineTo(t+h,i+a),n.moveTo(t+d,i-o),n.lineTo(t-d,i+o),m+=vh,h=Math.cos(m)*(r?r/2:p),o=Math.cos(m)*p,a=Math.sin(m)*p,d=Math.sin(m)*(r?r/2:p),n.moveTo(t-h,i-a),n.lineTo(t+h,i+a),n.moveTo(t+d,i-o),n.lineTo(t-d,i+o);break;case"line":o=r?r/2:Math.cos(m)*p,a=Math.sin(m)*p,n.moveTo(t-o,i-a),n.lineTo(t+o,i+a);break;case"dash":n.moveTo(t,i),n.lineTo(t+Math.cos(m)*(r?r/2:p),i+Math.sin(m)*p);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function dc(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function Hd(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function $d(n){n.restore()}function jse(n,e,t,i,r){if(!e)return n.lineTo(t.x,t.y);if(r==="middle"){const s=(e.x+t.x)/2;n.lineTo(s,e.y),n.lineTo(s,t.y)}else r==="after"!=!!i?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function zse(n,e,t,i){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?t.cp2x:t.cp1x,i?t.cp2y:t.cp1y,t.x,t.y)}function Use(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),Dt(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function Gse(n,e,t,i,r){if(r.strikethrough||r.underline){const s=n.measureText(i),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=t-s.actualBoundingBoxAscent,c=t+s.actualBoundingBoxDescent,u=r.strikethrough?(l+c)/2:c;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=r.decorationWidth||2,n.moveTo(o,u),n.lineTo(a,u),n.stroke()}}function Yse(n,e){const t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function nf(n,e,t,i,r,s={}){const o=On(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(n.save(),n.font=r.string,Use(n,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&Yse(n,s.backdrop),a&&(s.strokeColor&&(n.strokeStyle=s.strokeColor),Dt(s.strokeWidth)||(n.lineWidth=s.strokeWidth),n.strokeText(c,t,i,s.maxWidth)),n.fillText(c,t,i,s.maxWidth),Gse(n,t,i,c,s),i+=Number(r.lineHeight);n.restore()}function lw(n,e){const{x:t,y:i,w:r,h:s,radius:o}=e;n.arc(t+o.topLeft,i+o.topLeft,o.topLeft,1.5*En,En,!0),n.lineTo(t,i+s-o.bottomLeft),n.arc(t+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,En,oi,!0),n.lineTo(t+r-o.bottomRight,i+s),n.arc(t+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,oi,0,!0),n.lineTo(t+r,i+o.topRight),n.arc(t+r-o.topRight,i+o.topRight,o.topRight,0,-oi,!0),n.lineTo(t+o.topLeft,i)}const Kse=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,qse=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Xse(n,e){const t=(""+n).match(Kse);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}const Zse=n=>+n||0;function Rk(n,e){const t={},i=Et(e),r=i?Object.keys(e):e,s=Et(n)?i?o=>rt(n[o],n[e[o]]):o=>n[o]:()=>n;for(const o of r)t[o]=Zse(s(o));return t}function v4(n){return Rk(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Fd(n){return Rk(n,["topLeft","topRight","bottomLeft","bottomRight"])}function gr(n){const e=v4(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Mi(n,e){n=n||{},e=e||Dn.font;let t=rt(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let i=rt(n.style,e.style);i&&!(""+i).match(qse)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:rt(n.family,e.family),lineHeight:Xse(rt(n.lineHeight,e.lineHeight),t),size:t,style:i,weight:rt(n.weight,e.weight),string:""};return r.string=Vse(r),r}function Bb(n,e,t,i){let r,s,o;for(r=0,s=n.length;r<s;++r)if(o=n[r],o!==void 0&&o!==void 0)return o}function Qse(n,e,t){const{min:i,max:r}=n,s=o4(e,(r-i)/2),o=(a,l)=>t&&a===0?0:a+l;return{min:o(i,-Math.abs(s)),max:o(r,s)}}function rh(n,e){return Object.assign(Object.create(n),e)}function Ek(n,e=[""],t,i,r=()=>n[0]){const s=t||n;typeof i>"u"&&(i=S4("_fallback",n));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:s,_fallback:i,_getTarget:r,override:a=>Ek([a,...n],e,s,i)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete n[0][l],!0},get(a,l){return y4(a,l,()=>ooe(l,e,n,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(a,l){return U2(a).includes(l)},ownKeys(a){return U2(a)},set(a,l,c){const u=a._storage||(a._storage=r());return a[l]=u[l]=c,delete a._keys,!0}})}function _p(n,e,t,i){const r={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:w4(n,i),setContext:s=>_p(n,s,t,i),override:s=>_p(n.override(s),e,t,i)};return new Proxy(r,{deleteProperty(s,o){return delete s[o],delete n[o],!0},get(s,o,a){return y4(s,o,()=>eoe(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(s,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(s,o,a){return n[o]=a,delete s[o],!0}})}function w4(n,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=n;return{allKeys:r,scriptable:t,indexable:i,isScriptable:zu(t)?t:()=>t,isIndexable:zu(i)?i:()=>i}}const Jse=(n,e)=>n?n+wk(e):e,xk=(n,e)=>Et(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function y4(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];const i=t();return n[e]=i,i}function eoe(n,e,t){const{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=n;let a=i[e];return zu(a)&&o.isScriptable(e)&&(a=toe(e,a,n,t)),On(a)&&a.length&&(a=noe(e,a,n,o.isIndexable)),xk(e,a)&&(a=_p(a,r,s&&s[e],o)),a}function toe(n,e,t,i){const{_proxy:r,_context:s,_subProxy:o,_stack:a}=t;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);a.add(n);let l=e(s,o||i);return a.delete(n),xk(n,l)&&(l=Tk(r._scopes,r,n,l)),l}function noe(n,e,t,i){const{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=t;if(typeof s.index<"u"&&i(n))return e[s.index%e.length];if(Et(e[0])){const l=e,c=r._scopes.filter(u=>u!==l);e=[];for(const u of l){const h=Tk(c,r,n,u);e.push(_p(h,s,o&&o[n],a))}}return e}function C4(n,e,t){return zu(n)?n(e,t):n}const ioe=(n,e)=>n===!0?e:typeof n=="string"?ju(e,n):void 0;function roe(n,e,t,i,r){for(const s of e){const o=ioe(t,s);if(o){n.add(o);const a=C4(o._fallback,t,r);if(typeof a<"u"&&a!==t&&a!==i)return a}else if(o===!1&&typeof i<"u"&&t!==i)return null}return!1}function Tk(n,e,t,i){const r=e._rootScopes,s=C4(e._fallback,t,i),o=[...n,...r],a=new Set;a.add(i);let l=z2(a,o,t,s||t,i);return l===null||typeof s<"u"&&s!==t&&(l=z2(a,o,s,l,i),l===null)?!1:Ek(Array.from(a),[""],r,s,()=>soe(e,t,i))}function z2(n,e,t,i,r){for(;t;)t=roe(n,e,t,i,r);return t}function soe(n,e,t){const i=n._getTarget();e in i||(i[e]={});const r=i[e];return On(r)&&Et(t)?t:r||{}}function ooe(n,e,t,i){let r;for(const s of e)if(r=S4(Jse(s,n),t),typeof r<"u")return xk(n,r)?Tk(t,i,n,r):r}function S4(n,e){for(const t of e){if(!t)continue;const i=t[n];if(typeof i<"u")return i}}function U2(n){let e=n._keys;return e||(e=n._keys=aoe(n._scopes)),e}function aoe(n){const e=new Set;for(const t of n)for(const i of Object.keys(t).filter(r=>!r.startsWith("_")))e.add(i);return Array.from(e)}function _4(n,e,t,i){const{iScale:r}=n,{key:s="r"}=this._parsing,o=new Array(i);let a,l,c,u;for(a=0,l=i;a<l;++a)c=a+t,u=e[c],o[a]={r:r.parse(ju(u,s),c)};return o}const loe=Number.EPSILON||1e-14,Rp=(n,e)=>e<n.length&&!n[e].skip&&n[e],R4=n=>n==="x"?"y":"x";function coe(n,e,t,i){const r=n.skip?e:n,s=e,o=t.skip?e:t,a=mP(s,r),l=mP(o,s);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=i*c,d=i*u;return{previous:{x:s.x-h*(o.x-r.x),y:s.y-h*(o.y-r.y)},next:{x:s.x+d*(o.x-r.x),y:s.y+d*(o.y-r.y)}}}function uoe(n,e,t){const i=n.length;let r,s,o,a,l,c=Rp(n,0);for(let u=0;u<i-1;++u)if(l=c,c=Rp(n,u+1),!(!l||!c)){if(mv(e[u],0,loe)){t[u]=t[u+1]=0;continue}r=t[u]/e[u],s=t[u+1]/e[u],a=Math.pow(r,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),t[u]=r*o*e[u],t[u+1]=s*o*e[u])}}function hoe(n,e,t="x"){const i=R4(t),r=n.length;let s,o,a,l=Rp(n,0);for(let c=0;c<r;++c){if(o=a,a=l,l=Rp(n,c+1),!a)continue;const u=a[t],h=a[i];o&&(s=(u-o[t])/3,a[`cp1${t}`]=u-s,a[`cp1${i}`]=h-s*e[c]),l&&(s=(l[t]-u)/3,a[`cp2${t}`]=u+s,a[`cp2${i}`]=h+s*e[c])}}function doe(n,e="x"){const t=R4(e),i=n.length,r=Array(i).fill(0),s=Array(i);let o,a,l,c=Rp(n,0);for(o=0;o<i;++o)if(a=l,l=c,c=Rp(n,o+1),!!l){if(c){const u=c[e]-l[e];r[o]=u!==0?(c[t]-l[t])/u:0}s[o]=a?c?Ja(r[o-1])!==Ja(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}uoe(n,r,s),hoe(n,s,e)}function Xy(n,e,t){return Math.max(Math.min(n,t),e)}function foe(n,e){let t,i,r,s,o,a=dc(n[0],e);for(t=0,i=n.length;t<i;++t)o=s,s=a,a=t<i-1&&dc(n[t+1],e),s&&(r=n[t],o&&(r.cp1x=Xy(r.cp1x,e.left,e.right),r.cp1y=Xy(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=Xy(r.cp2x,e.left,e.right),r.cp2y=Xy(r.cp2y,e.top,e.bottom)))}function goe(n,e,t,i,r){let s,o,a,l;if(e.spanGaps&&(n=n.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")doe(n,r);else{let c=i?n[n.length-1]:n[0];for(s=0,o=n.length;s<o;++s)a=n[s],l=coe(c,a,n[Math.min(s+1,o-(i?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&foe(n,t)}function Mk(){return typeof window<"u"&&typeof document<"u"}function Ak(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function R_(n,e,t){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*e.parentNode[t])):i=n,i}const p1=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function poe(n,e){return p1(n).getPropertyValue(e)}const moe=["top","right","bottom","left"];function Bd(n,e,t){const i={};t=t?"-"+t:"";for(let r=0;r<4;r++){const s=moe[r];i[s]=parseFloat(n[e+"-"+s+t])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const boe=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function voe(n,e){const t=n.touches,i=t&&t.length?t[0]:n,{offsetX:r,offsetY:s}=i;let o=!1,a,l;if(boe(r,s,n.target))a=r,l=s;else{const c=e.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function dd(n,e){if("native"in n)return n;const{canvas:t,currentDevicePixelRatio:i}=e,r=p1(t),s=r.boxSizing==="border-box",o=Bd(r,"padding"),a=Bd(r,"border","width"),{x:l,y:c,box:u}=voe(n,t),h=o.left+(u&&a.left),d=o.top+(u&&a.top);let{width:f,height:g}=e;return s&&(f-=o.width+a.width,g-=o.height+a.height),{x:Math.round((l-h)/f*t.width/i),y:Math.round((c-d)/g*t.height/i)}}function woe(n,e,t){let i,r;if(e===void 0||t===void 0){const s=n&&Ak(n);if(!s)e=n.clientWidth,t=n.clientHeight;else{const o=s.getBoundingClientRect(),a=p1(s),l=Bd(a,"border","width"),c=Bd(a,"padding");e=o.width-c.width-l.width,t=o.height-c.height-l.height,i=R_(a.maxWidth,s,"clientWidth"),r=R_(a.maxHeight,s,"clientHeight")}}return{width:e,height:t,maxWidth:i||C_,maxHeight:r||C_}}const Zy=n=>Math.round(n*10)/10;function yoe(n,e,t,i){const r=p1(n),s=Bd(r,"margin"),o=R_(r.maxWidth,n,"clientWidth")||C_,a=R_(r.maxHeight,n,"clientHeight")||C_,l=woe(n,e,t);let{width:c,height:u}=l;if(r.boxSizing==="content-box"){const d=Bd(r,"border","width"),f=Bd(r,"padding");c-=f.width+d.width,u-=f.height+d.height}return c=Math.max(0,c-s.width),u=Math.max(0,i?c/i:u-s.height),c=Zy(Math.min(c,o,l.maxWidth)),u=Zy(Math.min(u,a,l.maxHeight)),c&&!u&&(u=Zy(c/2)),(e!==void 0||t!==void 0)&&i&&l.height&&u>l.height&&(u=l.height,c=Zy(Math.floor(u*i))),{width:c,height:u}}function G2(n,e,t){const i=e||1,r=Math.floor(n.height*i),s=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const o=n.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||o.height!==r||o.width!==s?(n.currentDevicePixelRatio=i,o.height=r,o.width=s,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const Coe=function(){let n=!1;try{const e={get passive(){return n=!0,!1}};Mk()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n}();function Y2(n,e){const t=poe(n,e),i=t&&t.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function fd(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function Soe(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:i==="middle"?t<.5?n.y:e.y:i==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function _oe(n,e,t,i){const r={x:n.cp2x,y:n.cp2y},s={x:e.cp1x,y:e.cp1y},o=fd(n,r,t),a=fd(r,s,t),l=fd(s,e,t),c=fd(o,a,t),u=fd(a,l,t);return fd(c,u,t)}const Roe=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,i){return t-i},leftForLtr(t,i){return t-i}}},Eoe=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function sp(n,e,t){return n?Roe(e,t):Eoe()}function E4(n,e){let t,i;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,i=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=i)}function x4(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function T4(n){return n==="angle"?{between:aw,compare:xse,normalize:ps}:{between:uc,compare:(e,t)=>e-t,normalize:e=>e}}function K2({start:n,end:e,count:t,loop:i,style:r}){return{start:n%t,end:e%t,loop:i&&(e-n+1)%t===0,style:r}}function xoe(n,e,t){const{property:i,start:r,end:s}=t,{between:o,normalize:a}=T4(i),l=e.length;let{start:c,end:u,loop:h}=n,d,f;if(h){for(c+=l,u+=l,d=0,f=l;d<f&&o(a(e[c%l][i]),r,s);++d)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:h,style:n.style}}function M4(n,e,t){if(!t)return[n];const{property:i,start:r,end:s}=t,o=e.length,{compare:a,between:l,normalize:c}=T4(i),{start:u,end:h,loop:d,style:f}=xoe(n,e,t),g=[];let p=!1,m=null,v,y,w;const R=()=>l(r,w,v)&&a(r,w)!==0,x=()=>a(s,v)===0||l(s,w,v),S=()=>p||R(),T=()=>!p||x();for(let P=u,E=u;P<=h;++P)y=e[P%o],!y.skip&&(v=c(y[i]),v!==w&&(p=l(v,r,s),m===null&&S()&&(m=a(v,r)===0?P:E),m!==null&&T()&&(g.push(K2({start:m,end:P,loop:d,count:o,style:f})),m=null),E=P,w=v));return m!==null&&g.push(K2({start:m,end:h,loop:d,count:o,style:f})),g}function A4(n,e){const t=[],i=n.segments;for(let r=0;r<i.length;r++){const s=M4(i[r],n.points,e);s.length&&t.push(...s)}return t}function Toe(n,e,t,i){let r=0,s=e-1;if(t&&!i)for(;r<e&&!n[r].skip;)r++;for(;r<e&&n[r].skip;)r++;for(r%=e,t&&(s+=r);s>r&&n[s%e].skip;)s--;return s%=e,{start:r,end:s}}function Moe(n,e,t,i){const r=n.length,s=[];let o=e,a=n[e],l;for(l=e+1;l<=t;++l){const c=n[l%r];c.skip||c.stop?a.skip||(i=!1,s.push({start:e%r,end:(l-1)%r,loop:i}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&s.push({start:e%r,end:o%r,loop:i}),s}function Aoe(n,e){const t=n.points,i=n.options.spanGaps,r=t.length;if(!r)return[];const s=!!n._loop,{start:o,end:a}=Toe(t,r,s,i);if(i===!0)return q2(n,[{start:o,end:a,loop:s}],t,e);const l=a<o?a+r:a,c=!!n._fullLoop&&o===0&&a===r-1;return q2(n,Moe(t,o,l,c),t,e)}function q2(n,e,t,i){return!i||!i.setContext||!t?e:Poe(n,e,t,i)}function Poe(n,e,t,i){const r=n._chart.getContext(),s=X2(n.options),{_datasetIndex:o,options:{spanGaps:a}}=n,l=t.length,c=[];let u=s,h=e[0].start,d=h;function f(g,p,m,v){const y=a?-1:1;if(g!==p){for(g+=l;t[g%l].skip;)g-=y;for(;t[p%l].skip;)p+=y;g%l!==p%l&&(c.push({start:g%l,end:p%l,loop:m,style:v}),u=v,h=p%l)}}for(const g of e){h=a?h:g.start;let p=t[h%l],m;for(d=h+1;d<=g.end;d++){const v=t[d%l];m=X2(i.setContext(rh(r,{type:"segment",p0:p,p1:v,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:o}))),Ioe(m,u)&&f(h,d-1,g.loop,u),p=v,u=m}h<d-1&&f(h,d-1,g.loop,u)}return c}function X2(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function Ioe(n,e){if(!e)return!1;const t=[],i=function(r,s){return _k(s)?(t.includes(s)||t.push(s),t.indexOf(s)):s};return JSON.stringify(n,i)!==JSON.stringify(e,i)}/*!
 * Chart.js v4.4.6
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */class Ooe{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,i,r){const s=t.listeners[r],o=t.duration;s.forEach(a=>a({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(i-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=d4.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const s=i.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(r.draw(),this._notify(r,i,e,"progress")),s.length||(i.running=!1,this._notify(r,i,e,"complete"),i.initial=!1),t+=s.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let i=t.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,i)),i}listen(e,t,i){this._getAnims(e).listeners[t].push(i)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const i=t.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var zl=new Ooe;const Z2="transparent",koe={boolean(n,e,t){return t>.5?e:n},color(n,e,t){const i=V2(n||Z2),r=i.valid&&V2(e||Z2);return r&&r.valid?r.mix(i,t).hexString():e},number(n,e,t){return n+(e-n)*t}};class Doe{constructor(e,t,i,r){const s=t[i];r=Bb([e.to,r,s,e.from]);const o=Bb([e.from,s,r]);this._active=!0,this._fn=e.fn||koe[e.type||typeof o],this._easing=bv[e.easing]||bv.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=i,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,i){if(this._active){this._notify(!1);const r=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Bb([e.to,t,r,e.from]),this._from=Bb([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,i=this._duration,r=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||t<i),!this._active){this._target[r]=a,this._notify(!0);return}if(t<0){this._target[r]=s;return}l=t/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,i)=>{e.push({res:t,rej:i})})}_notify(e){const t=e?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][t]()}}class P4{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Et(e))return;const t=Object.keys(Dn.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const s=e[r];if(!Et(s))return;const o={};for(const a of t)o[a]=s[a];(On(s.properties)&&s.properties||[r]).forEach(a=>{(a===r||!i.has(a))&&i.set(a,o)})})}_animateOptions(e,t){const i=t.options,r=Noe(e,i);if(!r)return[];const s=this._createAnimations(r,i);return i.$shared&&Loe(e.options.$animations,i).then(()=>{e.options=i},()=>{}),s}_createAnimations(e,t){const i=this._properties,r=[],s=e.$animations||(e.$animations={}),o=Object.keys(t),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){r.push(...this._animateOptions(e,t));continue}const u=t[c];let h=s[c];const d=i.get(c);if(h)if(d&&h.active()){h.update(d,u,a);continue}else h.cancel();if(!d||!d.duration){e[c]=u;continue}s[c]=h=new Doe(d,e,c,u),r.push(h)}return r}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const i=this._createAnimations(e,t);if(i.length)return zl.add(this._chart,i),!0}}function Loe(n,e){const t=[],i=Object.keys(e);for(let r=0;r<i.length;r++){const s=n[i[r]];s&&s.active()&&t.push(s.wait())}return Promise.all(t)}function Noe(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function Q2(n,e){const t=n&&n.options||{},i=t.reverse,r=t.min===void 0?e:0,s=t.max===void 0?e:0;return{start:i?s:r,end:i?r:s}}function Hoe(n,e,t){if(t===!1)return!1;const i=Q2(n,t),r=Q2(e,t);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function $oe(n){let e,t,i,r;return Et(n)?(e=n.top,t=n.right,i=n.bottom,r=n.left):e=t=i=r=n,{top:e,right:t,bottom:i,left:r,disabled:n===!1}}function I4(n,e){const t=[],i=n._getSortedDatasetMetas(e);let r,s;for(r=0,s=i.length;r<s;++r)t.push(i[r].index);return t}function J2(n,e,t,i={}){const r=n.keys,s=i.mode==="single";let o,a,l,c;if(e===null)return;let u=!1;for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===t){if(u=!0,i.all)continue;break}c=n.values[l],ti(c)&&(s||e===0||Ja(e)===Ja(c))&&(e+=c)}return!u&&!i.all?0:e}function Foe(n,e){const{iScale:t,vScale:i}=e,r=t.axis==="x"?"x":"y",s=i.axis==="x"?"x":"y",o=Object.keys(n),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[r]:u,[s]:n[u]};return a}function Rx(n,e){const t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function Boe(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function Voe(n){const{min:e,max:t,minDefined:i,maxDefined:r}=n.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?t:Number.POSITIVE_INFINITY}}function Woe(n,e,t){const i=n[e]||(n[e]={});return i[t]||(i[t]={})}function eF(n,e,t,i){for(const r of e.getMatchingVisibleMetas(i).reverse()){const s=n[r.index];if(t&&s>0||!t&&s<0)return r.index}return null}function tF(n,e){const{chart:t,_cachedMeta:i}=n,r=t._stacks||(t._stacks={}),{iScale:s,vScale:o,index:a}=i,l=s.axis,c=o.axis,u=Boe(s,o,i),h=e.length;let d;for(let f=0;f<h;++f){const g=e[f],{[l]:p,[c]:m}=g,v=g._stacks||(g._stacks={});d=v[c]=Woe(r,u,p),d[a]=m,d._top=eF(d,o,!0,i.type),d._bottom=eF(d,o,!1,i.type);const y=d._visualValues||(d._visualValues={});y[a]=m}}function Ex(n,e){const t=n.scales;return Object.keys(t).filter(i=>t[i].axis===e).shift()}function joe(n,e){return rh(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function zoe(n,e,t){return rh(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function Sm(n,e){const t=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){e=e||n._parsed;for(const r of e){const s=r._stacks;if(!s||s[i]===void 0||s[i][t]===void 0)return;delete s[i][t],s[i]._visualValues!==void 0&&s[i]._visualValues[t]!==void 0&&delete s[i]._visualValues[t]}}}const xx=n=>n==="reset"||n==="none",nF=(n,e)=>e?n:Object.assign({},n),Uoe=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:I4(t,!0),values:null};class fo{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Rx(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Sm(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,i=this.getDataset(),r=(h,d,f,g)=>h==="x"?d:h==="r"?g:f,s=t.xAxisID=rt(i.xAxisID,Ex(e,"x")),o=t.yAxisID=rt(i.yAxisID,Ex(e,"y")),a=t.rAxisID=rt(i.rAxisID,Ex(e,"r")),l=t.indexAxis,c=t.iAxisID=r(l,s,o,a),u=t.vAxisID=r(l,o,s,a);t.xScale=this.getScaleForId(s),t.yScale=this.getScaleForId(o),t.rScale=this.getScaleForId(a),t.iScale=this.getScaleForId(c),t.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&$2(this._data,this),e._stacked&&Sm(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),i=this._data;if(Et(t)){const r=this._cachedMeta;this._data=Foe(t,r)}else if(i!==t){if(i){$2(i,this);const r=this._cachedMeta;Sm(r),r._parsed=[]}t&&Object.isExtensible(t)&&Pse(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const s=t._stacked;t._stacked=Rx(t.vScale,t),t.stack!==i.stack&&(r=!0,Sm(t),t.stack=i.stack),this._resyncElements(e),(r||s!==t._stacked)&&(tF(this,t._parsed),t._stacked=Rx(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:i,_data:r}=this,{iScale:s,_stacked:o}=i,a=s.axis;let l=e===0&&t===r.length?!0:i._sorted,c=e>0&&i._parsed[e-1],u,h,d;if(this._parsing===!1)i._parsed=r,i._sorted=!0,d=r;else{On(r[e])?d=this.parseArrayData(i,r,e,t):Et(r[e])?d=this.parseObjectData(i,r,e,t):d=this.parsePrimitiveData(i,r,e,t);const f=()=>h[a]===null||c&&h[a]<c[a];for(u=0;u<t;++u)i._parsed[u+e]=h=d[u],l&&(f()&&(l=!1),c=h);i._sorted=l}o&&tF(this,d)}parsePrimitiveData(e,t,i,r){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),u=s===o,h=new Array(r);let d,f,g;for(d=0,f=r;d<f;++d)g=d+i,h[d]={[a]:u||s.parse(c[g],g),[l]:o.parse(t[g],g)};return h}parseArrayData(e,t,i,r){const{xScale:s,yScale:o}=e,a=new Array(r);let l,c,u,h;for(l=0,c=r;l<c;++l)u=l+i,h=t[u],a[l]={x:s.parse(h[0],u),y:o.parse(h[1],u)};return a}parseObjectData(e,t,i,r){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(r);let u,h,d,f;for(u=0,h=r;u<h;++u)d=u+i,f=t[d],c[u]={x:s.parse(ju(f,a),d),y:o.parse(ju(f,l),d)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,i){const r=this.chart,s=this._cachedMeta,o=t[e.axis],a={keys:I4(r,!0),values:t._stacks[e.axis]._visualValues};return J2(a,o,s.index,{mode:i})}updateRangeFromParsed(e,t,i,r){const s=i[t.axis];let o=s===null?NaN:s;const a=r&&i._stacks[t.axis];r&&a&&(r.values=a,o=J2(r,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,t){const i=this._cachedMeta,r=i._parsed,s=i._sorted&&e===i.iScale,o=r.length,a=this._getOtherScale(e),l=Uoe(t,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=Voe(a);let d,f;function g(){f=r[d];const p=f[a.axis];return!ti(f[e.axis])||u>p||h<p}for(d=0;d<o&&!(!g()&&(this.updateRangeFromParsed(c,e,f,l),s));++d);if(s){for(d=o-1;d>=0;--d)if(!g()){this.updateRangeFromParsed(c,e,f,l);break}}return c}getAllParsedValues(e){const t=this._cachedMeta._parsed,i=[];let r,s,o;for(r=0,s=t.length;r<s;++r)o=t[r][e.axis],ti(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,i=t.iScale,r=t.vScale,s=this.getParsed(e);return{label:i?""+i.getLabelForValue(s[i.axis]):"",value:r?""+r.getLabelForValue(s[r.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=$oe(rt(this.options.clip,Hoe(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,i=this._cachedMeta,r=i.data||[],s=t.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||r.length-a,c=this.options.drawActiveElementsOnTop;let u;for(i.dataset&&i.dataset.draw(e,s,a,l),u=a;u<a+l;++u){const h=r[u];h.hidden||(h.active&&c?o.push(h):h.draw(e,s))}for(u=0;u<o.length;++u)o[u].draw(e,s)}getStyle(e,t){const i=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,t,i){const r=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=zoe(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=r.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=joe(this.chart.getContext(),this.index)),s.dataset=r,s.index=s.datasetIndex=this.index;return s.active=!!t,s.mode=i,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",i){const r=t==="active",s=this._cachedDataOpts,o=e+"-"+t,a=s[o],l=this.enableOptionSharing&&ow(i);if(a)return nF(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),h=r?[`${e}Hover`,"hover",e,""]:[e,""],d=c.getOptionScopes(this.getDataset(),u),f=Object.keys(Dn.elements[e]),g=()=>this.getContext(i,r,t),p=c.resolveNamedOptions(d,f,g,h);return p.$shared&&(p.$shared=l,s[o]=Object.freeze(nF(p,l))),p}_resolveAnimations(e,t,i){const r=this.chart,s=this._cachedDataOpts,o=`animation-${t}`,a=s[o];if(a)return a;let l;if(r.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,t),d=u.getOptionScopes(this.getDataset(),h);l=u.createResolver(d,this.getContext(e,i,t))}const c=new P4(r,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||xx(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const i=this.resolveDataElementOptions(e,t),r=this._sharedOptions,s=this.getSharedOptions(i),o=this.includeOptions(t,s)||s!==r;return this.updateSharedOptions(s,t,i),{sharedOptions:s,includeOptions:o}}updateElement(e,t,i,r){xx(r)?Object.assign(e,i):this._resolveAnimations(t,r).update(e,i)}updateSharedOptions(e,t,i){e&&!xx(t)&&this._resolveAnimations(void 0,t).update(e,i)}_setStyle(e,t,i,r){e.active=r;const s=this.getStyle(t,r);this._resolveAnimations(t,i,r).update(e,{options:!r&&this.getSharedOptions(s)||s})}removeHoverStyle(e,t,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,t,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,i=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const r=i.length,s=t.length,o=Math.min(s,r);o&&this.parse(0,o),s>r?this._insertElements(r,s-r,e):s<r&&this._removeElements(s,r-s)}_insertElements(e,t,i=!0){const r=this._cachedMeta,s=r.data,o=e+t;let a;const l=c=>{for(c.length+=t,a=c.length-1;a>=o;a--)c[a]=c[a-t]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(r._parsed),this.parse(e,t),i&&this.updateElements(s,e,t,"reset")}updateElements(e,t,i,r){}_removeElements(e,t){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(e,t);i._stacked&&Sm(i,r)}i.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,i,r]=e;this[t](i,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}fo.defaults={};fo.datasetElementType=null;fo.dataElementType=null;function Goe(n,e){if(!n._cache.$bar){const t=n.getMatchingVisibleMetas(e);let i=[];for(let r=0,s=t.length;r<s;r++)i=i.concat(t[r].controller.getAllParsedValues(n));n._cache.$bar=h4(i.sort((r,s)=>r-s))}return n._cache.$bar}function Yoe(n){const e=n.iScale,t=Goe(e,n.type);let i=e._length,r,s,o,a;const l=()=>{o===32767||o===-32768||(ow(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(r=0,s=t.length;r<s;++r)o=e.getPixelForValue(t[r]),l();for(a=void 0,r=0,s=e.ticks.length;r<s;++r)o=e.getPixelForTick(r),l();return i}function Koe(n,e,t,i){const r=t.barThickness;let s,o;return Dt(r)?(s=e.min*t.categoryPercentage,o=t.barPercentage):(s=r*i,o=1),{chunk:s/i,ratio:o,start:e.pixels[n]-s/2}}function qoe(n,e,t,i){const r=e.pixels,s=r[n];let o=n>0?r[n-1]:null,a=n<r.length-1?r[n+1]:null;const l=t.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/i,ratio:t.barPercentage,start:c}}function Xoe(n,e,t,i){const r=t.parse(n[0],i),s=t.parse(n[1],i),o=Math.min(r,s),a=Math.max(r,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[t.axis]=c,e._custom={barStart:l,barEnd:c,start:r,end:s,min:o,max:a}}function O4(n,e,t,i){return On(n)?Xoe(n,e,t,i):e[t.axis]=t.parse(n,i),e}function iF(n,e,t,i){const r=n.iScale,s=n.vScale,o=r.getLabels(),a=r===s,l=[];let c,u,h,d;for(c=t,u=t+i;c<u;++c)d=e[c],h={},h[r.axis]=a||r.parse(o[c],c),l.push(O4(d,h,s,c));return l}function Tx(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function Zoe(n,e,t){return n!==0?Ja(n):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function Qoe(n){let e,t,i,r,s;return n.horizontal?(e=n.base>n.x,t="left",i="right"):(e=n.base<n.y,t="bottom",i="top"),e?(r="end",s="start"):(r="start",s="end"),{start:t,end:i,reverse:e,top:r,bottom:s}}function Joe(n,e,t,i){let r=e.borderSkipped;const s={};if(!r){n.borderSkipped=s;return}if(r===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:u}=Qoe(n);r==="middle"&&t&&(n.enableBorderRadius=!0,(t._top||0)===i?r=c:(t._bottom||0)===i?r=u:(s[rF(u,o,a,l)]=!0,r=c)),s[rF(r,o,a,l)]=!0,n.borderSkipped=s}function rF(n,e,t,i){return i?(n=eae(n,e,t),n=sF(n,t,e)):n=sF(n,e,t),n}function eae(n,e,t){return n===e?t:n===t?e:n}function sF(n,e,t){return n==="start"?e:n==="end"?t:n}function tae(n,{inflateAmount:e},t){n.inflateAmount=e==="auto"?t===1?.33:0:e}class m1 extends fo{parsePrimitiveData(e,t,i,r){return iF(e,t,i,r)}parseArrayData(e,t,i,r){return iF(e,t,i,r)}parseObjectData(e,t,i,r){const{iScale:s,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=s.axis==="x"?a:l,u=o.axis==="x"?a:l,h=[];let d,f,g,p;for(d=i,f=i+r;d<f;++d)p=t[d],g={},g[s.axis]=s.parse(ju(p,c),d),h.push(O4(ju(p,u),g,o,d));return h}updateRangeFromParsed(e,t,i,r){super.updateRangeFromParsed(e,t,i,r);const s=i._custom;s&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:i,vScale:r}=t,s=this.getParsed(e),o=s._custom,a=Tx(o)?"["+o.start+", "+o.end+"]":""+r.getLabelForValue(s[r.axis]);return{label:""+i.getLabelForValue(s[i.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,i,r){const s=r==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:d}=this._getSharedOptions(t,r);for(let f=t;f<t+i;f++){const g=this.getParsed(f),p=s||Dt(g[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(f),m=this._calculateBarIndexPixels(f,u),v=(g._stacks||{})[a.axis],y={horizontal:c,base:p.base,enableBorderRadius:!v||Tx(g._custom)||o===v._top||o===v._bottom,x:c?p.head:m.center,y:c?m.center:p.head,height:c?m.size:Math.abs(p.size),width:c?Math.abs(p.size):m.size};d&&(y.options=h||this.resolveDataElementOptions(f,e[f].active?"active":r));const w=y.options||e[f].options;Joe(y,w,v,o),tae(y,w,u.ratio),this.updateElement(e[f],f,y,r)}}_getStacks(e,t){const{iScale:i}=this._cachedMeta,r=i.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),s=i.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(t),l=a&&a[i.axis],c=u=>{const h=u._parsed.find(f=>f[i.axis]===l),d=h&&h[u.vScale.axis];if(Dt(d)||isNaN(d))return!0};for(const u of r)if(!(t!==void 0&&c(u))&&((s===!1||o.indexOf(u.stack)===-1||s===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,t,i){const r=this._getStacks(e,i),s=t!==void 0?r.indexOf(t):-1;return s===-1?r.length-1:s}_getRuler(){const e=this.options,t=this._cachedMeta,i=t.iScale,r=[];let s,o;for(s=0,o=t.data.length;s<o;++s)r.push(i.getPixelForValue(this.getParsed(s)[i.axis],s));const a=e.barThickness;return{min:a||Yoe(t),pixels:r,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:i,index:r},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(e),c=l._custom,u=Tx(c);let h=l[t.axis],d=0,f=i?this.applyStack(t,l,i):h,g,p;f!==h&&(d=f-h,f=h),u&&(h=c.barStart,f=c.barEnd-c.barStart,h!==0&&Ja(h)!==Ja(c.barEnd)&&(d=0),d+=h);const m=!Dt(s)&&!u?s:d;let v=t.getPixelForValue(m);if(this.chart.getDataVisibility(e)?g=t.getPixelForValue(d+f):g=v,p=g-v,Math.abs(p)<o){p=Zoe(p,t,a)*o,h===a&&(v-=p/2);const y=t.getPixelForDecimal(0),w=t.getPixelForDecimal(1),R=Math.min(y,w),x=Math.max(y,w);v=Math.max(Math.min(v,x),R),g=v+p,i&&!u&&(l._stacks[t.axis]._visualValues[r]=t.getValueForPixel(g)-t.getValueForPixel(v))}if(v===t.getPixelForValue(a)){const y=Ja(p)*t.getLineWidthForValue(a)/2;v+=y,p-=y}return{size:p,base:v,head:g,center:g+p/2}}_calculateBarIndexPixels(e,t){const i=t.scale,r=this.options,s=r.skipNull,o=rt(r.maxBarThickness,1/0);let a,l;if(t.grouped){const c=s?this._getStackCount(e):t.stackCount,u=r.barThickness==="flex"?qoe(e,t,r,c):Koe(e,t,r,c),h=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0);a=u.start+u.chunk*h+u.chunk/2,l=Math.min(o,u.chunk*u.ratio)}else a=i.getPixelForValue(this.getParsed(e)[i.axis],e),l=Math.min(o,t.min*t.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,t=e.vScale,i=e.data,r=i.length;let s=0;for(;s<r;++s)this.getParsed(s)[t.axis]!==null&&!i[s].hidden&&i[s].draw(this._ctx)}}m1.id="bar";m1.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};m1.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};class b1 extends fo{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,i,r){const s=super.parsePrimitiveData(e,t,i,r);for(let o=0;o<s.length;o++)s[o]._custom=this.resolveDataElementOptions(o+i).radius;return s}parseArrayData(e,t,i,r){const s=super.parseArrayData(e,t,i,r);for(let o=0;o<s.length;o++){const a=t[i+o];s[o]._custom=rt(a[2],this.resolveDataElementOptions(o+i).radius)}return s}parseObjectData(e,t,i,r){const s=super.parseObjectData(e,t,i,r);for(let o=0;o<s.length;o++){const a=t[i+o];s[o]._custom=rt(a&&a.r&&+a.r,this.resolveDataElementOptions(o+i).radius)}return s}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let i=e.length-1;i>=0;--i)t=Math.max(t,e[i].size(this.resolveDataElementOptions(i))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart.data.labels||[],{xScale:r,yScale:s}=t,o=this.getParsed(e),a=r.getLabelForValue(o.x),l=s.getLabelForValue(o.y),c=o._custom;return{label:i[e]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,i,r){const s=r==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(t,r),u=o.axis,h=a.axis;for(let d=t;d<t+i;d++){const f=e[d],g=!s&&this.getParsed(d),p={},m=p[u]=s?o.getPixelForDecimal(.5):o.getPixelForValue(g[u]),v=p[h]=s?a.getBasePixel():a.getPixelForValue(g[h]);p.skip=isNaN(m)||isNaN(v),c&&(p.options=l||this.resolveDataElementOptions(d,f.active?"active":r),s&&(p.options.radius=0)),this.updateElement(f,d,p,r)}}resolveDataElementOptions(e,t){const i=this.getParsed(e);let r=super.resolveDataElementOptions(e,t);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const s=r.radius;return t!=="active"&&(r.radius=0),r.radius+=rt(i&&i._custom,s),r}}b1.id="bubble";b1.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};b1.overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};function nae(n,e,t){let i=1,r=1,s=0,o=0;if(e<Rn){const a=n,l=a+e,c=Math.cos(a),u=Math.sin(a),h=Math.cos(l),d=Math.sin(l),f=(w,R,x)=>aw(w,a,l,!0)?1:Math.max(R,R*t,x,x*t),g=(w,R,x)=>aw(w,a,l,!0)?-1:Math.min(R,R*t,x,x*t),p=f(0,c,h),m=f(oi,u,d),v=g(En,c,h),y=g(En+oi,u,d);i=(p-v)/2,r=(m-y)/2,s=-(p+v)/2,o=-(m+y)/2}return{ratioX:i,ratioY:r,offsetX:s,offsetY:o}}class Cf extends fo{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const i=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=i;else{let s=l=>+i[l];if(Et(i[e])){const{key:l="value"}=this._parsing;s=c=>+ju(i[c],l)}let o,a;for(o=e,a=e+t;o<a;++o)r._parsed[o]=s(o)}}_getRotation(){return Ko(this.options.rotation-90)}_getCircumference(){return Ko(this.options.circumference)}_getRotationExtents(){let e=Rn,t=-Rn;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const r=this.chart.getDatasetMeta(i).controller,s=r._getRotation(),o=r._getCircumference();e=Math.min(e,s),t=Math.max(t,s+o)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:i}=t,r=this._cachedMeta,s=r.data,o=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,a=Math.max((Math.min(i.width,i.height)-o)/2,0),l=Math.min(mse(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:d,ratioY:f,offsetX:g,offsetY:p}=nae(h,u,l),m=(i.width-o)/d,v=(i.height-o)/f,y=Math.max(Math.min(m,v)/2,0),w=o4(this.options.radius,y),R=Math.max(w*l,0),x=(w-R)/this._getVisibleDatasetWeightTotal();this.offsetX=g*w,this.offsetY=p*w,r.total=this.calculateTotal(),this.outerRadius=w-x*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-x*c,0),this.updateElements(s,0,s.length,e)}_circumference(e,t){const i=this.options,r=this._cachedMeta,s=this._getCircumference();return t&&i.animation.animateRotate||!this.chart.getDataVisibility(e)||r._parsed[e]===null||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*s/Rn)}updateElements(e,t,i,r){const s=r==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,u=(a.left+a.right)/2,h=(a.top+a.bottom)/2,d=s&&c.animateScale,f=d?0:this.innerRadius,g=d?0:this.outerRadius,{sharedOptions:p,includeOptions:m}=this._getSharedOptions(t,r);let v=this._getRotation(),y;for(y=0;y<t;++y)v+=this._circumference(y,s);for(y=t;y<t+i;++y){const w=this._circumference(y,s),R=e[y],x={x:u+this.offsetX,y:h+this.offsetY,startAngle:v,endAngle:v+w,circumference:w,outerRadius:g,innerRadius:f};m&&(x.options=p||this.resolveDataElementOptions(y,R.active?"active":r)),v+=w,this.updateElement(R,y,x,r)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let i=0,r;for(r=0;r<t.length;r++){const s=e._parsed[r];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(r)&&!t[r].hidden&&(i+=Math.abs(s))}return i}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?Rn*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart,r=i.data.labels||[],s=Yw(t._parsed[e],i.options.locale);return{label:r[e]||"",value:s}}getMaxBorderWidth(e){let t=0;const i=this.chart;let r,s,o,a,l;if(!e){for(r=0,s=i.data.datasets.length;r<s;++r)if(i.isDatasetVisible(r)){o=i.getDatasetMeta(r),e=o.data,a=o.controller;break}}if(!e)return 0;for(r=0,s=e.length;r<s;++r)l=a.resolveDataElementOptions(r),l.borderAlign!=="inner"&&(t=Math.max(t,l.borderWidth||0,l.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let i=0,r=e.length;i<r;++i){const s=this.resolveDataElementOptions(i);t=Math.max(t,s.offset||0,s.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(t+=this._getRingWeight(i));return t}_getRingWeight(e){return Math.max(rt(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Cf.id="doughnut";Cf.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};Cf.descriptors={_scriptable:n=>n!=="spacing",_indexable:n=>n!=="spacing"&&!n.startsWith("borderDash")&&!n.startsWith("hoverBorderDash")};Cf.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(n){const e=n.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:t,color:i}}=n.legend.options;return e.labels.map((r,s)=>{const a=n.getDatasetMeta(0).controller.getStyle(s);return{text:r,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,fontColor:i,lineWidth:a.borderWidth,pointStyle:t,hidden:!n.getDataVisibility(s),index:s}})}return[]}},onClick(n,e,t){t.chart.toggleDataVisibility(e.index),t.chart.update()}}}};class v1 extends fo{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:i,data:r=[],_dataset:s}=t,o=this.chart._animationsDisabled;let{start:a,count:l}=g4(t,r,o);this._drawStart=a,this._drawCount=l,p4(t)&&(a=0,l=r.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=r;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:c},e),this.updateElements(r,a,l,e)}updateElements(e,t,i,r){const s=r==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(t,r),d=o.axis,f=a.axis,{spanGaps:g,segment:p}=this.options,m=Sp(g)?g:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||s||r==="none",y=t+i,w=e.length;let R=t>0&&this.getParsed(t-1);for(let x=0;x<w;++x){const S=e[x],T=v?S:{};if(x<t||x>=y){T.skip=!0;continue}const P=this.getParsed(x),E=Dt(P[f]),A=T[d]=o.getPixelForValue(P[d],x),L=T[f]=s||E?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,P,l):P[f],x);T.skip=isNaN(A)||isNaN(L)||E,T.stop=x>0&&Math.abs(P[d]-R[d])>m,p&&(T.parsed=P,T.raw=c.data[x]),h&&(T.options=u||this.resolveDataElementOptions(x,S.active?"active":r)),v||this.updateElement(S,x,T,r),R=P}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,i=t.options&&t.options.borderWidth||0,r=e.data||[];if(!r.length)return i;const s=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(i,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}v1.id="line";v1.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};v1.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};class Kw extends fo{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart,r=i.data.labels||[],s=Yw(t._parsed[e].r,i.options.locale);return{label:r[e]||"",value:s}}parseObjectData(e,t,i,r){return _4.bind(this)(e,t,i,r)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((i,r)=>{const s=this.getParsed(r).r;!isNaN(s)&&this.chart.getDataVisibility(r)&&(s<t.min&&(t.min=s),s>t.max&&(t.max=s))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,i=e.options,r=Math.min(t.right-t.left,t.bottom-t.top),s=Math.max(r/2,0),o=Math.max(i.cutoutPercentage?s/100*i.cutoutPercentage:1,0),a=(s-o)/e.getVisibleDatasetCount();this.outerRadius=s-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,t,i,r){const s=r==="reset",o=this.chart,l=o.options.animation,c=this._cachedMeta.rScale,u=c.xCenter,h=c.yCenter,d=c.getIndexAngle(0)-.5*En;let f=d,g;const p=360/this.countVisibleElements();for(g=0;g<t;++g)f+=this._computeAngle(g,r,p);for(g=t;g<t+i;g++){const m=e[g];let v=f,y=f+this._computeAngle(g,r,p),w=o.getDataVisibility(g)?c.getDistanceFromCenterForValue(this.getParsed(g).r):0;f=y,s&&(l.animateScale&&(w=0),l.animateRotate&&(v=y=d));const R={x:u,y:h,innerRadius:0,outerRadius:w,startAngle:v,endAngle:y,options:this.resolveDataElementOptions(g,m.active?"active":r)};this.updateElement(m,g,R,r)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((i,r)=>{!isNaN(this.getParsed(r).r)&&this.chart.getDataVisibility(r)&&t++}),t}_computeAngle(e,t,i){return this.chart.getDataVisibility(e)?Ko(this.resolveDataElementOptions(e,t).angle||i):0}}Kw.id="polarArea";Kw.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};Kw.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(n){const e=n.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:t,color:i}}=n.legend.options;return e.labels.map((r,s)=>{const a=n.getDatasetMeta(0).controller.getStyle(s);return{text:r,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,fontColor:i,lineWidth:a.borderWidth,pointStyle:t,hidden:!n.getDataVisibility(s),index:s}})}return[]}},onClick(n,e,t){t.chart.toggleDataVisibility(e.index),t.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};class Pk extends Cf{}Pk.id="pie";Pk.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"};class w1 extends fo{getLabelAndValue(e){const t=this._cachedMeta.vScale,i=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(i[t.axis])}}parseObjectData(e,t,i,r){return _4.bind(this)(e,t,i,r)}update(e){const t=this._cachedMeta,i=t.dataset,r=t.data||[],s=t.iScale.getLabels();if(i.points=r,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:s.length===r.length,options:o};this.updateElement(i,void 0,a,e)}this.updateElements(r,0,r.length,e)}updateElements(e,t,i,r){const s=this._cachedMeta.rScale,o=r==="reset";for(let a=t;a<t+i;a++){const l=e[a],c=this.resolveDataElementOptions(a,l.active?"active":r),u=s.getPointPositionForValue(a,this.getParsed(a).r),h=o?s.xCenter:u.x,d=o?s.yCenter:u.y,f={x:h,y:d,angle:u.angle,skip:isNaN(h)||isNaN(d),options:c};this.updateElement(l,a,f,r)}}}w1.id="radar";w1.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};w1.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};class y1 extends fo{getLabelAndValue(e){const t=this._cachedMeta,i=this.chart.data.labels||[],{xScale:r,yScale:s}=t,o=this.getParsed(e),a=r.getLabelForValue(o.x),l=s.getLabelForValue(o.y);return{label:i[e]||"",value:"("+a+", "+l+")"}}update(e){const t=this._cachedMeta,{data:i=[]}=t,r=this.chart._animationsDisabled;let{start:s,count:o}=g4(t,i,r);if(this._drawStart=s,this._drawCount=o,p4(t)&&(s=0,o=i.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=t;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=i;const c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!r,options:c},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(i,s,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,i,r){const s=r==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,u=this.resolveDataElementOptions(t,r),h=this.getSharedOptions(u),d=this.includeOptions(r,h),f=o.axis,g=a.axis,{spanGaps:p,segment:m}=this.options,v=Sp(p)?p:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||s||r==="none";let w=t>0&&this.getParsed(t-1);for(let R=t;R<t+i;++R){const x=e[R],S=this.getParsed(R),T=y?x:{},P=Dt(S[g]),E=T[f]=o.getPixelForValue(S[f],R),A=T[g]=s||P?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,S,l):S[g],R);T.skip=isNaN(E)||isNaN(A)||P,T.stop=R>0&&Math.abs(S[f]-w[f])>v,m&&(T.parsed=S,T.raw=c.data[R]),d&&(T.options=h||this.resolveDataElementOptions(R,x.active?"active":r)),y||this.updateElement(x,R,T,r),w=S}this.updateSharedOptions(h,r,u)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let a=0;for(let l=t.length-1;l>=0;--l)a=Math.max(a,t[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const i=e.dataset,r=i.options&&i.options.borderWidth||0;if(!t.length)return r;const s=t[0].size(this.resolveDataElementOptions(0)),o=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(r,s,o)/2}}y1.id="scatter";y1.defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};y1.overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};var iae=Object.freeze({__proto__:null,BarController:m1,BubbleController:b1,DoughnutController:Cf,LineController:v1,PieController:Pk,PolarAreaController:Kw,RadarController:w1,ScatterController:y1});function yh(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Ik{static override(e){Object.assign(Ik.prototype,e)}constructor(e){this.options=void 0,this.options=e||{}}init(){}formats(){return yh()}parse(){return yh()}format(){return yh()}add(){return yh()}diff(){return yh()}startOf(){return yh()}endOf(){return yh()}}var rae={_date:Ik};function sae(n,e,t,i){const{controller:r,data:s,_sorted:o}=n,a=r._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const l=a._reversePixels?Mse:hc;if(i){if(r._sharedOptions){const c=s[0],u=typeof c.getRange=="function"&&c.getRange(e);if(u){const h=l(s,e,t-u),d=l(s,e,t+u);return{lo:h.lo,hi:d.hi}}}}else return l(s,e,t)}return{lo:0,hi:s.length-1}}function qw(n,e,t,i,r){const s=n.getSortedVisibleDatasetMetas(),o=t[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:u}=s[a],{lo:h,hi:d}=sae(s[a],e,o,r);for(let f=h;f<=d;++f){const g=u[f];g.skip||i(g,c,f)}}}function oae(n){const e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(i,r){const s=e?Math.abs(i.x-r.x):0,o=t?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function Mx(n,e,t,i,r){const s=[];return!r&&!n.isPointInArea(e)||qw(n,t,e,function(a,l,c){!r&&!dc(a,n.chartArea,0)||a.inRange(e.x,e.y,i)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function aae(n,e,t,i){let r=[];function s(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],i),{angle:h}=c4(o,{x:e.x,y:e.y});aw(h,c,u)&&r.push({element:o,datasetIndex:a,index:l})}return qw(n,t,e,s),r}function lae(n,e,t,i,r,s){let o=[];const a=oae(t);let l=Number.POSITIVE_INFINITY;function c(u,h,d){const f=u.inRange(e.x,e.y,r);if(i&&!f)return;const g=u.getCenterPoint(r);if(!(!!s||n.isPointInArea(g))&&!f)return;const m=a(e,g);m<l?(o=[{element:u,datasetIndex:h,index:d}],l=m):m===l&&o.push({element:u,datasetIndex:h,index:d})}return qw(n,t,e,c),o}function Ax(n,e,t,i,r,s){return!s&&!n.isPointInArea(e)?[]:t==="r"&&!i?aae(n,e,t,r):lae(n,e,t,i,r,s)}function oF(n,e,t,i,r){const s=[],o=t==="x"?"inXRange":"inYRange";let a=!1;return qw(n,t,e,(l,c,u)=>{l[o]&&l[o](e[t],r)&&(s.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,r))}),i&&!a?[]:s}var cae={evaluateInteractionItems:qw,modes:{index(n,e,t,i){const r=dd(e,n),s=t.axis||"x",o=t.includeInvisible||!1,a=t.intersect?Mx(n,r,s,i,o):Ax(n,r,s,!1,i,o),l=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,h=c.data[u];h&&!h.skip&&l.push({element:h,datasetIndex:c.index,index:u})}),l):[]},dataset(n,e,t,i){const r=dd(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;let a=t.intersect?Mx(n,r,s,i,o):Ax(n,r,s,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,c=n.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(n,e,t,i){const r=dd(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;return Mx(n,r,s,i,o)},nearest(n,e,t,i){const r=dd(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;return Ax(n,r,s,t.intersect,i,o)},x(n,e,t,i){const r=dd(e,n);return oF(n,r,"x",t.intersect,i)},y(n,e,t,i){const r=dd(e,n);return oF(n,r,"y",t.intersect,i)}}};const k4=["left","top","right","bottom"];function _m(n,e){return n.filter(t=>t.pos===e)}function aF(n,e){return n.filter(t=>k4.indexOf(t.pos)===-1&&t.box.axis===e)}function Rm(n,e){return n.sort((t,i)=>{const r=e?i:t,s=e?t:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function uae(n){const e=[];let t,i,r,s,o,a;for(t=0,i=(n||[]).length;t<i;++t)r=n[t],{position:s,options:{stack:o,stackWeight:a=1}}=r,e.push({index:t,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return e}function hae(n){const e={};for(const t of n){const{stack:i,pos:r,stackWeight:s}=t;if(!i||!k4.includes(r))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function dae(n,e){const t=hae(n),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e;let s,o,a;for(s=0,o=n.length;s<o;++s){a=n[s];const{fullSize:l}=a.box,c=t[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*i:l&&e.availableWidth,a.height=r):(a.width=i,a.height=u?u*r:l&&e.availableHeight)}return t}function fae(n){const e=uae(n),t=Rm(e.filter(c=>c.box.fullSize),!0),i=Rm(_m(e,"left"),!0),r=Rm(_m(e,"right")),s=Rm(_m(e,"top"),!0),o=Rm(_m(e,"bottom")),a=aF(e,"x"),l=aF(e,"y");return{fullSize:t,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:_m(e,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(o).concat(a)}}function lF(n,e,t,i){return Math.max(n[t],e[t])+Math.max(n[i],e[i])}function D4(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function gae(n,e,t,i){const{pos:r,box:s}=t,o=n.maxPadding;if(!Et(r)){t.size&&(n[r]-=t.size);const h=i[t.stack]||{size:0,count:1};h.size=Math.max(h.size,t.horizontal?s.height:s.width),t.size=h.size/h.count,n[r]+=t.size}s.getPadding&&D4(o,s.getPadding());const a=Math.max(0,e.outerWidth-lF(o,n,"left","right")),l=Math.max(0,e.outerHeight-lF(o,n,"top","bottom")),c=a!==n.w,u=l!==n.h;return n.w=a,n.h=l,t.horizontal?{same:c,other:u}:{same:u,other:c}}function pae(n){const e=n.maxPadding;function t(i){const r=Math.max(e[i]-n[i],0);return n[i]+=r,r}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function mae(n,e){const t=e.maxPadding;function i(r){const s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(e[o],t[o])}),s}return i(n?["left","right"]:["top","bottom"])}function Vb(n,e,t,i){const r=[];let s,o,a,l,c,u;for(s=0,o=n.length,c=0;s<o;++s){a=n[s],l=a.box,l.update(a.width||e.w,a.height||e.h,mae(a.horizontal,e));const{same:h,other:d}=gae(e,t,a,i);c|=h&&r.length,u=u||d,l.fullSize||r.push(a)}return c&&Vb(r,e,t,i)||u}function Qy(n,e,t,i,r){n.top=t,n.left=e,n.right=e+i,n.bottom=t+r,n.width=i,n.height=r}function cF(n,e,t,i){const r=t.padding;let{x:s,y:o}=e;for(const a of n){const l=a.box,c=i[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const h=e.w*u,d=c.size||l.height;ow(c.start)&&(o=c.start),l.fullSize?Qy(l,r.left,o,t.outerWidth-r.right-r.left,d):Qy(l,e.left+c.placed,o,h,d),c.start=o,c.placed+=h,o=l.bottom}else{const h=e.h*u,d=c.size||l.width;ow(c.start)&&(s=c.start),l.fullSize?Qy(l,s,r.top,d,t.outerHeight-r.bottom-r.top):Qy(l,s,e.top+c.placed,d,h),c.start=s,c.placed+=h,s=l.right}}e.x=s,e.y=o}var lr={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){const t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,i){if(!n)return;const r=gr(n.options.layout.padding),s=Math.max(e-r.width,0),o=Math.max(t-r.height,0),a=fae(n.boxes),l=a.vertical,c=a.horizontal;Jt(n.boxes,p=>{typeof p.beforeLayout=="function"&&p.beforeLayout()});const u=l.reduce((p,m)=>m.box.options&&m.box.options.display===!1?p:p+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:t,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),d=Object.assign({},r);D4(d,gr(i));const f=Object.assign({maxPadding:d,w:s,h:o,x:r.left,y:r.top},r),g=dae(l.concat(c),h);Vb(a.fullSize,f,h,g),Vb(l,f,h,g),Vb(c,f,h,g)&&Vb(l,f,h,g),pae(f),cF(a.leftAndTop,f,h,g),f.x+=f.w,f.y+=f.h,cF(a.rightAndBottom,f,h,g),n.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},Jt(a.chartArea,p=>{const m=p.box;Object.assign(m,n.chartArea),m.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class L4{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,i){}removeEventListener(e,t,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,i,r){return t=Math.max(0,t||e.width),i=i||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):i)}}isAttached(e){return!0}updateConfig(e){}}class bae extends L4{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const wS="$chartjs",vae={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},uF=n=>n===null||n==="";function wae(n,e){const t=n.style,i=n.getAttribute("height"),r=n.getAttribute("width");if(n[wS]={initial:{height:i,width:r,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",uF(r)){const s=Y2(n,"width");s!==void 0&&(n.width=s)}if(uF(i))if(n.style.height==="")n.height=n.width/(e||2);else{const s=Y2(n,"height");s!==void 0&&(n.height=s)}return n}const N4=Coe?{passive:!0}:!1;function yae(n,e,t){n&&n.addEventListener(e,t,N4)}function Cae(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,N4)}function Sae(n,e){const t=vae[n.type]||n.type,{x:i,y:r}=dd(n,e);return{type:t,chart:e,native:n,x:i!==void 0?i:null,y:r!==void 0?r:null}}function E_(n,e){for(const t of n)if(t===e||t.contains(e))return!0}function _ae(n,e,t){const i=n.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||E_(a.addedNodes,i),o=o&&!E_(a.removedNodes,i);o&&t()});return r.observe(document,{childList:!0,subtree:!0}),r}function Rae(n,e,t){const i=n.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||E_(a.removedNodes,i),o=o&&!E_(a.addedNodes,i);o&&t()});return r.observe(document,{childList:!0,subtree:!0}),r}const cw=new Map;let hF=0;function H4(){const n=window.devicePixelRatio;n!==hF&&(hF=n,cw.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function Eae(n,e){cw.size||window.addEventListener("resize",H4),cw.set(n,e)}function xae(n){cw.delete(n),cw.size||window.removeEventListener("resize",H4)}function Tae(n,e,t){const i=n.canvas,r=i&&Ak(i);if(!r)return;const s=f4((a,l)=>{const c=r.clientWidth;t(a,l),c<r.clientWidth&&t()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||s(c,u)});return o.observe(r),Eae(n,s),o}function Px(n,e,t){t&&t.disconnect(),e==="resize"&&xae(n)}function Mae(n,e,t){const i=n.canvas,r=f4(s=>{n.ctx!==null&&t(Sae(s,n))},n);return yae(i,e,r),r}class Aae extends L4{acquireContext(e,t){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(wae(e,t),i):null}releaseContext(e){const t=e.canvas;if(!t[wS])return!1;const i=t[wS].initial;["height","width"].forEach(s=>{const o=i[s];Dt(o)?t.removeAttribute(s):t.setAttribute(s,o)});const r=i.style||{};return Object.keys(r).forEach(s=>{t.style[s]=r[s]}),t.width=t.width,delete t[wS],!0}addEventListener(e,t,i){this.removeEventListener(e,t);const r=e.$proxies||(e.$proxies={}),o={attach:_ae,detach:Rae,resize:Tae}[t]||Mae;r[t]=o(e,t,i)}removeEventListener(e,t){const i=e.$proxies||(e.$proxies={}),r=i[t];if(!r)return;({attach:Px,detach:Px,resize:Px}[t]||Cae)(e,t,r),i[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,i,r){return yoe(e,t,i,r)}isAttached(e){const t=e&&Ak(e);return!!(t&&t.isConnected)}}function Pae(n){return!Mk()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?bae:Aae}class go{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}hasValue(){return Sp(this.x)&&Sp(this.y)}getProps(e,t){const i=this.$animations;if(!t||!i)return this;const r={};return e.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}}go.defaults={};go.defaultRoutes=void 0;function Iae(n,e){const t=n.options.ticks,i=Oae(n),r=Math.min(t.maxTicksLimit||i,i),s=t.major.enabled?Dae(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>r)return Lae(e,c,s,o/r),c;const u=kae(s,e,r);if(o>0){let h,d;const f=o>1?Math.round((l-a)/(o-1)):null;for(Jy(e,c,u,Dt(f)?0:a-f,a),h=0,d=o-1;h<d;h++)Jy(e,c,u,s[h],s[h+1]);return Jy(e,c,u,l,Dt(f)?e.length:l+f),c}return Jy(e,c,u),c}function Oae(n){const e=n.options.offset,t=n._tickSize(),i=n._length/t+(e?0:1),r=n._maxLength/t;return Math.floor(Math.min(i,r))}function kae(n,e,t){const i=Nae(n),r=e.length/t;if(!i)return Math.max(r,1);const s=Rse(i);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>r)return l}return Math.max(r,1)}function Dae(n){const e=[];let t,i;for(t=0,i=n.length;t<i;t++)n[t].major&&e.push(t);return e}function Lae(n,e,t,i){let r=0,s=t[0],o;for(i=Math.ceil(i),o=0;o<n.length;o++)o===s&&(e.push(n[o]),r++,s=t[r*i])}function Jy(n,e,t,i,r){const s=rt(i,0),o=Math.min(rt(r,n.length),n.length);let a=0,l,c,u;for(t=Math.ceil(t),r&&(l=r-i,t=l/Math.floor(l/t)),u=s;u<0;)a++,u=Math.round(s+a*t);for(c=Math.max(s,0);c<o;c++)c===u&&(e.push(n[c]),a++,u=Math.round(s+a*t))}function Nae(n){const e=n.length;let t,i;if(e<2)return!1;for(i=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==i)return!1;return i}const Hae=n=>n==="left"?"right":n==="right"?"left":n,dF=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,fF=(n,e)=>Math.min(e||n,n);function gF(n,e){const t=[],i=n.length/e,r=n.length;let s=0;for(;s<r;s+=i)t.push(n[Math.floor(s)]);return t}function $ae(n,e,t){const i=n.ticks.length,r=Math.min(e,i-1),s=n._startPixel,o=n._endPixel,a=1e-6;let l=n.getPixelForTick(r),c;if(!(t&&(i===1?c=Math.max(l-s,o-l):e===0?c=(n.getPixelForTick(1)-l)/2:c=(l-n.getPixelForTick(r-1))/2,l+=r<e?c:-c,l<s-a||l>o+a)))return l}function Fae(n,e){Jt(n,t=>{const i=t.gc,r=i.length/2;let s;if(r>e){for(s=0;s<r;++s)delete t.data[i[s]];i.splice(0,r)}})}function Em(n){return n.drawTicks?n.tickLength:0}function pF(n,e){if(!n.display)return 0;const t=Mi(n.font,e),i=gr(n.padding);return(On(n.text)?n.text.length:1)*t.lineHeight+i.height}function Bae(n,e){return rh(n,{scale:e,type:"scale"})}function Vae(n,e,t){return rh(n,{tick:t,index:e,type:"tick"})}function Wae(n,e,t){let i=Sk(n);return(t&&e!=="right"||!t&&e==="right")&&(i=Hae(i)),i}function jae(n,e,t,i){const{top:r,left:s,bottom:o,right:a,chart:l}=n,{chartArea:c,scales:u}=l;let h=0,d,f,g;const p=o-r,m=a-s;if(n.isHorizontal()){if(f=rr(i,s,a),Et(t)){const v=Object.keys(t)[0],y=t[v];g=u[v].getPixelForValue(y)+p-e}else t==="center"?g=(c.bottom+c.top)/2+p-e:g=dF(n,t,e);d=a-s}else{if(Et(t)){const v=Object.keys(t)[0],y=t[v];f=u[v].getPixelForValue(y)-m+e}else t==="center"?f=(c.left+c.right)/2-m+e:f=dF(n,t,e);g=rr(i,o,r),h=t==="left"?-oi:oi}return{titleX:f,titleY:g,maxWidth:d,rotation:h}}class sh extends go{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:i,_suggestedMax:r}=this;return e=ls(e,Number.POSITIVE_INFINITY),t=ls(t,Number.NEGATIVE_INFINITY),i=ls(i,Number.POSITIVE_INFINITY),r=ls(r,Number.NEGATIVE_INFINITY),{min:ls(e,i),max:ls(t,r),minDefined:ti(e),maxDefined:ti(t)}}getMinMax(e){let{min:t,max:i,minDefined:r,maxDefined:s}=this.getUserBounds(),o;if(r&&s)return{min:t,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),r||(t=Math.min(t,o.min)),s||(i=Math.max(i,o.max));return t=s&&t>i?i:t,i=r&&t>i?t:i,{min:ls(t,ls(i,t)),max:ls(i,ls(t,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){vn(this.options.beforeUpdate,[this])}update(e,t,i){const{beginAtZero:r,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Qse(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?gF(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=Iae(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,i;this.isHorizontal()?(t=this.left,i=this.right):(t=this.top,i=this.bottom,e=!e),this._startPixel=t,this._endPixel=i,this._reversePixels=e,this._length=i-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){vn(this.options.afterUpdate,[this])}beforeSetDimensions(){vn(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){vn(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),vn(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){vn(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i],s.label=vn(t.callback,[s.value,i,e],this)}afterTickToLabelConversion(){vn(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){vn(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,i=fF(this.ticks.length,e.ticks.maxTicksLimit),r=t.minRotation||0,s=t.maxRotation;let o=r,a,l,c;if(!this._isVisible()||!t.display||r>=s||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const u=this._getLabelSizes(),h=u.widest.width,d=u.highest.height,f=$i(this.chart.width-h,0,this.maxWidth);a=e.offset?this.maxWidth/i:f/(i-1),h+6>a&&(a=f/(i-(e.offset?.5:1)),l=this.maxHeight-Em(e.grid)-t.padding-pF(e.title,this.chart.options.font),c=Math.sqrt(h*h+d*d),o=yk(Math.min(Math.asin($i((u.highest.height+6)/a,-1,1)),Math.asin($i(l/c,-1,1))-Math.asin($i(d/c,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){vn(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){vn(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:i,title:r,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=pF(r,t.options.font);if(a?(e.width=this.maxWidth,e.height=Em(s)+l):(e.height=this.maxHeight,e.width=Em(s)+l),i.display&&this.ticks.length){const{first:c,last:u,widest:h,highest:d}=this._getLabelSizes(),f=i.padding*2,g=Ko(this.labelRotation),p=Math.cos(g),m=Math.sin(g);if(a){const v=i.mirror?0:m*h.width+p*d.height;e.height=Math.min(this.maxHeight,e.height+v+f)}else{const v=i.mirror?0:p*h.width+m*d.height;e.width=Math.min(this.maxWidth,e.width+v+f)}this._calculatePadding(c,u,m,p)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,i,r){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,f=0;l?c?(d=r*e.width,f=i*t.height):(d=i*e.height,f=r*t.width):s==="start"?f=t.width:s==="end"?d=e.width:s!=="inner"&&(d=e.width/2,f=t.width/2),this.paddingLeft=Math.max((d-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((f-h+o)*this.width/(this.width-h),0)}else{let u=t.height/2,h=e.height/2;s==="start"?(u=0,h=e.height):s==="end"&&(u=t.height,h=0),this.paddingTop=u+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){vn(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,i;for(t=0,i=e.length;t<i;t++)Dt(e[t].label)&&(e.splice(t,1),i--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let i=this.ticks;t<i.length&&(i=gF(i,t)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,i){const{ctx:r,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(t/fF(t,i));let c=0,u=0,h,d,f,g,p,m,v,y,w,R,x;for(h=0;h<t;h+=l){if(g=e[h].label,p=this._resolveTickFontOptions(h),r.font=m=p.string,v=s[m]=s[m]||{data:{},gc:[]},y=p.lineHeight,w=R=0,!Dt(g)&&!On(g))w=S_(r,v.data,v.gc,w,g),R=y;else if(On(g))for(d=0,f=g.length;d<f;++d)x=g[d],!Dt(x)&&!On(x)&&(w=S_(r,v.data,v.gc,w,x),R+=y);o.push(w),a.push(R),c=Math.max(w,c),u=Math.max(R,u)}Fae(s,t);const S=o.indexOf(c),T=a.indexOf(u),P=E=>({width:o[E]||0,height:a[E]||0});return{first:P(0),last:P(t-1),widest:P(S),highest:P(T),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return Tse(this._alignToPixels?wh(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const i=t[e];return i.$context||(i.$context=Vae(this.getContext(),e,i))}return this.$context||(this.$context=Bae(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=Ko(this.labelRotation),i=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*i>a*r?a/i:l/r:l*r<a*i?l/i:a/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,i=this.chart,r=this.options,{grid:s,position:o,border:a}=r,l=s.offset,c=this.isHorizontal(),h=this.ticks.length+(l?1:0),d=Em(s),f=[],g=a.setContext(this.getContext()),p=g.display?g.width:0,m=p/2,v=function(N){return wh(i,N,p)};let y,w,R,x,S,T,P,E,A,L,W,F;if(o==="top")y=v(this.bottom),T=this.bottom-d,E=y-m,L=v(e.top)+m,F=e.bottom;else if(o==="bottom")y=v(this.top),L=e.top,F=v(e.bottom)-m,T=y+m,E=this.top+d;else if(o==="left")y=v(this.right),S=this.right-d,P=y-m,A=v(e.left)+m,W=e.right;else if(o==="right")y=v(this.left),A=e.left,W=v(e.right)-m,S=y+m,P=this.left+d;else if(t==="x"){if(o==="center")y=v((e.top+e.bottom)/2+.5);else if(Et(o)){const N=Object.keys(o)[0],j=o[N];y=v(this.chart.scales[N].getPixelForValue(j))}L=e.top,F=e.bottom,T=y+m,E=T+d}else if(t==="y"){if(o==="center")y=v((e.left+e.right)/2);else if(Et(o)){const N=Object.keys(o)[0],j=o[N];y=v(this.chart.scales[N].getPixelForValue(j))}S=y-m,P=S-d,A=e.left,W=e.right}const V=rt(r.ticks.maxTicksLimit,h),H=Math.max(1,Math.ceil(h/V));for(w=0;w<h;w+=H){const N=this.getContext(w),j=s.setContext(N),k=a.setContext(N),K=j.lineWidth,ie=j.color,b=k.dash||[],C=k.dashOffset,_=j.tickWidth,I=j.tickColor,$=j.tickBorderDash||[],M=j.tickBorderDashOffset;R=$ae(this,w,l),R!==void 0&&(x=wh(i,R,K),c?S=P=A=W=x:T=E=L=F=x,f.push({tx1:S,ty1:T,tx2:P,ty2:E,x1:A,y1:L,x2:W,y2:F,width:K,color:ie,borderDash:b,borderDashOffset:C,tickWidth:_,tickColor:I,tickBorderDash:$,tickBorderDashOffset:M}))}return this._ticksLength=h,this._borderValue=y,f}_computeLabelItems(e){const t=this.axis,i=this.options,{position:r,ticks:s}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:h}=s,d=Em(i.grid),f=d+u,g=h?-u:f,p=-Ko(this.labelRotation),m=[];let v,y,w,R,x,S,T,P,E,A,L,W,F="middle";if(r==="top")S=this.bottom-g,T=this._getXAxisLabelAlignment();else if(r==="bottom")S=this.top+g,T=this._getXAxisLabelAlignment();else if(r==="left"){const H=this._getYAxisLabelAlignment(d);T=H.textAlign,x=H.x}else if(r==="right"){const H=this._getYAxisLabelAlignment(d);T=H.textAlign,x=H.x}else if(t==="x"){if(r==="center")S=(e.top+e.bottom)/2+f;else if(Et(r)){const H=Object.keys(r)[0],N=r[H];S=this.chart.scales[H].getPixelForValue(N)+f}T=this._getXAxisLabelAlignment()}else if(t==="y"){if(r==="center")x=(e.left+e.right)/2-f;else if(Et(r)){const H=Object.keys(r)[0],N=r[H];x=this.chart.scales[H].getPixelForValue(N)}T=this._getYAxisLabelAlignment(d).textAlign}t==="y"&&(l==="start"?F="top":l==="end"&&(F="bottom"));const V=this._getLabelSizes();for(v=0,y=a.length;v<y;++v){w=a[v],R=w.label;const H=s.setContext(this.getContext(v));P=this.getPixelForTick(v)+s.labelOffset,E=this._resolveTickFontOptions(v),A=E.lineHeight,L=On(R)?R.length:1;const N=L/2,j=H.color,k=H.textStrokeColor,K=H.textStrokeWidth;let ie=T;o?(x=P,T==="inner"&&(v===y-1?ie=this.options.reverse?"left":"right":v===0?ie=this.options.reverse?"right":"left":ie="center"),r==="top"?c==="near"||p!==0?W=-L*A+A/2:c==="center"?W=-V.highest.height/2-N*A+A:W=-V.highest.height+A/2:c==="near"||p!==0?W=A/2:c==="center"?W=V.highest.height/2-N*A:W=V.highest.height-L*A,h&&(W*=-1),p!==0&&!H.showLabelBackdrop&&(x+=A/2*Math.sin(p))):(S=P,W=(1-L)*A/2);let b;if(H.showLabelBackdrop){const C=gr(H.backdropPadding),_=V.heights[v],I=V.widths[v];let $=W-C.top,M=0-C.left;switch(F){case"middle":$-=_/2;break;case"bottom":$-=_;break}switch(T){case"center":M-=I/2;break;case"right":M-=I;break;case"inner":v===y-1?M-=I:v>0&&(M-=I/2);break}b={left:M,top:$,width:I+C.width,height:_+C.height,color:H.backdropColor}}m.push({label:R,font:E,textOffset:W,options:{rotation:p,color:j,strokeColor:k,strokeWidth:K,textAlign:ie,textBaseline:F,translation:[x,S],backdrop:b}})}return m}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-Ko(this.labelRotation))return e==="top"?"left":"right";let r="center";return t.align==="start"?r="left":t.align==="end"?r="right":t.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,u;return t==="left"?r?(u=this.right+s,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u=this.left)):t==="right"?r?(u=this.left+s,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:i,top:r,width:s,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(i,r,s,o),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const r=this.ticks.findIndex(s=>s.value===e);return r>=0?t.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const t=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,u)=>{!u.width||!u.color||(i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.setLineDash(u.borderDash||[]),i.lineDashOffset=u.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(t.display)for(s=0,o=r.length;s<o;++s){const l=r[s];t.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),t.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),o=i.display?s.width:0;if(!o)return;const a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,h,d;this.isHorizontal()?(c=wh(e,this.left,o)-o/2,u=wh(e,this.right,a)+a/2,h=d=l):(h=wh(e,this.top,o)-o/2,d=wh(e,this.bottom,a)+a/2,c=u=l),t.save(),t.lineWidth=s.width,t.strokeStyle=s.color,t.beginPath(),t.moveTo(c,h),t.lineTo(u,d),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&Hd(i,r);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,u=o.textOffset;nf(i,c,0,u,l,a)}r&&$d(i)}drawTitle(){const{ctx:e,options:{position:t,title:i,reverse:r}}=this;if(!i.display)return;const s=Mi(i.font),o=gr(i.padding),a=i.align;let l=s.lineHeight/2;t==="bottom"||t==="center"||Et(t)?(l+=o.bottom,On(i.text)&&(l+=s.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:h,rotation:d}=jae(this,l,t,a);nf(e,i.text,0,0,s,{color:i.color,maxWidth:h,rotation:d,textAlign:Wae(a,t,r),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,i=rt(e.grid&&e.grid.z,-1),r=rt(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==sh.prototype.draw?[{z:t,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:t,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let s,o;for(s=0,o=t.length;s<o;++s){const a=t[s];a[i]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return Mi(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class e0{constructor(e,t,i){this.type=e,this.scope=t,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let i;Gae(t)&&(i=this.register(t));const r=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in r||(r[s]=e,zae(e,o,i),this.override&&Dn.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const t=this.items,i=e.id,r=this.scope;i in t&&delete t[i],r&&i in Dn[r]&&(delete Dn[r][i],this.override&&delete tf[i])}}function zae(n,e,t){const i=Rs(Object.create(null),[t?Dn.get(t):{},Dn.get(e),n.defaults]);Dn.set(e,i),n.defaultRoutes&&Uae(e,n.defaultRoutes),n.descriptors&&Dn.describe(e,n.descriptors)}function Uae(n,e){Object.keys(e).forEach(t=>{const i=t.split("."),r=i.pop(),s=[n].concat(i).join("."),o=e[t].split("."),a=o.pop(),l=o.join(".");Dn.route(s,r,l,a)})}function Gae(n){return"id"in n&&"defaults"in n}class Yae{constructor(){this.controllers=new e0(fo,"datasets",!0),this.elements=new e0(go,"elements"),this.plugins=new e0(Object,"plugins"),this.scales=new e0(sh,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,i){[...t].forEach(r=>{const s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(e,s,r):Jt(r,o=>{const a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,t,i){const r=wk(e);vn(i["before"+r],[],i),t[e](i),vn(i["after"+r],[],i)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const i=this._typedRegistries[t];if(i.isForType(e))return i}return this.plugins}_get(e,t,i){const r=t.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return r}}var Tr=new Yae;class Kae{constructor(){this._init=[]}notify(e,t,i,r){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(s,e,t,i);return t==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,t,i,r){r=r||{};for(const s of e){const o=s.plugin,a=o[i],l=[t,r,s.options];if(vn(a,l,o)===!1&&r.cancelable)return!1}return!0}invalidate(){Dt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const i=e&&e.config,r=rt(i.options&&i.options.plugins,{}),s=qae(i);return r===!1&&!t?[]:Zae(e,s,r,t)}_notifyStateChanges(e){const t=this._oldCache||[],i=this._cache,r=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(t,i),e,"stop"),this._notify(r(i,t),e,"start")}}function qae(n){const e={},t=[],i=Object.keys(Tr.plugins.items);for(let s=0;s<i.length;s++)t.push(Tr.getPlugin(i[s]));const r=n.plugins||[];for(let s=0;s<r.length;s++){const o=r[s];t.indexOf(o)===-1&&(t.push(o),e[o.id]=!0)}return{plugins:t,localIds:e}}function Xae(n,e){return!e&&n===!1?null:n===!0?{}:n}function Zae(n,{plugins:e,localIds:t},i,r){const s=[],o=n.getContext();for(const a of e){const l=a.id,c=Xae(i[l],r);c!==null&&s.push({plugin:a,options:Qae(n.config,{plugin:a,local:t[l]},c,o)})}return s}function Qae(n,{plugin:e,local:t},i,r){const s=n.pluginScopeKeys(e),o=n.getOptionScopes(i,s);return t&&e.defaults&&o.push(e.defaults),n.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function vP(n,e){const t=Dn.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function Jae(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function ele(n,e){return n===e?"_index_":"_value_"}function mF(n){if(n==="x"||n==="y"||n==="r")return n}function tle(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function wP(n,...e){if(mF(n))return n;for(const t of e){const i=t.axis||tle(t.position)||n.length>1&&mF(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function bF(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function nle(n,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(t.length)return bF(n,"x",t[0])||bF(n,"y",t[0])}return{}}function ile(n,e){const t=tf[n.type]||{scales:{}},i=e.scales||{},r=vP(n.type,e),s=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!Et(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=wP(o,a,nle(o,n),Dn.scales[a.type]),c=ele(l,r),u=t.scales||{};s[o]=pv(Object.create(null),[{axis:l},a,u[l],u[c]])}),n.data.datasets.forEach(o=>{const a=o.type||n.type,l=o.indexAxis||vP(a,e),u=(tf[a]||{}).scales||{};Object.keys(u).forEach(h=>{const d=Jae(h,l),f=o[d+"AxisID"]||d;s[f]=s[f]||Object.create(null),pv(s[f],[{axis:d},i[f],u[h]])})}),Object.keys(s).forEach(o=>{const a=s[o];pv(a,[Dn.scales[a.type],Dn.scale])}),s}function $4(n){const e=n.options||(n.options={});e.plugins=rt(e.plugins,{}),e.scales=ile(n,e)}function F4(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function rle(n){return n=n||{},n.data=F4(n.data),$4(n),n}const vF=new Map,B4=new Set;function t0(n,e){let t=vF.get(n);return t||(t=e(),vF.set(n,t),B4.add(t)),t}const xm=(n,e,t)=>{const i=ju(e,t);i!==void 0&&n.add(i)};class sle{constructor(e){this._config=rle(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=F4(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),$4(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return t0(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return t0(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return t0(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,i=this.type;return t0(`${i}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const i=this._scopeCache;let r=i.get(e);return(!r||t)&&(r=new Map,i.set(e,r)),r}getOptionScopes(e,t,i){const{options:r,type:s}=this,o=this._cachedScopes(e,i),a=o.get(t);if(a)return a;const l=new Set;t.forEach(u=>{e&&(l.add(e),u.forEach(h=>xm(l,e,h))),u.forEach(h=>xm(l,r,h)),u.forEach(h=>xm(l,tf[s]||{},h)),u.forEach(h=>xm(l,Dn,h)),u.forEach(h=>xm(l,bP,h))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),B4.has(t)&&o.set(t,c),c}chartOptionScopes(){const{options:e,type:t}=this;return[e,tf[t]||{},Dn.datasets[t]||{},{type:t},Dn,bP]}resolveNamedOptions(e,t,i,r=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=wF(this._resolverCache,e,r);let l=o;if(ale(o,t)){s.$shared=!1,i=zu(i)?i():i;const c=this.createResolver(e,i,a);l=_p(o,i,c)}for(const c of t)s[c]=l[c];return s}createResolver(e,t,i=[""],r){const{resolver:s}=wF(this._resolverCache,e,i);return Et(t)?_p(s,t,void 0,r):s}}function wF(n,e,t){let i=n.get(e);i||(i=new Map,n.set(e,i));const r=t.join();let s=i.get(r);return s||(s={resolver:Ek(e,t),subPrefixes:t.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,s)),s}const ole=n=>Et(n)&&Object.getOwnPropertyNames(n).some(e=>zu(n[e]));function ale(n,e){const{isScriptable:t,isIndexable:i}=w4(n);for(const r of e){const s=t(r),o=i(r),a=(o||s)&&n[r];if(s&&(zu(a)||ole(a))||o&&On(a))return!0}return!1}var lle="4.4.6";const cle=["top","bottom","left","right","chartArea"];function yF(n,e){return n==="top"||n==="bottom"||cle.indexOf(n)===-1&&e==="x"}function CF(n,e){return function(t,i){return t[n]===i[n]?t[e]-i[e]:t[n]-i[n]}}function SF(n){const e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),vn(t&&t.onComplete,[n],e)}function ule(n){const e=n.chart,t=e.options.animation;vn(t&&t.onProgress,[n],e)}function V4(n){return Mk()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const x_={},W4=n=>{const e=V4(n);return Object.values(x_).filter(t=>t.canvas===e).pop()};function hle(n,e,t){const i=Object.keys(n);for(const r of i){const s=+r;if(s>=e){const o=n[r];delete n[r],(t>0||s>e)&&(n[s+t]=o)}}}function dle(n,e,t,i){return!t||n.type==="mouseout"?null:i?e:n}function n0(n,e,t){return n.options.clip?n[t]:e[t]}function fle(n,e){const{xScale:t,yScale:i}=n;return t&&i?{left:n0(t,e,"left"),right:n0(t,e,"right"),top:n0(i,e,"top"),bottom:n0(i,e,"bottom")}:e}class Es{static register(...e){Tr.add(...e),_F()}static unregister(...e){Tr.remove(...e),_F()}constructor(e,t){const i=this.config=new sle(t),r=V4(e),s=W4(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||Pae(r)),this.platform.updateConfig(i);const a=this.platform.acquireContext(r,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=pse(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Kae,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Ise(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],x_[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}zl.listen(this,"complete",SF),zl.listen(this,"progress",ule),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:i,height:r,_aspectRatio:s}=this;return Dt(e)?t&&s?s:r?i/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Tr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():G2(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return j2(this.canvas,this.ctx),this}stop(){return zl.stop(this),this}resize(e,t){zl.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const i=this.options,r=this.canvas,s=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,t,s),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,G2(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),vn(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};Jt(t,(i,r)=>{i.id=r})}buildOrUpdateScales(){const e=this.options,t=e.scales,i=this.scales,r=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let s=[];t&&(s=s.concat(Object.keys(t).map(o=>{const a=t[o],l=wP(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),Jt(s,o=>{const a=o.options,l=a.id,c=wP(l,a),u=rt(a.type,o.dtype);(a.position===void 0||yF(a.position,c)!==yF(o.dposition))&&(a.position=o.dposition),r[l]=!0;let h=null;if(l in i&&i[l].type===u)h=i[l];else{const d=Tr.getScale(u);h=new d({id:l,type:u,ctx:this.ctx,chart:this}),i[h.id]=h}h.init(a,e)}),Jt(r,(o,a)=>{o||delete i[a]}),Jt(i,o=>{lr.configure(this,o,o.options),lr.addBox(this,o)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,i=e.length;if(e.sort((r,s)=>r.index-s.index),i>t){for(let r=t;r<i;++r)this._destroyDatasetMeta(r);e.splice(t,i-t)}this._sortedMetasets=e.slice(0).sort(CF("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((i,r)=>{t.filter(s=>s===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=t.length;i<r;i++){const s=t[i];let o=this.getDatasetMeta(i);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=s.indexAxis||vP(a,this.options),o.order=s.order||0,o.index=i,o.label=""+s.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=Tr.getController(a),{datasetElementType:c,dataElementType:u}=Dn.datasets[a];Object.assign(l,{dataElementType:Tr.getElement(u),datasetElementType:c&&Tr.getElement(c)}),o.controller=new l(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Jt(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const i=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:h}=this.getDatasetMeta(c),d=!r&&s.indexOf(h)===-1;h.buildOrUpdateElements(d),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),r||Jt(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(CF("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Jt(this.scales,e=>{lr.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!D2(t,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:s}of t){const o=i==="_removeElements"?-s:s;hle(e,r,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,i=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),r=i(0);for(let s=1;s<t;s++)if(!D2(r,i(s)))return;return Array.from(r).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;lr.update(this,this.width,this.height,e);const t=this.chartArea,i=t.width<=0||t.height<=0;this._layers=[],Jt(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,s)=>{r._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,i=this.data.datasets.length;t<i;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,i=this.data.datasets.length;t<i;++t)this._updateDataset(t,zu(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const i=this.getDatasetMeta(e),r={meta:i,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(t),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(zl.has(this)?this.attached&&!zl.running(this)&&zl.start(this):(this.draw(),SF({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,i=[];let r,s;for(r=0,s=t.length;r<s;++r){const o=t[r];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,i=e._clip,r=!i.disabled,s=fle(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(r&&Hd(t,{left:i.left===!1?0:s.left-i.left,right:i.right===!1?this.width:s.right+i.right,top:i.top===!1?0:s.top-i.top,bottom:i.bottom===!1?this.height:s.bottom+i.bottom}),e.controller.draw(),r&&$d(t),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return dc(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,i,r){const s=cae.modes[t];return typeof s=="function"?s(this,e,i,r):[]}getDatasetMeta(e){const t=this.data.datasets[e],i=this._metasets;let r=i.filter(s=>s&&s._dataset===t).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=rh(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!t.hidden}setDatasetVisibility(e,t){const i=this.getDatasetMeta(e);i.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,i){const r=i?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,r);ow(t)?(s.data[t].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(s,{visible:i}),this.update(a=>a.datasetIndex===e?r:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),zl.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),j2(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete x_[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,i=(s,o)=>{t.addEventListener(this,s,o),e[s]=o},r=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};Jt(this.options.events,s=>i(s,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,i=(l,c)=>{t.addEventListener(this,l,c),e[l]=c},r=(l,c)=>{e[l]&&(t.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{r("attach",a),this.attached=!0,this.resize(),i("resize",s),i("detach",o)};o=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),i("attach",a)},t.isAttached(this.canvas)?a():o()}unbindEvents(){Jt(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},Jt(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,i){const r=i?"set":"remove";let s,o,a,l;for(t==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],i=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!w_(i,t)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,t))}notifyPlugins(e,t,i){return this._plugins.notify(this,e,t,i)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,i){const r=this.options.hover,s=(l,c)=>l.filter(u=>!c.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),o=s(t,e),a=i?e:s(e,t);o.length&&this.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,t){const i={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},r=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const s=this._handleEvent(e,t,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(s||i.changed)&&this.render(),this}_handleEvent(e,t,i){const{_active:r=[],options:s}=this,o=t,a=this._getActiveElements(e,r,i,o),l=Cse(e),c=dle(e,this._lastEvent,i,l);i&&(this._lastEvent=null,vn(s.onHover,[e,a,this],this),l&&vn(s.onClick,[e,a,this],this));const u=!w_(a,r);return(u||t)&&(this._active=a,this._updateHoverStyles(a,r,t)),this._lastEvent=c,u}_getActiveElements(e,t,i,r){if(e.type==="mouseout")return[];if(!i)return t;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,r)}}Es.defaults=Dn;Es.instances=x_;Es.overrides=tf;Es.registry=Tr;Es.version=lle;Es.getChart=W4;function _F(){return Jt(Es.instances,n=>n._plugins.invalidate())}function gle(n,e,t){const{startAngle:i,pixelMargin:r,x:s,y:o,outerRadius:a,innerRadius:l}=e;let c=r/a;n.beginPath(),n.arc(s,o,a,i-c,t+c),l>r?(c=r/l,n.arc(s,o,l,t+c,i-c,!0)):n.arc(s,o,r,t+oi,i-oi),n.closePath(),n.clip()}function ple(n){return Rk(n,["outerStart","outerEnd","innerStart","innerEnd"])}function mle(n,e,t,i){const r=ple(n.options.borderRadius),s=(t-e)/2,o=Math.min(s,i*e/2),a=l=>{const c=(t-Math.min(s,l))*i/2;return $i(l,0,Math.min(s,c))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:$i(r.innerStart,0,o),innerEnd:$i(r.innerEnd,0,o)}}function Wf(n,e,t,i){return{x:t+n*Math.cos(e),y:i+n*Math.sin(e)}}function T_(n,e,t,i,r,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=e,h=Math.max(e.outerRadius+i+t-c,0),d=u>0?u+i+t+c:0;let f=0;const g=r-l;if(i){const H=u>0?u-i:0,N=h>0?h-i:0,j=(H+N)/2,k=j!==0?g*j/(j+i):g;f=(g-k)/2}const p=Math.max(.001,g*h-t/En)/h,m=(g-p)/2,v=l+m+f,y=r-m-f,{outerStart:w,outerEnd:R,innerStart:x,innerEnd:S}=mle(e,d,h,y-v),T=h-w,P=h-R,E=v+w/T,A=y-R/P,L=d+x,W=d+S,F=v+x/L,V=y-S/W;if(n.beginPath(),s){const H=(E+A)/2;if(n.arc(o,a,h,E,H),n.arc(o,a,h,H,A),R>0){const K=Wf(P,A,o,a);n.arc(K.x,K.y,R,A,y+oi)}const N=Wf(W,y,o,a);if(n.lineTo(N.x,N.y),S>0){const K=Wf(W,V,o,a);n.arc(K.x,K.y,S,y+oi,V+Math.PI)}const j=(y-S/d+(v+x/d))/2;if(n.arc(o,a,d,y-S/d,j,!0),n.arc(o,a,d,j,v+x/d,!0),x>0){const K=Wf(L,F,o,a);n.arc(K.x,K.y,x,F+Math.PI,v-oi)}const k=Wf(T,v,o,a);if(n.lineTo(k.x,k.y),w>0){const K=Wf(T,E,o,a);n.arc(K.x,K.y,w,v-oi,E)}}else{n.moveTo(o,a);const H=Math.cos(E)*h+o,N=Math.sin(E)*h+a;n.lineTo(H,N);const j=Math.cos(A)*h+o,k=Math.sin(A)*h+a;n.lineTo(j,k)}n.closePath()}function ble(n,e,t,i,r){const{fullCircles:s,startAngle:o,circumference:a}=e;let l=e.endAngle;if(s){T_(n,e,t,i,l,r);for(let c=0;c<s;++c)n.fill();isNaN(a)||(l=o+(a%Rn||Rn))}return T_(n,e,t,i,l,r),n.fill(),l}function vle(n,e,t,i,r){const{fullCircles:s,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:u,borderDash:h,borderDashOffset:d}=l,f=l.borderAlign==="inner";if(!c)return;n.setLineDash(h||[]),n.lineDashOffset=d,f?(n.lineWidth=c*2,n.lineJoin=u||"round"):(n.lineWidth=c,n.lineJoin=u||"bevel");let g=e.endAngle;if(s){T_(n,e,t,i,g,r);for(let p=0;p<s;++p)n.stroke();isNaN(a)||(g=o+(a%Rn||Rn))}f&&gle(n,e,g),s||(T_(n,e,t,i,g,r),n.stroke())}class Xw extends go{constructor(e){super(),this.circumference=void 0,this.endAngle=void 0,this.fullCircles=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=void 0,this.startAngle=void 0,this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,i){const r=this.getProps(["x","y"],i),{angle:s,distance:o}=c4(r,{x:e,y:t}),{startAngle:a,endAngle:l,innerRadius:c,outerRadius:u,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),d=(this.options.spacing+this.options.borderWidth)/2,f=rt(h,l-a),g=aw(s,a,l)&&a!==l,p=f>=Rn||g,m=uc(o,c+d,u+d);return p&&m}getCenterPoint(e){const{x:t,y:i,startAngle:r,endAngle:s,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:l,spacing:c}=this.options,u=(r+s)/2,h=(o+a+c+l)/2;return{x:t+Math.cos(u)*h,y:i+Math.sin(u)*h}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:i}=this,r=(t.offset||0)/4,s=(t.spacing||0)/2,o=t.circular;if(this.pixelMargin=t.borderAlign==="inner"?.33:0,this.fullCircles=i>Rn?Math.floor(i/Rn):0,i===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const a=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(a)*r,Math.sin(a)*r);const l=1-Math.sin(Math.min(En,i||0)),c=r*l;e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,ble(e,this,c,s,o),vle(e,this,c,s,o),e.restore()}}Xw.id="arc";Xw.defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};Xw.defaultRoutes={backgroundColor:"backgroundColor"};Xw.descriptors={_scriptable:!0,_indexable:n=>n!=="borderDash"};function j4(n,e,t=e){n.lineCap=rt(t.borderCapStyle,e.borderCapStyle),n.setLineDash(rt(t.borderDash,e.borderDash)),n.lineDashOffset=rt(t.borderDashOffset,e.borderDashOffset),n.lineJoin=rt(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=rt(t.borderWidth,e.borderWidth),n.strokeStyle=rt(t.borderColor,e.borderColor)}function wle(n,e,t){n.lineTo(t.x,t.y)}function yle(n){return n.stepped?jse:n.tension||n.cubicInterpolationMode==="monotone"?zse:wle}function z4(n,e,t={}){const i=n.length,{start:r=0,end:s=i-1}=t,{start:o,end:a}=e,l=Math.max(r,o),c=Math.min(s,a),u=r<o&&s<o||r>a&&s>a;return{count:i,start:l,loop:e.loop,ilen:c<l&&!u?i+c-l:c-l}}function Cle(n,e,t,i){const{points:r,options:s}=e,{count:o,start:a,loop:l,ilen:c}=z4(r,t,i),u=yle(s);let{move:h=!0,reverse:d}=i||{},f,g,p;for(f=0;f<=c;++f)g=r[(a+(d?c-f:f))%o],!g.skip&&(h?(n.moveTo(g.x,g.y),h=!1):u(n,p,g,d,s.stepped),p=g);return l&&(g=r[(a+(d?c:0))%o],u(n,p,g,d,s.stepped)),!!l}function Sle(n,e,t,i){const r=e.points,{count:s,start:o,ilen:a}=z4(r,t,i),{move:l=!0,reverse:c}=i||{};let u=0,h=0,d,f,g,p,m,v;const y=R=>(o+(c?a-R:R))%s,w=()=>{p!==m&&(n.lineTo(u,m),n.lineTo(u,p),n.lineTo(u,v))};for(l&&(f=r[y(0)],n.moveTo(f.x,f.y)),d=0;d<=a;++d){if(f=r[y(d)],f.skip)continue;const R=f.x,x=f.y,S=R|0;S===g?(x<p?p=x:x>m&&(m=x),u=(h*u+R)/++h):(w(),n.lineTo(R,x),g=S,h=0,p=m=x),v=x}w()}function yP(n){const e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?Sle:Cle}function _le(n){return n.stepped?Soe:n.tension||n.cubicInterpolationMode==="monotone"?_oe:fd}function Rle(n,e,t,i){let r=e._path;r||(r=e._path=new Path2D,e.path(r,t,i)&&r.closePath()),j4(n,e.options),n.stroke(r)}function Ele(n,e,t,i){const{segments:r,options:s}=e,o=yP(e);for(const a of r)j4(n,s,a.style),n.beginPath(),o(n,e,a,{start:t,end:t+i-1})&&n.closePath(),n.stroke()}const xle=typeof Path2D=="function";function Tle(n,e,t,i){xle&&!e.options.segment?Rle(n,e,t,i):Ele(n,e,t,i)}class oh extends go{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const r=i.spanGaps?this._loop:this._fullLoop;goe(this._points,i,e,r,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Aoe(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,i=e.length;return i&&t[e[i-1].end]}interpolate(e,t){const i=this.options,r=e[t],s=this.points,o=A4(this,{property:t,start:r,end:r});if(!o.length)return;const a=[],l=_le(i);let c,u;for(c=0,u=o.length;c<u;++c){const{start:h,end:d}=o[c],f=s[h],g=s[d];if(f===g){a.push(f);continue}const p=Math.abs((r-f[t])/(g[t]-f[t])),m=l(f,g,p,i.stepped);m[t]=e[t],a.push(m)}return a.length===1?a[0]:a}pathSegment(e,t,i){return yP(this)(e,this,t,i)}path(e,t,i){const r=this.segments,s=yP(this);let o=this._loop;t=t||0,i=i||this.points.length-t;for(const a of r)o&=s(e,this,a,{start:t,end:t+i-1});return!!o}draw(e,t,i,r){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),Tle(e,this,i,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}oh.id="line";oh.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};oh.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};oh.descriptors={_scriptable:!0,_indexable:n=>n!=="borderDash"&&n!=="fill"};function RF(n,e,t,i){const r=n.options,{[t]:s}=n.getProps([t],i);return Math.abs(e-s)<r.radius+r.hitRadius}class Zw extends go{constructor(e){super(),this.parsed=void 0,this.skip=void 0,this.stop=void 0,this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,i){const r=this.options,{x:s,y:o}=this.getProps(["x","y"],i);return Math.pow(e-s,2)+Math.pow(t-o,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(e,t){return RF(this,e,"x",t)}inYRange(e,t){return RF(this,e,"y",t)}getCenterPoint(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}size(e){e=e||this.options||{};let t=e.radius||0;t=Math.max(t,t&&e.hoverRadius||0);const i=t&&e.borderWidth||0;return(t+i)*2}draw(e,t){const i=this.options;this.skip||i.radius<.1||!dc(this,t,this.size(i)/2)||(e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.fillStyle=i.backgroundColor,__(e,i,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}Zw.id="point";Zw.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};Zw.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};function U4(n,e){const{x:t,y:i,base:r,width:s,height:o}=n.getProps(["x","y","base","width","height"],e);let a,l,c,u,h;return n.horizontal?(h=o/2,a=Math.min(t,r),l=Math.max(t,r),c=i-h,u=i+h):(h=s/2,a=t-h,l=t+h,c=Math.min(i,r),u=Math.max(i,r)),{left:a,top:c,right:l,bottom:u}}function Eu(n,e,t,i){return n?0:$i(e,t,i)}function Mle(n,e,t){const i=n.options.borderWidth,r=n.borderSkipped,s=v4(i);return{t:Eu(r.top,s.top,0,t),r:Eu(r.right,s.right,0,e),b:Eu(r.bottom,s.bottom,0,t),l:Eu(r.left,s.left,0,e)}}function Ale(n,e,t){const{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),r=n.options.borderRadius,s=Fd(r),o=Math.min(e,t),a=n.borderSkipped,l=i||Et(r);return{topLeft:Eu(!l||a.top||a.left,s.topLeft,0,o),topRight:Eu(!l||a.top||a.right,s.topRight,0,o),bottomLeft:Eu(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:Eu(!l||a.bottom||a.right,s.bottomRight,0,o)}}function Ple(n){const e=U4(n),t=e.right-e.left,i=e.bottom-e.top,r=Mle(n,t/2,i/2),s=Ale(n,t/2,i/2);return{outer:{x:e.left,y:e.top,w:t,h:i,radius:s},inner:{x:e.left+r.l,y:e.top+r.t,w:t-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function Ix(n,e,t,i){const r=e===null,s=t===null,a=n&&!(r&&s)&&U4(n,i);return a&&(r||uc(e,a.left,a.right))&&(s||uc(t,a.top,a.bottom))}function Ile(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function Ole(n,e){n.rect(e.x,e.y,e.w,e.h)}function Ox(n,e,t={}){const i=n.x!==t.x?-e:0,r=n.y!==t.y?-e:0,s=(n.x+n.w!==t.x+t.w?e:0)-i,o=(n.y+n.h!==t.y+t.h?e:0)-r;return{x:n.x+i,y:n.y+r,w:n.w+s,h:n.h+o,radius:n.radius}}class Gp extends go{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:i,backgroundColor:r}}=this,{inner:s,outer:o}=Ple(this),a=Ile(o.radius)?lw:Ole;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,Ox(o,t,s)),e.clip(),a(e,Ox(s,-t,o)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),a(e,Ox(s,t)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,t,i){return Ix(this,e,t,i)}inXRange(e,t){return Ix(this,e,null,t)}inYRange(e,t){return Ix(this,null,e,t)}getCenterPoint(e){const{x:t,y:i,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(t+r)/2:t,y:s?i:(i+r)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}Gp.id="bar";Gp.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};Gp.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var kle=Object.freeze({__proto__:null,ArcElement:Xw,BarElement:Gp,LineElement:oh,PointElement:Zw});const CP=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],EF=CP.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function G4(n){return CP[n%CP.length]}function Y4(n){return EF[n%EF.length]}function Dle(n,e){return n.borderColor=G4(e),n.backgroundColor=Y4(e),++e}function Lle(n,e){return n.backgroundColor=n.data.map(()=>G4(e++)),e}function Nle(n,e){return n.backgroundColor=n.data.map(()=>Y4(e++)),e}function Hle(n){let e=0;return(t,i)=>{const r=n.getDatasetMeta(i).controller;r instanceof Cf?e=Lle(t,e):r instanceof Kw?e=Nle(t,e):r&&(e=Dle(t,e))}}function xF(n){let e;for(e in n)if(n[e].borderColor||n[e].backgroundColor)return!0;return!1}function $le(n){return n&&(n.borderColor||n.backgroundColor)}function Fle(){return Dn.borderColor!=="rgba(0,0,0,0.1)"||Dn.backgroundColor!=="rgba(0,0,0,0.1)"}var Ble={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,e,t){if(!t.enabled)return;const{data:{datasets:i},options:r}=n.config,{elements:s}=r,o=xF(i)||$le(r)||s&&xF(s)||Fle();if(!t.forceOverride&&o)return;const a=Hle(n);i.forEach(a)}};function Vle(n,e,t,i,r){const s=r.samples||i;if(s>=t)return n.slice(e,e+t);const o=[],a=(t-2)/(s-2);let l=0;const c=e+t-1;let u=e,h,d,f,g,p;for(o[l++]=n[u],h=0;h<s-2;h++){let m=0,v=0,y;const w=Math.floor((h+1)*a)+1+e,R=Math.min(Math.floor((h+2)*a)+1,t)+e,x=R-w;for(y=w;y<R;y++)m+=n[y].x,v+=n[y].y;m/=x,v/=x;const S=Math.floor(h*a)+1+e,T=Math.min(Math.floor((h+1)*a)+1,t)+e,{x:P,y:E}=n[u];for(f=g=-1,y=S;y<T;y++)g=.5*Math.abs((P-m)*(n[y].y-E)-(P-n[y].x)*(v-E)),g>f&&(f=g,d=n[y],p=y);o[l++]=d,u=p}return o[l++]=n[c],o}function Wle(n,e,t,i){let r=0,s=0,o,a,l,c,u,h,d,f,g,p;const m=[],v=e+t-1,y=n[e].x,R=n[v].x-y;for(o=e;o<e+t;++o){a=n[o],l=(a.x-y)/R*i,c=a.y;const x=l|0;if(x===u)c<g?(g=c,h=o):c>p&&(p=c,d=o),r=(s*r+a.x)/++s;else{const S=o-1;if(!Dt(h)&&!Dt(d)){const T=Math.min(h,d),P=Math.max(h,d);T!==f&&T!==S&&m.push({...n[T],x:r}),P!==f&&P!==S&&m.push({...n[P],x:r})}o>0&&S!==f&&m.push(n[S]),m.push(a),u=x,s=0,g=p=c,h=d=f=o}}return m}function K4(n){if(n._decimated){const e=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function TF(n){n.data.datasets.forEach(e=>{K4(e)})}function jle(n,e){const t=e.length;let i=0,r;const{iScale:s}=n,{min:o,max:a,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(i=$i(hc(e,s.axis,o).lo,0,t-1)),c?r=$i(hc(e,s.axis,a).hi+1,i,t)-i:r=t-i,{start:i,count:r}}var zle={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,e,t)=>{if(!t.enabled){TF(n);return}const i=n.width;n.data.datasets.forEach((r,s)=>{const{_data:o,indexAxis:a}=r,l=n.getDatasetMeta(s),c=o||r.data;if(Bb([a,n.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const u=n.scales[l.xAxisID];if(u.type!=="linear"&&u.type!=="time"||n.options.parsing)return;let{start:h,count:d}=jle(l,c);const f=t.threshold||4*i;if(d<=f){K4(r);return}Dt(o)&&(r._data=c,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(p){this._data=p}}));let g;switch(t.algorithm){case"lttb":g=Vle(c,h,d,i,t);break;case"min-max":g=Wle(c,h,d,i);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}r._decimated=g})},destroy(n){TF(n)}};function Ule(n,e,t){const i=n.segments,r=n.points,s=e.points,o=[];for(const a of i){let{start:l,end:c}=a;c=Ok(l,c,r);const u=SP(t,r[l],r[c],a.loop);if(!e.segments){o.push({source:a,target:u,start:r[l],end:r[c]});continue}const h=A4(e,u);for(const d of h){const f=SP(t,s[d.start],s[d.end],d.loop),g=M4(a,r,f);for(const p of g)o.push({source:p,target:d,start:{[t]:MF(u,f,"start",Math.max)},end:{[t]:MF(u,f,"end",Math.min)}})}}return o}function SP(n,e,t,i){if(i)return;let r=e[n],s=t[n];return n==="angle"&&(r=ps(r),s=ps(s)),{property:n,start:r,end:s}}function Gle(n,e){const{x:t=null,y:i=null}=n||{},r=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=Ok(o,a,r);const l=r[o],c=r[a];i!==null?(s.push({x:l.x,y:i}),s.push({x:c.x,y:i})):t!==null&&(s.push({x:t,y:l.y}),s.push({x:t,y:c.y}))}),s}function Ok(n,e,t){for(;e>n;e--){const i=t[e];if(!isNaN(i.x)&&!isNaN(i.y))break}return e}function MF(n,e,t,i){return n&&e?i(n[t],e[t]):n?n[t]:e?e[t]:0}function q4(n,e){let t=[],i=!1;return On(n)?(i=!0,t=n):t=Gle(n,e),t.length?new oh({points:t,options:{tension:0},_loop:i,_fullLoop:i}):null}function AF(n){return n&&n.fill!==!1}function Yle(n,e,t){let r=n[e].fill;const s=[e];let o;if(!t)return r;for(;r!==!1&&s.indexOf(r)===-1;){if(!ti(r))return r;if(o=n[r],!o)return!1;if(o.visible)return r;s.push(r),r=o.fill}return!1}function Kle(n,e,t){const i=Qle(n);if(Et(i))return isNaN(i.value)?!1:i;let r=parseFloat(i);return ti(r)&&Math.floor(r)===r?qle(i[0],e,r,t):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function qle(n,e,t,i){return(n==="-"||n==="+")&&(t=e+t),t===e||t<0||t>=i?!1:t}function Xle(n,e){let t=null;return n==="start"?t=e.bottom:n==="end"?t=e.top:Et(n)?t=e.getPixelForValue(n.value):e.getBasePixel&&(t=e.getBasePixel()),t}function Zle(n,e,t){let i;return n==="start"?i=t:n==="end"?i=e.options.reverse?e.min:e.max:Et(n)?i=n.value:i=e.getBaseValue(),i}function Qle(n){const e=n.options,t=e.fill;let i=rt(t&&t.target,t);return i===void 0&&(i=!!e.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function Jle(n){const{scale:e,index:t,line:i}=n,r=[],s=i.segments,o=i.points,a=ece(e,t);a.push(q4({x:null,y:e.bottom},i));for(let l=0;l<s.length;l++){const c=s[l];for(let u=c.start;u<=c.end;u++)tce(r,o[u],a)}return new oh({points:r,options:{}})}function ece(n,e){const t=[],i=n.getMatchingVisibleMetas("line");for(let r=0;r<i.length;r++){const s=i[r];if(s.index===e)break;s.hidden||t.unshift(s.dataset)}return t}function tce(n,e,t){const i=[];for(let r=0;r<t.length;r++){const s=t[r],{first:o,last:a,point:l}=nce(s,e,"x");if(!(!l||o&&a)){if(o)i.unshift(l);else if(n.push(l),!a)break}}n.push(...i)}function nce(n,e,t){const i=n.interpolate(e,t);if(!i)return{};const r=i[t],s=n.segments,o=n.points;let a=!1,l=!1;for(let c=0;c<s.length;c++){const u=s[c],h=o[u.start][t],d=o[u.end][t];if(uc(r,h,d)){a=r===h,l=r===d;break}}return{first:a,last:l,point:i}}class X4{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,i){const{x:r,y:s,radius:o}=this;return t=t||{start:0,end:Rn},e.arc(r,s,o,t.end,t.start,!0),!i.bounds}interpolate(e){const{x:t,y:i,radius:r}=this,s=e.angle;return{x:t+Math.cos(s)*r,y:i+Math.sin(s)*r,angle:s}}}function ice(n){const{chart:e,fill:t,line:i}=n;if(ti(t))return rce(e,t);if(t==="stack")return Jle(n);if(t==="shape")return!0;const r=sce(n);return r instanceof X4?r:q4(r,i)}function rce(n,e){const t=n.getDatasetMeta(e);return t&&n.isDatasetVisible(e)?t.dataset:null}function sce(n){return(n.scale||{}).getPointPositionForValue?ace(n):oce(n)}function oce(n){const{scale:e={},fill:t}=n,i=Xle(t,e);if(ti(i)){const r=e.isHorizontal();return{x:r?i:null,y:r?null:i}}return null}function ace(n){const{scale:e,fill:t}=n,i=e.options,r=e.getLabels().length,s=i.reverse?e.max:e.min,o=Zle(t,e,s),a=[];if(i.grid.circular){const l=e.getPointPositionForValue(0,s);return new X4({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<r;++l)a.push(e.getPointPositionForValue(l,o));return a}function kx(n,e,t){const i=ice(e),{line:r,scale:s,axis:o}=e,a=r.options,l=a.fill,c=a.backgroundColor,{above:u=c,below:h=c}=l||{};i&&r.points.length&&(Hd(n,t),lce(n,{line:r,target:i,above:u,below:h,area:t,scale:s,axis:o}),$d(n))}function lce(n,e){const{line:t,target:i,above:r,below:s,area:o,scale:a}=e,l=t._loop?"angle":e.axis;n.save(),l==="x"&&s!==r&&(PF(n,i,o.top),IF(n,{line:t,target:i,color:r,scale:a,property:l}),n.restore(),n.save(),PF(n,i,o.bottom)),IF(n,{line:t,target:i,color:s,scale:a,property:l}),n.restore()}function PF(n,e,t){const{segments:i,points:r}=e;let s=!0,o=!1;n.beginPath();for(const a of i){const{start:l,end:c}=a,u=r[l],h=r[Ok(l,c,r)];s?(n.moveTo(u.x,u.y),s=!1):(n.lineTo(u.x,t),n.lineTo(u.x,u.y)),o=!!e.pathSegment(n,a,{move:o}),o?n.closePath():n.lineTo(h.x,t)}n.lineTo(e.first().x,t),n.closePath(),n.clip()}function IF(n,e){const{line:t,target:i,property:r,color:s,scale:o}=e,a=Ule(t,i,r);for(const{source:l,target:c,start:u,end:h}of a){const{style:{backgroundColor:d=s}={}}=l,f=i!==!0;n.save(),n.fillStyle=d,cce(n,o,f&&SP(r,u,h)),n.beginPath();const g=!!t.pathSegment(n,l);let p;if(f){g?n.closePath():OF(n,i,h,r);const m=!!i.pathSegment(n,c,{move:g,reverse:!0});p=g&&m,p||OF(n,i,u,r)}n.closePath(),n.fill(p?"evenodd":"nonzero"),n.restore()}}function cce(n,e,t){const{top:i,bottom:r}=e.chart.chartArea,{property:s,start:o,end:a}=t||{};s==="x"&&(n.beginPath(),n.rect(o,i,a-o,r-i),n.clip())}function OF(n,e,t,i){const r=e.interpolate(t,i);r&&n.lineTo(r.x,r.y)}var uce={id:"filler",afterDatasetsUpdate(n,e,t){const i=(n.data.datasets||[]).length,r=[];let s,o,a,l;for(o=0;o<i;++o)s=n.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof oh&&(l={visible:n.isDatasetVisible(o),index:o,fill:Kle(a,o,i),chart:n,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,r.push(l);for(o=0;o<i;++o)l=r[o],!(!l||l.fill===!1)&&(l.fill=Yle(r,o,t.propagate))},beforeDraw(n,e,t){const i=t.drawTime==="beforeDraw",r=n.getSortedVisibleDatasetMetas(),s=n.chartArea;for(let o=r.length-1;o>=0;--o){const a=r[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),i&&a.fill&&kx(n.ctx,a,s))}},beforeDatasetsDraw(n,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;const i=n.getSortedVisibleDatasetMetas();for(let r=i.length-1;r>=0;--r){const s=i[r].$filler;AF(s)&&kx(n.ctx,s,n.chartArea)}},beforeDatasetDraw(n,e,t){const i=e.meta.$filler;!AF(i)||t.drawTime!=="beforeDatasetDraw"||kx(n.ctx,i,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const kF=(n,e)=>{let{boxHeight:t=e,boxWidth:i=e}=n;return n.usePointStyle&&(t=Math.min(t,e),i=n.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:t,itemHeight:Math.max(e,t)}},hce=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index;class DF extends go{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,i){this.maxWidth=e,this.maxHeight=t,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=vn(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(i=>e.filter(i,this.chart.data))),e.sort&&(t=t.sort((i,r)=>e.sort(i,r,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,r=Mi(i.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=kF(i,s);let c,u;t.font=r.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,s,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,r,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,t,i,r){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=r+a;let h=e;s.textAlign="left",s.textBaseline="middle";let d=-1,f=-u;return this.legendItems.forEach((g,p)=>{const m=i+t/2+s.measureText(g.text).width;(p===0||c[c.length-1]+m+2*a>o)&&(h+=u,c[c.length-(p>0?0:1)]=0,f+=u,d++),l[p]={left:0,top:f,row:d,width:m,height:r},c[c.length-1]+=m+a}),h}_fitCols(e,t,i,r){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let h=a,d=0,f=0,g=0,p=0;return this.legendItems.forEach((m,v)=>{const{itemWidth:y,itemHeight:w}=dce(i,t,s,m,r);v>0&&f+w+2*a>u&&(h+=d+a,c.push({width:d,height:f}),g+=d+a,p++,d=f=0),l[v]={left:g,top:f,col:p,width:y,height:w},d=Math.max(d,y),f+=w+a}),h+=d,c.push({width:d,height:f}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:i,labels:{padding:r},rtl:s}}=this,o=sp(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=rr(i,this.left+r,this.right-this.lineWidths[a]);for(const c of t)a!==c.row&&(a=c.row,l=rr(i,this.left+r,this.right-this.lineWidths[a])),c.top+=this.top+e+r,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+r}else{let a=0,l=rr(i,this.top+e+r,this.bottom-this.columnSizes[a].height);for(const c of t)c.col!==a&&(a=c.col,l=rr(i,this.top+e+r,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+r,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Hd(e,this),this._draw(),$d(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:i,ctx:r}=this,{align:s,labels:o}=e,a=Dn.color,l=sp(e.rtl,this.left,this.width),c=Mi(o.font),{padding:u}=o,h=c.size,d=h/2;let f;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=c.string;const{boxWidth:g,boxHeight:p,itemHeight:m}=kF(o,h),v=function(S,T,P){if(isNaN(g)||g<=0||isNaN(p)||p<0)return;r.save();const E=rt(P.lineWidth,1);if(r.fillStyle=rt(P.fillStyle,a),r.lineCap=rt(P.lineCap,"butt"),r.lineDashOffset=rt(P.lineDashOffset,0),r.lineJoin=rt(P.lineJoin,"miter"),r.lineWidth=E,r.strokeStyle=rt(P.strokeStyle,a),r.setLineDash(rt(P.lineDash,[])),o.usePointStyle){const A={radius:p*Math.SQRT2/2,pointStyle:P.pointStyle,rotation:P.rotation,borderWidth:E},L=l.xPlus(S,g/2),W=T+d;b4(r,A,L,W,o.pointStyleWidth&&g)}else{const A=T+Math.max((h-p)/2,0),L=l.leftForLtr(S,g),W=Fd(P.borderRadius);r.beginPath(),Object.values(W).some(F=>F!==0)?lw(r,{x:L,y:A,w:g,h:p,radius:W}):r.rect(L,A,g,p),r.fill(),E!==0&&r.stroke()}r.restore()},y=function(S,T,P){nf(r,P.text,S,T+m/2,c,{strikethrough:P.hidden,textAlign:l.textAlign(P.textAlign)})},w=this.isHorizontal(),R=this._computeTitleHeight();w?f={x:rr(s,this.left+u,this.right-i[0]),y:this.top+u+R,line:0}:f={x:this.left+u,y:rr(s,this.top+R+u,this.bottom-t[0].height),line:0},E4(this.ctx,e.textDirection);const x=m+u;this.legendItems.forEach((S,T)=>{r.strokeStyle=S.fontColor,r.fillStyle=S.fontColor;const P=r.measureText(S.text).width,E=l.textAlign(S.textAlign||(S.textAlign=o.textAlign)),A=g+d+P;let L=f.x,W=f.y;l.setWidth(this.width),w?T>0&&L+A+u>this.right&&(W=f.y+=x,f.line++,L=f.x=rr(s,this.left+u,this.right-i[f.line])):T>0&&W+x>this.bottom&&(L=f.x=L+t[f.line].width+u,f.line++,W=f.y=rr(s,this.top+R+u,this.bottom-t[f.line].height));const F=l.x(L);if(v(F,W,S),L=Ose(E,L+g+d,w?L+A:this.right,e.rtl),y(l.x(L),W,S),w)f.x+=A+u;else if(typeof S.text!="string"){const V=c.lineHeight;f.y+=Z4(S,V)+u}else f.y+=x}),x4(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,i=Mi(t.font),r=gr(t.padding);if(!t.display)return;const s=sp(e.rtl,this.left,this.width),o=this.ctx,a=t.position,l=i.size/2,c=r.top+l;let u,h=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),u=this.top+c,h=rr(e.align,h,this.right-d);else{const g=this.columnSizes.reduce((p,m)=>Math.max(p,m.height),0);u=c+rr(e.align,this.top,this.bottom-g-e.labels.padding-this._computeTitleHeight())}const f=rr(a,h,h+d);o.textAlign=s.textAlign(Sk(a)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=i.string,nf(o,t.text,f,u,i)}_computeTitleHeight(){const e=this.options.title,t=Mi(e.font),i=gr(e.padding);return e.display?t.lineHeight+i.height:0}_getLegendItemAt(e,t){let i,r,s;if(uc(e,this.left,this.right)&&uc(t,this.top,this.bottom)){for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],uc(e,r.left,r.left+r.width)&&uc(t,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(e){const t=this.options;if(!pce(e.type,t))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,s=hce(r,i);r&&!s&&vn(t.onLeave,[e,r,this],this),this._hoveredItem=i,i&&!s&&vn(t.onHover,[e,i,this],this)}else i&&vn(t.onClick,[e,i,this],this)}}function dce(n,e,t,i,r){const s=fce(i,n,e,t),o=gce(r,i,e.lineHeight);return{itemWidth:s,itemHeight:o}}function fce(n,e,t,i){let r=n.text;return r&&typeof r!="string"&&(r=r.reduce((s,o)=>s.length>o.length?s:o)),e+t.size/2+i.measureText(r).width}function gce(n,e,t){let i=n;return typeof e.text!="string"&&(i=Z4(e,t)),i}function Z4(n,e){const t=n.text?n.text.length:0;return e*t}function pce(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var mce={id:"legend",_element:DF,start(n,e,t){const i=n.legend=new DF({ctx:n.ctx,options:t,chart:n});lr.configure(n,i,t),lr.addBox(n,i)},stop(n){lr.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){const i=n.legend;lr.configure(n,i,t),i.options=t},afterUpdate(n){const e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){const i=e.datasetIndex,r=t.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=n.legend.options;return n._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(t?0:void 0),u=gr(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:r||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class kk extends go{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;const r=On(i.text)?i.text.length:1;this._padding=gr(i.padding);const s=r*Mi(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:t,left:i,bottom:r,right:s,options:o}=this,a=o.align;let l=0,c,u,h;return this.isHorizontal()?(u=rr(a,i,s),h=t+e,c=s-i):(o.position==="left"?(u=i+e,h=rr(a,r,t),l=En*-.5):(u=s-e,h=rr(a,t,r),l=En*.5),c=r-t),{titleX:u,titleY:h,maxWidth:c,rotation:l}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const i=Mi(t.font),s=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);nf(e,t.text,0,0,i,{color:t.color,maxWidth:l,rotation:c,textAlign:Sk(t.align),textBaseline:"middle",translation:[o,a]})}}function bce(n,e){const t=new kk({ctx:n.ctx,options:e,chart:n});lr.configure(n,t,e),lr.addBox(n,t),n.titleBlock=t}var vce={id:"title",_element:kk,start(n,e,t){bce(n,t)},stop(n){const e=n.titleBlock;lr.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,t){const i=n.titleBlock;lr.configure(n,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const i0=new WeakMap;var wce={id:"subtitle",start(n,e,t){const i=new kk({ctx:n.ctx,options:t,chart:n});lr.configure(n,i,t),lr.addBox(n,i),i0.set(n,i)},stop(n){lr.removeBox(n,i0.get(n)),i0.delete(n)},beforeUpdate(n,e,t){const i=i0.get(n);lr.configure(n,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const wv={average(n){if(!n.length)return!1;let e,t,i=new Set,r=0,s=0;for(e=0,t=n.length;e<t;++e){const a=n[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();i.add(l.x),r+=l.y,++s}}return s===0||i.size===0?!1:{x:[...i].reduce((a,l)=>a+l)/i.size,y:r/s}},nearest(n,e){if(!n.length)return!1;let t=e.x,i=e.y,r=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=n.length;s<o;++s){const l=n[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=mP(e,c);u<r&&(r=u,a=l)}}if(a){const l=a.tooltipPosition();t=l.x,i=l.y}return{x:t,y:i}}};function Ia(n,e){return e&&(On(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function Ul(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function yce(n,e){const{element:t,datasetIndex:i,index:r}=e,s=n.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:n,label:o,parsed:s.getParsed(r),raw:n.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:t}}function LF(n,e){const t=n.chart.ctx,{body:i,footer:r,title:s}=n,{boxWidth:o,boxHeight:a}=e,l=Mi(e.bodyFont),c=Mi(e.titleFont),u=Mi(e.footerFont),h=s.length,d=r.length,f=i.length,g=gr(e.padding);let p=g.height,m=0,v=i.reduce((R,x)=>R+x.before.length+x.lines.length+x.after.length,0);if(v+=n.beforeBody.length+n.afterBody.length,h&&(p+=h*c.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),v){const R=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;p+=f*R+(v-f)*l.lineHeight+(v-1)*e.bodySpacing}d&&(p+=e.footerMarginTop+d*u.lineHeight+(d-1)*e.footerSpacing);let y=0;const w=function(R){m=Math.max(m,t.measureText(R).width+y)};return t.save(),t.font=c.string,Jt(n.title,w),t.font=l.string,Jt(n.beforeBody.concat(n.afterBody),w),y=e.displayColors?o+2+e.boxPadding:0,Jt(i,R=>{Jt(R.before,w),Jt(R.lines,w),Jt(R.after,w)}),y=0,t.font=u.string,Jt(n.footer,w),t.restore(),m+=g.width,{width:m,height:p}}function Cce(n,e){const{y:t,height:i}=e;return t<i/2?"top":t>n.height-i/2?"bottom":"center"}function Sce(n,e,t,i){const{x:r,width:s}=i,o=t.caretSize+t.caretPadding;if(n==="left"&&r+s+o>e.width||n==="right"&&r-s-o<0)return!0}function _ce(n,e,t,i){const{x:r,width:s}=t,{width:o,chartArea:{left:a,right:l}}=n;let c="center";return i==="center"?c=r<=(a+l)/2?"left":"right":r<=s/2?c="left":r>=o-s/2&&(c="right"),Sce(c,n,e,t)&&(c="center"),c}function NF(n,e,t){const i=t.yAlign||e.yAlign||Cce(n,t);return{xAlign:t.xAlign||e.xAlign||_ce(n,e,t,i),yAlign:i}}function Rce(n,e){let{x:t,width:i}=n;return e==="right"?t-=i:e==="center"&&(t-=i/2),t}function Ece(n,e,t){let{y:i,height:r}=n;return e==="top"?i+=t:e==="bottom"?i-=r+t:i-=r/2,i}function HF(n,e,t,i){const{caretSize:r,caretPadding:s,cornerRadius:o}=n,{xAlign:a,yAlign:l}=t,c=r+s,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=Fd(o);let g=Rce(e,a);const p=Ece(e,l,c);return l==="center"?a==="left"?g+=c:a==="right"&&(g-=c):a==="left"?g-=Math.max(u,d)+r:a==="right"&&(g+=Math.max(h,f)+r),{x:$i(g,0,i.width-e.width),y:$i(p,0,i.height-e.height)}}function r0(n,e,t){const i=gr(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-i.right:n.x+i.left}function $F(n){return Ia([],Ul(n))}function xce(n,e,t){return rh(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function FF(n,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}const Q4={beforeTitle:Ml,title(n){if(n.length>0){const e=n[0],t=e.chart.data.labels,i=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return t[e.dataIndex]}return""},afterTitle:Ml,beforeBody:Ml,beforeLabel:Ml,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");const t=n.formattedValue;return Dt(t)||(e+=t),e},labelColor(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Ml,afterBody:Ml,beforeFooter:Ml,footer:Ml,afterFooter:Ml};function Hr(n,e,t,i){const r=n[e].call(t,i);return typeof r>"u"?Q4[e].call(t,i):r}class _P extends go{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&t.options.animation&&i.animations,s=new P4(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=xce(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:i}=t,r=Hr(i,"beforeTitle",this,e),s=Hr(i,"title",this,e),o=Hr(i,"afterTitle",this,e);let a=[];return a=Ia(a,Ul(r)),a=Ia(a,Ul(s)),a=Ia(a,Ul(o)),a}getBeforeBody(e,t){return $F(Hr(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:i}=t,r=[];return Jt(e,s=>{const o={before:[],lines:[],after:[]},a=FF(i,s);Ia(o.before,Ul(Hr(a,"beforeLabel",this,s))),Ia(o.lines,Hr(a,"label",this,s)),Ia(o.after,Ul(Hr(a,"afterLabel",this,s))),r.push(o)}),r}getAfterBody(e,t){return $F(Hr(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:i}=t,r=Hr(i,"beforeFooter",this,e),s=Hr(i,"footer",this,e),o=Hr(i,"afterFooter",this,e);let a=[];return a=Ia(a,Ul(r)),a=Ia(a,Ul(s)),a=Ia(a,Ul(o)),a}_createItems(e){const t=this._active,i=this.chart.data,r=[],s=[],o=[];let a=[],l,c;for(l=0,c=t.length;l<c;++l)a.push(yce(this.chart,t[l]));return e.filter&&(a=a.filter((u,h,d)=>e.filter(u,h,d,i))),e.itemSort&&(a=a.sort((u,h)=>e.itemSort(u,h,i))),Jt(a,u=>{const h=FF(e.callbacks,u);r.push(Hr(h,"labelColor",this,u)),s.push(Hr(h,"labelPointStyle",this,u)),o.push(Hr(h,"labelTextColor",this,u))}),this.labelColors=r,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,t){const i=this.options.setContext(this.getContext()),r=this._active;let s,o=[];if(!r.length)this.opacity!==0&&(s={opacity:0});else{const a=wv[i.position].call(this,r,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const l=this._size=LF(this,i),c=Object.assign({},a,l),u=NF(this.chart,i,c),h=HF(i,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,s={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,i,r){const s=this.getCaretPosition(e,i,r);t.lineTo(s.x1,s.y1),t.lineTo(s.x2,s.y2),t.lineTo(s.x3,s.y3)}getCaretPosition(e,t,i){const{xAlign:r,yAlign:s}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:h}=Fd(a),{x:d,y:f}=e,{width:g,height:p}=t;let m,v,y,w,R,x;return s==="center"?(R=f+p/2,r==="left"?(m=d,v=m-o,w=R+o,x=R-o):(m=d+g,v=m+o,w=R-o,x=R+o),y=m):(r==="left"?v=d+Math.max(l,u)+o:r==="right"?v=d+g-Math.max(c,h)-o:v=this.caretX,s==="top"?(w=f,R=w-o,m=v-o,y=v+o):(w=f+p,R=w+o,m=v+o,y=v-o),x=w),{x1:m,x2:v,x3:y,y1:w,y2:R,y3:x}}drawTitle(e,t,i){const r=this.title,s=r.length;let o,a,l;if(s){const c=sp(i.rtl,this.x,this.width);for(e.x=r0(this,i.titleAlign,i),t.textAlign=c.textAlign(i.titleAlign),t.textBaseline="middle",o=Mi(i.titleFont),a=i.titleSpacing,t.fillStyle=i.titleColor,t.font=o.string,l=0;l<s;++l)t.fillText(r[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=i.titleMarginBottom-a)}}_drawColorBox(e,t,i,r,s){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:c}=s,u=Mi(s.bodyFont),h=r0(this,"left",s),d=r.x(h),f=l<u.lineHeight?(u.lineHeight-l)/2:0,g=t.y+f;if(s.usePointStyle){const p={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},m=r.leftForLtr(d,c)+c/2,v=g+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,__(e,p,m,v),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,__(e,p,m,v)}else{e.lineWidth=Et(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const p=r.leftForLtr(d,c),m=r.leftForLtr(r.xPlus(d,1),c-2),v=Fd(o.borderRadius);Object.values(v).some(y=>y!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,lw(e,{x:p,y:g,w:c,h:l,radius:v}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),lw(e,{x:m,y:g+1,w:c-2,h:l-2,radius:v}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(p,g,c,l),e.strokeRect(p,g,c,l),e.fillStyle=o.backgroundColor,e.fillRect(m,g+1,c-2,l-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,t,i){const{body:r}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=i,h=Mi(i.bodyFont);let d=h.lineHeight,f=0;const g=sp(i.rtl,this.x,this.width),p=function(P){t.fillText(P,g.x(e.x+f),e.y+d/2),e.y+=d+s},m=g.textAlign(o);let v,y,w,R,x,S,T;for(t.textAlign=o,t.textBaseline="middle",t.font=h.string,e.x=r0(this,m,i),t.fillStyle=i.bodyColor,Jt(this.beforeBody,p),f=a&&m!=="right"?o==="center"?c/2+u:c+2+u:0,R=0,S=r.length;R<S;++R){for(v=r[R],y=this.labelTextColors[R],t.fillStyle=y,Jt(v.before,p),w=v.lines,a&&w.length&&(this._drawColorBox(t,e,R,g,i),d=Math.max(h.lineHeight,l)),x=0,T=w.length;x<T;++x)p(w[x]),d=h.lineHeight;Jt(v.after,p)}f=0,d=h.lineHeight,Jt(this.afterBody,p),e.y-=s}drawFooter(e,t,i){const r=this.footer,s=r.length;let o,a;if(s){const l=sp(i.rtl,this.x,this.width);for(e.x=r0(this,i.footerAlign,i),e.y+=i.footerMarginTop,t.textAlign=l.textAlign(i.footerAlign),t.textBaseline="middle",o=Mi(i.footerFont),t.fillStyle=i.footerColor,t.font=o.string,a=0;a<s;++a)t.fillText(r[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,t,i,r){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=i,{topLeft:h,topRight:d,bottomLeft:f,bottomRight:g}=Fd(r.cornerRadius);t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.beginPath(),t.moveTo(a+h,l),o==="top"&&this.drawCaret(e,t,i,r),t.lineTo(a+c-d,l),t.quadraticCurveTo(a+c,l,a+c,l+d),o==="center"&&s==="right"&&this.drawCaret(e,t,i,r),t.lineTo(a+c,l+u-g),t.quadraticCurveTo(a+c,l+u,a+c-g,l+u),o==="bottom"&&this.drawCaret(e,t,i,r),t.lineTo(a+f,l+u),t.quadraticCurveTo(a,l+u,a,l+u-f),o==="center"&&s==="left"&&this.drawCaret(e,t,i,r),t.lineTo(a,l+h),t.quadraticCurveTo(a,l,a+h,l),t.closePath(),t.fill(),r.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,i=this.$animations,r=i&&i.x,s=i&&i.y;if(r||s){const o=wv[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=LF(this,e),l=Object.assign({},o,this._size),c=NF(t,e,l),u=HF(e,l,c,t);(r._to!==u.x||s._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(t);const r={width:this.width,height:this.height},s={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=gr(t.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&a&&(e.save(),e.globalAlpha=i,this.drawBackground(s,e,r,t),E4(e,t.textDirection),s.y+=o.top,this.drawTitle(s,e,t),this.drawBody(s,e,t),this.drawFooter(s,e,t),x4(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const i=this._active,r=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!w_(i,r),o=this._positionChanged(r,t);(s||o)&&(this._active=r,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,i=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,s=this._active||[],o=this._getActiveElements(e,s,t,i),a=this._positionChanged(o,e),l=t||!w_(o,s)||a;return l&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),l}_getActiveElements(e,t,i,r){const s=this.options;if(e.type==="mouseout")return[];if(!r)return t.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,i);return s.reverse&&o.reverse(),o}_positionChanged(e,t){const{caretX:i,caretY:r,options:s}=this,o=wv[s.position].call(this,e,t);return o!==!1&&(i!==o.x||r!==o.y)}}_P.positioners=wv;var Tce={id:"tooltip",_element:_P,positioners:wv,afterInit(n,e,t){t&&(n.tooltip=new _P({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){const e=n.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){const t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Q4},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},Mce=Object.freeze({__proto__:null,Colors:Ble,Decimation:zle,Filler:uce,Legend:mce,SubTitle:wce,Title:vce,Tooltip:Tce});const Ace=(n,e,t,i)=>(typeof e=="string"?(t=n.push(e)-1,i.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function Pce(n,e,t,i){const r=n.indexOf(e);if(r===-1)return Ace(n,e,t,i);const s=n.lastIndexOf(e);return r!==s?t:r}const Ice=(n,e)=>n===null?null:$i(Math.round(n),0,e);function J4(n){const e=this.getLabels();return n>=0&&n<e.length?e[n]:n}class Dk extends sh{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const i=this.getLabels();for(const{index:r,label:s}of t)i[r]===s&&i.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(Dt(e))return null;const i=this.getLabels();return t=isFinite(t)&&i[t]===e?t:Pce(i,e,rt(t,e),this._addedLabels),Ice(t,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),t||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const e=this.min,t=this.max,i=this.options.offset,r=[];let s=this.getLabels();s=e===0&&t===s.length-1?s:s.slice(e,t+1),this._valueRange=Math.max(s.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=e;o<=t;o++)r.push({value:o});return r}getLabelForValue(e){return J4.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}Dk.id="category";Dk.defaults={ticks:{callback:J4}};function Oce(n,e){const t=[],{bounds:r,step:s,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:h,includeBounds:d}=n,f=s||1,g=u-1,{min:p,max:m}=e,v=!Dt(o),y=!Dt(a),w=!Dt(c),R=(m-p)/(h+1);let x=N2((m-p)/g/f)*f,S,T,P,E;if(x<1e-14&&!v&&!y)return[{value:p},{value:m}];E=Math.ceil(m/x)-Math.floor(p/x),E>g&&(x=N2(E*x/g/f)*f),Dt(l)||(S=Math.pow(10,l),x=Math.ceil(x*S)/S),r==="ticks"?(T=Math.floor(p/x)*x,P=Math.ceil(m/x)*x):(T=p,P=m),v&&y&&s&&Ese((a-o)/s,x/1e3)?(E=Math.round(Math.min((a-o)/x,u)),x=(a-o)/E,T=o,P=a):w?(T=v?o:T,P=y?a:P,E=c-1,x=(P-T)/E):(E=(P-T)/x,mv(E,Math.round(E),x/1e3)?E=Math.round(E):E=Math.ceil(E));const A=Math.max(H2(x),H2(T));S=Math.pow(10,Dt(l)?A:l),T=Math.round(T*S)/S,P=Math.round(P*S)/S;let L=0;for(v&&(d&&T!==o?(t.push({value:o}),T<o&&L++,mv(Math.round((T+L*x)*S)/S,o,BF(o,R,n))&&L++):T<o&&L++);L<E;++L){const W=Math.round((T+L*x)*S)/S;if(y&&W>a)break;t.push({value:W})}return y&&d&&P!==a?t.length&&mv(t[t.length-1].value,a,BF(a,R,n))?t[t.length-1].value=a:t.push({value:a}):(!y||P===a)&&t.push({value:P}),t}function BF(n,e,{horizontal:t,minRotation:i}){const r=Ko(i),s=(t?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+n).length;return Math.min(e/s,o)}class M_ extends sh{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return Dt(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:i}=this.getUserBounds();let{min:r,max:s}=this;const o=l=>r=t?r:l,a=l=>s=i?s:l;if(e){const l=Ja(r),c=Ja(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(r===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(r-l)}this.min=r,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:i}=e,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),t=t||11),t&&(r=Math.min(t,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},s=this._range||this,o=Oce(r,s);return e.bounds==="ticks"&&l4(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let t=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const r=(i-t)/Math.max(e.length-1,1)/2;t-=r,i+=r}this._startValue=t,this._endValue=i,this._valueRange=i-t}getLabelForValue(e){return Yw(e,this.chart.options.locale,this.options.ticks.format)}}class Yp extends M_{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=ti(e)?e:0,this.max=ti(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,i=Ko(this.options.ticks.minRotation),r=(e?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,s.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Yp.id="linear";Yp.defaults={ticks:{callback:g1.formatters.numeric}};const uw=n=>Math.floor(Ru(n)),Ch=(n,e)=>Math.pow(10,uw(n)+e);function VF(n){return n/Math.pow(10,uw(n))===1}function WF(n,e,t){const i=Math.pow(10,t),r=Math.floor(n/i);return Math.ceil(e/i)-r}function kce(n,e){const t=e-n;let i=uw(t);for(;WF(n,e,i)>10;)i++;for(;WF(n,e,i)<10;)i--;return Math.min(i,uw(n))}function Dce(n,{min:e,max:t}){e=ls(n.min,e);const i=[],r=uw(e);let s=kce(e,t),o=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),l=r>s?Math.pow(10,r):0,c=Math.round((e-l)*o)/o,u=Math.floor((e-l)/a/10)*a*10;let h=Math.floor((c-u)/Math.pow(10,s)),d=ls(n.min,Math.round((l+u+h*Math.pow(10,s))*o)/o);for(;d<t;)i.push({value:d,major:VF(d),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(s++,h=2,o=s>=0?1:o),d=Math.round((l+u+h*Math.pow(10,s))*o)/o;const f=ls(n.max,d);return i.push({value:f,major:VF(f),significand:h}),i}class Kp extends sh{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const i=M_.prototype.parse.apply(this,[e,t]);if(i===0){this._zero=!0;return}return ti(i)&&i>0?i:null}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=ti(e)?Math.max(0,e):null,this.max=ti(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!ti(this._userMin)&&(this.min=e===Ch(this.min,0)?Ch(this.min,-1):Ch(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let i=this.min,r=this.max;const s=a=>i=e?i:a,o=a=>r=t?r:a;i===r&&(i<=0?(s(1),o(10)):(s(Ch(i,-1)),o(Ch(r,1)))),i<=0&&s(Ch(r,-1)),r<=0&&o(Ch(i,1)),this.min=i,this.max=r}buildTicks(){const e=this.options,t={min:this._userMin,max:this._userMax},i=Dce(t,this);return e.bounds==="ticks"&&l4(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return e===void 0?"0":Yw(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Ru(e),this._valueRange=Ru(this.max)-Ru(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Ru(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}Kp.id="logarithmic";Kp.defaults={ticks:{callback:g1.formatters.logarithmic,major:{enabled:!0}}};function RP(n){const e=n.ticks;if(e.display&&n.display){const t=gr(e.backdropPadding);return rt(e.font&&e.font.size,Dn.font.size)+t.height}return 0}function Lce(n,e,t){return t=On(t)?t:[t],{w:Wse(n,e.string,t),h:t.length*e.lineHeight}}function jF(n,e,t,i,r){return n===i||n===r?{start:e-t/2,end:e+t/2}:n<i||n>r?{start:e-t,end:e}:{start:e,end:e+t}}function Nce(n){const e={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},t=Object.assign({},e),i=[],r=[],s=n._pointLabels.length,o=n.options.pointLabels,a=o.centerPointLabels?En/s:0;for(let l=0;l<s;l++){const c=o.setContext(n.getPointLabelContext(l));r[l]=c.padding;const u=n.getPointPosition(l,n.drawingArea+r[l],a),h=Mi(c.font),d=Lce(n.ctx,h,n._pointLabels[l]);i[l]=d;const f=ps(n.getIndexAngle(l)+a),g=Math.round(yk(f)),p=jF(g,u.x,d.w,0,180),m=jF(g,u.y,d.h,90,270);Hce(t,e,f,p,m)}n.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),n._pointLabelItems=Bce(n,i,r)}function Hce(n,e,t,i,r){const s=Math.abs(Math.sin(t)),o=Math.abs(Math.cos(t));let a=0,l=0;i.start<e.l?(a=(e.l-i.start)/s,n.l=Math.min(n.l,e.l-a)):i.end>e.r&&(a=(i.end-e.r)/s,n.r=Math.max(n.r,e.r+a)),r.start<e.t?(l=(e.t-r.start)/o,n.t=Math.min(n.t,e.t-l)):r.end>e.b&&(l=(r.end-e.b)/o,n.b=Math.max(n.b,e.b+l))}function $ce(n,e,t){const i=n.drawingArea,{extra:r,additionalAngle:s,padding:o,size:a}=t,l=n.getPointPosition(e,i+r+o,s),c=Math.round(yk(ps(l.angle+oi))),u=jce(l.y,a.h,c),h=Vce(c),d=Wce(l.x,a.w,h);return{visible:!0,x:l.x,y:u,textAlign:h,left:d,top:u,right:d+a.w,bottom:u+a.h}}function Fce(n,e){if(!e)return!0;const{left:t,top:i,right:r,bottom:s}=n;return!(dc({x:t,y:i},e)||dc({x:t,y:s},e)||dc({x:r,y:i},e)||dc({x:r,y:s},e))}function Bce(n,e,t){const i=[],r=n._pointLabels.length,s=n.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:RP(s)/2,additionalAngle:o?En/r:0};let c;for(let u=0;u<r;u++){l.padding=t[u],l.size=e[u];const h=$ce(n,u,l);i.push(h),a==="auto"&&(h.visible=Fce(h,c),h.visible&&(c=h))}return i}function Vce(n){return n===0||n===180?"center":n<180?"left":"right"}function Wce(n,e,t){return t==="right"?n-=e:t==="center"&&(n-=e/2),n}function jce(n,e,t){return t===90||t===270?n-=e/2:(t>270||t<90)&&(n-=e),n}function zce(n,e,t){const{left:i,top:r,right:s,bottom:o}=t,{backdropColor:a}=e;if(!Dt(a)){const l=Fd(e.borderRadius),c=gr(e.backdropPadding);n.fillStyle=a;const u=i-c.left,h=r-c.top,d=s-i+c.width,f=o-r+c.height;Object.values(l).some(g=>g!==0)?(n.beginPath(),lw(n,{x:u,y:h,w:d,h:f,radius:l}),n.fill()):n.fillRect(u,h,d,f)}}function Uce(n,e){const{ctx:t,options:{pointLabels:i}}=n;for(let r=e-1;r>=0;r--){const s=n._pointLabelItems[r];if(!s.visible)continue;const o=i.setContext(n.getPointLabelContext(r));zce(t,o,s);const a=Mi(o.font),{x:l,y:c,textAlign:u}=s;nf(t,n._pointLabels[r],l,c+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}function eU(n,e,t,i){const{ctx:r}=n;if(t)r.arc(n.xCenter,n.yCenter,e,0,Rn);else{let s=n.getPointPosition(0,e);r.moveTo(s.x,s.y);for(let o=1;o<i;o++)s=n.getPointPosition(o,e),r.lineTo(s.x,s.y)}}function Gce(n,e,t,i,r){const s=n.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!i||!a||!l||t<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(r.dash||[]),s.lineDashOffset=r.dashOffset,s.beginPath(),eU(n,t,o,i),s.closePath(),s.stroke(),s.restore())}function Yce(n,e,t){return rh(n,{label:t,index:e,type:"pointLabel"})}class Qw extends M_{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=gr(RP(this.options)/2),t=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(t,i)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=ti(e)&&!isNaN(e)?e:0,this.max=ti(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/RP(this.options))}generateTickLabels(e){M_.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,i)=>{const r=vn(this.options.pointLabels.callback,[t,i],this);return r||r===0?r:""}).filter((t,i)=>this.chart.getDataVisibility(i))}fit(){const e=this.options;e.display&&e.pointLabels.display?Nce(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,i,r){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,i,r))}getIndexAngle(e){const t=Rn/(this._pointLabels.length||1),i=this.options.startAngle||0;return ps(e*t+Ko(i))}getDistanceFromCenterForValue(e){if(Dt(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(Dt(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const i=t[e];return Yce(this.getContext(),e,i)}}getPointPosition(e,t,i=0){const r=this.getIndexAngle(e)-oi+i;return{x:Math.cos(r)*t+this.xCenter,y:Math.sin(r)*t+this.yCenter,angle:r}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:i,right:r,bottom:s}=this._pointLabelItems[e];return{left:t,top:i,right:r,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const i=this.ctx;i.save(),i.beginPath(),eU(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:i,grid:r,border:s}=t,o=this._pointLabels.length;let a,l,c;if(t.pointLabels.display&&Uce(this,o),r.display&&this.ticks.forEach((u,h)=>{if(h!==0||h===0&&this.min<0){l=this.getDistanceFromCenterForValue(u.value);const d=this.getContext(h),f=r.setContext(d),g=s.setContext(d);Gce(this,f,l,o,g)}}),i.display){for(e.save(),a=o-1;a>=0;a--){const u=i.setContext(this.getPointLabelContext(a)),{color:h,lineWidth:d}=u;!d||!h||(e.lineWidth=d,e.strokeStyle=h,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,i=t.ticks;if(!i.display)return;const r=this.getIndexAngle(0);let s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!t.reverse)return;const c=i.setContext(this.getContext(l)),u=Mi(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=u.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const h=gr(c.backdropPadding);e.fillRect(-o/2-h.left,-s-u.size/2-h.top,o+h.width,u.size+h.height)}nf(e,a.label,0,-s,u,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}}Qw.id="radialLinear";Qw.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:g1.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(n){return n},padding:5,centerPointLabels:!1}};Qw.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};Qw.descriptors={angleLines:{_fallback:"grid"}};const C1={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},es=Object.keys(C1);function zF(n,e){return n-e}function UF(n,e){if(Dt(e))return null;const t=n._adapter,{parser:i,round:r,isoWeekday:s}=n._parseOpts;let o=e;return typeof i=="function"&&(o=i(o)),ti(o)||(o=typeof i=="string"?t.parse(o,i):t.parse(o)),o===null?null:(r&&(o=r==="week"&&(Sp(s)||s===!0)?t.startOf(o,"isoWeek",s):t.startOf(o,r)),+o)}function GF(n,e,t,i){const r=es.length;for(let s=es.indexOf(n);s<r-1;++s){const o=C1[es[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((t-e)/(a*o.size))<=i)return es[s]}return es[r-1]}function Kce(n,e,t,i,r){for(let s=es.length-1;s>=es.indexOf(t);s--){const o=es[s];if(C1[o].common&&n._adapter.diff(r,i,o)>=e-1)return o}return es[t?es.indexOf(t):0]}function qce(n){for(let e=es.indexOf(n)+1,t=es.length;e<t;++e)if(C1[es[e]].common)return es[e]}function YF(n,e,t){if(!t)n[e]=!0;else if(t.length){const{lo:i,hi:r}=Ck(t,e),s=t[i]>=e?t[i]:t[r];n[s]=!0}}function Xce(n,e,t,i){const r=n._adapter,s=+r.startOf(e[0].value,i),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+r.add(a,1,i))l=t[a],l>=0&&(e[l].major=!0);return e}function KF(n,e,t){const i=[],r={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],r[a]=o,i.push({value:a,major:!1});return s===0||!t?i:Xce(n,i,r,t)}class Jw extends sh{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const i=e.time||(e.time={}),r=this._adapter=new rae._date(e.adapters.date);r.init(t),pv(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:UF(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,i=e.time.unit||"day";let{min:r,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(r=Math.min(r,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),r=ti(r)&&!isNaN(r)?r:+t.startOf(Date.now(),i),s=ti(s)&&!isNaN(s)?s:+t.endOf(Date.now(),i)+1,this.min=Math.min(r,s-1),this.max=Math.max(r+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],i=e[e.length-1]),{min:t,max:i}}buildTicks(){const e=this.options,t=e.time,i=e.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const s=this.min,o=this.max,a=Ase(r,s,o);return this._unit=t.unit||(i.autoSkip?GF(t.minUnit,this.min,this.max,this._getLabelCapacity(s)):Kce(this,a.length,t.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:qce(this._unit),this.initOffsets(r),e.reverse&&a.reverse(),KF(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,i=0,r,s;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?t=1-r:t=(this.getDecimalForValue(e[1])-r)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?i=s:i=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;t=$i(t,0,o),i=$i(i,0,o),this._offsets={start:t,end:i,factor:1/(t+1+i)}}_generate(){const e=this._adapter,t=this.min,i=this.max,r=this.options,s=r.time,o=s.unit||GF(s.minUnit,t,i,this._getLabelCapacity(t)),a=rt(r.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=Sp(l)||l===!0,u={};let h=t,d,f;if(c&&(h=+e.startOf(h,"isoWeek",l)),h=+e.startOf(h,c?"day":o),e.diff(i,t,o)>1e5*a)throw new Error(t+" and "+i+" are too far apart with stepSize of "+a+" "+o);const g=r.ticks.source==="data"&&this.getDataTimestamps();for(d=h,f=0;d<i;d=+e.add(d,a,o),f++)YF(u,d,g);return(d===i||r.bounds==="ticks"||f===1)&&YF(u,d,g),Object.keys(u).sort(zF).map(p=>+p)}getLabelForValue(e){const t=this._adapter,i=this.options.time;return i.tooltipFormat?t.format(e,i.tooltipFormat):t.format(e,i.displayFormats.datetime)}format(e,t){const r=this.options.time.displayFormats,s=this._unit,o=t||r[s];return this._adapter.format(e,o)}_tickFormatFunction(e,t,i,r){const s=this.options,o=s.ticks.callback;if(o)return vn(o,[e,t,i],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],h=c&&a[c],d=i[t],f=c&&h&&d&&d.major;return this._adapter.format(e,r||(f?h:u))}generateTickLabels(e){let t,i,r;for(t=0,i=e.length;t<i;++t)r=e[t],r.label=this._tickFormatFunction(r.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+i)*t.factor)}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,i=this.ctx.measureText(e).width,r=Ko(this.isHorizontal()?t.maxRotation:t.minRotation),s=Math.cos(r),o=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:i*s+a*o,h:i*o+a*s}}_getLabelCapacity(e){const t=this.options.time,i=t.displayFormats,r=i[t.unit]||i.millisecond,s=this._tickFormatFunction(e,0,KF(this,[e],this._majorUnit),r),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],t,i;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(t=0,i=r.length;t<i;++t)e=e.concat(r[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,i;if(e.length)return e;const r=this.getLabels();for(t=0,i=r.length;t<i;++t)e.push(UF(this,r[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return h4(e.sort(zF))}}Jw.id="time";Jw.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};function s0(n,e,t){let i=0,r=n.length-1,s,o,a,l;t?(e>=n[i].pos&&e<=n[r].pos&&({lo:i,hi:r}=hc(n,"pos",e)),{pos:s,time:a}=n[i],{pos:o,time:l}=n[r]):(e>=n[i].time&&e<=n[r].time&&({lo:i,hi:r}=hc(n,"time",e)),{time:s,pos:a}=n[i],{time:o,pos:l}=n[r]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class Lk extends Jw{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=s0(t,this.min),this._tableRange=s0(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:i}=this,r=[],s=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=t&&c<=i&&r.push(c);if(r.length<2)return[{time:t,pos:0},{time:i,pos:1}];for(o=0,a=r.length;o<a;++o)u=r[o+1],l=r[o-1],c=r[o],Math.round((u+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,t=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(t)||i.length===1)&&i.push(t),i.sort((r,s)=>r-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),i=this.getLabelTimestamps();return t.length&&i.length?e=this.normalize(t.concat(i)):e=t.length?t:i,e=this._cache.all=e,e}getDecimalForValue(e){return(s0(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return s0(this._table,i*this._tableRange+this._minPos,!0)}}Lk.id="timeseries";Lk.defaults=Jw.defaults;var Zce=Object.freeze({__proto__:null,CategoryScale:Dk,LinearScale:Yp,LogarithmicScale:Kp,RadialLinearScale:Qw,TimeScale:Jw,TimeSeriesScale:Lk});const tU=[iae,kle,Mce,Zce];Es.register(...tU);function nU(n,e,t,i={}){return new Es(n,{type:e,data:t,options:i})}var iU;let rU;function Qce(n,e,t,i,r,s){var o,a,l,c,u,h,d,f=Symbol.metadata||Symbol.for("Symbol.metadata"),g=Object.defineProperty,p=Object.create,m=[p(null),p(null)],v=e.length;function y(S,T,P){return function(E,A){T&&(A=E,E=n);for(var L=0;L<S.length;L++)A=S[L].apply(E,P?[A]:[]);return P?A:E}}function w(S,T,P,E){if(typeof S!="function"&&(E||S!==void 0))throw new TypeError(T+" must "+(P||"be")+" a function"+(E?"":" or undefined"));return S}function R(S,T,P,E,A,L,W,F,V,H,N){function j(Y){if(!N(Y))throw new TypeError("Attempted to access private element on non-instance")}var k=[].concat(T[0]),K=T[3],ie=!W,b=A===1,C=A===3,_=A===4,I=A===2;function $(Y,ne,de){return function(he,ce){return ne&&(ce=he,he=S),de&&de(he),M[Y].call(he,ce)}}if(!ie){var M={},B=[],z=C?"get":_||b?"set":"value";if(V?(H||b?M={get:qF(function(){return K(this)},E,"get"),set:function(Y){T[4](this,Y)}}:M[z]=K,H||qF(M[z],E,I?"":z)):H||(M=Object.getOwnPropertyDescriptor(S,E)),!H&&!V){if((a=m[+F][E])&&(a^A)!=7)throw Error("Decorating two elements with the same name ("+M[z].name+") is not supported yet");m[+F][E]=A<3?1:A}}for(var U=S,le=k.length-1;le>=0;le-=P?2:1){var ue=w(k[le],"A decorator","be",!0),be=P?k[le-1]:void 0,fe={},Z={kind:["field","accessor","method","getter","setter","class"][A],name:E,metadata:o,addInitializer:(function(Y,ne){if(Y.v)throw new TypeError("attempted to call addInitializer after decoration was finished");w(ne,"An initializer","be",!0),L.push(ne)}).bind(null,fe)};if(ie)a=ue.call(be,U,Z),fe.v=1,w(a,"class decorators","return")&&(U=a);else if(Z.static=F,Z.private=V,a=Z.access={has:V?N.bind():function(Y){return E in Y}},_||(a.get=V?I?function(Y){return j(Y),M.value}:$("get",0,j):function(Y){return Y[E]}),I||C||(a.set=V?$("set",0,j):function(Y,ne){Y[E]=ne}),U=ue.call(be,b?{get:M.get,set:M.set}:M[z],Z),fe.v=1,b){if(typeof U=="object"&&U)(a=w(U.get,"accessor.get"))&&(M.get=a),(a=w(U.set,"accessor.set"))&&(M.set=a),(a=w(U.init,"accessor.init"))&&B.unshift(a);else if(U!==void 0)throw new TypeError("accessor decorators must return an object with get, set, or init properties or undefined")}else w(U,(H?"field":"method")+" decorators","return")&&(H?B.unshift(U):M[z]=U)}return A<2&&W.push(y(B,F,1),y(L,F,0)),H||ie||(V?b?W.splice(-1,0,$("get",F),$("set",F)):W.push(I?M[z]:w.call.bind(M[z])):g(S,E,M)),U}function x(S){return g(S,f,{configurable:!0,enumerable:!0,value:o})}return o=p(o??null),u=[],h=function(S){S&&u.push(y(S))},d=function(S,T){for(var P=0;P<t.length;P++){var E=t[P],A=E[1],L=7&A;if((8&A)==S&&!L==T){var W=E[2],F=!!E[3],V=16&A;R(S?n:n.prototype,E,V,F?"#"+W:Jce(W),L,L<2?[]:S?c=c||[]:l=l||[],u,!!S,F,T,S&&F?function(H){return tue(H)===n}:r)}}},d(8,0),d(0,0),d(8,1),d(0,1),h(l),h(c),a=u,v||x(n),{e:a,get c(){var S=[];return v&&[x(n=R(n,[e],i,n.name,5,S)),y(S,1)]}}}function Jce(n){var e=eue(n,"string");return typeof e=="symbol"?e:e+""}function eue(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function qF(n,e,t){typeof e=="symbol"&&(e=(e=e.description)?"["+e+"]":"");try{Object.defineProperty(n,"name",{configurable:!0,value:t?t+" "+e:e})}catch{}return n}function tue(n){if(Object(n)!==n)throw TypeError("right-hand side of 'in' should be an object, got "+(n!==null?typeof n:"null"));return n}let S1;class nue{constructor(){this.mychart=void 0}bind(){}attached(){const e=[{year:2010,count:10},{year:2011,count:20},{year:2012,count:15},{year:2013,count:25},{year:2014,count:22},{year:2015,count:30},{year:2016,count:28}],t={labels:e.map(i=>i.year),datasets:[{label:"Acquisitions by year",data:e.map(i=>i.count)}]};this.chartjs=nU(this.mychart,"bar",t)}}iU=nue;[S1,rU]=Qce(iU,[aa({...Gre,name:"sv-chartjs"})],[]).c;rU();const sU="chartjs-geo",EP=`<div class="chartjsgeocontainer">
  <div class="w3-bar w3-light-grey w3-small">
    <button class="w3-bar-item w3-button" click.trigger="resetView()">Home</button>
    <button class="w3-bar-item w3-button" click.trigger="toggleAnimation()">Animate</button>
    <div class="w3-dropdown-hover">
      <button class="w3-button">Projection</button>
      <div class="w3-dropdown-content w3-bar-block w3-card-4">
        <button repeat.for="item of projections" click.trigger='switchProjection(item)'
          class="w3-bar-item w3-button w3-ripple">\${item}</button>
      </div>
    </div>
    <div class="w3-dropdown-hover">
      <button class="w3-button">Continent</button>
      <div class="w3-dropdown-content w3-bar-block w3-card-4">
        <button click.trigger='switchToEurope()' class="w3-bar-item w3-button w3-ripple">Europe</button>
        <button click.trigger='switchToAsia()' class="w3-bar-item w3-button w3-ripple">Asia</button>
        <button click.trigger='switchToNAmerica()' class="w3-bar-item w3-button w3-ripple">N.America</button>
        <button click.trigger='switchToSAmerica()' class="w3-bar-item w3-button w3-ripple">S.America</button>
        <button click.trigger='switchToAfrica()' class="w3-bar-item w3-button w3-ripple">Africa</button>
        <button click.trigger='switchToPacific()' class="w3-bar-item w3-button w3-ripple">Australia &amp;
          Oceania</button>
        <button click.trigger='switchToWorld()' class="w3-bar-item w3-button w3-ripple">World</button>
      </div>
    </div>
  </div>
  <canvas ref="geochart" class="chartjsgeo"></canvas>
  <div class="chartjsgeodesc">
    click country for details: <b>\${countryName}</b><br />
    <span>\${projectName} \${projectStatus} \${projectStatusText}</span><br />
    <i>\${projectPublication}</i><br />
    <span repeat.for="url of projecturls"><a href.bind='url' target="_blank" class="truncate">\${url}</a><br /></span>
  </div>
</div>`,oU=[],aU={};let Dx;function iue(n){Dx||(Dx=Ti.define({name:sU,template:EP,dependencies:oU,bindables:aU})),n.register(Dx)}const rue=Object.freeze(Object.defineProperty({__proto__:null,bindables:aU,default:EP,dependencies:oU,name:sU,register:iue,template:EP},Symbol.toStringTag,{value:"Module"}));class Uu{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const t=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const s=t[r],o=e+s,a=Math.abs(e)<Math.abs(s)?e-(o-s):s-(o-e);a&&(t[i++]=a),e=o}return t[i]=e,this._n=i+1,this}valueOf(){const e=this._partials;let t=this._n,i,r,s,o=0;if(t>0){for(o=e[--t];t>0&&(i=o,r=e[--t],o=i+r,s=r-(o-i),!s););t>0&&(s<0&&e[t-1]<0||s>0&&e[t-1]>0)&&(r=s*2,i=o+r,r==i-o&&(o=i))}return o}}function*sue(n){for(const e of n)yield*e}function lU(n){return Array.from(sue(n))}function Gg(n,e,t){n=+n,e=+e,t=(r=arguments.length)<2?(e=n,n=0,1):r<3?1:+t;for(var i=-1,r=Math.max(0,Math.ceil((e-n)/t))|0,s=new Array(r);++i<r;)s[i]=n+i*t;return s}var Xe=1e-6,Nk=1e-12,wt=Math.PI,Jn=wt/2,XF=wt/4,xs=wt*2,Er=180/wt,sn=wt/180,Lt=Math.abs,qp=Math.atan,al=Math.atan2,lt=Math.cos,o0=Math.ceil,cU=Math.exp,A_=Math.log,Lx=Math.pow,st=Math.sin,to=Math.sign||function(n){return n>0?1:n<0?-1:0},kr=Math.sqrt,Hk=Math.tan;function uU(n){return n>1?0:n<-1?wt:Math.acos(n)}function ao(n){return n>1?Jn:n<-1?-Jn:Math.asin(n)}function Hi(){}function P_(n,e){n&&QF.hasOwnProperty(n.type)&&QF[n.type](n,e)}var ZF={Feature:function(n,e){P_(n.geometry,e)},FeatureCollection:function(n,e){for(var t=n.features,i=-1,r=t.length;++i<r;)P_(t[i].geometry,e)}},QF={Sphere:function(n,e){e.sphere()},Point:function(n,e){n=n.coordinates,e.point(n[0],n[1],n[2])},MultiPoint:function(n,e){for(var t=n.coordinates,i=-1,r=t.length;++i<r;)n=t[i],e.point(n[0],n[1],n[2])},LineString:function(n,e){xP(n.coordinates,e,0)},MultiLineString:function(n,e){for(var t=n.coordinates,i=-1,r=t.length;++i<r;)xP(t[i],e,0)},Polygon:function(n,e){JF(n.coordinates,e)},MultiPolygon:function(n,e){for(var t=n.coordinates,i=-1,r=t.length;++i<r;)JF(t[i],e)},GeometryCollection:function(n,e){for(var t=n.geometries,i=-1,r=t.length;++i<r;)P_(t[i],e)}};function xP(n,e,t){var i=-1,r=n.length-t,s;for(e.lineStart();++i<r;)s=n[i],e.point(s[0],s[1],s[2]);e.lineEnd()}function JF(n,e){var t=-1,i=n.length;for(e.polygonStart();++t<i;)xP(n[t],e,1);e.polygonEnd()}function Cd(n,e){n&&ZF.hasOwnProperty(n.type)?ZF[n.type](n,e):P_(n,e)}function TP(n){return[al(n[1],n[0]),ao(n[2])]}function Ep(n){var e=n[0],t=n[1],i=lt(t);return[i*lt(e),i*st(e),st(t)]}function a0(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]}function I_(n,e){return[n[1]*e[2]-n[2]*e[1],n[2]*e[0]-n[0]*e[2],n[0]*e[1]-n[1]*e[0]]}function Nx(n,e){n[0]+=e[0],n[1]+=e[1],n[2]+=e[2]}function l0(n,e){return[n[0]*e,n[1]*e,n[2]*e]}function MP(n){var e=kr(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=e,n[1]/=e,n[2]/=e}function AP(n,e){function t(i,r){return i=n(i,r),e(i[0],i[1])}return n.invert&&e.invert&&(t.invert=function(i,r){return i=e.invert(i,r),i&&n.invert(i[0],i[1])}),t}function PP(n,e){return Lt(n)>wt&&(n-=Math.round(n/xs)*xs),[n,e]}PP.invert=PP;function hU(n,e,t){return(n%=xs)?e||t?AP(tB(n),nB(e,t)):tB(n):e||t?nB(e,t):PP}function eB(n){return function(e,t){return e+=n,Lt(e)>wt&&(e-=Math.round(e/xs)*xs),[e,t]}}function tB(n){var e=eB(n);return e.invert=eB(-n),e}function nB(n,e){var t=lt(n),i=st(n),r=lt(e),s=st(e);function o(a,l){var c=lt(l),u=lt(a)*c,h=st(a)*c,d=st(l),f=d*t+u*i;return[al(h*r-f*s,u*t-d*i),ao(f*r+h*s)]}return o.invert=function(a,l){var c=lt(l),u=lt(a)*c,h=st(a)*c,d=st(l),f=d*r-h*s;return[al(h*r+d*s,u*t+f*i),ao(f*t-u*i)]},o}function oue(n){n=hU(n[0]*sn,n[1]*sn,n.length>2?n[2]*sn:0);function e(t){return t=n(t[0]*sn,t[1]*sn),t[0]*=Er,t[1]*=Er,t}return e.invert=function(t){return t=n.invert(t[0]*sn,t[1]*sn),t[0]*=Er,t[1]*=Er,t},e}function aue(n,e,t,i,r,s){if(t){var o=lt(e),a=st(e),l=i*t;r==null?(r=e+i*xs,s=e-l/2):(r=iB(o,r),s=iB(o,s),(i>0?r<s:r>s)&&(r+=i*xs));for(var c,u=r;i>0?u>s:u<s;u-=l)c=TP([o,-a*lt(u),-a*st(u)]),n.point(c[0],c[1])}}function iB(n,e){e=Ep(e),e[0]-=n,MP(e);var t=uU(-e[1]);return((-e[2]<0?-t:t)+xs-Xe)%xs}function dU(){var n=[],e;return{point:function(t,i,r){e.push([t,i,r])},lineStart:function(){n.push(e=[])},lineEnd:Hi,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var t=n;return n=[],e=null,t}}}function yS(n,e){return Lt(n[0]-e[0])<Xe&&Lt(n[1]-e[1])<Xe}function c0(n,e,t,i){this.x=n,this.z=e,this.o=t,this.e=i,this.v=!1,this.n=this.p=null}function fU(n,e,t,i,r){var s=[],o=[],a,l;if(n.forEach(function(g){if(!((p=g.length-1)<=0)){var p,m=g[0],v=g[p],y;if(yS(m,v)){if(!m[2]&&!v[2]){for(r.lineStart(),a=0;a<p;++a)r.point((m=g[a])[0],m[1]);r.lineEnd();return}v[0]+=2*Xe}s.push(y=new c0(m,g,null,!0)),o.push(y.o=new c0(m,null,y,!1)),s.push(y=new c0(v,g,null,!1)),o.push(y.o=new c0(v,null,y,!0))}}),!!s.length){for(o.sort(e),rB(s),rB(o),a=0,l=o.length;a<l;++a)o[a].e=t=!t;for(var c=s[0],u,h;;){for(var d=c,f=!0;d.v;)if((d=d.n)===c)return;u=d.z,r.lineStart();do{if(d.v=d.o.v=!0,d.e){if(f)for(a=0,l=u.length;a<l;++a)r.point((h=u[a])[0],h[1]);else i(d.x,d.n.x,1,r);d=d.n}else{if(f)for(u=d.p.z,a=u.length-1;a>=0;--a)r.point((h=u[a])[0],h[1]);else i(d.x,d.p.x,-1,r);d=d.p}d=d.o,u=d.z,f=!f}while(!d.v);r.lineEnd()}}}function rB(n){if(e=n.length){for(var e,t=0,i=n[0],r;++t<e;)i.n=r=n[t],r.p=i,i=r;i.n=r=n[0],r.p=i}}function Hx(n){return Lt(n[0])<=wt?n[0]:to(n[0])*((Lt(n[0])+wt)%xs-wt)}function gU(n,e){var t=Hx(e),i=e[1],r=st(i),s=[st(t),-lt(t),0],o=0,a=0,l=new Uu;r===1?i=Jn+Xe:r===-1&&(i=-Jn-Xe);for(var c=0,u=n.length;c<u;++c)if(d=(h=n[c]).length)for(var h,d,f=h[d-1],g=Hx(f),p=f[1]/2+XF,m=st(p),v=lt(p),y=0;y<d;++y,g=R,m=S,v=T,f=w){var w=h[y],R=Hx(w),x=w[1]/2+XF,S=st(x),T=lt(x),P=R-g,E=P>=0?1:-1,A=E*P,L=A>wt,W=m*S;if(l.add(al(W*E*st(A),v*T+W*lt(A))),o+=L?P+E*xs:P,L^g>=t^R>=t){var F=I_(Ep(f),Ep(w));MP(F);var V=I_(s,F);MP(V);var H=(L^P>=0?-1:1)*ao(V[2]);(i>H||i===H&&(F[0]||F[1]))&&(a+=L^P>=0?1:-1)}}return(o<-Xe||o<Xe&&l<-Nk)^a&1}function pU(n,e,t,i){return function(r){var s=e(r),o=dU(),a=e(o),l=!1,c,u,h,d={point:f,lineStart:p,lineEnd:m,polygonStart:function(){d.point=v,d.lineStart=y,d.lineEnd=w,u=[],c=[]},polygonEnd:function(){d.point=f,d.lineStart=p,d.lineEnd=m,u=lU(u);var R=gU(c,i);u.length?(l||(r.polygonStart(),l=!0),fU(u,cue,R,t,r)):R&&(l||(r.polygonStart(),l=!0),r.lineStart(),t(null,null,1,r),r.lineEnd()),l&&(r.polygonEnd(),l=!1),u=c=null},sphere:function(){r.polygonStart(),r.lineStart(),t(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function f(R,x){n(R,x)&&r.point(R,x)}function g(R,x){s.point(R,x)}function p(){d.point=g,s.lineStart()}function m(){d.point=f,s.lineEnd()}function v(R,x){h.push([R,x]),a.point(R,x)}function y(){a.lineStart(),h=[]}function w(){v(h[0][0],h[0][1]),a.lineEnd();var R=a.clean(),x=o.result(),S,T=x.length,P,E,A;if(h.pop(),c.push(h),h=null,!!T){if(R&1){if(E=x[0],(P=E.length-1)>0){for(l||(r.polygonStart(),l=!0),r.lineStart(),S=0;S<P;++S)r.point((A=E[S])[0],A[1]);r.lineEnd()}return}T>1&&R&2&&x.push(x.pop().concat(x.shift())),u.push(x.filter(lue))}}return d}}function lue(n){return n.length>1}function cue(n,e){return((n=n.x)[0]<0?n[1]-Jn-Xe:Jn-n[1])-((e=e.x)[0]<0?e[1]-Jn-Xe:Jn-e[1])}const sB=pU(function(){return!0},uue,due,[-wt,-Jn]);function uue(n){var e=NaN,t=NaN,i=NaN,r;return{lineStart:function(){n.lineStart(),r=1},point:function(s,o){var a=s>0?wt:-wt,l=Lt(s-e);Lt(l-wt)<Xe?(n.point(e,t=(t+o)/2>0?Jn:-Jn),n.point(i,t),n.lineEnd(),n.lineStart(),n.point(a,t),n.point(s,t),r=0):i!==a&&l>=wt&&(Lt(e-i)<Xe&&(e-=i*Xe),Lt(s-a)<Xe&&(s-=a*Xe),t=hue(e,t,s,o),n.point(i,t),n.lineEnd(),n.lineStart(),n.point(a,t),r=0),n.point(e=s,t=o),i=a},lineEnd:function(){n.lineEnd(),e=t=NaN},clean:function(){return 2-r}}}function hue(n,e,t,i){var r,s,o=st(n-t);return Lt(o)>Xe?qp((st(e)*(s=lt(i))*st(t)-st(i)*(r=lt(e))*st(n))/(r*s*o)):(e+i)/2}function due(n,e,t,i){var r;if(n==null)r=t*Jn,i.point(-wt,r),i.point(0,r),i.point(wt,r),i.point(wt,0),i.point(wt,-r),i.point(0,-r),i.point(-wt,-r),i.point(-wt,0),i.point(-wt,r);else if(Lt(n[0]-e[0])>Xe){var s=n[0]<e[0]?wt:-wt;r=t*s/2,i.point(-s,r),i.point(0,r),i.point(s,r)}else i.point(e[0],e[1])}function fue(n){var e=lt(n),t=2*sn,i=e>0,r=Lt(e)>Xe;function s(u,h,d,f){aue(f,n,t,d,u,h)}function o(u,h){return lt(u)*lt(h)>e}function a(u){var h,d,f,g,p;return{lineStart:function(){g=f=!1,p=1},point:function(m,v){var y=[m,v],w,R=o(m,v),x=i?R?0:c(m,v):R?c(m+(m<0?wt:-wt),v):0;if(!h&&(g=f=R)&&u.lineStart(),R!==f&&(w=l(h,y),(!w||yS(h,w)||yS(y,w))&&(y[2]=1)),R!==f)p=0,R?(u.lineStart(),w=l(y,h),u.point(w[0],w[1])):(w=l(h,y),u.point(w[0],w[1],2),u.lineEnd()),h=w;else if(r&&h&&i^R){var S;!(x&d)&&(S=l(y,h,!0))&&(p=0,i?(u.lineStart(),u.point(S[0][0],S[0][1]),u.point(S[1][0],S[1][1]),u.lineEnd()):(u.point(S[1][0],S[1][1]),u.lineEnd(),u.lineStart(),u.point(S[0][0],S[0][1],3)))}R&&(!h||!yS(h,y))&&u.point(y[0],y[1]),h=y,f=R,d=x},lineEnd:function(){f&&u.lineEnd(),h=null},clean:function(){return p|(g&&f)<<1}}}function l(u,h,d){var f=Ep(u),g=Ep(h),p=[1,0,0],m=I_(f,g),v=a0(m,m),y=m[0],w=v-y*y;if(!w)return!d&&u;var R=e*v/w,x=-e*y/w,S=I_(p,m),T=l0(p,R),P=l0(m,x);Nx(T,P);var E=S,A=a0(T,E),L=a0(E,E),W=A*A-L*(a0(T,T)-1);if(!(W<0)){var F=kr(W),V=l0(E,(-A-F)/L);if(Nx(V,T),V=TP(V),!d)return V;var H=u[0],N=h[0],j=u[1],k=h[1],K;N<H&&(K=H,H=N,N=K);var ie=N-H,b=Lt(ie-wt)<Xe,C=b||ie<Xe;if(!b&&k<j&&(K=j,j=k,k=K),C?b?j+k>0^V[1]<(Lt(V[0]-H)<Xe?j:k):j<=V[1]&&V[1]<=k:ie>wt^(H<=V[0]&&V[0]<=N)){var _=l0(E,(-A+F)/L);return Nx(_,T),[V,TP(_)]}}}function c(u,h){var d=i?n:wt-n,f=0;return u<-d?f|=1:u>d&&(f|=2),h<-d?f|=4:h>d&&(f|=8),f}return pU(o,a,s,i?[0,-n]:[-wt,n-wt])}function gue(n,e,t,i,r,s){var o=n[0],a=n[1],l=e[0],c=e[1],u=0,h=1,d=l-o,f=c-a,g;if(g=t-o,!(!d&&g>0)){if(g/=d,d<0){if(g<u)return;g<h&&(h=g)}else if(d>0){if(g>h)return;g>u&&(u=g)}if(g=r-o,!(!d&&g<0)){if(g/=d,d<0){if(g>h)return;g>u&&(u=g)}else if(d>0){if(g<u)return;g<h&&(h=g)}if(g=i-a,!(!f&&g>0)){if(g/=f,f<0){if(g<u)return;g<h&&(h=g)}else if(f>0){if(g>h)return;g>u&&(u=g)}if(g=s-a,!(!f&&g<0)){if(g/=f,f<0){if(g>h)return;g>u&&(u=g)}else if(f>0){if(g<u)return;g<h&&(h=g)}return u>0&&(n[0]=o+u*d,n[1]=a+u*f),h<1&&(e[0]=o+h*d,e[1]=a+h*f),!0}}}}}var Wb=1e9,u0=-Wb;function pue(n,e,t,i){function r(c,u){return n<=c&&c<=t&&e<=u&&u<=i}function s(c,u,h,d){var f=0,g=0;if(c==null||(f=o(c,h))!==(g=o(u,h))||l(c,u)<0^h>0)do d.point(f===0||f===3?n:t,f>1?i:e);while((f=(f+h+4)%4)!==g);else d.point(u[0],u[1])}function o(c,u){return Lt(c[0]-n)<Xe?u>0?0:3:Lt(c[0]-t)<Xe?u>0?2:1:Lt(c[1]-e)<Xe?u>0?1:0:u>0?3:2}function a(c,u){return l(c.x,u.x)}function l(c,u){var h=o(c,1),d=o(u,1);return h!==d?h-d:h===0?u[1]-c[1]:h===1?c[0]-u[0]:h===2?c[1]-u[1]:u[0]-c[0]}return function(c){var u=c,h=dU(),d,f,g,p,m,v,y,w,R,x,S,T={point:P,lineStart:W,lineEnd:F,polygonStart:A,polygonEnd:L};function P(H,N){r(H,N)&&u.point(H,N)}function E(){for(var H=0,N=0,j=f.length;N<j;++N)for(var k=f[N],K=1,ie=k.length,b=k[0],C,_,I=b[0],$=b[1];K<ie;++K)C=I,_=$,b=k[K],I=b[0],$=b[1],_<=i?$>i&&(I-C)*(i-_)>($-_)*(n-C)&&++H:$<=i&&(I-C)*(i-_)<($-_)*(n-C)&&--H;return H}function A(){u=h,d=[],f=[],S=!0}function L(){var H=E(),N=S&&H,j=(d=lU(d)).length;(N||j)&&(c.polygonStart(),N&&(c.lineStart(),s(null,null,1,c),c.lineEnd()),j&&fU(d,a,H,s,c),c.polygonEnd()),u=c,d=f=g=null}function W(){T.point=V,f&&f.push(g=[]),x=!0,R=!1,y=w=NaN}function F(){d&&(V(p,m),v&&R&&h.rejoin(),d.push(h.result())),T.point=P,R&&u.lineEnd()}function V(H,N){var j=r(H,N);if(f&&g.push([H,N]),x)p=H,m=N,v=j,x=!1,j&&(u.lineStart(),u.point(H,N));else if(j&&R)u.point(H,N);else{var k=[y=Math.max(u0,Math.min(Wb,y)),w=Math.max(u0,Math.min(Wb,w))],K=[H=Math.max(u0,Math.min(Wb,H)),N=Math.max(u0,Math.min(Wb,N))];gue(k,K,n,e,t,i)?(R||(u.lineStart(),u.point(k[0],k[1])),u.point(K[0],K[1]),j||u.lineEnd(),S=!1):j&&(u.lineStart(),u.point(H,N),S=!1)}y=H,w=N,R=j}return T}}var IP,OP,CS,SS,xp={sphere:Hi,point:Hi,lineStart:mue,lineEnd:Hi,polygonStart:Hi,polygonEnd:Hi};function mue(){xp.point=vue,xp.lineEnd=bue}function bue(){xp.point=xp.lineEnd=Hi}function vue(n,e){n*=sn,e*=sn,OP=n,CS=st(e),SS=lt(e),xp.point=wue}function wue(n,e){n*=sn,e*=sn;var t=st(e),i=lt(e),r=Lt(n-OP),s=lt(r),o=st(r),a=i*o,l=SS*t-CS*i*s,c=CS*t+SS*i*s;IP.add(al(kr(a*a+l*l),c)),OP=n,CS=t,SS=i}function yue(n){return IP=new Uu,Cd(n,xp),+IP}var kP=[null,null],Cue={type:"LineString",coordinates:kP};function DP(n,e){return kP[0]=n,kP[1]=e,yue(Cue)}var oB={Feature:function(n,e){return O_(n.geometry,e)},FeatureCollection:function(n,e){for(var t=n.features,i=-1,r=t.length;++i<r;)if(O_(t[i].geometry,e))return!0;return!1}},aB={Sphere:function(){return!0},Point:function(n,e){return lB(n.coordinates,e)},MultiPoint:function(n,e){for(var t=n.coordinates,i=-1,r=t.length;++i<r;)if(lB(t[i],e))return!0;return!1},LineString:function(n,e){return cB(n.coordinates,e)},MultiLineString:function(n,e){for(var t=n.coordinates,i=-1,r=t.length;++i<r;)if(cB(t[i],e))return!0;return!1},Polygon:function(n,e){return uB(n.coordinates,e)},MultiPolygon:function(n,e){for(var t=n.coordinates,i=-1,r=t.length;++i<r;)if(uB(t[i],e))return!0;return!1},GeometryCollection:function(n,e){for(var t=n.geometries,i=-1,r=t.length;++i<r;)if(O_(t[i],e))return!0;return!1}};function O_(n,e){return n&&aB.hasOwnProperty(n.type)?aB[n.type](n,e):!1}function lB(n,e){return DP(n,e)===0}function cB(n,e){for(var t,i,r,s=0,o=n.length;s<o;s++){if(i=DP(n[s],e),i===0||s>0&&(r=DP(n[s],n[s-1]),r>0&&t<=r&&i<=r&&(t+i-r)*(1-Math.pow((t-i)/r,2))<Nk*r))return!0;t=i}return!1}function uB(n,e){return!!gU(n.map(Sue),mU(e))}function Sue(n){return n=n.map(mU),n.pop(),n}function mU(n){return[n[0]*sn,n[1]*sn]}function _ue(n,e){return(n&&oB.hasOwnProperty(n.type)?oB[n.type]:O_)(n,e)}function hB(n,e,t){var i=Gg(n,e-Xe,t).concat(e);return function(r){return i.map(function(s){return[r,s]})}}function dB(n,e,t){var i=Gg(n,e-Xe,t).concat(e);return function(r){return i.map(function(s){return[s,r]})}}function bU(){var n,e,t,i,r,s,o,a,l=10,c=l,u=90,h=360,d,f,g,p,m=2.5;function v(){return{type:"MultiLineString",coordinates:y()}}function y(){return Gg(o0(i/u)*u,t,u).map(g).concat(Gg(o0(a/h)*h,o,h).map(p)).concat(Gg(o0(e/l)*l,n,l).filter(function(w){return Lt(w%u)>Xe}).map(d)).concat(Gg(o0(s/c)*c,r,c).filter(function(w){return Lt(w%h)>Xe}).map(f))}return v.lines=function(){return y().map(function(w){return{type:"LineString",coordinates:w}})},v.outline=function(){return{type:"Polygon",coordinates:[g(i).concat(p(o).slice(1),g(t).reverse().slice(1),p(a).reverse().slice(1))]}},v.extent=function(w){return arguments.length?v.extentMajor(w).extentMinor(w):v.extentMinor()},v.extentMajor=function(w){return arguments.length?(i=+w[0][0],t=+w[1][0],a=+w[0][1],o=+w[1][1],i>t&&(w=i,i=t,t=w),a>o&&(w=a,a=o,o=w),v.precision(m)):[[i,a],[t,o]]},v.extentMinor=function(w){return arguments.length?(e=+w[0][0],n=+w[1][0],s=+w[0][1],r=+w[1][1],e>n&&(w=e,e=n,n=w),s>r&&(w=s,s=r,r=w),v.precision(m)):[[e,s],[n,r]]},v.step=function(w){return arguments.length?v.stepMajor(w).stepMinor(w):v.stepMinor()},v.stepMajor=function(w){return arguments.length?(u=+w[0],h=+w[1],v):[u,h]},v.stepMinor=function(w){return arguments.length?(l=+w[0],c=+w[1],v):[l,c]},v.precision=function(w){return arguments.length?(m=+w,d=hB(s,r,90),f=dB(e,n,m),g=hB(a,o,90),p=dB(i,t,m),v):m},v.extentMajor([[-180,-90+Xe],[180,90-Xe]]).extentMinor([[-180,-80-Xe],[180,80+Xe]])}function Rue(){return bU()()}const LP=n=>n;var $x=new Uu,NP=new Uu,vU,wU,HP,$P,rc={point:Hi,lineStart:Hi,lineEnd:Hi,polygonStart:function(){rc.lineStart=Eue,rc.lineEnd=Tue},polygonEnd:function(){rc.lineStart=rc.lineEnd=rc.point=Hi,$x.add(Lt(NP)),NP=new Uu},result:function(){var n=$x/2;return $x=new Uu,n}};function Eue(){rc.point=xue}function xue(n,e){rc.point=yU,vU=HP=n,wU=$P=e}function yU(n,e){NP.add($P*n-HP*e),HP=n,$P=e}function Tue(){yU(vU,wU)}var Tp=1/0,k_=Tp,hw=-Tp,D_=hw,L_={point:Mue,lineStart:Hi,lineEnd:Hi,polygonStart:Hi,polygonEnd:Hi,result:function(){var n=[[Tp,k_],[hw,D_]];return hw=D_=-(k_=Tp=1/0),n}};function Mue(n,e){n<Tp&&(Tp=n),n>hw&&(hw=n),e<k_&&(k_=e),e>D_&&(D_=e)}var FP=0,BP=0,jb=0,N_=0,H_=0,Yg=0,VP=0,WP=0,zb=0,CU,SU,Wa,ja,Qs={point:rf,lineStart:fB,lineEnd:gB,polygonStart:function(){Qs.lineStart=Iue,Qs.lineEnd=Oue},polygonEnd:function(){Qs.point=rf,Qs.lineStart=fB,Qs.lineEnd=gB},result:function(){var n=zb?[VP/zb,WP/zb]:Yg?[N_/Yg,H_/Yg]:jb?[FP/jb,BP/jb]:[NaN,NaN];return FP=BP=jb=N_=H_=Yg=VP=WP=zb=0,n}};function rf(n,e){FP+=n,BP+=e,++jb}function fB(){Qs.point=Aue}function Aue(n,e){Qs.point=Pue,rf(Wa=n,ja=e)}function Pue(n,e){var t=n-Wa,i=e-ja,r=kr(t*t+i*i);N_+=r*(Wa+n)/2,H_+=r*(ja+e)/2,Yg+=r,rf(Wa=n,ja=e)}function gB(){Qs.point=rf}function Iue(){Qs.point=kue}function Oue(){_U(CU,SU)}function kue(n,e){Qs.point=_U,rf(CU=Wa=n,SU=ja=e)}function _U(n,e){var t=n-Wa,i=e-ja,r=kr(t*t+i*i);N_+=r*(Wa+n)/2,H_+=r*(ja+e)/2,Yg+=r,r=ja*n-Wa*e,VP+=r*(Wa+n),WP+=r*(ja+e),zb+=r*3,rf(Wa=n,ja=e)}function RU(n){this._context=n}RU.prototype={_radius:4.5,pointRadius:function(n){return this._radius=n,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(n,e){switch(this._point){case 0:{this._context.moveTo(n,e),this._point=1;break}case 1:{this._context.lineTo(n,e);break}default:{this._context.moveTo(n+this._radius,e),this._context.arc(n,e,this._radius,0,xs);break}}},result:Hi};var jP=new Uu,Fx,EU,xU,Ub,Gb,dw={point:Hi,lineStart:function(){dw.point=Due},lineEnd:function(){Fx&&TU(EU,xU),dw.point=Hi},polygonStart:function(){Fx=!0},polygonEnd:function(){Fx=null},result:function(){var n=+jP;return jP=new Uu,n}};function Due(n,e){dw.point=TU,EU=Ub=n,xU=Gb=e}function TU(n,e){Ub-=n,Gb-=e,jP.add(kr(Ub*Ub+Gb*Gb)),Ub=n,Gb=e}let pB,$_,mB,bB;class vB{constructor(e){this._append=e==null?MU:Lue(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,t){switch(this._point){case 0:{this._append`M${e},${t}`,this._point=1;break}case 1:{this._append`L${e},${t}`;break}default:{if(this._append`M${e},${t}`,this._radius!==mB||this._append!==$_){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,mB=i,$_=this._append,bB=this._,this._=r}this._+=bB;break}}}result(){const e=this._;return this._="",e.length?e:null}}function MU(n){let e=1;this._+=n[0];for(const t=n.length;e<t;++e)this._+=arguments[e]+n[e]}function Lue(n){const e=Math.floor(n);if(!(e>=0))throw new RangeError(`invalid digits: ${n}`);if(e>15)return MU;if(e!==pB){const t=10**e;pB=e,$_=function(r){let s=1;this._+=r[0];for(const o=r.length;s<o;++s)this._+=Math.round(arguments[s]*t)/t+r[s]}}return $_}function wB(n,e){let t=3,i=4.5,r,s;function o(a){return a&&(typeof i=="function"&&s.pointRadius(+i.apply(this,arguments)),Cd(a,r(s))),s.result()}return o.area=function(a){return Cd(a,r(rc)),rc.result()},o.measure=function(a){return Cd(a,r(dw)),dw.result()},o.bounds=function(a){return Cd(a,r(L_)),L_.result()},o.centroid=function(a){return Cd(a,r(Qs)),Qs.result()},o.projection=function(a){return arguments.length?(r=a==null?(n=null,LP):(n=a).stream,o):n},o.context=function(a){return arguments.length?(s=a==null?(e=null,new vB(t)):new RU(e=a),typeof i!="function"&&s.pointRadius(i),o):e},o.pointRadius=function(a){return arguments.length?(i=typeof a=="function"?a:(s.pointRadius(+a),+a),o):i},o.digits=function(a){if(!arguments.length)return t;if(a==null)t=null;else{const l=Math.floor(a);if(!(l>=0))throw new RangeError(`invalid digits: ${a}`);t=l}return e===null&&(s=new vB(t)),o},o.projection(n).digits(t).context(e)}function $k(n){return function(e){var t=new zP;for(var i in n)t[i]=n[i];return t.stream=e,t}}function zP(){}zP.prototype={constructor:zP,point:function(n,e){this.stream.point(n,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Fk(n,e,t){var i=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),i!=null&&n.clipExtent(null),Cd(t,n.stream(L_)),e(L_.result()),i!=null&&n.clipExtent(i),n}function Bk(n,e,t){return Fk(n,function(i){var r=e[1][0]-e[0][0],s=e[1][1]-e[0][1],o=Math.min(r/(i[1][0]-i[0][0]),s/(i[1][1]-i[0][1])),a=+e[0][0]+(r-o*(i[1][0]+i[0][0]))/2,l=+e[0][1]+(s-o*(i[1][1]+i[0][1]))/2;n.scale(150*o).translate([a,l])},t)}function AU(n,e,t){return Bk(n,[[0,0],e],t)}function PU(n,e,t){return Fk(n,function(i){var r=+e,s=r/(i[1][0]-i[0][0]),o=(r-s*(i[1][0]+i[0][0]))/2,a=-s*i[0][1];n.scale(150*s).translate([o,a])},t)}function IU(n,e,t){return Fk(n,function(i){var r=+e,s=r/(i[1][1]-i[0][1]),o=-s*i[0][0],a=(r-s*(i[1][1]+i[0][1]))/2;n.scale(150*s).translate([o,a])},t)}var yB=16,Nue=lt(30*sn);function CB(n,e){return+e?$ue(n,e):Hue(n)}function Hue(n){return $k({point:function(e,t){e=n(e,t),this.stream.point(e[0],e[1])}})}function $ue(n,e){function t(i,r,s,o,a,l,c,u,h,d,f,g,p,m){var v=c-i,y=u-r,w=v*v+y*y;if(w>4*e&&p--){var R=o+d,x=a+f,S=l+g,T=kr(R*R+x*x+S*S),P=ao(S/=T),E=Lt(Lt(S)-1)<Xe||Lt(s-h)<Xe?(s+h)/2:al(x,R),A=n(E,P),L=A[0],W=A[1],F=L-i,V=W-r,H=y*F-v*V;(H*H/w>e||Lt((v*F+y*V)/w-.5)>.3||o*d+a*f+l*g<Nue)&&(t(i,r,s,o,a,l,L,W,E,R/=T,x/=T,S,p,m),m.point(L,W),t(L,W,E,R,x,S,c,u,h,d,f,g,p,m))}}return function(i){var r,s,o,a,l,c,u,h,d,f,g,p,m={point:v,lineStart:y,lineEnd:R,polygonStart:function(){i.polygonStart(),m.lineStart=x},polygonEnd:function(){i.polygonEnd(),m.lineStart=y}};function v(P,E){P=n(P,E),i.point(P[0],P[1])}function y(){h=NaN,m.point=w,i.lineStart()}function w(P,E){var A=Ep([P,E]),L=n(P,E);t(h,d,u,f,g,p,h=L[0],d=L[1],u=P,f=A[0],g=A[1],p=A[2],yB,i),i.point(h,d)}function R(){m.point=v,i.lineEnd()}function x(){y(),m.point=S,m.lineEnd=T}function S(P,E){w(r=P,E),s=h,o=d,a=f,l=g,c=p,m.point=w}function T(){t(h,d,u,f,g,p,s,o,r,a,l,c,yB,i),m.lineEnd=R,R()}return m}}var Fue=$k({point:function(n,e){this.stream.point(n*sn,e*sn)}});function Bue(n){return $k({point:function(e,t){var i=n(e,t);return this.stream.point(i[0],i[1])}})}function Vue(n,e,t,i,r){function s(o,a){return o*=i,a*=r,[e+n*o,t-n*a]}return s.invert=function(o,a){return[(o-e)/n*i,(t-a)/n*r]},s}function SB(n,e,t,i,r,s){if(!s)return Vue(n,e,t,i,r);var o=lt(s),a=st(s),l=o*n,c=a*n,u=o/n,h=a/n,d=(a*t-o*e)/n,f=(a*e+o*t)/n;function g(p,m){return p*=i,m*=r,[l*p-c*m+e,t-c*p-l*m]}return g.invert=function(p,m){return[i*(u*p-h*m+d),r*(f-h*p-u*m)]},g}function Hc(n){return OU(function(){return n})()}function OU(n){var e,t=150,i=480,r=250,s=0,o=0,a=0,l=0,c=0,u,h=0,d=1,f=1,g=null,p=sB,m=null,v,y,w,R=LP,x=.5,S,T,P,E,A;function L(H){return P(H[0]*sn,H[1]*sn)}function W(H){return H=P.invert(H[0],H[1]),H&&[H[0]*Er,H[1]*Er]}L.stream=function(H){return E&&A===H?E:E=Fue(Bue(u)(p(S(R(A=H)))))},L.preclip=function(H){return arguments.length?(p=H,g=void 0,V()):p},L.postclip=function(H){return arguments.length?(R=H,m=v=y=w=null,V()):R},L.clipAngle=function(H){return arguments.length?(p=+H?fue(g=H*sn):(g=null,sB),V()):g*Er},L.clipExtent=function(H){return arguments.length?(R=H==null?(m=v=y=w=null,LP):pue(m=+H[0][0],v=+H[0][1],y=+H[1][0],w=+H[1][1]),V()):m==null?null:[[m,v],[y,w]]},L.scale=function(H){return arguments.length?(t=+H,F()):t},L.translate=function(H){return arguments.length?(i=+H[0],r=+H[1],F()):[i,r]},L.center=function(H){return arguments.length?(s=H[0]%360*sn,o=H[1]%360*sn,F()):[s*Er,o*Er]},L.rotate=function(H){return arguments.length?(a=H[0]%360*sn,l=H[1]%360*sn,c=H.length>2?H[2]%360*sn:0,F()):[a*Er,l*Er,c*Er]},L.angle=function(H){return arguments.length?(h=H%360*sn,F()):h*Er},L.reflectX=function(H){return arguments.length?(d=H?-1:1,F()):d<0},L.reflectY=function(H){return arguments.length?(f=H?-1:1,F()):f<0},L.precision=function(H){return arguments.length?(S=CB(T,x=H*H),V()):kr(x)},L.fitExtent=function(H,N){return Bk(L,H,N)},L.fitSize=function(H,N){return AU(L,H,N)},L.fitWidth=function(H,N){return PU(L,H,N)},L.fitHeight=function(H,N){return IU(L,H,N)};function F(){var H=SB(t,0,0,d,f,h).apply(null,e(s,o)),N=SB(t,i-H[0],r-H[1],d,f,h);return u=hU(a,l,c),T=AP(e,N),P=AP(u,T),S=CB(T,x),V()}function V(){return E=A=null,L}return function(){return e=n.apply(this,arguments),L.invert=e.invert&&W,F()}}function Vk(n){var e=0,t=wt/3,i=OU(n),r=i(e,t);return r.parallels=function(s){return arguments.length?i(e=s[0]*sn,t=s[1]*sn):[e*Er,t*Er]},r}function Wue(n){var e=lt(n);function t(i,r){return[i*e,st(r)/e]}return t.invert=function(i,r){return[i/e,ao(r*e)]},t}function jue(n,e){var t=st(n),i=(t+st(e))/2;if(Lt(i)<Xe)return Wue(n);var r=1+t*(2*i-t),s=kr(r)/i;function o(a,l){var c=kr(r-2*i*st(l))/i;return[c*st(a*=i),s-c*lt(a)]}return o.invert=function(a,l){var c=s-l,u=al(a,Lt(c))*to(c);return c*i<0&&(u-=wt*to(a)*to(c)),[u/i,ao((r-(a*a+c*c)*i*i)/(2*i))]},o}function F_(){return Vk(jue).scale(155.424).center([0,33.6442])}function kU(){return F_().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function zue(n){var e=n.length;return{point:function(t,i){for(var r=-1;++r<e;)n[r].point(t,i)},sphere:function(){for(var t=-1;++t<e;)n[t].sphere()},lineStart:function(){for(var t=-1;++t<e;)n[t].lineStart()},lineEnd:function(){for(var t=-1;++t<e;)n[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<e;)n[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<e;)n[t].polygonEnd()}}}function Uue(){var n,e,t=kU(),i,r=F_().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=F_().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,l,c={point:function(d,f){l=[d,f]}};function u(d){var f=d[0],g=d[1];return l=null,i.point(f,g),l||(s.point(f,g),l)||(a.point(f,g),l)}u.invert=function(d){var f=t.scale(),g=t.translate(),p=(d[0]-g[0])/f,m=(d[1]-g[1])/f;return(m>=.12&&m<.234&&p>=-.425&&p<-.214?r:m>=.166&&m<.234&&p>=-.214&&p<-.115?o:t).invert(d)},u.stream=function(d){return n&&e===d?n:n=zue([t.stream(e=d),r.stream(d),o.stream(d)])},u.precision=function(d){return arguments.length?(t.precision(d),r.precision(d),o.precision(d),h()):t.precision()},u.scale=function(d){return arguments.length?(t.scale(d),r.scale(d*.35),o.scale(d),u.translate(t.translate())):t.scale()},u.translate=function(d){if(!arguments.length)return t.translate();var f=t.scale(),g=+d[0],p=+d[1];return i=t.translate(d).clipExtent([[g-.455*f,p-.238*f],[g+.455*f,p+.238*f]]).stream(c),s=r.translate([g-.307*f,p+.201*f]).clipExtent([[g-.425*f+Xe,p+.12*f+Xe],[g-.214*f-Xe,p+.234*f-Xe]]).stream(c),a=o.translate([g-.205*f,p+.212*f]).clipExtent([[g-.214*f+Xe,p+.166*f+Xe],[g-.115*f-Xe,p+.234*f-Xe]]).stream(c),h()},u.fitExtent=function(d,f){return Bk(u,d,f)},u.fitSize=function(d,f){return AU(u,d,f)},u.fitWidth=function(d,f){return PU(u,d,f)},u.fitHeight=function(d,f){return IU(u,d,f)};function h(){return n=e=null,u}return u.scale(1070)}function DU(n){return function(e,t){var i=lt(e),r=lt(t),s=n(i*r);return s===1/0?[2,0]:[s*r*st(e),s*st(t)]}}function ey(n){return function(e,t){var i=kr(e*e+t*t),r=n(i),s=st(r),o=lt(r);return[al(e*s,i*o),ao(i&&t*s/i)]}}var LU=DU(function(n){return kr(2/(1+n))});LU.invert=ey(function(n){return 2*ao(n/2)});function Gue(){return Hc(LU).scale(124.75).clipAngle(180-.001)}var NU=DU(function(n){return(n=uU(n))&&n/st(n)});NU.invert=ey(function(n){return n});function Yue(){return Hc(NU).scale(79.4188).clipAngle(180-.001)}function _1(n,e){return[n,A_(Hk((Jn+e)/2))]}_1.invert=function(n,e){return[n,2*qp(cU(e))-Jn]};function Kue(){return HU(_1).scale(961/xs)}function HU(n){var e=Hc(n),t=e.center,i=e.scale,r=e.translate,s=e.clipExtent,o=null,a,l,c;e.scale=function(h){return arguments.length?(i(h),u()):i()},e.translate=function(h){return arguments.length?(r(h),u()):r()},e.center=function(h){return arguments.length?(t(h),u()):t()},e.clipExtent=function(h){return arguments.length?(h==null?o=a=l=c=null:(o=+h[0][0],a=+h[0][1],l=+h[1][0],c=+h[1][1]),u()):o==null?null:[[o,a],[l,c]]};function u(){var h=wt*i(),d=e(oue(e.rotate()).invert([0,0]));return s(o==null?[[d[0]-h,d[1]-h],[d[0]+h,d[1]+h]]:n===_1?[[Math.max(d[0]-h,o),a],[Math.min(d[0]+h,l),c]]:[[o,Math.max(d[1]-h,a)],[l,Math.min(d[1]+h,c)]])}return u()}function h0(n){return Hk((Jn+n)/2)}function que(n,e){var t=lt(n),i=n===e?st(n):A_(t/lt(e))/A_(h0(e)/h0(n)),r=t*Lx(h0(n),i)/i;if(!i)return _1;function s(o,a){r>0?a<-Jn+Xe&&(a=-Jn+Xe):a>Jn-Xe&&(a=Jn-Xe);var l=r/Lx(h0(a),i);return[l*st(i*o),r-l*lt(i*o)]}return s.invert=function(o,a){var l=r-a,c=to(i)*kr(o*o+l*l),u=al(o,Lt(l))*to(l);return l*i<0&&(u-=wt*to(o)*to(l)),[u/i,2*qp(Lx(r/c,1/i))-Jn]},s}function Xue(){return Vk(que).scale(109.5).parallels([30,30])}function B_(n,e){return[n,e]}B_.invert=B_;function Zue(){return Hc(B_).scale(152.63)}function Que(n,e){var t=lt(n),i=n===e?st(n):(t-lt(e))/(e-n),r=t/i+n;if(Lt(i)<Xe)return B_;function s(o,a){var l=r-a,c=i*o;return[l*st(c),r-l*lt(c)]}return s.invert=function(o,a){var l=r-a,c=al(o,Lt(l))*to(l);return l*i<0&&(c-=wt*to(o)*to(l)),[c/i,r-to(i)*kr(o*o+l*l)]},s}function Jue(){return Vk(Que).scale(131.154).center([0,13.9389])}var yv=1.340264,Cv=-.081106,Sv=893e-6,_v=.003796,V_=kr(3)/2,ehe=12;function $U(n,e){var t=ao(V_*st(e)),i=t*t,r=i*i*i;return[n*lt(t)/(V_*(yv+3*Cv*i+r*(7*Sv+9*_v*i))),t*(yv+Cv*i+r*(Sv+_v*i))]}$U.invert=function(n,e){for(var t=e,i=t*t,r=i*i*i,s=0,o,a,l;s<ehe&&(a=t*(yv+Cv*i+r*(Sv+_v*i))-e,l=yv+3*Cv*i+r*(7*Sv+9*_v*i),t-=o=a/l,i=t*t,r=i*i*i,!(Lt(o)<Nk));++s);return[V_*n*(yv+3*Cv*i+r*(7*Sv+9*_v*i))/lt(t),ao(st(t)/V_)]};function the(){return Hc($U).scale(177.158)}function FU(n,e){var t=lt(e),i=lt(n)*t;return[t*st(n)/i,st(e)/i]}FU.invert=ey(qp);function nhe(){return Hc(FU).scale(144.049).clipAngle(60)}function BU(n,e){var t=e*e,i=t*t;return[n*(.8707-.131979*t+i*(-.013791+i*(.003971*t-.001529*i))),e*(1.007226+t*(.015085+i*(-.044475+.028874*t-.005916*i)))]}BU.invert=function(n,e){var t=e,i=25,r;do{var s=t*t,o=s*s;t-=r=(t*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-e)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(Lt(r)>Xe&&--i>0);return[n/(.8707+(s=t*t)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),t]};function ihe(){return Hc(BU).scale(175.295)}function VU(n,e){return[lt(e)*st(n),st(e)]}VU.invert=ey(ao);function UP(){return Hc(VU).scale(249.5).clipAngle(90+Xe)}function WU(n,e){var t=lt(e),i=1+lt(n)*t;return[t*st(n)/i,st(e)/i]}WU.invert=ey(function(n){return 2*qp(n)});function rhe(){return Hc(WU).scale(250).clipAngle(142)}function jU(n,e){return[A_(Hk((Jn+e)/2)),-n]}jU.invert=function(n,e){return[-e,2*qp(cU(n))-Jn]};function she(){var n=HU(jU),e=n.center,t=n.rotate;return n.center=function(i){return arguments.length?e([-i[1],i[0]]):(i=e(),[i[1],-i[0]])},n.rotate=function(i){return arguments.length?t([i[0],i[1],i.length>2?i[2]+90:90]):(i=t(),[i[0],i[1],i[2]-90])},t([0,0,90]).scale(159.155)}function zt(n){for(var e=n.length/6|0,t=new Array(e),i=0;i<e;)t[i]="#"+n.slice(i*6,++i*6);return t}function R1(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function Wk(n,e){var t=Object.create(n.prototype);for(var i in e)t[i]=e[i];return t}function Xp(){}var sf=.7,Mp=1/sf,op="\\s*([+-]?\\d+)\\s*",fw="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",el="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ohe=/^#([0-9a-f]{3,8})$/,ahe=new RegExp(`^rgb\\(${op},${op},${op}\\)$`),lhe=new RegExp(`^rgb\\(${el},${el},${el}\\)$`),che=new RegExp(`^rgba\\(${op},${op},${op},${fw}\\)$`),uhe=new RegExp(`^rgba\\(${el},${el},${el},${fw}\\)$`),hhe=new RegExp(`^hsl\\(${fw},${el},${el}\\)$`),dhe=new RegExp(`^hsla\\(${fw},${el},${el},${fw}\\)$`),_B={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};R1(Xp,jk,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:RB,formatHex:RB,formatHex8:fhe,formatHsl:ghe,formatRgb:EB,toString:EB});function RB(){return this.rgb().formatHex()}function fhe(){return this.rgb().formatHex8()}function ghe(){return UU(this).formatHsl()}function EB(){return this.rgb().formatRgb()}function jk(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=ohe.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?xB(e):t===3?new cr(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?d0(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?d0(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=ahe.exec(n))?new cr(e[1],e[2],e[3],1):(e=lhe.exec(n))?new cr(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=che.exec(n))?d0(e[1],e[2],e[3],e[4]):(e=uhe.exec(n))?d0(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=hhe.exec(n))?AB(e[1],e[2]/100,e[3]/100,1):(e=dhe.exec(n))?AB(e[1],e[2]/100,e[3]/100,e[4]):_B.hasOwnProperty(n)?xB(_B[n]):n==="transparent"?new cr(NaN,NaN,NaN,0):null}function xB(n){return new cr(n>>16&255,n>>8&255,n&255,1)}function d0(n,e,t,i){return i<=0&&(n=e=t=NaN),new cr(n,e,t,i)}function zU(n){return n instanceof Xp||(n=jk(n)),n?(n=n.rgb(),new cr(n.r,n.g,n.b,n.opacity)):new cr}function gw(n,e,t,i){return arguments.length===1?zU(n):new cr(n,e,t,i??1)}function cr(n,e,t,i){this.r=+n,this.g=+e,this.b=+t,this.opacity=+i}R1(cr,gw,Wk(Xp,{brighter(n){return n=n==null?Mp:Math.pow(Mp,n),new cr(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?sf:Math.pow(sf,n),new cr(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new cr(Vd(this.r),Vd(this.g),Vd(this.b),W_(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:TB,formatHex:TB,formatHex8:phe,formatRgb:MB,toString:MB}));function TB(){return`#${Rd(this.r)}${Rd(this.g)}${Rd(this.b)}`}function phe(){return`#${Rd(this.r)}${Rd(this.g)}${Rd(this.b)}${Rd((isNaN(this.opacity)?1:this.opacity)*255)}`}function MB(){const n=W_(this.opacity);return`${n===1?"rgb(":"rgba("}${Vd(this.r)}, ${Vd(this.g)}, ${Vd(this.b)}${n===1?")":`, ${n})`}`}function W_(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function Vd(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function Rd(n){return n=Vd(n),(n<16?"0":"")+n.toString(16)}function AB(n,e,t,i){return i<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new Go(n,e,t,i)}function UU(n){if(n instanceof Go)return new Go(n.h,n.s,n.l,n.opacity);if(n instanceof Xp||(n=jk(n)),!n)return new Go;if(n instanceof Go)return n;n=n.rgb();var e=n.r/255,t=n.g/255,i=n.b/255,r=Math.min(e,t,i),s=Math.max(e,t,i),o=NaN,a=s-r,l=(s+r)/2;return a?(e===s?o=(t-i)/a+(t<i)*6:t===s?o=(i-e)/a+2:o=(e-t)/a+4,a/=l<.5?s+r:2-s-r,o*=60):a=l>0&&l<1?0:o,new Go(o,a,l,n.opacity)}function mhe(n,e,t,i){return arguments.length===1?UU(n):new Go(n,e,t,i??1)}function Go(n,e,t,i){this.h=+n,this.s=+e,this.l=+t,this.opacity=+i}R1(Go,mhe,Wk(Xp,{brighter(n){return n=n==null?Mp:Math.pow(Mp,n),new Go(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?sf:Math.pow(sf,n),new Go(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,i=t+(t<.5?t:1-t)*e,r=2*t-i;return new cr(Bx(n>=240?n-240:n+120,r,i),Bx(n,r,i),Bx(n<120?n+240:n-120,r,i),this.opacity)},clamp(){return new Go(PB(this.h),f0(this.s),f0(this.l),W_(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=W_(this.opacity);return`${n===1?"hsl(":"hsla("}${PB(this.h)}, ${f0(this.s)*100}%, ${f0(this.l)*100}%${n===1?")":`, ${n})`}`}}));function PB(n){return n=(n||0)%360,n<0?n+360:n}function f0(n){return Math.max(0,Math.min(1,n||0))}function Bx(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}const bhe=Math.PI/180,vhe=180/Math.PI;var GU=-.14861,zk=1.78277,Uk=-.29227,E1=-.90649,pw=1.97294,IB=pw*E1,OB=pw*zk,kB=zk*Uk-E1*GU;function whe(n){if(n instanceof Wd)return new Wd(n.h,n.s,n.l,n.opacity);n instanceof cr||(n=zU(n));var e=n.r/255,t=n.g/255,i=n.b/255,r=(kB*i+IB*e-OB*t)/(kB+IB-OB),s=i-r,o=(pw*(t-r)-Uk*s)/E1,a=Math.sqrt(o*o+s*s)/(pw*r*(1-r)),l=a?Math.atan2(o,s)*vhe-120:NaN;return new Wd(l<0?l+360:l,a,r,n.opacity)}function ll(n,e,t,i){return arguments.length===1?whe(n):new Wd(n,e,t,i??1)}function Wd(n,e,t,i){this.h=+n,this.s=+e,this.l=+t,this.opacity=+i}R1(Wd,ll,Wk(Xp,{brighter(n){return n=n==null?Mp:Math.pow(Mp,n),new Wd(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?sf:Math.pow(sf,n),new Wd(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=isNaN(this.h)?0:(this.h+120)*bhe,e=+this.l,t=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(n),r=Math.sin(n);return new cr(255*(e+t*(GU*i+zk*r)),255*(e+t*(Uk*i+E1*r)),255*(e+t*(pw*i)),this.opacity)}}));function yhe(n,e,t,i,r){var s=n*n,o=s*n;return((1-3*n+3*s-o)*e+(4-6*s+3*o)*t+(1+3*n+3*s-3*o)*i+o*r)/6}function Che(n){var e=n.length-1;return function(t){var i=t<=0?t=0:t>=1?(t=1,e-1):Math.floor(t*e),r=n[i],s=n[i+1],o=i>0?n[i-1]:2*r-s,a=i<e-1?n[i+2]:2*s-r;return yhe((t-i/e)*e,o,r,s,a)}}const Gk=n=>()=>n;function YU(n,e){return function(t){return n+t*e}}function She(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(i){return Math.pow(n+i*e,t)}}function _he(n,e){var t=e-n;return t?YU(n,t>180||t<-180?t-360*Math.round(t/360):t):Gk(isNaN(n)?e:n)}function Rhe(n){return(n=+n)==1?ap:function(e,t){return t-e?She(e,t,n):Gk(isNaN(e)?t:e)}}function ap(n,e){var t=e-n;return t?YU(n,t):Gk(isNaN(n)?e:n)}(function n(e){var t=Rhe(e);function i(r,s){var o=t((r=gw(r)).r,(s=gw(s)).r),a=t(r.g,s.g),l=t(r.b,s.b),c=ap(r.opacity,s.opacity);return function(u){return r.r=o(u),r.g=a(u),r.b=l(u),r.opacity=c(u),r+""}}return i.gamma=n,i})(1);function Ehe(n){return function(e){var t=e.length,i=new Array(t),r=new Array(t),s=new Array(t),o,a;for(o=0;o<t;++o)a=gw(e[o]),i[o]=a.r||0,r[o]=a.g||0,s[o]=a.b||0;return i=n(i),r=n(r),s=n(s),a.opacity=1,function(l){return a.r=i(l),a.g=r(l),a.b=s(l),a+""}}}var xhe=Ehe(Che);function KU(n){return function e(t){t=+t;function i(r,s){var o=n((r=ll(r)).h,(s=ll(s)).h),a=ap(r.s,s.s),l=ap(r.l,s.l),c=ap(r.opacity,s.opacity);return function(u){return r.h=o(u),r.s=a(u),r.l=l(Math.pow(u,t)),r.opacity=c(u),r+""}}return i.gamma=e,i}(1)}KU(_he);var Yk=KU(ap);const mn=n=>xhe(n[n.length-1]);var The=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(zt);const Mhe=mn(The);var Ahe=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(zt);const Phe=mn(Ahe);var Ihe=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(zt);const Ohe=mn(Ihe);var khe=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(zt);const Dhe=mn(khe);var Lhe=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(zt);const Nhe=mn(Lhe);var Hhe=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(zt);const $he=mn(Hhe);var Fhe=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(zt);const Bhe=mn(Fhe);var Vhe=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(zt);const Whe=mn(Vhe);var jhe=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(zt);const zhe=mn(jhe);var Uhe=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(zt);const Ghe=mn(Uhe);var Yhe=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(zt);const Khe=mn(Yhe);var qhe=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(zt);const Xhe=mn(qhe);var Zhe=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(zt);const Qhe=mn(Zhe);var Jhe=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(zt);const ede=mn(Jhe);var tde=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(zt);const nde=mn(tde);var ide=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(zt);const rde=mn(ide);var sde=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(zt);const ode=mn(sde);var ade=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(zt);const lde=mn(ade);var cde=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(zt);const ude=mn(cde);var hde=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(zt);const dde=mn(hde);var fde=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(zt);const gde=mn(fde);var pde=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(zt);const mde=mn(pde);var bde=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(zt);const vde=mn(bde);var wde=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(zt);const yde=mn(wde);var Cde=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(zt);const Sde=mn(Cde);var _de=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(zt);const Rde=mn(_de);var Ede=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(zt);const xde=mn(Ede);function Tde(n){return n=Math.max(0,Math.min(1,n)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-n*(35.34-n*(2381.73-n*(6402.7-n*(7024.72-n*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+n*(170.73+n*(52.82-n*(131.46-n*(176.58-n*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+n*(442.36-n*(2482.43-n*(6167.24-n*(6614.94-n*2475.67)))))))+")"}const Mde=Yk(ll(300,.5,0),ll(-240,.5,1));var Ade=Yk(ll(-100,.75,.35),ll(80,1.5,.8)),Pde=Yk(ll(260,.75,.35),ll(80,1.5,.8)),g0=ll();function Ide(n){(n<0||n>1)&&(n-=Math.floor(n));var e=Math.abs(n-.5);return g0.h=360*n-100,g0.s=1.5-1.5*e,g0.l=.8-.9*e,g0+""}var p0=gw(),Ode=Math.PI/3,kde=Math.PI*2/3;function Dde(n){var e;return n=(.5-n)*Math.PI,p0.r=255*(e=Math.sin(n))*e,p0.g=255*(e=Math.sin(n+Ode))*e,p0.b=255*(e=Math.sin(n+kde))*e,p0+""}function Lde(n){return n=Math.max(0,Math.min(1,n)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+n*(1172.33-n*(10793.56-n*(33300.12-n*(38394.49-n*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+n*(557.33+n*(1225.33-n*(3574.96-n*(1073.77+n*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+n*(3211.1-n*(15327.97-n*(27814-n*(22569.18-n*6838.66)))))))+")"}function x1(n){var e=n.length;return function(t){return n[Math.max(0,Math.min(e-1,Math.floor(t*e)))]}}const Nde=x1(zt("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var Hde=x1(zt("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),$de=x1(zt("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Fde=x1(zt("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function Bde(n){return n}function Vde(n){if(n==null)return Bde;var e,t,i=n.scale[0],r=n.scale[1],s=n.translate[0],o=n.translate[1];return function(a,l){l||(e=t=0);var c=2,u=a.length,h=new Array(u);for(h[0]=(e+=a[0])*i+s,h[1]=(t+=a[1])*r+o;c<u;)h[c]=a[c],++c;return h}}function Wde(n,e){for(var t,i=n.length,r=i-e;r<--i;)t=n[r],n[r++]=n[i],n[i]=t}function jde(n,e){return typeof e=="string"&&(e=n.objects[e]),e.type==="GeometryCollection"?{type:"FeatureCollection",features:e.geometries.map(function(t){return DB(n,t)})}:DB(n,e)}function DB(n,e){var t=e.id,i=e.bbox,r=e.properties==null?{}:e.properties,s=zde(n,e);return t==null&&i==null?{type:"Feature",properties:r,geometry:s}:i==null?{type:"Feature",id:t,properties:r,geometry:s}:{type:"Feature",id:t,bbox:i,properties:r,geometry:s}}function zde(n,e){var t=Vde(n.transform),i=n.arcs;function r(u,h){h.length&&h.pop();for(var d=i[u<0?~u:u],f=0,g=d.length;f<g;++f)h.push(t(d[f],f));u<0&&Wde(h,g)}function s(u){return t(u)}function o(u){for(var h=[],d=0,f=u.length;d<f;++d)r(u[d],h);return h.length<2&&h.push(h[0]),h}function a(u){for(var h=o(u);h.length<4;)h.push(h[0]);return h}function l(u){return u.map(a)}function c(u){var h=u.type,d;switch(h){case"GeometryCollection":return{type:h,geometries:u.geometries.map(c)};case"Point":d=s(u.coordinates);break;case"MultiPoint":d=u.coordinates.map(s);break;case"LineString":d=o(u.arcs);break;case"MultiLineString":d=u.arcs.map(o);break;case"Polygon":d=l(u.arcs);break;case"MultiPolygon":d=u.arcs.map(l);break;default:return null}return{type:h,coordinates:d}}return c(e)}const Rv={geoAzimuthalEqualArea:Gue,geoAzimuthalEquidistant:Yue,geoGnomonic:nhe,geoOrthographic:UP,geoStereographic:rhe,geoEqualEarth:the,geoAlbers:kU,geoAlbersUsa:Uue,geoConicConformal:Xue,geoConicEqualArea:F_,geoConicEquidistant:Jue,geoEquirectangular:Zue,geoMercator:Kue,geoTransverseMercator:she,geoNaturalEarth1:ihe};Object.keys(Rv).forEach(n=>{Rv[`${n.charAt(3).toLowerCase()}${n.slice(4)}`]=Rv[n]});class Sf extends sh{constructor(e){super(e),this.outlineBounds=null,this.oldChartBounds=null,this.geoPath=wB()}init(e){e.position="chartArea",super.init(e),typeof e.projection=="function"?this.projection=e.projection:this.projection=(Rv[e.projection]||Rv.albersUsa)(),this.geoPath.projection(this.projection),this.outlineBounds=null,this.oldChartBounds=null}computeBounds(e){const t=wB(this.projection.fitWidth(1e3,e)).bounds(e),i=Math.ceil(t[1][1]-t[0][1]),r=Math.ceil(t[1][0]-t[0][0]),s=this.projection.translate();this.outlineBounds={width:r,height:i,aspectRatio:r/i,refScale:this.projection.scale(),refX:s[0],refY:s[1]}}updateBounds(){const e=this.chart.chartArea,t=this.outlineBounds;if(!t)return!1;const i=this.options.padding,r=typeof i=="number"?i:i.top,s=typeof i=="number"?i:i.left,o=typeof i=="number"?i:i.bottom,a=typeof i=="number"?i:i.right,l=e.right-e.left-s-a,c=e.bottom-e.top-r-o,u=this.oldChartBounds;this.oldChartBounds={chartWidth:l,chartHeight:c};const h=Math.min(l/t.width,c/t.height),d=t.width*h,f=t.height*h,g=(l-d)*.5+e.left+s,p=(c-f)*.5+e.top+r,m=this.options;return this.projection.scale(t.refScale*h*m.projectionScale).translate([h*t.refX+g+m.projectionOffset[0],h*t.refY+p+m.projectionOffset[1]]),!u||u.chartWidth!==this.oldChartBounds.chartWidth||u.chartHeight!==this.oldChartBounds.chartHeight}}Sf.id="projection";Sf.defaults={projection:"albersUsa",projectionScale:1,projectionOffset:[0,0],padding:0};Sf.descriptors={_scriptable:n=>n!=="projection",_indexable:n=>n!=="projectionOffset"};const T1={position:"chartArea",property:"value",grid:{z:1,drawOnChartArea:!1},ticks:{z:1},legend:{align:"right",position:"bottom-right",length:100,width:50,margin:8,indicatorWidth:10}};function Ude(n){const{indicatorWidth:e,align:t,margin:i}=n,r=(typeof i=="number"?i:i.left)+(t==="right"?e:0),s=(typeof i=="number"?i:i.top)+(t==="bottom"?e:0),o=(typeof i=="number"?i:i.right)+(t==="left"?e:0),a=(typeof i=="number"?i:i.bottom)+(t==="top"?e:0);return{left:r,top:s,right:o,bottom:a}}function Gde(n,e,t,i,r){const{indicatorWidth:s,align:o,position:a}=e,l=o==="top"||o==="bottom",c=(o==="left"?r.w:t)+(l?s:0),u=(o==="top"?r.h:i)+(l?0:s),h=Ude(e);if(typeof a=="string")switch(a){case"top-left":return[h.left,h.top];case"top":return[(n.right-c)/2,h.top];case"left":return[h.left,(n.bottom-u)/2];case"top-right":return[n.right-c-h.right,h.top];case"bottom-right":return[n.right-c-h.right,n.bottom-u-h.bottom];case"bottom":return[(n.right-c)/2,n.bottom-u-h.bottom];case"bottom-left":return[h.left,n.bottom-u-h.bottom];default:return[n.right-c-h.right,(n.bottom-u)/2]}return[a.x,a.y]}class Kg extends Yp{constructor(){super(...arguments),this.legendSize={w:0,h:0}}init(e){e.position="chartArea",super.init(e),this.axis="r"}parse(e,t){return e&&typeof e[this.options.property]=="number"?e[this.options.property]:super.parse(e,t)}isHorizontal(){return this.options.legend.align==="top"||this.options.legend.align==="bottom"}_getNormalizedValue(e){return e==null||Number.isNaN(e)?null:(e-this._startValue)/this._valueRange}update(e,t,i){const r=Math.min(t,this.bottom==null?Number.POSITIVE_INFINITY:this.bottom),s=Math.min(e,this.right==null?Number.POSITIVE_INFINITY:this.right),o=this.options.legend,a=this.isHorizontal(),l=(f,g)=>f<1?g*f:f,c=Math.min(s,l(a?o.length:o.width,s))-(a?0:o.indicatorWidth),u=Math.min(r,l(a?o.width:o.length,r))-(a?o.indicatorWidth:0);this.legendSize={w:c,h:u},this.bottom=u,this.height=u,this.right=c,this.width=c;const h=this.options.position;this.options.position=this.options.legend.align;const d=super.update(c,u,i);return this.options.position=h,this.height=Math.min(u,this.height),this.width=Math.min(c,this.width),d}_computeLabelArea(){}draw(e){if(!this._isVisible())return;const t=Gde(e,this.options.legend,this.width,this.height,this.legendSize),{ctx:i}=this;i.save(),i.translate(t[0],t[1]);const r=this.options.position;this.options.position=this.options.legend.align,super.draw({...e,bottom:this.height+10,right:this.width}),this.options.position=r;const{indicatorWidth:s}=this.options.legend;switch(this.options.legend.align){case"left":i.translate(this.legendSize.w,0);break;case"top":i.translate(0,this.legendSize.h);break;case"bottom":i.translate(0,-s);break;default:i.translate(-s,0);break}this._drawIndicator(),i.restore()}_drawIndicator(){}}class qU extends Kp{constructor(){super(...arguments),this.legendSize={w:0,h:0}}init(e){Kg.prototype.init.call(this,e)}parse(e,t){return Kg.prototype.parse.call(this,e,t)}isHorizontal(){return this.options.legend.align==="top"||this.options.legend.align==="bottom"}_getNormalizedValue(e){return e==null||Number.isNaN(e)?null:(Math.log10(e)-this._startValue)/this._valueRange}update(e,t,i){return Kg.prototype.update.call(this,e,t,i)}_computeLabelArea(){}draw(e){return Kg.prototype.draw.call(this,e)}_drawIndicator(){}}const sc={interpolateBlues:mde,interpolateBrBG:Mhe,interpolateBuGn:Ghe,interpolateBuPu:Khe,interpolateCividis:Tde,interpolateCool:Pde,interpolateCubehelixDefault:Mde,interpolateGnBu:Xhe,interpolateGreens:vde,interpolateGreys:yde,interpolateInferno:$de,interpolateMagma:Hde,interpolateOrRd:Qhe,interpolateOranges:xde,interpolatePRGn:Phe,interpolatePiYG:Ohe,interpolatePlasma:Fde,interpolatePuBu:nde,interpolatePuBuGn:ede,interpolatePuOr:Dhe,interpolatePuRd:rde,interpolatePurples:Sde,interpolateRainbow:Ide,interpolateRdBu:Nhe,interpolateRdGy:$he,interpolateRdPu:ode,interpolateRdYlBu:Bhe,interpolateRdYlGn:Whe,interpolateReds:Rde,interpolateSinebow:Dde,interpolateSpectral:zhe,interpolateTurbo:Lde,interpolateViridis:Nde,interpolateWarm:Ade,interpolateYlGn:ude,interpolateYlGnBu:lde,interpolateYlOrBr:dde,interpolateYlOrRd:gde};Object.keys(sc).forEach(n=>{sc[`${n.charAt(11).toLowerCase()}${n.slice(12)}`]=sc[n],sc[n.slice(11)]=sc[n]});function XU(n,e){const t=1/e;if(n<=t)return 0;if(n>=1-t)return 1;for(let i=0;i<1;i+=t)if(n<i)return i-t/2;return n}const ZU={interpolate:"blues",missing:"transparent",quantize:0};class Gu extends Kg{get interpolate(){const e=this.options;return e?typeof e.interpolate=="function"?e.interpolate:sc[e.interpolate]||sc.blues:t=>`rgb(${t},${t},${t})`}getColorForValue(e){const t=this._getNormalizedValue(e);return t==null||Number.isNaN(t)?this.options.missing:this.getColor(t)}getColor(e){let t=e;return this.options.quantize>0&&(t=XU(t,this.options.quantize)),this.interpolate(t)}_drawIndicator(){const{indicatorWidth:e}=this.options.legend,t=this._reversePixels;if(this.isHorizontal()){const i=this.width;if(this.options.quantize>0){const r=i/this.options.quantize,s=t?o=>i-r-o:o=>o;for(let o=0;o<i;o+=r){const a=(o+r/2)/i;this.ctx.fillStyle=this.getColor(a),this.ctx.fillRect(s(o),0,r,e)}}else{const r=t?s=>i-1-s:s=>s;for(let s=0;s<i;s+=1)this.ctx.fillStyle=this.getColor((s+.5)/i),this.ctx.fillRect(r(s),0,1,e)}}else{const i=this.height;if(this.options.quantize>0){const r=i/this.options.quantize,s=t?o=>i-r-o:o=>o;for(let o=0;o<i;o+=r){const a=(o+r/2)/i;this.ctx.fillStyle=this.getColor(a),this.ctx.fillRect(0,s(o),e,r)}}else{const r=t?s=>i-1-s:s=>s;for(let s=0;s<i;s+=1)this.ctx.fillStyle=this.getColor((s+.5)/i),this.ctx.fillRect(0,r(s),e,1)}}}}Gu.id="color";Gu.defaults=Rs({},[Yp.defaults,T1,ZU]);Gu.descriptors={_scriptable:n=>n!=="interpolate",_indexable:!1};class Kk extends qU{constructor(){super(...arguments),this.interpolate=e=>`rgb(${e},${e},${e})`}init(e){super.init(e),typeof e.interpolate=="function"?this.interpolate=e.interpolate:this.interpolate=sc[e.interpolate]||sc.blues}getColorForValue(e){return Gu.prototype.getColorForValue.call(this,e)}getColor(e){let t=e;return this.options.quantize>0&&(t=XU(t,this.options.quantize)),this.interpolate(t)}_drawIndicator(){return Gu.prototype._drawIndicator.call(this)}}Kk.id="colorLogarithmic";Kk.defaults=Rs({},[Kp.defaults,T1,ZU]);Kk.descriptors={_scriptable:n=>n!=="interpolate",_indexable:!1};const QU={missing:1,mode:"area",range:[2,20],legend:{align:"bottom",length:90,width:70,indicatorWidth:42}};class of extends Kg{constructor(){super(...arguments),this._model=null}getSizeForValue(e){const t=this._getNormalizedValue(e);return t==null||Number.isNaN(t)?this.options.missing:this.getSizeImpl(t)}getSizeImpl(e){const[t,i]=this.options.range;if(this.options.mode==="area"){const s=i*i*Math.PI,o=t*t*Math.PI,a=s-o,l=e*a+o;return Math.sqrt(l/Math.PI)}const r=i-t;return e*r+t}_drawIndicator(){const{ctx:e}=this,t=this.options.legend.indicatorWidth/2,i=this.isHorizontal(),r=this.ticks,s=this.getLabelItems(),o=s?s.map(a=>({[i?"x":"y"]:a.options.translation[i?0:1]})):r.map((a,l)=>({[i?"x":"y"]:this.getPixelForTick(l)}));if((this._gridLineItems||[]).forEach(a=>{if(e.save(),e.strokeStyle=a.color,e.lineWidth=a.width,e.setLineDash&&(e.setLineDash(a.borderDash),e.lineDashOffset=a.borderDashOffset),e.beginPath(),this.options.grid.drawTicks)switch(this.options.legend.align){case"left":e.moveTo(0,a.ty1),e.lineTo(t,a.ty2);break;case"top":e.moveTo(a.tx1,0),e.lineTo(a.tx2,t);break;case"bottom":e.moveTo(a.tx1,t),e.lineTo(a.tx2,t*2);break;default:e.moveTo(t,a.ty1),e.lineTo(t*2,a.ty2);break}e.stroke(),e.restore()}),this._model){const a=this._model;e.strokeStyle=a.borderColor,e.lineWidth=a.borderWidth||0,e.fillStyle=a.backgroundColor}else e.fillStyle="blue";r.forEach((a,l)=>{const c=o[l],u=this.getSizeForValue(a.value),h=i?c.x:t,d=i?t:c.y,f={pointStyle:"circle",borderWidth:0,...this._model||{},radius:u};__(e,f,h,d)})}}of.id="size";of.defaults=Rs({},[Yp.defaults,T1,QU]);of.descriptors={_scriptable:!0,_indexable:n=>n!=="range"};class JU extends qU{constructor(){super(...arguments),this._model=null}getSizeForValue(e){const t=this._getNormalizedValue(e);return t==null||Number.isNaN(t)?this.options.missing:this.getSizeImpl(t)}getSizeImpl(e){return of.prototype.getSizeImpl.call(this,e)}_drawIndicator(){of.prototype._drawIndicator.call(this)}}JU.id="sizeLogarithmic";JU.defaults=Rs({},[Kp.defaults,T1,QU]);function Yde(n,e){return[[n[0][0]-e,n[0][1]-e],[n[1][0]+e,n[1][1]+e]]}class Tc extends go{constructor(){super(...arguments),this.cache=void 0}inRange(e,t){const i=this.getBounds(),r=(Number.isNaN(e)||e>=i.x&&e<=i.x2)&&(Number.isNaN(t)||t>=i.y&&t<=i.y2),s=this.projectionScale.geoPath.projection();if(r&&!Number.isNaN(e)&&!Number.isNaN(t)&&typeof s.invert=="function"){const o=s.invert([e,t]);return o!=null&&_ue(this.feature,o)}return r}inXRange(e){return this.inRange(e,Number.NaN)}inYRange(e){return this.inRange(Number.NaN,e)}getCenterPoint(){if(this.cache&&this.cache.center)return this.cache.center;let e;if(this.center){const t=this.projectionScale.projection([this.center.longitude,this.center.latitude]);e={x:t[0],y:t[1]}}else{const t=this.projectionScale.geoPath.centroid(this.feature);e={x:t[0],y:t[1]}}return this.cache={...this.cache||{},center:e},e}getBounds(){if(this.cache&&this.cache.bounds)return this.cache.bounds;const e=Yde(this.projectionScale.geoPath.bounds(this.feature),this.options.borderWidth/2),t={x:e[0][0],x2:e[1][0],y:e[0][1],y2:e[1][1],width:e[1][0]-e[0][0],height:e[1][1]-e[0][1]};return this.cache={...this.cache||{},bounds:t},t}_drawInCache(e){const t=this.getBounds();if(!Number.isFinite(t.x))return;const i=this.cache&&this.cache.canvas?this.cache.canvas:e.createElement("canvas"),r=Math.floor(t.x),s=Math.floor(t.y),o=Math.ceil(t.x+t.width),a=Math.ceil(t.y+t.height),l=this.pixelRatio||1,c=Math.ceil(Math.max(o-r,1)*l),u=Math.ceil(Math.max(a-s,1)*l);if(c<=0||u<=0)return;i.width=c,i.height=u;const h=i.getContext("2d");h&&(h.clearRect(0,0,i.width,i.height),h.save(),h.scale(l,l),h.translate(-r,-s),this._drawImpl(h),h.restore(),this.cache={...this.cache||{},canvas:i,canvasKey:this._optionsToKey()})}_optionsToKey(){const{options:e}=this;return`${e.backgroundColor};${e.borderColor};${e.borderWidth};${this.pixelRatio}`}_drawImpl(e){const{feature:t}=this,{options:i}=this;e.beginPath(),this.projectionScale.geoPath.context(e)(t),i.backgroundColor&&(e.fillStyle=i.backgroundColor,e.fill()),i.borderColor&&(e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.stroke())}draw(e){const{feature:t}=this;if(!t)return;(!this.cache||this.cache.canvasKey!==this._optionsToKey())&&e.canvas.ownerDocument!=null&&this._drawInCache(e.canvas.ownerDocument);const i=this.getBounds();if(this.cache&&this.cache.canvas&&this.cache.canvas.width>0&&this.cache.canvas.height>0){const r=Math.floor(i.x),s=Math.floor(i.y),o=Math.ceil(i.x+i.width),a=Math.ceil(i.y+i.height),l=o-r,c=a-s;l>0&&c>0&&e.drawImage(this.cache.canvas,r,s,o-r,a-s)}else Number.isFinite(i.x)&&(e.save(),this._drawImpl(e),e.restore())}}Tc.id="geoFeature";Tc.defaults={...Gp.defaults,outlineBackgroundColor:null,outlineBorderWidth:0,graticuleBorderColor:"#CCCCCC",graticuleBorderWidth:0};Tc.defaultRoutes={outlineBorderColor:"borderColor",...Gp.defaultRoutes||{}};const e7={showOutline:!1,showGraticule:!1,clipMap:!0},t7={scales:{projection:{axis:"x",type:Sf.id,position:"chartArea",display:!1}}};function LB(n){const e={...n};return Object.keys(n).forEach(t=>{let i=t;if(t.startsWith("outline")){const r=t.slice(7);i=r[0].toLowerCase()+r.slice(1)}else if(t.startsWith("hoverOutline"))i=`hover${t.slice(12)}`;else return;delete e[t],e[i]=n[t]}),e}class n7 extends fo{getGeoDataset(){return super.getDataset()}getGeoOptions(){return this.chart.options}getProjectionScale(){return this.getScaleForId("projection")}linkScales(){const e=this.getGeoDataset(),t=this.getMeta();t.xAxisID="projection",e.xAxisID="projection",t.yAxisID="projection",e.yAxisID="projection",t.xScale=this.getScaleForId("projection"),t.yScale=this.getScaleForId("projection"),this.getProjectionScale().computeBounds(this.resolveOutline())}showOutline(){return rt(this.getGeoDataset().showOutline,this.getGeoOptions().showOutline)}clipMap(){return rt(this.getGeoDataset().clipMap,this.getGeoOptions().clipMap)}getGraticule(){return rt(this.getGeoDataset().showGraticule,this.getGeoOptions().showGraticule)}update(e){super.update(e);const t=this.getMeta(),i=this.getProjectionScale(),r=i.updateBounds();if(this.showOutline()){const s=t.dataset;if(r&&delete s.cache,s.projectionScale=i,s.pixelRatio=this.chart.currentDevicePixelRatio,e!=="resize"){const o=LB(this.resolveDatasetElementOptions(e)),a={feature:this.resolveOutline(),options:o};this.updateElement(s,void 0,a,e),this.getGraticule()&&(t.graticule=o)}}else this.getGraticule()&&e!=="resize"&&(t.graticule=LB(this.resolveDatasetElementOptions(e)));this.updateElements(t.data,0,t.data.length,e),r&&t.data.forEach(s=>delete s.cache)}resolveOutline(){const t=this.getGeoDataset().outline||{type:"Sphere"};return Array.isArray(t)?{type:"FeatureCollection",features:t}:t}showGraticule(){const e=this.getGraticule(),t=this.getMeta().graticule;if(!e||!t)return;const{ctx:i}=this.chart,s=this.getProjectionScale().geoPath.context(i);if(i.save(),i.beginPath(),typeof e=="boolean")e&&s(Rue());else{const o=bU();e.stepMajor&&o.stepMajor(e.stepMajor),e.stepMinor&&o.stepMinor(e.stepMinor),s(o())}i.strokeStyle=t.graticuleBorderColor,i.lineWidth=t.graticuleBorderWidth,i.stroke(),i.restore()}draw(){const{chart:e}=this,t=this.clipMap();let i=!1;(t===!0||t==="outline"||t==="outline+graticule")&&(i=!0,Hd(e.ctx,e.chartArea)),this.showOutline()&&this.getMeta().dataset&&this.getMeta().dataset.draw.call(this.getMeta().dataset,e.ctx,e.chartArea),t===!0||t==="graticule"||t==="outline+graticule"?i||Hd(e.ctx,e.chartArea):i&&(i=!1,$d(e.ctx)),this.showGraticule(),t===!0||t==="items"?i||Hd(e.ctx,e.chartArea):i&&(i=!1,$d(e.ctx)),this.getMeta().data.forEach(r=>r.draw.call(r,e.ctx,e.chartArea)),i&&(i=!1,$d(e.ctx))}}function i7(n,e,t,i=[],r=[]){Tr.addControllers(t),Array.isArray(i)?Tr.addElements(...i):Tr.addElements(i),Array.isArray(r)?Tr.addScales(...r):Tr.addScales(r);const s=e;return s.type=n,s}class Zp extends n7{initialize(){super.initialize(),this.enableOptionSharing=!0}linkScales(){super.linkScales();const e=this.getGeoDataset(),t=this.getMeta();t.vAxisID="color",t.rAxisID="color",e.vAxisID="color",e.rAxisID="color",t.rScale=this.getScaleForId("color"),t.vScale=t.rScale,t.iScale=t.xScale,t.iAxisID=t.xAxisID,e.iAxisID=t.xAxisID}_getOtherScale(e){return e}parse(e,t){const i=this.getMeta().rScale,{data:r}=this.getDataset(),s=this._cachedMeta;for(let o=e;o<e+t;o+=1)s._parsed[o]={[i.axis]:i.parse(r[o],o)}}updateElements(e,t,i,r){const s=this.resolveDataElementOptions(t,r),o=this.getSharedOptions(s),a=this.includeOptions(r,o),l=this.getProjectionScale();this.updateSharedOptions(o,r,s);for(let c=t;c<t+i;c+=1){const u=e[c];u.projectionScale=l,u.feature=this._data[c].feature,u.center=this._data[c].center,u.pixelRatio=this.chart.currentDevicePixelRatio;const h=u.getCenterPoint(),d={x:h.x,y:h.y};a&&(d.options=o||this.resolveDataElementOptions(c,r)),this.updateElement(u,c,d,r)}}indexToColor(e){const t=this.getMeta().rScale;return t.getColorForValue(this.getParsed(e)[t.axis])}}Zp.id="choropleth";Zp.defaults=Rs({},[e7,{datasetElementType:Tc.id,dataElementType:Tc.id}]);Zp.overrides=Rs({},[t7,{plugins:{tooltip:{callbacks:{title(){return""},label(n){var e,t,i,r;return n.formattedValue==null?(t=(e=n.chart.data)===null||e===void 0?void 0:e.labels)===null||t===void 0?void 0:t[n.dataIndex]:`${(r=(i=n.chart.data)===null||i===void 0?void 0:i.labels)===null||r===void 0?void 0:r[n.dataIndex]}: ${n.formattedValue}`}}},colors:{enabled:!1}},scales:{color:{type:Gu.id,axis:"x"}},elements:{geoFeature:{backgroundColor(n){return n.dataIndex==null?null:n.chart.getDatasetMeta(n.datasetIndex).controller.indexToColor(n.dataIndex)}}}}]);class Kde extends Es{constructor(e,t){super(e,i7("choropleth",t,Zp,Tc,[Gu,Sf]))}}Kde.id=Zp.id;class ty extends n7{initialize(){super.initialize(),this.enableOptionSharing=!0}linkScales(){super.linkScales();const e=this.getGeoDataset(),t=this.getMeta();t.vAxisID="size",t.rAxisID="size",e.vAxisID="size",e.rAxisID="size",t.rScale=this.getScaleForId("size"),t.vScale=t.rScale,t.iScale=t.xScale,t.iAxisID=t.xAxisID,e.iAxisID=t.xAxisID}_getOtherScale(e){return e}parse(e,t){const i=this.getMeta().rScale,r=this.getDataset().data,s=this._cachedMeta;for(let o=e;o<e+t;o+=1){const a=r[o];s._parsed[o]={x:a.longitude==null?a.x:a.longitude,y:a.latitude==null?a.y:a.latitude,[i.axis]:i.parse(a,o)}}}updateElements(e,t,i,r){const s=r==="reset",o=this.resolveDataElementOptions(t,r),a=this.getSharedOptions(o),l=this.includeOptions(r,a),c=this.getProjectionScale();this.getMeta().rScale._model=o,this.updateSharedOptions(a,r,o);for(let u=t;u<t+i;u+=1){const h=e[u],d=this.getParsed(u),f=c.projection([d.x,d.y]),g={x:f?f[0]:0,y:f?f[1]:0,skip:Number.isNaN(d.x)||Number.isNaN(d.y)};l&&(g.options=a||this.resolveDataElementOptions(u,r),s&&(g.options.radius=0)),this.updateElement(h,u,g,r)}}indexToRadius(e){const t=this.getMeta().rScale;return t.getSizeForValue(this.getParsed(e)[t.axis])}}ty.id="bubbleMap";ty.defaults=Rs({},[e7,{dataElementType:Zw.id,datasetElementType:Tc.id,showOutline:!0,clipMap:"outline+graticule"}]);ty.overrides=Rs({},[t7,{plugins:{tooltip:{callbacks:{title(){return""},label(n){var e,t,i,r;return n.formattedValue==null?(t=(e=n.chart.data)===null||e===void 0?void 0:e.labels)===null||t===void 0?void 0:t[n.dataIndex]:`${(r=(i=n.chart.data)===null||i===void 0?void 0:i.labels)===null||r===void 0?void 0:r[n.dataIndex]}: ${n.formattedValue}`}}}},scales:{size:{axis:"x",type:of.id}},elements:{point:{radius(n){return n.dataIndex==null?null:n.chart.getDatasetMeta(n.datasetIndex).controller.indexToRadius(n.dataIndex)},hoverRadius(n){return n.dataIndex==null?null:n.chart.getDatasetMeta(n.datasetIndex).controller.indexToRadius(n.dataIndex)+1}}}}]);class qde extends Es{constructor(e,t){super(e,i7("bubbleMap",t,ty,Tc,[of,Sf]))}}qde.id=ty.id;var qg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _f(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var GP={},qk={};Object.defineProperty(qk,"__esModule",{value:!0});const Xde=[{country:"Afghanistan",alpha2:"AF",alpha3:"AFG",numeric:"004"},{country:"Åland Islands",alpha2:"AX",alpha3:"ALA",numeric:"248"},{country:"Albania",alpha2:"AL",alpha3:"ALB",numeric:"008"},{country:"Algeria",alpha2:"DZ",alpha3:"DZA",numeric:"012"},{country:"American Samoa",alpha2:"AS",alpha3:"ASM",numeric:"016"},{country:"Andorra",alpha2:"AD",alpha3:"AND",numeric:"020"},{country:"Angola",alpha2:"AO",alpha3:"AGO",numeric:"024"},{country:"Anguilla",alpha2:"AI",alpha3:"AIA",numeric:"660"},{country:"Antarctica",alpha2:"AQ",alpha3:"ATA",numeric:"010"},{country:"Antigua and Barbuda",alpha2:"AG",alpha3:"ATG",numeric:"028"},{country:"Argentina",alpha2:"AR",alpha3:"ARG",numeric:"032"},{country:"Armenia",alpha2:"AM",alpha3:"ARM",numeric:"051"},{country:"Aruba",alpha2:"AW",alpha3:"ABW",numeric:"533"},{country:"Australia",alpha2:"AU",alpha3:"AUS",numeric:"036"},{country:"Austria",alpha2:"AT",alpha3:"AUT",numeric:"040"},{country:"Azerbaijan",alpha2:"AZ",alpha3:"AZE",numeric:"031"},{country:"Bahamas",alpha2:"BS",alpha3:"BHS",numeric:"044"},{country:"Bahrain",alpha2:"BH",alpha3:"BHR",numeric:"048"},{country:"Bangladesh",alpha2:"BD",alpha3:"BGD",numeric:"050"},{country:"Barbados",alpha2:"BB",alpha3:"BRB",numeric:"052"},{country:"Belarus",alpha2:"BY",alpha3:"BLR",numeric:"112"},{country:"Belgium",alpha2:"BE",alpha3:"BEL",numeric:"056"},{country:"Belize",alpha2:"BZ",alpha3:"BLZ",numeric:"084"},{country:"Benin",alpha2:"BJ",alpha3:"BEN",numeric:"204"},{country:"Bermuda",alpha2:"BM",alpha3:"BMU",numeric:"060"},{country:"Bhutan",alpha2:"BT",alpha3:"BTN",numeric:"064"},{country:"Bolivia",alpha2:"BO",alpha3:"BOL",numeric:"068"},{country:"Bonaire, Sint Eustatius and Saba",alpha2:"BQ",alpha3:"BES",numeric:"535"},{country:"Bosnia and Herzegovina",alpha2:"BA",alpha3:"BIH",numeric:"070"},{country:"Botswana",alpha2:"BW",alpha3:"BWA",numeric:"072"},{country:"Bouvet Island",alpha2:"BV",alpha3:"BVT",numeric:"074"},{country:"Brazil",alpha2:"BR",alpha3:"BRA",numeric:"076"},{country:"British Indian Ocean Territory",alpha2:"IO",alpha3:"IOT",numeric:"086"},{country:"Brunei Darussalam",alpha2:"BN",alpha3:"BRN",numeric:"096"},{country:"Bulgaria",alpha2:"BG",alpha3:"BGR",numeric:"100"},{country:"Burkina Faso",alpha2:"BF",alpha3:"BFA",numeric:"854"},{country:"Burundi",alpha2:"BI",alpha3:"BDI",numeric:"108"},{country:"Cabo Verde",alpha2:"CV",alpha3:"CPV",numeric:"132"},{country:"Cambodia",alpha2:"KH",alpha3:"KHM",numeric:"116"},{country:"Cameroon",alpha2:"CM",alpha3:"CMR",numeric:"120"},{country:"Canada",alpha2:"CA",alpha3:"CAN",numeric:"124"},{country:"Cayman Islands",alpha2:"KY",alpha3:"CYM",numeric:"136"},{country:"Central African Republic",alpha2:"CF",alpha3:"CAF",numeric:"140"},{country:"Chad",alpha2:"TD",alpha3:"TCD",numeric:"148"},{country:"Chile",alpha2:"CL",alpha3:"CHL",numeric:"152"},{country:"China",alpha2:"CN",alpha3:"CHN",numeric:"156"},{country:"Christmas Island",alpha2:"CX",alpha3:"CXR",numeric:"162"},{country:"Cocos Islands",alpha2:"CC",alpha3:"CCK",numeric:"166"},{country:"Colombia",alpha2:"CO",alpha3:"COL",numeric:"170"},{country:"Comoros",alpha2:"KM",alpha3:"COM",numeric:"174"},{country:"Congo",alpha2:"CG",alpha3:"COG",numeric:"178"},{country:"Congo",alpha2:"CD",alpha3:"COD",numeric:"180"},{country:"Cook Islands",alpha2:"CK",alpha3:"COK",numeric:"184"},{country:"Costa Rica",alpha2:"CR",alpha3:"CRI",numeric:"188"},{country:"Côte d'Ivoire",alpha2:"CI",alpha3:"CIV",numeric:"384"},{country:"Croatia",alpha2:"HR",alpha3:"HRV",numeric:"191"},{country:"Cuba",alpha2:"CU",alpha3:"CUB",numeric:"192"},{country:"Curaçao",alpha2:"CW",alpha3:"CUW",numeric:"531"},{country:"Cyprus",alpha2:"CY",alpha3:"CYP",numeric:"196"},{country:"Czech Republic",alpha2:"CZ",alpha3:"CZE",numeric:"203"},{country:"Denmark",alpha2:"DK",alpha3:"DNK",numeric:"208"},{country:"Djibouti",alpha2:"DJ",alpha3:"DJI",numeric:"262"},{country:"Dominica",alpha2:"DM",alpha3:"DMA",numeric:"212"},{country:"Dominican Republic",alpha2:"DO",alpha3:"DOM",numeric:"214"},{country:"Ecuador",alpha2:"EC",alpha3:"ECU",numeric:"218"},{country:"Egypt",alpha2:"EG",alpha3:"EGY",numeric:"818"},{country:"El Salvador",alpha2:"SV",alpha3:"SLV",numeric:"222"},{country:"Equatorial Guinea",alpha2:"GQ",alpha3:"GNQ",numeric:"226"},{country:"Eritrea",alpha2:"ER",alpha3:"ERI",numeric:"232"},{country:"Estonia",alpha2:"EE",alpha3:"EST",numeric:"233"},{country:"Ethiopia",alpha2:"ET",alpha3:"ETH",numeric:"231"},{country:"Falkland Islands",alpha2:"FK",alpha3:"FLK",numeric:"238"},{country:"Faroe Islands",alpha2:"FO",alpha3:"FRO",numeric:"234"},{country:"Fiji",alpha2:"FJ",alpha3:"FJI",numeric:"242"},{country:"Finland",alpha2:"FI",alpha3:"FIN",numeric:"246"},{country:"France",alpha2:"FR",alpha3:"FRA",numeric:"250"},{country:"French Guiana",alpha2:"GF",alpha3:"GUF",numeric:"254"},{country:"French Polynesia",alpha2:"PF",alpha3:"PYF",numeric:"258"},{country:"French Southern Territories",alpha2:"TF",alpha3:"ATF",numeric:"260"},{country:"Gabon",alpha2:"GA",alpha3:"GAB",numeric:"266"},{country:"Gambia",alpha2:"GM",alpha3:"GMB",numeric:"270"},{country:"Georgia",alpha2:"GE",alpha3:"GEO",numeric:"268"},{country:"Germany",alpha2:"DE",alpha3:"DEU",numeric:"276"},{country:"Ghana",alpha2:"GH",alpha3:"GHA",numeric:"288"},{country:"Gibraltar",alpha2:"GI",alpha3:"GIB",numeric:"292"},{country:"Greece",alpha2:"GR",alpha3:"GRC",numeric:"300"},{country:"Greenland",alpha2:"GL",alpha3:"GRL",numeric:"304"},{country:"Grenada",alpha2:"GD",alpha3:"GRD",numeric:"308"},{country:"Guadeloupe",alpha2:"GP",alpha3:"GLP",numeric:"312"},{country:"Guam",alpha2:"GU",alpha3:"GUM",numeric:"316"},{country:"Guatemala",alpha2:"GT",alpha3:"GTM",numeric:"320"},{country:"Guernsey",alpha2:"GG",alpha3:"GGY",numeric:"831"},{country:"Guinea",alpha2:"GN",alpha3:"GIN",numeric:"324"},{country:"Guinea-Bissau",alpha2:"GW",alpha3:"GNB",numeric:"624"},{country:"Guyana",alpha2:"GY",alpha3:"GUY",numeric:"328"},{country:"Haiti",alpha2:"HT",alpha3:"HTI",numeric:"332"},{country:"Heard Island and McDonald Islands",alpha2:"HM",alpha3:"HMD",numeric:"334"},{country:"Holy See",alpha2:"VA",alpha3:"VAT",numeric:"336"},{country:"Honduras",alpha2:"HN",alpha3:"HND",numeric:"340"},{country:"Hong Kong",alpha2:"HK",alpha3:"HKG",numeric:"344"},{country:"Hungary",alpha2:"HU",alpha3:"HUN",numeric:"348"},{country:"Iceland",alpha2:"IS",alpha3:"ISL",numeric:"352"},{country:"India",alpha2:"IN",alpha3:"IND",numeric:"356"},{country:"Indonesia",alpha2:"ID",alpha3:"IDN",numeric:"360"},{country:"Islamic Republic of Iran",alpha2:"IR",alpha3:"IRN",numeric:"364"},{country:"Iraq",alpha2:"IQ",alpha3:"IRQ",numeric:"368"},{country:"Ireland",alpha2:"IE",alpha3:"IRL",numeric:"372"},{country:"Isle of Man",alpha2:"IM",alpha3:"IMN",numeric:"833"},{country:"Israel",alpha2:"IL",alpha3:"ISR",numeric:"376"},{country:"Italy",alpha2:"IT",alpha3:"ITA",numeric:"380"},{country:"Jamaica",alpha2:"JM",alpha3:"JAM",numeric:"388"},{country:"Japan",alpha2:"JP",alpha3:"JPN",numeric:"392"},{country:"Jersey",alpha2:"JE",alpha3:"JEY",numeric:"832"},{country:"Jordan",alpha2:"JO",alpha3:"JOR",numeric:"400"},{country:"Kazakhstan",alpha2:"KZ",alpha3:"KAZ",numeric:"398"},{country:"Kenya",alpha2:"KE",alpha3:"KEN",numeric:"404"},{country:"Kiribati",alpha2:"KI",alpha3:"KIR",numeric:"296"},{country:"Democratic People's Republic of Korea",alpha2:"KP",alpha3:"PRK",numeric:"408"},{country:"Republic of Korea",alpha2:"KR",alpha3:"KOR",numeric:"410"},{country:"Kuwait",alpha2:"KW",alpha3:"KWT",numeric:"414"},{country:"Kyrgyzstan",alpha2:"KG",alpha3:"KGZ",numeric:"417"},{country:"Lao People's Democratic Republic",alpha2:"LA",alpha3:"LAO",numeric:"418"},{country:"Latvia",alpha2:"LV",alpha3:"LVA",numeric:"428"},{country:"Lebanon",alpha2:"LB",alpha3:"LBN",numeric:"422"},{country:"Lesotho",alpha2:"LS",alpha3:"LSO",numeric:"426"},{country:"Liberia",alpha2:"LR",alpha3:"LBR",numeric:"430"},{country:"Libya",alpha2:"LY",alpha3:"LBY",numeric:"434"},{country:"Liechtenstein",alpha2:"LI",alpha3:"LIE",numeric:"438"},{country:"Lithuania",alpha2:"LT",alpha3:"LTU",numeric:"440"},{country:"Luxembourg",alpha2:"LU",alpha3:"LUX",numeric:"442"},{country:"Macao",alpha2:"MO",alpha3:"MAC",numeric:"446"},{country:"Macedonia",alpha2:"MK",alpha3:"MKD",numeric:"807"},{country:"Madagascar",alpha2:"MG",alpha3:"MDG",numeric:"450"},{country:"Malawi",alpha2:"MW",alpha3:"MWI",numeric:"454"},{country:"Malaysia",alpha2:"MY",alpha3:"MYS",numeric:"458"},{country:"Maldives",alpha2:"MV",alpha3:"MDV",numeric:"462"},{country:"Mali",alpha2:"ML",alpha3:"MLI",numeric:"466"},{country:"Malta",alpha2:"MT",alpha3:"MLT",numeric:"470"},{country:"Marshall Islands",alpha2:"MH",alpha3:"MHL",numeric:"584"},{country:"Martinique",alpha2:"MQ",alpha3:"MTQ",numeric:"474"},{country:"Mauritania",alpha2:"MR",alpha3:"MRT",numeric:"478"},{country:"Mauritius",alpha2:"MU",alpha3:"MUS",numeric:"480"},{country:"Mayotte",alpha2:"YT",alpha3:"MYT",numeric:"175"},{country:"Mexico",alpha2:"MX",alpha3:"MEX",numeric:"484"},{country:"Federated States of Micronesia",alpha2:"FM",alpha3:"FSM",numeric:"583"},{country:"Republic of Moldova",alpha2:"MD",alpha3:"MDA",numeric:"498"},{country:"Monaco",alpha2:"MC",alpha3:"MCO",numeric:"492"},{country:"Mongolia",alpha2:"MN",alpha3:"MNG",numeric:"496"},{country:"Montenegro",alpha2:"ME",alpha3:"MNE",numeric:"499"},{country:"Montserrat",alpha2:"MS",alpha3:"MSR",numeric:"500"},{country:"Morocco",alpha2:"MA",alpha3:"MAR",numeric:"504"},{country:"Mozambique",alpha2:"MZ",alpha3:"MOZ",numeric:"508"},{country:"Myanmar",alpha2:"MM",alpha3:"MMR",numeric:"104"},{country:"Namibia",alpha2:"NA",alpha3:"NAM",numeric:"516"},{country:"Nauru",alpha2:"NR",alpha3:"NRU",numeric:"520"},{country:"Nepal",alpha2:"NP",alpha3:"NPL",numeric:"524"},{country:"Netherlands",alpha2:"NL",alpha3:"NLD",numeric:"528"},{country:"New Caledonia",alpha2:"NC",alpha3:"NCL",numeric:"540"},{country:"New Zealand",alpha2:"NZ",alpha3:"NZL",numeric:"554"},{country:"Nicaragua",alpha2:"NI",alpha3:"NIC",numeric:"558"},{country:"Niger",alpha2:"NE",alpha3:"NER",numeric:"562"},{country:"Nigeria",alpha2:"NG",alpha3:"NGA",numeric:"566"},{country:"Niue",alpha2:"NU",alpha3:"NIU",numeric:"570"},{country:"Norfolk Island",alpha2:"NF",alpha3:"NFK",numeric:"574"},{country:"Northern Mariana Islands",alpha2:"MP",alpha3:"MNP",numeric:"580"},{country:"Norway",alpha2:"NO",alpha3:"NOR",numeric:"578"},{country:"Oman",alpha2:"OM",alpha3:"OMN",numeric:"512"},{country:"Pakistan",alpha2:"PK",alpha3:"PAK",numeric:"586"},{country:"Palau",alpha2:"PW",alpha3:"PLW",numeric:"585"},{country:"State of Palestine",alpha2:"PS",alpha3:"PSE",numeric:"275"},{country:"Panama",alpha2:"PA",alpha3:"PAN",numeric:"591"},{country:"Papua New Guinea",alpha2:"PG",alpha3:"PNG",numeric:"598"},{country:"Paraguay",alpha2:"PY",alpha3:"PRY",numeric:"600"},{country:"Peru",alpha2:"PE",alpha3:"PER",numeric:"604"},{country:"Philippines",alpha2:"PH",alpha3:"PHL",numeric:"608"},{country:"Pitcairn",alpha2:"PN",alpha3:"PCN",numeric:"612"},{country:"Poland",alpha2:"PL",alpha3:"POL",numeric:"616"},{country:"Portugal",alpha2:"PT",alpha3:"PRT",numeric:"620"},{country:"Puerto Rico",alpha2:"PR",alpha3:"PRI",numeric:"630"},{country:"Qatar",alpha2:"QA",alpha3:"QAT",numeric:"634"},{country:"Réunion",alpha2:"RE",alpha3:"REU",numeric:"638"},{country:"Romania",alpha2:"RO",alpha3:"ROU",numeric:"642"},{country:"Russian Federation",alpha2:"RU",alpha3:"RUS",numeric:"643"},{country:"Rwanda",alpha2:"RW",alpha3:"RWA",numeric:"646"},{country:"Saint Barthélemy",alpha2:"BL",alpha3:"BLM",numeric:"652"},{country:"Saint Helena, Ascension and Tristan da Cunha",alpha2:"SH",alpha3:"SHN",numeric:"654"},{country:"Saint Kitts and Nevis",alpha2:"KN",alpha3:"KNA",numeric:"659"},{country:"Saint Lucia",alpha2:"LC",alpha3:"LCA",numeric:"662"},{country:"Saint Martin",alpha2:"MF",alpha3:"MAF",numeric:"663"},{country:"Saint Pierre and Miquelon",alpha2:"PM",alpha3:"SPM",numeric:"666"},{country:"Saint Vincent and the Grenadines",alpha2:"VC",alpha3:"VCT",numeric:"670"},{country:"Samoa",alpha2:"WS",alpha3:"WSM",numeric:"882"},{country:"San Marino",alpha2:"SM",alpha3:"SMR",numeric:"674"},{country:"Sao Tome and Principe",alpha2:"ST",alpha3:"STP",numeric:"678"},{country:"Saudi Arabia",alpha2:"SA",alpha3:"SAU",numeric:"682"},{country:"Senegal",alpha2:"SN",alpha3:"SEN",numeric:"686"},{country:"Serbia",alpha2:"RS",alpha3:"SRB",numeric:"688"},{country:"Seychelles",alpha2:"SC",alpha3:"SYC",numeric:"690"},{country:"Sierra Leone",alpha2:"SL",alpha3:"SLE",numeric:"694"},{country:"Singapore",alpha2:"SG",alpha3:"SGP",numeric:"702"},{country:"Sint Maarten",alpha2:"SX",alpha3:"SXM",numeric:"534"},{country:"Slovakia",alpha2:"SK",alpha3:"SVK",numeric:"703"},{country:"Slovenia",alpha2:"SI",alpha3:"SVN",numeric:"705"},{country:"Solomon Islands",alpha2:"SB",alpha3:"SLB",numeric:"090"},{country:"Somalia",alpha2:"SO",alpha3:"SOM",numeric:"706"},{country:"South Africa",alpha2:"ZA",alpha3:"ZAF",numeric:"710"},{country:"South Georgia and the South Sandwich Islands",alpha2:"GS",alpha3:"SGS",numeric:"239"},{country:"South Sudan",alpha2:"SS",alpha3:"SSD",numeric:"728"},{country:"Spain",alpha2:"ES",alpha3:"ESP",numeric:"724"},{country:"Sri Lanka",alpha2:"LK",alpha3:"LKA",numeric:"144"},{country:"Sudan",alpha2:"SD",alpha3:"SDN",numeric:"729"},{country:"Suriname",alpha2:"SR",alpha3:"SUR",numeric:"740"},{country:"Svalbard and Jan Mayen",alpha2:"SJ",alpha3:"SJM",numeric:"744"},{country:"Swaziland",alpha2:"SZ",alpha3:"SWZ",numeric:"748"},{country:"Sweden",alpha2:"SE",alpha3:"SWE",numeric:"752"},{country:"Switzerland",alpha2:"CH",alpha3:"CHE",numeric:"756"},{country:"Syrian Arab Republic",alpha2:"SY",alpha3:"SYR",numeric:"760"},{country:"Taiwan, Province of China",alpha2:"TW",alpha3:"TWN",numeric:"158"},{country:"Tajikistan",alpha2:"TJ",alpha3:"TJK",numeric:"762"},{country:"United Republic of Tanzania",alpha2:"TZ",alpha3:"TZA",numeric:"834"},{country:"Thailand",alpha2:"TH",alpha3:"THA",numeric:"764"},{country:"Timor-Leste",alpha2:"TL",alpha3:"TLS",numeric:"626"},{country:"Togo",alpha2:"TG",alpha3:"TGO",numeric:"768"},{country:"Tokelau",alpha2:"TK",alpha3:"TKL",numeric:"772"},{country:"Tonga",alpha2:"TO",alpha3:"TON",numeric:"776"},{country:"Trinidad and Tobago",alpha2:"TT",alpha3:"TTO",numeric:"780"},{country:"Tunisia",alpha2:"TN",alpha3:"TUN",numeric:"788"},{country:"Turkey",alpha2:"TR",alpha3:"TUR",numeric:"792"},{country:"Turkmenistan",alpha2:"TM",alpha3:"TKM",numeric:"795"},{country:"Turks and Caicos Islands",alpha2:"TC",alpha3:"TCA",numeric:"796"},{country:"Tuvalu",alpha2:"TV",alpha3:"TUV",numeric:"798"},{country:"Uganda",alpha2:"UG",alpha3:"UGA",numeric:"800"},{country:"Ukraine",alpha2:"UA",alpha3:"UKR",numeric:"804"},{country:"United Arab Emirates",alpha2:"AE",alpha3:"ARE",numeric:"784"},{country:"United Kingdom of Great Britain and Northern Ireland",alpha2:"GB",alpha3:"GBR",numeric:"826"},{country:"United States of America",alpha2:"US",alpha3:"USA",numeric:"840"},{country:"United States Minor Outlying Islands",alpha2:"UM",alpha3:"UMI",numeric:"581"},{country:"Uruguay",alpha2:"UY",alpha3:"URY",numeric:"858"},{country:"Uzbekistan",alpha2:"UZ",alpha3:"UZB",numeric:"860"},{country:"Vanuatu",alpha2:"VU",alpha3:"VUT",numeric:"548"},{country:"Venezuela (Bolivarian Republic of)",alpha2:"VE",alpha3:"VEN",numeric:"862"},{country:"Viet Nam",alpha2:"VN",alpha3:"VNM",numeric:"704"},{country:"Virgin Islands",alpha2:"VG",alpha3:"VGB",numeric:"092"},{country:"Virgin Islands of the United States",alpha2:"VI",alpha3:"VIR",numeric:"850"},{country:"Wallis and Futuna",alpha2:"WF",alpha3:"WLF",numeric:"876"},{country:"Western Sahara",alpha2:"EH",alpha3:"ESH",numeric:"732"},{country:"Yemen",alpha2:"YE",alpha3:"YEM",numeric:"887"},{country:"Zambia",alpha2:"ZM",alpha3:"ZMB",numeric:"894"},{country:"Zimbabwe",alpha2:"ZW",alpha3:"ZWE",numeric:"716"}];qk.default=Xde;(function(n){var e=qg&&qg.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(n,"__esModule",{value:!0}),n.all=n.whereNumeric=n.whereAlpha3=n.whereAlpha2=n.whereCountry=void 0;const t=e(qk);n.whereCountry=i=>t.default.find(r=>r.country.toUpperCase()===i.toUpperCase()),n.whereAlpha2=i=>t.default.find(r=>r.alpha2===i.toUpperCase()),n.whereAlpha3=i=>t.default.find(r=>r.alpha3===i.toUpperCase()),n.whereNumeric=i=>t.default.find(r=>r.numeric===String(i)),n.all=()=>t.default,n.default={all:n.all,whereCountry:n.whereCountry,whereAlpha2:n.whereAlpha2,whereAlpha3:n.whereAlpha3,whereNumeric:n.whereNumeric}})(GP);var r7;let s7,o7,a7,l7,c7,u7,h7,d7,f7;function Zde(n,e,t,i,r,s){var o,a,l,c,u,h,d,f=Symbol.metadata||Symbol.for("Symbol.metadata"),g=Object.defineProperty,p=Object.create,m=[p(null),p(null)],v=e.length;function y(S,T,P){return function(E,A){T&&(A=E,E=n);for(var L=0;L<S.length;L++)A=S[L].apply(E,P?[A]:[]);return P?A:E}}function w(S,T,P,E){if(typeof S!="function"&&(E||S!==void 0))throw new TypeError(T+" must "+(P||"be")+" a function"+(E?"":" or undefined"));return S}function R(S,T,P,E,A,L,W,F,V,H,N){function j(Y){if(!N(Y))throw new TypeError("Attempted to access private element on non-instance")}var k=[].concat(T[0]),K=T[3],ie=!W,b=A===1,C=A===3,_=A===4,I=A===2;function $(Y,ne,de){return function(he,ce){return ne&&(ce=he,he=S),de&&de(he),M[Y].call(he,ce)}}if(!ie){var M={},B=[],z=C?"get":_||b?"set":"value";if(V?(H||b?M={get:NB(function(){return K(this)},E,"get"),set:function(Y){T[4](this,Y)}}:M[z]=K,H||NB(M[z],E,I?"":z)):H||(M=Object.getOwnPropertyDescriptor(S,E)),!H&&!V){if((a=m[+F][E])&&(a^A)!=7)throw Error("Decorating two elements with the same name ("+M[z].name+") is not supported yet");m[+F][E]=A<3?1:A}}for(var U=S,le=k.length-1;le>=0;le-=P?2:1){var ue=w(k[le],"A decorator","be",!0),be=P?k[le-1]:void 0,fe={},Z={kind:["field","accessor","method","getter","setter","class"][A],name:E,metadata:o,addInitializer:(function(Y,ne){if(Y.v)throw new TypeError("attempted to call addInitializer after decoration was finished");w(ne,"An initializer","be",!0),L.push(ne)}).bind(null,fe)};if(ie)a=ue.call(be,U,Z),fe.v=1,w(a,"class decorators","return")&&(U=a);else if(Z.static=F,Z.private=V,a=Z.access={has:V?N.bind():function(Y){return E in Y}},_||(a.get=V?I?function(Y){return j(Y),M.value}:$("get",0,j):function(Y){return Y[E]}),I||C||(a.set=V?$("set",0,j):function(Y,ne){Y[E]=ne}),U=ue.call(be,b?{get:M.get,set:M.set}:M[z],Z),fe.v=1,b){if(typeof U=="object"&&U)(a=w(U.get,"accessor.get"))&&(M.get=a),(a=w(U.set,"accessor.set"))&&(M.set=a),(a=w(U.init,"accessor.init"))&&B.unshift(a);else if(U!==void 0)throw new TypeError("accessor decorators must return an object with get, set, or init properties or undefined")}else w(U,(H?"field":"method")+" decorators","return")&&(H?B.unshift(U):M[z]=U)}return A<2&&W.push(y(B,F,1),y(L,F,0)),H||ie||(V?b?W.splice(-1,0,$("get",F),$("set",F)):W.push(I?M[z]:w.call.bind(M[z])):g(S,E,M)),U}function x(S){return g(S,f,{configurable:!0,enumerable:!0,value:o})}return o=p(o??null),u=[],h=function(S){S&&u.push(y(S))},d=function(S,T){for(var P=0;P<t.length;P++){var E=t[P],A=E[1],L=7&A;if((8&A)==S&&!L==T){var W=E[2],F=!!E[3],V=16&A;R(S?n:n.prototype,E,V,F?"#"+W:Qde(W),L,L<2?[]:S?c=c||[]:l=l||[],u,!!S,F,T,S&&F?function(H){return efe(H)===n}:r)}}},d(8,0),d(0,0),d(8,1),d(0,1),h(l),h(c),a=u,v||x(n),{e:a,get c(){var S=[];return v&&[x(n=R(n,[e],i,n.name,5,S)),y(S,1)]}}}function Qde(n){var e=Jde(n,"string");return typeof e=="symbol"?e:e+""}function Jde(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function NB(n,e,t){typeof e=="symbol"&&(e=(e=e.description)?"["+e+"]":"");try{Object.defineProperty(n,"name",{configurable:!0,value:t?t+" "+e:e})}catch{}return n}function efe(n){if(Object(n)!==n)throw TypeError("right-hand side of 'in' should be an object, got "+(n!==null?typeof n:"null"));return n}const tfe=n=>n.startsWith("#")?n.slice(1):n;let g7;class nfe{constructor(){this.datasrc=o7(this,"g/National_Initiatives_Figure_Data.csv"),this.countriessrc=(a7(this),l7(this,"g/countries-50m.json")),this.continent=(c7(this),u7(this)),this.geochart=void h7(this),this.continent="",this.countryDataDesc={},this.projecturls=[],this.projections=["azimuthalEqualArea","azimuthalEquidistant","gnomonic","orthographic","stereographic","equalEarth","albers","albersUsa","conicConformal","conicEqualArea","conicEquidistant","equirectangular","mercator","transverseMercator","naturalEarth1"],this.countryName=d7(this,""),this.isAnimating=(f7(this),!1)}parseCSV(e){const t=[];let i=!1;for(let r=0,s=0,o=0;o<e.length;o++){let a=e[o],l=e[o+1];if(t[r]=t[r]||[],t[r][s]=t[r][s]||"",a=='"'&&i&&l=='"'){t[r][s]+=a,++o;continue}if(a=='"'){i=!i;continue}if(a==","&&!i){++s;continue}if(a=="\r"&&l==`
`&&!i){++r,s=0,++o;continue}if(a==`
`&&!i){++r,s=0;continue}if(a=="\r"&&!i){++r,s=0;continue}t[r][s]+=a}return t}showSelected(e){this.countryDataDesc?(this.selected=this.countryDataDesc[e],this.selected?(this.countryName=this.selected[0],this.projectName=this.selected[3],this.projectPublication=this.selected[2],this.projectStatus=this.selected[8],this.projectStatusText=this.selected[7],this.selected[4]?this.projecturls=this.selected[4].split(" / "):this.projecturls=[]):console.warn("showselected this.selected is null")):console.warn("showselected countryDataDesc is null")}bound(){if(this.paramshash=window.location.hash,this.params=this.paramshash.split("&"),console.log("bound() params",this.params),this.params.length>0){const e=this.params.length;if(e>0){const t=tfe(this.params[0]);t&&(this.datasrc=t)}e>1&&(this.continent=this.params[1]),console.log("hash contains url:"+this.datasrc)}}attached(){console.log("attached"),Es.register(Zp,Tc,Sf,Gu,...tU),Promise.all([fetch(this.countriessrc).then(e=>e.json()),fetch(this.datasrc).then(e=>e.text())]).then(([e,t])=>{let i=this;this.countries=jde(e,e.objects.countries).features;const r=this.parseCSV(t);let s={};this.countryDataDesc={};for(let o of r)try{let a=GP.whereAlpha2(o[1]);a&&(s[a.numeric]=o[8],this.countryDataDesc[a.numeric]=o)}catch(a){console.warn(a)}this.myData=[];for(let o of this.countries){let a=0,l=s[o.id];l?a=parseFloat(l):console.warn("no data for country with id"+o.id+" name:"+o.properties.name),this.myData.push({feature:o,value:a})}if(this.worlddata=this.myData,this.worldcountries=this.countries,console.log("geoOrthographic function:",UP),this.chart=new Es(this.geochart.getContext("2d"),{type:"choropleth",data:{labels:this.countries.map(o=>o.id+":"+o.properties.name),datasets:[{label:"Countries",data:this.myData,outline:this.countries}]},options:{showOutline:!1,showGraticule:!0,plugins:{legend:{display:!1}},scales:{projection:{axis:"x",projection:"equalEarth"},color:{axis:"x",interpolate:"oranges",legend:{position:"bottom-right",align:"right"}}},onClick:(o,a)=>{let l=a.map(c=>c.element.feature.id);i.showSelected(l[0])}}}),this.continent)switch(console.log("switching to continent",this.continent),this.continent){case"europe":this.switchToEurope();break;case"asia":this.switchToAsia();break;case"namerica":this.switchToNAmerica();break;case"africa":this.switchToAfrica();break;case"samerica":this.switchToSAmerica();break;case"australia":this.switchToAustralia();break;default:console.warn("Unknown continent:",this.continent),this.switchToWorld();break}})}detached(){}switchToEurope(){this.currentProjection=="orthographic"&&this.chart.scales.projection.projection.rotate([0,0,0]);let e=4;this.chart.options.scales.projection.projectionScale=e;let t=e*(3/8*this.chart.chartArea.height);this.chart.options.scales.projection.projectionOffset=[0,t],this.chart.update()}switchToWorld(){this.currentProjection=="orthographic"&&this.chart.scales.projection.projection.rotate([0,0,0]),this.chart.options.scales.projection.projectionScale=1,this.chart.options.scales.projection.projectionOffset=[0,0],this.chart.update()}switchToAsia(){if(this.currentProjection=="orthographic"){let e=1;this.chart.options.scales.projection.projectionScale=e,this.chart.options.scales.projection.projectionOffset=[0,0],this.chart.scales.projection.projection.rotate([-80,0,0])}else{let e=2.3,t=-e*(2/8*this.chart.chartArea.width),i=e*(3/16*this.chart.chartArea.height);this.chart.options.scales.projection.projectionScale=e,this.chart.options.scales.projection.projectionOffset=[t,i]}this.chart.update()}switchToNAmerica(){if(this.currentProjection=="orthographic"){let e=1;this.chart.options.scales.projection.projectionScale=e,this.chart.options.scales.projection.projectionOffset=[0,0],this.chart.scales.projection.projection.rotate([90,0,0])}else{let e=2.5,t=e*(2/8*this.chart.chartArea.width),i=e*(2/8*this.chart.chartArea.height);this.chart.options.scales.projection.projectionScale=e,this.chart.options.scales.projection.projectionOffset=[t,i]}this.chart.update()}switchToSAmerica(){if(this.currentProjection=="orthographic"){let e=1;this.chart.options.scales.projection.projectionScale=e,this.chart.options.scales.projection.projectionOffset=[0,0],this.chart.scales.projection.projection.rotate([60,0,0])}else{let e=2,t=e*(1/8*this.chart.chartArea.width),i=-e*(5/32*this.chart.chartArea.height);this.chart.options.scales.projection.projectionScale=e,this.chart.options.scales.projection.projectionOffset=[t,i]}this.chart.update()}switchToAfrica(){if(this.currentProjection=="orthographic"){let e=1;this.chart.options.scales.projection.projectionScale=e,this.chart.options.scales.projection.projectionOffset=[0,0],this.chart.scales.projection.projection.rotate([0,0,0])}else this.chart.options.scales.projection.projectionScale=1.8,this.chart.options.scales.projection.projectionOffset=[0,0];this.chart.update()}switchToPacific(){if(this.currentProjection=="orthographic"){let e=1;this.chart.options.scales.projection.projectionScale=e,this.chart.options.scales.projection.projectionOffset=[0,0],this.chart.scales.projection.projection.rotate([-160,0,0])}else{let e=2,t=-e*(5/16*this.chart.chartArea.width),i=-e*(1/8*this.chart.chartArea.height);this.chart.options.scales.projection.projectionScale=e,this.chart.options.scales.projection.projectionOffset=[t,i]}this.chart.update()}zoomChart(e,t,i){console.log("zoomChart:",e),e.options.scales.xy.projection.center=t,e.options.scales.xy.projection.scale=i,e.update()}switchToEurope2(){this.eucountryids=this.europeanCountryCodes.map(e=>{console.log("mapping "+e+" to numeric");let t=GP.whereAlpha2(e);return console.log("numeric",t),t?t.numeric:null}),this.eudata=this.worlddata.filter(e=>this.eucountryids.includes(e.feature.id)),this.eucountries=this.worldcountries.filter(e=>this.eucountryids.includes(e.id)),console.log("switching to EU view",this.eudata,this.eucountries),console.log("debug world data",this.worlddata,this.worldcountries),this.chart.data.labels=this.eucountries.map(e=>e.properties.name),this.chart.data.datasets[0].data=this.eudata,this.chart.data.outline=this.eucountries,this.chart.update()}switchToworld2(){this.chart.data.labels=this.worldcountries.map(e=>e.properties.name),this.chart.data.datasets[0].data=this.worlddata,this.chart.data.outline=this.worldcountries,this.chart.update()}switchProjection(e){console.log("switching projection:",e),this.currentProjection=e,e=="orthographic"?this.chart.options.scales.projection.projection=UP().rotate([0,0,0]):this.chart.options.scales.projection.projection=e,this.chart.update()}resetView(){this.switchProjection("equalEarth"),this.switchToWorld()}animate(){}toggleAnimation(){this.currentProjection=="orthographic"&&(this.isAnimating?(cancelAnimationFrame(this.animationFrameId),this.isAnimating=!1,console.log("Animation stopped.")):(this.isAnimating=!0,console.log("Animation started."),this.performAnimationFrame()))}performAnimationFrame(){this.isAnimating&&(this.animate(),this.animationFrameId=requestAnimationFrame(this.performAnimationFrame.bind(this)))}animate(){let e=performance.now()/1e3;this.chart.scales.projection.projection.rotate([e,0,0]),this.chart.update()}}r7=nfe;({e:[o7,a7,l7,c7,u7,h7,d7,f7],c:[g7,s7]}=Zde(r7,[aa({...rue,name:"sv-geochart"})],[[Qr,0,"datasrc"],[Qr,0,"countriessrc"],[Qr,0,"continent"],[fne,0,"countryName"]]));s7();const p7="chartjs-scatter",YP=`<div>
    chart-scatter view - should not be used
    <canvas ref="mychart"></canvas>
</div>
`,m7=[],b7={};let Vx;function ife(n){Vx||(Vx=Ti.define({name:p7,template:YP,dependencies:m7,bindables:b7})),n.register(Vx)}const rfe=Object.freeze(Object.defineProperty({__proto__:null,bindables:b7,default:YP,dependencies:m7,name:p7,register:ife,template:YP},Symbol.toStringTag,{value:"Module"}));var v7;let w7;function sfe(n,e,t,i,r,s){var o,a,l,c,u,h,d,f=Symbol.metadata||Symbol.for("Symbol.metadata"),g=Object.defineProperty,p=Object.create,m=[p(null),p(null)],v=e.length;function y(S,T,P){return function(E,A){T&&(A=E,E=n);for(var L=0;L<S.length;L++)A=S[L].apply(E,P?[A]:[]);return P?A:E}}function w(S,T,P,E){if(typeof S!="function"&&(E||S!==void 0))throw new TypeError(T+" must "+(P||"be")+" a function"+(E?"":" or undefined"));return S}function R(S,T,P,E,A,L,W,F,V,H,N){function j(Y){if(!N(Y))throw new TypeError("Attempted to access private element on non-instance")}var k=[].concat(T[0]),K=T[3],ie=!W,b=A===1,C=A===3,_=A===4,I=A===2;function $(Y,ne,de){return function(he,ce){return ne&&(ce=he,he=S),de&&de(he),M[Y].call(he,ce)}}if(!ie){var M={},B=[],z=C?"get":_||b?"set":"value";if(V?(H||b?M={get:HB(function(){return K(this)},E,"get"),set:function(Y){T[4](this,Y)}}:M[z]=K,H||HB(M[z],E,I?"":z)):H||(M=Object.getOwnPropertyDescriptor(S,E)),!H&&!V){if((a=m[+F][E])&&(a^A)!=7)throw Error("Decorating two elements with the same name ("+M[z].name+") is not supported yet");m[+F][E]=A<3?1:A}}for(var U=S,le=k.length-1;le>=0;le-=P?2:1){var ue=w(k[le],"A decorator","be",!0),be=P?k[le-1]:void 0,fe={},Z={kind:["field","accessor","method","getter","setter","class"][A],name:E,metadata:o,addInitializer:(function(Y,ne){if(Y.v)throw new TypeError("attempted to call addInitializer after decoration was finished");w(ne,"An initializer","be",!0),L.push(ne)}).bind(null,fe)};if(ie)a=ue.call(be,U,Z),fe.v=1,w(a,"class decorators","return")&&(U=a);else if(Z.static=F,Z.private=V,a=Z.access={has:V?N.bind():function(Y){return E in Y}},_||(a.get=V?I?function(Y){return j(Y),M.value}:$("get",0,j):function(Y){return Y[E]}),I||C||(a.set=V?$("set",0,j):function(Y,ne){Y[E]=ne}),U=ue.call(be,b?{get:M.get,set:M.set}:M[z],Z),fe.v=1,b){if(typeof U=="object"&&U)(a=w(U.get,"accessor.get"))&&(M.get=a),(a=w(U.set,"accessor.set"))&&(M.set=a),(a=w(U.init,"accessor.init"))&&B.unshift(a);else if(U!==void 0)throw new TypeError("accessor decorators must return an object with get, set, or init properties or undefined")}else w(U,(H?"field":"method")+" decorators","return")&&(H?B.unshift(U):M[z]=U)}return A<2&&W.push(y(B,F,1),y(L,F,0)),H||ie||(V?b?W.splice(-1,0,$("get",F),$("set",F)):W.push(I?M[z]:w.call.bind(M[z])):g(S,E,M)),U}function x(S){return g(S,f,{configurable:!0,enumerable:!0,value:o})}return s!==void 0&&(o=s[f]),o=p(o??null),u=[],h=function(S){S&&u.push(y(S))},d=function(S,T){for(var P=0;P<t.length;P++){var E=t[P],A=E[1],L=7&A;if((8&A)==S&&!L==T){var W=E[2],F=!!E[3],V=16&A;R(S?n:n.prototype,E,V,F?"#"+W:ofe(W),L,L<2?[]:S?c=c||[]:l=l||[],u,!!S,F,T,S&&F?function(H){return lfe(H)===n}:r)}}},d(8,0),d(0,0),d(8,1),d(0,1),h(l),h(c),a=u,v||x(n),{e:a,get c(){var S=[];return v&&[x(n=R(n,[e],i,n.name,5,S)),y(S,1)]}}}function ofe(n){var e=afe(n,"string");return typeof e=="symbol"?e:e+""}function afe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function HB(n,e,t){typeof e=="symbol"&&(e=(e=e.description)?"["+e+"]":"");try{Object.defineProperty(n,"name",{configurable:!0,value:t?t+" "+e:e})}catch{}return n}function lfe(n){if(Object(n)!==n)throw TypeError("right-hand side of 'in' should be an object, got "+(n!==null?typeof n:"null"));return n}let y7;class cfe extends S1{constructor(...e){super(...e),this.mychart=void 0}bind(){}attached(){const e={datasets:[{label:"First Dataset",data:[{x:20,y:30,r:15},{x:40,y:10,r:10},{x:30,y:12,r:5}]},{label:"Second Dataset",data:[{x:19,y:32,r:2},{x:41,y:12,r:5},{x:35,y:11,r:6}]}]};this.chartjs=nU(this.mychart,"bubble",e)}}v7=cfe;[y7,w7]=sfe(v7,[aa({...rfe,name:"sv-chartjs-scatter"})],[],0,void 0,S1).c;w7();const C7="table",KP='<div ref="mytable" show.bind="showtable"></div>',S7=[],_7={};let Wx;function ufe(n){Wx||(Wx=Ti.define({name:C7,template:KP,dependencies:S7,bindables:_7})),n.register(Wx)}const hfe=Object.freeze(Object.defineProperty({__proto__:null,bindables:_7,default:KP,dependencies:S7,name:C7,register:ufe,template:KP},Symbol.toStringTag,{value:"Module"}));var Tm=function(n){return n&&n.Math===Math&&n},Yi=Tm(typeof globalThis=="object"&&globalThis)||Tm(typeof window=="object"&&window)||Tm(typeof self=="object"&&self)||Tm(typeof qg=="object"&&qg)||Tm(typeof qg=="object"&&qg)||function(){return this}()||Function("return this")(),Xk={},ts=function(n){try{return!!n()}catch{return!0}},dfe=ts,la=!dfe(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),ffe=ts,M1=!ffe(function(){var n=(function(){}).bind();return typeof n!="function"||n.hasOwnProperty("prototype")}),gfe=M1,m0=Function.prototype.call,ca=gfe?m0.bind(m0):function(){return m0.apply(m0,arguments)},R7={},E7={}.propertyIsEnumerable,x7=Object.getOwnPropertyDescriptor,pfe=x7&&!E7.call({1:2},1);R7.f=pfe?function(e){var t=x7(this,e);return!!t&&t.enumerable}:E7;var A1=function(n,e){return{enumerable:!(n&1),configurable:!(n&2),writable:!(n&4),value:e}},T7=M1,M7=Function.prototype,qP=M7.call,mfe=T7&&M7.bind.bind(qP,qP),bi=T7?mfe:function(n){return function(){return qP.apply(n,arguments)}},A7=bi,bfe=A7({}.toString),vfe=A7("".slice),Rf=function(n){return vfe(bfe(n),8,-1)},wfe=bi,yfe=ts,Cfe=Rf,jx=Object,Sfe=wfe("".split),_fe=yfe(function(){return!jx("z").propertyIsEnumerable(0)})?function(n){return Cfe(n)==="String"?Sfe(n,""):jx(n)}:jx,P1=function(n){return n==null},Rfe=P1,Efe=TypeError,ny=function(n){if(Rfe(n))throw new Efe("Can't call method on "+n);return n},xfe=_fe,Tfe=ny,I1=function(n){return xfe(Tfe(n))},zx=typeof document=="object"&&document.all,Ki=typeof zx>"u"&&zx!==void 0?function(n){return typeof n=="function"||n===zx}:function(n){return typeof n=="function"},Mfe=Ki,vl=function(n){return typeof n=="object"?n!==null:Mfe(n)},Ux=Yi,Afe=Ki,Pfe=function(n){return Afe(n)?n:void 0},Qp=function(n,e){return arguments.length<2?Pfe(Ux[n]):Ux[n]&&Ux[n][e]},Ife=bi,O1=Ife({}.isPrototypeOf),Ofe=Yi,$B=Ofe.navigator,FB=$B&&$B.userAgent,k1=FB?String(FB):"",P7=Yi,Gx=k1,BB=P7.process,VB=P7.Deno,WB=BB&&BB.versions||VB&&VB.version,jB=WB&&WB.v8,Uo,j_;jB&&(Uo=jB.split("."),j_=Uo[0]>0&&Uo[0]<4?1:+(Uo[0]+Uo[1]));!j_&&Gx&&(Uo=Gx.match(/Edge\/(\d+)/),(!Uo||Uo[1]>=74)&&(Uo=Gx.match(/Chrome\/(\d+)/),Uo&&(j_=+Uo[1])));var kfe=j_,zB=kfe,Dfe=ts,Lfe=Yi,Nfe=Lfe.String,Zk=!!Object.getOwnPropertySymbols&&!Dfe(function(){var n=Symbol("symbol detection");return!Nfe(n)||!(Object(n)instanceof Symbol)||!Symbol.sham&&zB&&zB<41}),Hfe=Zk,I7=Hfe&&!Symbol.sham&&typeof Symbol.iterator=="symbol",$fe=Qp,Ffe=Ki,Bfe=O1,Vfe=I7,Wfe=Object,Qk=Vfe?function(n){return typeof n=="symbol"}:function(n){var e=$fe("Symbol");return Ffe(e)&&Bfe(e.prototype,Wfe(n))},jfe=String,D1=function(n){try{return jfe(n)}catch{return"Object"}},zfe=Ki,Ufe=D1,Gfe=TypeError,iy=function(n){if(zfe(n))return n;throw new Gfe(Ufe(n)+" is not a function")},Yfe=iy,Kfe=P1,L1=function(n,e){var t=n[e];return Kfe(t)?void 0:Yfe(t)},Yx=ca,Kx=Ki,qx=vl,qfe=TypeError,Xfe=function(n,e){var t,i;if(e==="string"&&Kx(t=n.toString)&&!qx(i=Yx(t,n))||Kx(t=n.valueOf)&&!qx(i=Yx(t,n))||e!=="string"&&Kx(t=n.toString)&&!qx(i=Yx(t,n)))return i;throw new qfe("Can't convert object to primitive value")},O7={exports:{}},UB=Yi,Zfe=Object.defineProperty,Jk=function(n,e){try{Zfe(UB,n,{value:e,configurable:!0,writable:!0})}catch{UB[n]=e}return e},Qfe=Yi,Jfe=Jk,GB="__core-js_shared__",YB=O7.exports=Qfe[GB]||Jfe(GB,{});(YB.versions||(YB.versions=[])).push({version:"3.39.0",mode:"global",copyright:"© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.39.0/LICENSE",source:"https://github.com/zloirock/core-js"});var eD=O7.exports,KB=eD,k7=function(n,e){return KB[n]||(KB[n]=e||{})},ege=ny,tge=Object,ry=function(n){return tge(ege(n))},nge=bi,ige=ry,rge=nge({}.hasOwnProperty),wl=Object.hasOwn||function(e,t){return rge(ige(e),t)},sge=bi,oge=0,age=Math.random(),lge=sge(1 .toString),D7=function(n){return"Symbol("+(n===void 0?"":n)+")_"+lge(++oge+age,36)},cge=Yi,uge=k7,qB=wl,hge=D7,dge=Zk,fge=I7,Xg=cge.Symbol,Xx=uge("wks"),gge=fge?Xg.for||Xg:Xg&&Xg.withoutSetter||hge,ah=function(n){return qB(Xx,n)||(Xx[n]=dge&&qB(Xg,n)?Xg[n]:gge("Symbol."+n)),Xx[n]},pge=ca,XB=vl,ZB=Qk,mge=L1,bge=Xfe,vge=ah,wge=TypeError,yge=vge("toPrimitive"),Cge=function(n,e){if(!XB(n)||ZB(n))return n;var t=mge(n,yge),i;if(t){if(e===void 0&&(e="default"),i=pge(t,n,e),!XB(i)||ZB(i))return i;throw new wge("Can't convert object to primitive value")}return e===void 0&&(e="number"),bge(n,e)},Sge=Cge,_ge=Qk,L7=function(n){var e=Sge(n,"string");return _ge(e)?e:e+""},Rge=Yi,QB=vl,XP=Rge.document,Ege=QB(XP)&&QB(XP.createElement),tD=function(n){return Ege?XP.createElement(n):{}},xge=la,Tge=ts,Mge=tD,N7=!xge&&!Tge(function(){return Object.defineProperty(Mge("div"),"a",{get:function(){return 7}}).a!==7}),Age=la,Pge=ca,Ige=R7,Oge=A1,kge=I1,Dge=L7,Lge=wl,Nge=N7,JB=Object.getOwnPropertyDescriptor;Xk.f=Age?JB:function(e,t){if(e=kge(e),t=Dge(t),Nge)try{return JB(e,t)}catch{}if(Lge(e,t))return Oge(!Pge(Ige.f,e,t),e[t])};var lh={},Hge=la,$ge=ts,H7=Hge&&$ge(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),Fge=vl,Bge=String,Vge=TypeError,$c=function(n){if(Fge(n))return n;throw new Vge(Bge(n)+" is not an object")},Wge=la,jge=N7,zge=H7,b0=$c,eV=L7,Uge=TypeError,Zx=Object.defineProperty,Gge=Object.getOwnPropertyDescriptor,Qx="enumerable",Jx="configurable",eT="writable";lh.f=Wge?zge?function(e,t,i){if(b0(e),t=eV(t),b0(i),typeof e=="function"&&t==="prototype"&&"value"in i&&eT in i&&!i[eT]){var r=Gge(e,t);r&&r[eT]&&(e[t]=i.value,i={configurable:Jx in i?i[Jx]:r[Jx],enumerable:Qx in i?i[Qx]:r[Qx],writable:!1})}return Zx(e,t,i)}:Zx:function(e,t,i){if(b0(e),t=eV(t),b0(i),jge)try{return Zx(e,t,i)}catch{}if("get"in i||"set"in i)throw new Uge("Accessors not supported");return"value"in i&&(e[t]=i.value),e};var Yge=la,Kge=lh,qge=A1,sy=Yge?function(n,e,t){return Kge.f(n,e,qge(1,t))}:function(n,e,t){return n[e]=t,n},$7={exports:{}},ZP=la,Xge=wl,F7=Function.prototype,Zge=ZP&&Object.getOwnPropertyDescriptor,nD=Xge(F7,"name"),Qge=nD&&(function(){}).name==="something",Jge=nD&&(!ZP||ZP&&Zge(F7,"name").configurable),epe={EXISTS:nD,PROPER:Qge,CONFIGURABLE:Jge},tpe=bi,npe=Ki,QP=eD,ipe=tpe(Function.toString);npe(QP.inspectSource)||(QP.inspectSource=function(n){return ipe(n)});var rpe=QP.inspectSource,spe=Yi,ope=Ki,tV=spe.WeakMap,ape=ope(tV)&&/native code/.test(String(tV)),lpe=k7,cpe=D7,nV=lpe("keys"),B7=function(n){return nV[n]||(nV[n]=cpe(n))},iD={},upe=ape,V7=Yi,hpe=vl,dpe=sy,tT=wl,nT=eD,fpe=B7,gpe=iD,iV="Object already initialized",JP=V7.TypeError,ppe=V7.WeakMap,z_,mw,U_,mpe=function(n){return U_(n)?mw(n):z_(n,{})},bpe=function(n){return function(e){var t;if(!hpe(e)||(t=mw(e)).type!==n)throw new JP("Incompatible receiver, "+n+" required");return t}};if(upe||nT.state){var fa=nT.state||(nT.state=new ppe);fa.get=fa.get,fa.has=fa.has,fa.set=fa.set,z_=function(n,e){if(fa.has(n))throw new JP(iV);return e.facade=n,fa.set(n,e),e},mw=function(n){return fa.get(n)||{}},U_=function(n){return fa.has(n)}}else{var jf=fpe("state");gpe[jf]=!0,z_=function(n,e){if(tT(n,jf))throw new JP(iV);return e.facade=n,dpe(n,jf,e),e},mw=function(n){return tT(n,jf)?n[jf]:{}},U_=function(n){return tT(n,jf)}}var vpe={set:z_,get:mw,has:U_,enforce:mpe,getterFor:bpe},rD=bi,wpe=ts,ype=Ki,v0=wl,eI=la,Cpe=epe.CONFIGURABLE,Spe=rpe,W7=vpe,_pe=W7.enforce,Rpe=W7.get,rV=String,_S=Object.defineProperty,Epe=rD("".slice),xpe=rD("".replace),Tpe=rD([].join),Mpe=eI&&!wpe(function(){return _S(function(){},"length",{value:8}).length!==8}),Ape=String(String).split("String"),Ppe=$7.exports=function(n,e,t){Epe(rV(e),0,7)==="Symbol("&&(e="["+xpe(rV(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),t&&t.getter&&(e="get "+e),t&&t.setter&&(e="set "+e),(!v0(n,"name")||Cpe&&n.name!==e)&&(eI?_S(n,"name",{value:e,configurable:!0}):n.name=e),Mpe&&t&&v0(t,"arity")&&n.length!==t.arity&&_S(n,"length",{value:t.arity});try{t&&v0(t,"constructor")&&t.constructor?eI&&_S(n,"prototype",{writable:!1}):n.prototype&&(n.prototype=void 0)}catch{}var i=_pe(n);return v0(i,"source")||(i.source=Tpe(Ape,typeof e=="string"?e:"")),n};Function.prototype.toString=Ppe(function(){return ype(this)&&Rpe(this).source||Spe(this)},"toString");var Ipe=$7.exports,Ope=Ki,kpe=lh,Dpe=Ipe,Lpe=Jk,Npe=function(n,e,t,i){i||(i={});var r=i.enumerable,s=i.name!==void 0?i.name:e;if(Ope(t)&&Dpe(t,s,i),i.global)r?n[e]=t:Lpe(e,t);else{try{i.unsafe?n[e]&&(r=!0):delete n[e]}catch{}r?n[e]=t:kpe.f(n,e,{value:t,enumerable:!1,configurable:!i.nonConfigurable,writable:!i.nonWritable})}return n},j7={},Hpe=Math.ceil,$pe=Math.floor,Fpe=Math.trunc||function(e){var t=+e;return(t>0?$pe:Hpe)(t)},Bpe=Fpe,oy=function(n){var e=+n;return e!==e||e===0?0:Bpe(e)},Vpe=oy,Wpe=Math.max,jpe=Math.min,zpe=function(n,e){var t=Vpe(n);return t<0?Wpe(t+e,0):jpe(t,e)},Upe=oy,Gpe=Math.min,Ype=function(n){var e=Upe(n);return e>0?Gpe(e,9007199254740991):0},Kpe=Ype,ay=function(n){return Kpe(n.length)},qpe=I1,Xpe=zpe,Zpe=ay,sV=function(n){return function(e,t,i){var r=qpe(e),s=Zpe(r);if(s===0)return!n&&-1;var o=Xpe(i,s),a;if(n&&t!==t){for(;s>o;)if(a=r[o++],a!==a)return!0}else for(;s>o;o++)if((n||o in r)&&r[o]===t)return n||o||0;return!n&&-1}},Qpe={includes:sV(!0),indexOf:sV(!1)},Jpe=bi,iT=wl,eme=I1,tme=Qpe.indexOf,nme=iD,oV=Jpe([].push),z7=function(n,e){var t=eme(n),i=0,r=[],s;for(s in t)!iT(nme,s)&&iT(t,s)&&oV(r,s);for(;e.length>i;)iT(t,s=e[i++])&&(~tme(r,s)||oV(r,s));return r},sD=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],ime=z7,rme=sD,sme=rme.concat("length","prototype");j7.f=Object.getOwnPropertyNames||function(e){return ime(e,sme)};var U7={};U7.f=Object.getOwnPropertySymbols;var ome=Qp,ame=bi,lme=j7,cme=U7,ume=$c,hme=ame([].concat),dme=ome("Reflect","ownKeys")||function(e){var t=lme.f(ume(e)),i=cme.f;return i?hme(t,i(e)):t},aV=wl,fme=dme,gme=Xk,pme=lh,G7=function(n,e,t){for(var i=fme(e),r=pme.f,s=gme.f,o=0;o<i.length;o++){var a=i[o];!aV(n,a)&&!(t&&aV(t,a))&&r(n,a,s(e,a))}},mme=ts,bme=Ki,vme=/#|\.prototype\./,ly=function(n,e){var t=yme[wme(n)];return t===Sme?!0:t===Cme?!1:bme(e)?mme(e):!!e},wme=ly.normalize=function(n){return String(n).replace(vme,".").toLowerCase()},yme=ly.data={},Cme=ly.NATIVE="N",Sme=ly.POLYFILL="P",_me=ly,w0=Yi,Rme=Xk.f,Eme=sy,xme=Npe,Tme=Jk,Mme=G7,Ame=_me,qi=function(n,e){var t=n.target,i=n.global,r=n.stat,s,o,a,l,c,u;if(i?o=w0:r?o=w0[t]||Tme(t,{}):o=w0[t]&&w0[t].prototype,o)for(a in e){if(c=e[a],n.dontCallGetSet?(u=Rme(o,a),l=u&&u.value):l=o[a],s=Ame(i?a:t+(r?".":"#")+a,n.forced),!s&&l!==void 0){if(typeof c==typeof l)continue;Mme(c,l)}(n.sham||l&&l.sham)&&Eme(c,"sham",!0),xme(o,a,c,n)}},Pme=M1,Y7=Function.prototype,lV=Y7.apply,cV=Y7.call,N1=typeof Reflect=="object"&&Reflect.apply||(Pme?cV.bind(lV):function(){return cV.apply(lV,arguments)}),Ime=bi,Ome=iy,K7=function(n,e,t){try{return Ime(Ome(Object.getOwnPropertyDescriptor(n,e)[t]))}catch{}},kme=vl,Dme=function(n){return kme(n)||n===null},Lme=Dme,Nme=String,Hme=TypeError,$me=function(n){if(Lme(n))return n;throw new Hme("Can't set "+Nme(n)+" as a prototype")},Fme=K7,Bme=vl,Vme=ny,Wme=$me,q7=Object.setPrototypeOf||("__proto__"in{}?function(){var n=!1,e={},t;try{t=Fme(Object.prototype,"__proto__","set"),t(e,[]),n=e instanceof Array}catch{}return function(r,s){return Vme(r),Wme(s),Bme(r)&&(n?t(r,s):r.__proto__=s),r}}():void 0),jme=lh.f,zme=function(n,e,t){t in n||jme(n,t,{configurable:!0,get:function(){return e[t]},set:function(i){e[t]=i}})},Ume=Ki,Gme=vl,uV=q7,Yme=function(n,e,t){var i,r;return uV&&Ume(i=e.constructor)&&i!==t&&Gme(r=i.prototype)&&r!==t.prototype&&uV(n,r),n},Kme=ah,qme=Kme("toStringTag"),X7={};X7[qme]="z";var Xme=String(X7)==="[object z]",Zme=Xme,Qme=Ki,RS=Rf,Jme=ah,ebe=Jme("toStringTag"),tbe=Object,nbe=RS(function(){return arguments}())==="Arguments",ibe=function(n,e){try{return n[e]}catch{}},Z7=Zme?RS:function(n){var e,t,i;return n===void 0?"Undefined":n===null?"Null":typeof(t=ibe(e=tbe(n),ebe))=="string"?t:nbe?RS(e):(i=RS(e))==="Object"&&Qme(e.callee)?"Arguments":i},rbe=Z7,sbe=String,H1=function(n){if(rbe(n)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return sbe(n)},obe=H1,abe=function(n,e){return n===void 0?arguments.length<2?"":e:obe(n)},lbe=vl,cbe=sy,ube=function(n,e){lbe(e)&&"cause"in e&&cbe(n,"cause",e.cause)},hbe=bi,Q7=Error,dbe=hbe("".replace),fbe=function(n){return String(new Q7(n).stack)}("zxcasd"),J7=/\n\s*at [^:]*:[^\n]*/,gbe=J7.test(fbe),pbe=function(n,e){if(gbe&&typeof n=="string"&&!Q7.prepareStackTrace)for(;e--;)n=dbe(n,J7,"");return n},mbe=ts,bbe=A1,vbe=!mbe(function(){var n=new Error("a");return"stack"in n?(Object.defineProperty(n,"stack",bbe(1,7)),n.stack!==7):!0}),wbe=sy,ybe=pbe,Cbe=vbe,hV=Error.captureStackTrace,Sbe=function(n,e,t,i){Cbe&&(hV?hV(n,e):wbe(n,"stack",ybe(t,i)))},dV=Qp,_be=wl,fV=sy,Rbe=O1,gV=q7,pV=G7,mV=zme,Ebe=Yme,xbe=abe,Tbe=ube,Mbe=Sbe,Abe=la,Pbe=function(n,e,t,i){var r="stackTraceLimit",s=i?2:1,o=n.split("."),a=o[o.length-1],l=dV.apply(null,o);if(l){var c=l.prototype;if(_be(c,"cause")&&delete c.cause,!t)return l;var u=dV("Error"),h=e(function(d,f){var g=xbe(i?f:d,void 0),p=i?new l(d):new l;return g!==void 0&&fV(p,"message",g),Mbe(p,h,p.stack,2),this&&Rbe(c,this)&&Ebe(p,this,h),arguments.length>s&&Tbe(p,arguments[s]),p});h.prototype=c,a!=="Error"?gV?gV(h,u):pV(h,u,{name:!0}):Abe&&r in l&&(mV(h,l,r),mV(h,l,"prepareStackTrace")),pV(h,l);try{c.name!==a&&fV(c,"name",a),c.constructor=h}catch{}return h}},eG=qi,Ibe=Yi,yl=N1,tG=Pbe,tI="WebAssembly",bV=Ibe[tI],G_=new Error("e",{cause:7}).cause!==7,Ef=function(n,e){var t={};t[n]=tG(n,e,G_),eG({global:!0,constructor:!0,arity:1,forced:G_},t)},oD=function(n,e){if(bV&&bV[n]){var t={};t[n]=tG(tI+"."+n,e,G_),eG({target:tI,stat:!0,constructor:!0,arity:1,forced:G_},t)}};Ef("Error",function(n){return function(t){return yl(n,this,arguments)}});Ef("EvalError",function(n){return function(t){return yl(n,this,arguments)}});Ef("RangeError",function(n){return function(t){return yl(n,this,arguments)}});Ef("ReferenceError",function(n){return function(t){return yl(n,this,arguments)}});Ef("SyntaxError",function(n){return function(t){return yl(n,this,arguments)}});Ef("TypeError",function(n){return function(t){return yl(n,this,arguments)}});Ef("URIError",function(n){return function(t){return yl(n,this,arguments)}});oD("CompileError",function(n){return function(t){return yl(n,this,arguments)}});oD("LinkError",function(n){return function(t){return yl(n,this,arguments)}});oD("RuntimeError",function(n){return function(t){return yl(n,this,arguments)}});var Obe=Rf,nG=Array.isArray||function(e){return Obe(e)==="Array"},kbe=la,Dbe=nG,Lbe=TypeError,Nbe=Object.getOwnPropertyDescriptor,Hbe=kbe&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(n){return n instanceof TypeError}}(),iG=Hbe?function(n,e){if(Dbe(n)&&!Nbe(n,"length").writable)throw new Lbe("Cannot set read only .length");return n.length=e}:function(n,e){return n.length=e},$be=TypeError,Fbe=9007199254740991,rG=function(n){if(n>Fbe)throw $be("Maximum allowed index exceeded");return n},Bbe=qi,Vbe=ry,Wbe=ay,jbe=iG,zbe=rG,Ube=ts,Gbe=Ube(function(){return[].push.call({length:4294967296},1)!==4294967297}),Ybe=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(n){return n instanceof TypeError}},Kbe=Gbe||!Ybe();Bbe({target:"Array",proto:!0,arity:1,forced:Kbe},{push:function(e){var t=Vbe(this),i=Wbe(t),r=arguments.length;zbe(i+r);for(var s=0;s<r;s++)t[i]=arguments[s],i++;return jbe(t,i),i}});var rT=bi,y0=Set.prototype,Cl={Set,add:rT(y0.add),has:rT(y0.has),remove:rT(y0.delete),proto:y0},qbe=Cl.has,xf=function(n){return qbe(n),n},Xbe=ca,Tf=function(n,e,t){for(var i=t?n:n.iterator,r=n.next,s,o;!(s=Xbe(r,i)).done;)if(o=e(s.value),o!==void 0)return o},sG=bi,Zbe=Tf,oG=Cl,Qbe=oG.Set,aG=oG.proto,Jbe=sG(aG.forEach),lG=sG(aG.keys),eve=lG(new Qbe).next,cy=function(n,e,t){return t?Zbe({iterator:lG(n),next:eve},e):Jbe(n,e)},cG=Cl,tve=cy,nve=cG.Set,ive=cG.add,aD=function(n){var e=new nve;return tve(n,function(t){ive(e,t)}),e},rve=K7,sve=Cl,uy=rve(sve.proto,"size","get")||function(n){return n.size},ove=function(n){return{iterator:n,next:n.next,done:!1}},vV=iy,uG=$c,wV=ca,ave=oy,lve=ove,yV="Invalid size",cve=RangeError,uve=TypeError,hve=Math.max,hG=function(n,e){this.set=n,this.size=hve(e,0),this.has=vV(n.has),this.keys=vV(n.keys)};hG.prototype={getIterator:function(){return lve(uG(wV(this.keys,this.set)))},includes:function(n){return wV(this.has,this.set,n)}};var Mf=function(n){uG(n);var e=+n.size;if(e!==e)throw new uve(yV);var t=ave(e);if(t<0)throw new cve(yV);return new hG(n,t)},dve=xf,dG=Cl,fve=aD,gve=uy,pve=Mf,mve=cy,bve=Tf,vve=dG.has,CV=dG.remove,wve=function(e){var t=dve(this),i=pve(e),r=fve(t);return gve(t)<=i.size?mve(t,function(s){i.includes(s)&&CV(r,s)}):bve(i.getIterator(),function(s){vve(t,s)&&CV(r,s)}),r},yve=Qp,SV=function(n){return{size:n,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}},Af=function(n){var e=yve("Set");try{new e()[n](SV(0));try{return new e()[n](SV(-1)),!1}catch{return!0}}catch{return!1}},Cve=qi,Sve=wve,_ve=Af;Cve({target:"Set",proto:!0,real:!0,forced:!_ve("difference")},{difference:Sve});var Rve=xf,lD=Cl,Eve=uy,xve=Mf,Tve=cy,Mve=Tf,Ave=lD.Set,_V=lD.add,Pve=lD.has,Ive=function(e){var t=Rve(this),i=xve(e),r=new Ave;return Eve(t)>i.size?Mve(i.getIterator(),function(s){Pve(t,s)&&_V(r,s)}):Tve(t,function(s){i.includes(s)&&_V(r,s)}),r},Ove=qi,kve=ts,Dve=Ive,Lve=Af,Nve=!Lve("intersection")||kve(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});Ove({target:"Set",proto:!0,real:!0,forced:Nve},{intersection:Dve});var Hve=ca,RV=$c,$ve=L1,cD=function(n,e,t){var i,r;RV(n);try{if(i=$ve(n,"return"),!i){if(e==="throw")throw t;return t}i=Hve(i,n)}catch(s){r=!0,i=s}if(e==="throw")throw t;if(r)throw i;return RV(i),t},Fve=xf,Bve=Cl.has,Vve=uy,Wve=Mf,jve=cy,zve=Tf,Uve=cD,Gve=function(e){var t=Fve(this),i=Wve(e);if(Vve(t)<=i.size)return jve(t,function(s){if(i.includes(s))return!1},!0)!==!1;var r=i.getIterator();return zve(r,function(s){if(Bve(t,s))return Uve(r,"normal",!1)})!==!1},Yve=qi,Kve=Gve,qve=Af;Yve({target:"Set",proto:!0,real:!0,forced:!qve("isDisjointFrom")},{isDisjointFrom:Kve});var Xve=xf,Zve=uy,Qve=cy,Jve=Mf,ewe=function(e){var t=Xve(this),i=Jve(e);return Zve(t)>i.size?!1:Qve(t,function(r){if(!i.includes(r))return!1},!0)!==!1},twe=qi,nwe=ewe,iwe=Af;twe({target:"Set",proto:!0,real:!0,forced:!iwe("isSubsetOf")},{isSubsetOf:nwe});var rwe=xf,swe=Cl.has,owe=uy,awe=Mf,lwe=Tf,cwe=cD,uwe=function(e){var t=rwe(this),i=awe(e);if(owe(t)<i.size)return!1;var r=i.getIterator();return lwe(r,function(s){if(!swe(t,s))return cwe(r,"normal",!1)})!==!1},hwe=qi,dwe=uwe,fwe=Af;hwe({target:"Set",proto:!0,real:!0,forced:!fwe("isSupersetOf")},{isSupersetOf:dwe});var gwe=xf,uD=Cl,pwe=aD,mwe=Mf,bwe=Tf,vwe=uD.add,wwe=uD.has,ywe=uD.remove,Cwe=function(e){var t=gwe(this),i=mwe(e).getIterator(),r=pwe(t);return bwe(i,function(s){wwe(t,s)?ywe(r,s):vwe(r,s)}),r},Swe=qi,_we=Cwe,Rwe=Af;Swe({target:"Set",proto:!0,real:!0,forced:!Rwe("symmetricDifference")},{symmetricDifference:_we});var Ewe=xf,xwe=Cl.add,Twe=aD,Mwe=Mf,Awe=Tf,Pwe=function(e){var t=Ewe(this),i=Mwe(e).getIterator(),r=Twe(t);return Awe(i,function(s){xwe(r,s)}),r},Iwe=qi,Owe=Pwe,kwe=Af;Iwe({target:"Set",proto:!0,real:!0,forced:!kwe("union")},{union:Owe});var Dwe=Rf,Lwe=bi,Nwe=function(n){if(Dwe(n)==="Function")return Lwe(n)},EV=Nwe,Hwe=iy,$we=M1,Fwe=EV(EV.bind),fG=function(n,e){return Hwe(n),e===void 0?n:$we?Fwe(n,e):function(){return n.apply(e,arguments)}},Bwe=Qp,gG=Bwe("document","documentElement"),Vwe=bi,hD=Vwe([].slice),Wwe=TypeError,pG=function(n,e){if(n<e)throw new Wwe("Not enough arguments");return n},jwe=k1,zwe=/(?:ipad|iphone|ipod).*applewebkit/i.test(jwe),Mm=Yi,Uwe=k1,Gwe=Rf,C0=function(n){return Uwe.slice(0,n.length)===n},mG=function(){return C0("Bun/")?"BUN":C0("Cloudflare-Workers")?"CLOUDFLARE":C0("Deno/")?"DENO":C0("Node.js/")?"NODE":Mm.Bun&&typeof Bun.version=="string"?"BUN":Mm.Deno&&typeof Deno.version=="object"?"DENO":Gwe(Mm.process)==="process"?"NODE":Mm.window&&Mm.document?"BROWSER":"REST"}(),Ywe=mG,Kwe=Ywe==="NODE",Ss=Yi,qwe=N1,Xwe=fG,xV=Ki,Zwe=wl,bG=ts,TV=gG,Qwe=hD,MV=tD,Jwe=pG,eye=zwe,tye=Kwe,nI=Ss.setImmediate,iI=Ss.clearImmediate,nye=Ss.process,sT=Ss.Dispatch,iye=Ss.Function,AV=Ss.MessageChannel,rye=Ss.String,oT=0,Ev={},PV="onreadystatechange",bw,Sh,aT,lT;bG(function(){bw=Ss.location});var dD=function(n){if(Zwe(Ev,n)){var e=Ev[n];delete Ev[n],e()}},cT=function(n){return function(){dD(n)}},IV=function(n){dD(n.data)},OV=function(n){Ss.postMessage(rye(n),bw.protocol+"//"+bw.host)};(!nI||!iI)&&(nI=function(e){Jwe(arguments.length,1);var t=xV(e)?e:iye(e),i=Qwe(arguments,1);return Ev[++oT]=function(){qwe(t,void 0,i)},Sh(oT),oT},iI=function(e){delete Ev[e]},tye?Sh=function(n){nye.nextTick(cT(n))}:sT&&sT.now?Sh=function(n){sT.now(cT(n))}:AV&&!eye?(aT=new AV,lT=aT.port2,aT.port1.onmessage=IV,Sh=Xwe(lT.postMessage,lT)):Ss.addEventListener&&xV(Ss.postMessage)&&!Ss.importScripts&&bw&&bw.protocol!=="file:"&&!bG(OV)?(Sh=OV,Ss.addEventListener("message",IV,!1)):PV in MV("script")?Sh=function(n){TV.appendChild(MV("script"))[PV]=function(){TV.removeChild(this),dD(n)}}:Sh=function(n){setTimeout(cT(n),0)});var vG={set:nI,clear:iI},sye=qi,oye=Yi,kV=vG.clear;sye({global:!0,bind:!0,enumerable:!0,forced:oye.clearImmediate!==kV},{clearImmediate:kV});var wG=Yi,aye=N1,lye=Ki,cye=mG,uye=k1,hye=hD,dye=pG,fye=wG.Function,gye=/MSIE .\./.test(uye)||cye==="BUN"&&function(){var n=wG.Bun.version.split(".");return n.length<3||n[0]==="0"&&(n[1]<3||n[1]==="3"&&n[2]==="0")}(),pye=function(n,e){var t=e?2:1;return gye?function(i,r){var s=dye(arguments.length,1)>t,o=lye(i)?i:fye(i),a=s?hye(arguments,t):[],l=s?function(){aye(o,this,a)}:o;return e?n(l,r):n(l)}:n},mye=qi,yG=Yi,DV=vG.set,bye=pye,LV=yG.setImmediate?bye(DV,!1):DV;mye({global:!0,bind:!0,enumerable:!0,forced:yG.setImmediate!==LV},{setImmediate:LV});/*! @license DOMPurify 2.5.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.5.7/LICENSE */function bu(n){"@babel/helpers - typeof";return bu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bu(n)}function rI(n,e){return rI=Object.setPrototypeOf||function(i,r){return i.__proto__=r,i},rI(n,e)}function vye(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ES(n,e,t){return vye()?ES=Reflect.construct:ES=function(r,s,o){var a=[null];a.push.apply(a,s);var l=Function.bind.apply(r,a),c=new l;return o&&rI(c,o.prototype),c},ES.apply(null,arguments)}function Lo(n){return wye(n)||yye(n)||Cye(n)||Sye()}function wye(n){if(Array.isArray(n))return sI(n)}function yye(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Cye(n,e){if(n){if(typeof n=="string")return sI(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return sI(n,e)}}function sI(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function Sye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var _ye=Object.hasOwnProperty,NV=Object.setPrototypeOf,Rye=Object.isFrozen,Eye=Object.getPrototypeOf,xye=Object.getOwnPropertyDescriptor,Dr=Object.freeze,lo=Object.seal,Tye=Object.create,CG=typeof Reflect<"u"&&Reflect,Y_=CG.apply,oI=CG.construct;Y_||(Y_=function(e,t,i){return e.apply(t,i)});Dr||(Dr=function(e){return e});lo||(lo=function(e){return e});oI||(oI=function(e,t){return ES(e,Lo(t))});var Mye=co(Array.prototype.forEach),HV=co(Array.prototype.pop),Am=co(Array.prototype.push),xS=co(String.prototype.toLowerCase),uT=co(String.prototype.toString),$V=co(String.prototype.match),Ro=co(String.prototype.replace),Aye=co(String.prototype.indexOf),Pye=co(String.prototype.trim),zi=co(RegExp.prototype.test),hT=Iye(TypeError);function co(n){return function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return Y_(n,e,i)}}function Iye(n){return function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return oI(n,t)}}function gt(n,e,t){var i;t=(i=t)!==null&&i!==void 0?i:xS,NV&&NV(n,null);for(var r=e.length;r--;){var s=e[r];if(typeof s=="string"){var o=t(s);o!==s&&(Rye(e)||(e[r]=o),s=o)}n[s]=!0}return n}function _h(n){var e=Tye(null),t;for(t in n)Y_(_ye,n,[t])===!0&&(e[t]=n[t]);return e}function S0(n,e){for(;n!==null;){var t=xye(n,e);if(t){if(t.get)return co(t.get);if(typeof t.value=="function")return co(t.value)}n=Eye(n)}function i(r){return console.warn("fallback value for",r),null}return i}var FV=Dr(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),dT=Dr(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),fT=Dr(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Oye=Dr(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),gT=Dr(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),kye=Dr(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),BV=Dr(["#text"]),VV=Dr(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),pT=Dr(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),WV=Dr(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),_0=Dr(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Dye=lo(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Lye=lo(/<%[\w\W]*|[\w\W]*%>/gm),Nye=lo(/\${[\w\W]*}/gm),Hye=lo(/^data-[\-\w.\u00B7-\uFFFF]/),$ye=lo(/^aria-[\-\w]+$/),Fye=lo(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Bye=lo(/^(?:\w+script|data):/i),Vye=lo(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Wye=lo(/^html$/i),jye=lo(/^[a-z][.\w]*(-[.\w]+)+$/i),zye=function(){return typeof window>"u"?null:window},Uye=function(e,t){if(bu(e)!=="object"||typeof e.createPolicy!="function")return null;var i=null,r="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(r)&&(i=t.currentScript.getAttribute(r));var s="dompurify"+(i?"#"+i:"");try{return e.createPolicy(s,{createHTML:function(a){return a},createScriptURL:function(a){return a}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}};function SG(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:zye(),e=function(ee){return SG(ee)};if(e.version="2.5.7",e.removed=[],!n||!n.document||n.document.nodeType!==9)return e.isSupported=!1,e;var t=n.document,i=n.document,r=n.DocumentFragment,s=n.HTMLTemplateElement,o=n.Node,a=n.Element,l=n.NodeFilter,c=n.NamedNodeMap,u=c===void 0?n.NamedNodeMap||n.MozNamedAttrMap:c,h=n.HTMLFormElement,d=n.DOMParser,f=n.trustedTypes,g=a.prototype,p=S0(g,"cloneNode"),m=S0(g,"nextSibling"),v=S0(g,"childNodes"),y=S0(g,"parentNode");if(typeof s=="function"){var w=i.createElement("template");w.content&&w.content.ownerDocument&&(i=w.content.ownerDocument)}var R=Uye(f,t),x=R?R.createHTML(""):"",S=i,T=S.implementation,P=S.createNodeIterator,E=S.createDocumentFragment,A=S.getElementsByTagName,L=t.importNode,W={};try{W=_h(i).documentMode?i.documentMode:{}}catch{}var F={};e.isSupported=typeof y=="function"&&T&&T.createHTMLDocument!==void 0&&W!==9;var V=Dye,H=Lye,N=Nye,j=Hye,k=$ye,K=Bye,ie=Vye,b=jye,C=Fye,_=null,I=gt({},[].concat(Lo(FV),Lo(dT),Lo(fT),Lo(gT),Lo(BV))),$=null,M=gt({},[].concat(Lo(VV),Lo(pT),Lo(WV),Lo(_0))),B=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),z=null,U=null,le=!0,ue=!0,be=!1,fe=!0,Z=!1,Y=!0,ne=!1,de=!1,he=!1,ce=!1,D=!1,O=!1,G=!0,te=!1,X="user-content-",re=!0,J=!1,Q={},se=null,oe=gt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),ae=null,we=gt({},["audio","video","img","source","image","track"]),xe=null,Fe=gt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ke="http://www.w3.org/1998/Math/MathML",ht="http://www.w3.org/2000/svg",tt="http://www.w3.org/1999/xhtml",qe=tt,Tt=!1,Nn=null,Nf=gt({},[Ke,ht,tt],uT),yo,gm=["application/xhtml+xml","text/html"],As="text/html",Mn,vi=null,Wi=i.createElement("form"),yn=function(ee){return ee instanceof RegExp||ee instanceof Function},VE=function(ee){vi&&vi===ee||((!ee||bu(ee)!=="object")&&(ee={}),ee=_h(ee),yo=gm.indexOf(ee.PARSER_MEDIA_TYPE)===-1?yo=As:yo=ee.PARSER_MEDIA_TYPE,Mn=yo==="application/xhtml+xml"?uT:xS,_="ALLOWED_TAGS"in ee?gt({},ee.ALLOWED_TAGS,Mn):I,$="ALLOWED_ATTR"in ee?gt({},ee.ALLOWED_ATTR,Mn):M,Nn="ALLOWED_NAMESPACES"in ee?gt({},ee.ALLOWED_NAMESPACES,uT):Nf,xe="ADD_URI_SAFE_ATTR"in ee?gt(_h(Fe),ee.ADD_URI_SAFE_ATTR,Mn):Fe,ae="ADD_DATA_URI_TAGS"in ee?gt(_h(we),ee.ADD_DATA_URI_TAGS,Mn):we,se="FORBID_CONTENTS"in ee?gt({},ee.FORBID_CONTENTS,Mn):oe,z="FORBID_TAGS"in ee?gt({},ee.FORBID_TAGS,Mn):{},U="FORBID_ATTR"in ee?gt({},ee.FORBID_ATTR,Mn):{},Q="USE_PROFILES"in ee?ee.USE_PROFILES:!1,le=ee.ALLOW_ARIA_ATTR!==!1,ue=ee.ALLOW_DATA_ATTR!==!1,be=ee.ALLOW_UNKNOWN_PROTOCOLS||!1,fe=ee.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Z=ee.SAFE_FOR_TEMPLATES||!1,Y=ee.SAFE_FOR_XML!==!1,ne=ee.WHOLE_DOCUMENT||!1,ce=ee.RETURN_DOM||!1,D=ee.RETURN_DOM_FRAGMENT||!1,O=ee.RETURN_TRUSTED_TYPE||!1,he=ee.FORCE_BODY||!1,G=ee.SANITIZE_DOM!==!1,te=ee.SANITIZE_NAMED_PROPS||!1,re=ee.KEEP_CONTENT!==!1,J=ee.IN_PLACE||!1,C=ee.ALLOWED_URI_REGEXP||C,qe=ee.NAMESPACE||tt,B=ee.CUSTOM_ELEMENT_HANDLING||{},ee.CUSTOM_ELEMENT_HANDLING&&yn(ee.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(B.tagNameCheck=ee.CUSTOM_ELEMENT_HANDLING.tagNameCheck),ee.CUSTOM_ELEMENT_HANDLING&&yn(ee.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(B.attributeNameCheck=ee.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),ee.CUSTOM_ELEMENT_HANDLING&&typeof ee.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(B.allowCustomizedBuiltInElements=ee.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Z&&(ue=!1),D&&(ce=!0),Q&&(_=gt({},Lo(BV)),$=[],Q.html===!0&&(gt(_,FV),gt($,VV)),Q.svg===!0&&(gt(_,dT),gt($,pT),gt($,_0)),Q.svgFilters===!0&&(gt(_,fT),gt($,pT),gt($,_0)),Q.mathMl===!0&&(gt(_,gT),gt($,WV),gt($,_0))),ee.ADD_TAGS&&(_===I&&(_=_h(_)),gt(_,ee.ADD_TAGS,Mn)),ee.ADD_ATTR&&($===M&&($=_h($)),gt($,ee.ADD_ATTR,Mn)),ee.ADD_URI_SAFE_ATTR&&gt(xe,ee.ADD_URI_SAFE_ATTR,Mn),ee.FORBID_CONTENTS&&(se===oe&&(se=_h(se)),gt(se,ee.FORBID_CONTENTS,Mn)),re&&(_["#text"]=!0),ne&&gt(_,["html","head","body"]),_.table&&(gt(_,["tbody"]),delete z.tbody),Dr&&Dr(ee),vi=ee)},e$=gt({},["mi","mo","mn","ms","mtext"]),t$=gt({},["annotation-xml"]),RQ=gt({},["title","style","font","a","script"]),Ly=gt({},dT);gt(Ly,fT),gt(Ly,Oye);var WE=gt({},gT);gt(WE,kye);var EQ=function(ee){var Ce=y(ee);(!Ce||!Ce.tagName)&&(Ce={namespaceURI:qe,tagName:"template"});var Ae=xS(ee.tagName),Vt=xS(Ce.tagName);return Nn[ee.namespaceURI]?ee.namespaceURI===ht?Ce.namespaceURI===tt?Ae==="svg":Ce.namespaceURI===Ke?Ae==="svg"&&(Vt==="annotation-xml"||e$[Vt]):!!Ly[Ae]:ee.namespaceURI===Ke?Ce.namespaceURI===tt?Ae==="math":Ce.namespaceURI===ht?Ae==="math"&&t$[Vt]:!!WE[Ae]:ee.namespaceURI===tt?Ce.namespaceURI===ht&&!t$[Vt]||Ce.namespaceURI===Ke&&!e$[Vt]?!1:!WE[Ae]&&(RQ[Ae]||!Ly[Ae]):!!(yo==="application/xhtml+xml"&&Nn[ee.namespaceURI]):!1},Ps=function(ee){Am(e.removed,{element:ee});try{ee.parentNode.removeChild(ee)}catch{try{ee.outerHTML=x}catch{ee.remove()}}},Ny=function(ee,Ce){try{Am(e.removed,{attribute:Ce.getAttributeNode(ee),from:Ce})}catch{Am(e.removed,{attribute:null,from:Ce})}if(Ce.removeAttribute(ee),ee==="is"&&!$[ee])if(ce||D)try{Ps(Ce)}catch{}else try{Ce.setAttribute(ee,"")}catch{}},n$=function(ee){var Ce,Ae;if(he)ee="<remove></remove>"+ee;else{var Vt=$V(ee,/^[\r\n\t ]+/);Ae=Vt&&Vt[0]}yo==="application/xhtml+xml"&&qe===tt&&(ee='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+ee+"</body></html>");var Nr=R?R.createHTML(ee):ee;if(qe===tt)try{Ce=new d().parseFromString(Nr,yo)}catch{}if(!Ce||!Ce.documentElement){Ce=T.createDocument(qe,"template",null);try{Ce.documentElement.innerHTML=Tt?x:Nr}catch{}}var Zi=Ce.body||Ce.documentElement;return ee&&Ae&&Zi.insertBefore(i.createTextNode(Ae),Zi.childNodes[0]||null),qe===tt?A.call(Ce,ne?"html":"body")[0]:ne?Ce.documentElement:Zi},i$=function(ee){return P.call(ee.ownerDocument||ee,ee,l.SHOW_ELEMENT|l.SHOW_COMMENT|l.SHOW_TEXT|l.SHOW_PROCESSING_INSTRUCTION|l.SHOW_CDATA_SECTION,null,!1)},r$=function(ee){return ee instanceof h&&(typeof ee.nodeName!="string"||typeof ee.textContent!="string"||typeof ee.removeChild!="function"||!(ee.attributes instanceof u)||typeof ee.removeAttribute!="function"||typeof ee.setAttribute!="function"||typeof ee.namespaceURI!="string"||typeof ee.insertBefore!="function"||typeof ee.hasChildNodes!="function")},pm=function(ee){return bu(o)==="object"?ee instanceof o:ee&&bu(ee)==="object"&&typeof ee.nodeType=="number"&&typeof ee.nodeName=="string"},El=function(ee,Ce,Ae){F[ee]&&Mye(F[ee],function(Vt){Vt.call(e,Ce,Ae,vi)})},s$=function(ee){var Ce;if(El("beforeSanitizeElements",ee,null),r$(ee)||zi(/[\u0080-\uFFFF]/,ee.nodeName))return Ps(ee),!0;var Ae=Mn(ee.nodeName);if(El("uponSanitizeElement",ee,{tagName:Ae,allowedTags:_}),ee.hasChildNodes()&&!pm(ee.firstElementChild)&&(!pm(ee.content)||!pm(ee.content.firstElementChild))&&zi(/<[/\w]/g,ee.innerHTML)&&zi(/<[/\w]/g,ee.textContent)||Ae==="select"&&zi(/<template/i,ee.innerHTML)||ee.nodeType===7||Y&&ee.nodeType===8&&zi(/<[/\w]/g,ee.data))return Ps(ee),!0;if(!_[Ae]||z[Ae]){if(!z[Ae]&&a$(Ae)&&(B.tagNameCheck instanceof RegExp&&zi(B.tagNameCheck,Ae)||B.tagNameCheck instanceof Function&&B.tagNameCheck(Ae)))return!1;if(re&&!se[Ae]){var Vt=y(ee)||ee.parentNode,Nr=v(ee)||ee.childNodes;if(Nr&&Vt)for(var Zi=Nr.length,ji=Zi-1;ji>=0;--ji){var gh=p(Nr[ji],!0);gh.__removalCount=(ee.__removalCount||0)+1,Vt.insertBefore(gh,m(ee))}}return Ps(ee),!0}return ee instanceof a&&!EQ(ee)||(Ae==="noscript"||Ae==="noembed"||Ae==="noframes")&&zi(/<\/no(script|embed|frames)/i,ee.innerHTML)?(Ps(ee),!0):(Z&&ee.nodeType===3&&(Ce=ee.textContent,Ce=Ro(Ce,V," "),Ce=Ro(Ce,H," "),Ce=Ro(Ce,N," "),ee.textContent!==Ce&&(Am(e.removed,{element:ee.cloneNode()}),ee.textContent=Ce)),El("afterSanitizeElements",ee,null),!1)},o$=function(ee,Ce,Ae){if(G&&(Ce==="id"||Ce==="name")&&(Ae in i||Ae in Wi))return!1;if(!(ue&&!U[Ce]&&zi(j,Ce))){if(!(le&&zi(k,Ce))){if(!$[Ce]||U[Ce]){if(!(a$(ee)&&(B.tagNameCheck instanceof RegExp&&zi(B.tagNameCheck,ee)||B.tagNameCheck instanceof Function&&B.tagNameCheck(ee))&&(B.attributeNameCheck instanceof RegExp&&zi(B.attributeNameCheck,Ce)||B.attributeNameCheck instanceof Function&&B.attributeNameCheck(Ce))||Ce==="is"&&B.allowCustomizedBuiltInElements&&(B.tagNameCheck instanceof RegExp&&zi(B.tagNameCheck,Ae)||B.tagNameCheck instanceof Function&&B.tagNameCheck(Ae))))return!1}else if(!xe[Ce]){if(!zi(C,Ro(Ae,ie,""))){if(!((Ce==="src"||Ce==="xlink:href"||Ce==="href")&&ee!=="script"&&Aye(Ae,"data:")===0&&ae[ee])){if(!(be&&!zi(K,Ro(Ae,ie,"")))){if(Ae)return!1}}}}}}return!0},a$=function(ee){return ee!=="annotation-xml"&&$V(ee,b)},l$=function(ee){var Ce,Ae,Vt,Nr;El("beforeSanitizeAttributes",ee,null);var Zi=ee.attributes;if(Zi){var ji={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:$};for(Nr=Zi.length;Nr--;){Ce=Zi[Nr];var gh=Ce,wi=gh.name,jE=gh.namespaceURI;if(Ae=wi==="value"?Ce.value:Pye(Ce.value),Vt=Mn(wi),ji.attrName=Vt,ji.attrValue=Ae,ji.keepAttr=!0,ji.forceKeepAttr=void 0,El("uponSanitizeAttribute",ee,ji),Ae=ji.attrValue,!ji.forceKeepAttr&&(Ny(wi,ee),!!ji.keepAttr)){if(!fe&&zi(/\/>/i,Ae)){Ny(wi,ee);continue}Z&&(Ae=Ro(Ae,V," "),Ae=Ro(Ae,H," "),Ae=Ro(Ae,N," "));var c$=Mn(ee.nodeName);if(o$(c$,Vt,Ae)){if(te&&(Vt==="id"||Vt==="name")&&(Ny(wi,ee),Ae=X+Ae),Y&&zi(/((--!?|])>)|<\/(style|title)/i,Ae)){Ny(wi,ee);continue}if(R&&bu(f)==="object"&&typeof f.getAttributeType=="function"&&!jE)switch(f.getAttributeType(c$,Vt)){case"TrustedHTML":{Ae=R.createHTML(Ae);break}case"TrustedScriptURL":{Ae=R.createScriptURL(Ae);break}}try{jE?ee.setAttributeNS(jE,wi,Ae):ee.setAttribute(wi,Ae),r$(ee)?Ps(ee):HV(e.removed)}catch{}}}}El("afterSanitizeAttributes",ee,null)}},xQ=function Ve(ee){var Ce,Ae=i$(ee);for(El("beforeSanitizeShadowDOM",ee,null);Ce=Ae.nextNode();)El("uponSanitizeShadowNode",Ce,null),!s$(Ce)&&(Ce.content instanceof r&&Ve(Ce.content),l$(Ce));El("afterSanitizeShadowDOM",ee,null)};return e.sanitize=function(Ve){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ce,Ae,Vt,Nr,Zi;if(Tt=!Ve,Tt&&(Ve="<!-->"),typeof Ve!="string"&&!pm(Ve))if(typeof Ve.toString=="function"){if(Ve=Ve.toString(),typeof Ve!="string")throw hT("dirty is not a string, aborting")}else throw hT("toString is not a function");if(!e.isSupported){if(bu(n.toStaticHTML)==="object"||typeof n.toStaticHTML=="function"){if(typeof Ve=="string")return n.toStaticHTML(Ve);if(pm(Ve))return n.toStaticHTML(Ve.outerHTML)}return Ve}if(de||VE(ee),e.removed=[],typeof Ve=="string"&&(J=!1),J){if(Ve.nodeName){var ji=Mn(Ve.nodeName);if(!_[ji]||z[ji])throw hT("root node is forbidden and cannot be sanitized in-place")}}else if(Ve instanceof o)Ce=n$("<!---->"),Ae=Ce.ownerDocument.importNode(Ve,!0),Ae.nodeType===1&&Ae.nodeName==="BODY"||Ae.nodeName==="HTML"?Ce=Ae:Ce.appendChild(Ae);else{if(!ce&&!Z&&!ne&&Ve.indexOf("<")===-1)return R&&O?R.createHTML(Ve):Ve;if(Ce=n$(Ve),!Ce)return ce?null:O?x:""}Ce&&he&&Ps(Ce.firstChild);for(var gh=i$(J?Ve:Ce);Vt=gh.nextNode();)Vt.nodeType===3&&Vt===Nr||s$(Vt)||(Vt.content instanceof r&&xQ(Vt.content),l$(Vt),Nr=Vt);if(Nr=null,J)return Ve;if(ce){if(D)for(Zi=E.call(Ce.ownerDocument);Ce.firstChild;)Zi.appendChild(Ce.firstChild);else Zi=Ce;return($.shadowroot||$.shadowrootmod)&&(Zi=L.call(t,Zi,!0)),Zi}var wi=ne?Ce.outerHTML:Ce.innerHTML;return ne&&_["!doctype"]&&Ce.ownerDocument&&Ce.ownerDocument.doctype&&Ce.ownerDocument.doctype.name&&zi(Wye,Ce.ownerDocument.doctype.name)&&(wi="<!DOCTYPE "+Ce.ownerDocument.doctype.name+`>
`+wi),Z&&(wi=Ro(wi,V," "),wi=Ro(wi,H," "),wi=Ro(wi,N," ")),R&&O?R.createHTML(wi):wi},e.setConfig=function(Ve){VE(Ve),de=!0},e.clearConfig=function(){vi=null,de=!1},e.isValidAttribute=function(Ve,ee,Ce){vi||VE({});var Ae=Mn(Ve),Vt=Mn(ee);return o$(Ae,Vt,Ce)},e.addHook=function(Ve,ee){typeof ee=="function"&&(F[Ve]=F[Ve]||[],Am(F[Ve],ee))},e.removeHook=function(Ve){if(F[Ve])return HV(F[Ve])},e.removeHooks=function(Ve){F[Ve]&&(F[Ve]=[])},e.removeAllHooks=function(){F={}},e}var Gye=SG();//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var _G;function pe(){return _G.apply(null,arguments)}function Yye(n){_G=n}function na(n){return n instanceof Array||Object.prototype.toString.call(n)==="[object Array]"}function jd(n){return n!=null&&Object.prototype.toString.call(n)==="[object Object]"}function Ft(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function fD(n){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(n).length===0;var e;for(e in n)if(Ft(n,e))return!1;return!0}function Ur(n){return n===void 0}function Mc(n){return typeof n=="number"||Object.prototype.toString.call(n)==="[object Number]"}function hy(n){return n instanceof Date||Object.prototype.toString.call(n)==="[object Date]"}function RG(n,e){var t=[],i,r=n.length;for(i=0;i<r;++i)t.push(e(n[i],i));return t}function xu(n,e){for(var t in e)Ft(e,t)&&(n[t]=e[t]);return Ft(e,"toString")&&(n.toString=e.toString),Ft(e,"valueOf")&&(n.valueOf=e.valueOf),n}function Sl(n,e,t,i){return YG(n,e,t,i,!0).utc()}function Kye(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function dt(n){return n._pf==null&&(n._pf=Kye()),n._pf}var aI;Array.prototype.some?aI=Array.prototype.some:aI=function(n){var e=Object(this),t=e.length>>>0,i;for(i=0;i<t;i++)if(i in e&&n.call(this,e[i],i,e))return!0;return!1};function gD(n){var e=null,t=!1,i=n._d&&!isNaN(n._d.getTime());if(i&&(e=dt(n),t=aI.call(e.parsedDateParts,function(r){return r!=null}),i=e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&t),n._strict&&(i=i&&e.charsLeftOver===0&&e.unusedTokens.length===0&&e.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(n))n._isValid=i;else return i;return n._isValid}function $1(n){var e=Sl(NaN);return n!=null?xu(dt(e),n):dt(e).userInvalidated=!0,e}var jV=pe.momentProperties=[],mT=!1;function pD(n,e){var t,i,r,s=jV.length;if(Ur(e._isAMomentObject)||(n._isAMomentObject=e._isAMomentObject),Ur(e._i)||(n._i=e._i),Ur(e._f)||(n._f=e._f),Ur(e._l)||(n._l=e._l),Ur(e._strict)||(n._strict=e._strict),Ur(e._tzm)||(n._tzm=e._tzm),Ur(e._isUTC)||(n._isUTC=e._isUTC),Ur(e._offset)||(n._offset=e._offset),Ur(e._pf)||(n._pf=dt(e)),Ur(e._locale)||(n._locale=e._locale),s>0)for(t=0;t<s;t++)i=jV[t],r=e[i],Ur(r)||(n[i]=r);return n}function dy(n){pD(this,n),this._d=new Date(n._d!=null?n._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),mT===!1&&(mT=!0,pe.updateOffset(this),mT=!1)}function ia(n){return n instanceof dy||n!=null&&n._isAMomentObject!=null}function EG(n){pe.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+n)}function po(n,e){var t=!0;return xu(function(){if(pe.deprecationHandler!=null&&pe.deprecationHandler(null,n),t){var i=[],r,s,o,a=arguments.length;for(s=0;s<a;s++){if(r="",typeof arguments[s]=="object"){r+=`
[`+s+"] ";for(o in arguments[0])Ft(arguments[0],o)&&(r+=o+": "+arguments[0][o]+", ");r=r.slice(0,-2)}else r=arguments[s];i.push(r)}EG(n+`
Arguments: `+Array.prototype.slice.call(i).join("")+`
`+new Error().stack),t=!1}return e.apply(this,arguments)},e)}var zV={};function xG(n,e){pe.deprecationHandler!=null&&pe.deprecationHandler(n,e),zV[n]||(EG(e),zV[n]=!0)}pe.suppressDeprecationWarnings=!1;pe.deprecationHandler=null;function _l(n){return typeof Function<"u"&&n instanceof Function||Object.prototype.toString.call(n)==="[object Function]"}function qye(n){var e,t;for(t in n)Ft(n,t)&&(e=n[t],_l(e)?this[t]=e:this["_"+t]=e);this._config=n,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function lI(n,e){var t=xu({},n),i;for(i in e)Ft(e,i)&&(jd(n[i])&&jd(e[i])?(t[i]={},xu(t[i],n[i]),xu(t[i],e[i])):e[i]!=null?t[i]=e[i]:delete t[i]);for(i in n)Ft(n,i)&&!Ft(e,i)&&jd(n[i])&&(t[i]=xu({},t[i]));return t}function mD(n){n!=null&&this.set(n)}var cI;Object.keys?cI=Object.keys:cI=function(n){var e,t=[];for(e in n)Ft(n,e)&&t.push(e);return t};var Xye={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function Zye(n,e,t){var i=this._calendar[n]||this._calendar.sameElse;return _l(i)?i.call(e,t):i}function cl(n,e,t){var i=""+Math.abs(n),r=e-i.length,s=n>=0;return(s?t?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+i}var bD=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,R0=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,bT={},lp={};function je(n,e,t,i){var r=i;typeof i=="string"&&(r=function(){return this[i]()}),n&&(lp[n]=r),e&&(lp[e[0]]=function(){return cl(r.apply(this,arguments),e[1],e[2])}),t&&(lp[t]=function(){return this.localeData().ordinal(r.apply(this,arguments),n)})}function Qye(n){return n.match(/\[[\s\S]/)?n.replace(/^\[|\]$/g,""):n.replace(/\\/g,"")}function Jye(n){var e=n.match(bD),t,i;for(t=0,i=e.length;t<i;t++)lp[e[t]]?e[t]=lp[e[t]]:e[t]=Qye(e[t]);return function(r){var s="",o;for(o=0;o<i;o++)s+=_l(e[o])?e[o].call(r,n):e[o];return s}}function TS(n,e){return n.isValid()?(e=TG(e,n.localeData()),bT[e]=bT[e]||Jye(e),bT[e](n)):n.localeData().invalidDate()}function TG(n,e){var t=5;function i(r){return e.longDateFormat(r)||r}for(R0.lastIndex=0;t>=0&&R0.test(n);)n=n.replace(R0,i),R0.lastIndex=0,t-=1;return n}var e0e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function t0e(n){var e=this._longDateFormat[n],t=this._longDateFormat[n.toUpperCase()];return e||!t?e:(this._longDateFormat[n]=t.match(bD).map(function(i){return i==="MMMM"||i==="MM"||i==="DD"||i==="dddd"?i.slice(1):i}).join(""),this._longDateFormat[n])}var n0e="Invalid date";function i0e(){return this._invalidDate}var r0e="%d",s0e=/\d{1,2}/;function o0e(n){return this._ordinal.replace("%d",n)}var a0e={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function l0e(n,e,t,i){var r=this._relativeTime[t];return _l(r)?r(n,e,t,i):r.replace(/%d/i,n)}function c0e(n,e){var t=this._relativeTime[n>0?"future":"past"];return _l(t)?t(e):t.replace(/%s/i,e)}var UV={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function mo(n){return typeof n=="string"?UV[n]||UV[n.toLowerCase()]:void 0}function vD(n){var e={},t,i;for(i in n)Ft(n,i)&&(t=mo(i),t&&(e[t]=n[i]));return e}var u0e={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function h0e(n){var e=[],t;for(t in n)Ft(n,t)&&e.push({unit:t,priority:u0e[t]});return e.sort(function(i,r){return i.priority-r.priority}),e}var MG=/\d/,Ms=/\d\d/,AG=/\d{3}/,wD=/\d{4}/,F1=/[+-]?\d{6}/,Tn=/\d\d?/,PG=/\d\d\d\d?/,IG=/\d\d\d\d\d\d?/,B1=/\d{1,3}/,yD=/\d{1,4}/,V1=/[+-]?\d{1,6}/,Jp=/\d+/,W1=/[+-]?\d+/,d0e=/Z|[+-]\d\d:?\d\d/gi,j1=/Z|[+-]\d\d(?::?\d\d)?/gi,f0e=/[+-]?\d+(\.\d{1,3})?/,fy=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,em=/^[1-9]\d?/,CD=/^([1-9]\d|\d)/,K_;K_={};function Le(n,e,t){K_[n]=_l(e)?e:function(i,r){return i&&t?t:e}}function g0e(n,e){return Ft(K_,n)?K_[n](e._strict,e._locale):new RegExp(p0e(n))}function p0e(n){return Sc(n.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,i,r,s){return t||i||r||s}))}function Sc(n){return n.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Xs(n){return n<0?Math.ceil(n)||0:Math.floor(n)}function xt(n){var e=+n,t=0;return e!==0&&isFinite(e)&&(t=Xs(e)),t}var uI={};function cn(n,e){var t,i=e,r;for(typeof n=="string"&&(n=[n]),Mc(e)&&(i=function(s,o){o[e]=xt(s)}),r=n.length,t=0;t<r;t++)uI[n[t]]=i}function gy(n,e){cn(n,function(t,i,r,s){r._w=r._w||{},e(t,r._w,r,s)})}function m0e(n,e,t){e!=null&&Ft(uI,n)&&uI[n](e,t._a,t,n)}function z1(n){return n%4===0&&n%100!==0||n%400===0}var ur=0,fc=1,za=2,Ai=3,qo=4,gc=5,Ed=6,b0e=7,v0e=8;je("Y",0,0,function(){var n=this.year();return n<=9999?cl(n,4):"+"+n});je(0,["YY",2],0,function(){return this.year()%100});je(0,["YYYY",4],0,"year");je(0,["YYYYY",5],0,"year");je(0,["YYYYYY",6,!0],0,"year");Le("Y",W1);Le("YY",Tn,Ms);Le("YYYY",yD,wD);Le("YYYYY",V1,F1);Le("YYYYYY",V1,F1);cn(["YYYYY","YYYYYY"],ur);cn("YYYY",function(n,e){e[ur]=n.length===2?pe.parseTwoDigitYear(n):xt(n)});cn("YY",function(n,e){e[ur]=pe.parseTwoDigitYear(n)});cn("Y",function(n,e){e[ur]=parseInt(n,10)});function xv(n){return z1(n)?366:365}pe.parseTwoDigitYear=function(n){return xt(n)+(xt(n)>68?1900:2e3)};var OG=tm("FullYear",!0);function w0e(){return z1(this.year())}function tm(n,e){return function(t){return t!=null?(kG(this,n,t),pe.updateOffset(this,e),this):vw(this,n)}}function vw(n,e){if(!n.isValid())return NaN;var t=n._d,i=n._isUTC;switch(e){case"Milliseconds":return i?t.getUTCMilliseconds():t.getMilliseconds();case"Seconds":return i?t.getUTCSeconds():t.getSeconds();case"Minutes":return i?t.getUTCMinutes():t.getMinutes();case"Hours":return i?t.getUTCHours():t.getHours();case"Date":return i?t.getUTCDate():t.getDate();case"Day":return i?t.getUTCDay():t.getDay();case"Month":return i?t.getUTCMonth():t.getMonth();case"FullYear":return i?t.getUTCFullYear():t.getFullYear();default:return NaN}}function kG(n,e,t){var i,r,s,o,a;if(!(!n.isValid()||isNaN(t))){switch(i=n._d,r=n._isUTC,e){case"Milliseconds":return void(r?i.setUTCMilliseconds(t):i.setMilliseconds(t));case"Seconds":return void(r?i.setUTCSeconds(t):i.setSeconds(t));case"Minutes":return void(r?i.setUTCMinutes(t):i.setMinutes(t));case"Hours":return void(r?i.setUTCHours(t):i.setHours(t));case"Date":return void(r?i.setUTCDate(t):i.setDate(t));case"FullYear":break;default:return}s=t,o=n.month(),a=n.date(),a=a===29&&o===1&&!z1(s)?28:a,r?i.setUTCFullYear(s,o,a):i.setFullYear(s,o,a)}}function y0e(n){return n=mo(n),_l(this[n])?this[n]():this}function C0e(n,e){if(typeof n=="object"){n=vD(n);var t=h0e(n),i,r=t.length;for(i=0;i<r;i++)this[t[i].unit](n[t[i].unit])}else if(n=mo(n),_l(this[n]))return this[n](e);return this}function S0e(n,e){return(n%e+e)%e}var si;Array.prototype.indexOf?si=Array.prototype.indexOf:si=function(n){var e;for(e=0;e<this.length;++e)if(this[e]===n)return e;return-1};function SD(n,e){if(isNaN(n)||isNaN(e))return NaN;var t=S0e(e,12);return n+=(e-t)/12,t===1?z1(n)?29:28:31-t%7%2}je("M",["MM",2],"Mo",function(){return this.month()+1});je("MMM",0,0,function(n){return this.localeData().monthsShort(this,n)});je("MMMM",0,0,function(n){return this.localeData().months(this,n)});Le("M",Tn,em);Le("MM",Tn,Ms);Le("MMM",function(n,e){return e.monthsShortRegex(n)});Le("MMMM",function(n,e){return e.monthsRegex(n)});cn(["M","MM"],function(n,e){e[fc]=xt(n)-1});cn(["MMM","MMMM"],function(n,e,t,i){var r=t._locale.monthsParse(n,i,t._strict);r!=null?e[fc]=r:dt(t).invalidMonth=n});var _0e="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),DG="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),LG=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,R0e=fy,E0e=fy;function x0e(n,e){return n?na(this._months)?this._months[n.month()]:this._months[(this._months.isFormat||LG).test(e)?"format":"standalone"][n.month()]:na(this._months)?this._months:this._months.standalone}function T0e(n,e){return n?na(this._monthsShort)?this._monthsShort[n.month()]:this._monthsShort[LG.test(e)?"format":"standalone"][n.month()]:na(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function M0e(n,e,t){var i,r,s,o=n.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)s=Sl([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(s,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(s,"").toLocaleLowerCase();return t?e==="MMM"?(r=si.call(this._shortMonthsParse,o),r!==-1?r:null):(r=si.call(this._longMonthsParse,o),r!==-1?r:null):e==="MMM"?(r=si.call(this._shortMonthsParse,o),r!==-1?r:(r=si.call(this._longMonthsParse,o),r!==-1?r:null)):(r=si.call(this._longMonthsParse,o),r!==-1?r:(r=si.call(this._shortMonthsParse,o),r!==-1?r:null))}function A0e(n,e,t){var i,r,s;if(this._monthsParseExact)return M0e.call(this,n,e,t);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(r=Sl([2e3,i]),t&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),!t&&!this._monthsParse[i]&&(s="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[i]=new RegExp(s.replace(".",""),"i")),t&&e==="MMMM"&&this._longMonthsParse[i].test(n))return i;if(t&&e==="MMM"&&this._shortMonthsParse[i].test(n))return i;if(!t&&this._monthsParse[i].test(n))return i}}function NG(n,e){if(!n.isValid())return n;if(typeof e=="string"){if(/^\d+$/.test(e))e=xt(e);else if(e=n.localeData().monthsParse(e),!Mc(e))return n}var t=e,i=n.date();return i=i<29?i:Math.min(i,SD(n.year(),t)),n._isUTC?n._d.setUTCMonth(t,i):n._d.setMonth(t,i),n}function HG(n){return n!=null?(NG(this,n),pe.updateOffset(this,!0),this):vw(this,"Month")}function P0e(){return SD(this.year(),this.month())}function I0e(n){return this._monthsParseExact?(Ft(this,"_monthsRegex")||$G.call(this),n?this._monthsShortStrictRegex:this._monthsShortRegex):(Ft(this,"_monthsShortRegex")||(this._monthsShortRegex=R0e),this._monthsShortStrictRegex&&n?this._monthsShortStrictRegex:this._monthsShortRegex)}function O0e(n){return this._monthsParseExact?(Ft(this,"_monthsRegex")||$G.call(this),n?this._monthsStrictRegex:this._monthsRegex):(Ft(this,"_monthsRegex")||(this._monthsRegex=E0e),this._monthsStrictRegex&&n?this._monthsStrictRegex:this._monthsRegex)}function $G(){function n(l,c){return c.length-l.length}var e=[],t=[],i=[],r,s,o,a;for(r=0;r<12;r++)s=Sl([2e3,r]),o=Sc(this.monthsShort(s,"")),a=Sc(this.months(s,"")),e.push(o),t.push(a),i.push(a),i.push(o);e.sort(n),t.sort(n),i.sort(n),this._monthsRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+t.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+e.join("|")+")","i")}function k0e(n,e,t,i,r,s,o){var a;return n<100&&n>=0?(a=new Date(n+400,e,t,i,r,s,o),isFinite(a.getFullYear())&&a.setFullYear(n)):a=new Date(n,e,t,i,r,s,o),a}function ww(n){var e,t;return n<100&&n>=0?(t=Array.prototype.slice.call(arguments),t[0]=n+400,e=new Date(Date.UTC.apply(null,t)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(n)):e=new Date(Date.UTC.apply(null,arguments)),e}function q_(n,e,t){var i=7+e-t,r=(7+ww(n,0,i).getUTCDay()-e)%7;return-r+i-1}function FG(n,e,t,i,r){var s=(7+t-i)%7,o=q_(n,i,r),a=1+7*(e-1)+s+o,l,c;return a<=0?(l=n-1,c=xv(l)+a):a>xv(n)?(l=n+1,c=a-xv(n)):(l=n,c=a),{year:l,dayOfYear:c}}function yw(n,e,t){var i=q_(n.year(),e,t),r=Math.floor((n.dayOfYear()-i-1)/7)+1,s,o;return r<1?(o=n.year()-1,s=r+_c(o,e,t)):r>_c(n.year(),e,t)?(s=r-_c(n.year(),e,t),o=n.year()+1):(o=n.year(),s=r),{week:s,year:o}}function _c(n,e,t){var i=q_(n,e,t),r=q_(n+1,e,t);return(xv(n)-i+r)/7}je("w",["ww",2],"wo","week");je("W",["WW",2],"Wo","isoWeek");Le("w",Tn,em);Le("ww",Tn,Ms);Le("W",Tn,em);Le("WW",Tn,Ms);gy(["w","ww","W","WW"],function(n,e,t,i){e[i.substr(0,1)]=xt(n)});function D0e(n){return yw(n,this._week.dow,this._week.doy).week}var L0e={dow:0,doy:6};function N0e(){return this._week.dow}function H0e(){return this._week.doy}function $0e(n){var e=this.localeData().week(this);return n==null?e:this.add((n-e)*7,"d")}function F0e(n){var e=yw(this,1,4).week;return n==null?e:this.add((n-e)*7,"d")}je("d",0,"do","day");je("dd",0,0,function(n){return this.localeData().weekdaysMin(this,n)});je("ddd",0,0,function(n){return this.localeData().weekdaysShort(this,n)});je("dddd",0,0,function(n){return this.localeData().weekdays(this,n)});je("e",0,0,"weekday");je("E",0,0,"isoWeekday");Le("d",Tn);Le("e",Tn);Le("E",Tn);Le("dd",function(n,e){return e.weekdaysMinRegex(n)});Le("ddd",function(n,e){return e.weekdaysShortRegex(n)});Le("dddd",function(n,e){return e.weekdaysRegex(n)});gy(["dd","ddd","dddd"],function(n,e,t,i){var r=t._locale.weekdaysParse(n,i,t._strict);r!=null?e.d=r:dt(t).invalidWeekday=n});gy(["d","e","E"],function(n,e,t,i){e[i]=xt(n)});function B0e(n,e){return typeof n!="string"?n:isNaN(n)?(n=e.weekdaysParse(n),typeof n=="number"?n:null):parseInt(n,10)}function V0e(n,e){return typeof n=="string"?e.weekdaysParse(n)%7||7:isNaN(n)?null:n}function _D(n,e){return n.slice(e,7).concat(n.slice(0,e))}var W0e="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),BG="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),j0e="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),z0e=fy,U0e=fy,G0e=fy;function Y0e(n,e){var t=na(this._weekdays)?this._weekdays:this._weekdays[n&&n!==!0&&this._weekdays.isFormat.test(e)?"format":"standalone"];return n===!0?_D(t,this._week.dow):n?t[n.day()]:t}function K0e(n){return n===!0?_D(this._weekdaysShort,this._week.dow):n?this._weekdaysShort[n.day()]:this._weekdaysShort}function q0e(n){return n===!0?_D(this._weekdaysMin,this._week.dow):n?this._weekdaysMin[n.day()]:this._weekdaysMin}function X0e(n,e,t){var i,r,s,o=n.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)s=Sl([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(s,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(s,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(s,"").toLocaleLowerCase();return t?e==="dddd"?(r=si.call(this._weekdaysParse,o),r!==-1?r:null):e==="ddd"?(r=si.call(this._shortWeekdaysParse,o),r!==-1?r:null):(r=si.call(this._minWeekdaysParse,o),r!==-1?r:null):e==="dddd"?(r=si.call(this._weekdaysParse,o),r!==-1||(r=si.call(this._shortWeekdaysParse,o),r!==-1)?r:(r=si.call(this._minWeekdaysParse,o),r!==-1?r:null)):e==="ddd"?(r=si.call(this._shortWeekdaysParse,o),r!==-1||(r=si.call(this._weekdaysParse,o),r!==-1)?r:(r=si.call(this._minWeekdaysParse,o),r!==-1?r:null)):(r=si.call(this._minWeekdaysParse,o),r!==-1||(r=si.call(this._weekdaysParse,o),r!==-1)?r:(r=si.call(this._shortWeekdaysParse,o),r!==-1?r:null))}function Z0e(n,e,t){var i,r,s;if(this._weekdaysParseExact)return X0e.call(this,n,e,t);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(r=Sl([2e3,1]).day(i),t&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(r,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(r,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(r,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[i]||(s="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[i]=new RegExp(s.replace(".",""),"i")),t&&e==="dddd"&&this._fullWeekdaysParse[i].test(n))return i;if(t&&e==="ddd"&&this._shortWeekdaysParse[i].test(n))return i;if(t&&e==="dd"&&this._minWeekdaysParse[i].test(n))return i;if(!t&&this._weekdaysParse[i].test(n))return i}}function Q0e(n){if(!this.isValid())return n!=null?this:NaN;var e=vw(this,"Day");return n!=null?(n=B0e(n,this.localeData()),this.add(n-e,"d")):e}function J0e(n){if(!this.isValid())return n!=null?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return n==null?e:this.add(n-e,"d")}function eCe(n){if(!this.isValid())return n!=null?this:NaN;if(n!=null){var e=V0e(n,this.localeData());return this.day(this.day()%7?e:e-7)}else return this.day()||7}function tCe(n){return this._weekdaysParseExact?(Ft(this,"_weekdaysRegex")||RD.call(this),n?this._weekdaysStrictRegex:this._weekdaysRegex):(Ft(this,"_weekdaysRegex")||(this._weekdaysRegex=z0e),this._weekdaysStrictRegex&&n?this._weekdaysStrictRegex:this._weekdaysRegex)}function nCe(n){return this._weekdaysParseExact?(Ft(this,"_weekdaysRegex")||RD.call(this),n?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(Ft(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=U0e),this._weekdaysShortStrictRegex&&n?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function iCe(n){return this._weekdaysParseExact?(Ft(this,"_weekdaysRegex")||RD.call(this),n?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(Ft(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=G0e),this._weekdaysMinStrictRegex&&n?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function RD(){function n(u,h){return h.length-u.length}var e=[],t=[],i=[],r=[],s,o,a,l,c;for(s=0;s<7;s++)o=Sl([2e3,1]).day(s),a=Sc(this.weekdaysMin(o,"")),l=Sc(this.weekdaysShort(o,"")),c=Sc(this.weekdays(o,"")),e.push(a),t.push(l),i.push(c),r.push(a),r.push(l),r.push(c);e.sort(n),t.sort(n),i.sort(n),r.sort(n),this._weekdaysRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+t.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+e.join("|")+")","i")}function ED(){return this.hours()%12||12}function rCe(){return this.hours()||24}je("H",["HH",2],0,"hour");je("h",["hh",2],0,ED);je("k",["kk",2],0,rCe);je("hmm",0,0,function(){return""+ED.apply(this)+cl(this.minutes(),2)});je("hmmss",0,0,function(){return""+ED.apply(this)+cl(this.minutes(),2)+cl(this.seconds(),2)});je("Hmm",0,0,function(){return""+this.hours()+cl(this.minutes(),2)});je("Hmmss",0,0,function(){return""+this.hours()+cl(this.minutes(),2)+cl(this.seconds(),2)});function VG(n,e){je(n,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}VG("a",!0);VG("A",!1);function WG(n,e){return e._meridiemParse}Le("a",WG);Le("A",WG);Le("H",Tn,CD);Le("h",Tn,em);Le("k",Tn,em);Le("HH",Tn,Ms);Le("hh",Tn,Ms);Le("kk",Tn,Ms);Le("hmm",PG);Le("hmmss",IG);Le("Hmm",PG);Le("Hmmss",IG);cn(["H","HH"],Ai);cn(["k","kk"],function(n,e,t){var i=xt(n);e[Ai]=i===24?0:i});cn(["a","A"],function(n,e,t){t._isPm=t._locale.isPM(n),t._meridiem=n});cn(["h","hh"],function(n,e,t){e[Ai]=xt(n),dt(t).bigHour=!0});cn("hmm",function(n,e,t){var i=n.length-2;e[Ai]=xt(n.substr(0,i)),e[qo]=xt(n.substr(i)),dt(t).bigHour=!0});cn("hmmss",function(n,e,t){var i=n.length-4,r=n.length-2;e[Ai]=xt(n.substr(0,i)),e[qo]=xt(n.substr(i,2)),e[gc]=xt(n.substr(r)),dt(t).bigHour=!0});cn("Hmm",function(n,e,t){var i=n.length-2;e[Ai]=xt(n.substr(0,i)),e[qo]=xt(n.substr(i))});cn("Hmmss",function(n,e,t){var i=n.length-4,r=n.length-2;e[Ai]=xt(n.substr(0,i)),e[qo]=xt(n.substr(i,2)),e[gc]=xt(n.substr(r))});function sCe(n){return(n+"").toLowerCase().charAt(0)==="p"}var oCe=/[ap]\.?m?\.?/i,aCe=tm("Hours",!0);function lCe(n,e,t){return n>11?t?"pm":"PM":t?"am":"AM"}var jG={calendar:Xye,longDateFormat:e0e,invalidDate:n0e,ordinal:r0e,dayOfMonthOrdinalParse:s0e,relativeTime:a0e,months:_0e,monthsShort:DG,week:L0e,weekdays:W0e,weekdaysMin:j0e,weekdaysShort:BG,meridiemParse:oCe},In={},Pm={},Cw;function cCe(n,e){var t,i=Math.min(n.length,e.length);for(t=0;t<i;t+=1)if(n[t]!==e[t])return t;return i}function GV(n){return n&&n.toLowerCase().replace("_","-")}function uCe(n){for(var e=0,t,i,r,s;e<n.length;){for(s=GV(n[e]).split("-"),t=s.length,i=GV(n[e+1]),i=i?i.split("-"):null;t>0;){if(r=U1(s.slice(0,t).join("-")),r)return r;if(i&&i.length>=t&&cCe(s,i)>=t-1)break;t--}e++}return Cw}function hCe(n){return!!(n&&n.match("^[^/\\\\]*$"))}function U1(n){var e=null,t;if(In[n]===void 0&&typeof JS<"u"&&JS&&JS.exports&&hCe(n))try{e=Cw._abbr,t=require,t("./locale/"+n),Lu(e)}catch{In[n]=null}return In[n]}function Lu(n,e){var t;return n&&(Ur(e)?t=Fc(n):t=xD(n,e),t?Cw=t:typeof console<"u"&&console.warn&&console.warn("Locale "+n+" not found. Did you forget to load it?")),Cw._abbr}function xD(n,e){if(e!==null){var t,i=jG;if(e.abbr=n,In[n]!=null)xG("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=In[n]._config;else if(e.parentLocale!=null)if(In[e.parentLocale]!=null)i=In[e.parentLocale]._config;else if(t=U1(e.parentLocale),t!=null)i=t._config;else return Pm[e.parentLocale]||(Pm[e.parentLocale]=[]),Pm[e.parentLocale].push({name:n,config:e}),null;return In[n]=new mD(lI(i,e)),Pm[n]&&Pm[n].forEach(function(r){xD(r.name,r.config)}),Lu(n),In[n]}else return delete In[n],null}function dCe(n,e){if(e!=null){var t,i,r=jG;In[n]!=null&&In[n].parentLocale!=null?In[n].set(lI(In[n]._config,e)):(i=U1(n),i!=null&&(r=i._config),e=lI(r,e),i==null&&(e.abbr=n),t=new mD(e),t.parentLocale=In[n],In[n]=t),Lu(n)}else In[n]!=null&&(In[n].parentLocale!=null?(In[n]=In[n].parentLocale,n===Lu()&&Lu(n)):In[n]!=null&&delete In[n]);return In[n]}function Fc(n){var e;if(n&&n._locale&&n._locale._abbr&&(n=n._locale._abbr),!n)return Cw;if(!na(n)){if(e=U1(n),e)return e;n=[n]}return uCe(n)}function fCe(){return cI(In)}function TD(n){var e,t=n._a;return t&&dt(n).overflow===-2&&(e=t[fc]<0||t[fc]>11?fc:t[za]<1||t[za]>SD(t[ur],t[fc])?za:t[Ai]<0||t[Ai]>24||t[Ai]===24&&(t[qo]!==0||t[gc]!==0||t[Ed]!==0)?Ai:t[qo]<0||t[qo]>59?qo:t[gc]<0||t[gc]>59?gc:t[Ed]<0||t[Ed]>999?Ed:-1,dt(n)._overflowDayOfYear&&(e<ur||e>za)&&(e=za),dt(n)._overflowWeeks&&e===-1&&(e=b0e),dt(n)._overflowWeekday&&e===-1&&(e=v0e),dt(n).overflow=e),n}var gCe=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,pCe=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,mCe=/Z|[+-]\d\d(?::?\d\d)?/,E0=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],vT=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],bCe=/^\/?Date\((-?\d+)/i,vCe=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,wCe={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function zG(n){var e,t,i=n._i,r=gCe.exec(i)||pCe.exec(i),s,o,a,l,c=E0.length,u=vT.length;if(r){for(dt(n).iso=!0,e=0,t=c;e<t;e++)if(E0[e][1].exec(r[1])){o=E0[e][0],s=E0[e][2]!==!1;break}if(o==null){n._isValid=!1;return}if(r[3]){for(e=0,t=u;e<t;e++)if(vT[e][1].exec(r[3])){a=(r[2]||" ")+vT[e][0];break}if(a==null){n._isValid=!1;return}}if(!s&&a!=null){n._isValid=!1;return}if(r[4])if(mCe.exec(r[4]))l="Z";else{n._isValid=!1;return}n._f=o+(a||"")+(l||""),AD(n)}else n._isValid=!1}function yCe(n,e,t,i,r,s){var o=[CCe(n),DG.indexOf(e),parseInt(t,10),parseInt(i,10),parseInt(r,10)];return s&&o.push(parseInt(s,10)),o}function CCe(n){var e=parseInt(n,10);return e<=49?2e3+e:e<=999?1900+e:e}function SCe(n){return n.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function _Ce(n,e,t){if(n){var i=BG.indexOf(n),r=new Date(e[0],e[1],e[2]).getDay();if(i!==r)return dt(t).weekdayMismatch=!0,t._isValid=!1,!1}return!0}function RCe(n,e,t){if(n)return wCe[n];if(e)return 0;var i=parseInt(t,10),r=i%100,s=(i-r)/100;return s*60+r}function UG(n){var e=vCe.exec(SCe(n._i)),t;if(e){if(t=yCe(e[4],e[3],e[2],e[5],e[6],e[7]),!_Ce(e[1],t,n))return;n._a=t,n._tzm=RCe(e[8],e[9],e[10]),n._d=ww.apply(null,n._a),n._d.setUTCMinutes(n._d.getUTCMinutes()-n._tzm),dt(n).rfc2822=!0}else n._isValid=!1}function ECe(n){var e=bCe.exec(n._i);if(e!==null){n._d=new Date(+e[1]);return}if(zG(n),n._isValid===!1)delete n._isValid;else return;if(UG(n),n._isValid===!1)delete n._isValid;else return;n._strict?n._isValid=!1:pe.createFromInputFallback(n)}pe.createFromInputFallback=po("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(n){n._d=new Date(n._i+(n._useUTC?" UTC":""))});function kg(n,e,t){return n??e??t}function xCe(n){var e=new Date(pe.now());return n._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function MD(n){var e,t,i=[],r,s,o;if(!n._d){for(r=xCe(n),n._w&&n._a[za]==null&&n._a[fc]==null&&TCe(n),n._dayOfYear!=null&&(o=kg(n._a[ur],r[ur]),(n._dayOfYear>xv(o)||n._dayOfYear===0)&&(dt(n)._overflowDayOfYear=!0),t=ww(o,0,n._dayOfYear),n._a[fc]=t.getUTCMonth(),n._a[za]=t.getUTCDate()),e=0;e<3&&n._a[e]==null;++e)n._a[e]=i[e]=r[e];for(;e<7;e++)n._a[e]=i[e]=n._a[e]==null?e===2?1:0:n._a[e];n._a[Ai]===24&&n._a[qo]===0&&n._a[gc]===0&&n._a[Ed]===0&&(n._nextDay=!0,n._a[Ai]=0),n._d=(n._useUTC?ww:k0e).apply(null,i),s=n._useUTC?n._d.getUTCDay():n._d.getDay(),n._tzm!=null&&n._d.setUTCMinutes(n._d.getUTCMinutes()-n._tzm),n._nextDay&&(n._a[Ai]=24),n._w&&typeof n._w.d<"u"&&n._w.d!==s&&(dt(n).weekdayMismatch=!0)}}function TCe(n){var e,t,i,r,s,o,a,l,c;e=n._w,e.GG!=null||e.W!=null||e.E!=null?(s=1,o=4,t=kg(e.GG,n._a[ur],yw(xn(),1,4).year),i=kg(e.W,1),r=kg(e.E,1),(r<1||r>7)&&(l=!0)):(s=n._locale._week.dow,o=n._locale._week.doy,c=yw(xn(),s,o),t=kg(e.gg,n._a[ur],c.year),i=kg(e.w,c.week),e.d!=null?(r=e.d,(r<0||r>6)&&(l=!0)):e.e!=null?(r=e.e+s,(e.e<0||e.e>6)&&(l=!0)):r=s),i<1||i>_c(t,s,o)?dt(n)._overflowWeeks=!0:l!=null?dt(n)._overflowWeekday=!0:(a=FG(t,i,r,s,o),n._a[ur]=a.year,n._dayOfYear=a.dayOfYear)}pe.ISO_8601=function(){};pe.RFC_2822=function(){};function AD(n){if(n._f===pe.ISO_8601){zG(n);return}if(n._f===pe.RFC_2822){UG(n);return}n._a=[],dt(n).empty=!0;var e=""+n._i,t,i,r,s,o,a=e.length,l=0,c,u;for(r=TG(n._f,n._locale).match(bD)||[],u=r.length,t=0;t<u;t++)s=r[t],i=(e.match(g0e(s,n))||[])[0],i&&(o=e.substr(0,e.indexOf(i)),o.length>0&&dt(n).unusedInput.push(o),e=e.slice(e.indexOf(i)+i.length),l+=i.length),lp[s]?(i?dt(n).empty=!1:dt(n).unusedTokens.push(s),m0e(s,i,n)):n._strict&&!i&&dt(n).unusedTokens.push(s);dt(n).charsLeftOver=a-l,e.length>0&&dt(n).unusedInput.push(e),n._a[Ai]<=12&&dt(n).bigHour===!0&&n._a[Ai]>0&&(dt(n).bigHour=void 0),dt(n).parsedDateParts=n._a.slice(0),dt(n).meridiem=n._meridiem,n._a[Ai]=MCe(n._locale,n._a[Ai],n._meridiem),c=dt(n).era,c!==null&&(n._a[ur]=n._locale.erasConvertYear(c,n._a[ur])),MD(n),TD(n)}function MCe(n,e,t){var i;return t==null?e:n.meridiemHour!=null?n.meridiemHour(e,t):(n.isPM!=null&&(i=n.isPM(t),i&&e<12&&(e+=12),!i&&e===12&&(e=0)),e)}function ACe(n){var e,t,i,r,s,o,a=!1,l=n._f.length;if(l===0){dt(n).invalidFormat=!0,n._d=new Date(NaN);return}for(r=0;r<l;r++)s=0,o=!1,e=pD({},n),n._useUTC!=null&&(e._useUTC=n._useUTC),e._f=n._f[r],AD(e),gD(e)&&(o=!0),s+=dt(e).charsLeftOver,s+=dt(e).unusedTokens.length*10,dt(e).score=s,a?s<i&&(i=s,t=e):(i==null||s<i||o)&&(i=s,t=e,o&&(a=!0));xu(n,t||e)}function PCe(n){if(!n._d){var e=vD(n._i),t=e.day===void 0?e.date:e.day;n._a=RG([e.year,e.month,t,e.hour,e.minute,e.second,e.millisecond],function(i){return i&&parseInt(i,10)}),MD(n)}}function ICe(n){var e=new dy(TD(GG(n)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function GG(n){var e=n._i,t=n._f;return n._locale=n._locale||Fc(n._l),e===null||t===void 0&&e===""?$1({nullInput:!0}):(typeof e=="string"&&(n._i=e=n._locale.preparse(e)),ia(e)?new dy(TD(e)):(hy(e)?n._d=e:na(t)?ACe(n):t?AD(n):OCe(n),gD(n)||(n._d=null),n))}function OCe(n){var e=n._i;Ur(e)?n._d=new Date(pe.now()):hy(e)?n._d=new Date(e.valueOf()):typeof e=="string"?ECe(n):na(e)?(n._a=RG(e.slice(0),function(t){return parseInt(t,10)}),MD(n)):jd(e)?PCe(n):Mc(e)?n._d=new Date(e):pe.createFromInputFallback(n)}function YG(n,e,t,i,r){var s={};return(e===!0||e===!1)&&(i=e,e=void 0),(t===!0||t===!1)&&(i=t,t=void 0),(jd(n)&&fD(n)||na(n)&&n.length===0)&&(n=void 0),s._isAMomentObject=!0,s._useUTC=s._isUTC=r,s._l=t,s._i=n,s._f=e,s._strict=i,ICe(s)}function xn(n,e,t,i){return YG(n,e,t,i,!1)}var kCe=po("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var n=xn.apply(null,arguments);return this.isValid()&&n.isValid()?n<this?this:n:$1()}),DCe=po("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var n=xn.apply(null,arguments);return this.isValid()&&n.isValid()?n>this?this:n:$1()});function KG(n,e){var t,i;if(e.length===1&&na(e[0])&&(e=e[0]),!e.length)return xn();for(t=e[0],i=1;i<e.length;++i)(!e[i].isValid()||e[i][n](t))&&(t=e[i]);return t}function LCe(){var n=[].slice.call(arguments,0);return KG("isBefore",n)}function NCe(){var n=[].slice.call(arguments,0);return KG("isAfter",n)}var HCe=function(){return Date.now?Date.now():+new Date},Im=["year","quarter","month","week","day","hour","minute","second","millisecond"];function $Ce(n){var e,t=!1,i,r=Im.length;for(e in n)if(Ft(n,e)&&!(si.call(Im,e)!==-1&&(n[e]==null||!isNaN(n[e]))))return!1;for(i=0;i<r;++i)if(n[Im[i]]){if(t)return!1;parseFloat(n[Im[i]])!==xt(n[Im[i]])&&(t=!0)}return!0}function FCe(){return this._isValid}function BCe(){return ua(NaN)}function G1(n){var e=vD(n),t=e.year||0,i=e.quarter||0,r=e.month||0,s=e.week||e.isoWeek||0,o=e.day||0,a=e.hour||0,l=e.minute||0,c=e.second||0,u=e.millisecond||0;this._isValid=$Ce(e),this._milliseconds=+u+c*1e3+l*6e4+a*1e3*60*60,this._days=+o+s*7,this._months=+r+i*3+t*12,this._data={},this._locale=Fc(),this._bubble()}function MS(n){return n instanceof G1}function hI(n){return n<0?Math.round(-1*n)*-1:Math.round(n)}function VCe(n,e,t){var i=Math.min(n.length,e.length),r=Math.abs(n.length-e.length),s=0,o;for(o=0;o<i;o++)xt(n[o])!==xt(e[o])&&s++;return s+r}function qG(n,e){je(n,0,0,function(){var t=this.utcOffset(),i="+";return t<0&&(t=-t,i="-"),i+cl(~~(t/60),2)+e+cl(~~t%60,2)})}qG("Z",":");qG("ZZ","");Le("Z",j1);Le("ZZ",j1);cn(["Z","ZZ"],function(n,e,t){t._useUTC=!0,t._tzm=PD(j1,n)});var WCe=/([\+\-]|\d\d)/gi;function PD(n,e){var t=(e||"").match(n),i,r,s;return t===null?null:(i=t[t.length-1]||[],r=(i+"").match(WCe)||["-",0,0],s=+(r[1]*60)+xt(r[2]),s===0?0:r[0]==="+"?s:-s)}function ID(n,e){var t,i;return e._isUTC?(t=e.clone(),i=(ia(n)||hy(n)?n.valueOf():xn(n).valueOf())-t.valueOf(),t._d.setTime(t._d.valueOf()+i),pe.updateOffset(t,!1),t):xn(n).local()}function dI(n){return-Math.round(n._d.getTimezoneOffset())}pe.updateOffset=function(){};function jCe(n,e,t){var i=this._offset||0,r;if(!this.isValid())return n!=null?this:NaN;if(n!=null){if(typeof n=="string"){if(n=PD(j1,n),n===null)return this}else Math.abs(n)<16&&!t&&(n=n*60);return!this._isUTC&&e&&(r=dI(this)),this._offset=n,this._isUTC=!0,r!=null&&this.add(r,"m"),i!==n&&(!e||this._changeInProgress?QG(this,ua(n-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,pe.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?i:dI(this)}function zCe(n,e){return n!=null?(typeof n!="string"&&(n=-n),this.utcOffset(n,e),this):-this.utcOffset()}function UCe(n){return this.utcOffset(0,n)}function GCe(n){return this._isUTC&&(this.utcOffset(0,n),this._isUTC=!1,n&&this.subtract(dI(this),"m")),this}function YCe(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var n=PD(d0e,this._i);n!=null?this.utcOffset(n):this.utcOffset(0,!0)}return this}function KCe(n){return this.isValid()?(n=n?xn(n).utcOffset():0,(this.utcOffset()-n)%60===0):!1}function qCe(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function XCe(){if(!Ur(this._isDSTShifted))return this._isDSTShifted;var n={},e;return pD(n,this),n=GG(n),n._a?(e=n._isUTC?Sl(n._a):xn(n._a),this._isDSTShifted=this.isValid()&&VCe(n._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function ZCe(){return this.isValid()?!this._isUTC:!1}function QCe(){return this.isValid()?this._isUTC:!1}function XG(){return this.isValid()?this._isUTC&&this._offset===0:!1}var JCe=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,eSe=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function ua(n,e){var t=n,i=null,r,s,o;return MS(n)?t={ms:n._milliseconds,d:n._days,M:n._months}:Mc(n)||!isNaN(+n)?(t={},e?t[e]=+n:t.milliseconds=+n):(i=JCe.exec(n))?(r=i[1]==="-"?-1:1,t={y:0,d:xt(i[za])*r,h:xt(i[Ai])*r,m:xt(i[qo])*r,s:xt(i[gc])*r,ms:xt(hI(i[Ed]*1e3))*r}):(i=eSe.exec(n))?(r=i[1]==="-"?-1:1,t={y:Rh(i[2],r),M:Rh(i[3],r),w:Rh(i[4],r),d:Rh(i[5],r),h:Rh(i[6],r),m:Rh(i[7],r),s:Rh(i[8],r)}):t==null?t={}:typeof t=="object"&&("from"in t||"to"in t)&&(o=tSe(xn(t.from),xn(t.to)),t={},t.ms=o.milliseconds,t.M=o.months),s=new G1(t),MS(n)&&Ft(n,"_locale")&&(s._locale=n._locale),MS(n)&&Ft(n,"_isValid")&&(s._isValid=n._isValid),s}ua.fn=G1.prototype;ua.invalid=BCe;function Rh(n,e){var t=n&&parseFloat(n.replace(",","."));return(isNaN(t)?0:t)*e}function YV(n,e){var t={};return t.months=e.month()-n.month()+(e.year()-n.year())*12,n.clone().add(t.months,"M").isAfter(e)&&--t.months,t.milliseconds=+e-+n.clone().add(t.months,"M"),t}function tSe(n,e){var t;return n.isValid()&&e.isValid()?(e=ID(e,n),n.isBefore(e)?t=YV(n,e):(t=YV(e,n),t.milliseconds=-t.milliseconds,t.months=-t.months),t):{milliseconds:0,months:0}}function ZG(n,e){return function(t,i){var r,s;return i!==null&&!isNaN(+i)&&(xG(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),s=t,t=i,i=s),r=ua(t,i),QG(this,r,n),this}}function QG(n,e,t,i){var r=e._milliseconds,s=hI(e._days),o=hI(e._months);n.isValid()&&(i=i??!0,o&&NG(n,vw(n,"Month")+o*t),s&&kG(n,"Date",vw(n,"Date")+s*t),r&&n._d.setTime(n._d.valueOf()+r*t),i&&pe.updateOffset(n,s||o))}var nSe=ZG(1,"add"),iSe=ZG(-1,"subtract");function JG(n){return typeof n=="string"||n instanceof String}function rSe(n){return ia(n)||hy(n)||JG(n)||Mc(n)||oSe(n)||sSe(n)||n===null||n===void 0}function sSe(n){var e=jd(n)&&!fD(n),t=!1,i=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],r,s,o=i.length;for(r=0;r<o;r+=1)s=i[r],t=t||Ft(n,s);return e&&t}function oSe(n){var e=na(n),t=!1;return e&&(t=n.filter(function(i){return!Mc(i)&&JG(n)}).length===0),e&&t}function aSe(n){var e=jd(n)&&!fD(n),t=!1,i=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],r,s;for(r=0;r<i.length;r+=1)s=i[r],t=t||Ft(n,s);return e&&t}function lSe(n,e){var t=n.diff(e,"days",!0);return t<-6?"sameElse":t<-1?"lastWeek":t<0?"lastDay":t<1?"sameDay":t<2?"nextDay":t<7?"nextWeek":"sameElse"}function cSe(n,e){arguments.length===1&&(arguments[0]?rSe(arguments[0])?(n=arguments[0],e=void 0):aSe(arguments[0])&&(e=arguments[0],n=void 0):(n=void 0,e=void 0));var t=n||xn(),i=ID(t,this).startOf("day"),r=pe.calendarFormat(this,i)||"sameElse",s=e&&(_l(e[r])?e[r].call(this,t):e[r]);return this.format(s||this.localeData().calendar(r,this,xn(t)))}function uSe(){return new dy(this)}function hSe(n,e){var t=ia(n)?n:xn(n);return this.isValid()&&t.isValid()?(e=mo(e)||"millisecond",e==="millisecond"?this.valueOf()>t.valueOf():t.valueOf()<this.clone().startOf(e).valueOf()):!1}function dSe(n,e){var t=ia(n)?n:xn(n);return this.isValid()&&t.isValid()?(e=mo(e)||"millisecond",e==="millisecond"?this.valueOf()<t.valueOf():this.clone().endOf(e).valueOf()<t.valueOf()):!1}function fSe(n,e,t,i){var r=ia(n)?n:xn(n),s=ia(e)?e:xn(e);return this.isValid()&&r.isValid()&&s.isValid()?(i=i||"()",(i[0]==="("?this.isAfter(r,t):!this.isBefore(r,t))&&(i[1]===")"?this.isBefore(s,t):!this.isAfter(s,t))):!1}function gSe(n,e){var t=ia(n)?n:xn(n),i;return this.isValid()&&t.isValid()?(e=mo(e)||"millisecond",e==="millisecond"?this.valueOf()===t.valueOf():(i=t.valueOf(),this.clone().startOf(e).valueOf()<=i&&i<=this.clone().endOf(e).valueOf())):!1}function pSe(n,e){return this.isSame(n,e)||this.isAfter(n,e)}function mSe(n,e){return this.isSame(n,e)||this.isBefore(n,e)}function bSe(n,e,t){var i,r,s;if(!this.isValid())return NaN;if(i=ID(n,this),!i.isValid())return NaN;switch(r=(i.utcOffset()-this.utcOffset())*6e4,e=mo(e),e){case"year":s=AS(this,i)/12;break;case"month":s=AS(this,i);break;case"quarter":s=AS(this,i)/3;break;case"second":s=(this-i)/1e3;break;case"minute":s=(this-i)/6e4;break;case"hour":s=(this-i)/36e5;break;case"day":s=(this-i-r)/864e5;break;case"week":s=(this-i-r)/6048e5;break;default:s=this-i}return t?s:Xs(s)}function AS(n,e){if(n.date()<e.date())return-AS(e,n);var t=(e.year()-n.year())*12+(e.month()-n.month()),i=n.clone().add(t,"months"),r,s;return e-i<0?(r=n.clone().add(t-1,"months"),s=(e-i)/(i-r)):(r=n.clone().add(t+1,"months"),s=(e-i)/(r-i)),-(t+s)||0}pe.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";pe.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function vSe(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function wSe(n){if(!this.isValid())return null;var e=n!==!0,t=e?this.clone().utc():this;return t.year()<0||t.year()>9999?TS(t,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):_l(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",TS(t,"Z")):TS(t,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function ySe(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var n="moment",e="",t,i,r,s;return this.isLocal()||(n=this.utcOffset()===0?"moment.utc":"moment.parseZone",e="Z"),t="["+n+'("]',i=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",r="-MM-DD[T]HH:mm:ss.SSS",s=e+'[")]',this.format(t+i+r+s)}function CSe(n){n||(n=this.isUtc()?pe.defaultFormatUtc:pe.defaultFormat);var e=TS(this,n);return this.localeData().postformat(e)}function SSe(n,e){return this.isValid()&&(ia(n)&&n.isValid()||xn(n).isValid())?ua({to:this,from:n}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function _Se(n){return this.from(xn(),n)}function RSe(n,e){return this.isValid()&&(ia(n)&&n.isValid()||xn(n).isValid())?ua({from:this,to:n}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function ESe(n){return this.to(xn(),n)}function e9(n){var e;return n===void 0?this._locale._abbr:(e=Fc(n),e!=null&&(this._locale=e),this)}var t9=po("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(n){return n===void 0?this.localeData():this.locale(n)});function n9(){return this._locale}var X_=1e3,cp=60*X_,Z_=60*cp,i9=(365*400+97)*24*Z_;function up(n,e){return(n%e+e)%e}function r9(n,e,t){return n<100&&n>=0?new Date(n+400,e,t)-i9:new Date(n,e,t).valueOf()}function s9(n,e,t){return n<100&&n>=0?Date.UTC(n+400,e,t)-i9:Date.UTC(n,e,t)}function xSe(n){var e,t;if(n=mo(n),n===void 0||n==="millisecond"||!this.isValid())return this;switch(t=this._isUTC?s9:r9,n){case"year":e=t(this.year(),0,1);break;case"quarter":e=t(this.year(),this.month()-this.month()%3,1);break;case"month":e=t(this.year(),this.month(),1);break;case"week":e=t(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=t(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=t(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=up(e+(this._isUTC?0:this.utcOffset()*cp),Z_);break;case"minute":e=this._d.valueOf(),e-=up(e,cp);break;case"second":e=this._d.valueOf(),e-=up(e,X_);break}return this._d.setTime(e),pe.updateOffset(this,!0),this}function TSe(n){var e,t;if(n=mo(n),n===void 0||n==="millisecond"||!this.isValid())return this;switch(t=this._isUTC?s9:r9,n){case"year":e=t(this.year()+1,0,1)-1;break;case"quarter":e=t(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=t(this.year(),this.month()+1,1)-1;break;case"week":e=t(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=t(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=t(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=Z_-up(e+(this._isUTC?0:this.utcOffset()*cp),Z_)-1;break;case"minute":e=this._d.valueOf(),e+=cp-up(e,cp)-1;break;case"second":e=this._d.valueOf(),e+=X_-up(e,X_)-1;break}return this._d.setTime(e),pe.updateOffset(this,!0),this}function MSe(){return this._d.valueOf()-(this._offset||0)*6e4}function ASe(){return Math.floor(this.valueOf()/1e3)}function PSe(){return new Date(this.valueOf())}function ISe(){var n=this;return[n.year(),n.month(),n.date(),n.hour(),n.minute(),n.second(),n.millisecond()]}function OSe(){var n=this;return{years:n.year(),months:n.month(),date:n.date(),hours:n.hours(),minutes:n.minutes(),seconds:n.seconds(),milliseconds:n.milliseconds()}}function kSe(){return this.isValid()?this.toISOString():null}function DSe(){return gD(this)}function LSe(){return xu({},dt(this))}function NSe(){return dt(this).overflow}function HSe(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}je("N",0,0,"eraAbbr");je("NN",0,0,"eraAbbr");je("NNN",0,0,"eraAbbr");je("NNNN",0,0,"eraName");je("NNNNN",0,0,"eraNarrow");je("y",["y",1],"yo","eraYear");je("y",["yy",2],0,"eraYear");je("y",["yyy",3],0,"eraYear");je("y",["yyyy",4],0,"eraYear");Le("N",OD);Le("NN",OD);Le("NNN",OD);Le("NNNN",KSe);Le("NNNNN",qSe);cn(["N","NN","NNN","NNNN","NNNNN"],function(n,e,t,i){var r=t._locale.erasParse(n,i,t._strict);r?dt(t).era=r:dt(t).invalidEra=n});Le("y",Jp);Le("yy",Jp);Le("yyy",Jp);Le("yyyy",Jp);Le("yo",XSe);cn(["y","yy","yyy","yyyy"],ur);cn(["yo"],function(n,e,t,i){var r;t._locale._eraYearOrdinalRegex&&(r=n.match(t._locale._eraYearOrdinalRegex)),t._locale.eraYearOrdinalParse?e[ur]=t._locale.eraYearOrdinalParse(n,r):e[ur]=parseInt(n,10)});function $Se(n,e){var t,i,r,s=this._eras||Fc("en")._eras;for(t=0,i=s.length;t<i;++t){switch(typeof s[t].since){case"string":r=pe(s[t].since).startOf("day"),s[t].since=r.valueOf();break}switch(typeof s[t].until){case"undefined":s[t].until=1/0;break;case"string":r=pe(s[t].until).startOf("day").valueOf(),s[t].until=r.valueOf();break}}return s}function FSe(n,e,t){var i,r,s=this.eras(),o,a,l;for(n=n.toUpperCase(),i=0,r=s.length;i<r;++i)if(o=s[i].name.toUpperCase(),a=s[i].abbr.toUpperCase(),l=s[i].narrow.toUpperCase(),t)switch(e){case"N":case"NN":case"NNN":if(a===n)return s[i];break;case"NNNN":if(o===n)return s[i];break;case"NNNNN":if(l===n)return s[i];break}else if([o,a,l].indexOf(n)>=0)return s[i]}function BSe(n,e){var t=n.since<=n.until?1:-1;return e===void 0?pe(n.since).year():pe(n.since).year()+(e-n.offset)*t}function VSe(){var n,e,t,i=this.localeData().eras();for(n=0,e=i.length;n<e;++n)if(t=this.clone().startOf("day").valueOf(),i[n].since<=t&&t<=i[n].until||i[n].until<=t&&t<=i[n].since)return i[n].name;return""}function WSe(){var n,e,t,i=this.localeData().eras();for(n=0,e=i.length;n<e;++n)if(t=this.clone().startOf("day").valueOf(),i[n].since<=t&&t<=i[n].until||i[n].until<=t&&t<=i[n].since)return i[n].narrow;return""}function jSe(){var n,e,t,i=this.localeData().eras();for(n=0,e=i.length;n<e;++n)if(t=this.clone().startOf("day").valueOf(),i[n].since<=t&&t<=i[n].until||i[n].until<=t&&t<=i[n].since)return i[n].abbr;return""}function zSe(){var n,e,t,i,r=this.localeData().eras();for(n=0,e=r.length;n<e;++n)if(t=r[n].since<=r[n].until?1:-1,i=this.clone().startOf("day").valueOf(),r[n].since<=i&&i<=r[n].until||r[n].until<=i&&i<=r[n].since)return(this.year()-pe(r[n].since).year())*t+r[n].offset;return this.year()}function USe(n){return Ft(this,"_erasNameRegex")||kD.call(this),n?this._erasNameRegex:this._erasRegex}function GSe(n){return Ft(this,"_erasAbbrRegex")||kD.call(this),n?this._erasAbbrRegex:this._erasRegex}function YSe(n){return Ft(this,"_erasNarrowRegex")||kD.call(this),n?this._erasNarrowRegex:this._erasRegex}function OD(n,e){return e.erasAbbrRegex(n)}function KSe(n,e){return e.erasNameRegex(n)}function qSe(n,e){return e.erasNarrowRegex(n)}function XSe(n,e){return e._eraYearOrdinalRegex||Jp}function kD(){var n=[],e=[],t=[],i=[],r,s,o,a,l,c=this.eras();for(r=0,s=c.length;r<s;++r)o=Sc(c[r].name),a=Sc(c[r].abbr),l=Sc(c[r].narrow),e.push(o),n.push(a),t.push(l),i.push(o),i.push(a),i.push(l);this._erasRegex=new RegExp("^("+i.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+e.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+t.join("|")+")","i")}je(0,["gg",2],0,function(){return this.weekYear()%100});je(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Y1(n,e){je(0,[n,n.length],0,e)}Y1("gggg","weekYear");Y1("ggggg","weekYear");Y1("GGGG","isoWeekYear");Y1("GGGGG","isoWeekYear");Le("G",W1);Le("g",W1);Le("GG",Tn,Ms);Le("gg",Tn,Ms);Le("GGGG",yD,wD);Le("gggg",yD,wD);Le("GGGGG",V1,F1);Le("ggggg",V1,F1);gy(["gggg","ggggg","GGGG","GGGGG"],function(n,e,t,i){e[i.substr(0,2)]=xt(n)});gy(["gg","GG"],function(n,e,t,i){e[i]=pe.parseTwoDigitYear(n)});function ZSe(n){return o9.call(this,n,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function QSe(n){return o9.call(this,n,this.isoWeek(),this.isoWeekday(),1,4)}function JSe(){return _c(this.year(),1,4)}function e_e(){return _c(this.isoWeekYear(),1,4)}function t_e(){var n=this.localeData()._week;return _c(this.year(),n.dow,n.doy)}function n_e(){var n=this.localeData()._week;return _c(this.weekYear(),n.dow,n.doy)}function o9(n,e,t,i,r){var s;return n==null?yw(this,i,r).year:(s=_c(n,i,r),e>s&&(e=s),i_e.call(this,n,e,t,i,r))}function i_e(n,e,t,i,r){var s=FG(n,e,t,i,r),o=ww(s.year,0,s.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}je("Q",0,"Qo","quarter");Le("Q",MG);cn("Q",function(n,e){e[fc]=(xt(n)-1)*3});function r_e(n){return n==null?Math.ceil((this.month()+1)/3):this.month((n-1)*3+this.month()%3)}je("D",["DD",2],"Do","date");Le("D",Tn,em);Le("DD",Tn,Ms);Le("Do",function(n,e){return n?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient});cn(["D","DD"],za);cn("Do",function(n,e){e[za]=xt(n.match(Tn)[0])});var a9=tm("Date",!0);je("DDD",["DDDD",3],"DDDo","dayOfYear");Le("DDD",B1);Le("DDDD",AG);cn(["DDD","DDDD"],function(n,e,t){t._dayOfYear=xt(n)});function s_e(n){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return n==null?e:this.add(n-e,"d")}je("m",["mm",2],0,"minute");Le("m",Tn,CD);Le("mm",Tn,Ms);cn(["m","mm"],qo);var o_e=tm("Minutes",!1);je("s",["ss",2],0,"second");Le("s",Tn,CD);Le("ss",Tn,Ms);cn(["s","ss"],gc);var a_e=tm("Seconds",!1);je("S",0,0,function(){return~~(this.millisecond()/100)});je(0,["SS",2],0,function(){return~~(this.millisecond()/10)});je(0,["SSS",3],0,"millisecond");je(0,["SSSS",4],0,function(){return this.millisecond()*10});je(0,["SSSSS",5],0,function(){return this.millisecond()*100});je(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});je(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});je(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});je(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});Le("S",B1,MG);Le("SS",B1,Ms);Le("SSS",B1,AG);var Tu,l9;for(Tu="SSSS";Tu.length<=9;Tu+="S")Le(Tu,Jp);function l_e(n,e){e[Ed]=xt(("0."+n)*1e3)}for(Tu="S";Tu.length<=9;Tu+="S")cn(Tu,l_e);l9=tm("Milliseconds",!1);je("z",0,0,"zoneAbbr");je("zz",0,0,"zoneName");function c_e(){return this._isUTC?"UTC":""}function u_e(){return this._isUTC?"Coordinated Universal Time":""}var ye=dy.prototype;ye.add=nSe;ye.calendar=cSe;ye.clone=uSe;ye.diff=bSe;ye.endOf=TSe;ye.format=CSe;ye.from=SSe;ye.fromNow=_Se;ye.to=RSe;ye.toNow=ESe;ye.get=y0e;ye.invalidAt=NSe;ye.isAfter=hSe;ye.isBefore=dSe;ye.isBetween=fSe;ye.isSame=gSe;ye.isSameOrAfter=pSe;ye.isSameOrBefore=mSe;ye.isValid=DSe;ye.lang=t9;ye.locale=e9;ye.localeData=n9;ye.max=DCe;ye.min=kCe;ye.parsingFlags=LSe;ye.set=C0e;ye.startOf=xSe;ye.subtract=iSe;ye.toArray=ISe;ye.toObject=OSe;ye.toDate=PSe;ye.toISOString=wSe;ye.inspect=ySe;typeof Symbol<"u"&&Symbol.for!=null&&(ye[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});ye.toJSON=kSe;ye.toString=vSe;ye.unix=ASe;ye.valueOf=MSe;ye.creationData=HSe;ye.eraName=VSe;ye.eraNarrow=WSe;ye.eraAbbr=jSe;ye.eraYear=zSe;ye.year=OG;ye.isLeapYear=w0e;ye.weekYear=ZSe;ye.isoWeekYear=QSe;ye.quarter=ye.quarters=r_e;ye.month=HG;ye.daysInMonth=P0e;ye.week=ye.weeks=$0e;ye.isoWeek=ye.isoWeeks=F0e;ye.weeksInYear=t_e;ye.weeksInWeekYear=n_e;ye.isoWeeksInYear=JSe;ye.isoWeeksInISOWeekYear=e_e;ye.date=a9;ye.day=ye.days=Q0e;ye.weekday=J0e;ye.isoWeekday=eCe;ye.dayOfYear=s_e;ye.hour=ye.hours=aCe;ye.minute=ye.minutes=o_e;ye.second=ye.seconds=a_e;ye.millisecond=ye.milliseconds=l9;ye.utcOffset=jCe;ye.utc=UCe;ye.local=GCe;ye.parseZone=YCe;ye.hasAlignedHourOffset=KCe;ye.isDST=qCe;ye.isLocal=ZCe;ye.isUtcOffset=QCe;ye.isUtc=XG;ye.isUTC=XG;ye.zoneAbbr=c_e;ye.zoneName=u_e;ye.dates=po("dates accessor is deprecated. Use date instead.",a9);ye.months=po("months accessor is deprecated. Use month instead",HG);ye.years=po("years accessor is deprecated. Use year instead",OG);ye.zone=po("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",zCe);ye.isDSTShifted=po("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",XCe);function h_e(n){return xn(n*1e3)}function d_e(){return xn.apply(null,arguments).parseZone()}function c9(n){return n}var Bt=mD.prototype;Bt.calendar=Zye;Bt.longDateFormat=t0e;Bt.invalidDate=i0e;Bt.ordinal=o0e;Bt.preparse=c9;Bt.postformat=c9;Bt.relativeTime=l0e;Bt.pastFuture=c0e;Bt.set=qye;Bt.eras=$Se;Bt.erasParse=FSe;Bt.erasConvertYear=BSe;Bt.erasAbbrRegex=GSe;Bt.erasNameRegex=USe;Bt.erasNarrowRegex=YSe;Bt.months=x0e;Bt.monthsShort=T0e;Bt.monthsParse=A0e;Bt.monthsRegex=O0e;Bt.monthsShortRegex=I0e;Bt.week=D0e;Bt.firstDayOfYear=H0e;Bt.firstDayOfWeek=N0e;Bt.weekdays=Y0e;Bt.weekdaysMin=q0e;Bt.weekdaysShort=K0e;Bt.weekdaysParse=Z0e;Bt.weekdaysRegex=tCe;Bt.weekdaysShortRegex=nCe;Bt.weekdaysMinRegex=iCe;Bt.isPM=sCe;Bt.meridiem=lCe;function Q_(n,e,t,i){var r=Fc(),s=Sl().set(i,e);return r[t](s,n)}function u9(n,e,t){if(Mc(n)&&(e=n,n=void 0),n=n||"",e!=null)return Q_(n,e,t,"month");var i,r=[];for(i=0;i<12;i++)r[i]=Q_(n,i,t,"month");return r}function DD(n,e,t,i){typeof n=="boolean"?(Mc(e)&&(t=e,e=void 0),e=e||""):(e=n,t=e,n=!1,Mc(e)&&(t=e,e=void 0),e=e||"");var r=Fc(),s=n?r._week.dow:0,o,a=[];if(t!=null)return Q_(e,(t+s)%7,i,"day");for(o=0;o<7;o++)a[o]=Q_(e,(o+s)%7,i,"day");return a}function f_e(n,e){return u9(n,e,"months")}function g_e(n,e){return u9(n,e,"monthsShort")}function p_e(n,e,t){return DD(n,e,t,"weekdays")}function m_e(n,e,t){return DD(n,e,t,"weekdaysShort")}function b_e(n,e,t){return DD(n,e,t,"weekdaysMin")}Lu("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(n){var e=n%10,t=xt(n%100/10)===1?"th":e===1?"st":e===2?"nd":e===3?"rd":"th";return n+t}});pe.lang=po("moment.lang is deprecated. Use moment.locale instead.",Lu);pe.langData=po("moment.langData is deprecated. Use moment.localeData instead.",Fc);var Al=Math.abs;function v_e(){var n=this._data;return this._milliseconds=Al(this._milliseconds),this._days=Al(this._days),this._months=Al(this._months),n.milliseconds=Al(n.milliseconds),n.seconds=Al(n.seconds),n.minutes=Al(n.minutes),n.hours=Al(n.hours),n.months=Al(n.months),n.years=Al(n.years),this}function h9(n,e,t,i){var r=ua(e,t);return n._milliseconds+=i*r._milliseconds,n._days+=i*r._days,n._months+=i*r._months,n._bubble()}function w_e(n,e){return h9(this,n,e,1)}function y_e(n,e){return h9(this,n,e,-1)}function KV(n){return n<0?Math.floor(n):Math.ceil(n)}function C_e(){var n=this._milliseconds,e=this._days,t=this._months,i=this._data,r,s,o,a,l;return n>=0&&e>=0&&t>=0||n<=0&&e<=0&&t<=0||(n+=KV(fI(t)+e)*864e5,e=0,t=0),i.milliseconds=n%1e3,r=Xs(n/1e3),i.seconds=r%60,s=Xs(r/60),i.minutes=s%60,o=Xs(s/60),i.hours=o%24,e+=Xs(o/24),l=Xs(d9(e)),t+=l,e-=KV(fI(l)),a=Xs(t/12),t%=12,i.days=e,i.months=t,i.years=a,this}function d9(n){return n*4800/146097}function fI(n){return n*146097/4800}function S_e(n){if(!this.isValid())return NaN;var e,t,i=this._milliseconds;if(n=mo(n),n==="month"||n==="quarter"||n==="year")switch(e=this._days+i/864e5,t=this._months+d9(e),n){case"month":return t;case"quarter":return t/3;case"year":return t/12}else switch(e=this._days+Math.round(fI(this._months)),n){case"week":return e/7+i/6048e5;case"day":return e+i/864e5;case"hour":return e*24+i/36e5;case"minute":return e*1440+i/6e4;case"second":return e*86400+i/1e3;case"millisecond":return Math.floor(e*864e5)+i;default:throw new Error("Unknown unit "+n)}}function Bc(n){return function(){return this.as(n)}}var f9=Bc("ms"),__e=Bc("s"),R_e=Bc("m"),E_e=Bc("h"),x_e=Bc("d"),T_e=Bc("w"),M_e=Bc("M"),A_e=Bc("Q"),P_e=Bc("y"),I_e=f9;function O_e(){return ua(this)}function k_e(n){return n=mo(n),this.isValid()?this[n+"s"]():NaN}function Pf(n){return function(){return this.isValid()?this._data[n]:NaN}}var D_e=Pf("milliseconds"),L_e=Pf("seconds"),N_e=Pf("minutes"),H_e=Pf("hours"),$_e=Pf("days"),F_e=Pf("months"),B_e=Pf("years");function V_e(){return Xs(this.days()/7)}var Zl=Math.round,Zg={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function W_e(n,e,t,i,r){return r.relativeTime(e||1,!!t,n,i)}function j_e(n,e,t,i){var r=ua(n).abs(),s=Zl(r.as("s")),o=Zl(r.as("m")),a=Zl(r.as("h")),l=Zl(r.as("d")),c=Zl(r.as("M")),u=Zl(r.as("w")),h=Zl(r.as("y")),d=s<=t.ss&&["s",s]||s<t.s&&["ss",s]||o<=1&&["m"]||o<t.m&&["mm",o]||a<=1&&["h"]||a<t.h&&["hh",a]||l<=1&&["d"]||l<t.d&&["dd",l];return t.w!=null&&(d=d||u<=1&&["w"]||u<t.w&&["ww",u]),d=d||c<=1&&["M"]||c<t.M&&["MM",c]||h<=1&&["y"]||["yy",h],d[2]=e,d[3]=+n>0,d[4]=i,W_e.apply(null,d)}function z_e(n){return n===void 0?Zl:typeof n=="function"?(Zl=n,!0):!1}function U_e(n,e){return Zg[n]===void 0?!1:e===void 0?Zg[n]:(Zg[n]=e,n==="s"&&(Zg.ss=e-1),!0)}function G_e(n,e){if(!this.isValid())return this.localeData().invalidDate();var t=!1,i=Zg,r,s;return typeof n=="object"&&(e=n,n=!1),typeof n=="boolean"&&(t=n),typeof e=="object"&&(i=Object.assign({},Zg,e),e.s!=null&&e.ss==null&&(i.ss=e.s-1)),r=this.localeData(),s=j_e(this,!t,i,r),t&&(s=r.pastFuture(+this,s)),r.postformat(s)}var wT=Math.abs;function zf(n){return(n>0)-(n<0)||+n}function K1(){if(!this.isValid())return this.localeData().invalidDate();var n=wT(this._milliseconds)/1e3,e=wT(this._days),t=wT(this._months),i,r,s,o,a=this.asSeconds(),l,c,u,h;return a?(i=Xs(n/60),r=Xs(i/60),n%=60,i%=60,s=Xs(t/12),t%=12,o=n?n.toFixed(3).replace(/\.?0+$/,""):"",l=a<0?"-":"",c=zf(this._months)!==zf(a)?"-":"",u=zf(this._days)!==zf(a)?"-":"",h=zf(this._milliseconds)!==zf(a)?"-":"",l+"P"+(s?c+s+"Y":"")+(t?c+t+"M":"")+(e?u+e+"D":"")+(r||i||n?"T":"")+(r?h+r+"H":"")+(i?h+i+"M":"")+(n?h+o+"S":"")):"P0D"}var It=G1.prototype;It.isValid=FCe;It.abs=v_e;It.add=w_e;It.subtract=y_e;It.as=S_e;It.asMilliseconds=f9;It.asSeconds=__e;It.asMinutes=R_e;It.asHours=E_e;It.asDays=x_e;It.asWeeks=T_e;It.asMonths=M_e;It.asQuarters=A_e;It.asYears=P_e;It.valueOf=I_e;It._bubble=C_e;It.clone=O_e;It.get=k_e;It.milliseconds=D_e;It.seconds=L_e;It.minutes=N_e;It.hours=H_e;It.days=$_e;It.weeks=V_e;It.months=F_e;It.years=B_e;It.humanize=G_e;It.toISOString=K1;It.toString=K1;It.toJSON=K1;It.locale=e9;It.localeData=n9;It.toIsoString=po("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",K1);It.lang=t9;je("X",0,0,"unix");je("x",0,0,"valueOf");Le("x",W1);Le("X",f0e);cn("X",function(n,e,t){t._d=new Date(parseFloat(n)*1e3)});cn("x",function(n,e,t){t._d=new Date(xt(n))});//! moment.js
pe.version="2.30.1";Yye(xn);pe.fn=ye;pe.min=LCe;pe.max=NCe;pe.now=HCe;pe.utc=Sl;pe.unix=h_e;pe.months=f_e;pe.isDate=hy;pe.locale=Lu;pe.invalid=$1;pe.duration=ua;pe.isMoment=ia;pe.weekdays=p_e;pe.parseZone=d_e;pe.localeData=Fc;pe.isDuration=MS;pe.monthsShort=g_e;pe.weekdaysMin=b_e;pe.defineLocale=xD;pe.updateLocale=dCe;pe.locales=fCe;pe.weekdaysShort=m_e;pe.normalizeUnits=mo;pe.relativeTimeRounding=z_e;pe.relativeTimeThreshold=U_e;pe.calendarFormat=lSe;pe.prototype=ye;pe.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};function g9(n){const e=n.length;let t=0;for(;t<e;)n[t]=[n[t]],t+=1}function gI(n,e){const t=e.length;let i=0;for(;i<t;)n.push(e[i]),i+=1}function Tv(n){const e=[];if(!n||n.length===0||!n[0]||n[0].length===0)return e;const t=n.length,i=n[0].length;for(let r=0;r<t;r++)for(let s=0;s<i;s++)e[s]||(e[s]=[]),e[s][r]=n[r][s];return e}function ci(n,e,t,i){let r=-1,s=n,o=t;Array.isArray(n)||(s=Array.from(n));const a=s.length;for(i&&a&&(r+=1,o=s[r]),r+=1;r<a;)o=e(o,s[r],r,s),r+=1;return o}function Ac(n,e){let t=0,i=n;Array.isArray(n)||(i=Array.from(n));const r=i.length,s=[];let o=-1;for(;t<r;){const a=i[t];e(a,t,i)&&(o+=1,s[o]=a),t+=1}return s}function vt(n,e){let t=0,i=n;Array.isArray(n)||(i=Array.from(n));const r=i.length,s=[];let o=-1;for(;t<r;){const a=i[t];o+=1,s[o]=e(a,t,i),t+=1}return s}function q(n,e){let t=0,i=n;Array.isArray(n)||(i=Array.from(n));const r=i.length;for(;t<r&&e(i[t],t,i)!==!1;)t+=1;return n}function p9(n){return ci(n,(e,t)=>e+t,0)}function Y_e(n){return ci(n,(e,t)=>e>t?e:t,Array.isArray(n)?n[0]:void 0)}function K_e(n){return ci(n,(e,t)=>e<t?e:t,Array.isArray(n)?n[0]:void 0)}function q_e(n){return n.length?p9(n)/n.length:0}function m9(n){return ci(n,(e,t)=>e.concat(Array.isArray(t)?m9(t):t),[])}function LD(n){const e=[];return q(n,t=>{e.indexOf(t)===-1&&e.push(t)}),e}function pI(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];const[i,...r]=[...e];let s=i;return q(r,o=>{s=s.filter(a=>!o.includes(a))}),s}function X_e(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];const[i,...r]=[...e];let s=i;return q(r,o=>{s=s.filter(a=>o.includes(a))}),s}function Z_e(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];const[i,...r]=[...e],s=new Set(i);return q(r,o=>{q(o,a=>{s.has(a)||s.add(a)})}),Array.from(s)}function mI(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:" ";return n.split(e)}const Q_e=Object.freeze(Object.defineProperty({__proto__:null,arrayAvg:q_e,arrayEach:q,arrayFilter:Ac,arrayFlatten:m9,arrayMap:vt,arrayMax:Y_e,arrayMin:K_e,arrayReduce:ci,arraySum:p9,arrayUnique:LD,extendArray:gI,getDifferenceOfArrays:pI,getIntersectionOfArrays:X_e,getUnionOfArrays:Z_e,pivot:Tv,stringToArray:mI,to2dArray:g9},Symbol.toStringTag,{value:"Module"}));function Kt(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];return ci(n,(s,o,a)=>{const l=o.replace(/\r?\n\s*/g,""),c=t[a]?t[a]:"";return s+l+c},"").trim()}function jn(n){let e;switch(typeof n){case"string":case"number":e=`${n}`;break;case"object":e=n===null?"":n.toString();break;case"undefined":e="";break;default:e=n.toString();break}return e}function De(n){return typeof n<"u"}function fn(n){return typeof n>"u"}function zn(n){return n===null||n===""||fn(n)}function b9(n){return Object.prototype.toString.call(n)==="[object RegExp]"}const Yb="length",Mv=n=>parseInt(n,16),qV=n=>parseInt(n,10),J_=(n,e,t)=>n.substr(e,t),Av=n=>n.codePointAt(0)-65,bI=n=>`${n}`.replace(/\-/g,""),J_e=n=>Mv(J_(bI(n),Mv("12"),Av("F")))/(Mv(J_(bI(n),Av("B"),~~![][Yb]))||9),eRe=()=>typeof location<"u"&&/^([a-z0-9\-]+\.)?\x68\x61\x6E\x64\x73\x6F\x6E\x74\x61\x62\x6C\x65\x2E\x63\x6F\x6D$/i.test(location.host);let XV=!1;const ZV={invalid:()=>Kt`
    The license key for Handsontable is invalid.\x20
    If you need any help, contact us at support@handsontable.com.`,expired:n=>{let{keyValidityDate:e,hotVersion:t}=n;return Kt`
    The license key for Handsontable expired on ${e}, and is not valid for the installed\x20
    version ${t}. Renew your license key at handsontable.com or downgrade to a version released prior\x20
    to ${e}. If you need any help, contact us at sales@handsontable.com.`},missing:()=>Kt`
    The license key for Handsontable is missing. Use your purchased key to activate the product.\x20
    Alternatively, you can activate Handsontable to use for non-commercial purposes by\x20
    passing the key: 'non-commercial-and-evaluation'. If you need any help, contact\x20
    us at support@handsontable.com.`,non_commercial:()=>""},QV={invalid:()=>Kt`
    The license key for Handsontable is invalid.\x20
    <a href="https://handsontable.com/docs/tutorial-license-key.html" target="_blank">Read more</a> on how to\x20
    install it properly or contact us at <a href="mailto:support@handsontable.com">support@handsontable.com</a>.`,expired:n=>{let{keyValidityDate:e,hotVersion:t}=n;return Kt`
    The license key for Handsontable expired on ${e}, and is not valid for the installed\x20
    version ${t}. <a href="https://handsontable.com/pricing" target="_blank">Renew</a> your\x20
    license key or downgrade to a version released prior to ${e}. If you need any\x20
    help, contact us at <a href="mailto:sales@handsontable.com">sales@handsontable.com</a>.`},missing:()=>Kt`
    The license key for Handsontable is missing. Use your purchased key to activate the product.\x20
    Alternatively, you can activate Handsontable to use for non-commercial purposes by\x20
    passing the key: 'non-commercial-and-evaluation'.\x20
    <a href="https://handsontable.com/docs/tutorial-license-key.html" target="_blank">Read more</a> about it in\x20
    the documentation or contact us at <a href="mailto:support@handsontable.com">support@handsontable.com</a>.`,non_commercial:()=>""};function v9(n,e){const t=!zn(n),i=typeof n=="string"&&n.toLowerCase()==="non-commercial-and-evaluation",r="14.6.1";let s,o="invalid",a="invalid";n=bI(n||"");const l=tRe(n);if(t||i||l)if(l){const c=pe("17/10/2024","DD/MM/YYYY"),u=Math.floor(c.toDate().getTime()/864e5),h=J_e(n);s=pe((h+1)*864e5,"x").format("MMMM DD, YYYY"),u>h?(o="expired",a="expired"):(o="valid",a="valid")}else i?(o="non_commercial",a="valid"):(o="invalid",a="invalid");else o="missing",a="missing";if(eRe()&&(o="valid",a="valid"),!XV&&o!=="valid"&&(ZV[o]({keyValidityDate:s,hotVersion:r})&&console[o==="non_commercial"?"info":"warn"](ZV[o]({keyValidityDate:s,hotVersion:r})),XV=!0),a!=="valid"&&e.parentNode&&QV[a]({keyValidityDate:s,hotVersion:r})){const u=document.createElement("div");u.className="hot-display-license-info",u.innerHTML=QV[a]({keyValidityDate:s,hotVersion:r}),e.parentNode.insertBefore(u,e.nextSibling)}}function tRe(n){let e=[][Yb],t=e;if(n[Yb]!==Av("Z"))return!1;for(let i="",r="B<H4P+".split(""),s=Av(r.shift());s;s=Av(r.shift()||"A"))--s<""[Yb]?t=t|(qV(`${qV(Mv(i)+(Mv(J_(n,Math.abs(s),2))+[]).padStart(2,"0"))}`)%97||2)>>1:i=J_(n,s,s?r[Yb]===1?9:8:6);return t===e}const nRe=Object.freeze(Object.defineProperty({__proto__:null,_injectProductInfo:v9,isDefined:De,isEmpty:zn,isRegExp:b9,isUndefined:fn,stringify:jn},Symbol.toStringTag,{value:"Module"}));function pr(n){return n[0].toUpperCase()+n.substr(1)}function iRe(){const n=[];for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];let r=t.length;for(;r;){r-=1;const s=jn(t[r]).toLowerCase();n.indexOf(s)===-1&&n.push(s)}return n.length===1}function ND(){function n(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}return n()+n()+n()+n()}function HD(n){return/^([0-9][0-9]?%$)|(^100%$)/.test(n)}function $D(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return`${n}`.replace(/(?:\\)?\[([^[\]]+)]/g,(t,i)=>t.charAt(0)==="\\"?t.substr(1,t.length-1):e[i]===void 0?"":e[i])}function vI(n){return q1(`${n}`,{ALLOWED_TAGS:[]})}function q1(n,e){return Gye.sanitize(n,e)}const rRe=Object.freeze(Object.defineProperty({__proto__:null,equalsIgnoreCase:iRe,isPercentValue:HD,randomString:ND,sanitize:q1,stripTags:vI,substitute:$D,toUpperCaseFirst:pr},Symbol.toStringTag,{value:"Module"})),nm=n=>["tabindex",n],sRe=()=>["role","treegrid"],qa=()=>["role","presentation"],oRe=()=>["role","gridcell"],aRe=()=>["role","rowheader"],w9=()=>["role","rowgroup"],lRe=()=>["role","columnheader"],wI=()=>["role","row"],cRe=()=>["role","menu"],uRe=()=>["role","menuitem"],hRe=()=>["role","menuitemcheckbox"],dRe=()=>["role","combobox"],y9=()=>["role","listbox"],fRe=()=>["role","option"],gRe=()=>["role","checkbox"],pRe=()=>["scope","col"],mRe=()=>["scope","row"],bRe=()=>["type","text"],eR=n=>["aria-label",n],If=()=>["aria-hidden","true"],vRe=()=>["aria-disabled","true"],wRe=()=>["aria-multiselectable","true"],C9=n=>["aria-haspopup",n],S9=n=>["aria-rowcount",n],X1=n=>["aria-colcount",n],_9=n=>["aria-rowindex",n],FD=n=>["aria-colindex",n],io=n=>["aria-expanded",n],yRe=n=>["aria-sort",n],JV=()=>["aria-readonly","true"],e3=()=>["aria-invalid","true"],R9=n=>["aria-checked",n],BD=()=>["aria-selected","true"],CRe=()=>["aria-autocomplete","list"],SRe=n=>["aria-controls",n],_Re=n=>["aria-activedescendant",n],RRe=n=>["aria-live",n],ERe=n=>["aria-relevant",n],xRe=n=>["aria-setsize",n],TRe=n=>["aria-posinset",n];function E9(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=-1,i=null,r=n;for(;r!==null;){if(t===e){i=r;break}r.host&&r.nodeType===Node.DOCUMENT_FRAGMENT_NODE?r=r.host:(t+=1,r=r.parentNode)}return i}function x9(n,e){const t=n.closest(".handsontable");return!!t&&(t.parentNode===e||t===e)}function T9(n){return Object.getPrototypeOf(n.parent)&&n.frameElement}function af(n){return T9(n)&&n.parent}function MRe(n){return!!Object.getPrototypeOf(n.parent)}function Yu(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],t=arguments.length>2?arguments[2]:void 0;const{ELEMENT_NODE:i,DOCUMENT_FRAGMENT_NODE:r}=Node;let s=n;for(;s!=null&&s!==t;){const{nodeType:o,nodeName:a}=s;if(o===i&&(e.includes(a)||e.includes(s)))return s;const{host:l}=s;l&&o===r?s=l:s=s.parentNode}return null}function Kb(n,e,t){const i=[];let r=n;for(;r&&(r=Yu(r,e,t),!(!r||t&&!t.contains(r)));)i.push(r),r.host&&r.nodeType===Node.DOCUMENT_FRAGMENT_NODE?r=r.host:r=r.parentNode;const s=i.length;return s?i[s-1]:null}function Nu(n,e){let t=n.parentNode,i=[];for(typeof e=="string"?n.defaultView?i=Array.prototype.slice.call(n.querySelectorAll(e),0):i=Array.prototype.slice.call(n.ownerDocument.querySelectorAll(e),0):i.push(e);t!==null;){if(i.indexOf(t)>-1)return!0;t=t.parentNode}return!1}function M9(n){let e=0,t=n;if(t.previousSibling)for(;t=t.previousSibling;)e+=1;return e}function au(n,e,t){const i=t.parentElement.querySelector(`.ht_clone_${n}`);return i?i.contains(e):null}function A9(n){return!n||!n.length?[]:n.filter(e=>!!e)}function P9(n,e){if(!n||!n.length)return{regexFree:[],regexes:[]};const t=[],i=[];return i.push(...n.filter(r=>{const s=r instanceof RegExp;return s&&e&&t.push(r),!s})),{regexFree:i,regexes:t}}function Ue(n,e){return n.classList===void 0||typeof e!="string"||e===""?!1:n.classList.contains(e)}function ge(n,e){typeof e=="string"&&(e=e.split(" ")),e=A9(e),e.length>0&&n.classList.add(...e)}function Qe(n,e){typeof e=="string"?e=e.split(" "):e instanceof RegExp&&(e=[e]);let{regexFree:t,regexes:i}=P9(e,!0);t=A9(t),t.length>0&&n.classList.remove(...t),i.forEach(r=>{n.classList.forEach(s=>{r.test(s)&&n.classList.remove(s)})})}function ze(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],t=arguments.length>2?arguments[2]:void 0;Array.isArray(e)||(e=[[e,t]]),e.forEach(i=>{Array.isArray(i)&&i[0]!==""&&n.setAttribute(...i)})}function Of(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];typeof e=="string"?e=e.split(" "):e instanceof RegExp&&(e=[e]);const{regexFree:t,regexes:i}=P9(e,!0);t.forEach(r=>{r!==""&&n.removeAttribute(r)}),i.forEach(r=>{n.getAttributeNames().forEach(s=>{r.test(s)&&n.removeAttribute(s)})})}function VD(n){if(n.nodeType===3)n.parentNode.removeChild(n);else if(["TABLE","THEAD","TBODY","TFOOT","TR"].indexOf(n.nodeName)>-1){const e=n.childNodes;for(let t=e.length-1;t>=0;t--)VD(e[t])}}function ra(n){let e;for(;e=n.lastChild;)n.removeChild(e)}const I9=/(<(.*)>|&(.*);)/;function kf(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;I9.test(e)?n.innerHTML=t?q1(e):e:Ku(n,e)}function Ku(n,e){const t=n.firstChild;t&&t.nodeType===3&&t.nextSibling===null?t.textContent=e:(ra(n),n.appendChild(n.ownerDocument.createTextNode(e)))}function lf(n){const e=n.ownerDocument.documentElement;let t=n;for(;t!==e;){if(t===null)return!1;if(t.nodeType===Node.DOCUMENT_FRAGMENT_NODE)if(t.host){if(t.host.impl)return lf(t.host.impl);if(t.host)return lf(t.host);throw new Error("Lost in Web Components world")}else return!1;else if(ul(t).display==="none")return!1;t=t.parentNode}return!0}function xi(n){const e=n.ownerDocument,t=e.defaultView,i=e.documentElement;let r=n,s,o,a;for(s=r.offsetLeft,o=r.offsetTop,a=r;(r=r.offsetParent)&&!(r===e.body||!("offsetLeft"in r));)s+=r.offsetLeft,o+=r.offsetTop,a=r;return a&&a.style.position==="fixed"&&(s+=t.pageXOffset||i.scrollLeft,o+=t.pageYOffset||i.scrollTop),{left:s,top:o}}function WD(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:window).scrollY}function Z1(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:window).scrollX}function Q1(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:window;return n===e?WD(e):n.scrollTop}function jD(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:window;return n===e?Z1(e):n.scrollLeft}function Sw(n){let e=n.ownerDocument,t=e?e.defaultView:void 0;e||(e=n.document?n.document:n,t=e.defaultView);const i=["auto","scroll"];let r=n.parentNode;for(;r&&r.style&&e.body!==r;){let{overflow:s,overflowX:o,overflowY:a}=r.style;if([s,o,a].includes("scroll"))return r;if({overflow:s,overflowX:o,overflowY:a}=t.getComputedStyle(r),i.includes(s)||i.includes(o)||i.includes(a)||r.clientHeight<=r.scrollHeight+1&&(i.includes(a)||i.includes(s))||r.clientWidth<=r.scrollWidth+1&&(i.includes(o)||i.includes(s)))return r;r=r.parentNode}return t}function O9(n){return n.scrollHeight-n.clientHeight}function k9(n){return n.scrollWidth-n.clientWidth}function cf(n){const e=n.ownerDocument,t=e.defaultView;let i=n.parentNode;for(;i&&i.style&&e.body!==i;){if(i.style.overflow!=="visible"&&i.style.overflow!=="")return i;const r=ul(i,t),s=["scroll","hidden","auto"],o=r.getPropertyValue("overflow"),a=r.getPropertyValue("overflow-y"),l=r.getPropertyValue("overflow-x");if(s.includes(o)||s.includes(a)||s.includes(l))return i;i=i.parentNode}return t}function Ap(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:window;if(n){if(n===t)return e==="width"?`${t.innerWidth}px`:e==="height"?`${t.innerHeight}px`:void 0}else return;const i=n.style[e];if(i!==""&&i!==void 0)return i;const r=ul(n,t);if(r[e]!==""&&r[e]!==void 0)return r[e]}function ARe(n,e){const{selectorText:t}=e;let i=!1;return e.type===CSSRule.STYLE_RULE&&t&&(n.msMatchesSelector?i=n.msMatchesSelector(t):n.matches&&(i=n.matches(t))),i}function ul(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:window;return n.currentStyle||e.getComputedStyle(n)}function gn(n){return n.offsetWidth}function ni(n){return n.offsetHeight}function xd(n){return n.clientHeight||n.innerHeight}function zD(n){return n.clientWidth||n.innerWidth}function PRe(n,e,t){n.addEventListener(e,t,!1)}function IRe(n,e,t){n.removeEventListener(e,t,!1)}function UD(n){return n.selectionStart?n.selectionStart:0}function D9(n){return n.selectionEnd?n.selectionEnd:0}function ORe(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window;const e=n.document;let t="";return n.getSelection?t=n.getSelection().toString():e.selection&&e.selection.type!=="Control"&&(t=e.selection.createRange().text),t}function yI(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window;n.getSelection&&(n.getSelection().empty?n.getSelection().empty():n.getSelection().removeAllRanges&&n.getSelection().removeAllRanges())}function py(n,e,t){if(t===void 0&&(t=e),n.setSelectionRange){n.focus();try{n.setSelectionRange(e,t)}catch{const r=n.parentNode,s=r.style.display;r.style.display="block",n.setSelectionRange(e,t),r.style.display=s}}}let yT;function kRe(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;const e=n.createElement("div");e.style.height="200px",e.style.width="100%";const t=n.createElement("div");t.style.boxSizing="content-box",t.style.height="150px",t.style.left="0px",t.style.overflow="hidden",t.style.position="absolute",t.style.top="0px",t.style.width="200px",t.style.visibility="hidden",t.appendChild(e),(n.body||n.documentElement).appendChild(t);const i=e.offsetWidth;t.style.overflow="scroll";let r=e.offsetWidth;return i===r&&(r=t.clientWidth),(n.body||n.documentElement).removeChild(t),i-r}function Pi(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;return yT===void 0&&(yT=kRe(n)),yT}function L9(n){return n.offsetWidth!==n.clientWidth}function N9(n){return n.offsetHeight!==n.clientHeight}function J1(n,e,t){n.style.transform=`translate3d(${e},${t},0)`}function DRe(n){let e;return n.style.transform&&(e=n.style.transform)!==""?["transform",e]:-1}function my(n){n.style.transform&&n.style.transform!==""&&(n.style.transform="")}function Pv(n){return n&&(["INPUT","SELECT","TEXTAREA"].indexOf(n.nodeName)>-1||n.contentEditable==="true")}function eE(n){return Pv(n)&&n.hasAttribute("data-hot-input")===!1}function LRe(n){const e=n.ownerDocument.activeElement;eE(e)||n.select()}function GD(n){return!n.parentNode}function H9(n,e){new IntersectionObserver((i,r)=>{i.forEach(s=>{s.isIntersecting&&n.offsetParent!==null&&(e(),r.unobserve(n))})},{root:n.ownerDocument.body}).observe(n)}function YD(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const i=n.ownerDocument,r=i.createRange(),s=i.defaultView.getSelection();ze(n,"contenteditable",!0),t&&ze(n,...If()),e&&ge(n,"invisibleSelection"),r.selectNodeContents(n),s.removeAllRanges(),s.addRange(r)}function KD(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const t=n.ownerDocument.defaultView.getSelection();n.hasAttribute("aria-hidden")&&n.removeAttribute("aria-hidden"),t.removeAllRanges(),e&&Qe(n,"invisibleSelection"),n.removeAttribute("contenteditable")}function $9(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;YD(n,t),e(),KD(n,t)}const NRe=Object.freeze(Object.defineProperty({__proto__:null,HTML_CHARACTERS:I9,addClass:ge,addEvent:PRe,clearTextSelection:yI,closest:Yu,closestDown:Kb,empty:ra,fastInnerHTML:kf,fastInnerText:Ku,getCaretPosition:UD,getComputedStyle:ul,getCssTransform:DRe,getFrameElement:T9,getMaximumScrollLeft:k9,getMaximumScrollTop:O9,getParent:E9,getParentWindow:af,getScrollLeft:jD,getScrollTop:Q1,getScrollableElement:Sw,getScrollbarWidth:Pi,getSelectionEndPosition:D9,getSelectionText:ORe,getStyle:Ap,getTrimmingContainer:cf,getWindowScrollLeft:Z1,getWindowScrollTop:WD,hasAccessToParentWindow:MRe,hasClass:Ue,hasHorizontalScrollbar:N9,hasVerticalScrollbar:L9,index:M9,innerHeight:xd,innerWidth:zD,isChildOf:Nu,isDetached:GD,isInput:Pv,isOutsideInput:eE,isThisHotChild:x9,isVisible:lf,makeElementContentEditableAndSelectItsContent:YD,matchesCSSRules:ARe,observeVisibilityChangeOnce:H9,offset:xi,outerHeight:ni,outerWidth:gn,overlayContainsElement:au,removeAttribute:Of,removeClass:Qe,removeContentEditableFromElementAndDeselect:KD,removeEvent:IRe,removeTextNodes:VD,resetCssTransform:my,runWithSelectedContendEditableElement:$9,selectElementIfAllowed:LRe,setAttribute:ze,setCaretPosition:py,setOverlayPosition:J1},Symbol.toStringTag,{value:"Module"}));function un(n){return typeof n=="function"}function F9(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200,t=0;const i={lastCallThrottled:!0};let r=null;function s(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];const c=Date.now();let u=!1;i.lastCallThrottled=!0,t||(t=c,u=!0);const h=e-(c-t);return u?(i.lastCallThrottled=!1,n.apply(this,a)):(r&&clearTimeout(r),r=setTimeout(()=>{i.lastCallThrottled=!1,n.apply(this,a),t=0,r=void 0},h)),i}return s}function HRe(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10;const i=F9(n,e);let r=t;function s(){r=t}function o(){for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];return r?(r-=1,n.apply(this,l)):i.apply(this,l)}return o.clearHits=s,o}function tE(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200,t=null,i;function r(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return t&&clearTimeout(t),t=setTimeout(()=>{i=n.apply(this,o)},e),i}return r}function $Re(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];const[i,...r]=e;return function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];return ci(r,(c,u)=>u(c),i.apply(this,a))}}function qD(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];return function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return n.apply(this,t.concat(o))}}function B9(n){const e=n.length;function t(i){return function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];const l=i.concat(o);let c;return l.length>=e?c=n.apply(this,l):c=t(l),c}}return t([])}function FRe(n){const e=n.length;function t(i){return function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];const l=i.concat(o.reverse());let c;return l.length>=e?c=n.apply(this,l):c=t(l),c}}return t([])}function tR(n,e,t,i,r,s,o,a){return De(a)?n.call(e,t,i,r,s,o,a):De(o)?n.call(e,t,i,r,s,o):De(s)?n.call(e,t,i,r,s):De(r)?n.call(e,t,i,r):De(i)?n.call(e,t,i):De(t)?n.call(e,t):n.call(e)}const BRe=Object.freeze(Object.defineProperty({__proto__:null,curry:B9,curryRight:FRe,debounce:tE,fastCall:tR,isFunction:un,partial:qD,pipe:$Re,throttle:F9,throttleAfterHits:HRe},Symbol.toStringTag,{value:"Module"}));var VRe=bi,t3=nG,WRe=Ki,n3=Rf,jRe=H1,i3=VRe([].push),zRe=function(n){if(WRe(n))return n;if(t3(n)){for(var e=n.length,t=[],i=0;i<e;i++){var r=n[i];typeof r=="string"?i3(t,r):(typeof r=="number"||n3(r)==="Number"||n3(r)==="String")&&i3(t,jRe(r))}var s=t.length,o=!0;return function(a,l){if(o)return o=!1,l;if(t3(this))return l;for(var c=0;c<s;c++)if(t[c]===a)return l}}},URe=qi,V9=Qp,W9=N1,GRe=ca,by=bi,j9=ts,r3=Ki,s3=Qk,z9=hD,YRe=zRe,KRe=Zk,qRe=String,Hu=V9("JSON","stringify"),x0=by(/./.exec),o3=by("".charAt),XRe=by("".charCodeAt),ZRe=by("".replace),QRe=by(1 .toString),JRe=/[\uD800-\uDFFF]/g,a3=/^[\uD800-\uDBFF]$/,l3=/^[\uDC00-\uDFFF]$/,c3=!KRe||j9(function(){var n=V9("Symbol")("stringify detection");return Hu([n])!=="[null]"||Hu({a:n})!=="{}"||Hu(Object(n))!=="{}"}),u3=j9(function(){return Hu("\uDF06\uD834")!=='"\\udf06\\ud834"'||Hu("\uDEAD")!=='"\\udead"'}),e1e=function(n,e){var t=z9(arguments),i=YRe(e);if(!(!r3(i)&&(n===void 0||s3(n))))return t[1]=function(r,s){if(r3(i)&&(s=GRe(i,this,qRe(r),s)),!s3(s))return s},W9(Hu,null,t)},t1e=function(n,e,t){var i=o3(t,e-1),r=o3(t,e+1);return x0(a3,n)&&!x0(l3,r)||x0(l3,n)&&!x0(a3,i)?"\\u"+QRe(XRe(n,0),16):n};Hu&&URe({target:"JSON",stat:!0,arity:3,forced:c3||u3},{stringify:function(e,t,i){var r=z9(arguments),s=W9(c3?e1e:Hu,null,r);return u3&&typeof s=="string"?ZRe(s,JRe,t1e):s}});function Pp(n){let e;return Array.isArray(n)?e=n.length?new Array(n.length).fill(null):[]:(e={},ut(n,(t,i)=>{i!=="__children"&&(t&&typeof t=="object"&&!Array.isArray(t)?e[i]=Pp(t):Array.isArray(t)?t.length&&typeof t[0]=="object"&&!Array.isArray(t[0])?e[i]=[Pp(t[0])]:e[i]=[]:e[i]=null)})),e}function ha(n,e){return e.prototype.constructor=e,n.prototype=new e,n.prototype.constructor=n,n}function li(n,e,t){const i=Array.isArray(t);return ut(e,(r,s)=>{(i===!1||t.includes(s))&&(n[s]=r)}),n}function vy(n,e){ut(e,(t,i)=>{e[i]&&typeof e[i]=="object"?(n[i]||(Array.isArray(e[i])?n[i]=[]:Object.prototype.toString.call(e[i])==="[object Date]"?n[i]=e[i]:n[i]={}),vy(n[i],e[i])):n[i]=e[i]})}function mr(n){return typeof n=="object"?JSON.parse(JSON.stringify(n)):n}function sa(n){const e={};return ut(n,(t,i)=>{e[i]=t}),e}function qt(n){n.MIXINS||(n.MIXINS=[]);for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];return q(t,r=>{n.MIXINS.push(r.MIXIN_NAME),ut(r,(s,o)=>{if(n.prototype[o]!==void 0)throw new Error(`Mixin conflict. Property '${o}' already exist and cannot be overwritten.`);if(typeof s=="function")n.prototype[o]=s;else{const a=function(u,h){const d=`_${u}`,f=g=>{let p=g;return(Array.isArray(p)||ct(p))&&(p=mr(p)),p};return function(){return this[d]===void 0&&(this[d]=f(h)),this[d]}},l=function(u){const h=`_${u}`;return function(d){this[h]=d}};Object.defineProperty(n.prototype,o,{get:a(o,s),set:l(o),configurable:!0})}})}),n}function nE(n,e){return JSON.stringify(n)===JSON.stringify(e)}function ct(n){return Object.prototype.toString.call(n)==="[object Object]"}function Rl(n,e,t,i){i.value=t,i.writable=i.writable!==!1,i.enumerable=i.enumerable!==!1,i.configurable=i.configurable!==!1,Object.defineProperty(n,e,i)}function ut(n,e){for(const t in n)if((!n.hasOwnProperty||n.hasOwnProperty&&Object.prototype.hasOwnProperty.call(n,t))&&e(n[t],t,n)===!1)break;return n}function U9(n,e){const t=e.split(".");let i=n;return ut(t,r=>{if(i=i[r],i===void 0)return i=void 0,!1}),i}function PS(n,e,t){const i=e.split(".");let r=n;i.forEach((s,o)=>{o!==i.length-1?(kn(r,s)||(r[s]={}),r=r[s]):r[s]=t})}function iE(n){if(!ct(n))return 0;const e=function(t){let i=0;return ct(t)?ut(t,(r,s)=>{s!=="__children"&&(i+=e(r))}):i+=1,i};return e(n)}function no(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"value";const t=`_${e}`,i={_touched:!1,[t]:n,isTouched(){return this._touched}};return Object.defineProperty(i,e,{get(){return this[t]},set(r){this._touched=!0,this[t]=r},enumerable:!0,configurable:!0}),i}function kn(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const n1e=Object.freeze(Object.defineProperty({__proto__:null,clone:sa,createObjectPropListener:no,deepClone:mr,deepExtend:vy,deepObjectSize:iE,defineGetter:Rl,duckSchema:Pp,extend:li,getProperty:U9,hasOwnProperty:kn,inherit:ha,isObject:ct,isObjectEqual:nE,mixin:qt,objectEach:ut,setProperty:PS},Symbol.toStringTag,{value:"Module"}));function rE(n){return window.requestAnimationFrame(n)}function _w(n){window.cancelAnimationFrame(n)}function XD(){return"ontouchstart"in window}function G9(){return typeof window<"u"}let Uf;function Y9(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Uf||(typeof Intl=="object"?Uf=new Intl.Collator(n,e).compare:typeof String.prototype.localeCompare=="function"?Uf=(t,i)=>`${t}`.localeCompare(i):Uf=(t,i)=>t===i?0:t>i?-1:1,Uf)}const i1e=Object.freeze(Object.defineProperty({__proto__:null,cancelAnimationFrame:_w,getComparisonFunction:Y9,isCSR:G9,isTouchSupported:XD,requestAnimationFrame:rE},Symbol.toStringTag,{value:"Module"})),Us=n=>{const e={value:!1};return e.test=(t,i)=>{e.value=n(t,i)},e},Vc={chrome:Us((n,e)=>/Chrome/.test(n)&&/Google/.test(e)),chromeWebKit:Us(n=>/CriOS/.test(n)),edge:Us(n=>/Edge/.test(n)),edgeWebKit:Us(n=>/EdgiOS/.test(n)),firefox:Us(n=>/Firefox/.test(n)),firefoxWebKit:Us(n=>/FxiOS/.test(n)),mobile:Us(n=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(n)),safari:Us((n,e)=>/Safari/.test(n)&&/Apple Computer/.test(e))},im={mac:Us(n=>/^Mac/.test(n)),win:Us(n=>/^Win/.test(n)),linux:Us(n=>/^Linux/.test(n)),ios:Us(n=>/iPhone|iPad|iPod/i.test(n))};function K9(){let{userAgent:n=navigator.userAgent,vendor:e=navigator.vendor}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ut(Vc,t=>{let{test:i}=t;return void i(n,e)})}function q9(){let{platform:n=navigator.platform}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ut(im,e=>{let{test:t}=e;return void t(n)})}G9()&&(K9(),q9());function ZD(){return Vc.chrome.value}function X9(){return Vc.chromeWebKit.value}function IS(){return Vc.firefox.value}function Z9(){return Vc.firefoxWebKit.value}function QD(){return Vc.safari.value}function Q9(){return Vc.edge.value}function r1e(){return Vc.edgeWebKit.value}function pc(){return Vc.mobile.value}function JD(){return im.ios.value}function eL(){let{maxTouchPoints:n}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:navigator;return n>2&&im.mac.value}function CI(){return im.win.value}function Rw(){return im.mac.value}function s1e(){return im.linux.value}const o1e=Object.freeze(Object.defineProperty({__proto__:null,isChrome:ZD,isChromeWebKit:X9,isEdge:Q9,isEdgeWebKit:r1e,isFirefox:IS,isFirefoxWebKit:Z9,isIOS:JD,isIpadOS:eL,isLinuxOS:s1e,isMacOS:Rw,isMobileBrowser:pc,isSafari:QD,isWindowsOS:CI,setBrowserMeta:K9,setPlatformMeta:q9},Symbol.toStringTag,{value:"Module"})),He={ALT:18,ARROW_DOWN:40,ARROW_LEFT:37,ARROW_RIGHT:39,ARROW_UP:38,AUDIO_DOWN:IS()?182:174,AUDIO_MUTE:IS()?181:173,AUDIO_UP:IS()?183:175,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND_LEFT:91,COMMAND_RIGHT:93,COMMAND_FIREFOX:224,CONTROL:17,DELETE:46,END:35,ENTER:13,ESCAPE:27,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,F16:127,F17:128,F18:129,F19:130,HOME:36,INSERT:45,MEDIA_NEXT:176,MEDIA_PLAY_PAUSE:179,MEDIA_PREV:177,MEDIA_STOP:178,NULL:0,NUM_LOCK:144,PAGE_DOWN:34,PAGE_UP:33,PAUSE:19,PERIOD:190,SCROLL_LOCK:145,SHIFT:16,SPACE:32,TAB:9,A:65,C:67,D:68,F:70,L:76,O:79,P:80,S:83,V:86,X:88,Y:89,Z:90},a1e=[He.ALT,He.ARROW_DOWN,He.ARROW_LEFT,He.ARROW_RIGHT,He.ARROW_UP,He.AUDIO_DOWN,He.AUDIO_MUTE,He.AUDIO_UP,He.BACKSPACE,He.CAPS_LOCK,He.DELETE,He.END,He.ENTER,He.ESCAPE,He.F1,He.F2,He.F3,He.F4,He.F5,He.F6,He.F7,He.F8,He.F9,He.F10,He.F11,He.F12,He.F13,He.F14,He.F15,He.F16,He.F17,He.F18,He.F19,He.HOME,He.INSERT,He.MEDIA_NEXT,He.MEDIA_PLAY_PAUSE,He.MEDIA_PREV,He.MEDIA_STOP,He.NULL,He.NUM_LOCK,He.PAGE_DOWN,He.PAGE_UP,He.PAUSE,He.SCROLL_LOCK,He.SHIFT,He.TAB];function J9(n){return n===32||n>=48&&n<=57||n>=96&&n<=111||n>=186&&n<=192||n>=219&&n<=222||n>=226||n>=65&&n<=90}function tL(n){return a1e.includes(n)}function l1e(n){const e=[];return Rw()?e.push(He.COMMAND_LEFT,He.COMMAND_RIGHT,He.COMMAND_FIREFOX):e.push(He.CONTROL),e.includes(n)}function eY(n){return[He.CONTROL,He.COMMAND_LEFT,He.COMMAND_RIGHT,He.COMMAND_FIREFOX].includes(n)}function rm(n,e){const t=e.split("|");let i=!1;return q(t,r=>{if(n===He[r])return i=!0,!1}),i}const c1e=Object.freeze(Object.defineProperty({__proto__:null,KEY_CODES:He,isCtrlKey:l1e,isCtrlMetaKey:eY,isFunctionKey:tL,isKey:rm,isPrintableChar:J9},Symbol.toStringTag,{value:"Module"}));function bo(n){n.isImmediatePropagationEnabled=!1,n.cancelBubble=!0}function vu(n){return n.isImmediatePropagationEnabled===!1}function qu(n){return n.button===2}function sE(n){return n.button===0}function tY(n){return n instanceof TouchEvent}function nY(n,e){const t={x:n.offsetX,y:n.offsetY};let i=n.target;if(!(e instanceof HTMLElement)||i!==e&&i.contains(e))return t;for(;i!==e;)t.x+=i.offsetLeft,t.y+=i.offsetTop,i=i.offsetParent;return t}const u1e=Object.freeze(Object.defineProperty({__proto__:null,isImmediatePropagationStopped:vu,isLeftClick:sE,isRightClick:qu,isTouchEvent:tY,offsetRelativeTo:nY,stopImmediatePropagation:bo},Symbol.toStringTag,{value:"Module"}));var iY={},h1e=z7,d1e=sD,f1e=Object.keys||function(e){return h1e(e,d1e)},g1e=la,p1e=H7,m1e=lh,b1e=$c,v1e=I1,w1e=f1e;iY.f=g1e&&!p1e?Object.defineProperties:function(e,t){b1e(e);for(var i=v1e(t),r=w1e(t),s=r.length,o=0,a;s>o;)m1e.f(e,a=r[o++],i[a]);return e};var y1e=$c,C1e=iY,h3=sD,S1e=iD,_1e=gG,R1e=tD,E1e=B7,d3=">",f3="<",SI="prototype",_I="script",rY=E1e("IE_PROTO"),CT=function(){},sY=function(n){return f3+_I+d3+n+f3+"/"+_I+d3},g3=function(n){n.write(sY("")),n.close();var e=n.parentWindow.Object;return n=null,e},x1e=function(){var n=R1e("iframe"),e="java"+_I+":",t;return n.style.display="none",_1e.appendChild(n),n.src=String(e),t=n.contentWindow.document,t.open(),t.write(sY("document.F=Object")),t.close(),t.F},T0,OS=function(){try{T0=new ActiveXObject("htmlfile")}catch{}OS=typeof document<"u"?document.domain&&T0?g3(T0):x1e():g3(T0);for(var n=h3.length;n--;)delete OS[SI][h3[n]];return OS()};S1e[rY]=!0;var T1e=Object.create||function(e,t){var i;return e!==null?(CT[SI]=y1e(e),i=new CT,CT[SI]=null,i[rY]=e):i=OS(),t===void 0?i:C1e.f(i,t)},M1e=ah,A1e=T1e,P1e=lh.f,RI=M1e("unscopables"),EI=Array.prototype;EI[RI]===void 0&&P1e(EI,RI,{configurable:!0,value:A1e(null)});var nL=function(n){EI[RI][n]=!0},I1e=nL;I1e("flatMap");function Yt(){De(console)&&console.warn(...arguments)}function iL(){De(console)&&console.error(...arguments)}function O1e(n,e,t){return(e=k1e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function k1e(n){var e=D1e(n,"string");return typeof e=="symbol"?e:e+""}function D1e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const Gf=["afterCellMetaReset","afterChange","afterContextMenuDefaultOptions","beforeContextMenuSetItems","afterDropdownMenuDefaultOptions","beforeDropdownMenuSetItems","afterContextMenuHide","beforeContextMenuShow","afterContextMenuShow","afterCopyLimit","beforeCreateCol","afterColumnSequenceChange","afterCreateCol","beforeCreateRow","afterCreateRow","afterDeselect","afterDestroy","afterDocumentKeyDown","afterDrawSelection","beforeRemoveCellClassNames","afterGetCellMeta","afterGetColHeader","afterGetRowHeader","afterInit","afterLoadData","afterUpdateData","afterMomentumScroll","afterOnCellCornerMouseDown","afterOnCellCornerDblClick","afterOnCellMouseDown","afterOnCellMouseUp","afterOnCellContextMenu","afterOnCellMouseOver","afterOnCellMouseOut","afterRemoveCol","afterRemoveRow","beforeRenderer","afterRenderer","afterRowSequenceChange","beforeViewportScrollVertically","beforeViewportScrollHorizontally","beforeViewportScroll","afterScrollHorizontally","afterScrollVertically","afterScroll","afterSelection","afterSelectionByProp","afterSelectionEnd","afterSelectionEndByProp","afterSelectionFocusSet","beforeSelectColumns","afterSelectColumns","beforeSelectRows","afterSelectRows","afterSetCellMeta","afterRemoveCellMeta","afterSetDataAtCell","afterSetDataAtRowProp","afterSetSourceDataAtCell","afterUpdateSettings","afterValidate","beforeLanguageChange","afterLanguageChange","beforeAutofill","afterAutofill","beforeCellAlignment","beforeChange","beforeChangeRender","beforeDrawBorders","beforeGetCellMeta","beforeRemoveCellMeta","beforeInit","beforeInitWalkontable","beforeLoadData","beforeUpdateData","beforeKeyDown","beforeOnCellMouseDown","beforeOnCellMouseUp","beforeOnCellContextMenu","beforeOnCellMouseOver","beforeOnCellMouseOut","beforeRemoveCol","beforeRemoveRow","beforeViewRender","afterViewRender","beforeRender","afterRender","beforeRowWrap","beforeColumnWrap","beforeSetCellMeta","beforeSelectionFocusSet","beforeSetRangeStartOnly","beforeSetRangeStart","beforeSetRangeEnd","beforeSelectionHighlightSet","beforeTouchScroll","beforeValidate","beforeValueRender","construct","init","modifyColHeader","modifyColWidth","modifyFiltersMultiSelectValue","modifyFocusedElement","modifyRowHeader","modifyRowHeight","modifyRowHeightByOverlayName","modifyData","modifySourceData","modifyRowData","modifyGetCellCoords","modifyFocusOnTabNavigation","beforeHighlightingRowHeader","beforeHighlightingColumnHeader","persistentStateLoad","persistentStateReset","persistentStateSave","beforeColumnSort","afterColumnSort","modifyAutofillRange","modifyCopyableRange","beforeCut","afterCut","beforeCopy","afterCopy","beforePaste","afterPaste","beforeColumnFreeze","afterColumnFreeze","beforeColumnMove","afterColumnMove","beforeColumnUnfreeze","afterColumnUnfreeze","beforeRowMove","afterRowMove","beforeColumnResize","afterColumnResize","beforeRowResize","afterRowResize","afterGetColumnHeaderRenderers","afterGetRowHeaderRenderers","beforeStretchingColumnWidth","beforeFilter","afterFilter","afterFormulasValuesUpdate","afterNamedExpressionAdded","afterNamedExpressionRemoved","afterSheetAdded","afterSheetRenamed","afterSheetRemoved","modifyColumnHeaderHeight","modifyColumnHeaderValue","beforeUndo","beforeUndoStackChange","afterUndo","afterUndoStackChange","beforeRedo","beforeRedoStackChange","afterRedo","afterRedoStackChange","modifyRowHeaderWidth","modifyTransformFocus","modifyTransformStart","modifyTransformEnd","afterModifyTransformFocus","afterModifyTransformStart","afterModifyTransformEnd","afterViewportRowCalculatorOverride","afterViewportColumnCalculatorOverride","afterPluginsInitialized","beforeHideRows","afterHideRows","beforeUnhideRows","afterUnhideRows","beforeHideColumns","afterHideColumns","beforeUnhideColumns","afterUnhideColumns","beforeTrimRow","afterTrimRow","beforeUntrimRow","afterUntrimRow","beforeDropdownMenuShow","afterDropdownMenuShow","afterDropdownMenuHide","beforeAddChild","afterAddChild","beforeDetachChild","afterDetachChild","beforeBeginEditing","afterBeginEditing","beforeMergeCells","afterMergeCells","beforeUnmergeCells","afterUnmergeCells","afterListen","afterUnlisten","afterRefreshDimensions","beforeRefreshDimensions","beforeColumnCollapse","afterColumnCollapse","beforeColumnExpand","afterColumnExpand","modifyAutoColumnSizeSeed"],L1e=Kt`The plugin hook "[hookName]" was removed in Handsontable [removedInVersion].\x20
  Please consult release notes https://github.com/handsontable/handsontable/releases/tag/[removedInVersion] to\x20
  learn about the migration path.`,ST=new Map([["modifyRow","8.0.0"],["modifyCol","8.0.0"],["unmodifyRow","8.0.0"],["unmodifyCol","8.0.0"],["skipLengthCache","8.0.0"],["hiddenColumn","8.0.0"],["hiddenRow","8.0.0"]]),_T=new Map([[]]),M0=new WeakMap;class Oe{static getSingleton(){return H1e()}constructor(){O1e(this,"globalBucket",void 0),this.globalBucket=this.createEmptyBucket()}createEmptyBucket(){const e=Object.create(null);return q(Gf,t=>{e[t]=[],this.initOrderMap(e,t)}),e}getBucket(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return e?(e.pluginHookBucket||(e.pluginHookBucket=this.createEmptyBucket()),e.pluginHookBucket):this.globalBucket}add(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;if(Array.isArray(t))q(t,s=>this.add(e,s,i));else{ST.has(e)&&Yt($D(L1e,{hookName:e,removedInVersion:ST.get(e)})),_T.has(e)&&Yt(_T.get(e));const s=this.getBucket(i);if(typeof s[e]>"u"&&(this.register(e),s[e]=[],this.initOrderMap(s,e)),t.skip=!1,s[e].indexOf(t)===-1){let o=!1;t.initialHook&&q(s[e],(a,l)=>{if(a.initialHook)return s[e][l]=t,o=!0,!1}),o||s[e].push(t)}this.setCallbackOrderIndex(s,e,t,r),this.orderBucketByOrderIndex(s,e)}return this}once(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;Array.isArray(t)?q(t,s=>this.once(e,s,i)):(t.runOnce=!0,this.add(e,t,i,r))}remove(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;const r=this.getBucket(i);return typeof r[e]<"u"&&r[e].indexOf(t)>=0?(t.skip=!0,!0):!1}has(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const i=this.getBucket(t);return!!(i[e]!==void 0&&i[e].length)}run(e,t,i,r,s,o,a,l){{const c=this.globalBucket[t],u=c?c.length:0;let h=0;if(u)for(;h<u;){if(!c[h]||c[h].skip){h+=1;continue}const d=tR(c[h],e,i,r,s,o,a,l);d!==void 0&&(i=d),c[h]&&c[h].runOnce&&this.remove(t,c[h]),h+=1}}{const c=this.getBucket(e)[t],u=c?c.length:0;let h=0;if(u)for(;h<u;){if(!c[h]||c[h].skip){h+=1;continue}const d=tR(c[h],e,i,r,s,o,a,l);d!==void 0&&(i=d),c[h]&&c[h].runOnce&&this.remove(t,c[h],e),h+=1}}return i}destroy(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;ut(this.getBucket(e),(t,i,r)=>r[i].length=0)}register(e){this.isRegistered(e)||Gf.push(e)}deregister(e){this.isRegistered(e)&&Gf.splice(Gf.indexOf(e),1)}isDeprecated(e){return _T.has(e)||ST.has(e)}isRegistered(e){return Gf.indexOf(e)>=0}getRegistered(){return Gf}setCallbackOrderIndex(e,t,i,r){const s=Number.isInteger(r)?r:0,o=this.getCallbackOrderMap(e,t);o.set(s,[...o.get(s)||[],i])}orderBucketByOrderIndex(e,t){const i=this.getCallbackOrderMap(e,t);i===void 0||i.size===0||i.size===1&&i.has(0)||(e[t]=[...i].sort((r,s)=>r[0]-s[0]).flatMap(r=>{let[,s]=r;return s}))}initOrderMap(e,t){M0.has(e)||M0.set(e,[]),M0.get(e)[t]=new Map}getCallbackOrderMap(e,t){return M0.get(e)[t]}}const N1e=new Oe;function H1e(){return N1e}const RT=new Map;function da(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"common";RT.has(n)||RT.set(n,new Map);const e=RT.get(n);function t(a,l){e.set(a,l)}function i(a){return e.get(a)}function r(a){return e.has(a)}function s(){return[...e.keys()]}function o(){return[...e.values()]}return{register:t,getItem:i,hasItem:r,getNames:s,getValues:o}}const xI=new WeakMap,{register:$1e,getItem:oY,hasItem:aY,getNames:F1e,getValues:U7e}=da("editors");function B1e(n){const e={},t=n;this.getConstructor=function(){return n},this.getInstance=function(i){return i.guid in e||(e[i.guid]=new t(i)),e[i.guid]},Oe.getSingleton().add("afterDestroy",function(){e[this.guid]=null})}function lY(n,e){let t;if(typeof n=="function")xI.get(n)||Gr(null,n),t=xI.get(n);else if(typeof n=="string")t=oY(n);else throw Error('Only strings and functions can be passed as "editor" parameter');if(!t)throw Error(`No editor registered under name "${n}"`);return t.getInstance(e)}function nR(n){if(typeof n=="function")return n;if(!aY(n))throw Error(`No registered editor found under "${n}" name`);return oY(n).getConstructor()}function Gr(n,e){n&&typeof n!="string"&&(e=n,n=e.EDITOR_TYPE);const t=new B1e(e);typeof n=="string"&&$1e(n,t),xI.set(e,t)}function V1e(n,e,t){return(e=W1e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function W1e(n){var e=j1e(n,"string");return typeof e=="symbol"?e:e+""}function j1e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}let kS=0;class uo{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;V1e(this,"context",void 0),this.context=e||this,this.context.eventListeners||(this.context.eventListeners=[])}addEventListener(e,t,i){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;function s(o){i.call(this,z1e(o))}return this.context.eventListeners.push({element:e,event:t,callback:i,callbackProxy:s,options:r,eventManager:this}),e.addEventListener(t,s,r),kS+=1,()=>{this.removeEventListener(e,t,i)}}removeEventListener(e,t,i){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,s=this.context.eventListeners.length,o;for(;s;)if(s-=1,o=this.context.eventListeners[s],o.event===t&&o.element===e){if(i&&i!==o.callback||r&&o.eventManager!==this)continue;this.context.eventListeners.splice(s,1),o.element.removeEventListener(o.event,o.callbackProxy,o.options),kS-=1}}clearEvents(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!this.context)return;let t=this.context.eventListeners.length;for(;t;){t-=1;const i=this.context.eventListeners[t];e&&i.eventManager!==this||(this.context.eventListeners.splice(t,1),i.element.removeEventListener(i.event,i.callbackProxy,i.options),kS-=1)}}clear(){this.clearEvents()}destroy(){this.clearEvents(),this.context=null}destroyWithOwnEventsOnly(){this.clearEvents(!0),this.context=null}fireEvent(e,t){let i=e.document,r=e;i||(i=e.ownerDocument?e.ownerDocument:e,r=i.defaultView);const s={bubbles:!0,cancelable:t!=="mousemove",view:r,detail:0,screenX:0,screenY:0,clientX:1,clientY:1,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:void 0};let o;i.createEvent?(o=i.createEvent("MouseEvents"),o.initMouseEvent(t,s.bubbles,s.cancelable,s.view,s.detail,s.screenX,s.screenY,s.clientX,s.clientY,s.ctrlKey,s.altKey,s.shiftKey,s.metaKey,s.button,i.body.parentNode)):o=i.createEventObject(),e.dispatchEvent?e.dispatchEvent(o):e.fireEvent(`on${t}`,o)}}function z1e(n){const e=n.stopImmediatePropagation;return n.stopImmediatePropagation=function(){e.apply(this),bo(this)},n}function U1e(){return kS}function G1e(n,e){Y1e(n,e),e.add(n)}function Y1e(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Eh(n,e,t){return(e=K1e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function K1e(n){var e=q1e(n,"string");return typeof e=="symbol"?e:e+""}function q1e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function p3(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var ET=new WeakSet;class TI{constructor(e,t,i){G1e(this,ET),Eh(this,"hot",void 0),Eh(this,"tableMeta",void 0),Eh(this,"selection",void 0),Eh(this,"eventManager",void 0),Eh(this,"destroyed",!1),Eh(this,"activeEditor",void 0),Eh(this,"cellProperties",void 0),this.hot=e,this.tableMeta=t,this.selection=i,this.eventManager=new uo(e),this.hot.addHook("afterDocumentKeyDown",r=>p3(ET,this,X1e).call(this,r)),this.eventManager.addEventListener(this.hot.rootDocument.documentElement,"compositionstart",r=>{!this.destroyed&&this.hot.isListening()&&this.openEditor("",r)}),this.hot.view._wt.update("onCellDblClick",(r,s,o)=>p3(ET,this,Z1e).call(this,r,s,o))}getActiveEditor(){return this.activeEditor}prepareEditor(){var e;if(this.activeEditor&&this.activeEditor.isWaiting()){this.closeEditor(!1,!1,c=>{c&&this.prepareEditor()});return}const t=(e=this.hot.getSelectedRangeLast())===null||e===void 0?void 0:e.highlight;if(!t||t.isHeader())return;const{row:i,col:r}=t,s=this.hot.runHooks("modifyGetCellCoords",i,r);let o=i,a=r;if(Array.isArray(s)&&([o,a]=s),this.cellProperties=this.hot.getCellMeta(o,a),!this.isCellEditable()){this.clearActiveEditor();return}const l=this.hot.getCell(i,r,!0);if(l){const c=this.hot.getCellEditor(this.cellProperties),u=this.hot.colToProp(a),h=this.hot.getSourceDataAtCell(this.hot.toPhysicalRow(o),a);this.activeEditor=lY(c,this.hot),this.activeEditor.prepare(i,r,u,l,h,this.cellProperties)}}isEditorOpened(){return this.activeEditor&&this.activeEditor.isOpened()}openEditor(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(!this.isCellEditable()){this.clearActiveEditor();return}const r=this.hot.getSelectedRangeLast();let s=this.hot.runHooks("beforeBeginEditing",r.highlight.row,r.highlight.col,e,t,i);if(t instanceof MouseEvent&&typeof s!="boolean"&&(s=this.hot.selection.getLayerLevel()===0&&r.isSingle()),s===!1){this.clearActiveEditor();return}this.activeEditor||(this.hot.scrollToFocusedCell(),this.prepareEditor()),this.activeEditor&&(i&&this.activeEditor.enableFullEditMode(),this.activeEditor.beginEditing(e,t))}closeEditor(e,t,i){this.activeEditor?this.activeEditor.finishEditing(e,t,i):i&&i(!1)}closeEditorAndSaveChanges(e){this.closeEditor(!1,e)}closeEditorAndRestoreOriginalValue(e){this.closeEditor(!0,e)}clearActiveEditor(){this.activeEditor=void 0}isCellEditable(){const e=this.hot.getSelectedRangeLast();if(!e)return!1;const t=this.hot.getCellEditor(this.cellProperties),{row:i,col:r}=e.highlight,{rowIndexMapper:s,columnIndexMapper:o}=this.hot,a=s.isHidden(this.hot.toPhysicalRow(i))||o.isHidden(this.hot.toPhysicalColumn(r));return!(this.cellProperties.readOnly||!t||a)}moveSelectionAfterEnter(e){const t={...typeof this.tableMeta.enterMoves=="function"?this.tableMeta.enterMoves(e):this.tableMeta.enterMoves};e.shiftKey&&(t.row=-t.row,t.col=-t.col),this.hot.selection.isMultiple()?this.selection.transformFocus(t.row,t.col):this.selection.transformStart(t.row,t.col,!0)}destroy(){this.destroyed=!0,this.eventManager.destroy()}}function X1e(n){const e=this.hot.getSelectedRangeLast();if(!this.hot.isListening()||!e||e.highlight.isHeader()||vu(n))return;const{keyCode:t}=n,i=(n.ctrlKey||n.metaKey)&&!n.altKey;(!this.activeEditor||this.activeEditor&&!this.activeEditor.isWaiting())&&!tL(t)&&!eY(t)&&!i&&!this.isEditorOpened()&&this.openEditor("",n)}function Z1e(n,e){e.isCell()&&this.openEditor(null,n,!0)}const m3=new WeakMap;TI.getInstance=function(n,e,t){let i=m3.get(n);return i||(i=new TI(n,e,t),m3.set(n,i)),i};function Q1e(n,e){cY(n,e),e.add(n)}function Om(n,e,t){cY(n,e),e.set(n,t)}function cY(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function An(n,e){return n.get(oc(n,e))}function km(n,e,t){return n.set(oc(n,e),t),t}function oc(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const hp=Object.freeze({CELL:"cell",MIXED:"mixed"});var Di=new WeakMap,A0=new WeakMap,P0=new WeakMap,I0=new WeakMap,O0=new WeakMap,uu=new WeakSet;class J1e{constructor(e){var t=this;Q1e(this,uu),Om(this,Di,void 0),Om(this,A0,void 0),Om(this,P0,1),Om(this,I0,null),Om(this,O0,new Map);const i=e.getSettings();km(Di,this,e),km(A0,this,i.imeFastEdit?hp.MIXED:hp.CELL),An(Di,this).addHook("afterUpdateSettings",function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return oc(uu,t,tEe).call(t,...s)}),An(Di,this).addHook("afterSelection",function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return oc(uu,t,b3).call(t,...s)}),An(Di,this).addHook("afterSelectionFocusSet",function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return oc(uu,t,b3).call(t,...s)}),An(Di,this).addHook("afterSelectionEnd",function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return oc(uu,t,eEe).call(t,...s)})}getFocusMode(){return An(A0,this)}setFocusMode(e){Object.values(hp).includes(e)?km(A0,this,e):Yt(`"${e}" is not a valid focus mode.`)}getRefocusDelay(){return An(P0,this)}setRefocusDelay(e){km(P0,this,e)}setRefocusElementGetter(e){km(I0,this,e)}getRefocusElement(){if(typeof An(I0,this)=="function")return An(I0,this).call(this);var e;return(e=An(Di,this).getActiveEditor())===null||e===void 0?void 0:e.TEXTAREA}focusOnHighlightedCell(e){const t=i=>{var r,s;const o=(r=An(Di,this).getSelectedRangeLast())===null||r===void 0?void 0:r.highlight;if(!o)return;let a=An(Di,this).runHooks("modifyFocusedElement",o.row,o.col,i);a instanceof HTMLElement||(a=i),a&&!((s=An(Di,this).getActiveEditor())!==null&&s!==void 0&&s.isOpened())&&a.focus({preventScroll:!0})};e?t(e):oc(uu,this,rL).call(this,i=>t(i))}refocusToEditorTextarea(){var e;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:An(P0,this);const i=this.getRefocusElement();An(Di,this).getSettings().imeFastEdit&&!((e=An(Di,this).getActiveEditor())!==null&&e!==void 0&&e.isOpened())&&i&&(An(O0,this).has(t)||An(O0,this).set(t,tE(()=>{i.select()},t)),An(O0,this).get(t)())}}function rL(n){var e;const t=(e=An(Di,this).getSelectedRangeLast())===null||e===void 0?void 0:e.highlight;if(!t||!An(Di,this).selection.isCellVisible(t)){n(null);return}const i=An(Di,this).getCell(t.row,t.col,!0);i===null?An(Di,this).addHookOnce("afterScroll",()=>{n(An(Di,this).getCell(t.row,t.col,!0))}):n(i)}function b3(){oc(uu,this,rL).call(this,n=>{const{activeElement:e}=An(Di,this).rootDocument;e&&eE(e)&&e.blur(),this.focusOnHighlightedCell(n)})}function eEe(){oc(uu,this,rL).call(this,n=>{this.getFocusMode()===hp.MIXED&&n.nodeName==="TD"&&this.refocusToEditorTextarea()})}function tEe(n){typeof n.imeFastEdit=="boolean"&&this.setFocusMode(n.imeFastEdit?hp.MIXED:hp.CELL)}var nEe=vl,iEe=Rf,rEe=ah,sEe=rEe("match"),oEe=function(n){var e;return nEe(n)&&((e=n[sEe])!==void 0?!!e:iEe(n)==="RegExp")},aEe=$c,lEe=function(){var n=aEe(this),e="";return n.hasIndices&&(e+="d"),n.global&&(e+="g"),n.ignoreCase&&(e+="i"),n.multiline&&(e+="m"),n.dotAll&&(e+="s"),n.unicode&&(e+="u"),n.unicodeSets&&(e+="v"),n.sticky&&(e+="y"),e},cEe=ca,uEe=wl,hEe=O1,dEe=lEe,v3=RegExp.prototype,fEe=function(n){var e=n.flags;return e===void 0&&!("flags"in v3)&&!uEe(n,"flags")&&hEe(v3,n)?cEe(dEe,n):e},sL=bi,gEe=ry,pEe=Math.floor,xT=sL("".charAt),mEe=sL("".replace),TT=sL("".slice),bEe=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,vEe=/\$([$&'`]|\d{1,2})/g,wEe=function(n,e,t,i,r,s){var o=t+n.length,a=i.length,l=vEe;return r!==void 0&&(r=gEe(r),l=bEe),mEe(s,l,function(c,u){var h;switch(xT(u,0)){case"$":return"$";case"&":return n;case"`":return TT(e,0,t);case"'":return TT(e,o);case"<":h=r[TT(u,1,-1)];break;default:var d=+u;if(d===0)return c;if(d>a){var f=pEe(d/10);return f===0?c:f<=a?i[f-1]===void 0?xT(u,1):i[f-1]+xT(u,1):c}h=i[d-1]}return h===void 0?"":h})},yEe=qi,CEe=ca,oL=bi,w3=ny,SEe=Ki,_Ee=P1,REe=oEe,Dm=H1,EEe=L1,xEe=fEe,TEe=wEe,MEe=ah,AEe=MEe("replace"),PEe=TypeError,MT=oL("".indexOf);oL("".replace);var y3=oL("".slice),IEe=Math.max;yEe({target:"String",proto:!0},{replaceAll:function(e,t){var i=w3(this),r,s,o,a,l,c,u,h,d,f,g=0,p="";if(!_Ee(e)){if(r=REe(e),r&&(s=Dm(w3(xEe(e))),!~MT(s,"g")))throw new PEe("`.replaceAll` does not allow non-global regexes");if(o=EEe(e,AEe),o)return CEe(o,e,i,t)}for(a=Dm(i),l=Dm(e),c=SEe(t),c||(t=Dm(t)),u=l.length,h=IEe(1,u),d=MT(a,l);d!==-1;)f=c?Dm(t(l,d,a)):TEe(l,a,d,[],void 0,t),p+=y3(a,g,d)+f,g=d+u,d=d+h>a.length?-1:MT(a,l,d+h);return g<a.length&&(p+=y3(a,g)),p}});const uY={"&nbsp;":" ","&amp;":"&","&lt;":"<","&gt;":">"},OEe=new RegExp(Object.keys(uY).map(n=>`(${n})`).join("|"),"gi");function kEe(n){return(n&&n.nodeName||"")==="TABLE"}function MI(n){const e=n.hasColHeaders(),t=n.hasRowHeaders(),i=[e?-1:0,t?-1:0,n.countRows()-1,n.countCols()-1],r=n.getData(...i),s=r.length,o=s>0?r[0].length:0,a=["<table>","</table>"],l=e?["<thead>","</thead>"]:[],c=["<tbody>","</tbody>"],u=t?1:0,h=e?1:0;for(let d=0;d<s;d+=1){const f=e&&d===0,g=[];for(let m=0;m<o;m+=1){const v=!f&&t&&m===0;let y="";if(f)y=`<th>${n.getColHeader(m-u)}</th>`;else if(v)y=`<th>${n.getRowHeader(d-h)}</th>`;else{const w=r[d][m],{hidden:R,rowspan:x,colspan:S}=n.getCellMeta(d-h,m-u);if(!R){const T=[];if(x&&T.push(`rowspan="${x}"`),S&&T.push(`colspan="${S}"`),zn(w))y=`<td ${T.join(" ")}></td>`;else{const P=w.toString().replace("<","&lt;").replace(">","&gt;").replace(/(<br(\s*|\/)>(\r\n|\n)?|\r\n|\n)/g,`<br>\r
`).replace(/\x20/gi,"&nbsp;").replace(/\t/gi,"&#9;");y=`<td ${T.join(" ")}>${P}</td>`}}}g.push(y)}const p=["<tr>",...g,"</tr>"].join("");f?l.splice(1,0,p):c.splice(-1,0,p)}return a.splice(1,0,l.join(""),c.join("")),a.join("")}function AI(n){const e=n.length,t=["<table>"];for(let i=0;i<e;i+=1){const r=n[i],s=r.length,o=[];i===0&&t.push("<tbody>");for(let a=0;a<s;a+=1){const l=r[a],c=zn(l)?"":l.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/(<br(\s*|\/)>(\r\n|\n)?|\r\n|\n)/g,`<br>\r
`).replace(/\x20{2,}/gi,u=>`<span style="mso-spacerun: yes">${"&nbsp;".repeat(u.length-1)} </span>`).replace(/\t/gi,"&#9;");o.push(`<td>${c}</td>`)}t.push("<tr>",...o,"</tr>"),i+1===e&&t.push("</tbody>")}return t.push("</table>"),t.join("")}function hY(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document;const t={},i=e.createDocumentFragment(),r=e.createElement("div");i.appendChild(r);let s=n;if(typeof s=="string"){const w=s.replace(/<td\b[^>]*?>([\s\S]*?)<\/\s*td>/g,R=>{const x=R.match(/<td\b[^>]*?>/g)[0],S=/<p.*?>/g,T=R.substring(x.length,R.lastIndexOf("<")).trim().replaceAll(/\n\s+/g," ").replaceAll(S,`
`).replace(`
`,"").replaceAll(/<\/(.*)>\s+$/mg,"</$1>").replace(/(<(?!br)([^>]+)>)/gi,"").replaceAll(/^&nbsp;$/mg,"");return`${x}${T}</td>`});r.insertAdjacentHTML("afterbegin",`${w}`),s=r.querySelector("table")}if(!s||!kEe(s))return;const o=r.querySelector('meta[name$="enerator"]'),a=s.querySelector("tbody th")!==null,l=s.querySelector("tr"),c=l?Array.from(l.cells).reduce((w,R)=>w+R.colSpan,0)-(a?1:0):0,u=s.tFoot&&Array.from(s.tFoot.rows)||[],h=[];let d=!1,f=0,g=0;if(s.tHead){const w=Array.from(s.tHead.rows).filter(R=>{const x=R.querySelector("td")!==null;return x&&h.push(R),!x});f=w.length,d=f>0,f>1?t.nestedHeaders=Array.from(w).reduce((R,x)=>{const S=Array.from(x.cells).reduce((T,P,E)=>{if(a&&E===0)return T;const{colSpan:A,innerHTML:L}=P,W=A>1?{label:L,colspan:A}:L;return T.push(W),T},[]);return R.push(S),R},[]):d&&(t.colHeaders=Array.from(w[0].children).reduce((R,x,S)=>(a&&S===0||R.push(x.innerHTML),R),[]))}h.length&&(t.fixedRowsTop=h.length),u.length&&(t.fixedRowsBottom=u.length);const p=[...h,...Array.from(s.tBodies).reduce((w,R)=>(w.push(...Array.from(R.rows)),w),[]),...u];g=p.length;const m=new Array(g);for(let w=0;w<g;w++)m[w]=new Array(c);const v=[],y=[];for(let w=0;w<g;w++){const R=p[w],x=Array.from(R.cells),S=x.length;for(let T=0;T<S;T++){const P=x[T],{nodeName:E,innerHTML:A,rowSpan:L,colSpan:W}=P,F=m[w].findIndex(V=>V===void 0);if(E==="TD"){if(L>1||W>1){for(let j=w;j<w+L;j++)if(j<g)for(let k=F;k<F+W;k++)m[j][k]=null;const H=P.getAttribute("style");H&&H.includes("mso-ignore:colspan")||v.push({col:F,row:w,rowspan:L,colspan:W})}let V="";o&&/excel/gi.test(o.content)?V=A.replace(/[\r\n][\x20]{0,2}/g," ").replace(/<br(\s*|\/)>[\r\n]?[\x20]{0,3}/gim,`\r
`):V=A.replace(/<br(\s*|\/)>[\r\n]?/gim,`\r
`),m[w][F]=V.replace(OEe,H=>uY[H])}else y.push(A)}}return v.length&&(t.mergeCells=v),y.length&&(t.rowHeaders=y),m.length&&(t.data=m),t}const DEe=Object.freeze(Object.defineProperty({__proto__:null,_dataToHTML:AI,htmlToGridSettings:hY,instanceToHTML:MI},Symbol.toStringTag,{value:"Module"}));function or(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const t=typeof n;if(t==="number")return!isNaN(n)&&isFinite(n);if(t==="string"){if(n.length===0)return!1;if(n.length===1)return/\d/.test(n);const i=Array.from(new Set([".",...e])).map(r=>`\\${r}`).join("|");return new RegExp(`^[+-]?(((${i})?\\d+((${i})\\d+)?(e[+-]?\\d+)?)|(0x[a-f\\d]+))$`,"i").test(n.trim())}else if(t==="object")return!!n&&typeof n.valueOf()=="number"&&!(n instanceof Date);return!1}function dY(n){return or(n,[","])}function $e(n,e,t){let i=-1;for(typeof e=="function"?(t=e,e=n):i=n-1;++i<=e&&t(i)!==!1;);}function PI(n,e,t){let i=n+1;for(typeof e=="function"&&(t=e,e=0);--i>=e&&t(i)!==!1;);}function aL(n,e){return e=parseInt(e.toString().replace("%",""),10),e=isNaN(e)?0:e,parseInt(n*e/100,10)}function Gt(n,e,t){return Math.min(n,e)===n?e:Math.max(n,t)===n?t:n}const LEe=Object.freeze(Object.defineProperty({__proto__:null,clamp:Gt,isNumeric:or,isNumericLike:dY,rangeEach:$e,rangeEachReverse:PI,valueAccordingPercent:aL},Symbol.toStringTag,{value:"Module"})),II="asc",NEe="desc",C3=new Map([[II,[-1,1]],[NEe,[1,-1]]]),HEe=n=>`The priority '${n}' is already declared in a map.`,$Ee=n=>`The priority '${n}' is not a number.`;function FEe(){let{errorPriorityExists:n,errorPriorityNaN:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=new Map;n=un(n)?n:HEe,e=un(e)?e:$Ee;function i(s,o){if(!or(s))throw new Error(e(s));if(t.has(s))throw new Error(n(s));t.set(s,o)}function r(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:II;const[o,a]=C3.get(s)||C3.get(II);return[...t].sort((l,c)=>l[0]<c[0]?o:a).map(l=>l[1])}return{addItem:i,getItems:r}}const BEe=n=>`The id '${n}' is already declared in a map.`;function oE(){let{errorIdExists:n}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=new Map;n=un(n)?n:BEe;function t(c,u){if(l(c))throw new Error(n(c));e.set(c,u)}function i(c){return e.delete(c)}function r(){e.clear()}function s(c){const[u]=a().find(h=>{let[d,f]=h;return c===f?d:!1})||[null];return u}function o(c){return e.get(c)}function a(){return[...e]}function l(c){return e.has(c)}return{addItem:t,clear:r,getId:s,getItem:o,getItems:a,hasItem:l,removeItem:i}}const VEe=n=>`'${n}' value is already declared in a unique set.`;function WEe(){let{errorItemExists:n}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=new Set;n=un(n)?n:VEe;function t(s){if(e.has(s))throw new Error(n(s));e.add(s)}function i(){return[...e]}function r(){e.clear()}return{addItem:t,clear:r,getItems:i}}const lL=n=>`There is already registered "${n}" plugin.`,jEe=n=>`There is already registered plugin on priority "${n}".`,zEe=n=>`The priority "${n}" is not a number.`,fY=FEe({errorPriorityExists:jEe,errorPriorityNaN:zEe}),gY=WEe({errorItemExists:lL}),OI=oE({errorIdExists:lL});function cL(){return[...fY.getItems(),...gY.getItems()]}function wy(n){const e=pr(n);return OI.getItem(e)}function UEe(n){return!!wy(n)}function At(n,e,t){[n,e,t]=YEe(n,e,t),wy(n)===void 0&&GEe(n,e,t)}function GEe(n,e,t){const i=pr(n);if(OI.hasItem(i))throw new Error(lL(i));t===void 0?gY.addItem(i):fY.addItem(t,i),OI.addItem(i,e)}function YEe(n,e,t){return typeof n=="function"&&(e=n,n=e.PLUGIN_KEY,t=e.PLUGIN_PRIORITY),[n,e,t]}const{register:KEe,getItem:qEe,hasItem:pY,getNames:XEe,getValues:G7e}=da("renderers");function iR(n){if(typeof n=="function")return n;if(!pY(n))throw Error(`No registered renderer found under "${n}" name`);return qEe(n)}function os(n,e){typeof n!="string"&&(e=n,n=e.RENDERER_TYPE),KEe(n,e)}const{register:ZEe,getItem:QEe,hasItem:mY,getNames:JEe,getValues:Y7e}=da("validators");function uL(n){if(typeof n=="function")return n;if(!mY(n))throw Error(`No registered validator found under "${n}" name`);return QEe(n)}function Sd(n,e){typeof n!="string"&&(e=n,n=e.VALIDATOR_TYPE),ZEe(n,e)}var exe=qi,txe=ry,nxe=ay,ixe=oy,rxe=nL;exe({target:"Array",proto:!0},{at:function(e){var t=txe(this),i=nxe(t),r=ixe(e),s=r>=0?r:i+r;return s<0||s>=i?void 0:t[s]}});rxe("at");var sxe=qi,oxe=bi,axe=ny,lxe=oy,cxe=H1,uxe=ts,hxe=oxe("".charAt),dxe=uxe(function(){return"𠮷".at(-2)!=="\uD842"});sxe({target:"String",proto:!0,forced:dxe},{at:function(e){var t=cxe(axe(this)),i=t.length,r=lxe(e),s=r>=0?r:i+r;return s<0||s>=i?void 0:hxe(t,s)}});function Lm(n,e,t){return(e=fxe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function fxe(n){var e=gxe(n,"string");return typeof e=="symbol"?e:e+""}function gxe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class pxe{constructor(){Lm(this,"count",0),Lm(this,"startColumn",null),Lm(this,"endColumn",null),Lm(this,"startPosition",null),Lm(this,"isVisibleInTrimmingContainer",!1)}initialize(){}process(e,t){const{totalCalculatedWidth:i,zeroBasedScrollOffset:r,viewportWidth:s,columnWidth:o}=t,a=r>0?s+1:s;i>=r&&i+o<=r+a&&((this.startColumn===null||this.startColumn===void 0)&&(this.startColumn=e),this.endColumn=e)}finalize(e){var t;const{scrollOffset:i,viewportWidth:r,inlineStartOffset:s,zeroBasedScrollOffset:o,totalColumns:a,needReverse:l,startPositions:c,columnWidth:u}=e;if(this.endColumn===a-1&&l)for(this.startColumn=this.endColumn;this.startColumn>0;){const g=c[this.endColumn]+u-c[this.startColumn-1];if(g<=r&&(this.startColumn-=1),g>=r)break}this.startPosition=(t=c[this.startColumn])!==null&&t!==void 0?t:null;const h=o>0?r+1:r,d=i+r-h,f=this.startColumn===null?0:e.getColumnWidth(this.startColumn);d<-1*s||i>c.at(-1)||-1*i-r>-1*f?this.isVisibleInTrimmingContainer=!1:this.isVisibleInTrimmingContainer=!0,a<this.endColumn&&(this.endColumn=a-1),this.startColumn!==null&&(this.count=this.endColumn-this.startColumn+1)}}function Nm(n,e,t){return(e=mxe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function mxe(n){var e=bxe(n,"string");return typeof e=="symbol"?e:e+""}function bxe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class vxe{constructor(){Nm(this,"count",0),Nm(this,"startRow",null),Nm(this,"endRow",null),Nm(this,"startPosition",null),Nm(this,"isVisibleInTrimmingContainer",!1)}initialize(){}process(e,t){const{totalCalculatedHeight:i,zeroBasedScrollOffset:r,innerViewportHeight:s,rowHeight:o}=t;i>=r&&i+o<=s&&(this.startRow===null&&(this.startRow=e),this.endRow=e)}finalize(e){var t;const{scrollOffset:i,viewportHeight:r,horizontalScrollbarHeight:s,totalRows:o,needReverse:a,startPositions:l,rowHeight:c}=e;if(this.endRow===o-1&&a)for(this.startRow=this.endRow;this.startRow>0;){const d=l[this.endRow]+c-l[this.startRow-1];if(d<=r-s&&(this.startRow-=1),d>=r-s)break}this.startPosition=(t=l[this.startRow])!==null&&t!==void 0?t:null;const u=i+r-s,h=this.startRow===null?0:e.getRowHeight(this.startRow);u<h||i>l.at(-1)?this.isVisibleInTrimmingContainer=!1:this.isVisibleInTrimmingContainer=!0,o<this.endRow&&(this.endRow=o-1),this.startRow!==null&&(this.count=this.endRow-this.startRow+1)}}function Hm(n,e,t){return(e=wxe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function wxe(n){var e=yxe(n,"string");return typeof e=="symbol"?e:e+""}function yxe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class bY{constructor(){Hm(this,"count",0),Hm(this,"startColumn",null),Hm(this,"endColumn",null),Hm(this,"startPosition",null),Hm(this,"isVisibleInTrimmingContainer",!1)}initialize(){}process(e,t){const{totalCalculatedWidth:i,zeroBasedScrollOffset:r,viewportWidth:s}=t;i<=r&&(this.startColumn=e);const o=r>0?s+1:s;i>=r&&i<=r+o&&(this.startColumn===null||this.startColumn===void 0)&&(this.startColumn=e),this.endColumn=e}finalize(e){var t;const{scrollOffset:i,viewportWidth:r,inlineStartOffset:s,zeroBasedScrollOffset:o,totalColumns:a,needReverse:l,startPositions:c,columnWidth:u}=e;if(this.endColumn===a-1&&l)for(this.startColumn=this.endColumn;this.startColumn>0;){const f=c[this.endColumn]+u-c[this.startColumn-1];if(this.startColumn-=1,f>r)break}this.startPosition=(t=c[this.startColumn])!==null&&t!==void 0?t:null;const h=o>0?r+1:r;i+r-h<-1*s||i>c.at(-1)+u||-1*i-r>0?this.isVisibleInTrimmingContainer=!1:this.isVisibleInTrimmingContainer=!0,a<this.endColumn&&(this.endColumn=a-1),this.startColumn!==null&&(this.count=this.endColumn-this.startColumn+1)}}function $m(n,e,t){return(e=Cxe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Cxe(n){var e=Sxe(n,"string");return typeof e=="symbol"?e:e+""}function Sxe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class vY{constructor(){$m(this,"count",0),$m(this,"startRow",null),$m(this,"endRow",null),$m(this,"startPosition",null),$m(this,"isVisibleInTrimmingContainer",!1)}initialize(){}process(e,t){const{totalCalculatedHeight:i,zeroBasedScrollOffset:r,innerViewportHeight:s}=t;i<=r&&(this.startRow=e),i>=r&&i<=s&&this.startRow===null&&(this.startRow=e),this.endRow=e}finalize(e){var t;const{scrollOffset:i,viewportHeight:r,horizontalScrollbarHeight:s,totalRows:o,needReverse:a,startPositions:l,rowHeight:c}=e;if(this.endRow===o-1&&a)for(this.startRow=this.endRow;this.startRow>0;){const h=l[this.endRow]+c-l[this.startRow-1];if(this.startRow-=1,h>=r-s)break}this.startPosition=(t=l[this.startRow])!==null&&t!==void 0?t:null,i+r-s<0||i>l.at(-1)+c?this.isVisibleInTrimmingContainer=!1:this.isVisibleInTrimmingContainer=!0,o<this.endRow&&(this.endRow=o-1),this.startRow!==null&&(this.count=this.endRow-this.startRow+1)}}function Fm(n,e,t){return(e=_xe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function _xe(n){var e=Rxe(n,"string");return typeof e=="symbol"?e:e+""}function Rxe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class Exe{constructor(){Fm(this,"count",0),Fm(this,"startColumn",0),Fm(this,"endColumn",0),Fm(this,"startPosition",0),Fm(this,"isVisibleInTrimmingContainer",!0)}initialize(e){let{totalColumns:t}=e;this.count=t,this.endColumn=this.count-1}process(){}finalize(){}}function Bm(n,e,t){return(e=xxe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function xxe(n){var e=Txe(n,"string");return typeof e=="symbol"?e:e+""}function Txe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class Mxe{constructor(){Bm(this,"count",0),Bm(this,"startRow",0),Bm(this,"endRow",0),Bm(this,"startPosition",0),Bm(this,"isVisibleInTrimmingContainer",!0)}initialize(e){let{totalRows:t}=e;this.count=t,this.endRow=this.count-1}process(){}finalize(){}}class Axe extends bY{finalize(e){var t;super.finalize(e);const{overrideFn:i,totalColumns:r,startPositions:s}=e;this.startColumn!==null&&typeof i=="function"&&i(this),this.startColumn<0&&(this.startColumn=0),this.startPosition=(t=s[this.startColumn])!==null&&t!==void 0?t:null,r<this.endColumn&&(this.endColumn=r-1),this.startColumn!==null&&(this.count=this.endColumn-this.startColumn+1)}}class Pxe extends vY{finalize(e){var t;super.finalize(e);const{overrideFn:i,totalRows:r,startPositions:s}=e;this.startRow!==null&&typeof i=="function"&&i(this),this.startRow<0&&(this.startRow=0),this.startPosition=(t=s[this.startRow])!==null&&t!==void 0?t:null,r<this.endRow&&(this.endRow=r-1),this.startRow!==null&&(this.count=this.endRow-this.startRow+1)}}function S3(n,e,t){return(e=Ixe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Ixe(n){var e=Oxe(n,"string");return typeof e=="symbol"?e:e+""}function Oxe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class wY{constructor(e){S3(this,"calculationTypes",[]),S3(this,"calculationResults",new Map),this.calculationTypes=e}_initialize(e){this.calculationTypes.forEach(t=>{let[i,r]=t;this.calculationResults.set(i,r),r.initialize(e)})}_process(e,t){this.calculationTypes.forEach(i=>{let[,r]=i;return r.process(e,t)})}_finalize(e){this.calculationTypes.forEach(t=>{let[,i]=t;return i.finalize(e)})}getResultsFor(e){return this.calculationResults.get(e)}}function Eo(n,e,t){return(e=kxe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function kxe(n){var e=Dxe(n,"string");return typeof e=="symbol"?e:e+""}function Dxe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const aE=50;class Lxe extends wY{constructor(e){let{calculationTypes:t,viewportWidth:i,scrollOffset:r,totalColumns:s,columnWidthFn:o,overrideFn:a,inlineStartOffset:l}=e;super(t),Eo(this,"viewportWidth",0),Eo(this,"scrollOffset",0),Eo(this,"zeroBasedScrollOffset",0),Eo(this,"totalColumns",0),Eo(this,"columnWidthFn",null),Eo(this,"columnWidth",0),Eo(this,"overrideFn",null),Eo(this,"inlineStartOffset",0),Eo(this,"totalCalculatedWidth",0),Eo(this,"startPositions",[]),Eo(this,"needReverse",!0),this.viewportWidth=i,this.scrollOffset=r,this.zeroBasedScrollOffset=Math.max(r,0),this.totalColumns=s,this.columnWidthFn=o,this.overrideFn=a,this.inlineStartOffset=l,this.calculate()}calculate(){this._initialize(this);for(let e=0;e<this.totalColumns;e++)if(this.columnWidth=this.getColumnWidth(e),this._process(e,this),this.startPositions.push(this.totalCalculatedWidth),this.totalCalculatedWidth+=this.columnWidth,this.totalCalculatedWidth>=this.zeroBasedScrollOffset+this.viewportWidth){this.needReverse=!1;break}this._finalize(this)}getColumnWidth(e){const t=this.columnWidthFn(e);return isNaN(t)?aE:t}}function Ls(n,e,t){return(e=Nxe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Nxe(n){var e=Hxe(n,"string");return typeof e=="symbol"?e:e+""}function Hxe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const yY=23;class $xe extends wY{constructor(e){let{calculationTypes:t,viewportHeight:i,scrollOffset:r,totalRows:s,rowHeightFn:o,overrideFn:a,horizontalScrollbarHeight:l}=e;super(t),Ls(this,"viewportHeight",0),Ls(this,"scrollOffset",0),Ls(this,"zeroBasedScrollOffset",0),Ls(this,"totalRows",0),Ls(this,"rowHeightFn",null),Ls(this,"rowHeight",0),Ls(this,"overrideFn",null),Ls(this,"horizontalScrollbarHeight",0),Ls(this,"innerViewportHeight",0),Ls(this,"totalCalculatedHeight",0),Ls(this,"startPositions",[]),Ls(this,"needReverse",!0),this.viewportHeight=i,this.scrollOffset=r,this.zeroBasedScrollOffset=Math.max(r,0),this.totalRows=s,this.rowHeightFn=o,this.overrideFn=a,this.horizontalScrollbarHeight=l??0,this.innerViewportHeight=this.zeroBasedScrollOffset+this.viewportHeight-this.horizontalScrollbarHeight,this.calculate()}calculate(){this._initialize(this);for(let e=0;e<this.totalRows;e++)if(this.rowHeight=this.getRowHeight(e),this._process(e,this),this.startPositions.push(this.totalCalculatedHeight),this.totalCalculatedHeight+=this.rowHeight,this.totalCalculatedHeight>=this.innerViewportHeight){this.needReverse=!1;break}this._finalize(this)}getRowHeight(e){const t=this.rowHeightFn(e);return isNaN(t)?yY:t}}function Fxe(n,e,t){Bxe(n,e),e.set(n,t)}function Bxe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _3(n,e,t){return(e=Vxe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Vxe(n){var e=Wxe(n,"string");return typeof e=="symbol"?e:e+""}function Wxe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Yf(n,e){return n.get(CY(n,e))}function R3(n,e,t){return n.set(CY(n,e),t),t}function CY(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var Pl=new WeakMap;class uf{constructor(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;_3(this,"row",null),_3(this,"col",null),Fxe(this,Pl,!1),R3(Pl,this,i),typeof e<"u"&&typeof t<"u"&&(this.row=e,this.col=t)}isValid(e){const{countRows:t,countCols:i,countRowHeaders:r,countColHeaders:s}={countRows:0,countCols:0,countRowHeaders:0,countColHeaders:0,...e};return!(!Number.isInteger(this.row)||!Number.isInteger(this.col)||this.row<-s||this.col<-r||this.row>=t||this.col>=i)}isEqual(e){return e===this?!0:this.row===e.row&&this.col===e.col}isHeader(){return!this.isCell()}isCell(){return this.row>=0&&this.col>=0}isRtl(){return Yf(Pl,this)}isSouthEastOf(e){return this.row>=e.row&&(Yf(Pl,this)?this.col<=e.col:this.col>=e.col)}isNorthWestOf(e){return this.row<=e.row&&(Yf(Pl,this)?this.col>=e.col:this.col<=e.col)}isSouthWestOf(e){return this.row>=e.row&&(Yf(Pl,this)?this.col>=e.col:this.col<=e.col)}isNorthEastOf(e){return this.row<=e.row&&(Yf(Pl,this)?this.col<=e.col:this.col>=e.col)}normalize(){return this.row=this.row===null?this.row:Math.max(this.row,0),this.col=this.col===null?this.col:Math.max(this.col,0),this}assign(e){return Number.isInteger(e==null?void 0:e.row)&&(this.row=e.row),Number.isInteger(e==null?void 0:e.col)&&(this.col=e.col),e instanceof uf&&R3(Pl,this,e.isRtl()),this}clone(){return new uf(this.row,this.col,Yf(Pl,this))}toObject(){return{row:this.row,col:this.col}}}function jxe(n,e,t){zxe(n,e),e.set(n,t)}function zxe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function AT(n,e,t){return(e=Uxe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Uxe(n){var e=Gxe(n,"string");return typeof e=="symbol"?e:e+""}function Gxe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Ns(n,e){return n.get(SY(n,e))}function Yxe(n,e,t){return n.set(SY(n,e),t),t}function SY(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var $r=new WeakMap;class yy{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;AT(this,"highlight",null),AT(this,"from",null),AT(this,"to",null),jxe(this,$r,!1),this.highlight=e.clone(),this.from=t.clone(),this.to=i.clone(),Yxe($r,this,r)}setHighlight(e){return this.highlight=e.clone(),this}setFrom(e){return this.from=e.clone(),this}setTo(e){return this.to=e.clone(),this}isValid(e){return this.from.isValid(e)&&this.to.isValid(e)}isSingle(){return this.isSingleCell()||this.isSingleHeader()}isSingleCell(){return this.from.row>=0&&this.from.row===this.to.row&&this.from.col>=0&&this.from.col===this.to.col}isSingleHeader(){return(this.from.row<0||this.from.col<0)&&this.from.row===this.to.row&&this.from.col===this.to.col}isHeader(){return this.from.isHeader()&&this.to.isHeader()?!0:this.from.col<0&&this.to.col<0||this.from.row<0&&this.to.row<0}containsHeaders(){return this.from.isHeader()||this.to.isHeader()}getOuterHeight(){return Math.max(this.from.row,this.to.row)-Math.min(this.from.row,this.to.row)+1}getOuterWidth(){return Math.max(this.from.col,this.to.col)-Math.min(this.from.col,this.to.col)+1}getHeight(){if(this.from.row<0&&this.to.row<0)return 0;const e=Math.max(this.from.row,0),t=Math.max(this.to.row,0);return Math.max(e,t)-Math.min(e,t)+1}getWidth(){if(this.from.col<0&&this.to.col<0)return 0;const e=Math.max(this.from.col,0),t=Math.max(this.to.col,0);return Math.max(e,t)-Math.min(e,t)+1}getCellsCount(){return this.getWidth()*this.getHeight()}includes(e){const{row:t,col:i}=e,r=this.getOuterTopStartCorner(),s=this.getOuterBottomEndCorner();return r.row<=t&&s.row>=t&&r.col<=i&&s.col>=i}includesRange(e){return this.includes(e.getOuterTopStartCorner())&&this.includes(e.getOuterBottomEndCorner())}isEqual(e){return Math.min(this.from.row,this.to.row)===Math.min(e.from.row,e.to.row)&&Math.max(this.from.row,this.to.row)===Math.max(e.from.row,e.to.row)&&Math.min(this.from.col,this.to.col)===Math.min(e.from.col,e.to.col)&&Math.max(this.from.col,this.to.col)===Math.max(e.from.col,e.to.col)}overlaps(e){return e.isSouthEastOf(this.getOuterTopLeftCorner())&&e.isNorthWestOf(this.getOuterBottomRightCorner())}isSouthEastOf(e){return this.getOuterTopLeftCorner().isSouthEastOf(e)||this.getOuterBottomRightCorner().isSouthEastOf(e)}isNorthWestOf(e){return this.getOuterTopLeftCorner().isNorthWestOf(e)||this.getOuterBottomRightCorner().isNorthWestOf(e)}isOverlappingHorizontally(e){return this.getOuterTopEndCorner().col>=e.getOuterTopStartCorner().col&&this.getOuterTopEndCorner().col<=e.getOuterTopEndCorner().col||this.getOuterTopStartCorner().col<=e.getOuterTopEndCorner().col&&this.getOuterTopStartCorner().col>=e.getOuterTopStartCorner().col}isOverlappingVertically(e){return this.getOuterBottomStartCorner().row>=e.getOuterTopRightCorner().row&&this.getOuterBottomStartCorner().row<=e.getOuterBottomStartCorner().row||this.getOuterTopEndCorner().row<=e.getOuterBottomStartCorner().row&&this.getOuterTopEndCorner().row>=e.getOuterTopRightCorner().row}expand(e){const t=this.getOuterTopStartCorner(),i=this.getOuterBottomEndCorner();return e.row<t.row||e.col<t.col||e.row>i.row||e.col>i.col?(this.from=this._createCellCoords(Math.min(t.row,e.row),Math.min(t.col,e.col)),this.to=this._createCellCoords(Math.max(i.row,e.row),Math.max(i.col,e.col)),!0):!1}expandByRange(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(this.includesRange(e)||!this.overlaps(e))return!1;const i=this.getOuterTopStartCorner(),r=this.getOuterBottomEndCorner(),s=this.getDirection(),o=e.getOuterTopStartCorner(),a=e.getOuterBottomEndCorner(),l=Math.min(i.row,o.row),c=Math.min(i.col,o.col),u=Math.max(r.row,a.row),h=Math.max(r.col,a.col),d=this._createCellCoords(l,c),f=this._createCellCoords(u,h);return this.from=d,this.to=f,this.setDirection(s),t&&(this.highlight.row===this.getOuterBottomRightCorner().row&&this.getVerticalDirection()==="N-S"&&this.flipDirectionVertically(),this.highlight.col===this.getOuterTopRightCorner().col&&this.getHorizontalDirection()==="W-E"&&this.flipDirectionHorizontally()),!0}getDirection(){if(this.from.isNorthWestOf(this.to))return"NW-SE";if(this.from.isNorthEastOf(this.to))return"NE-SW";if(this.from.isSouthEastOf(this.to))return"SE-NW";if(this.from.isSouthWestOf(this.to))return"SW-NE"}setDirection(e){switch(e){case"NW-SE":[this.from,this.to]=[this.getOuterTopLeftCorner(),this.getOuterBottomRightCorner()];break;case"NE-SW":[this.from,this.to]=[this.getOuterTopRightCorner(),this.getOuterBottomLeftCorner()];break;case"SE-NW":[this.from,this.to]=[this.getOuterBottomRightCorner(),this.getOuterTopLeftCorner()];break;case"SW-NE":[this.from,this.to]=[this.getOuterBottomLeftCorner(),this.getOuterTopRightCorner()];break}}getVerticalDirection(){return["NE-SW","NW-SE"].indexOf(this.getDirection())>-1?"N-S":"S-N"}getHorizontalDirection(){return["NW-SE","SW-NE"].indexOf(this.getDirection())>-1?"W-E":"E-W"}flipDirectionVertically(){switch(this.getDirection()){case"NW-SE":this.setDirection("SW-NE");break;case"NE-SW":this.setDirection("SE-NW");break;case"SE-NW":this.setDirection("NE-SW");break;case"SW-NE":this.setDirection("NW-SE");break}}flipDirectionHorizontally(){switch(this.getDirection()){case"NW-SE":this.setDirection("NE-SW");break;case"NE-SW":this.setDirection("NW-SE");break;case"SE-NW":this.setDirection("SW-NE");break;case"SW-NE":this.setDirection("SE-NW");break}}getTopStartCorner(){return this._createCellCoords(Math.min(this.from.row,this.to.row),Math.min(this.from.col,this.to.col)).normalize()}getTopLeftCorner(){return Ns($r,this)?this.getTopEndCorner():this.getTopStartCorner()}getBottomEndCorner(){return this._createCellCoords(Math.max(this.from.row,this.to.row),Math.max(this.from.col,this.to.col)).normalize()}getBottomRightCorner(){return Ns($r,this)?this.getBottomStartCorner():this.getBottomEndCorner()}getTopEndCorner(){return this._createCellCoords(Math.min(this.from.row,this.to.row),Math.max(this.from.col,this.to.col)).normalize()}getTopRightCorner(){return Ns($r,this)?this.getTopStartCorner():this.getTopEndCorner()}getBottomStartCorner(){return this._createCellCoords(Math.max(this.from.row,this.to.row),Math.min(this.from.col,this.to.col)).normalize()}getBottomLeftCorner(){return Ns($r,this)?this.getBottomEndCorner():this.getBottomStartCorner()}getOuterTopStartCorner(){return this._createCellCoords(Math.min(this.from.row,this.to.row),Math.min(this.from.col,this.to.col))}getOuterTopLeftCorner(){return Ns($r,this)?this.getOuterTopEndCorner():this.getOuterTopStartCorner()}getOuterBottomEndCorner(){return this._createCellCoords(Math.max(this.from.row,this.to.row),Math.max(this.from.col,this.to.col))}getOuterBottomRightCorner(){return Ns($r,this)?this.getOuterBottomStartCorner():this.getOuterBottomEndCorner()}getOuterTopEndCorner(){return this._createCellCoords(Math.min(this.from.row,this.to.row),Math.max(this.from.col,this.to.col))}getOuterTopRightCorner(){return Ns($r,this)?this.getOuterTopStartCorner():this.getOuterTopEndCorner()}getOuterBottomStartCorner(){return this._createCellCoords(Math.max(this.from.row,this.to.row),Math.min(this.from.col,this.to.col))}getOuterBottomLeftCorner(){return Ns($r,this)?this.getOuterBottomEndCorner():this.getOuterBottomStartCorner()}isCorner(e){return e.isEqual(this.getOuterTopLeftCorner())||e.isEqual(this.getOuterTopRightCorner())||e.isEqual(this.getOuterBottomLeftCorner())||e.isEqual(this.getOuterBottomRightCorner())}getOppositeCorner(e){if(!(e instanceof uf))return!1;if(e.isEqual(this.getOuterBottomEndCorner()))return this.getOuterTopStartCorner();if(e.isEqual(this.getOuterTopStartCorner()))return this.getOuterBottomEndCorner();if(e.isEqual(this.getOuterTopEndCorner()))return this.getOuterBottomStartCorner();if(e.isEqual(this.getOuterBottomStartCorner()))return this.getOuterTopEndCorner()}getBordersSharedWith(e){if(!this.includesRange(e))return[];const t={top:Math.min(this.from.row,this.to.row),bottom:Math.max(this.from.row,this.to.row),left:Math.min(this.from.col,this.to.col),right:Math.max(this.from.col,this.to.col)},i={top:Math.min(e.from.row,e.to.row),bottom:Math.max(e.from.row,e.to.row),left:Math.min(e.from.col,e.to.col),right:Math.max(e.from.col,e.to.col)},r=[];return t.top===i.top&&r.push("top"),t.right===i.right&&r.push(Ns($r,this)?"left":"right"),t.bottom===i.bottom&&r.push("bottom"),t.left===i.left&&r.push(Ns($r,this)?"right":"left"),r}getInner(){const e=this.getOuterTopStartCorner(),t=this.getOuterBottomEndCorner(),i=[];for(let r=e.row;r<=t.row;r++)for(let s=e.col;s<=t.col;s++)!(this.from.row===r&&this.from.col===s)&&!(this.to.row===r&&this.to.col===s)&&i.push(this._createCellCoords(r,s));return i}getAll(){const e=this.getOuterTopStartCorner(),t=this.getOuterBottomEndCorner(),i=[];for(let r=e.row;r<=t.row;r++)for(let s=e.col;s<=t.col;s++)e.row===r&&e.col===s?i.push(e):t.row===r&&t.col===s?i.push(t):i.push(this._createCellCoords(r,s));return i}forAll(e){const t=this.getOuterTopStartCorner(),i=this.getOuterBottomEndCorner();for(let r=t.row;r<=i.row;r++)for(let s=t.col;s<=i.col;s++)if(e(r,s)===!1)return}clone(){return new yy(this.highlight,this.from,this.to,Ns($r,this))}toObject(){return{from:this.from.toObject(),to:this.to.toObject()}}_createCellCoords(e,t){return new uf(e,t,Ns($r,this))}}function ga(n,e,t){Kxe(n,e),e.set(n,t)}function Kxe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Be(n,e){return n.get(_Y(n,e))}function Gc(n,e,t){return n.set(_Y(n,e),t),t}function _Y(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var Hs=new WeakMap,PT=new WeakMap,Ii=new WeakMap,Kf=new WeakMap,k0=new WeakMap,xo=new WeakMap,IT=new WeakMap,Vm=new WeakMap,xh=new WeakMap,pa=new WeakMap;let RY=class{constructor(e,t,i,r,s,o){let a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null;ga(this,Hs,void 0),ga(this,PT,void 0),ga(this,Ii,void 0),ga(this,Kf,void 0),ga(this,k0,void 0),ga(this,xo,void 0),ga(this,IT,void 0),ga(this,Vm,void 0),ga(this,xh,[null,null]),ga(this,pa,[null,null]),Gc(Hs,this,i),Gc(PT,this,t),Gc(Ii,this,s),Gc(Kf,this,o),Gc(k0,this,a),Gc(xo,this,r),Gc(IT,this,e),this.registerEvents()}registerEvents(){Be(xo,this).addEventListener(Be(Ii,this).holder,"contextmenu",i=>this.onContextMenu(i)),Be(xo,this).addEventListener(Be(Ii,this).TABLE,"mouseover",i=>this.onMouseOver(i)),Be(xo,this).addEventListener(Be(Ii,this).TABLE,"mouseout",i=>this.onMouseOut(i));const e=()=>{Be(xo,this).addEventListener(Be(Ii,this).holder,"touchstart",i=>this.onTouchStart(i)),Be(xo,this).addEventListener(Be(Ii,this).holder,"touchend",i=>this.onTouchEnd(i)),this.momentumScrolling||(this.momentumScrolling={}),Be(xo,this).addEventListener(Be(Ii,this).holder,"scroll",()=>{clearTimeout(this.momentumScrolling._timeout),this.momentumScrolling.ongoing||Be(Hs,this).getSetting("onBeforeTouchScroll"),this.momentumScrolling.ongoing=!0,this.momentumScrolling._timeout=setTimeout(()=>{this.touchApplied||(this.momentumScrolling.ongoing=!1,Be(Hs,this).getSetting("onAfterMomentumScroll"))},200)})},t=()=>{Be(xo,this).addEventListener(Be(Ii,this).holder,"mouseup",i=>this.onMouseUp(i)),Be(xo,this).addEventListener(Be(Ii,this).holder,"mousedown",i=>this.onMouseDown(i))};pc()?e():(XD()&&e(),t())}selectedCellWasTouched(e){const i=this.parentCell(e).coords;if(Be(Vm,this)&&i){const[r,s]=[i.row,Be(Vm,this).from.row],[o,a]=[i.col,Be(Vm,this).from.col];return r===s&&o===a}return!1}parentCell(e){const t={},i=Be(Ii,this).TABLE,r=Kb(e,["TD","TH"],i);return r?(t.coords=Be(Ii,this).getCoords(r),t.TD=r):Ue(e,"wtBorder")&&Ue(e,"current")?(t.coords=Be(Kf,this).getFocusSelection().cellRange.highlight,t.TD=Be(Ii,this).getCell(t.coords)):Ue(e,"wtBorder")&&Ue(e,"area")&&Be(Kf,this).getAreaSelection().cellRange&&(t.coords=Be(Kf,this).getAreaSelection().cellRange.to,t.TD=Be(Ii,this).getCell(t.coords)),t}onMouseDown(e){const t=Be(PT,this).rootDocument.activeElement,i=qD(E9,e.target),r=e.target;if(!["TD","TH"].includes(t.nodeName)&&(r===t||i(0)===t||i(1)===t))return;const s=this.parentCell(r);Ue(r,"corner")?Be(Hs,this).getSetting("onCellCornerMouseDown",e,r):s.TD&&Be(Hs,this).has("onCellMouseDown")&&this.callListener("onCellMouseDown",e,s.coords,s.TD),(e.button===0||this.touchApplied)&&s.TD&&(Be(pa,this)[0]=s.TD,clearTimeout(Be(xh,this)[0]),Be(xh,this)[0]=setTimeout(()=>{Be(pa,this)[0]=null},1e3))}onContextMenu(e){if(Be(Hs,this).has("onCellContextMenu")){const t=this.parentCell(e.target);t.TD&&this.callListener("onCellContextMenu",e,t.coords,t.TD)}}onMouseOver(e){if(!Be(Hs,this).has("onCellMouseOver"))return;const t=Be(Ii,this).TABLE,i=Kb(e.target,["TD","TH"],t),r=Be(k0,this)||this;i&&i!==r.lastMouseOver&&Nu(i,t)&&(r.lastMouseOver=i,this.callListener("onCellMouseOver",e,Be(Ii,this).getCoords(i),i))}onMouseOut(e){if(!Be(Hs,this).has("onCellMouseOut"))return;const t=Be(Ii,this).TABLE,i=Kb(e.target,["TD","TH"],t),r=Kb(e.relatedTarget,["TD","TH"],t),s=Be(k0,this)||this;i&&i!==r&&Nu(i,t)&&(this.callListener("onCellMouseOut",e,Be(Ii,this).getCoords(i),i),r===null&&(s.lastMouseOver=null))}onMouseUp(e){const t=this.parentCell(e.target);t.TD&&Be(Hs,this).has("onCellMouseUp")&&this.callListener("onCellMouseUp",e,t.coords,t.TD),!(e.button!==0&&!this.touchApplied)&&(t.TD===Be(pa,this)[0]&&t.TD===Be(pa,this)[1]?(Ue(e.target,"corner")?this.callListener("onCellCornerDblClick",e,t.coords,t.TD):this.callListener("onCellDblClick",e,t.coords,t.TD),Be(pa,this)[0]=null,Be(pa,this)[1]=null):t.TD===Be(pa,this)[0]&&(Be(pa,this)[1]=t.TD,clearTimeout(Be(xh,this)[1]),Be(xh,this)[1]=setTimeout(()=>{Be(pa,this)[1]=null},500)))}onTouchStart(e){Gc(Vm,this,Be(Kf,this).getFocusSelection().cellRange),this.touchApplied=!0,this.onMouseDown(e)}onTouchEnd(e){var t;const i=e.target,r=(t=this.parentCell(i))===null||t===void 0?void 0:t.coords,s=De(r)&&r.row>=0&&r.col>=0;if(e.cancelable&&s&&Be(Hs,this).getSetting("isDataViewInstance")){const a=["A","BUTTON","INPUT"];JD()&&(X9()||Z9())&&this.selectedCellWasTouched(i)&&!a.includes(i.tagName)?e.preventDefault():this.selectedCellWasTouched(i)||e.preventDefault()}this.onMouseUp(e),this.touchApplied=!1}callListener(e,t,i,r){const s=Be(Hs,this).getSettingPure(e);s&&s(t,i,r,Be(IT,this).call(this))}destroy(){clearTimeout(Be(xh,this)[0]),clearTimeout(Be(xh,this)[1]),Be(xo,this).destroy()}};function OT(n,e,t){return(e=qxe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function qxe(n){var e=Xxe(n,"string");return typeof e=="symbol"?e:e+""}function Xxe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class Zxe{constructor(e,t,i){OT(this,"offset",void 0),OT(this,"total",void 0),OT(this,"countTH",void 0),this.offset=e,this.total=t,this.countTH=i}offsetted(e){return e+this.offset}unOffsetted(e){return e-this.offset}renderedToSource(e){return this.offsetted(e)}sourceToRendered(e){return this.unOffsetted(e)}offsettedTH(e){return e-this.countTH}unOffsettedTH(e){return e+this.countTH}visibleRowHeadedColumnToSourceColumn(e){return this.renderedToSource(this.offsettedTH(e))}sourceColumnToVisibleRowHeadedColumn(e){return this.unOffsettedTH(this.sourceToRendered(e))}}function kT(n,e,t){return(e=Qxe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Qxe(n){var e=Jxe(n,"string");return typeof e=="symbol"?e:e+""}function Jxe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class eTe{constructor(e,t,i){kT(this,"offset",void 0),kT(this,"total",void 0),kT(this,"countTH",void 0),this.offset=e,this.total=t,this.countTH=i}offsetted(e){return e+this.offset}unOffsetted(e){return e-this.offset}renderedToSource(e){return this.offsetted(e)}sourceToRendered(e){return this.unOffsetted(e)}offsettedTH(e){return e-this.countTH}unOffsettedTH(e){return e+this.countTH}visibleColHeadedRowToSourceRow(e){return this.renderedToSource(this.offsettedTH(e))}sourceRowToVisibleColHeadedRow(e){return this.unOffsettedTH(this.sourceToRendered(e))}}const tTe=0,rR=1,sR=2;function D0(n,e,t){return(e=nTe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function nTe(n){var e=iTe(n,"string");return typeof e=="symbol"?e:e+""}function iTe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class E3{constructor(){D0(this,"currentSize",0),D0(this,"nextSize",0),D0(this,"currentOffset",0),D0(this,"nextOffset",0)}setSize(e){this.currentSize=this.nextSize,this.nextSize=e}setOffset(e){this.currentOffset=this.nextOffset,this.nextOffset=e}}function DT(n,e,t){return(e=rTe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function rTe(n){var e=sTe(n,"string");return typeof e=="symbol"?e:e+""}function sTe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class oTe{constructor(){DT(this,"size",new E3),DT(this,"workingSpace",tTe),DT(this,"sharedSize",null)}setSize(e){this.size.setSize(e)}setOffset(e){this.size.setOffset(e)}getViewSize(){return this.size}isShared(){return this.sharedSize instanceof E3}isPlaceOn(e){return this.workingSpace===e}append(e){this.workingSpace=rR,e.workingSpace=sR,this.sharedSize=e.getViewSize()}prepend(e){this.workingSpace=sR,e.workingSpace=rR,this.sharedSize=e.getViewSize()}}function qf(n,e,t){return(e=aTe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function aTe(n){var e=lTe(n,"string");return typeof e=="symbol"?e:e+""}function lTe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class EY{constructor(e,t,i){qf(this,"rootNode",void 0),qf(this,"nodesPool",void 0),qf(this,"sizeSet",new oTe),qf(this,"childNodeType",void 0),qf(this,"visualIndex",0),qf(this,"collectedNodes",[]),this.rootNode=e,this.nodesPool=t,this.childNodeType=i.toUpperCase()}setSize(e){return this.sizeSet.setSize(e),this}setOffset(e){return this.sizeSet.setOffset(e),this}isSharedViewSet(){return this.sizeSet.isShared()}getNode(e){return e<this.collectedNodes.length?this.collectedNodes[e]:null}getCurrentNode(){const e=this.collectedNodes.length;return e>0?this.collectedNodes[e-1]:null}getRenderedChildCount(){const{rootNode:e,sizeSet:t}=this;let i=0;if(this.isSharedViewSet()){let r=e.firstElementChild;for(;r;){if(r.tagName===this.childNodeType)i+=1;else if(t.isPlaceOn(rR))break;r=r.nextElementSibling}}else i=e.childElementCount;return i}start(){this.collectedNodes.length=0,this.visualIndex=0;const{rootNode:e,sizeSet:t}=this,i=this.isSharedViewSet(),{nextSize:r}=t.getViewSize();let s=this.getRenderedChildCount();for(;s<r;){const a=this.nodesPool();!i||i&&t.isPlaceOn(sR)?e.appendChild(a):e.insertBefore(a,e.firstChild),s+=1}const o=i&&t.isPlaceOn(rR);for(;s>r;)e.removeChild(o?e.firstChild:e.lastChild),s-=1}render(){const{rootNode:e,sizeSet:t}=this;let i=this.visualIndex;this.isSharedViewSet()&&t.isPlaceOn(sR)&&(i+=t.sharedSize.nextSize);let r=e.childNodes[i];if(r.tagName!==this.childNodeType){const s=this.nodesPool();e.replaceChild(s,r),r=s}this.collectedNodes.push(r),this.visualIndex+=1}end(){}}class xY extends EY{prependView(e){return this.sizeSet.prepend(e.sizeSet),e.sizeSet.append(this.sizeSet),this}appendView(e){return this.sizeSet.append(e.sizeSet),e.sizeSet.prepend(this.sizeSet),this}}function cTe(n,e,t){return(e=uTe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function uTe(n){var e=hTe(n,"string");return typeof e=="symbol"?e:e+""}function hTe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class dTe{constructor(e){cTe(this,"nodeType",void 0),this.nodeType=e.toUpperCase()}setRootDocument(e){this.rootDocument=e}obtain(){return this.rootDocument.createElement(this.nodeType)}}function Wm(n,e,t){return(e=fTe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function fTe(n){var e=gTe(n,"string");return typeof e=="symbol"?e:e+""}function gTe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class Cy{constructor(e,t){Wm(this,"nodesPool",null),Wm(this,"nodeType",void 0),Wm(this,"rootNode",void 0),Wm(this,"table",null),Wm(this,"renderedNodes",0),this.nodesPool=typeof e=="string"?new dTe(e):null,this.nodeType=e,this.rootNode=t}setTable(e){this.nodesPool&&this.nodesPool.setRootDocument(e.rootDocument),this.table=e}adjust(){}render(){}}function x3(n,e,t){return(e=pTe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function pTe(n){var e=mTe(n,"string");return typeof e=="symbol"?e:e+""}function mTe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class bTe extends Cy{constructor(){super("TH"),x3(this,"orderViews",new WeakMap),x3(this,"sourceRowIndex",0)}obtainOrderView(e){let t;return this.orderViews.has(e)?t=this.orderViews.get(e):(t=new xY(e,i=>this.nodesPool.obtain(this.sourceRowIndex,i),this.nodeType),this.orderViews.set(e,t)),t}render(){const{rowsToRender:e,rowHeaderFunctions:t,rowHeadersCount:i,rows:r,cells:s}=this.table;for(let o=0;o<e;o++){const a=this.table.renderedRowToSource(o),l=r.getRenderedNode(o);this.sourceRowIndex=a;const c=this.obtainOrderView(l),u=s.obtainOrderView(l);c.appendView(u).setSize(i).setOffset(this.table.renderedColumnToSource(0)).start();for(let h=0;h<i;h++){c.render();const d=c.getCurrentNode();d.className="",d.removeAttribute("style"),Of(d,[new RegExp("aria-(.*)"),new RegExp("role")]),this.table.isAriaEnabled()&&ze(d,[aRe(),mRe(),FD(h+1),nm(-1)]),t[h](a,d,h)}c.end()}}}class vTe extends Cy{constructor(e){super(null,e)}adjust(){const{columnHeadersCount:e,rowHeadersCount:t}=this.table;let i=this.rootNode.firstChild;if(e){const{columnsToRender:r}=this.table,s=r+t;for(let a=0,l=e;a<l;a++){for(i=this.rootNode.childNodes[a],i||(i=this.table.rootDocument.createElement("tr"),this.rootNode.appendChild(i)),this.renderedNodes=i.childNodes.length;this.renderedNodes<s;)i.appendChild(this.table.rootDocument.createElement("th")),this.renderedNodes+=1;for(;this.renderedNodes>s;)i.removeChild(i.lastChild),this.renderedNodes-=1}const o=this.rootNode.childNodes.length;if(o>e)for(let a=e;a<o;a++)this.rootNode.removeChild(this.rootNode.lastChild)}else i&&ra(i)}render(){const{columnHeadersCount:e}=this.table;this.table.isAriaEnabled()&&ze(this.rootNode,[w9()]);for(let t=0;t<e;t+=1){const{columnHeaderFunctions:i,columnsToRender:r,rowHeadersCount:s}=this.table,o=this.rootNode.childNodes[t];this.table.isAriaEnabled()&&ze(o,[wI(),_9(t+1)]);for(let a=-1*s;a<r;a+=1){const l=this.table.renderedColumnToSource(a),c=o.childNodes[a+s];c.className="",c.removeAttribute("style"),Of(c,[new RegExp("aria-(.*)"),new RegExp("role")]),this.table.isAriaEnabled()&&ze(c,[FD(a+1+this.table.rowHeadersCount),nm(-1),lRe(),...a>=0?[pRe()]:[wI()]]),i[t](l,c,t)}}}}let T3=!1;class wTe extends Cy{constructor(e){super(null,e)}adjust(){const{columnsToRender:e,rowHeadersCount:t}=this.table,i=e+t;for(;this.renderedNodes<i;)this.rootNode.appendChild(this.table.rootDocument.createElement("col")),this.renderedNodes+=1;for(;this.renderedNodes>i;)this.rootNode.removeChild(this.rootNode.lastChild),this.renderedNodes-=1}render(){this.adjust();const{columnsToRender:e,rowHeadersCount:t}=this.table;!T3&&e>1e3&&(T3=!0,Yt(Kt`Performance tip: Handsontable rendered more than 1000 visible columns.\x20
        Consider limiting the number of rendered columns by specifying the table width and/or\x20
        turning off the "renderAllColumns" option.`));for(let r=0;r<t;r++){const s=this.table.renderedColumnToSource(r),o=this.table.columnUtils.getHeaderWidth(s);this.rootNode.childNodes[r].style.width=`${o}px`}for(let r=0;r<e;r++){const s=this.table.renderedColumnToSource(r),o=this.table.columnUtils.getStretchedColumnWidth(s);this.rootNode.childNodes[r+t].style.width=`${o}px`}const i=this.rootNode.firstChild;i&&ge(i,"rowHeader")}}function yTe(n,e,t){return(e=CTe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function CTe(n){var e=STe(n,"string");return typeof e=="symbol"?e:e+""}function STe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const L0={rowEven:"ht__row_even",rowOdd:"ht__row_odd"};let M3=!1;class _Te extends Cy{constructor(e){super("TR",e),yTe(this,"orderView",void 0),this.orderView=new EY(e,t=>this.nodesPool.obtain(t),this.nodeType)}getRenderedNode(e){return this.orderView.getNode(e)}render(){const{rowsToRender:e}=this.table;!M3&&e>1e3&&(M3=!0,Yt(Kt`Performance tip: Handsontable rendered more than 1000 visible rows.\x20
        Consider limiting the number of rendered rows by specifying the table height and/or\x20
        turning off the "renderAllRows" option.`)),this.table.isAriaEnabled()&&ze(this.rootNode,[w9()]),this.orderView.setSize(e).setOffset(this.table.renderedRowToSource(0)).start();for(let r=0;r<e;r++){this.orderView.render();const s=this.orderView.getCurrentNode(),o=this.table.renderedRowToSource(r);if(this.table.isAriaEnabled()){var t,i;ze(s,[wI(),_9(o+((t=(i=this.table.rowUtils)===null||i===void 0||(i=i.dataAccessObject)===null||i===void 0?void 0:i.columnHeaders.length)!==null&&t!==void 0?t:0)+1)])}Qe(s,[L0.rowEven,L0.rowOdd]),(o+1)%2===0?ge(s,L0.rowEven):ge(s,L0.rowOdd)}this.orderView.end()}}function A3(n,e,t){return(e=RTe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function RTe(n){var e=ETe(n,"string");return typeof e=="symbol"?e:e+""}function ETe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class xTe extends Cy{constructor(){super("TD"),A3(this,"orderViews",new WeakMap),A3(this,"sourceRowIndex",0)}obtainOrderView(e){let t;return this.orderViews.has(e)?t=this.orderViews.get(e):(t=new xY(e,i=>this.nodesPool.obtain(this.sourceRowIndex,i),this.nodeType),this.orderViews.set(e,t)),t}render(){const{rowsToRender:e,columnsToRender:t,rows:i,rowHeaders:r}=this.table;for(let a=0;a<e;a++){const l=this.table.renderedRowToSource(a),c=i.getRenderedNode(a);this.sourceRowIndex=l;const u=this.obtainOrderView(c),h=r.obtainOrderView(c);u.prependView(h).setSize(t).setOffset(this.table.renderedColumnToSource(0)).start();for(let d=0;d<t;d++){u.render();const f=u.getCurrentNode(),g=this.table.renderedColumnToSource(d);if(Ue(f,"hide")||(f.className=""),f.removeAttribute("style"),f.removeAttribute("dir"),Of(f,[new RegExp("aria-(.*)"),new RegExp("role")]),this.table.cellRenderer(l,g,f),this.table.isAriaEnabled()){var s,o;ze(f,[...f.hasAttribute("role")?[]:[oRe()],nm(-1),FD(g+((s=(o=this.table.rowUtils)===null||o===void 0||(o=o.dataAccessObject)===null||o===void 0?void 0:o.rowHeaders.length)!==null&&s!==void 0?s:0)+1)])}}u.end()}}}function yi(n,e,t){return(e=TTe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function TTe(n){var e=MTe(n,"string");return typeof e=="symbol"?e:e+""}function MTe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class ATe{constructor(e){let{cellRenderer:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};yi(this,"rootNode",void 0),yi(this,"rootDocument",void 0),yi(this,"rowHeaders",null),yi(this,"columnHeaders",null),yi(this,"colGroup",null),yi(this,"rows",null),yi(this,"cells",null),yi(this,"rowFilter",null),yi(this,"columnFilter",null),yi(this,"rowUtils",null),yi(this,"columnUtils",null),yi(this,"rowsToRender",0),yi(this,"columnsToRender",0),yi(this,"rowHeaderFunctions",[]),yi(this,"rowHeadersCount",0),yi(this,"columnHeaderFunctions",[]),yi(this,"columnHeadersCount",0),yi(this,"cellRenderer",void 0),yi(this,"activeOverlayName",void 0),this.rootNode=e,this.rootDocument=this.rootNode.ownerDocument,this.cellRenderer=t}setActiveOverlayName(e){this.activeOverlayName=e}setAxisUtils(e,t){this.rowUtils=e,this.columnUtils=t}setViewportSize(e,t){this.rowsToRender=e,this.columnsToRender=t}setFilters(e,t){this.rowFilter=e,this.columnFilter=t}setHeaderContentRenderers(e,t){this.rowHeaderFunctions=e,this.rowHeadersCount=e.length,this.columnHeaderFunctions=t,this.columnHeadersCount=t.length}setRenderers(){let{rowHeaders:e,columnHeaders:t,colGroup:i,rows:r,cells:s}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.setTable(this),t.setTable(this),i.setTable(this),r.setTable(this),s.setTable(this),this.rowHeaders=e,this.columnHeaders=t,this.colGroup=i,this.rows=r,this.cells=s}renderedRowToSource(e){return this.rowFilter.renderedToSource(e)}renderedColumnToSource(e){return this.columnFilter.renderedToSource(e)}isAriaEnabled(){return this.rowUtils.wtSettings.getSetting("ariaTags")}render(){this.colGroup.adjust(),this.columnHeaders.adjust(),this.rows.adjust(),this.rowHeaders.adjust(),this.columnHeaders.render(),this.rows.render(),this.rowHeaders.render(),this.cells.render(),this.columnUtils.calculateWidths(),this.colGroup.render();const{rowsToRender:e,rows:t}=this;for(let i=0;i<e;i++){const r=t.getRenderedNode(i);if(r.firstChild){const s=this.renderedRowToSource(i),o=this.rowUtils.getHeightByOverlayName(s,this.activeOverlayName);o?r.firstChild.style.height=`${o-1}px`:r.firstChild.style.height=""}}}}class PTe{constructor(){let{TABLE:e,THEAD:t,COLGROUP:i,TBODY:r,rowUtils:s,columnUtils:o,cellRenderer:a}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.renderer=new ATe(e,{cellRenderer:a}),this.renderer.setRenderers({rowHeaders:new bTe,columnHeaders:new vTe(t),colGroup:new wTe(i),rows:new _Te(r),cells:new xTe}),this.renderer.setAxisUtils(s,o)}setActiveOverlayName(e){return this.renderer.setActiveOverlayName(e),this}setFilters(e,t){return this.renderer.setFilters(e,t),this}setViewportSize(e,t){return this.renderer.setViewportSize(e,t),this}setHeaderContentRenderers(e,t){return this.renderer.setHeaderContentRenderers(e,t),this}adjust(){this.renderer.adjust()}render(){this.renderer.render()}}function jm(n,e,t){ITe(n,e),e.set(n,t)}function ITe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function N0(n,e,t){return(e=OTe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function OTe(n){var e=kTe(n,"string");return typeof e=="symbol"?e:e+""}function kTe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Ji(n,e){return n.get(TY(n,e))}function zm(n,e,t){return n.set(TY(n,e),t),t}function TY(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var H0=new WeakMap,Xf=new WeakMap,Um=new WeakMap,$0=new WeakMap,Th=new WeakMap;class DTe{constructor(e){let{totalColumns:t,stretchMode:i,stretchingColumnWidthFn:r,columnWidthFn:s}=e;N0(this,"stretchAllRatio",0),N0(this,"stretchLastWidth",0),N0(this,"stretchAllColumnsWidth",[]),jm(this,H0,0),N0(this,"needVerifyLastColumnWidth",!0),jm(this,Xf,()=>0),jm(this,Um,o=>o),jm(this,$0,o=>o),jm(this,Th,()=>"none"),zm(Xf,this,t),zm(Th,this,i),zm(Um,this,r??Ji(Um,this)),zm($0,this,s??Ji($0,this))}refreshStretching(e){if(Ji(Th,this).call(this)==="none")return;this.stretchAllRatio=0,this.stretchAllColumnsWidth=[],this.needVerifyLastColumnWidth=!0,this.stretchLastWidth=0,zm(H0,this,e);let t=0;for(let r=0;r<Ji(Xf,this).call(this);r++){const s=this._getColumnWidth(r),o=Ji(Um,this).call(this,void 0,r);typeof o=="number"?e-=o:t+=s}const i=e-t;if(Ji(Th,this).call(this)==="all"&&i>0)this.stretchAllRatio=e/t,this.stretchAllColumnsWidth=[],this.needVerifyLastColumnWidth=!0;else if(Ji(Th,this).call(this)==="last"&&e!==1/0){const r=this._getColumnWidth(Ji(Xf,this).call(this)-1),s=i+r;this.stretchLastWidth=s>=0?s:r}}getStretchedColumnWidth(e,t){let i=null;return Ji(Th,this).call(this)==="all"&&this.stretchAllRatio!==0?i=this._getStretchedAllColumnWidth(e,t):Ji(Th,this).call(this)==="last"&&this.stretchLastWidth!==0&&(i=this._getStretchedLastColumnWidth(e)),i}_getStretchedAllColumnWidth(e,t){let i=0;if(!this.stretchAllColumnsWidth[e]){const r=Math.round(t*this.stretchAllRatio),s=Ji(Um,this).call(this,r,e);s===void 0?this.stretchAllColumnsWidth[e]=r:this.stretchAllColumnsWidth[e]=isNaN(s)?this._getColumnWidth(e):s}if(this.stretchAllColumnsWidth.length===Ji(Xf,this).call(this)&&this.needVerifyLastColumnWidth){this.needVerifyLastColumnWidth=!1;for(let r=0;r<this.stretchAllColumnsWidth.length;r++)i+=this.stretchAllColumnsWidth[r];i!==Ji(H0,this)&&(this.stretchAllColumnsWidth[this.stretchAllColumnsWidth.length-1]+=Ji(H0,this)-i)}return this.stretchAllColumnsWidth[e]}_getStretchedLastColumnWidth(e){return e===Ji(Xf,this).call(this)-1?this.stretchLastWidth:null}_getColumnWidth(e){let t=Ji($0,this).call(this,e);return isNaN(t)&&(t=aE),t}}function F0(n,e,t){return(e=LTe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function LTe(n){var e=NTe(n,"string");return typeof e=="symbol"?e:e+""}function NTe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class HTe{constructor(e,t){F0(this,"dataAccessObject",void 0),F0(this,"wtSettings",void 0),F0(this,"headerWidths",new Map),F0(this,"stretching",void 0),this.dataAccessObject=e,this.wtSettings=t,this.stretching=new DTe({totalColumns:()=>this.wtSettings.getSetting("totalColumns"),stretchMode:()=>this.wtSettings.getSetting("stretchH"),stretchingColumnWidthFn:(i,r)=>this.wtSettings.getSetting("onBeforeStretchingColumnWidth",i,r),columnWidthFn:i=>this.dataAccessObject.wtTable.getColumnWidth(i)})}getWidth(e){return this.wtSettings.getSetting("columnWidth",e)||this.wtSettings.getSetting("defaultColumnWidth")}getStretchedColumnWidth(e){let t=this.getWidth(e);const i=this.stretching.getStretchedColumnWidth(e,t);return i&&(t=i),t}getHeaderHeight(e){let t=this.wtSettings.getSetting("defaultRowHeight");const i=this.dataAccessObject.wtViewport.oversizedColumnHeaders[e];return i!==void 0&&(t=t?Math.max(t,i):i),t}getHeaderWidth(e){return this.headerWidths.get(this.dataAccessObject.wtTable.columnFilter.sourceToRendered(e))}refreshStretching(){const{wtTable:e,wtViewport:t,cloneSource:i}=this.dataAccessObject,r=i?i.wtTable.holder:e.holder,s=r.offsetHeight<r.scrollHeight?Pi():0;this.stretching.refreshStretching(t.getViewportWidth()-s)}calculateWidths(){const{wtSettings:e}=this;let t=e.getSetting("rowHeaderWidth");if(this.refreshStretching(),t=e.getSetting("onModifyRowHeaderWidth",t),t!=null){const i=e.getSetting("rowHeaders").length,r=e.getSetting("defaultColumnWidth");for(let s=0;s<i;s++){let o=Array.isArray(t)?t[s]:t;o=o??r,this.headerWidths.set(s,o)}}}}function P3(n,e,t){return(e=$Te(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function $Te(n){var e=FTe(n,"string");return typeof e=="symbol"?e:e+""}function FTe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class BTe{constructor(e,t){P3(this,"dataAccessObject",void 0),P3(this,"wtSettings",void 0),this.dataAccessObject=e,this.wtSettings=t}getHeight(e){let t=this.wtSettings.getSetting("rowHeight",e);const i=this.dataAccessObject.wtViewport.oversizedRows[e];return i!==void 0&&(t=t===void 0?i:Math.max(t,i)),t}getHeightByOverlayName(e,t){let i=this.wtSettings.getSetting("rowHeightByOverlayName",e,t);const r=this.dataAccessObject.wtViewport.oversizedRows[e];return r!==void 0&&(i=i===void 0?r:Math.max(i,r)),i}}function ma(n,e,t){return(e=VTe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function VTe(n){var e=WTe(n,"string");return typeof e=="symbol"?e:e+""}function WTe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}let sm=class{constructor(e,t,i,r,s){ma(this,"wtSettings",null),ma(this,"domBindings",void 0),ma(this,"TBODY",null),ma(this,"THEAD",null),ma(this,"COLGROUP",null),ma(this,"hasTableHeight",!0),ma(this,"hasTableWidth",!0),ma(this,"isTableVisible",!1),ma(this,"tableOffset",0),ma(this,"holderOffset",0),this.domBindings=i,this.isMaster=s==="master",this.name=s,this.dataAccessObject=e,this.facadeGetter=t,this.wtSettings=r,this.instance=this.dataAccessObject.wot,this.wot=this.dataAccessObject.wot,this.TABLE=i.rootTable,VD(this.TABLE),this.spreader=this.createSpreader(this.TABLE),this.hider=this.createHider(this.spreader),this.holder=this.createHolder(this.hider),this.wtRootElement=this.holder.parentNode,this.isMaster&&this.alignOverlaysWithTrimmingContainer(),this.fixTableDomTree(),this.rowFilter=null,this.columnFilter=null,this.correctHeaderWidth=!1;const o=this.wtSettings.getSettingPure("rowHeaderWidth");this.wtSettings.update("rowHeaderWidth",()=>this._modifyRowHeaderWidth(o)),this.rowUtils=new BTe(this.dataAccessObject,this.wtSettings),this.columnUtils=new HTe(this.dataAccessObject,this.wtSettings),this.tableRenderer=new PTe({TABLE:this.TABLE,THEAD:this.THEAD,COLGROUP:this.COLGROUP,TBODY:this.TBODY,rowUtils:this.rowUtils,columnUtils:this.columnUtils,cellRenderer:this.wtSettings.getSettingPure("cellRenderer")})}is(e){return this.name===e}fixTableDomTree(){const e=this.domBindings.rootDocument;this.TBODY=this.TABLE.querySelector("tbody"),this.TBODY||(this.TBODY=e.createElement("tbody"),this.TABLE.appendChild(this.TBODY)),this.THEAD=this.TABLE.querySelector("thead"),this.THEAD||(this.THEAD=e.createElement("thead"),this.TABLE.insertBefore(this.THEAD,this.TBODY)),this.COLGROUP=this.TABLE.querySelector("colgroup"),this.COLGROUP||(this.COLGROUP=e.createElement("colgroup"),this.TABLE.insertBefore(this.COLGROUP,this.THEAD))}createSpreader(e){const t=e.parentNode;let i;return(!t||t.nodeType!==Node.ELEMENT_NODE||!Ue(t,"wtHolder"))&&(i=this.domBindings.rootDocument.createElement("div"),i.className="wtSpreader",t&&t.insertBefore(i,e),i.appendChild(e)),i.style.position="relative",this.wtSettings.getSetting("ariaTags")&&ze(i,[qa()]),i}createHider(e){const t=e.parentNode;let i;return(!t||t.nodeType!==Node.ELEMENT_NODE||!Ue(t,"wtHolder"))&&(i=this.domBindings.rootDocument.createElement("div"),i.className="wtHider",t&&t.insertBefore(i,e),i.appendChild(e)),this.wtSettings.getSetting("ariaTags")&&ze(i,[qa()]),i}createHolder(e){const t=e.parentNode;let i;return(!t||t.nodeType!==Node.ELEMENT_NODE||!Ue(t,"wtHolder"))&&(i=this.domBindings.rootDocument.createElement("div"),i.style.position="relative",i.className="wtHolder",t&&t.insertBefore(i,e),this.isMaster&&(i.parentNode.className+="ht_master handsontable",i.parentNode.setAttribute("dir",this.wtSettings.getSettingPure("rtlMode")?"rtl":"ltr"),this.wtSettings.getSetting("ariaTags")&&ze(i.parentNode,[qa()])),i.appendChild(e)),this.wtSettings.getSetting("ariaTags")&&ze(i,[qa()]),i}draw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const{wtSettings:t}=this,{wtOverlays:i,wtViewport:r}=this.dataAccessObject,s=t.getSetting("totalRows"),o=t.getSetting("totalColumns"),a=t.getSetting("rowHeaders"),l=a.length,c=t.getSetting("columnHeaders"),u=c.length;let h=e;if(this.isMaster&&(i.beforeDraw(),this.holderOffset=xi(this.holder),h=r.createCalculators(h),l&&!t.getSetting("fixedColumnsStart"))){const f=i.inlineStartOverlay.getScrollPosition(),g=this.correctHeaderWidth;this.correctHeaderWidth=f!==0,g!==this.correctHeaderWidth&&(h=!1)}if(h)this.isMaster&&i.refresh(!0);else{this.isMaster?this.tableOffset=xi(this.TABLE):this.tableOffset=this.dataAccessObject.parentTableOffset;const f=s>0?this.getFirstRenderedRow():0,g=o>0?this.getFirstRenderedColumn():0;this.rowFilter=new eTe(f,s,u),this.columnFilter=new Zxe(g,o,l);let p=!0;if(this.isMaster){this.alignOverlaysWithTrimmingContainer();const m={};this.wtSettings.getSetting("beforeDraw",!0,m),p=m.skipRender!==!0}if(p){this.tableRenderer.setHeaderContentRenderers(a,c),(this.is(Ua)||this.is($u))&&this.tableRenderer.setHeaderContentRenderers(a,[]),this.resetOversizedRows(),this.tableRenderer.setActiveOverlayName(this.name).setViewportSize(this.getRenderedRowsCount(),this.getRenderedColumnsCount()).setFilters(this.rowFilter,this.columnFilter).render();let m;if(this.isMaster&&(m=this.dataAccessObject.workspaceWidth,r.containerWidth=null,this.markOversizedColumnHeaders()),this.adjustColumnHeaderHeights(),(this.isMaster||this.is(Ua))&&this.markOversizedRows(),this.isMaster){this.wtSettings.getSetting("externalRowCalculator")||r.createVisibleCalculators(),i.refresh(!1),i.applyToDOM();const v=gn(this.hider),y=gn(this.TABLE);v!==0&&y!==v&&(this.columnUtils.calculateWidths(),this.tableRenderer.renderer.colGroup.render()),m!==r.getWorkspaceWidth()&&(r.containerWidth=null,this.columnUtils.calculateWidths(),this.tableRenderer.renderer.colGroup.render()),this.wtSettings.getSetting("onDraw",!0)}else this.is(Ua)&&this.dataAccessObject.cloneSource.wtOverlays.adjustElementsSize()}}let d=!1;return this.isMaster&&(d=i.topOverlay.resetFixedPosition(),i.bottomOverlay.clone&&(d=i.bottomOverlay.resetFixedPosition()||d),d=i.inlineStartOverlay.resetFixedPosition()||d,i.topInlineStartCornerOverlay&&i.topInlineStartCornerOverlay.resetFixedPosition(),i.bottomInlineStartCornerOverlay&&i.bottomInlineStartCornerOverlay.clone&&i.bottomInlineStartCornerOverlay.resetFixedPosition()),d?(i.refreshAll(),i.adjustElementsSize()):this.dataAccessObject.selectionManager.setActiveOverlay(this.facadeGetter()).render(h),this.isMaster&&i.afterDraw(),this.dataAccessObject.drawn=!0,this}markIfOversizedColumnHeader(e){const t=this.columnFilter.renderedToSource(e);let i=this.wtSettings.getSetting("columnHeaders").length;const r=this.wtSettings.getSetting("defaultRowHeight");let s,o,a;const l=this.wtSettings.getSetting("columnHeaderHeight")||[];for(;i;)i-=1,s=this.getColumnHeaderHeight(i),o=this.getColumnHeader(t,i),o&&(a=xd(o),(!s&&r<a||s<a)&&(this.dataAccessObject.wtViewport.oversizedColumnHeaders[i]=a),Array.isArray(l)?l[i]!==null&&l[i]!==void 0&&(this.dataAccessObject.wtViewport.oversizedColumnHeaders[i]=l[i]):isNaN(l)||(this.dataAccessObject.wtViewport.oversizedColumnHeaders[i]=l),this.dataAccessObject.wtViewport.oversizedColumnHeaders[i]<(l[i]||l)&&(this.dataAccessObject.wtViewport.oversizedColumnHeaders[i]=l[i]||l))}adjustColumnHeaderHeights(){const{wtSettings:e}=this,t=this.THEAD.childNodes,i=this.dataAccessObject.wtViewport.oversizedColumnHeaders,r=e.getSetting("columnHeaders");for(let s=0,o=r.length;s<o;s++)if(i[s]){if(!t[s]||t[s].childNodes.length===0)return;t[s].childNodes[0].style.height=`${i[s]}px`}}resetOversizedRows(){const{wtSettings:e}=this,{wtViewport:t}=this.dataAccessObject;if(!(!this.isMaster&&!this.is(Ua))&&!e.getSetting("externalRowCalculator")){const i=this.getRenderedRowsCount();for(let r=0;r<i;r++){const s=this.rowFilter.renderedToSource(r);t.oversizedRows&&t.oversizedRows[s]&&(t.oversizedRows[s]=void 0)}}}getCell(e){let t=e.row,i=e.col;const r=this.wtSettings.getSetting("onModifyGetCellCoords",t,i);if(r&&Array.isArray(r)&&([t,i]=r),this.isRowBeforeRenderedRows(t))return-1;if(this.isRowAfterRenderedRows(t))return-2;if(this.isColumnBeforeRenderedColumns(i))return-3;if(this.isColumnAfterRenderedColumns(i))return-4;const s=this.getRow(t);if(!s&&t>=0)throw new Error("TR was expected to be rendered but is not");const o=s.childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(i)];if(!o&&i>=0)throw new Error("TD or TH was expected to be rendered but is not");return o}getRow(e){let t=null,i=null;if(e<0){var r;t=(r=this.rowFilter)===null||r===void 0?void 0:r.sourceRowToVisibleColHeadedRow(e),i=this.THEAD}else{var s;t=(s=this.rowFilter)===null||s===void 0?void 0:s.sourceToRendered(e),i=this.TBODY}return t!==void 0&&i!==void 0?i.childNodes.length<t+1?!1:i.childNodes[t]:!1}getColumnHeader(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const i=this.THEAD.childNodes[t];return i==null?void 0:i.childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(e)]}getColumnHeaders(e){const t=[],i=this.columnFilter.sourceColumnToVisibleRowHeadedColumn(e);return this.THEAD.childNodes.forEach(r=>{const s=r.childNodes[i];s&&t.push(s)}),t}getRowHeader(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const i=this.wtSettings.getSetting("rowHeaders").length;if(t>=i)return;const r=this.rowFilter.sourceToRendered(e),s=r<0?this.rowFilter.sourceRowToVisibleColHeadedRow(e):r,a=(r<0?this.THEAD:this.TBODY).childNodes[s];return a==null?void 0:a.childNodes[t]}getRowHeaders(e){const t=[],i=this.wtSettings.getSetting("rowHeaders").length;for(let r=0;r<i;r++){const s=this.TBODY.childNodes[this.rowFilter.sourceToRendered(e)],o=s==null?void 0:s.childNodes[r];o&&t.push(o)}return t}getCoords(e){let t=e;if(t.nodeName!=="TD"&&t.nodeName!=="TH"&&(t=Yu(t,["TD","TH"])),t===null)return null;const i=t.parentNode,r=i.parentNode;let s=M9(i),o=t.cellIndex;return au(ff,t,this.wtRootElement)||au(hf,t,this.wtRootElement)?r.nodeName==="THEAD"&&(s-=r.childNodes.length):au($u,t,this.wtRootElement)||au(Ua,t,this.wtRootElement)?s=this.wtSettings.getSetting("totalRows")-r.childNodes.length+s:r===this.THEAD?s=this.rowFilter.visibleColHeadedRowToSourceRow(s):s=this.rowFilter.renderedToSource(s),au(ff,t,this.wtRootElement)||au(df,t,this.wtRootElement)||au($u,t,this.wtRootElement)?o=this.columnFilter.offsettedTH(o):o=this.columnFilter.visibleRowHeadedColumnToSourceColumn(o),this.wot.createCellCoords(s,o)}markOversizedRows(){if(this.wtSettings.getSetting("externalRowCalculator"))return;let e=this.TBODY.childNodes.length;const t=e*this.wtSettings.getSetting("defaultRowHeight"),i=xd(this.TBODY)-1;let r,s,o,a,l;if(!(t===i&&!this.wtSettings.getSetting("fixedRowsBottom")))for(;e;)e-=1,o=this.rowFilter.renderedToSource(e),r=this.getRowHeight(o),a=this.getTrForRow(o),l=a.querySelector("th"),l?s=xd(l):s=xd(a)-1,(!r&&this.wtSettings.getSetting("defaultRowHeight")<s||r<s)&&(s+=1,this.dataAccessObject.wtViewport.oversizedRows[o]=s)}getTrForRow(e){return this.TBODY.childNodes[this.rowFilter.sourceToRendered(e)]}isColumnHeaderRendered(e){if(e>=0)return!1;const i=this.wtSettings.getSetting("rowHeaders").length;return Math.abs(e)<=i}isRowHeaderRendered(e){if(e>=0)return!1;const i=this.wtSettings.getSetting("columnHeaders").length;return Math.abs(e)<=i}isRowBeforeRenderedRows(e){const t=this.getFirstRenderedRow();return e<0&&t<=0?!this.isRowHeaderRendered(e):e<t}isRowAfterRenderedRows(e){return e>this.getLastRenderedRow()}isColumnBeforeRenderedColumns(e){const t=this.getFirstRenderedColumn();return e<0&&t<=0?!this.isColumnHeaderRendered(e):e<t}isColumnAfterRenderedColumns(e){return this.columnFilter&&e>this.getLastRenderedColumn()}isColumnAfterViewport(e){return this.columnFilter&&e>this.getLastVisibleColumn()}isRowAfterViewport(e){return this.rowFilter&&e>this.getLastVisibleRow()}isColumnBeforeViewport(e){return this.columnFilter&&this.columnFilter.sourceToRendered(e)<0&&e>=0}isLastRowFullyVisible(){return this.getLastVisibleRow()===this.getLastRenderedRow()}isLastColumnFullyVisible(){return this.getLastVisibleColumn()===this.getLastRenderedColumn()}allRowsInViewport(){return this.wtSettings.getSetting("totalRows")===this.getVisibleRowsCount()}allColumnsInViewport(){return this.wtSettings.getSetting("totalColumns")===this.getVisibleColumnsCount()}getRowHeight(e){return this.rowUtils.getHeight(e)}getColumnHeaderHeight(e){return this.columnUtils.getHeaderHeight(e)}getColumnWidth(e){return this.columnUtils.getWidth(e)}getStretchedColumnWidth(e){return this.columnUtils.getStretchedColumnWidth(e)}hasDefinedSize(){return this.hasTableHeight&&this.hasTableWidth}getWidth(){return gn(this.TABLE)}getHeight(){return ni(this.TABLE)}getTotalWidth(){const e=gn(this.hider);return e!==0?e:this.getWidth()}getTotalHeight(){const e=ni(this.hider);return e!==0?e:this.getHeight()}isVisible(){return lf(this.TABLE)}_modifyRowHeaderWidth(e){let t=un(e)?e():null;return Array.isArray(t)?(t=[...t],t[t.length-1]=this._correctRowHeaderWidth(t[t.length-1])):t=this._correctRowHeaderWidth(t),t}_correctRowHeaderWidth(e){let t=e;return typeof e!="number"&&(t=this.wtSettings.getSetting("defaultColumnWidth")),this.correctHeaderWidth&&(t+=1),t}};const jTe="stickyRowsBottom",hL={getFirstRenderedRow(){const n=this.wtSettings.getSetting("totalRows"),e=this.wtSettings.getSetting("fixedRowsBottom"),t=n-e;return n===0||e===0?-1:t<0?0:t},getFirstVisibleRow(){return this.getFirstRenderedRow()},getFirstPartiallyVisibleRow(){return this.getFirstRenderedRow()},getLastRenderedRow(){return this.wtSettings.getSetting("totalRows")-1},getLastVisibleRow(){return this.getLastRenderedRow()},getLastPartiallyVisibleRow(){return this.getLastRenderedRow()},getRenderedRowsCount(){const n=this.wtSettings.getSetting("totalRows");return Math.min(this.wtSettings.getSetting("fixedRowsBottom"),n)},getVisibleRowsCount(){return this.getRenderedRowsCount()},getColumnHeadersCount(){return 0}};Rl(hL,"MIXIN_NAME",jTe,{writable:!1,enumerable:!1});const zTe="stickyColumnsStart",lE={getFirstRenderedColumn(){return this.wtSettings.getSetting("totalColumns")===0?-1:0},getFirstVisibleColumn(){return this.getFirstRenderedColumn()},getFirstPartiallyVisibleColumn(){return this.getFirstRenderedColumn()},getLastRenderedColumn(){return this.getRenderedColumnsCount()-1},getLastVisibleColumn(){return this.getLastRenderedColumn()},getLastPartiallyVisibleColumn(){return this.getLastRenderedColumn()},getRenderedColumnsCount(){const n=this.wtSettings.getSetting("totalColumns");return Math.min(this.wtSettings.getSetting("fixedColumnsStart"),n)},getVisibleColumnsCount(){return this.getRenderedColumnsCount()},getRowHeadersCount(){return this.dataAccessObject.rowHeaders.length}};Rl(lE,"MIXIN_NAME",zTe,{writable:!1,enumerable:!1});class dL extends sm{constructor(e,t,i,r){super(e,t,i,r,$u)}}qt(dL,hL);qt(dL,lE);const hf="top",Ua="bottom",df="inline_start",ff="top_inline_start_corner",$u="bottom_inline_start_corner",MY=[hf,Ua,df,ff,$u],UTe=new Map([[hf,`ht_clone_${hf}`],[Ua,`ht_clone_${Ua}`],[df,`ht_clone_${df} ht_clone_left`],[ff,`ht_clone_${ff} ht_clone_top_left_corner`],[$u,`ht_clone_${$u} ht_clone_bottom_left_corner`]]);function GTe(n,e){YTe(n,e),e.add(n)}function YTe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function KTe(n,e,t){return(e=qTe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function qTe(n){var e=XTe(n,"string");return typeof e=="symbol"?e:e+""}function XTe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function B0(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var Gm=new WeakSet;class ZTe{constructor(e){GTe(this,Gm),KTe(this,"dataAccessObject",void 0),this.dataAccessObject=e}scrollViewport(e,t,i,r,s){const o=this.scrollViewportHorizontally(e.col,i,s),a=this.scrollViewportVertically(e.row,t,r);return o||a}scrollViewportHorizontally(e,t,i){const{drawn:r,totalColumns:s}=this.dataAccessObject;if(!r||!Number.isInteger(e)||e<0||e>s)return!1;const o=t===void 0&&i===void 0,{fixedColumnsStart:a,inlineStartOverlay:l}=this.dataAccessObject;if(o&&e<a||(e=this.dataAccessObject.wtSettings.getSetting("onBeforeViewportScrollHorizontally",e),!Number.isInteger(e)||e<0||e>s))return!1;const c=this.getFirstVisibleColumn(),u=this.getLastVisibleColumn();let h=!1;return(o&&(e<c||e>u)||!o)&&(h=l.scrollTo(e,o?e>=this.getLastPartiallyVisibleColumn():t)),h}scrollViewportVertically(e,t,i){const{drawn:r,totalRows:s}=this.dataAccessObject;if(!r||!Number.isInteger(e)||e<0||e>s)return!1;const o=t===void 0&&i===void 0,{fixedRowsBottom:a,fixedRowsTop:l,topOverlay:c}=this.dataAccessObject;if(o&&(e<l||e>s-a-1)||(e=this.dataAccessObject.wtSettings.getSetting("onBeforeViewportScrollVertically",e),!Number.isInteger(e)||e<0||e>s))return!1;const u=this.getFirstVisibleRow(),h=this.getLastVisibleRow();let d=!1;return(o&&(e<u||e>h)||!o)&&(d=c.scrollTo(e,o?e>=this.getLastPartiallyVisibleRow():i)),d}getFirstVisibleRow(){return this.dataAccessObject.wtTable.getFirstVisibleRow()}getLastVisibleRow(){return B0(Gm,this,O3).call(this,this.dataAccessObject.wtTable.getLastVisibleRow())}getFirstPartiallyVisibleRow(){return this.dataAccessObject.wtTable.getFirstPartiallyVisibleRow()}getLastPartiallyVisibleRow(){return B0(Gm,this,O3).call(this,this.dataAccessObject.wtTable.getLastPartiallyVisibleRow())}getFirstVisibleColumn(){return this.dataAccessObject.wtTable.getFirstVisibleColumn()}getLastVisibleColumn(){return B0(Gm,this,I3).call(this,this.dataAccessObject.wtTable.getLastVisibleColumn())}getFirstPartiallyVisibleColumn(){return this.dataAccessObject.wtTable.getFirstPartiallyVisibleColumn()}getLastPartiallyVisibleColumn(){return B0(Gm,this,I3).call(this,this.dataAccessObject.wtTable.getLastPartiallyVisibleColumn())}}function I3(n){const{wtSettings:e,inlineStartOverlay:t,wtTable:i,wtViewport:r,totalColumns:s,rootWindow:o}=this.dataAccessObject;if(t.mainTableScrollableElement===o){const a=e.getSetting("rtlMode");let l=null;if(a){const u=i.TABLE.getBoundingClientRect(),d=this.dataAccessObject.rootWindow.document.documentElement.offsetWidth;l=Math.abs(u.right-d)}else l=xi(i.wtRootElement).left;const c=Math.abs(jD(o,o));if(l>c){const u=zD(o);let h=r.getRowHeaderWidth();for(let d=1;d<=s;d++)if(h+=t.sumCellSizes(d-1,d),l+h-c>=u){n=d-2;break}}}return n}function O3(n){const{topOverlay:e,wtTable:t,wtViewport:i,totalRows:r,rootWindow:s}=this.dataAccessObject;if(e.mainTableScrollableElement===s){const o=xi(t.wtRootElement),a=Q1(s,s);if(o.top>a){const l=xd(s);let c=i.getColumnHeaderHeight();for(let u=1;u<=r;u++)if(c+=e.sumCellSizes(u-1,u),o.top+c-a>=l){n=u-2;break}}}return n}function To(n,e,t){return(e=QTe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function QTe(n){var e=JTe(n,"string");return typeof e=="symbol"?e:e+""}function JTe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class fL{get eventManager(){return new uo(this)}constructor(e,t){To(this,"wtTable",void 0),To(this,"wtScroll",void 0),To(this,"wtViewport",void 0),To(this,"wtOverlays",void 0),To(this,"selectionManager",void 0),To(this,"wtEvent",void 0),To(this,"guid",`wt_${ND()}`),To(this,"drawInterrupted",!1),To(this,"drawn",!1),To(this,"domBindings",void 0),To(this,"wtSettings",void 0),this.domBindings={rootTable:e,rootDocument:e.ownerDocument,rootWindow:e.ownerDocument.defaultView},this.wtSettings=t,this.wtScroll=new ZTe(this.createScrollDao())}findOriginalHeaders(){const e=[];if(this.wtTable.THEAD.childNodes.length&&this.wtTable.THEAD.childNodes[0].childNodes.length){for(let t=0,i=this.wtTable.THEAD.childNodes[0].childNodes.length;t<i;t++)e.push(this.wtTable.THEAD.childNodes[0].childNodes[t].innerHTML);this.wtSettings.getSetting("columnHeaders").length||this.wtSettings.update("columnHeaders",[function(t,i){Ku(i,e[t])}])}}createCellCoords(e,t){return new uf(e,t,this.wtSettings.getSetting("rtlMode"))}createCellRange(e,t,i){return new yy(e,t,i,this.wtSettings.getSetting("rtlMode"))}draw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return this.drawInterrupted=!1,this.wtTable.isVisible()?this.wtTable.draw(e):this.drawInterrupted=!0,this}getCell(e){if(!(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1))return this.wtTable.getCell(e);const i=this.wtSettings.getSetting("totalRows"),r=this.wtSettings.getSetting("fixedRowsTop"),s=this.wtSettings.getSetting("fixedRowsBottom"),o=this.wtSettings.getSetting("fixedColumnsStart");if(e.row<r&&e.col<o)return this.wtOverlays.topInlineStartCornerOverlay.clone.wtTable.getCell(e);if(e.row<r)return this.wtOverlays.topOverlay.clone.wtTable.getCell(e);if(e.col<o&&e.row>=i-s){if(this.wtOverlays.bottomInlineStartCornerOverlay&&this.wtOverlays.bottomInlineStartCornerOverlay.clone)return this.wtOverlays.bottomInlineStartCornerOverlay.clone.wtTable.getCell(e)}else{if(e.col<o)return this.wtOverlays.inlineStartOverlay.clone.wtTable.getCell(e);if(e.row<i&&e.row>=i-s&&this.wtOverlays.bottomOverlay&&this.wtOverlays.bottomOverlay.clone)return this.wtOverlays.bottomOverlay.clone.wtTable.getCell(e)}return this.wtTable.getCell(e)}scrollViewport(e,t,i,r,s){return e.col<0||e.row<0?!1:this.wtScroll.scrollViewport(e,t,i,r,s)}scrollViewportHorizontally(e,t,i){return e<0?!1:this.wtScroll.scrollViewportHorizontally(e,t,i)}scrollViewportVertically(e,t,i){return e<0?!1:this.wtScroll.scrollViewportVertically(e,t,i)}getViewport(){return[this.wtTable.getFirstVisibleRow(),this.wtTable.getFirstVisibleColumn(),this.wtTable.getLastVisibleRow(),this.wtTable.getLastVisibleColumn()]}destroy(){this.wtOverlays.destroy(),this.wtEvent.destroy()}createScrollDao(){const e=this;return{get drawn(){return e.drawn},get topOverlay(){return e.wtOverlays.topOverlay},get inlineStartOverlay(){return e.wtOverlays.inlineStartOverlay},get wtTable(){return e.wtTable},get wtViewport(){return e.wtViewport},get wtSettings(){return e.wtSettings},get rootWindow(){return e.domBindings.rootWindow},get totalRows(){return e.wtSettings.getSetting("totalRows")},get totalColumns(){return e.wtSettings.getSetting("totalColumns")},get fixedRowsTop(){return e.wtSettings.getSetting("fixedRowsTop")},get fixedRowsBottom(){return e.wtSettings.getSetting("fixedRowsBottom")},get fixedColumnsStart(){return e.wtSettings.getSetting("fixedColumnsStart")}}}getTableDao(){const e=this;return{get wot(){return e},get parentTableOffset(){return e.cloneSource.wtTable.tableOffset},get cloneSource(){return e.cloneSource},get workspaceWidth(){return e.wtViewport.getWorkspaceWidth()},get wtViewport(){return e.wtViewport},get wtOverlays(){return e.wtOverlays},get selectionManager(){return e.selectionManager},get drawn(){return e.drawn},set drawn(t){e.drawn=t},get wtTable(){return e.wtTable},get startColumnRendered(){return e.wtViewport.columnsRenderCalculator.startColumn},get startColumnVisible(){return e.wtViewport.columnsVisibleCalculator.startColumn},get startColumnPartiallyVisible(){return e.wtViewport.columnsPartiallyVisibleCalculator.startColumn},get endColumnRendered(){return e.wtViewport.columnsRenderCalculator.endColumn},get endColumnVisible(){return e.wtViewport.columnsVisibleCalculator.endColumn},get endColumnPartiallyVisible(){return e.wtViewport.columnsPartiallyVisibleCalculator.endColumn},get countColumnsRendered(){return e.wtViewport.columnsRenderCalculator.count},get countColumnsVisible(){return e.wtViewport.columnsVisibleCalculator.count},get startRowRendered(){return e.wtViewport.rowsRenderCalculator.startRow},get startRowVisible(){return e.wtViewport.rowsVisibleCalculator.startRow},get startRowPartiallyVisible(){return e.wtViewport.rowsPartiallyVisibleCalculator.startRow},get endRowRendered(){return e.wtViewport.rowsRenderCalculator.endRow},get endRowVisible(){return e.wtViewport.rowsVisibleCalculator.endRow},get endRowPartiallyVisible(){return e.wtViewport.rowsPartiallyVisibleCalculator.endRow},get countRowsRendered(){return e.wtViewport.rowsRenderCalculator.count},get countRowsVisible(){return e.wtViewport.rowsVisibleCalculator.count},get columnHeaders(){return e.wtSettings.getSetting("columnHeaders")},get rowHeaders(){return e.wtSettings.getSetting("rowHeaders")}}}}function k3(n,e,t){return(e=eMe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function eMe(n){var e=tMe(n,"string");return typeof e=="symbol"?e:e+""}function tMe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class nMe extends fL{constructor(e,t,i){super(e,t),k3(this,"cloneSource",void 0),k3(this,"cloneOverlay",void 0);const r=this.wtSettings.getSetting("facade",this);this.cloneSource=i.source,this.cloneOverlay=i.overlay,this.wtTable=this.cloneOverlay.createTable(this.getTableDao(),r,this.domBindings,this.wtSettings),this.wtViewport=i.viewport,this.selectionManager=i.selectionManager,this.wtEvent=new RY(r,this.domBindings,this.wtSettings,this.eventManager,this.wtTable,this.selectionManager,i.event),this.findOriginalHeaders()}}function iMe(n,e,t){return(e=rMe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function rMe(n){var e=sMe(n,"string");return typeof e=="symbol"?e:e+""}function sMe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class Sy{constructor(e,t,i,r,s){iMe(this,"wtSettings",null),Rl(this,"wot",e,{writable:!1}),this.domBindings=s,this.facadeGetter=t,this.wtSettings=r;const{TABLE:o,hider:a,spreader:l,holder:c,wtRootElement:u}=this.wot.wtTable;this.instance=this.wot,this.type=i,this.mainTableScrollableElement=null,this.TABLE=o,this.hider=a,this.spreader=l,this.holder=c,this.wtRootElement=u,this.trimmingContainer=cf(this.hider.parentNode.parentNode),this.needFullRender=this.shouldBeRendered(),this.clone=this.makeClone()}hasRenderingStateChanged(){return this.needFullRender!==this.shouldBeRendered()}updateStateOfRendering(e){e==="before"&&this.shouldBeRendered()?this.needFullRender=!0:e==="after"&&!this.shouldBeRendered()&&(this.needFullRender=!1)}shouldBeRendered(){return!0}updateTrimmingContainer(){this.trimmingContainer=cf(this.hider.parentNode.parentNode)}updateMainScrollableElement(){const{wtTable:e}=this.wot,{rootWindow:t}=this.domBindings;t.getComputedStyle(e.wtRootElement.parentNode).getPropertyValue("overflow")==="hidden"?this.mainTableScrollableElement=this.wot.wtTable.holder:this.mainTableScrollableElement=Sw(e.TABLE)}getRelativeCellPosition(e,t,i){if(this.clone.wtTable.holder.contains(e)===!1){Yt(`The provided element is not a child of the ${this.type} overlay`);return}const r=this.mainTableScrollableElement===this.domBindings.rootWindow,s=i<this.wtSettings.getSetting("fixedColumnsStart"),o=t<this.wtSettings.getSetting("fixedRowsTop"),a=t>=this.wtSettings.getSetting("totalRows")-this.wtSettings.getSetting("fixedRowsBottom"),l=this.clone.wtTable.spreader,c={start:this.getRelativeStartPosition(l),top:l.offsetTop},u={start:this.getRelativeStartPosition(e),top:e.offsetTop};let h=null;return r?h=this.getRelativeCellPositionWithinWindow(o,s,u,c):h=this.getRelativeCellPositionWithinHolder(o,a,s,u,c),h}getRelativeStartPosition(e){return this.isRtl()?e.offsetParent.offsetWidth-e.offsetLeft-e.offsetWidth:e.offsetLeft}getRelativeCellPositionWithinWindow(e,t,i,r){const s=this.wot.wtTable.wtRootElement.getBoundingClientRect();let o=0,a=0;if(!t)o=r.start;else{let l=s.left;this.isRtl()&&(l=this.domBindings.rootWindow.innerWidth-(s.left+s.width+Pi())),o=l<=0?-1*l:0}return e?a=this.clone.wtTable.TABLE.getBoundingClientRect().top-s.top:a=r.top,{start:i.start+o,top:i.top+a}}getRelativeCellPositionWithinHolder(e,t,i,r,s){const o={horizontal:this.wot.wtOverlays.inlineStartOverlay.getScrollPosition(),vertical:this.wot.wtOverlays.topOverlay.getScrollPosition()};let a=0,l=0;if(i||(a=o.horizontal-s.start),t){const c=this.wot.wtTable.wtRootElement.getBoundingClientRect();l=this.clone.wtTable.TABLE.getBoundingClientRect().top*-1+c.top}else e||(l=o.vertical-s.top);return{start:r.start-a,top:r.top-l}}makeClone(){if(MY.indexOf(this.type)===-1)throw new Error(`Clone type "${this.type}" is not supported.`);const{wtTable:e,wtSettings:t}=this.wot,{rootDocument:i,rootWindow:r}=this.domBindings,s=i.createElement("div"),o=i.createElement("table"),a=e.wtRootElement.parentNode;s.className=`${UTe.get(this.type)} handsontable`,s.setAttribute("dir",this.isRtl()?"rtl":"ltr"),s.style.position="absolute",s.style.top=0,s.style.overflow="visible",this.isRtl()?s.style.right=0:s.style.left=0,t.getSetting("ariaTags")&&ze(s,[qa()]),o.className=e.TABLE.className,e.TABLE.getAttribute("role")&&o.setAttribute("role",e.TABLE.getAttribute("role")),s.appendChild(o),a.appendChild(s);const c=this.wtSettings.getSetting("preventOverflow");return c===!0||c==="horizontal"&&this.type===hf||c==="vertical"&&this.type===df?this.mainTableScrollableElement=r:r.getComputedStyle(a).getPropertyValue("overflow")==="hidden"?this.mainTableScrollableElement=e.holder:this.mainTableScrollableElement=Sw(e.TABLE),new nMe(o,this.wtSettings,{source:this.wot,overlay:this,viewport:this.wot.wtViewport,event:this.wot.wtEvent,selectionManager:this.wot.selectionManager})}refresh(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.needFullRender&&this.clone.draw(e)}reset(){const e=this.clone.wtTable.holder,t=this.clone.wtTable.hider,i=e.style,r=t.style,s=e.parentNode.style;[i,r,s].forEach(o=>{o.width="",o.height=""})}isRtl(){return this.wtSettings.getSetting("rtlMode")}destroy(){this.clone.eventManager.destroy()}}class oMe extends Sy{constructor(e,t,i,r,s,o){super(e,t,$u,i,r),this.bottomOverlay=s,this.inlineStartOverlay=o}createTable(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return new dL(...t)}shouldBeRendered(){return this.wtSettings.getSetting("shouldRenderBottomOverlay")&&this.wtSettings.getSetting("shouldRenderInlineStartOverlay")}resetFixedPosition(){const{wot:e}=this;if(this.updateTrimmingContainer(),!e.wtTable.holder.parentNode)return!1;const t=this.clone.wtTable.holder.parentNode;if(t.style.top="",this.trimmingContainer===this.domBindings.rootWindow){const s=this.inlineStartOverlay.getOverlayOffset(),o=this.bottomOverlay.getOverlayOffset();t.style[this.isRtl()?"right":"left"]=`${s}px`,t.style.bottom=`${o}px`}else my(t),this.repositionOverlay();let i=ni(this.clone.wtTable.TABLE);const r=gn(this.clone.wtTable.TABLE);return this.wot.wtTable.hasDefinedSize()||(i=0),t.style.height=`${i}px`,t.style.width=`${r}px`,!1}repositionOverlay(){const{wtTable:e,wtViewport:t}=this.wot,{rootDocument:i}=this.domBindings,r=this.clone.wtTable.holder.parentNode;let s=0;t.hasVerticalScroll()||(s+=t.getWorkspaceHeight()-e.getTotalHeight()),t.hasVerticalScroll()&&t.hasHorizontalScroll()&&(s+=Pi(i)),r.style.bottom=`${s}px`}}const aMe="calculatedColumns",cE={getFirstRenderedColumn(){const n=this.dataAccessObject.startColumnRendered;return n===null?-1:n},getFirstVisibleColumn(){const n=this.dataAccessObject.startColumnVisible;return n===null?-1:n},getFirstPartiallyVisibleColumn(){const n=this.dataAccessObject.startColumnPartiallyVisible;return n===null?-1:n},getLastRenderedColumn(){const n=this.dataAccessObject.endColumnRendered;return n===null?-1:n},getLastVisibleColumn(){const n=this.dataAccessObject.endColumnVisible;return n===null?-1:n},getLastPartiallyVisibleColumn(){const n=this.dataAccessObject.endColumnPartiallyVisible;return n===null?-1:n},getRenderedColumnsCount(){return this.dataAccessObject.countColumnsRendered},getVisibleColumnsCount(){return this.dataAccessObject.countColumnsVisible},getRowHeadersCount(){return this.dataAccessObject.rowHeaders.length}};Rl(cE,"MIXIN_NAME",aMe,{writable:!1,enumerable:!1});class gL extends sm{constructor(e,t,i,r){super(e,t,i,r,Ua)}}qt(gL,hL);qt(gL,cE);function lMe(n,e,t){return(e=cMe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function cMe(n){var e=uMe(n,"string");return typeof e=="symbol"?e:e+""}function uMe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class hMe extends Sy{constructor(e,t,i,r){super(e,t,Ua,i,r),lMe(this,"cachedFixedRowsBottom",-1),this.cachedFixedRowsBottom=this.wtSettings.getSetting("fixedRowsBottom")}createTable(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return new gL(...t)}shouldBeRendered(){return this.wtSettings.getSetting("shouldRenderBottomOverlay")}resetFixedPosition(){if(!this.needFullRender||!this.shouldBeRendered()||!this.wot.wtTable.holder.parentNode)return!1;const{rootWindow:e}=this.domBindings,t=this.clone.wtTable.holder.parentNode;t.style.top="";let i=0;const r=this.wtSettings.getSetting("preventOverflow");this.trimmingContainer===e&&(!r||r!=="vertical")?(i=this.getOverlayOffset(),t.style.bottom=`${i}px`):(i=this.getScrollPosition(),this.repositionOverlay());const s=this.adjustHeaderBordersPosition(i);return this.adjustElementsSize(),s}repositionOverlay(){const{wtTable:e,wtViewport:t}=this.wot,{rootDocument:i}=this.domBindings,r=this.clone.wtTable.holder.parentNode;let s=0;t.hasVerticalScroll()||(s+=t.getWorkspaceHeight()-e.getTotalHeight()),t.hasVerticalScroll()&&t.hasHorizontalScroll()&&(s+=Pi(i)),r.style.bottom=`${s}px`}setScrollPosition(e){const{rootWindow:t}=this.domBindings;let i=!1;return this.mainTableScrollableElement===t?(t.scrollTo(Z1(t),e),i=!0):this.mainTableScrollableElement.scrollTop!==e&&(this.mainTableScrollableElement.scrollTop=e,i=!0),i}onScroll(){this.wtSettings.getSetting("onScrollHorizontally")}sumCellSizes(e,t){const{wtTable:i,wtSettings:r}=this.wot,s=r.getSetting("defaultRowHeight");let o=e,a=0;for(;o<t;){const l=i.getRowHeight(o);a+=l===void 0?s:l,o+=1}return a}adjustElementsSize(){this.updateTrimmingContainer(),this.needFullRender&&(this.adjustRootElementSize(),this.adjustRootChildrenSize())}adjustRootElementSize(){const{wtTable:e,wtViewport:t}=this.wot,{rootDocument:i,rootWindow:r}=this.domBindings,s=Pi(i),a=this.clone.wtTable.holder.parentNode.style,l=this.wtSettings.getSetting("preventOverflow");if(this.trimmingContainer!==r||l==="horizontal"){let u=t.getWorkspaceWidth();this.wot.wtOverlays.hasScrollbarRight&&(u-=s),u=Math.min(u,e.wtRootElement.scrollWidth),a.width=`${u}px`}else a.width="";this.clone.wtTable.holder.style.width=a.width;let c=ni(this.clone.wtTable.TABLE);this.wot.wtTable.hasDefinedSize()||(c=0),a.height=`${c}px`}adjustRootChildrenSize(){const{holder:e}=this.clone.wtTable;this.clone.wtTable.hider.style.width=this.hider.style.width,e.style.width=e.parentNode.style.width,e.style.height=e.parentNode.style.height}applyToDOM(){const e=this.wtSettings.getSetting("totalRows");if(typeof this.wot.wtViewport.rowsRenderCalculator.startPosition=="number")this.spreader.style.top=`${this.wot.wtViewport.rowsRenderCalculator.startPosition}px`;else if(e===0)this.spreader.style.top="0";else throw new Error("Incorrect value of the rowsRenderCalculator");this.spreader.style.bottom="",this.needFullRender&&this.syncOverlayOffset()}syncOverlayOffset(){const e=this.isRtl()?"right":"left",{spreader:t}=this.clone.wtTable;typeof this.wot.wtViewport.columnsRenderCalculator.startPosition=="number"?t.style[e]=`${this.wot.wtViewport.columnsRenderCalculator.startPosition}px`:t.style[e]=""}scrollTo(e,t){let i=this.getTableParentOffset();const s=(this.wot.cloneSource?this.wot.cloneSource:this.wot).wtTable.holder;let o=0;t&&s.offsetHeight!==s.clientHeight&&(o=Pi(this.domBindings.rootDocument)),t?(i+=this.sumCellSizes(0,e+1),i-=this.wot.wtViewport.getViewportHeight(),i+=1):i+=this.sumCellSizes(this.wtSettings.getSetting("fixedRowsBottom"),e),i+=o,this.setScrollPosition(i)}getTableParentOffset(){return this.mainTableScrollableElement===this.domBindings.rootWindow?this.wot.wtTable.holderOffset.top:0}getScrollPosition(){return Q1(this.mainTableScrollableElement,this.domBindings.rootWindow)}getOverlayOffset(){const{rootWindow:e}=this.domBindings,t=this.wtSettings.getSetting("preventOverflow");let i=0;if(this.trimmingContainer===e&&(!t||t!=="vertical")){const r=this.wot.wtTable.getTotalHeight(),s=this.clone.wtTable.getTotalHeight(),o=r-s,a=this.domBindings.rootDocument.documentElement.clientHeight;i=Math.max(this.getTableParentOffset()-this.getScrollPosition()-a+r,0),i>o&&(i=0)}return i}adjustHeaderBordersPosition(e){const t=this.wtSettings.getSetting("fixedRowsBottom"),i=this.cachedFixedRowsBottom!==t,r=this.wtSettings.getSetting("columnHeaders");let s=!1;if((i||t===0)&&r.length>0){const o=this.wot.wtTable.holder.parentNode,a=Ue(o,"innerBorderBottom");this.cachedFixedRowsBottom=this.wtSettings.getSetting("fixedRowsBottom"),e||this.wtSettings.getSetting("totalRows")===0?(ge(o,"innerBorderBottom"),s=!a):(Qe(o,"innerBorderBottom"),s=a)}return s}}const dMe="calculatedRows",pL={getFirstRenderedRow(){const n=this.dataAccessObject.startRowRendered;return n===null?-1:n},getFirstVisibleRow(){const n=this.dataAccessObject.startRowVisible;return n===null?-1:n},getFirstPartiallyVisibleRow(){const n=this.dataAccessObject.startRowPartiallyVisible;return n===null?-1:n},getLastRenderedRow(){const n=this.dataAccessObject.endRowRendered;return n===null?-1:n},getLastVisibleRow(){const n=this.dataAccessObject.endRowVisible;return n===null?-1:n},getLastPartiallyVisibleRow(){const n=this.dataAccessObject.endRowPartiallyVisible;return n===null?-1:n},getRenderedRowsCount(){return this.dataAccessObject.countRowsRendered},getVisibleRowsCount(){return this.dataAccessObject.countRowsVisible},getColumnHeadersCount(){return this.dataAccessObject.columnHeaders.length}};Rl(pL,"MIXIN_NAME",dMe,{writable:!1,enumerable:!1});class mL extends sm{constructor(e,t,i,r){super(e,t,i,r,df)}}qt(mL,pL);qt(mL,lE);const fMe="localHooks",Xi={_localHooks:Object.create(null),addLocalHook(n,e){return this._localHooks[n]||(this._localHooks[n]=[]),this._localHooks[n].push(e),this},runLocalHooks(n,e,t,i,r,s,o){if(this._localHooks[n]){const a=this._localHooks[n].length;for(let l=0;l<a;l++)tR(this._localHooks[n][l],this,e,t,i,r,s,o)}},clearLocalHooks(){return this._localHooks={},this}};Rl(Xi,"MIXIN_NAME",fMe,{writable:!1,enumerable:!1});let AY=class{constructor(e,t){this.settings=e,this.cellRange=t||null}isEmpty(){return this.cellRange===null}add(e){return this.isEmpty()?this.cellRange=this.settings.createCellRange(e):this.cellRange.expand(e),this}replace(e,t){if(!this.isEmpty()){if(this.cellRange.from.isEqual(e))return this.cellRange.from=t,!0;if(this.cellRange.to.isEqual(e))return this.cellRange.to=t,!0}return!1}clear(){return this.cellRange=null,this}getCorners(){const e=this.cellRange.getOuterTopStartCorner(),t=this.cellRange.getOuterBottomEndCorner();return[e.row,e.col,t.row,t.col]}destroy(){this.runLocalHooks("destroy")}};qt(AY,Xi);const PY="active-header",bL="header",vL="area",wL="focus",gMe="fill",pMe="row",mMe="column",bMe="custom-selection",yL=Object.freeze({width:"6px",height:"6px",borderWidth:"1px",borderStyle:"solid",borderColor:"#FFF"});var vMe=nL;vMe("flat");function wMe(n,e){IY(n,e),e.add(n)}function D3(n,e,t){IY(n,e),e.set(n,t)}function IY(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ii(n,e){return n.get(Iv(n,e))}function L3(n,e,t){return n.set(Iv(n,e),t),t}function Iv(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var Mo=new WeakMap,jr=new WeakMap,V0=new WeakSet;class yMe{constructor(){wMe(this,V0),D3(this,Mo,void 0),D3(this,jr,void 0)}setActiveOverlay(e){return L3(jr,this,e),this}setActiveSelection(e){return L3(Mo,this,e),this}scan(){const e=ii(Mo,this).settings.selectionType,t=new Set;return e==="active-header"?(this.scanColumnsInHeadersRange(i=>t.add(i)),this.scanRowsInHeadersRange(i=>t.add(i))):e==="area"?this.scanCellsRange(i=>t.add(i)):e==="focus"?(this.scanColumnsInHeadersRange(i=>t.add(i)),this.scanRowsInHeadersRange(i=>t.add(i)),this.scanCellsRange(i=>t.add(i))):e==="fill"?this.scanCellsRange(i=>t.add(i)):e==="header"?(this.scanColumnsInHeadersRange(i=>t.add(i)),this.scanRowsInHeadersRange(i=>t.add(i))):e==="row"?(this.scanRowsInHeadersRange(i=>t.add(i)),this.scanRowsInCellsRange(i=>t.add(i))):e==="column"&&(this.scanColumnsInHeadersRange(i=>t.add(i)),this.scanColumnsInCellsRange(i=>t.add(i))),t}scanColumnsInHeadersRange(e){const[t,i,r,s]=ii(Mo,this).getCorners(),{wtTable:o}=ii(jr,this),a=o.getRenderedColumnsCount(),l=o.getColumnHeadersCount();let c=0;for(let u=-o.getRowHeadersCount();u<a;u++){const h=o.columnFilter.renderedToSource(u);if(!(h<i||h>s)){for(let d=-l;d<0;d++){if(d<t||d>r)continue;const f=d+l;let g=o.getColumnHeader(h,f);const p=ii(jr,this).getSetting("onBeforeHighlightingColumnHeader",h,f,{selectionType:ii(Mo,this).settings.selectionType,columnCursor:c,selectionWidth:s-i+1});p!==null&&(p!==h&&(g=o.getColumnHeader(p,f)),e(g))}c+=1}}}scanRowsInHeadersRange(e){const[t,i,r,s]=ii(Mo,this).getCorners(),{wtTable:o}=ii(jr,this),a=o.getRenderedRowsCount(),l=o.getRowHeadersCount();let c=0;for(let u=-o.getColumnHeadersCount();u<a;u++){const h=o.rowFilter.renderedToSource(u);if(!(h<t||h>r)){for(let d=-l;d<0;d++){if(d<i||d>s)continue;const f=d+l;let g=o.getRowHeader(h,f);const p=ii(jr,this).getSetting("onBeforeHighlightingRowHeader",h,f,{selectionType:ii(Mo,this).settings.selectionType,rowCursor:c,selectionHeight:r-t+1});p!==null&&(p!==h&&(g=o.getRowHeader(p,f)),e(g))}c+=1}}}scanCellsRange(e){const[t,i,r,s]=ii(Mo,this).getCorners(),{wtTable:o}=ii(jr,this);Iv(V0,this,LT).call(this,(a,l)=>{if(a>=t&&a<=r&&l>=i&&l<=s){const c=o.getCell(ii(jr,this).createCellCoords(a,l)),u=ii(jr,this).getSetting("onAfterDrawSelection",a,l,ii(Mo,this).settings.layerLevel);typeof u=="string"&&ge(c,u),e(c)}})}scanRowsInCellsRange(e){const[t,,i]=ii(Mo,this).getCorners(),{wtTable:r}=ii(jr,this);Iv(V0,this,LT).call(this,(s,o)=>{if(s>=t&&s<=i){const a=r.getCell(ii(jr,this).createCellCoords(s,o));e(a)}})}scanColumnsInCellsRange(e){const[,t,,i]=ii(Mo,this).getCorners(),{wtTable:r}=ii(jr,this);Iv(V0,this,LT).call(this,(s,o)=>{if(o>=t&&o<=i){const a=r.getCell(ii(jr,this).createCellCoords(s,o));e(a)}})}}function LT(n){const{wtTable:e}=ii(jr,this),t=e.getRenderedRowsCount(),i=e.getRenderedColumnsCount();for(let r=0;r<t;r+=1){const s=e.rowFilter.renderedToSource(r);for(let o=0;o<i;o+=1)n(s,e.columnFilter.renderedToSource(o))}}class N3{constructor(e,t){t&&(this.eventManager=e.eventManager,this.instance=e,this.wot=e,this.settings=t,this.mouseDown=!1,this.main=null,this.top=null,this.bottom=null,this.start=null,this.end=null,this.topStyle=null,this.bottomStyle=null,this.startStyle=null,this.endStyle=null,this.cornerDefaultStyle=yL,this.cornerCenterPointOffset=-(parseInt(this.cornerDefaultStyle.width,10)/2),this.corner=null,this.cornerStyle=null,this.createBorders(t),this.registerListeners())}registerListeners(){const e=this.wot.rootDocument.body;this.eventManager.addEventListener(e,"mousedown",()=>this.onMouseDown()),this.eventManager.addEventListener(e,"mouseup",()=>this.onMouseUp());for(let t=0,i=this.main.childNodes.length;t<i;t++){const r=this.main.childNodes[t];this.eventManager.addEventListener(r,"mouseenter",s=>this.onMouseEnter(s,this.main.childNodes[t]))}}onMouseDown(){this.mouseDown=!0}onMouseUp(){this.mouseDown=!1}onMouseEnter(e,t){if(!this.mouseDown||!this.wot.getSetting("hideBorderOnMouseDownOver"))return;e.preventDefault(),bo(e);const i=this,r=this.wot.rootDocument.body,s=t.getBoundingClientRect();t.style.display="none";function o(l){if(l.clientY<Math.floor(s.top)||l.clientY>Math.ceil(s.top+s.height)||l.clientX<Math.floor(s.left)||l.clientX>Math.ceil(s.left+s.width))return!0}function a(l){o(l)&&(i.eventManager.removeEventListener(r,"mousemove",a),t.style.display="block")}this.eventManager.addEventListener(r,"mousemove",a)}createBorders(e){const{rootDocument:t}=this.wot;this.main=t.createElement("div");const i=["top","start","bottom","end","corner"];let r=this.main.style;r.position="absolute",r.top=0,r.left=0;for(let a=0;a<5;a++){const l=i[a],c=t.createElement("div");c.className=`wtBorder ${this.settings.className||""}`,this.settings[l]&&this.settings[l].hide&&(c.className+=" hidden"),r=c.style,r.backgroundColor=this.settings[l]&&this.settings[l].color?this.settings[l].color:e.border.color,r.height=this.settings[l]&&this.settings[l].width?`${this.settings[l].width}px`:`${e.border.width}px`,r.width=this.settings[l]&&this.settings[l].width?`${this.settings[l].width}px`:`${e.border.width}px`,this.main.appendChild(c)}this.top=this.main.childNodes[0],this.start=this.main.childNodes[1],this.bottom=this.main.childNodes[2],this.end=this.main.childNodes[3],this.topStyle=this.top.style,this.startStyle=this.start.style,this.bottomStyle=this.bottom.style,this.endStyle=this.end.style,this.corner=this.main.childNodes[4],this.corner.className+=" corner",this.cornerStyle=this.corner.style,this.cornerStyle.width=this.cornerDefaultStyle.width,this.cornerStyle.height=this.cornerDefaultStyle.height,this.cornerStyle.border=[this.cornerDefaultStyle.borderWidth,this.cornerDefaultStyle.borderStyle,this.cornerDefaultStyle.borderColor].join(" "),pc()&&this.instance.getSetting("isDataViewInstance")&&this.createMultipleSelectorHandles(),this.disappear();const{wtTable:s}=this.wot;let o=s.bordersHolder;o||(o=t.createElement("div"),o.className="htBorders",s.bordersHolder=o,s.spreader.appendChild(o)),o.appendChild(this.main)}createMultipleSelectorHandles(){const{rootDocument:e}=this.wot;this.selectionHandles={top:e.createElement("DIV"),topHitArea:e.createElement("DIV"),bottom:e.createElement("DIV"),bottomHitArea:e.createElement("DIV")};const t=10,i=40;this.selectionHandles.top.className="topSelectionHandle topLeftSelectionHandle",this.selectionHandles.topHitArea.className="topSelectionHandle-HitArea topLeftSelectionHandle-HitArea",this.selectionHandles.bottom.className="bottomSelectionHandle bottomRightSelectionHandle",this.selectionHandles.bottomHitArea.className="bottomSelectionHandle-HitArea bottomRightSelectionHandle-HitArea",this.selectionHandles.styles={top:this.selectionHandles.top.style,topHitArea:this.selectionHandles.topHitArea.style,bottom:this.selectionHandles.bottom.style,bottomHitArea:this.selectionHandles.bottomHitArea.style};const r={position:"absolute",height:`${i}px`,width:`${i}px`,"border-radius":`${parseInt(i/1.5,10)}px`};ut(r,(o,a)=>{this.selectionHandles.styles.bottomHitArea[a]=o,this.selectionHandles.styles.topHitArea[a]=o});const s={position:"absolute",height:`${t}px`,width:`${t}px`,"border-radius":`${parseInt(t/1.5,10)}px`,background:"#F5F5FF",border:"1px solid #4285c8"};ut(s,(o,a)=>{this.selectionHandles.styles.bottom[a]=o,this.selectionHandles.styles.top[a]=o}),this.main.appendChild(this.selectionHandles.top),this.main.appendChild(this.selectionHandles.bottom),this.main.appendChild(this.selectionHandles.topHitArea),this.main.appendChild(this.selectionHandles.bottomHitArea)}isPartRange(e,t){const i=this.wot.selectionManager.getAreaSelection();return!!(i.cellRange&&(e!==i.cellRange.to.row||t!==i.cellRange.to.col))}updateMultipleSelectionHandlesPosition(e,t,i,r,s,o){const l=this.wot.wtSettings.getSetting("rtlMode")?"right":"left",{top:c,topHitArea:u,bottom:h,bottomHitArea:d}=this.selectionHandles.styles,f=parseInt(c.borderWidth,10),g=parseInt(c.width,10),p=parseInt(u.width,10),m=this.wot.wtTable.getWidth(),v=this.wot.wtTable.getHeight();c.top=`${parseInt(i-g-1,10)}px`,c[l]=`${parseInt(r-g-1,10)}px`,u.top=`${parseInt(i-p/4*3,10)}px`,u[l]=`${parseInt(r-p/4*3,10)}px`;const y=Math.min(parseInt(r+s,10),m-g-f*2),w=Math.min(parseInt(r+s-p/4,10),m-p-f*2);h[l]=`${y}px`,d[l]=`${w}px`;const R=Math.min(parseInt(i+o,10),v-g-f*2),x=Math.min(parseInt(i+o-p/4,10),v-p-f*2);h.top=`${R}px`,d.top=`${x}px`,this.settings.border.cornerVisible&&this.settings.border.cornerVisible()?(c.display="block",u.display="block",this.isPartRange(e,t)?(h.display="none",d.display="none"):(h.display="block",d.display="block")):(c.display="none",h.display="none",u.display="none",d.display="none"),e===this.wot.wtSettings.getSetting("fixedRowsTop")||t===this.wot.wtSettings.getSetting("fixedColumnsStart")?(c.zIndex="9999",u.zIndex="9999"):(c.zIndex="",u.zIndex="")}appear(e){if(this.disabled)return;const{wtTable:t,rootDocument:i,rootWindow:r}=this.wot;let s,o,a,l,c,u;const h=t.getRenderedRowsCount();for(let k=0;k<h;k+=1){const K=t.rowFilter.renderedToSource(k);if(K>=e[0]&&K<=e[2]){s=K,c=e[0];break}}for(let k=h-1;k>=0;k-=1){const K=t.rowFilter.renderedToSource(k);if(K>=e[0]&&K<=e[2]){o=K;break}}const d=t.getRenderedColumnsCount();for(let k=0;k<d;k+=1){const K=t.columnFilter.renderedToSource(k);if(K>=e[1]&&K<=e[3]){a=K,u=e[1];break}}for(let k=d-1;k>=0;k-=1){const K=t.columnFilter.renderedToSource(k);if(K>=e[1]&&K<=e[3]){l=K;break}}if(s===void 0||a===void 0){this.disappear();return}let f=t.getCell(this.wot.createCellCoords(s,a));const g=s!==o||a!==l,p=g?t.getCell(this.wot.createCellCoords(o,l)):f,m=xi(f),v=g?xi(p):m,y=xi(t.TABLE),w=gn(t.TABLE),R=m.top,x=m.left,S=this.wot.wtSettings.getSetting("rtlMode");let T=0,P=0;if(S){const k=gn(f),K=r.innerWidth-y.left-w;P=x+k-v.left,T=r.innerWidth-x-k-K-1}else P=v.left+gn(p)-x,T=x-y.left-1;if(this.isEntireColumnSelected(s,o)){const k=this.getDimensionsFromHeader("columns",a,l,c,y);let K=null;k&&([K,T,P]=k),K&&(f=K)}let E=R-y.top-1,A=v.top+ni(p)-R;if(this.isEntireRowSelected(a,l)){const k=this.getDimensionsFromHeader("rows",s,o,u,y);let K=null;k&&([K,E,A]=k),K&&(f=K)}const L=ul(f,r);parseInt(L.borderTopWidth,10)>0&&(E+=1,A=A>0?A-1:0),parseInt(L[S?"borderRightWidth":"borderLeftWidth"],10)>0&&(T+=1,P=P>0?P-1:0);const W=S?"right":"left";this.topStyle.top=`${E}px`,this.topStyle[W]=`${T}px`,this.topStyle.width=`${P}px`,this.topStyle.display="block",this.startStyle.top=`${E}px`,this.startStyle[W]=`${T}px`,this.startStyle.height=`${A}px`,this.startStyle.display="block";const F=Math.floor(this.settings.border.width/2);this.bottomStyle.top=`${E+A-F}px`,this.bottomStyle[W]=`${T}px`,this.bottomStyle.width=`${P}px`,this.bottomStyle.display="block",this.endStyle.top=`${E}px`,this.endStyle[W]=`${T+P-F}px`,this.endStyle.height=`${A+1}px`,this.endStyle.display="block";let V=this.settings.border.cornerVisible;V=typeof V=="function"?V(this.settings.layerLevel):V;const H=this.wot.getSetting("onModifyGetCellCoords",o,l);let[N,j]=[o,l];if(H&&Array.isArray(H)&&([,,N,j]=H),pc()||!V||this.isPartRange(N,j))this.cornerStyle.display="none";else{this.cornerStyle.top=`${E+A+this.cornerCenterPointOffset-1}px`,this.cornerStyle[W]=`${T+P+this.cornerCenterPointOffset-1}px`,this.cornerStyle.borderRightWidth=this.cornerDefaultStyle.borderWidth,this.cornerStyle.width=this.cornerDefaultStyle.width,this.cornerStyle.display="none";let k=cf(t.TABLE);const K=k===r;K&&(k=i.documentElement);const ie=parseInt(this.cornerDefaultStyle.width,10)/2,b=parseInt(this.cornerDefaultStyle.height,10)/2;if(l===this.wot.getSetting("totalColumns")-1){const C=K?p.getBoundingClientRect().left:p.offsetLeft;let _=!1,I=0;S?(I=C-parseInt(this.cornerDefaultStyle.width,10)/2,_=I<0):(I=C+gn(p)+parseInt(this.cornerDefaultStyle.width,10)/2,_=I>=zD(k)),_&&(this.cornerStyle[W]=`${Math.floor(T+P+this.cornerCenterPointOffset-ie)}px`,this.cornerStyle[S?"borderLeftWidth":"borderRightWidth"]=0)}o===this.wot.getSetting("totalRows")-1&&(K?p.getBoundingClientRect().top:p.offsetTop)+ni(p)+parseInt(this.cornerDefaultStyle.height,10)/2>=xd(k)&&(this.cornerStyle.top=`${Math.floor(E+A+this.cornerCenterPointOffset-b)}px`,this.cornerStyle.borderBottomWidth=0),this.cornerStyle.display="block"}pc()&&this.instance.getSetting("isDataViewInstance")&&this.updateMultipleSelectionHandlesPosition(o,l,E,T,P,A)}isEntireColumnSelected(e,t){return e===this.wot.wtTable.getFirstRenderedRow()&&t===this.wot.wtTable.getLastRenderedRow()}isEntireRowSelected(e,t){return e===this.wot.wtTable.getFirstRenderedColumn()&&t===this.wot.wtTable.getLastRenderedColumn()}getDimensionsFromHeader(e,t,i,r,s){const{wtTable:o}=this.wot,a=o.wtRootElement.parentNode;let l=null,c=null,u=null,h=null,d=null,f=null,g=null,p=null;switch(e){case"rows":l=function(){return o.getRowHeader(...arguments)},c=function(){return ni(...arguments)},u="ht__selection--rows",f="top";break;case"columns":l=function(){return o.getColumnHeader(...arguments)},c=function(){return gn(...arguments)},u="ht__selection--columns",f="left";break}if(a.classList.contains(u)){const m=this.wot.getSetting("columnHeaders").length;if(g=l(t,m-r),p=l(i,m-r),!g||!p)return!1;const v=xi(g),y=xi(p);return g&&p&&(h=v[f]-s[f]-1,d=y[f]+c(p)-v[f]),[g,h,d]}return!1}changeBorderStyle(e,t){const i=this[e].style,r=t[e];!r||r.hide?ge(this[e],"hidden"):(Ue(this[e],"hidden")&&Qe(this[e],"hidden"),i.backgroundColor=r.color,(e==="top"||e==="bottom")&&(i.height=`${r.width}px`),(e==="start"||e==="end")&&(i.width=`${r.width}px`))}changeBorderToDefaultStyle(e){const t={width:1,color:"#000"},i=this[e].style;i.backgroundColor=t.color,i.width=`${t.width}px`,i.height=`${t.width}px`}toggleHiddenClass(e,t){this.changeBorderToDefaultStyle(e),t?ge(this[e],"hidden"):Qe(this[e],"hidden")}disappear(){this.topStyle.display="none",this.bottomStyle.display="none",this.startStyle.display="none",this.endStyle.display="none",this.cornerStyle.display="none",pc()&&this.instance.getSetting("isDataViewInstance")&&(this.selectionHandles.styles.top.display="none",this.selectionHandles.styles.topHitArea.display="none",this.selectionHandles.styles.bottom.display="none",this.selectionHandles.styles.bottomHitArea.display="none")}destroy(){this.eventManager.destroyWithOwnEventsOnly(),this.main.parentNode.removeChild(this.main)}}function CMe(n,e){OY(n,e),e.add(n)}function Zf(n,e,t){OY(n,e),e.set(n,t)}function OY(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function pt(n,e){return n.get(CL(n,e))}function H3(n,e,t){return n.set(CL(n,e),t),t}function CL(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var ir=new WeakMap,Yr=new WeakMap,NT=new WeakMap,qb=new WeakMap,HT=new WeakMap,Mh=new WeakMap,$3=new WeakSet;class SMe{constructor(e){CMe(this,$3),Zf(this,ir,void 0),Zf(this,Yr,void 0),Zf(this,NT,new yMe),Zf(this,qb,new WeakMap),Zf(this,HT,new WeakSet),Zf(this,Mh,new Map),H3(Yr,this,e)}setActiveOverlay(e){return H3(ir,this,e),pt(NT,this).setActiveOverlay(pt(ir,this)),pt(qb,this).has(pt(ir,this))||pt(qb,this).set(pt(ir,this),new Set),this}getFocusSelection(){return pt(Yr,this)!==null?pt(Yr,this).getFocus():null}getAreaSelection(){return pt(Yr,this)!==null?pt(Yr,this).createLayeredArea():null}getBorderInstance(e){if(!e.settings.border)return null;if(pt(Mh,this).has(e)){const i=pt(Mh,this).get(e);if(i.has(pt(ir,this)))return i.get(pt(ir,this));const r=new N3(pt(ir,this),e.settings);return i.set(pt(ir,this),r),r}const t=new N3(pt(ir,this),e.settings);return pt(Mh,this).set(e,new Map([[pt(ir,this),t]])),t}getBorderInstances(e){var t,i;return Array.from((t=(i=pt(Mh,this).get(e))===null||i===void 0?void 0:i.values())!==null&&t!==void 0?t:[])}destroyBorders(e){pt(Mh,this).get(e).forEach(t=>t.destroy()),pt(Mh,this).delete(e)}render(e){if(pt(Yr,this)===null)return;e&&CL($3,this,_Me).call(this);const t=Array.from(pt(Yr,this)),i=new Map,r=new Map;for(let s=0;s<t.length;s++){const o=t[s],{className:a,headerAttributes:l,createLayers:c,selectionType:u}=o.settings;pt(HT,this).has(o)||(pt(HT,this).add(o),o.addLocalHook("destroy",()=>this.destroyBorders(o)));const h=this.getBorderInstance(o);if(o.isEmpty()){h==null||h.disappear();continue}a&&pt(NT,this).setActiveSelection(o).scan().forEach(g=>{if(i.has(g)){const p=i.get(g);p.has(a)&&c===!0?p.set(a,p.get(a)+1):p.set(a,1)}else i.set(g,new Map([[a,1]]));l&&(r.has(g)||r.set(g,[]),g.nodeName==="TH"&&r.get(g).push(...l))});const d=o.getCorners();pt(ir,this).getSetting("onBeforeDrawBorders",d,u),h==null||h.appear(d)}i.forEach((s,o)=>{var a;const l=Array.from(s).map(c=>{let[u,h]=c;return h===1?u:[u,...Array.from({length:h-1},(d,f)=>`${u}-${f+1}`)]}).flat();l.forEach(c=>pt(qb,this).get(pt(ir,this)).add(c)),ge(o,l),o.nodeName==="TD"&&Array.isArray((a=pt(Yr,this).options)===null||a===void 0?void 0:a.cellAttributes)&&ze(o,pt(Yr,this).options.cellAttributes)}),Array.from(r.keys()).forEach(s=>{ze(s,[...r.get(s)])})}}function _Me(){const n=pt(qb,this).get(pt(ir,this)),e=pt(ir,this).wtSettings.getSetting("onBeforeRemoveCellClassNames");if(Array.isArray(e))for(let t=0;t<e.length;t++)n.add(e[t]);n.forEach(t=>{var i,r;const s=pt(ir,this).wtTable.TABLE.querySelectorAll(`.${t}`);let o=[];Array.isArray((i=pt(Yr,this).options)===null||i===void 0?void 0:i.cellAttributes)&&(o=pt(Yr,this).options.cellAttributes.map(a=>a[0])),Array.isArray((r=pt(Yr,this).options)===null||r===void 0?void 0:r.headerAttributes)&&(o=[...o,...pt(Yr,this).options.headerAttributes.map(a=>a[0])]);for(let a=0,l=s.length;a<l;a++)Qe(s[a],t),Of(s[a],o)}),n.clear()}class RMe extends Sy{constructor(e,t,i,r){super(e,t,df,i,r)}createTable(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return new mL(...t)}shouldBeRendered(){return this.wtSettings.getSetting("shouldRenderInlineStartOverlay")}resetFixedPosition(){const{wtTable:e}=this.wot;if(!this.needFullRender||!this.shouldBeRendered()||!e.holder.parentNode)return!1;const{rootWindow:t}=this.domBindings,i=this.clone.wtTable.holder.parentNode,r=this.wtSettings.getSetting("preventOverflow");let s=0;this.trimmingContainer===t&&(!r||r!=="horizontal")?(s=this.getOverlayOffset()*(this.isRtl()?-1:1),J1(i,`${s}px`,"0px")):(s=this.getScrollPosition(),my(i));const o=this.adjustHeaderBordersPosition(s);return this.adjustElementsSize(),o}setScrollPosition(e){const{rootWindow:t}=this.domBindings;let i=!1;return this.isRtl()&&(e=-e),this.mainTableScrollableElement===t&&t.scrollX!==e?(t.scrollTo(e,WD(t)),i=!0):this.mainTableScrollableElement.scrollLeft!==e&&(this.mainTableScrollableElement.scrollLeft=e,i=!0),i}onScroll(){this.wtSettings.getSetting("onScrollVertically")}sumCellSizes(e,t){const i=this.wtSettings.getSetting("defaultColumnWidth");let r=e,s=0;for(;r<t;)s+=this.wot.wtTable.getStretchedColumnWidth(r)||i,r+=1;return s}adjustElementsSize(){this.updateTrimmingContainer(),this.needFullRender&&(this.adjustRootElementSize(),this.adjustRootChildrenSize())}adjustRootElementSize(){const{wtTable:e}=this.wot,{rootDocument:t,rootWindow:i}=this.domBindings,r=Pi(t),o=this.clone.wtTable.holder.parentNode.style,a=this.wtSettings.getSetting("preventOverflow");if(this.trimmingContainer!==i||a==="vertical"){let c=this.wot.wtViewport.getWorkspaceHeight();this.wot.wtOverlays.hasScrollbarBottom&&(c-=r),c=Math.min(c,e.wtRootElement.scrollHeight),o.height=`${c}px`}else o.height="";this.clone.wtTable.holder.style.height=o.height;const l=gn(this.clone.wtTable.TABLE);o.width=`${l}px`}adjustRootChildrenSize(){const{holder:e}=this.clone.wtTable,t=this.wot.selectionManager.getFocusSelection()?parseInt(yL.width,10)/2:0;this.clone.wtTable.hider.style.height=this.hider.style.height,e.style.height=e.parentNode.style.height,e.style.width=`${parseInt(e.parentNode.style.width,10)+t}px`}applyToDOM(){const e=this.wtSettings.getSetting("totalColumns"),t=this.isRtl()?"right":"left";if(typeof this.wot.wtViewport.columnsRenderCalculator.startPosition=="number")this.spreader.style[t]=`${this.wot.wtViewport.columnsRenderCalculator.startPosition}px`;else if(e===0)this.spreader.style[t]="0";else throw new Error("Incorrect value of the columnsRenderCalculator");this.isRtl()?this.spreader.style.left="":this.spreader.style.right="",this.needFullRender&&this.syncOverlayOffset()}syncOverlayOffset(){typeof this.wot.wtViewport.rowsRenderCalculator.startPosition=="number"?this.clone.wtTable.spreader.style.top=`${this.wot.wtViewport.rowsRenderCalculator.startPosition}px`:this.clone.wtTable.spreader.style.top=""}scrollTo(e,t){const{wtSettings:i}=this,r=i.getSetting("rowHeaders"),s=i.getSetting("fixedColumnsStart"),a=(this.wot.cloneSource?this.wot.cloneSource:this.wot).wtTable.holder,l=s===0&&r.length>0&&!Ue(a.parentNode,"innerBorderInlineStart")?1:0;let c=this.getTableParentOffset(),u=0;if(t){const h=this.wot.wtTable.getColumnWidth(e),d=this.wot.wtViewport.getViewportWidth();h>d&&(t=!1)}return t&&a.offsetWidth!==a.clientWidth&&(u=Pi(this.domBindings.rootDocument)),t?(c+=this.sumCellSizes(0,e+1),c-=this.wot.wtViewport.getViewportWidth(),c+=l):c+=this.sumCellSizes(this.wtSettings.getSetting("fixedColumnsStart"),e),c+=u,k9(this.mainTableScrollableElement)===c-l&&l>0&&this.wot.wtOverlays.expandHiderHorizontallyBy(l),this.setScrollPosition(c)}getTableParentOffset(){const e=this.wtSettings.getSetting("preventOverflow");let t=0;return!e&&this.trimmingContainer===this.domBindings.rootWindow&&(t=this.wot.wtTable.holderOffset.left),t}getScrollPosition(){return Math.abs(jD(this.mainTableScrollableElement,this.domBindings.rootWindow))}getOverlayOffset(){const{rootWindow:e}=this.domBindings,t=this.wtSettings.getSetting("preventOverflow");let i=0;if(this.trimmingContainer===e&&(!t||t!=="horizontal")){this.isRtl()?i=Math.abs(Math.min(this.getTableParentOffset()-this.getScrollPosition(),0)):i=Math.max(this.getScrollPosition()-this.getTableParentOffset(),0);const r=this.wot.wtTable.getTotalWidth(),s=this.clone.wtTable.getTotalWidth(),o=r-s;i>o&&(i=0)}return i}adjustHeaderBordersPosition(e){const{wtSettings:t}=this,i=this.wot.wtTable.holder.parentNode,r=t.getSetting("rowHeaders"),s=t.getSetting("fixedColumnsStart"),o=t.getSetting("totalRows"),a=t.getSetting("preventOverflow")==="vertical";o?Qe(i,"emptyRows"):ge(i,"emptyRows");let l=!1;if(!a){if(s&&!r.length)ge(i,"innerBorderLeft innerBorderInlineStart");else if(!s&&r.length){const c=Ue(i,"innerBorderInlineStart");e?(ge(i,"innerBorderLeft innerBorderInlineStart"),l=!c):(Qe(i,"innerBorderLeft innerBorderInlineStart"),l=c)}}return l}}const EMe="stickyRowsTop",SL={getFirstRenderedRow(){return this.wtSettings.getSetting("totalRows")===0?-1:0},getFirstVisibleRow(){return this.getFirstRenderedRow()},getFirstPartiallyVisibleRow(){return this.getFirstRenderedRow()},getLastRenderedRow(){return this.getRenderedRowsCount()-1},getLastVisibleRow(){return this.getLastRenderedRow()},getLastPartiallyVisibleRow(){return this.getLastRenderedRow()},getRenderedRowsCount(){const n=this.wtSettings.getSetting("totalRows");return Math.min(this.wtSettings.getSetting("fixedRowsTop"),n)},getVisibleRowsCount(){return this.getRenderedRowsCount()},getColumnHeadersCount(){return this.dataAccessObject.columnHeaders.length}};Rl(SL,"MIXIN_NAME",EMe,{writable:!1,enumerable:!1});class _L extends sm{constructor(e,t,i,r){super(e,t,i,r,ff)}}qt(_L,SL);qt(_L,lE);function F3(n,e,t){return(e=xMe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function xMe(n){var e=TMe(n,"string");return typeof e=="symbol"?e:e+""}function TMe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class MMe extends Sy{constructor(e,t,i,r,s,o){super(e,t,ff,i,r),F3(this,"topOverlay",void 0),F3(this,"inlineStartOverlay",void 0),this.topOverlay=s,this.inlineStartOverlay=o}createTable(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return new _L(...t)}shouldBeRendered(){return this.wtSettings.getSetting("shouldRenderTopOverlay")&&this.wtSettings.getSetting("shouldRenderInlineStartOverlay")}resetFixedPosition(){if(this.updateTrimmingContainer(),!this.wot.wtTable.holder.parentNode)return!1;const e=this.clone.wtTable.holder.parentNode;if(this.trimmingContainer===this.domBindings.rootWindow){const r=this.inlineStartOverlay.getOverlayOffset()*(this.isRtl()?-1:1),s=this.topOverlay.getOverlayOffset();J1(e,`${r}px`,`${s}px`)}else my(e);let t=ni(this.clone.wtTable.TABLE);const i=gn(this.clone.wtTable.TABLE);return this.wot.wtTable.hasDefinedSize()||(t=0),e.style.height=`${t}px`,e.style.width=`${i}px`,!1}}class RL extends sm{constructor(e,t,i,r){super(e,t,i,r,hf)}}qt(RL,SL);qt(RL,cE);function AMe(n,e,t){return(e=PMe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function PMe(n){var e=IMe(n,"string");return typeof e=="symbol"?e:e+""}function IMe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class OMe extends Sy{constructor(e,t,i,r){super(e,t,hf,i,r),AMe(this,"cachedFixedRowsTop",-1),this.cachedFixedRowsTop=this.wtSettings.getSetting("fixedRowsTop")}createTable(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return new RL(...t)}shouldBeRendered(){return this.wtSettings.getSetting("shouldRenderTopOverlay")}resetFixedPosition(){if(!this.needFullRender||!this.shouldBeRendered()||!this.wot.wtTable.holder.parentNode)return!1;const e=this.clone.wtTable.holder.parentNode,{rootWindow:t}=this.domBindings,i=this.wtSettings.getSetting("preventOverflow");let r=0,s=!1;if(this.trimmingContainer===t&&(!i||i!=="vertical")){const{wtTable:a}=this.wot,l=a.hider.getBoundingClientRect(),c=Math.ceil(l.bottom),u=e.offsetHeight;s=c===u,r=this.getOverlayOffset(),J1(e,"0px",`${r}px`)}else r=this.getScrollPosition(),my(e);const o=this.adjustHeaderBordersPosition(r,s);return this.adjustElementsSize(),o}setScrollPosition(e){const t=this.domBindings.rootWindow;let i=!1;return this.mainTableScrollableElement===t&&t.scrollY!==e?(t.scrollTo(Z1(t),e),i=!0):this.mainTableScrollableElement.scrollTop!==e&&(this.mainTableScrollableElement.scrollTop=e,i=!0),i}onScroll(){this.wtSettings.getSetting("onScrollHorizontally")}sumCellSizes(e,t){const i=this.wtSettings.getSetting("defaultRowHeight");let r=e,s=0;for(;r<t;){const o=this.wot.wtTable.getRowHeight(r);s+=o===void 0?i:o,r+=1}return s}adjustElementsSize(){this.updateTrimmingContainer(),this.needFullRender&&(this.adjustRootElementSize(),this.adjustRootChildrenSize())}adjustRootElementSize(){const{wtTable:e}=this.wot,{rootDocument:t,rootWindow:i}=this.domBindings,r=Pi(t),o=this.clone.wtTable.holder.parentNode.style,a=this.wtSettings.getSetting("preventOverflow");if(this.trimmingContainer!==i||a==="horizontal"){let c=this.wot.wtViewport.getWorkspaceWidth();this.wot.wtOverlays.hasScrollbarRight&&(c-=r),c=Math.min(c,e.wtRootElement.scrollWidth),o.width=`${c}px`}else o.width="";this.clone.wtTable.holder.style.width=o.width;let l=ni(this.clone.wtTable.TABLE);this.wot.wtTable.hasDefinedSize()||(l=0),o.height=`${l}px`}adjustRootChildrenSize(){const{holder:e}=this.clone.wtTable,t=this.wot.selectionManager.getFocusSelection()?parseInt(yL.height,10)/2:0;this.clone.wtTable.hider.style.width=this.hider.style.width,e.style.width=e.parentNode.style.width,e.style.height=`${parseInt(e.parentNode.style.height,10)+t}px`}applyToDOM(){const e=this.wtSettings.getSetting("totalRows");if(typeof this.wot.wtViewport.rowsRenderCalculator.startPosition=="number")this.spreader.style.top=`${this.wot.wtViewport.rowsRenderCalculator.startPosition}px`;else if(e===0)this.spreader.style.top="0";else throw new Error("Incorrect value of the rowsRenderCalculator");this.spreader.style.bottom="",this.needFullRender&&this.syncOverlayOffset()}syncOverlayOffset(){const e=this.isRtl()?"right":"left",{spreader:t}=this.clone.wtTable;typeof this.wot.wtViewport.columnsRenderCalculator.startPosition=="number"?t.style[e]=`${this.wot.wtViewport.columnsRenderCalculator.startPosition}px`:t.style[e]=""}scrollTo(e,t){const{wot:i,wtSettings:r}=this,o=(i.cloneSource?i.cloneSource:i).wtTable.holder,a=r.getSetting("columnHeaders"),c=r.getSetting("fixedRowsTop")===0&&a.length>0&&!Ue(o.parentNode,"innerBorderTop")?1:0;let u=this.getTableParentOffset(),h=0;if(t){const d=this.wot.wtTable.getRowHeight(e),f=this.wot.wtViewport.getViewportHeight();d>f&&(t=!1)}if(t&&o.offsetHeight!==o.clientHeight&&(h=Pi(this.domBindings.rootDocument)),t){const d=r.getSetting("fixedRowsBottom"),f=r.getSetting("totalRows");u+=this.sumCellSizes(0,e+1),u-=i.wtViewport.getViewportHeight()-this.sumCellSizes(f-d,f),u+=1,u+=c}else u+=this.sumCellSizes(r.getSetting("fixedRowsTop"),e);return u+=h,O9(this.mainTableScrollableElement)===u-c&&c>0&&this.wot.wtOverlays.expandHiderVerticallyBy(c),this.setScrollPosition(u)}getTableParentOffset(){return this.mainTableScrollableElement===this.domBindings.rootWindow?this.wot.wtTable.holderOffset.top:0}getScrollPosition(){return Q1(this.mainTableScrollableElement,this.domBindings.rootWindow)}getOverlayOffset(){const{rootWindow:e}=this.domBindings,t=this.wtSettings.getSetting("preventOverflow");let i=0;if(this.trimmingContainer===e&&(!t||t!=="vertical")){const r=this.wot.wtTable.getTotalHeight(),s=this.clone.wtTable.getTotalHeight(),o=r-s;i=Math.max(this.getScrollPosition()-this.getTableParentOffset(),0),i>o&&(i=0)}return i}adjustHeaderBordersPosition(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const{wtSettings:i}=this,r=this.wot.wtTable.holder.parentNode,s=i.getSetting("totalColumns"),o=i.getSetting("preventOverflow")==="horizontal";s?Qe(r,"emptyColumns"):ge(r,"emptyColumns");let a=!1;if(!t&&!o){const l=i.getSetting("fixedRowsTop"),c=this.cachedFixedRowsTop!==l,u=i.getSetting("columnHeaders");if((c||l===0)&&u.length>0){const h=Ue(r,"innerBorderTop");this.cachedFixedRowsTop=i.getSetting("fixedRowsTop"),e||i.getSetting("totalRows")===0?(ge(r,"innerBorderTop"),a=!h):(Qe(r,"innerBorderTop"),a=h)}}return a}}function W0(n,e,t){kMe(n,e),e.set(n,t)}function kMe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Il(n,e,t){return(e=DMe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function DMe(n){var e=LMe(n,"string");return typeof e=="symbol"?e:e+""}function LMe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Ah(n,e,t){return n.set(kY(n,e),t),t}function Ol(n,e){return n.get(kY(n,e))}function kY(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var Qf=new WeakMap,j0=new WeakMap,Jf=new WeakMap,z0=new WeakMap;class NMe{constructor(e,t,i,r,s,o){Il(this,"wot",null),W0(this,Qf,[]),Il(this,"topOverlay",null),Il(this,"bottomOverlay",null),Il(this,"inlineStartOverlay",null),Il(this,"topInlineStartCornerOverlay",null),Il(this,"bottomInlineStartCornerOverlay",null),Il(this,"browserLineHeight",void 0),Il(this,"wtSettings",null),W0(this,j0,!1),W0(this,Jf,0),W0(this,z0,null),Il(this,"resizeObserver",new ResizeObserver(u=>{rE(()=>{!Array.isArray(u)||!u.length||(Ah(Jf,this,Ol(Jf,this)+1),Ol(Jf,this)===100&&(Yt("The ResizeObserver callback was fired too many times in direct succession.\nThis may be due to an infinite loop caused by setting a dynamic height/width (for example, with the `dvh` units) to a Handsontable container's parent. \nThe observer will be disconnected."),this.resizeObserver.disconnect()),Ol(z0,this)!==null&&clearTimeout(Ol(z0,this)),Ah(z0,this,setTimeout(()=>{Ah(Jf,this,0)},100)),this.wtSettings.getSetting("onContainerElementResize"))})})),this.wot=e,this.wtSettings=r,this.domBindings=i,this.facadeGetter=t,this.wtTable=o;const{rootDocument:a,rootWindow:l}=this.domBindings;this.instance=this.wot,this.eventManager=s,this.scrollbarSize=Pi(a);const c=l.getComputedStyle(o.wtRootElement.parentNode).getPropertyValue("overflow")==="hidden";this.scrollableElement=c?o.holder:Sw(o.TABLE),this.initOverlays(),this.hasScrollbarBottom=!1,this.hasScrollbarRight=!1,this.destroyed=!1,this.keyPressed=!1,this.spreaderLastSize={width:null,height:null},this.verticalScrolling=!1,this.horizontalScrolling=!1,this.initBrowserLineHeight(),this.registerListeners(),this.lastScrollX=l.scrollX,this.lastScrollY=l.scrollY}getOverlays(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const t=[...Ol(Qf,this)];return e&&t.push(this.wtTable),t}initBrowserLineHeight(){const{rootWindow:e,rootDocument:t}=this.domBindings,i=e.getComputedStyle(t.body),r=parseInt(i.lineHeight,10),s=parseInt(i.fontSize,10)*1.2;this.browserLineHeight=r||s}initOverlays(){const e=[this.wot,this.facadeGetter,this.wtSettings,this.domBindings];this.topOverlay=new OMe(...e),this.bottomOverlay=new hMe(...e),this.inlineStartOverlay=new RMe(...e),this.topInlineStartCornerOverlay=new MMe(...e,this.topOverlay,this.inlineStartOverlay),this.bottomInlineStartCornerOverlay=new oMe(...e,this.bottomOverlay,this.inlineStartOverlay),Ah(Qf,this,[this.topOverlay,this.bottomOverlay,this.inlineStartOverlay,this.topInlineStartCornerOverlay,this.bottomInlineStartCornerOverlay])}beforeDraw(){Ah(j0,this,Ol(Qf,this).reduce((e,t)=>t.hasRenderingStateChanged()||e,!1)),Ol(Qf,this).forEach(e=>e.updateStateOfRendering("before"))}afterDraw(){this.syncScrollWithMaster(),Ol(Qf,this).forEach(e=>{const t=e.hasRenderingStateChanged();e.updateStateOfRendering("after"),t&&!e.needFullRender&&e.reset()})}refreshAll(){if(this.wot.drawn){if(!this.wtTable.holder.parentNode){this.destroy();return}this.wot.draw(!0),this.verticalScrolling&&this.inlineStartOverlay.onScroll(),this.horizontalScrolling&&this.topOverlay.onScroll(),this.verticalScrolling=!1,this.horizontalScrolling=!1}}registerListeners(){const{rootDocument:e,rootWindow:t}=this.domBindings,{mainTableScrollableElement:i}=this.topOverlay,{mainTableScrollableElement:r}=this.inlineStartOverlay;this.eventManager.addEventListener(e.documentElement,"keydown",h=>this.onKeyDown(h)),this.eventManager.addEventListener(e.documentElement,"keyup",()=>this.onKeyUp()),this.eventManager.addEventListener(e,"visibilitychange",()=>this.onKeyUp()),this.eventManager.addEventListener(i,"scroll",h=>this.onTableScroll(h),{passive:!0}),i!==r&&this.eventManager.addEventListener(r,"scroll",h=>this.onTableScroll(h),{passive:!0});const s=t.devicePixelRatio&&t.devicePixelRatio>1,o=this.scrollableElement===t,a=this.wtSettings.getSetting("preventWheel"),l={passive:o};(a||s||!ZD())&&this.eventManager.addEventListener(this.wtTable.wtRootElement,"wheel",h=>this.onCloneWheel(h,a),l),[this.topOverlay,this.bottomOverlay,this.inlineStartOverlay,this.topInlineStartCornerOverlay,this.bottomInlineStartCornerOverlay].forEach(h=>{if(h&&h.needFullRender){const{holder:d}=h.clone.wtTable;this.eventManager.addEventListener(d,"wheel",f=>this.onCloneWheel(f,a),l)}});let u;this.eventManager.addEventListener(t,"resize",()=>{clearTimeout(u),u=setTimeout(()=>{this.wtSettings.getSetting("onWindowResize"),Ah(Jf,this,0)},200)}),o||this.resizeObserver.observe(this.wtTable.wtRootElement.parentElement)}deregisterListeners(){this.eventManager.clearEvents(!0)}onTableScroll(e){const t=this.domBindings.rootWindow,i=this.inlineStartOverlay.mainTableScrollableElement,r=this.topOverlay.mainTableScrollableElement,s=e.target;this.keyPressed&&(r!==t&&s!==t&&!e.target.contains(r)||i!==t&&s!==t&&!e.target.contains(i))||this.syncScrollPositions(e)}onCloneWheel(e,t){const{rootWindow:i}=this.domBindings,r=this.inlineStartOverlay.mainTableScrollableElement,s=this.topOverlay.mainTableScrollableElement,o=e.target,a=s!==i&&o!==i&&!o.contains(s),l=r!==i&&o!==i&&!o.contains(r);if(this.keyPressed&&(a||l)||this.scrollableElement===i)return;const c=this.translateMouseWheelToScroll(e);(t||this.scrollableElement!==i&&c)&&e.preventDefault()}onKeyDown(e){this.keyPressed=rm(e.keyCode,"ARROW_UP|ARROW_RIGHT|ARROW_DOWN|ARROW_LEFT")}onKeyUp(){this.keyPressed=!1}translateMouseWheelToScroll(e){let t=isNaN(e.deltaY)?-1*e.wheelDeltaY:e.deltaY,i=isNaN(e.deltaX)?-1*e.wheelDeltaX:e.deltaX;e.deltaMode===1&&(i+=i*this.browserLineHeight,t+=t*this.browserLineHeight);const r=this.scrollVertically(t),s=this.scrollHorizontally(i);return r||s}scrollVertically(e){const t=this.scrollableElement.scrollTop;return this.scrollableElement.scrollTop+=e,t!==this.scrollableElement.scrollTop}scrollHorizontally(e){const t=this.scrollableElement.scrollLeft;return this.scrollableElement.scrollLeft+=e,t!==this.scrollableElement.scrollLeft}syncScrollPositions(){if(this.destroyed)return;const{rootWindow:e}=this.domBindings,t=this.topOverlay.clone.wtTable.holder,i=this.inlineStartOverlay.clone.wtTable.holder,[r,s]=[this.scrollableElement.scrollLeft,this.scrollableElement.scrollTop];if(this.horizontalScrolling=t.scrollLeft!==r||this.lastScrollX!==e.scrollX,this.verticalScrolling=i.scrollTop!==s||this.lastScrollY!==e.scrollY,this.lastScrollX=e.scrollX,this.lastScrollY=e.scrollY,this.horizontalScrolling){t.scrollLeft=r;const o=this.bottomOverlay.needFullRender?this.bottomOverlay.clone.wtTable.holder:null;o&&(o.scrollLeft=r)}this.verticalScrolling&&(i.scrollTop=s),this.refreshAll()}syncScrollWithMaster(){if(!Ol(j0,this))return;const e=this.topOverlay.mainTableScrollableElement,{scrollLeft:t,scrollTop:i}=e;this.topOverlay.needFullRender&&(this.topOverlay.clone.wtTable.holder.scrollLeft=t),this.bottomOverlay.needFullRender&&(this.bottomOverlay.clone.wtTable.holder.scrollLeft=t),this.inlineStartOverlay.needFullRender&&(this.inlineStartOverlay.clone.wtTable.holder.scrollTop=i),Ah(j0,this,!1)}updateMainScrollableElements(){this.deregisterListeners(),this.inlineStartOverlay.updateMainScrollableElement(),this.topOverlay.updateMainScrollableElement(),this.bottomOverlay.needFullRender&&this.bottomOverlay.updateMainScrollableElement();const{wtTable:e}=this,{rootWindow:t}=this.domBindings;t.getComputedStyle(e.wtRootElement.parentNode).getPropertyValue("overflow")==="hidden"?this.scrollableElement=e.holder:this.scrollableElement=Sw(e.TABLE),this.registerListeners()}destroy(){this.resizeObserver.disconnect(),this.eventManager.destroy(),this.topOverlay.destroy(),this.bottomOverlay.clone&&this.bottomOverlay.destroy(),this.inlineStartOverlay.destroy(),this.topInlineStartCornerOverlay&&this.topInlineStartCornerOverlay.destroy(),this.bottomInlineStartCornerOverlay&&this.bottomInlineStartCornerOverlay.clone&&this.bottomInlineStartCornerOverlay.destroy(),this.destroyed=!0}refresh(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.updateLastSpreaderSize()&&this.adjustElementsSize(),this.bottomOverlay.clone&&this.bottomOverlay.refresh(e),this.inlineStartOverlay.refresh(e),this.topOverlay.refresh(e),this.topInlineStartCornerOverlay&&this.topInlineStartCornerOverlay.refresh(e),this.bottomInlineStartCornerOverlay&&this.bottomInlineStartCornerOverlay.clone&&this.bottomInlineStartCornerOverlay.refresh(e)}updateLastSpreaderSize(){const e=this.wtTable.spreader,t=e.clientWidth,i=e.clientHeight,r=t!==this.spreaderLastSize.width||i!==this.spreaderLastSize.height;return r&&(this.spreaderLastSize.width=t,this.spreaderLastSize.height=i),r}adjustElementsSize(){const{wtViewport:e}=this.wot,{wtTable:t}=this,{rootWindow:i}=this.domBindings,r=this.scrollableElement===i,s=this.wtSettings.getSetting("totalColumns"),o=this.wtSettings.getSetting("totalRows"),a=e.getRowHeaderWidth(),c=e.getColumnHeaderHeight()+this.topOverlay.sumCellSizes(0,o)+1,u=a+this.inlineStartOverlay.sumCellSizes(0,s),d=t.hider.style,f=()=>r?!1:this.scrollableElement.scrollTop>Math.max(0,c-t.holder.clientHeight),g=()=>r?!1:this.scrollableElement.scrollLeft>Math.max(0,u-t.holder.clientWidth),p=f()?1:0,m=g()?1:0;if(d.width=`${u+m}px`,d.height=`${c+p}px`,this.scrollbarSize>0){const{scrollHeight:v,scrollWidth:y}=t.wtRootElement,{scrollHeight:w,scrollWidth:R}=t.holder;this.hasScrollbarRight=v<w,this.hasScrollbarBottom=y<R,this.hasScrollbarRight&&t.hider.scrollWidth+this.scrollbarSize>y?this.hasScrollbarBottom=!0:this.hasScrollbarBottom&&t.hider.scrollHeight+this.scrollbarSize>v&&(this.hasScrollbarRight=!0)}this.topOverlay.adjustElementsSize(),this.inlineStartOverlay.adjustElementsSize(),this.bottomOverlay.adjustElementsSize()}expandHiderVerticallyBy(e){const{wtTable:t}=this;t.hider.style.height=`${parseInt(t.hider.style.height,10)+e}px`}expandHiderHorizontallyBy(e){const{wtTable:t}=this;t.hider.style.width=`${parseInt(t.hider.style.width,10)+e}px`}applyToDOM(){this.wtTable.isVisible()&&(this.topOverlay.applyToDOM(),this.bottomOverlay.clone&&this.bottomOverlay.applyToDOM(),this.inlineStartOverlay.applyToDOM())}getParentOverlay(e){if(!e)return null;const t=[this.topOverlay,this.inlineStartOverlay,this.bottomOverlay,this.topInlineStartCornerOverlay,this.bottomInlineStartCornerOverlay];let i=null;return q(t,r=>{r&&r.clone&&r.clone.wtTable.TABLE.contains(e)&&(i=r.clone)}),i}syncOverlayTableClassNames(){const e=this.wtTable.TABLE,t=[this.topOverlay,this.inlineStartOverlay,this.bottomOverlay,this.topInlineStartCornerOverlay,this.bottomInlineStartCornerOverlay];q(t,i=>{i&&(i.clone.wtTable.TABLE.className=e.className)})}}function B3(n,e,t){return(e=HMe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function HMe(n){var e=$Me(n,"string");return typeof e=="symbol"?e:e+""}function $Me(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class FMe{constructor(e){B3(this,"settings",{}),B3(this,"defaults",Object.freeze(this.getDefaults())),ut(this.defaults,(t,i)=>{if(e[i]!==void 0)this.settings[i]=e[i];else{if(t===void 0)throw new Error(`A required setting "${i}" was not provided`);this.settings[i]=t}})}getDefaults(){return{facade:void 0,table:void 0,isDataViewInstance:!0,externalRowCalculator:!1,stretchH:"none",currentRowClassName:null,currentColumnClassName:null,preventOverflow(){return!1},preventWheel:!1,data:void 0,freezeOverlays:!1,fixedColumnsStart:0,fixedRowsTop:0,fixedRowsBottom:0,shouldRenderInlineStartOverlay:()=>this.getSetting("fixedColumnsStart")>0||this.getSetting("rowHeaders").length>0,shouldRenderTopOverlay:()=>this.getSetting("fixedRowsTop")>0||this.getSetting("columnHeaders").length>0,shouldRenderBottomOverlay:()=>this.getSetting("fixedRowsBottom")>0,minSpareRows:0,rowHeaders(){return[]},columnHeaders(){return[]},totalRows:void 0,totalColumns:void 0,cellRenderer:(e,t,i)=>{const r=this.getSetting("data",e,t);Ku(i,r??"")},columnWidth(){},rowHeight(){},rowHeightByOverlayName(){},defaultRowHeight:23,defaultColumnWidth:50,selections:null,hideBorderOnMouseDownOver:!1,viewportRowCalculatorOverride:null,viewportColumnCalculatorOverride:null,onCellMouseDown:null,onCellContextMenu:null,onCellMouseOver:null,onCellMouseOut:null,onCellMouseUp:null,onCellDblClick:null,onCellCornerMouseDown:null,onCellCornerDblClick:null,beforeDraw:null,onDraw:null,onBeforeRemoveCellClassNames:null,onAfterDrawSelection:null,onBeforeDrawBorders:null,onBeforeViewportScrollHorizontally:e=>e,onBeforeViewportScrollVertically:e=>e,onScrollHorizontally:null,onScrollVertically:null,onBeforeTouchScroll:null,onAfterMomentumScroll:null,onBeforeStretchingColumnWidth:e=>e,onModifyRowHeaderWidth:null,onModifyGetCellCoords:null,onBeforeHighlightingRowHeader:e=>e,onBeforeHighlightingColumnHeader:e=>e,onWindowResize:null,onContainerElementResize:null,renderAllColumns:!1,renderAllRows:!1,groups:!1,rowHeaderWidth:null,columnHeaderHeight:null,headerClassName:null,rtlMode:!1,ariaTags:!0}}update(e,t){return t===void 0?ut(e,(i,r)=>{this.settings[r]=i}):this.settings[e]=t,this}getSetting(e,t,i,r,s){return typeof this.settings[e]=="function"?this.settings[e](t,i,r,s):t!==void 0&&Array.isArray(this.settings[e])?this.settings[e][t]:this.settings[e]}getSettingPure(e){return this.settings[e]}has(e){return!!this.settings[e]}}class EL extends sm{constructor(e,t,i,r){super(e,t,i,r,"master")}alignOverlaysWithTrimmingContainer(){const e=cf(this.wtRootElement),{rootWindow:t}=this.domBindings;if(e===t)this.wtSettings.getSetting("preventOverflow")||(this.holder.style.overflow="visible",this.wtRootElement.style.overflow="visible");else{const i=e.parentElement,r=Ap(e,"height",t),s=Ap(e,"overflow",t),o=this.holder.style,{scrollWidth:a,scrollHeight:l}=e;let c=e.offsetWidth,u=e.offsetHeight;if(i&&["auto","hidden","scroll"].includes(s)){const d=e.cloneNode(!1);d.style.overflow="auto",d.style.position="absolute",e.nextElementSibling?i.insertBefore(d,e.nextElementSibling):i.appendChild(d);const f=parseInt(ul(d,t).height,10);i.removeChild(d),f===0&&(u=0)}u=Math.min(u,l),o.height=r==="auto"?"auto":`${u}px`,c=Math.min(c,a),o.width=`${c}px`,o.overflow="",this.hasTableHeight=o.height==="auto"?!0:u>0,this.hasTableWidth=c>0}this.isTableVisible=lf(this.TABLE)}markOversizedColumnHeaders(){const{wtSettings:e}=this,{wtViewport:t}=this.dataAccessObject,i="master",s=e.getSetting("columnHeaders").length;if(s&&!t.hasOversizedColumnHeadersMarked[i]){const a=e.getSetting("rowHeaders").length,l=this.getRenderedColumnsCount();for(let c=0;c<s;c++)for(let u=-1*a;u<l;u++)this.markIfOversizedColumnHeader(u);t.hasOversizedColumnHeadersMarked[i]=!0}}}qt(EL,pL);qt(EL,cE);class BMe{constructor(e,t,i,r,s){this.dataAccessObject=e,this.wot=e.wot,this.instance=this.wot,this.domBindings=t,this.wtSettings=i,this.wtTable=s,this.oversizedRows=[],this.oversizedColumnHeaders=[],this.hasOversizedColumnHeadersMarked={},this.clientHeight=0,this.containerWidth=NaN,this.rowHeaderWidth=NaN,this.rowsVisibleCalculator=null,this.columnsVisibleCalculator=null,this.rowsCalculatorTypes=new Map([["rendered",()=>this.wtSettings.getSetting("renderAllRows")?new Mxe:new Pxe],["fullyVisible",()=>new vxe],["partiallyVisible",()=>new vY]]),this.columnsCalculatorTypes=new Map([["rendered",()=>this.wtSettings.getSetting("renderAllColumns")?new Exe:new Axe],["fullyVisible",()=>new pxe],["partiallyVisible",()=>new bY]]),this.eventManager=r,this.eventManager.addEventListener(this.domBindings.rootWindow,"resize",()=>{this.clientHeight=this.getWorkspaceHeight()})}getWorkspaceHeight(){const e=this.domBindings.rootDocument,t=this.dataAccessObject.topOverlayTrimmingContainer;let i=0;return t===this.domBindings.rootWindow?i=e.documentElement.clientHeight:i=ni(t)>0&&t.clientHeight>0?t.clientHeight:1/0,i}getWorkspaceWidth(){const{wtSettings:e}=this,{rootDocument:t,rootWindow:i}=this.domBindings,r=this.dataAccessObject.inlineStartOverlayTrimmingContainer,s=t.documentElement.offsetWidth,o=e.getSetting("totalColumns"),a=e.getSetting("preventOverflow"),l=e.getSetting("rtlMode"),c=this.wtTable.TABLE.getBoundingClientRect(),u=l?c.right-s:c.left,h=s-u;let d,f;if(a)return gn(this.wtTable.wtRootElement);if(e.getSetting("freezeOverlays")?d=Math.min(h,s):d=Math.min(this.getContainerFillWidth(),h,s),r===i&&o>0&&this.sumColumnWidths(0,o-1)>d)return t.documentElement.clientWidth;if(r!==i&&(f=Ap(this.dataAccessObject.inlineStartOverlayTrimmingContainer,"overflow",i),f==="scroll"||f==="hidden"||f==="auto"))return Math.max(d,r.clientWidth);const g=e.getSetting("stretchH");return g==="none"||!g?Math.max(d,gn(this.wtTable.TABLE)):d}hasVerticalScroll(){return this.wtTable.hider.offsetHeight>this.getWorkspaceHeight()}hasHorizontalScroll(){return this.wtTable.hider.offsetWidth>this.getWorkspaceWidth()}sumColumnWidths(e,t){let i=0,r=e;for(;r<t;)i+=this.wtTable.getColumnWidth(r),r+=1;return i}getContainerFillWidth(){if(this.containerWidth)return this.containerWidth;const e=this.wtTable.holder,t=this.domBindings.rootDocument.createElement("div");t.style.width="100%",t.style.height="1px",e.appendChild(t);const i=t.offsetWidth;return this.containerWidth=i,e.removeChild(t),i}getWorkspaceOffset(){return xi(this.wtTable.TABLE)}getColumnHeaderHeight(){return this.wtSettings.getSetting("columnHeaders").length?isNaN(this.columnHeaderHeight)&&(this.columnHeaderHeight=ni(this.wtTable.THEAD)):this.columnHeaderHeight=0,this.columnHeaderHeight}getViewportHeight(){let e=this.getWorkspaceHeight();if(e===1/0)return e;const t=this.getColumnHeaderHeight();return t>0&&(e-=t),e}getRowHeaderWidth(){const e=this.wtSettings.getSetting("rowHeaderWidth"),t=this.wtSettings.getSetting("rowHeaders");if(e){this.rowHeaderWidth=0;for(let i=0,r=t.length;i<r;i++)this.rowHeaderWidth+=e[i]||e}if(isNaN(this.rowHeaderWidth))if(t.length){let i=this.wtTable.TABLE.querySelector("TH");this.rowHeaderWidth=0;for(let r=0,s=t.length;r<s;r++)i?(this.rowHeaderWidth+=gn(i),i=i.nextSibling):this.rowHeaderWidth+=50}else this.rowHeaderWidth=0;return this.rowHeaderWidth=this.wtSettings.getSetting("onModifyRowHeaderWidth",this.rowHeaderWidth)||this.rowHeaderWidth,this.rowHeaderWidth}getViewportWidth(){const e=this.getWorkspaceWidth();if(e===1/0)return e;const t=this.getRowHeaderWidth();return t>0?e-t:e}createRowsCalculator(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["rendered","fullyVisible","partiallyVisible"];const{wtSettings:t,wtTable:i}=this;let r=this.getViewportHeight(),s,o;this.rowHeaderWidth=NaN;let a=this.dataAccessObject.topScrollPosition-this.dataAccessObject.topParentOffset;const l=t.getSetting("fixedRowsTop"),c=t.getSetting("fixedRowsBottom"),u=t.getSetting("totalRows");return l&&a>=0&&(o=this.dataAccessObject.topOverlay.sumCellSizes(0,l),a+=o,r-=o),c&&this.dataAccessObject.bottomOverlay.clone&&(o=this.dataAccessObject.bottomOverlay.sumCellSizes(u-c,u),r-=o),i.holder.clientHeight===i.holder.offsetHeight?s=0:s=Pi(this.domBindings.rootDocument),new $xe({calculationTypes:e.map(h=>[h,this.rowsCalculatorTypes.get(h)()]),viewportHeight:r,scrollOffset:a,totalRows:t.getSetting("totalRows"),rowHeightFn:h=>i.getRowHeight(h),overrideFn:t.getSettingPure("viewportRowCalculatorOverride"),horizontalScrollbarHeight:s})}createColumnsCalculator(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["rendered","fullyVisible","partiallyVisible"];const{wtSettings:t,wtTable:i}=this;let r=this.getViewportWidth(),s=Math.abs(this.dataAccessObject.inlineStartScrollPosition)-this.dataAccessObject.inlineStartParentOffset;this.columnHeaderHeight=NaN;const o=t.getSetting("fixedColumnsStart");if(o&&s>=0){const a=this.dataAccessObject.inlineStartOverlay.sumCellSizes(0,o);s+=a,r-=a}return i.holder.clientWidth!==i.holder.offsetWidth&&(r-=Pi(this.domBindings.rootDocument)),new Lxe({calculationTypes:e.map(a=>[a,this.columnsCalculatorTypes.get(a)()]),viewportWidth:r,scrollOffset:s,totalColumns:t.getSetting("totalColumns"),columnWidthFn:a=>i.getColumnWidth(a),overrideFn:t.getSettingPure("viewportColumnCalculatorOverride"),inlineStartOffset:this.dataAccessObject.inlineStartParentOffset})}createCalculators(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const{wtSettings:t}=this,i=this.createRowsCalculator(),r=this.createColumnsCalculator();if(e&&!t.getSetting("renderAllRows")){const s=i.getResultsFor("fullyVisible");e=this.areAllProposedVisibleRowsAlreadyRendered(s)}if(e&&!t.getSetting("renderAllColumns")){const s=r.getResultsFor("fullyVisible");e=this.areAllProposedVisibleColumnsAlreadyRendered(s)}return e||(this.rowsRenderCalculator=i.getResultsFor("rendered"),this.columnsRenderCalculator=r.getResultsFor("rendered")),this.rowsVisibleCalculator=i.getResultsFor("fullyVisible"),this.columnsVisibleCalculator=r.getResultsFor("fullyVisible"),this.rowsPartiallyVisibleCalculator=i.getResultsFor("partiallyVisible"),this.columnsPartiallyVisibleCalculator=r.getResultsFor("partiallyVisible"),e}createVisibleCalculators(){const e=this.createRowsCalculator(["fullyVisible","partiallyVisible"]),t=this.createColumnsCalculator(["fullyVisible","partiallyVisible"]);this.rowsVisibleCalculator=e.getResultsFor("fullyVisible"),this.columnsVisibleCalculator=t.getResultsFor("fullyVisible"),this.rowsPartiallyVisibleCalculator=e.getResultsFor("partiallyVisible"),this.columnsPartiallyVisibleCalculator=t.getResultsFor("partiallyVisible")}areAllProposedVisibleRowsAlreadyRendered(e){if(!this.rowsVisibleCalculator)return!1;let{startRow:t,endRow:i}=e;if(t===null&&i===null){if(!e.isVisibleInTrimmingContainer)return!0;t=this.rowsPartiallyVisibleCalculator.startRow,i=this.rowsPartiallyVisibleCalculator.endRow}const{startRow:r,endRow:s}=this.rowsRenderCalculator;return t<r||t===r&&t>0?!1:!(i>s||i===s&&i<this.wtSettings.getSetting("totalRows")-1)}areAllProposedVisibleColumnsAlreadyRendered(e){if(!this.columnsVisibleCalculator)return!1;let{startColumn:t,endColumn:i}=e;if(t===null&&i===null){if(!e.isVisibleInTrimmingContainer)return!0;t=this.columnsPartiallyVisibleCalculator.startColumn,i=this.columnsPartiallyVisibleCalculator.endColumn}const{startColumn:r,endColumn:s}=this.columnsRenderCalculator;return t<r||t===r&&t>0?!1:!(i>s||i===s&&i<this.wtSettings.getSetting("totalColumns")-1)}resetHasOversizedColumnHeadersMarked(){ut(this.hasOversizedColumnHeadersMarked,(e,t,i)=>{i[t]=void 0})}}class VMe extends fL{constructor(e,t){super(e,new FMe(t));const i=this.wtSettings.getSetting("facade",this);this.wtTable=new EL(this.getTableDao(),i,this.domBindings,this.wtSettings),this.wtViewport=new BMe(this.getViewportDao(),this.domBindings,this.wtSettings,this.eventManager,this.wtTable),this.selectionManager=new SMe(this.wtSettings.getSetting("selections")),this.wtEvent=new RY(i,this.domBindings,this.wtSettings,this.eventManager,this.wtTable,this.selectionManager),this.wtOverlays=new NMe(this,i,this.domBindings,this.wtSettings,this.eventManager,this.wtTable),this.exportSettingsAsClassNames(),this.findOriginalHeaders()}exportSettingsAsClassNames(){const e={rowHeaders:"htRowHeaders",columnHeaders:"htColumnHeaders"},t=[],i=[];ut(e,(r,s)=>{this.wtSettings.getSetting(s).length&&i.push(r),t.push(r)}),Qe(this.wtTable.wtRootElement.parentNode,t),ge(this.wtTable.wtRootElement.parentNode,i)}getOverlayByName(e){var t;if(!MY.includes(e))return null;const i=e.replace(/_([a-z])/g,r=>r[1].toUpperCase());return(t=this.wtOverlays[`${i}Overlay`])!==null&&t!==void 0?t:null}getViewportDao(){const e=this;return{get wot(){return e},get topOverlayTrimmingContainer(){return e.wtOverlays.topOverlay.trimmingContainer},get inlineStartOverlayTrimmingContainer(){return e.wtOverlays.inlineStartOverlay.trimmingContainer},get topScrollPosition(){return e.wtOverlays.topOverlay.getScrollPosition()},get topParentOffset(){return e.wtOverlays.topOverlay.getTableParentOffset()},get inlineStartScrollPosition(){return e.wtOverlays.inlineStartOverlay.getScrollPosition()},get inlineStartParentOffset(){return e.wtOverlays.inlineStartOverlay.getTableParentOffset()},get topOverlay(){return e.wtOverlays.topOverlay},get inlineStartOverlay(){return e.wtOverlays.inlineStartOverlay},get bottomOverlay(){return e.wtOverlays.bottomOverlay}}}}class xL{constructor(e){e instanceof fL?this._wot=e:this._initFromSettings(e)}_initFromSettings(e){e.facade=t=>{const i=new xL(t);return()=>i},this._wot=new VMe(e.table,e)}get guid(){return this._wot.guid}get rootDocument(){return this._wot.domBindings.rootDocument}get rootWindow(){return this._wot.domBindings.rootWindow}get wtSettings(){return this._wot.wtSettings}get cloneSource(){return this._wot.cloneSource}get cloneOverlay(){return this._wot.cloneOverlay}get selectionManager(){return this._wot.selectionManager}get wtViewport(){return this._wot.wtViewport}get wtOverlays(){return this._wot.wtOverlays}get wtTable(){return this._wot.wtTable}get wtEvent(){return this._wot.wtEvent}get wtScroll(){return this._wot.wtScroll}get drawn(){return this._wot.drawn}set drawn(e){this._wot.drawn=e}get drawInterrupted(){return this._wot.drawInterrupted}set drawInterrupted(e){this._wot.drawInterrupted=e}get lastMouseOver(){return this._wot.lastMouseOver}set lastMouseOver(e){this._wot.lastMouseOver=e}get momentumScrolling(){return this._wot.momentumScrolling}set momentumScrolling(e){this._wot.momentumScrolling=e}get touchApplied(){return this._wot.touchApplied}set touchApplied(e){this._wot.touchApplied=e}get domBindings(){return this._wot.domBindings}get eventListeners(){return this._wot.eventListeners}set eventListeners(e){this._wot.eventListeners=e}get eventManager(){return this._wot.eventManager}createCellCoords(e,t){return this._wot.createCellCoords(e,t)}createCellRange(e,t,i){return this._wot.createCellRange(e,t,i)}draw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return this._wot.draw(e),this}getCell(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this._wot.getCell(e,t)}scrollViewport(e,t,i,r,s){return this._wot.scrollViewport(e,t,i,r,s)}scrollViewportHorizontally(e,t,i){return this._wot.scrollViewportHorizontally(e,t,i)}scrollViewportVertically(e,t,i){return this._wot.scrollViewportVertically(e,t,i)}getViewport(){return this._wot.getViewport()}getOverlayName(){return this._wot.cloneOverlay?this._wot.cloneOverlay.type:"master"}getOverlayByName(e){return this._wot.getOverlayByName(e)}exportSettingsAsClassNames(){return this._wot.exportSettingsAsClassNames()}update(e,t){return this._wot.wtSettings.update(e,t),this}getSetting(e,t,i,r,s){return this._wot.wtSettings.getSetting(e,t,i,r,s)}hasSetting(e){return this._wot.wtSettings.hasSetting(e)}destroy(){this._wot.destroy()}}function V3(n){let{isShiftKey:e,isLeftClick:t,isRightClick:i,coords:r,selection:s,controller:o,cellCoordsFactory:a}=n;const l=s.isSelected()?s.getSelectedRange().current():null,c=s.isSelectedByCorner(),u=s.isSelectedByRowHeader();if(s.markSource("mouse"),e&&l)r.row>=0&&r.col>=0&&!o.cell?s.setRangeEnd(r):(c||u)&&r.row>=0&&r.col>=0&&!o.cell?s.setRangeEnd(a(r.row,r.col)):c&&r.row<0&&!o.column?s.setRangeEnd(a(l.to.row,r.col)):u&&r.col<0&&!o.row?s.setRangeEnd(a(r.row,l.to.col)):(!c&&!u&&r.col<0||c&&r.col<0)&&!o.row?s.selectRows(Math.max(l.from.row,0),r.row,r.col):(!c&&!u&&r.row<0||u&&r.row<0)&&!o.column&&s.selectColumns(Math.max(l.from.col,0),r.col,r.row);else{const h=!s.inInSelection(r),d=t||i&&h;r.row<0&&r.col>=0&&!o.column?d&&s.selectColumns(r.col,r.col,r.row):r.col<0&&r.row>=0&&!o.row?d&&s.selectRows(r.row,r.row,r.col):r.col>=0&&r.row>=0&&!o.cell?d&&s.setRangeStart(r):r.col<0&&r.row<0&&s.selectAll(!0,!0,{disableHeadersHighlight:!0,focusPosition:{row:0,col:0}})}s.markEndSource()}function WMe(n){let{isLeftClick:e,coords:t,selection:i,controller:r,cellCoordsFactory:s}=n;if(!e)return;const o=i.isSelectedByRowHeader(),a=i.isSelectedByColumnHeader(),l=i.tableProps.countCols(),c=i.tableProps.countRows();i.markSource("mouse"),a&&!r.column?i.setRangeEnd(s(c-1,t.col)):o&&!r.row?i.setRangeEnd(s(t.row,l-1)):r.cell||i.setRangeEnd(t),i.markEndSource()}const jMe=new Map([["mousedown",V3],["mouseover",WMe],["touchstart",V3]]);function W3(n,e){let{coords:t,selection:i,controller:r,cellCoordsFactory:s}=e;jMe.get(n.type)({coords:t,selection:i,controller:r,cellCoordsFactory:s,isShiftKey:n.shiftKey,isLeftClick:sE(n)||n.type==="touchstart",isRightClick:qu(n)})}const DY=new WeakMap,TL=Symbol("rootInstance");function zMe(n){DY.set(n,!0)}function UMe(n){return n===TL}function DS(n){return DY.has(n)}function GMe(n,e){LY(n,e),e.add(n)}function Ph(n,e,t){LY(n,e),e.set(n,t)}function LY(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Yc(n,e,t){return(e=YMe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function YMe(n){var e=KMe(n,"string");return typeof e=="symbol"?e:e+""}function KMe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Oi(n,e){return n.get(Ew(n,e))}function $s(n,e,t){return n.set(Ew(n,e),t),t}function Ew(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var $T=new WeakMap,U0=new WeakMap,G0=new WeakMap,kl=new WeakMap,Ao=new WeakMap,FT=new WeakMap,BT=new WeakMap,LS=new WeakSet;class qMe{constructor(e){GMe(this,LS),Yc(this,"hot",void 0),Yc(this,"eventManager",void 0),Yc(this,"settings",void 0),Yc(this,"THEAD",void 0),Yc(this,"TBODY",void 0),Yc(this,"_wt",void 0),Yc(this,"activeWt",void 0),Ph(this,$T,0),Ph(this,U0,0),Yc(this,"postponedAdjustElementsSize",!1),Ph(this,G0,!1),Ph(this,kl,void 0),Ph(this,Ao,void 0),Ph(this,FT,0),Ph(this,BT,0),this.hot=e,this.eventManager=new uo(this.hot),this.settings=this.hot.getSettings(),this.createElements(),this.registerEvents(),this.initializeWalkontable()}render(){this.hot.isRenderSuspended()||(this.hot.runHooks("beforeRender",this.hot.forceFullRender),this.postponedAdjustElementsSize&&(this.postponedAdjustElementsSize=!1,this.adjustElementsSize(!0)),this._wt.draw(!this.hot.forceFullRender),this.hot.runHooks("afterRender",this.hot.forceFullRender),this.hot.forceFullRender=!1,this.hot.renderCall=!1)}adjustElementsSize(){this.hot.isRenderSuspended()?this.postponedAdjustElementsSize=!0:this._wt.wtOverlays.adjustElementsSize()}getCellAtCoords(e,t){const i=this._wt.getCell(e,t);return i<0?null:i}scrollViewport(e,t,i,r,s){return this._wt.scrollViewport(e,t,i,r,s)}scrollViewportHorizontally(e,t,i){return this._wt.scrollViewportHorizontally(e,t,i)}scrollViewportVertically(e,t,i){return this._wt.scrollViewportVertically(e,t,i)}createElements(){const{rootElement:e,rootDocument:t}=this.hot,i=e.getAttribute("style");i&&e.setAttribute("data-originalstyle",i),ge(e,"handsontable"),$s(Ao,this,t.createElement("TABLE")),ge(Oi(Ao,this),"htCore"),this.hot.getSettings().tableClassName&&ge(Oi(Ao,this),this.hot.getSettings().tableClassName),this.settings.ariaTags&&(ze(Oi(Ao,this),[qa()]),ze(e,[sRe(),S9(-1),X1(this.hot.countCols()),wRe()])),this.THEAD=t.createElement("THEAD"),Oi(Ao,this).appendChild(this.THEAD),this.TBODY=t.createElement("TBODY"),Oi(Ao,this).appendChild(this.TBODY),this.hot.table=Oi(Ao,this),this.hot.container.insertBefore(Oi(Ao,this),this.hot.container.firstChild)}registerEvents(){const{rootElement:e,rootDocument:t,selection:i,rootWindow:r}=this.hot,s=t.documentElement;this.eventManager.addEventListener(e,"mousedown",a=>{$s(G0,this,!0),this.isTextSelectionAllowed(a.target)||(yI(r),a.preventDefault(),r.focus())}),this.eventManager.addEventListener(e,"mouseup",()=>{$s(G0,this,!1)}),this.eventManager.addEventListener(e,"mousemove",a=>{Oi(G0,this)&&!this.isTextSelectionAllowed(a.target)&&(this.settings.fragmentSelection&&yI(r),a.preventDefault())}),this.eventManager.addEventListener(s,"keyup",a=>{i.isInProgress()&&!a.shiftKey&&i.finish()}),this.eventManager.addEventListener(s,"mouseup",a=>{i.isInProgress()&&sE(a)&&i.finish(),$s(kl,this,!1);const l=eE(t.activeElement);Pv(t.activeElement)&&!l||(l||!i.isSelected()&&!i.isSelectedByAnyHeader()&&!e.contains(a.target)&&!qu(a))&&this.hot.unlisten()}),this.eventManager.addEventListener(s,"contextmenu",a=>{i.isInProgress()&&qu(a)&&(i.finish(),$s(kl,this,!1))}),this.eventManager.addEventListener(s,"touchend",()=>{i.isInProgress()&&i.finish(),$s(kl,this,!1)}),this.eventManager.addEventListener(s,"mousedown",a=>{const l=a.target,c=a.x||a.clientX,u=a.y||a.clientY;let h=a.target;if(Oi(kl,this)||!e||!this.hot.view)return;const{holder:d}=this._wt.wtTable;if(h===d){const g=Pi(t);if(t.elementFromPoint(c+g,u)!==d||t.elementFromPoint(c,u+g)!==d)return}else for(;h!==s;){if(h===null){if(a.isTargetWebComponent)break;return}if(h===e)return;h=h.parentNode}(typeof this.settings.outsideClickDeselects=="function"?this.settings.outsideClickDeselects(l):this.settings.outsideClickDeselects)?this.hot.deselectCell():this.hot.destroyEditor(!1,!1)});let o=af(r);for(;o!==null;)this.eventManager.addEventListener(o.document.documentElement,"click",()=>{this.hot.unlisten()}),o=af(o);this.eventManager.addEventListener(Oi(Ao,this),"selectstart",a=>{this.settings.fragmentSelection||Pv(a.target)||a.preventDefault()})}translateFromRenderableToVisualCoords(e){let{row:t,col:i}=e;return this.hot._createCellCoords(...this.translateFromRenderableToVisualIndex(t,i))}translateFromRenderableToVisualIndex(e,t){let i=e>=0?this.hot.rowIndexMapper.getVisualFromRenderableIndex(e):e,r=t>=0?this.hot.columnIndexMapper.getVisualFromRenderableIndex(t):t;return i===null&&(i=e),r===null&&(r=t),[i,r]}countRenderableIndexes(e,t){const i=Math.min(e.getNotTrimmedIndexesLength(),t),r=e.getNearestNotHiddenIndex(i-1,-1);return r===null?0:e.getRenderableFromVisualIndex(r)+1}countRenderableColumns(){return this.countRenderableIndexes(this.hot.columnIndexMapper,this.settings.maxCols)}countRenderableRows(){return this.countRenderableIndexes(this.hot.rowIndexMapper,this.settings.maxRows)}countNotHiddenRowIndexes(e,t){return this.countNotHiddenIndexes(e,t,this.hot.rowIndexMapper,this.countRenderableRows())}countNotHiddenColumnIndexes(e,t){return this.countNotHiddenIndexes(e,t,this.hot.columnIndexMapper,this.countRenderableColumns())}countNotHiddenIndexes(e,t,i,r){if(isNaN(e)||e<0)return 0;const s=i.getNearestNotHiddenIndex(e,t),o=i.getRenderableFromVisualIndex(s);if(!Number.isInteger(o))return 0;let a=0;return t<0?a=o+1:t>0&&(a=r-o),a}countNotHiddenFixedColumnsStart(){const e=this.hot.countCols(),t=Math.min(parseInt(this.settings.fixedColumnsStart,10),e)-1;return this.countNotHiddenColumnIndexes(t,-1)}countNotHiddenFixedRowsTop(){const e=this.hot.countRows(),t=Math.min(parseInt(this.settings.fixedRowsTop,10),e)-1;return this.countNotHiddenRowIndexes(t,-1)}countNotHiddenFixedRowsBottom(){const e=this.hot.countRows(),t=Math.max(e-parseInt(this.settings.fixedRowsBottom,10),0);return this.countNotHiddenRowIndexes(t,1)}countRenderableColumnsInRange(e,t){let i=0;for(let r=e;r<=t;r++)this.hot.columnIndexMapper.getRenderableFromVisualIndex(r)!==null&&(i+=1);return i}countRenderableRowsInRange(e,t){let i=0;for(let r=e;r<=t;r++)this.hot.rowIndexMapper.getRenderableFromVisualIndex(r)!==null&&(i+=1);return i}isMainTableNotFullyCoveredByOverlays(){const e=this.countNotHiddenFixedRowsTop()+this.countNotHiddenFixedRowsBottom(),t=this.countNotHiddenFixedColumnsStart();return this.hot.countRenderedRows()>e&&this.hot.countRenderedCols()>t}initializeWalkontable(){const e={ariaTags:this.settings.ariaTags,rtlMode:this.hot.isRtl(),externalRowCalculator:this.hot.getPlugin("autoRowSize")&&this.hot.getPlugin("autoRowSize").isEnabled(),table:Oi(Ao,this),isDataViewInstance:()=>DS(this.hot),preventOverflow:()=>this.settings.preventOverflow,preventWheel:()=>this.settings.preventWheel,stretchH:()=>this.settings.stretchH,data:(s,o)=>this.hot.getDataAtCell(...this.translateFromRenderableToVisualIndex(s,o)),totalRows:()=>this.countRenderableRows(),totalColumns:()=>this.countRenderableColumns(),fixedColumnsStart:()=>this.countNotHiddenFixedColumnsStart(),fixedRowsTop:()=>this.countNotHiddenFixedRowsTop(),fixedRowsBottom:()=>this.countNotHiddenFixedRowsBottom(),shouldRenderInlineStartOverlay:()=>this.settings.fixedColumnsStart>0||e.rowHeaders().length>0,shouldRenderTopOverlay:()=>this.settings.fixedRowsTop>0||e.columnHeaders().length>0,shouldRenderBottomOverlay:()=>this.settings.fixedRowsBottom>0,minSpareRows:()=>this.settings.minSpareRows,renderAllRows:this.settings.renderAllRows,renderAllColumns:this.settings.renderAllColumns,rowHeaders:()=>{const s=[];return this.hot.hasRowHeaders()&&s.push((o,a)=>{const l=o>=0?this.hot.rowIndexMapper.getVisualFromRenderableIndex(o):o;this.appendRowHeader(l,a)}),this.hot.runHooks("afterGetRowHeaderRenderers",s),$s(U0,this,s.length),this.hot.getSettings().ariaTags&&Ew(LS,this,NY).call(this)===this.hot.countCols()&&Ew(LS,this,XMe).call(this,Oi(U0,this)),s},columnHeaders:()=>{const s=[];return this.hot.hasColHeaders()&&s.push((o,a)=>{const l=o>=0?this.hot.columnIndexMapper.getVisualFromRenderableIndex(o):o;this.appendColHeader(l,a)}),this.hot.runHooks("afterGetColumnHeaderRenderers",s),$s($T,this,s.length),s},columnWidth:s=>{const o=this.hot.columnIndexMapper.getVisualFromRenderableIndex(s);return this.hot.getColWidth(o===null?s:o)},rowHeight:s=>{const o=this.hot.rowIndexMapper.getVisualFromRenderableIndex(s);return this.hot.getRowHeight(o===null?s:o)},rowHeightByOverlayName:(s,o)=>{const a=this.hot.rowIndexMapper.getVisualFromRenderableIndex(s),l=a===null?s:a;return this.hot.runHooks("modifyRowHeightByOverlayName",this.hot.getRowHeight(l),l,o)},cellRenderer:(s,o,a)=>{const[l,c]=this.translateFromRenderableToVisualIndex(s,o),u=this.hot.runHooks("modifyGetCellCoords",l,c);let h=l,d=c;Array.isArray(u)&&([h,d]=u);const f=this.hot.getCellMeta(h,d),g=this.hot.colToProp(d);let p=this.hot.getDataAtRowProp(h,g);this.hot.hasHook("beforeValueRender")&&(p=this.hot.runHooks("beforeValueRender",p,f)),this.hot.runHooks("beforeRenderer",a,l,c,g,p,f),this.hot.getCellRenderer(f)(this.hot,a,l,c,g,p,f),this.hot.runHooks("afterRenderer",a,l,c,g,p,f)},selections:this.hot.selection.highlight,hideBorderOnMouseDownOver:()=>this.settings.fragmentSelection,onWindowResize:()=>{this.hot&&!this.hot.isDestroyed&&this.hot.refreshDimensions()},onContainerElementResize:()=>{this.hot&&!this.hot.isDestroyed&&lf(this.hot.rootElement)&&this.hot.refreshDimensions()},onCellMouseDown:(s,o,a,l)=>{const c=this.translateFromRenderableToVisualCoords(o),u={row:!1,column:!1,cell:!1};this.hot.listen(),this.activeWt=l,$s(kl,this,!0),this.hot.runHooks("beforeOnCellMouseDown",s,c,a,u),!vu(s)&&(W3(s,{coords:c,selection:this.hot.selection,controller:u,cellCoordsFactory:(h,d)=>this.hot._createCellCoords(h,d)}),this.hot.runHooks("afterOnCellMouseDown",s,c,a),this.activeWt=this._wt)},onCellContextMenu:(s,o,a,l)=>{const c=this.translateFromRenderableToVisualCoords(o);this.activeWt=l,$s(kl,this,!1),this.hot.selection.isInProgress()&&this.hot.selection.finish(),this.hot.runHooks("beforeOnCellContextMenu",s,c,a),!vu(s)&&(this.hot.runHooks("afterOnCellContextMenu",s,c,a),this.activeWt=this._wt)},onCellMouseOut:(s,o,a,l)=>{const c=this.translateFromRenderableToVisualCoords(o);this.activeWt=l,this.hot.runHooks("beforeOnCellMouseOut",s,c,a),!vu(s)&&(this.hot.runHooks("afterOnCellMouseOut",s,c,a),this.activeWt=this._wt)},onCellMouseOver:(s,o,a,l)=>{const c=this.translateFromRenderableToVisualCoords(o),u={row:!1,column:!1,cell:!1};this.activeWt=l,this.hot.runHooks("beforeOnCellMouseOver",s,c,a,u),!vu(s)&&(Oi(kl,this)&&W3(s,{coords:c,selection:this.hot.selection,controller:u,cellCoordsFactory:(h,d)=>this.hot._createCellCoords(h,d)}),this.hot.runHooks("afterOnCellMouseOver",s,c,a),this.activeWt=this._wt)},onCellMouseUp:(s,o,a,l)=>{const c=this.translateFromRenderableToVisualCoords(o);this.activeWt=l,this.hot.runHooks("beforeOnCellMouseUp",s,c,a),!(vu(s)||this.hot.isDestroyed)&&(this.hot.runHooks("afterOnCellMouseUp",s,c,a),this.activeWt=this._wt)},onCellCornerMouseDown:s=>{s.preventDefault(),this.hot.runHooks("afterOnCellCornerMouseDown",s)},onCellCornerDblClick:s=>{s.preventDefault(),this.hot.runHooks("afterOnCellCornerDblClick",s)},beforeDraw:(s,o)=>this.beforeRender(s,o),onDraw:s=>this.afterRender(s),onBeforeViewportScrollVertically:s=>{const o=this.hot.rowIndexMapper,a=s<0;let l=s;return!a&&(l=o.getVisualFromRenderableIndex(s),l===null)?s:(l=this.hot.runHooks("beforeViewportScrollVertically",l),this.hot.runHooks("beforeViewportScroll"),a?l:o.getRenderableFromVisualIndex(l))},onBeforeViewportScrollHorizontally:s=>{const o=this.hot.columnIndexMapper,a=s<0;let l=s;return!a&&(l=o.getVisualFromRenderableIndex(s),l===null)?s:(l=this.hot.runHooks("beforeViewportScrollHorizontally",l),this.hot.runHooks("beforeViewportScroll"),a?l:o.getRenderableFromVisualIndex(l))},onScrollVertically:()=>{this.hot.runHooks("afterScrollVertically"),this.hot.runHooks("afterScroll")},onScrollHorizontally:()=>{this.hot.runHooks("afterScrollHorizontally"),this.hot.runHooks("afterScroll")},onBeforeRemoveCellClassNames:()=>this.hot.runHooks("beforeRemoveCellClassNames"),onBeforeHighlightingRowHeader:(s,o,a)=>{const l=this.hot.rowIndexMapper,c=s<0;let u=s;c||(u=l.getVisualFromRenderableIndex(s));const h=this.hot.runHooks("beforeHighlightingRowHeader",u,o,a);return c?h:l.getRenderableFromVisualIndex(l.getNearestNotHiddenIndex(h,1))},onBeforeHighlightingColumnHeader:(s,o,a)=>{const l=this.hot.columnIndexMapper,c=s<0;let u=s;c||(u=l.getVisualFromRenderableIndex(s));const h=this.hot.runHooks("beforeHighlightingColumnHeader",u,o,a);return c?h:l.getRenderableFromVisualIndex(l.getNearestNotHiddenIndex(h,1))},onAfterDrawSelection:(s,o,a)=>{let l;const[c,u]=this.translateFromRenderableToVisualIndex(s,o),h=this.hot.selection.getSelectedRange();if(h.size()>0){const f=h.peekByIndex(a??0);l=[f.from.row,f.from.col,f.to.row,f.to.col]}return this.hot.runHooks("afterDrawSelection",c,u,l,a)},onBeforeDrawBorders:(s,o)=>{const[a,l,c,u]=s,h=[this.hot.rowIndexMapper.getVisualFromRenderableIndex(a),this.hot.columnIndexMapper.getVisualFromRenderableIndex(l),this.hot.rowIndexMapper.getVisualFromRenderableIndex(c),this.hot.columnIndexMapper.getVisualFromRenderableIndex(u)];return this.hot.runHooks("beforeDrawBorders",h,o)},onBeforeTouchScroll:()=>this.hot.runHooks("beforeTouchScroll"),onAfterMomentumScroll:()=>this.hot.runHooks("afterMomentumScroll"),onBeforeStretchingColumnWidth:(s,o)=>{const a=this.hot.columnIndexMapper.getVisualFromRenderableIndex(o);return this.hot.runHooks("beforeStretchingColumnWidth",s,a)},onModifyRowHeaderWidth:s=>this.hot.runHooks("modifyRowHeaderWidth",s),onModifyGetCellCoords:(s,o,a)=>{const l=this.hot.rowIndexMapper,c=this.hot.columnIndexMapper,u=o>=0?c.getVisualFromRenderableIndex(o):o,h=s>=0?l.getVisualFromRenderableIndex(s):s,d=this.hot.runHooks("modifyGetCellCoords",h,u,a);if(Array.isArray(d)){const[f,g,p,m]=d;return[f>=0?l.getRenderableFromVisualIndex(l.getNearestNotHiddenIndex(f,1)):f,g>=0?c.getRenderableFromVisualIndex(c.getNearestNotHiddenIndex(g,1)):g,p>=0?l.getRenderableFromVisualIndex(l.getNearestNotHiddenIndex(p,-1)):p,m>=0?c.getRenderableFromVisualIndex(c.getNearestNotHiddenIndex(m,-1)):m]}},viewportRowCalculatorOverride:s=>{let o=this.settings.viewportRowRenderingOffset;if(o==="auto"&&this.settings.fixedRowsTop&&(o=10),o>0||o==="auto"){const a=this.countRenderableRows(),l=s.startRow,c=s.endRow;if(typeof o=="number")s.startRow=Math.max(l-o,0),s.endRow=Math.min(c+o,a-1);else if(o==="auto"){const u=Math.ceil(c/a*12);s.startRow=Math.max(l-u,0),s.endRow=Math.min(c+u,a-1)}}this.hot.runHooks("afterViewportRowCalculatorOverride",s)},viewportColumnCalculatorOverride:s=>{let o=this.settings.viewportColumnRenderingOffset;if(o==="auto"&&this.settings.fixedColumnsStart&&(o=10),o>0||o==="auto"){const a=this.countRenderableColumns(),l=s.startColumn,c=s.endColumn;if(typeof o=="number"&&(s.startColumn=Math.max(l-o,0),s.endColumn=Math.min(c+o,a-1)),o==="auto"){const u=Math.ceil(c/a*6);s.startColumn=Math.max(l-u,0),s.endColumn=Math.min(c+u,a-1)}}this.hot.runHooks("afterViewportColumnCalculatorOverride",s)},rowHeaderWidth:()=>this.settings.rowHeaderWidth,columnHeaderHeight:()=>{const s=this.hot.runHooks("modifyColumnHeaderHeight");return this.settings.columnHeaderHeight||s}};this.hot.runHooks("beforeInitWalkontable",e),this._wt=new xL(e),this.activeWt=this._wt;const t=this._wt.wtTable.spreader,{width:i,height:r}=this.hot.rootElement.getBoundingClientRect();this.setLastSize(i,r),this.eventManager.addEventListener(t,"mousedown",s=>{s.target===t&&s.which===3&&s.stopPropagation()}),this.eventManager.addEventListener(t,"contextmenu",s=>{s.target===t&&s.which===3&&s.stopPropagation()}),this.eventManager.addEventListener(this.hot.rootDocument.documentElement,"click",()=>{this.settings.observeDOMVisibility&&this._wt.drawInterrupted&&(this.hot.forceFullRender=!0,this.render())})}isTextSelectionAllowed(e){if(Pv(e))return!0;const t=Nu(e,this._wt.wtTable.spreader);return!!(this.settings.fragmentSelection===!0&&t||this.settings.fragmentSelection==="cell"&&this.isSelectedOnlyCell()&&t||!this.settings.fragmentSelection&&this.isCellEdited()&&this.isSelectedOnlyCell())}isMouseDown(){return Oi(kl,this)}isSelectedOnlyCell(){var e,t;return(e=(t=this.hot.getSelectedRangeLast())===null||t===void 0?void 0:t.isSingleCell())!==null&&e!==void 0?e:!1}isCellEdited(){const e=this.hot.getActiveEditor();return e&&e.isOpened()}beforeRender(e,t){e&&this.hot.runHooks("beforeViewRender",this.hot.forceFullRender,t)}afterRender(e){e&&this.hot.runHooks("afterViewRender",this.hot.forceFullRender)}appendRowHeader(e,t){if(t.firstChild){const i=t.firstChild;if(!Ue(i,"relative")){ra(t),this.appendRowHeader(e,t);return}this.updateCellHeader(i.querySelector(".rowHeader"),e,this.hot.getRowHeader)}else{const{rootDocument:i,getRowHeader:r}=this.hot,s=i.createElement("div"),o=i.createElement("span");s.className="relative",o.className="rowHeader",this.updateCellHeader(o,e,r),s.appendChild(o),t.appendChild(s)}this.hot.runHooks("afterGetRowHeader",e,t)}appendColHeader(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hot.getColHeader,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const s=()=>{const o=e>=0?this.hot.getColumnMeta(e).headerClassName:null;return o?o.split(" "):[]};if(t.firstChild){const o=t.firstChild;Ue(o,"relative")?(this.updateCellHeader(o.querySelector(".colHeader"),e,i,r),o.className="",ge(o,["relative",...s()])):(ra(t),this.appendColHeader(e,t,i,r))}else{const{rootDocument:o}=this.hot,a=o.createElement("div"),l=o.createElement("span"),c=s();a.classList.add("relative",...c),l.className="colHeader",this.settings.ariaTags&&(ze(a,...qa()),ze(l,...qa())),this.updateCellHeader(l,e,i,r),a.appendChild(l),t.appendChild(a)}this.hot.runHooks("afterGetColHeader",e,t,r)}updateCellHeader(e,t,i){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=t;const o=this._wt.wtOverlays.getParentOverlay(e)||this._wt;e.parentNode&&(Ue(e,"colHeader")?s=o.wtTable.columnFilter.sourceToRendered(t):Ue(e,"rowHeader")&&(s=o.wtTable.rowFilter.sourceToRendered(t))),s>-1?kf(e,i(t,r)):(Ku(e," "),ge(e,"cornerHeader"))}maximumVisibleElementWidth(e){const i=this._wt.wtViewport.getWorkspaceWidth()-e;return i>0?i:0}maximumVisibleElementHeight(e){const i=this._wt.wtViewport.getWorkspaceHeight()-e;return i>0?i:0}setLastSize(e,t){$s(FT,this,e),$s(BT,this,t)}getLastSize(){return{width:Oi(FT,this),height:Oi(BT,this)}}getFirstRenderedVisibleRow(){return this._wt.wtViewport.rowsRenderCalculator?this.hot.rowIndexMapper.getNearestNotHiddenIndex(this._wt.wtTable.getFirstRenderedRow(),1):null}getLastRenderedVisibleRow(){return this._wt.wtViewport.rowsRenderCalculator?this.hot.rowIndexMapper.getNearestNotHiddenIndex(this._wt.wtTable.getLastRenderedRow(),-1):null}getFirstRenderedVisibleColumn(){return this._wt.wtViewport.columnsRenderCalculator?this.hot.columnIndexMapper.getNearestNotHiddenIndex(this._wt.wtTable.getFirstRenderedColumn(),1):null}getLastRenderedVisibleColumn(){return this._wt.wtViewport.columnsRenderCalculator?this.hot.columnIndexMapper.getNearestNotHiddenIndex(this._wt.wtTable.getLastRenderedColumn(),-1):null}getFirstFullyVisibleRow(){return this.hot.rowIndexMapper.getVisualFromRenderableIndex(this._wt.wtScroll.getFirstVisibleRow())}getLastFullyVisibleRow(){return this.hot.rowIndexMapper.getVisualFromRenderableIndex(this._wt.wtScroll.getLastVisibleRow())}getFirstFullyVisibleColumn(){return this.hot.columnIndexMapper.getVisualFromRenderableIndex(this._wt.wtScroll.getFirstVisibleColumn())}getLastFullyVisibleColumn(){return this.hot.columnIndexMapper.getVisualFromRenderableIndex(this._wt.wtScroll.getLastVisibleColumn())}getFirstPartiallyVisibleRow(){return this.hot.rowIndexMapper.getVisualFromRenderableIndex(this._wt.wtScroll.getFirstPartiallyVisibleRow())}getLastPartiallyVisibleRow(){return this.hot.rowIndexMapper.getVisualFromRenderableIndex(this._wt.wtScroll.getLastPartiallyVisibleRow())}getFirstPartiallyVisibleColumn(){return this.hot.columnIndexMapper.getVisualFromRenderableIndex(this._wt.wtScroll.getFirstPartiallyVisibleColumn())}getLastPartiallyVisibleColumn(){return this.hot.columnIndexMapper.getVisualFromRenderableIndex(this._wt.wtScroll.getLastPartiallyVisibleColumn())}getColumnHeadersCount(){return Oi($T,this)}getRowHeadersCount(){return Oi(U0,this)}getViewportWidth(){return this._wt.wtViewport.getViewportWidth()}getWorkspaceWidth(){return this._wt.wtViewport.getWorkspaceWidth()}getViewportHeight(){return this._wt.wtViewport.getViewportHeight()}getWorkspaceHeight(){return this._wt.wtViewport.getWorkspaceHeight()}getElementOverlayName(e){var t;return((t=this._wt.wtOverlays.getParentOverlay(e))!==null&&t!==void 0?t:this._wt).wtTable.name}getOverlayByName(e){return this._wt.getOverlayByName(e)}isVisible(){return this._wt.wtTable.isVisible()}destroy(){this._wt.destroy(),this.eventManager.destroy()}}function NY(){return parseInt(this.hot.rootElement.getAttribute(X1()[0]),10)}function XMe(n){const e=Ew(LS,this,NY).call(this)+n;ze(this.hot.rootElement,...X1(e))}const HY="ABCDEFGHIJKLMNOPQRSTUVWXYZ",kI=HY.length;function uE(n){let e=n+1,t="",i;for(;e>0;)i=(e-1)%kI,t=String.fromCharCode(65+i)+t,e=parseInt((e-i)/kI,10);return t}function ZMe(n){let e=0;if(n)for(let t=0,i=n.length-1;t<n.length;t+=1,i-=1)e+=kI**i*(HY.indexOf(n[t])+1);return e-=1,e}function QMe(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:4;const t=[];let i,r;for(i=0;i<n;i++){const s=[];for(r=0;r<e;r++)s.push(uE(r)+(i+1));t.push(s)}return t}function JMe(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:4;const t=[];let i,r;for(i=0;i<n;i++){const s={};for(r=0;r<e;r++)s[`prop${r}`]=uE(r)+(i+1);t.push(s)}return t}function eAe(n,e){const t=[];let i;for(let r=0;r<n;r++){i=[];for(let s=0;s<e;s++)i.push("");t.push(i)}return t}function ML(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=n;const i=[];return(!Array.isArray(n)||!Array.isArray(n[0]))&&(t=[n]),t.forEach((r,s)=>{Array.isArray(r)?r.forEach((o,a)=>{i.push([s+e,a,o])}):Object.keys(r).forEach(o=>{i.push([s+e,o,r[o]])})}),i}function AL(n){let e=0;return Array.isArray(n)&&(n[0]&&Array.isArray(n[0])?e=n[0].length:n[0]&&ct(n[0])&&(e=iE(n[0]))),e}function $Y(n){return!!(Array.isArray(n)&&n.length&&n.every(e=>Array.isArray(e)))}function FY(n){return!!(Array.isArray(n)&&n.length&&n.every(e=>typeof e=="object"&&!Array.isArray(e)&&e!==null))}const tAe=Object.freeze(Object.defineProperty({__proto__:null,countFirstRowKeys:AL,createEmptySpreadsheetData:eAe,createSpreadsheetData:QMe,createSpreadsheetObjectData:JMe,dataRowToChangesArray:ML,isArrayOfArrays:$Y,isArrayOfObjects:FY,spreadsheetColumnIndex:ZMe,spreadsheetColumnLabel:uE},Symbol.toStringTag,{value:"Module"}));function Ym(n,e,t){return(e=nAe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function nAe(n){var e=iAe(n,"string");return typeof e=="symbol"?e:e+""}function iAe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class rAe{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];Ym(this,"hot",void 0),Ym(this,"data",void 0),Ym(this,"dataType","array"),Ym(this,"colToProp",()=>{}),Ym(this,"propToCol",()=>{}),this.hot=e,this.data=t}modifyRowData(e){let t;return this.hot.hasHook("modifyRowData")&&(t=this.hot.runHooks("modifyRowData",e)),t!==void 0&&!Number.isInteger(t)?t:this.data[e]}getData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return!this.data||this.data.length===0?this.data:this.getByRange(null,null,e)}setData(e){this.data=e}getAtColumn(e){const t=[];return q(this.data,(i,r)=>{const s=this.getAtCell(r,e);t.push(s)}),t}getAtRow(e,t,i){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const s=t===void 0&&i===void 0,{dataDotNotation:o}=this.hot.getSettings();let a=null,l=null;if(a=this.modifyRowData(e),Array.isArray(a))l=[],s?a.forEach((c,u)=>{l[u]=this.getAtPhysicalCell(e,u,a)}):$e(t,i,c=>{l[c-t]=this.getAtPhysicalCell(e,c,a)});else if(ct(a)||un(a))if(r?l=[]:l={},!s||r){const u=this.countFirstRowKeys()-1;$e(0,u,h=>{const d=this.colToProp(h);if(h>=(t||0)&&h<=(i||u)&&!Number.isInteger(d)){const f=this.getAtPhysicalCell(e,d,a);r?l.push(f):o?PS(l,d,f):l[d]=f}})}else ut(a,(c,u)=>{const h=this.getAtPhysicalCell(e,u,a);o?PS(l,u,h):l[u]=h});return l}setAtCell(e,t,i){if(!(e>=this.countRows()||t>=this.countFirstRowKeys())){if(this.hot.hasHook("modifySourceData")){const r=no(i);this.hot.runHooks("modifySourceData",e,t,r,"set"),r.isTouched()&&(i=r.value)}Number.isInteger(t)?this.data[e][t]=i:PS(this.data[e],t,i)}}getAtPhysicalCell(e,t,i){let r=null;if(i)if(typeof t=="string"){const{dataDotNotation:s}=this.hot.getSettings();r=s?U9(i,t):i[t]}else typeof t=="function"?r=t(i):r=i[t];if(this.hot.hasHook("modifySourceData")){const s=no(r);this.hot.runHooks("modifySourceData",e,t,s,"get"),s.isTouched()&&(r=s.value)}return r}getAtCell(e,t){const i=this.modifyRowData(e);return this.getAtPhysicalCell(e,this.colToProp(t),i)}getByRange(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=!1,s=null,o=null,a=null,l=null;e===null||t===null?(r=!0,s=0,a=this.countRows()-1):(s=Math.min(e.row,t.row),o=Math.min(e.col,t.col),a=Math.max(e.row,t.row),l=Math.max(e.col,t.col));const c=[];return $e(s,a,u=>{c.push(r?this.getAtRow(u,void 0,void 0,i):this.getAtRow(u,o,l,i))}),c}countRows(){if(this.hot.hasHook("modifySourceLength")){const e=this.hot.runHooks("modifySourceLength");if(Number.isInteger(e))return e}return this.data.length}countFirstRowKeys(){return AL(this.data)}destroy(){this.data=null,this.hot=null}}function j3(n,e,t){return(e=sAe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function sAe(n){var e=oAe(n,"string");return typeof e=="symbol"?e:e+""}function oAe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class Df{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;j3(this,"indexedValues",[]),j3(this,"initValueOrFn",void 0),this.initValueOrFn=e}getValues(){return this.indexedValues}getValueAtIndex(e){const t=this.indexedValues;if(e<t.length)return t[e]}setValues(e){this.indexedValues=e.slice(),this.runLocalHooks("change")}setValueAtIndex(e,t){return e<this.indexedValues.length?(this.indexedValues[e]=t,this.runLocalHooks("change"),!0):!1}clear(){this.setDefaultValues()}getLength(){return this.getValues().length}setDefaultValues(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.indexedValues.length;this.indexedValues.length=0,un(this.initValueOrFn)?$e(e-1,t=>this.indexedValues.push(this.initValueOrFn(t))):$e(e-1,()=>this.indexedValues.push(this.initValueOrFn)),this.runLocalHooks("change")}init(e){return this.setDefaultValues(e),this.runLocalHooks("init"),this}insert(){this.runLocalHooks("change")}remove(){this.runLocalHooks("change")}destroy(){this.clearLocalHooks(),this.indexedValues=null,this.initValueOrFn=null}}qt(Df,Xi);function PL(n,e,t,i){const r=t.length?t[0]:void 0;return[...n.slice(0,r),...t.map((s,o)=>un(i)?i(s,o):i),...r===void 0?[]:n.slice(r)]}function IL(n,e){return Ac(n,(t,i)=>e.includes(i)===!1)}class ch extends Df{insert(e,t){this.indexedValues=PL(this.indexedValues,e,t,this.initValueOrFn),super.insert(e,t)}remove(e){this.indexedValues=IL(this.indexedValues,e),super.remove(e)}}class hE extends ch{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;super(e)}getHiddenIndexes(){return ci(this.getValues(),(e,t,i)=>(t&&e.push(i),e),[])}}function OL(n,e,t){return[...n.slice(0,e),...t,...n.slice(e)]}function xw(n,e){return Ac(n,t=>e.includes(t)===!1)}function kL(n,e){return vt(n,t=>t-e.filter(i=>i<t).length)}function DL(n,e){const t=e[0],i=e.length;return vt(n,r=>r>=t?r+i:r)}function aAe(n,e,t){return(e=lAe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function lAe(n){var e=cAe(n,"string");return typeof e=="symbol"?e:e+""}function cAe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class dE extends Df{constructor(){super(...arguments),aAe(this,"orderOfIndexes",[])}getValues(){return this.orderOfIndexes.map(e=>this.indexedValues[e])}setValues(e){this.orderOfIndexes=[...Array(e.length).keys()],super.setValues(e)}setValueAtIndex(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.orderOfIndexes.length;return e<this.indexedValues.length?(this.indexedValues[e]=t,this.orderOfIndexes.includes(e)===!1&&this.orderOfIndexes.splice(i,0,e),this.runLocalHooks("change"),!0):!1}clearValue(e){this.orderOfIndexes=xw(this.orderOfIndexes,[e]),un(this.initValueOrFn)?super.setValueAtIndex(e,this.initValueOrFn(e)):super.setValueAtIndex(e,this.initValueOrFn)}getLength(){return this.orderOfIndexes.length}setDefaultValues(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.indexedValues.length;this.orderOfIndexes.length=0,super.setDefaultValues(e)}insert(e,t){this.indexedValues=PL(this.indexedValues,e,t,this.initValueOrFn),this.orderOfIndexes=DL(this.orderOfIndexes,t),super.insert(e,t)}remove(e){this.indexedValues=IL(this.indexedValues,e),this.orderOfIndexes=xw(this.orderOfIndexes,e),this.orderOfIndexes=kL(this.orderOfIndexes,e),super.remove(e)}getEntries(){return this.orderOfIndexes.map(e=>[e,this.getValueAtIndex(e)])}}class _y extends ch{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;super(e)}getTrimmedIndexes(){return ci(this.getValues(),(e,t,i)=>(t&&e.push(i),e),[])}}const z3=new Map([["indexesSequence",{getListWithInsertedItems:OL,getListWithRemovedItems:xw}],["physicallyIndexed",{getListWithInsertedItems:PL,getListWithRemovedItems:IL}]]),BY=n=>{if(z3.has(n)===!1)throw new Error(`Alter strategy with ID '${n}' does not exist.`);return z3.get(n)};class VY extends Df{constructor(){super(e=>e)}insert(e,t){const i=DL(this.indexedValues,t);this.indexedValues=OL(i,e,t),super.insert(e,t)}remove(e){const t=xw(this.indexedValues,e);this.indexedValues=kL(t,e),super.remove(e)}}const U3=new Map([["hiding",hE],["index",Df],["linkedPhysicalIndexToValue",dE],["physicalIndexToValue",ch],["trimming",_y]]);function uAe(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!U3.has(n))throw new Error(`The provided map type ("${n}") does not exist.`);return new(U3.get(n))(e)}function hAe(n,e,t){return(e=dAe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function dAe(n){var e=fAe(n,"string");return typeof e=="symbol"?e:e+""}function fAe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}let DI=0;class LL{constructor(){hAe(this,"collection",new Map)}register(e,t){this.collection.has(e)===!1&&(this.collection.set(e,t),t.addLocalHook("change",()=>this.runLocalHooks("change",t)),DI+=1)}unregister(e){const t=this.collection.get(e);De(t)&&(t.destroy(),this.collection.delete(e),this.runLocalHooks("change",t),DI-=1)}unregisterAll(){this.collection.forEach((e,t)=>this.unregister(t)),this.collection.clear()}get(e){return fn(e)?Array.from(this.collection.values()):this.collection.get(e)}getLength(){return this.collection.size}removeFromEvery(e){this.collection.forEach(t=>{t.remove(e)})}insertToEvery(e,t){this.collection.forEach(i=>{i.insert(e,t)})}initEvery(e){this.collection.forEach(t=>{t.init(e)})}}qt(LL,Xi);function gAe(){return DI}function VT(n,e,t){return(e=pAe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function pAe(n){var e=mAe(n,"string");return typeof e=="symbol"?e:e+""}function mAe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class G3 extends LL{constructor(e,t){super(),VT(this,"mergedValuesCache",[]),VT(this,"aggregationFunction",void 0),VT(this,"fallbackValue",void 0),this.aggregationFunction=e,this.fallbackValue=t}getMergedValues(){if((arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0)===!0)return this.mergedValuesCache;if(this.getLength()===0)return[];const t=vt(this.get(),s=>s.getValues()),i=[],r=De(t[0])&&t[0].length||0;for(let s=0;s<r;s+=1){const o=[];for(let a=0;a<this.getLength();a+=1)o.push(t[a][s]);i.push(o)}return vt(i,this.aggregationFunction)}getMergedValueAtIndex(e,t){const i=this.getMergedValues(t)[e];return De(i)?i:this.fallbackValue}updateCache(){this.mergedValuesCache=this.getMergedValues(!1)}}function bAe(n,e,t){vAe(n,e),e.set(n,t)}function vAe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function wAe(n,e,t){return n.set(WY(n,e),t),t}function yAe(n,e){return n.get(WY(n,e))}function WY(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var WT=new WeakMap;class jY{constructor(){bAe(this,WT,[])}subscribe(e){return this.addLocalHook("change",e),this._write(yAe(WT,this)),this}unsubscribe(){return this.runLocalHooks("unsubscribe"),this.clearLocalHooks(),this}_write(e){return e.length>0&&this.runLocalHooks("change",e),this}_writeInitialChanges(e){wAe(WT,this,e)}}qt(jY,Xi);function Y3(n,e){const t=[];let i=0,r=0;for(;i<n.length&&r<e.length;i++,r++)n[i]!==e[r]&&t.push({op:"replace",index:r,oldValue:n[i],newValue:e[r]});for(;i<e.length;i++)t.push({op:"insert",index:i,oldValue:void 0,newValue:e[i]});for(;r<n.length;r++)t.push({op:"remove",index:r,oldValue:n[r],newValue:void 0});return t}function Km(n,e,t){CAe(n,e),e.set(n,t)}function CAe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Fs(n,e){return n.get(zY(n,e))}function Y0(n,e,t){return n.set(zY(n,e),t),t}function zY(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var K0=new WeakMap,qm=new WeakMap,q0=new WeakMap,X0=new WeakMap,Z0=new WeakMap;class SAe{constructor(){let{initialIndexValue:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Km(this,K0,new Set),Km(this,qm,[]),Km(this,q0,[]),Km(this,X0,!1),Km(this,Z0,!1),Y0(Z0,this,e??!1)}createObserver(){const e=new jY;return Fs(K0,this).add(e),e.addLocalHook("unsubscribe",()=>{Fs(K0,this).delete(e)}),e._writeInitialChanges(Y3(Fs(qm,this),Fs(q0,this))),e}emit(e){let t=Fs(q0,this);(!Fs(X0,this)||Fs(qm,this).length!==e.length)&&(e.length===0?e=new Array(t.length).fill(Fs(Z0,this)):Y0(qm,this,new Array(e.length).fill(Fs(Z0,this))),Fs(X0,this)||(Y0(X0,this,!0),t=Fs(qm,this)));const i=Y3(t,e);Fs(K0,this).forEach(r=>r._write(i)),Y0(q0,this,e)}}function wr(n,e,t){return(e=_Ae(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function _Ae(n){var e=RAe(n,"string");return typeof e=="symbol"?e:e+""}function RAe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class LI{constructor(){wr(this,"indexesSequence",new VY),wr(this,"trimmingMapsCollection",new G3(e=>e.some(t=>t===!0),!1)),wr(this,"hidingMapsCollection",new G3(e=>e.some(t=>t===!0),!1)),wr(this,"variousMapsCollection",new LL),wr(this,"hidingChangesObservable",new SAe({initialIndexValue:!1})),wr(this,"notTrimmedIndexesCache",[]),wr(this,"notHiddenIndexesCache",[]),wr(this,"isBatched",!1),wr(this,"indexesSequenceChanged",!1),wr(this,"indexesChangeSource",void 0),wr(this,"trimmedIndexesChanged",!1),wr(this,"hiddenIndexesChanged",!1),wr(this,"renderablePhysicalIndexesCache",[]),wr(this,"fromPhysicalToVisualIndexesCache",new Map),wr(this,"fromVisualToRenderableIndexesCache",new Map),this.indexesSequence.addLocalHook("change",()=>{this.indexesSequenceChanged=!0,this.updateCache(),this.runLocalHooks("indexesSequenceChange",this.indexesChangeSource),this.runLocalHooks("change",this.indexesSequence,null)}),this.trimmingMapsCollection.addLocalHook("change",e=>{this.trimmedIndexesChanged=!0,this.updateCache(),this.runLocalHooks("change",e,this.trimmingMapsCollection)}),this.hidingMapsCollection.addLocalHook("change",e=>{this.hiddenIndexesChanged=!0,this.updateCache(),this.runLocalHooks("change",e,this.hidingMapsCollection)}),this.variousMapsCollection.addLocalHook("change",e=>{this.runLocalHooks("change",e,this.variousMapsCollection)})}suspendOperations(){this.isBatched=!0}resumeOperations(){this.isBatched=!1,this.updateCache()}createChangesObserver(e){if(e!=="hiding")throw new Error(`Unsupported index map type "${e}".`);return this.hidingChangesObservable.createObserver()}createAndRegisterIndexMap(e,t,i){return this.registerMap(e,uAe(t,i))}registerMap(e,t){if(this.trimmingMapsCollection.get(e)||this.hidingMapsCollection.get(e)||this.variousMapsCollection.get(e))throw Error(`Map with name "${e}" has been already registered.`);t instanceof _y?this.trimmingMapsCollection.register(e,t):t instanceof hE?this.hidingMapsCollection.register(e,t):this.variousMapsCollection.register(e,t);const i=this.getNumberOfIndexes();return i>0&&t.init(i),t}unregisterMap(e){this.trimmingMapsCollection.unregister(e),this.hidingMapsCollection.unregister(e),this.variousMapsCollection.unregister(e)}unregisterAll(){this.trimmingMapsCollection.unregisterAll(),this.hidingMapsCollection.unregisterAll(),this.variousMapsCollection.unregisterAll()}getPhysicalFromVisualIndex(e){const t=this.notTrimmedIndexesCache[e];return De(t)?t:null}getPhysicalFromRenderableIndex(e){const t=this.renderablePhysicalIndexesCache[e];return De(t)?t:null}getVisualFromPhysicalIndex(e){const t=this.fromPhysicalToVisualIndexesCache.get(e);return De(t)?t:null}getVisualFromRenderableIndex(e){return this.getVisualFromPhysicalIndex(this.getPhysicalFromRenderableIndex(e))}getRenderableFromVisualIndex(e){const t=this.fromVisualToRenderableIndexesCache.get(e);return De(t)?t:null}getNearestNotHiddenIndex(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(this.getPhysicalFromVisualIndex(e)===null)return null;if(this.fromVisualToRenderableIndexesCache.has(e))return e;const s=Array.from(this.fromVisualToRenderableIndexesCache.keys());let o=-1;return t>0?o=s.findIndex(a=>a>e):o=s.reverse().findIndex(a=>a<e),o===-1?i?this.getNearestNotHiddenIndex(e,-t,!1):null:s[o]}initToLength(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getNumberOfIndexes();this.notTrimmedIndexesCache=[...new Array(e).keys()],this.notHiddenIndexesCache=[...new Array(e).keys()],this.suspendOperations(),this.indexesChangeSource="init",this.indexesSequence.init(e),this.indexesChangeSource=void 0,this.trimmingMapsCollection.initEvery(e),this.resumeOperations(),this.suspendOperations(),this.hidingMapsCollection.initEvery(e),this.variousMapsCollection.initEvery(e),this.resumeOperations(),this.runLocalHooks("init")}fitToLength(e){const t=this.getNumberOfIndexes();if(e<t){const i=[...Array(this.getNumberOfIndexes()-e).keys()].map(r=>r+e);this.removeIndexes(i)}else this.insertIndexes(t,e-t)}getIndexesSequence(){return this.indexesSequence.getValues()}setIndexesSequence(e){this.indexesChangeSource===void 0&&(this.indexesChangeSource="update"),this.indexesSequence.setValues(e),this.indexesChangeSource==="update"&&(this.indexesChangeSource=void 0)}getNotTrimmedIndexes(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0)===!0?this.notTrimmedIndexesCache:this.getIndexesSequence().filter(i=>this.isTrimmed(i)===!1)}getNotTrimmedIndexesLength(){return this.getNotTrimmedIndexes().length}getNotHiddenIndexes(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0)===!0?this.notHiddenIndexesCache:this.getIndexesSequence().filter(i=>this.isHidden(i)===!1)}getNotHiddenIndexesLength(){return this.getNotHiddenIndexes().length}getRenderableIndexes(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0)===!0?this.renderablePhysicalIndexesCache:this.getNotTrimmedIndexes().filter(i=>this.isHidden(i)===!1)}getRenderableIndexesLength(){return this.getRenderableIndexes().length}getNumberOfIndexes(){return this.getIndexesSequence().length}moveIndexes(e,t){typeof e=="number"&&(e=[e]);const i=vt(e,c=>this.getPhysicalFromVisualIndex(c)),r=this.getNotTrimmedIndexesLength(),s=e.length,o=xw(this.getIndexesSequence(),i),a=o.filter(c=>this.isTrimmed(c)===!1);let l=o.indexOf(a[a.length-1])+1;if(t+s<r){const c=a[t];l=o.indexOf(c)}this.indexesChangeSource="move",this.setIndexesSequence(OL(o,l,i)),this.indexesChangeSource=void 0}isTrimmed(e){return this.trimmingMapsCollection.getMergedValueAtIndex(e)}isHidden(e){return this.hidingMapsCollection.getMergedValueAtIndex(e)}insertIndexes(e,t){const i=this.getNotTrimmedIndexes()[e],r=De(i)?i:this.getNumberOfIndexes(),s=this.getIndexesSequence().includes(i)?this.getIndexesSequence().indexOf(i):this.getNumberOfIndexes(),o=vt(new Array(t).fill(r),(a,l)=>a+l);this.suspendOperations(),this.indexesChangeSource="insert",this.indexesSequence.insert(s,o),this.indexesChangeSource=void 0,this.trimmingMapsCollection.insertToEvery(s,o),this.hidingMapsCollection.insertToEvery(s,o),this.variousMapsCollection.insertToEvery(s,o),this.resumeOperations()}removeIndexes(e){this.suspendOperations(),this.indexesChangeSource="remove",this.indexesSequence.remove(e),this.indexesChangeSource=void 0,this.trimmingMapsCollection.removeFromEvery(e),this.hidingMapsCollection.removeFromEvery(e),this.variousMapsCollection.removeFromEvery(e),this.resumeOperations()}updateCache(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const t=this.indexesSequenceChanged||this.trimmedIndexesChanged||this.hiddenIndexesChanged;(e===!0||this.isBatched===!1&&t===!0)&&(this.trimmingMapsCollection.updateCache(),this.hidingMapsCollection.updateCache(),this.notTrimmedIndexesCache=this.getNotTrimmedIndexes(!1),this.notHiddenIndexesCache=this.getNotHiddenIndexes(!1),this.renderablePhysicalIndexesCache=this.getRenderableIndexes(!1),this.cacheFromPhysicalToVisualIndexes(),this.cacheFromVisualToRenderableIndexes(),this.hiddenIndexesChanged&&this.hidingChangesObservable.emit(this.hidingMapsCollection.getMergedValues()),this.runLocalHooks("cacheUpdated",{indexesSequenceChanged:this.indexesSequenceChanged,trimmedIndexesChanged:this.trimmedIndexesChanged,hiddenIndexesChanged:this.hiddenIndexesChanged}),this.indexesSequenceChanged=!1,this.trimmedIndexesChanged=!1,this.hiddenIndexesChanged=!1)}cacheFromPhysicalToVisualIndexes(){const e=this.getNotTrimmedIndexesLength();this.fromPhysicalToVisualIndexesCache.clear();for(let t=0;t<e;t+=1){const i=this.getPhysicalFromVisualIndex(t);this.fromPhysicalToVisualIndexesCache.set(i,t)}}cacheFromVisualToRenderableIndexes(){const e=this.getRenderableIndexesLength();this.fromVisualToRenderableIndexesCache.clear();for(let t=0;t<e;t+=1){const i=this.getPhysicalFromRenderableIndex(t),r=this.getVisualFromPhysicalIndex(i);this.fromVisualToRenderableIndexesCache.set(r,t)}}}qt(LI,Xi);function EAe(n,e){return ut(e,(t,i)=>{fn(n[i])&&(n[i]=t)}),n}function UY(n){const t=/^([a-zA-Z]{2})-([a-zA-Z]{2})$/.exec(n);return t?`${t[1].toLowerCase()}-${t[2].toUpperCase()}`:n}function GY(n){De(n)&&iL(Kt`Language with code "${n}" was not found. You should register particular language\x20
    before using it. Read more about this issue at: https://docs.handsontable.com/i18n/missing-language-code.`)}function xAe(n,e){return Array.isArray(n)&&Number.isInteger(e)?n[e]:n}const{register:TAe,getValues:MAe}=da("phraseFormatters");function AAe(n,e){TAe(n,e)}function PAe(){return MAe()}AAe("pluralize",xAe);const YY="ContextMenu:items",ot=YY,NL=`${ot}.noItems`,HL=`${ot}.insertRowAbove`,$L=`${ot}.insertRowBelow`,FL=`${ot}.insertColumnOnTheLeft`,BL=`${ot}.insertColumnOnTheRight`,VL=`${ot}.removeRow`,WL=`${ot}.removeColumn`,jL=`${ot}.undo`,zL=`${ot}.redo`,oR=`${ot}.readOnly`,UL=`${ot}.clearColumn`,GL=`${ot}.copy`,YL=`${ot}.copyWithHeaders`,KL=`${ot}.copyWithGroupHeaders`,qL=`${ot}.copyHeadersOnly`,XL=`${ot}.cut`,ZL=`${ot}.freezeColumn`,QL=`${ot}.unfreezeColumn`,JL=`${ot}.mergeCells`,eN=`${ot}.unmergeCells`,tN=`${ot}.addComment`,nN=`${ot}.editComment`,iN=`${ot}.removeComment`,rN=`${ot}.readOnlyComment`,sN=`${ot}.align`,aR=`${ot}.align.left`,lR=`${ot}.align.center`,cR=`${ot}.align.right`,uR=`${ot}.align.justify`,hR=`${ot}.align.top`,dR=`${ot}.align.middle`,fR=`${ot}.align.bottom`,oN=`${ot}.borders`,aN=`${ot}.borders.top`,lN=`${ot}.borders.right`,cN=`${ot}.borders.bottom`,uN=`${ot}.borders.left`,hN=`${ot}.borders.remove`,dN=`${ot}.nestedHeaders.insertChildRow`,fN=`${ot}.nestedHeaders.detachFromParent`,gN=`${ot}.hideColumn`,pN=`${ot}.showColumn`,mN=`${ot}.hideRow`,bN=`${ot}.showRow`,Lr="Filters:",Gn=`${Lr}conditions`,fE=`${Gn}.none`,vN=`${Gn}.isEmpty`,wN=`${Gn}.isNotEmpty`,yN=`${Gn}.isEqualTo`,CN=`${Gn}.isNotEqualTo`,SN=`${Gn}.beginsWith`,_N=`${Gn}.endsWith`,RN=`${Gn}.contains`,EN=`${Gn}.doesNotContain`,IAe=`${Gn}.byValue`,xN=`${Gn}.greaterThan`,TN=`${Gn}.greaterThanOrEqualTo`,MN=`${Gn}.lessThan`,AN=`${Gn}.lessThanOrEqualTo`,PN=`${Gn}.isBetween`,IN=`${Gn}.isNotBetween`,ON=`${Gn}.after`,kN=`${Gn}.before`,DN=`${Gn}.today`,LN=`${Gn}.tomorrow`,NN=`${Gn}.yesterday`,HN=`${Lr}labels.filterByCondition`,$N=`${Lr}labels.filterByValue`,FN=`${Lr}labels.conjunction`,gE=`${Lr}labels.disjunction`,gR=`${Lr}values.blankCells`,BN=`${Lr}buttons.selectAll`,VN=`${Lr}buttons.clear`,WN=`${Lr}buttons.ok`,jN=`${Lr}buttons.cancel`,zN=`${Lr}buttons.placeholder.search`,UN=`${Lr}buttons.placeholder.value`,GN=`${Lr}buttons.placeholder.secondValue`,YN="CheckboxRenderer:",KN=`${YN}checked`,qN=`${YN}unchecked`,OAe=Object.freeze(Object.defineProperty({__proto__:null,CHECKBOX_CHECKED:KN,CHECKBOX_RENDERER_NAMESPACE:YN,CHECKBOX_UNCHECKED:qN,CONTEXTMENU_ITEMS_ADD_COMMENT:tN,CONTEXTMENU_ITEMS_ALIGNMENT:sN,CONTEXTMENU_ITEMS_ALIGNMENT_BOTTOM:fR,CONTEXTMENU_ITEMS_ALIGNMENT_CENTER:lR,CONTEXTMENU_ITEMS_ALIGNMENT_JUSTIFY:uR,CONTEXTMENU_ITEMS_ALIGNMENT_LEFT:aR,CONTEXTMENU_ITEMS_ALIGNMENT_MIDDLE:dR,CONTEXTMENU_ITEMS_ALIGNMENT_RIGHT:cR,CONTEXTMENU_ITEMS_ALIGNMENT_TOP:hR,CONTEXTMENU_ITEMS_BORDERS:oN,CONTEXTMENU_ITEMS_BORDERS_BOTTOM:cN,CONTEXTMENU_ITEMS_BORDERS_LEFT:uN,CONTEXTMENU_ITEMS_BORDERS_RIGHT:lN,CONTEXTMENU_ITEMS_BORDERS_TOP:aN,CONTEXTMENU_ITEMS_CLEAR_COLUMN:UL,CONTEXTMENU_ITEMS_COPY:GL,CONTEXTMENU_ITEMS_COPY_COLUMN_HEADERS_ONLY:qL,CONTEXTMENU_ITEMS_COPY_WITH_COLUMN_GROUP_HEADERS:KL,CONTEXTMENU_ITEMS_COPY_WITH_COLUMN_HEADERS:YL,CONTEXTMENU_ITEMS_CUT:XL,CONTEXTMENU_ITEMS_EDIT_COMMENT:nN,CONTEXTMENU_ITEMS_FREEZE_COLUMN:ZL,CONTEXTMENU_ITEMS_HIDE_COLUMN:gN,CONTEXTMENU_ITEMS_HIDE_ROW:mN,CONTEXTMENU_ITEMS_INSERT_LEFT:FL,CONTEXTMENU_ITEMS_INSERT_RIGHT:BL,CONTEXTMENU_ITEMS_MERGE_CELLS:JL,CONTEXTMENU_ITEMS_NESTED_ROWS_DETACH_CHILD:fN,CONTEXTMENU_ITEMS_NESTED_ROWS_INSERT_CHILD:dN,CONTEXTMENU_ITEMS_NO_ITEMS:NL,CONTEXTMENU_ITEMS_READ_ONLY:oR,CONTEXTMENU_ITEMS_READ_ONLY_COMMENT:rN,CONTEXTMENU_ITEMS_REDO:zL,CONTEXTMENU_ITEMS_REMOVE_BORDERS:hN,CONTEXTMENU_ITEMS_REMOVE_COLUMN:WL,CONTEXTMENU_ITEMS_REMOVE_COMMENT:iN,CONTEXTMENU_ITEMS_REMOVE_ROW:VL,CONTEXTMENU_ITEMS_ROW_ABOVE:HL,CONTEXTMENU_ITEMS_ROW_BELOW:$L,CONTEXTMENU_ITEMS_SHOW_COLUMN:pN,CONTEXTMENU_ITEMS_SHOW_ROW:bN,CONTEXTMENU_ITEMS_UNDO:jL,CONTEXTMENU_ITEMS_UNFREEZE_COLUMN:QL,CONTEXTMENU_ITEMS_UNMERGE_CELLS:eN,CONTEXT_MENU_ITEMS_NAMESPACE:YY,FILTERS_BUTTONS_CANCEL:jN,FILTERS_BUTTONS_CLEAR:VN,FILTERS_BUTTONS_OK:WN,FILTERS_BUTTONS_PLACEHOLDER_SEARCH:zN,FILTERS_BUTTONS_PLACEHOLDER_SECOND_VALUE:GN,FILTERS_BUTTONS_PLACEHOLDER_VALUE:UN,FILTERS_BUTTONS_SELECT_ALL:BN,FILTERS_CONDITIONS_AFTER:ON,FILTERS_CONDITIONS_BEFORE:kN,FILTERS_CONDITIONS_BEGINS_WITH:SN,FILTERS_CONDITIONS_BETWEEN:PN,FILTERS_CONDITIONS_BY_VALUE:IAe,FILTERS_CONDITIONS_CONTAINS:RN,FILTERS_CONDITIONS_EMPTY:vN,FILTERS_CONDITIONS_ENDS_WITH:_N,FILTERS_CONDITIONS_EQUAL:yN,FILTERS_CONDITIONS_GREATER_THAN:xN,FILTERS_CONDITIONS_GREATER_THAN_OR_EQUAL:TN,FILTERS_CONDITIONS_LESS_THAN:MN,FILTERS_CONDITIONS_LESS_THAN_OR_EQUAL:AN,FILTERS_CONDITIONS_NAMESPACE:Gn,FILTERS_CONDITIONS_NONE:fE,FILTERS_CONDITIONS_NOT_BETWEEN:IN,FILTERS_CONDITIONS_NOT_CONTAIN:EN,FILTERS_CONDITIONS_NOT_EMPTY:wN,FILTERS_CONDITIONS_NOT_EQUAL:CN,FILTERS_CONDITIONS_TODAY:DN,FILTERS_CONDITIONS_TOMORROW:LN,FILTERS_CONDITIONS_YESTERDAY:NN,FILTERS_DIVS_FILTER_BY_CONDITION:HN,FILTERS_DIVS_FILTER_BY_VALUE:$N,FILTERS_LABELS_CONJUNCTION:FN,FILTERS_LABELS_DISJUNCTION:gE,FILTERS_NAMESPACE:Lr,FILTERS_VALUES_BLANK_CELLS:gR},Symbol.toStringTag,{value:"Module"}));/**
 * @preserve
 * Authors: Handsoncode
 * Last updated: Nov 15, 2017
 *
 * Description: Definition file for English - United States language-country.
 */const KY={languageCode:"en-US",[NL]:"No available options",[HL]:"Insert row above",[$L]:"Insert row below",[FL]:"Insert column left",[BL]:"Insert column right",[VL]:["Remove row","Remove rows"],[WL]:["Remove column","Remove columns"],[jL]:"Undo",[zL]:"Redo",[oR]:"Read only",[UL]:"Clear column",[sN]:"Alignment",[aR]:"Left",[lR]:"Center",[cR]:"Right",[uR]:"Justify",[hR]:"Top",[dR]:"Middle",[fR]:"Bottom",[ZL]:"Freeze column",[QL]:"Unfreeze column",[oN]:"Borders",[aN]:"Top",[lN]:"Right",[cN]:"Bottom",[uN]:"Left",[hN]:"Remove border(s)",[tN]:"Add comment",[nN]:"Edit comment",[iN]:"Delete comment",[rN]:"Read-only comment",[JL]:"Merge cells",[eN]:"Unmerge cells",[GL]:"Copy",[YL]:["Copy with header","Copy with headers"],[KL]:["Copy with group header","Copy with group headers"],[qL]:["Copy header only","Copy headers only"],[XL]:"Cut",[dN]:"Insert child row",[fN]:"Detach from parent",[gN]:["Hide column","Hide columns"],[pN]:["Show column","Show columns"],[mN]:["Hide row","Hide rows"],[bN]:["Show row","Show rows"],[fE]:"None",[vN]:"Is empty",[wN]:"Is not empty",[yN]:"Is equal to",[CN]:"Is not equal to",[SN]:"Begins with",[_N]:"Ends with",[RN]:"Contains",[EN]:"Does not contain",[xN]:"Greater than",[TN]:"Greater than or equal to",[MN]:"Less than",[AN]:"Less than or equal to",[PN]:"Is between",[IN]:"Is not between",[ON]:"After",[kN]:"Before",[DN]:"Today",[LN]:"Tomorrow",[NN]:"Yesterday",[gR]:"Blank cells",[HN]:"Filter by condition",[$N]:"Filter by value",[FN]:"And",[gE]:"Or",[BN]:"Select all",[VN]:"Clear",[WN]:"OK",[jN]:"Cancel",[zN]:"Search",[UN]:"Value",[GN]:"Second value",[KN]:"Checked",[qN]:"Unchecked"},kAe=OAe,NI=KY.languageCode,{register:DAe,getItem:qY,hasItem:LAe,getValues:NAe}=da("languagesDictionaries");XY(KY);function XY(n,e){let t=n,i=e;return ct(n)&&(i=n,t=i.languageCode),HAe(t,i),DAe(t,mr(i)),mr(i)}function HAe(n,e){n!==NI&&EAe(e,qY(NI))}function ZY(n){return XN(n)?mr(qY(n)):null}function XN(n){return LAe(n)}function $Ae(){return NAe()}function QY(n,e,t){const i=ZY(n);if(i===null)return null;const r=i[e];if(fn(r))return null;const s=FAe(r,t);return Array.isArray(s)?s[0]:s}function FAe(n,e){let t=n;return q(PAe(),i=>{t=i(n,e)}),t}function BAe(n){let e=UY(n);return XN(e)||(e=NI,GY(n)),e}function VAe(n,e,t){return(e=WAe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function WAe(n){var e=jAe(n,"string");return typeof e=="symbol"?e:e+""}function jAe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class Wc extends AY{constructor(e,t){super(e,null),VAe(this,"visualCellRange",null),this.visualCellRange=t||null,this.commit()}add(e){return this.visualCellRange===null?this.visualCellRange=this.settings.createCellRange(e):this.visualCellRange.expand(e),this}clear(){return this.visualCellRange=null,super.clear()}trimToVisibleCellsRangeOnly(e){let{from:t,to:i}=e,r=this.getNearestNotHiddenCoords(t,1),s=this.getNearestNotHiddenCoords(i,-1);return r===null||s===null?null:((r.row>s.row||r.col>s.col)&&(r=t,s=i),this.settings.createCellRange(r,r,s))}getNearestNotHiddenCoords(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t;const r=this.getNearestNotHiddenIndex(this.settings.rowIndexMapper,e.row,t);if(r===null)return null;const s=this.getNearestNotHiddenIndex(this.settings.columnIndexMapper,e.col,i);return s===null?null:this.settings.createCellCoords(r,s)}getNearestNotHiddenIndex(e,t,i){return t<0?t:e.getNearestNotHiddenIndex(t,i)}commit(){if(this.visualCellRange===null)return this;const e=this.trimToVisibleCellsRangeOnly(this.visualCellRange);return e===null?this.cellRange=null:this.cellRange=this.createRenderableCellRange(e.from,e.to),this}syncWith(e){const t=e.from.clone().normalize(),i=e.getVerticalDirection()==="N-S"?1:-1,r=e.getHorizontalDirection()==="W-E"?1:-1,s=this.settings.visualToRenderableCoords(this.visualCellRange.highlight);let o=null;if((s===null||s.col===null||s.row===null)&&(o=this.getNearestNotHiddenCoords(t,i,r)),o!==null&&e.overlaps(o)){const a=e.highlight.clone();if(a.row>=0&&(a.row=o.row),a.col>=0&&(a.col=o.col),this.cellRange===null){const l=this.settings.visualToRenderableCoords(a);this.cellRange=this.settings.createCellRange(l)}e.setHighlight(a)}return this.settings.selectionType==="focus"&&s!==null&&o===null&&e.setHighlight(this.visualCellRange.highlight),this}getCorners(){const{from:e,to:t}=this.cellRange;return[Math.min(e.row,t.row),Math.min(e.col,t.col),Math.max(e.row,t.row),Math.max(e.col,t.col)]}getVisualCorners(){const e=this.settings.renderableToVisualCoords(this.cellRange.getTopStartCorner()),t=this.settings.renderableToVisualCoords(this.cellRange.getBottomEndCorner());return[e.row,e.col,t.row,t.col]}createRenderableCellRange(e,t){const i=this.settings.visualToRenderableCoords(e),r=this.settings.visualToRenderableCoords(t);return i.row===null||i.col===null||r.row===null||r.col===null?null:this.settings.createCellRange(i,i,r)}}function jT(n){let{activeHeaderClassName:e,...t}=n;return new Wc({className:e,...t,selectionType:PY})}function zAe(n){let{areaCornerVisible:e,...t}=n;return new Wc({className:"area",createLayers:!0,border:{width:1,color:"#4b89ff",cornerVisible:e},...t,selectionType:vL})}function UAe(n){let{...e}=n;return new Wc({className:"highlight",...e,selectionType:vL})}function GAe(n){let{columnClassName:e,...t}=n;return new Wc({className:e,...t,selectionType:mMe})}function YAe(n){let{cellCornerVisible:e,...t}=n;return new Wc({className:"current",headerAttributes:[BD()],border:{width:2,color:"#4b89ff",cornerVisible:e},...t,selectionType:wL})}function KAe(n){let{border:e,visualCellRange:t,...i}=n;return new Wc({...e,...i,selectionType:bMe},t)}function qAe(n){let{...e}=n;return new Wc({className:"fill",border:{width:1,color:"#ff0000"},...e,selectionType:gMe})}function K3(n){let{headerClassName:e,...t}=n;return new Wc({className:e,...t,selectionType:bL})}function XAe(n){let{rowClassName:e,...t}=n;return new Wc({className:e,...t,selectionType:pMe})}function ZAe(n,e){QAe(n,e),e.add(n)}function QAe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Fr(n,e,t){return(e=JAe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function JAe(n){var e=ePe(n,"string");return typeof e=="symbol"?e:e+""}function ePe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Dl(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var ba=new WeakSet;class tPe{constructor(e){ZAe(this,ba),Fr(this,"options",void 0),Fr(this,"layerLevel",0),Fr(this,"focus",void 0),Fr(this,"fill",void 0),Fr(this,"layeredAreas",new Map),Fr(this,"areas",new Map),Fr(this,"rowHeaders",new Map),Fr(this,"columnHeaders",new Map),Fr(this,"activeRowHeaders",new Map),Fr(this,"activeColumnHeaders",new Map),Fr(this,"activeCornerHeaders",new Map),Fr(this,"rowHighlights",new Map),Fr(this,"columnHighlights",new Map),Fr(this,"customSelections",[]),this.options=e,this.focus=YAe(e),this.fill=qAe(e)}isEnabledFor(e,t){let i=e;e===wL&&(i="current");let r=this.options.disabledCellSelection(t.row,t.col);return typeof r=="string"&&(r=[r]),r===!1||Array.isArray(r)&&!r.includes(i)}useLayerLevel(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.layerLevel=e,this}getFocus(){return this.focus}getFill(){return this.fill}createLayeredArea(){return Dl(ba,this,Ll).call(this,this.layeredAreas,zAe)}getLayeredAreas(){return[...this.layeredAreas.values()]}createArea(){return Dl(ba,this,Ll).call(this,this.areas,UAe)}getAreas(){return[...this.areas.values()]}createRowHeader(){return Dl(ba,this,Ll).call(this,this.rowHeaders,K3)}getRowHeaders(){return[...this.rowHeaders.values()]}createColumnHeader(){return Dl(ba,this,Ll).call(this,this.columnHeaders,K3)}getColumnHeaders(){return[...this.columnHeaders.values()]}createActiveRowHeader(){return Dl(ba,this,Ll).call(this,this.activeRowHeaders,jT)}getActiveRowHeaders(){return[...this.activeRowHeaders.values()]}createActiveColumnHeader(){return Dl(ba,this,Ll).call(this,this.activeColumnHeaders,jT)}getActiveColumnHeaders(){return[...this.activeColumnHeaders.values()]}createActiveCornerHeader(){return Dl(ba,this,Ll).call(this,this.activeCornerHeaders,jT)}getActiveCornerHeaders(){return[...this.activeCornerHeaders.values()]}createRowHighlight(){return Dl(ba,this,Ll).call(this,this.rowHighlights,XAe)}getRowHighlights(){return[...this.rowHighlights.values()]}createColumnHighlight(){return Dl(ba,this,Ll).call(this,this.columnHighlights,GAe)}getColumnHighlights(){return[...this.columnHighlights.values()]}getCustomSelections(){return[...this.customSelections.values()]}addCustomSelection(e){this.customSelections.push(KAe({...this.options,...e}))}clear(){this.focus.clear(),this.fill.clear(),q(this.areas.values(),e=>void e.clear()),q(this.layeredAreas.values(),e=>void e.clear()),q(this.rowHeaders.values(),e=>void e.clear()),q(this.columnHeaders.values(),e=>void e.clear()),q(this.activeRowHeaders.values(),e=>void e.clear()),q(this.activeColumnHeaders.values(),e=>void e.clear()),q(this.activeCornerHeaders.values(),e=>void e.clear()),q(this.rowHighlights.values(),e=>void e.clear()),q(this.columnHighlights.values(),e=>void e.clear())}[Symbol.iterator](){return[this.focus,this.fill,...this.areas.values(),...this.layeredAreas.values(),...this.rowHeaders.values(),...this.columnHeaders.values(),...this.activeRowHeaders.values(),...this.activeColumnHeaders.values(),...this.activeCornerHeaders.values(),...this.rowHighlights.values(),...this.columnHighlights.values(),...this.customSelections][Symbol.iterator]()}}function Ll(n,e){const t=this.layerLevel;if(n.has(t))return n.get(t);const i=e({layerLevel:t,...this.options});return n.set(t,i),i}function q3(n,e,t){return(e=nPe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function nPe(n){var e=iPe(n,"string");return typeof e=="symbol"?e:e+""}function iPe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class rPe{constructor(e){q3(this,"ranges",[]),q3(this,"createCellRange",void 0),this.createCellRange=e}isEmpty(){return this.size()===0}set(e){return this.clear(),this.ranges.push(this.createCellRange(e)),this}add(e){return this.ranges.push(this.createCellRange(e)),this}pop(){return this.ranges.pop(),this}current(){return this.peekByIndex(this.size()-1)}previous(){return this.peekByIndex(this.size()-2)}includes(e){return this.ranges.some(t=>t.includes(e))}clear(){return this.ranges.length=0,this}size(){return this.ranges.length}peekByIndex(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t;return e>=0&&e<this.size()&&(t=this.ranges[e]),t}[Symbol.iterator](){return this.ranges[Symbol.iterator]()}}function sPe(n,e){JY(n,e),e.add(n)}function zT(n,e,t){JY(n,e),e.set(n,t)}function JY(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Pt(n,e){return n.get(hi(n,e))}function Q0(n,e,t){return n.set(hi(n,e),t),t}function hi(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var J0=new WeakMap,bn=new WeakMap,Qo=new WeakMap,Si=new WeakSet;class HI{constructor(e,t){sPe(this,Si),zT(this,J0,void 0),zT(this,bn,void 0),zT(this,Qo,{x:0,y:0}),Q0(J0,this,e),Q0(bn,this,t)}transformStart(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const r=Pt(bn,this).createCellCoords(e,t);let s=Pt(J0,this).current().highlight;const o=Pt(bn,this).visualToRenderableCoords(s);let a=0,l=0;if(this.runLocalHooks("beforeTransformStart",r),o.row!==null&&o.col!==null){const{width:c,height:u}=hi(Si,this,eK).call(this),{row:h,col:d}=hi(Si,this,Z3).call(this,s),f=Pt(bn,this).fixedRowsBottom(),g=Pt(bn,this).minSpareRows(),p=Pt(bn,this).minSpareCols(),m=Pt(bn,this).autoWrapRow(),v=Pt(bn,this).autoWrapCol(),y=Pt(bn,this).createCellCoords(h+r.row,d+r.col);if(y.row>=u){const x=no(i&&g>0&&f===0),S=y.col+1,T=Pt(bn,this).createCellCoords(y.row-u,S>=c?S-c:S);this.runLocalHooks("beforeColumnWrap",x,hi(Si,this,eg).call(this,T),S>=c),x.value?this.runLocalHooks("insertRowRequire",Pt(bn,this).countRenderableRows()):v&&y.assign(T)}else if(y.row<0){const x=no(v),S=y.col-1,T=Pt(bn,this).createCellCoords(u+y.row,S<0?c+S:S);this.runLocalHooks("beforeColumnWrap",x,hi(Si,this,eg).call(this,T),S<0),v&&y.assign(T)}if(y.col>=c){const x=no(i&&p>0),S=y.row+1,T=Pt(bn,this).createCellCoords(S>=u?S-u:S,y.col-c);this.runLocalHooks("beforeRowWrap",x,hi(Si,this,eg).call(this,T),S>=u),x.value?this.runLocalHooks("insertColRequire",Pt(bn,this).countRenderableColumns()):m&&y.assign(T)}else if(y.col<0){const x=no(m),S=y.row-1,T=Pt(bn,this).createCellCoords(S<0?u+S:S,c+y.col);this.runLocalHooks("beforeRowWrap",x,hi(Si,this,eg).call(this,T),S<0),m&&y.assign(T)}const{rowDir:w,colDir:R}=hi(Si,this,X3).call(this,y);a=w,l=R,s=hi(Si,this,eg).call(this,y)}return this.runLocalHooks("afterTransformStart",s,a,l),s}transformEnd(e,t){const i=Pt(bn,this).createCellCoords(e,t),r=Pt(J0,this).current(),s=Pt(bn,this).visualToRenderableCoords(r.highlight),o=hi(Si,this,UT).call(this,r.to.row,r.from.row),a=hi(Si,this,GT).call(this,r.to.col,r.from.col),l=r.to.clone();let c=0,u=0;if(this.runLocalHooks("beforeTransformEnd",i),s.row!==null&&s.col!==null&&o!==null&&a!==null){const{row:h,col:d}=hi(Si,this,Z3).call(this,r.highlight),f=Pt(bn,this).createCellCoords(o+i.row,a+i.col),g=r.getTopStartCorner(),p=r.getTopEndCorner(),m=r.getBottomEndCorner();if(i.col<0&&a>=d&&f.col<d){const R=f.col-d;f.col=hi(Si,this,GT).call(this,g.col,p.col)+R}else if(i.col>0&&a<=d&&f.col>d){const R=hi(Si,this,GT).call(this,p.col,g.col),x=Math.max(f.col-R,1);f.col=R+x}if(i.row<0&&o>=h&&f.row<h){const R=f.row-h;f.row=hi(Si,this,UT).call(this,g.row,m.row)+R}else if(i.row>0&&o<=h&&f.row>h){const R=hi(Si,this,UT).call(this,m.row,g.row),x=Math.max(f.row-R,1);f.row=R+x}const{rowDir:v,colDir:y}=hi(Si,this,X3).call(this,f);c=v,u=y;const w=hi(Si,this,eg).call(this,f);i.row===0&&i.col!==0?l.col=w.col:i.row!==0&&i.col===0?l.row=w.row:(l.row=w.row,l.col=w.col)}return this.runLocalHooks("afterTransformEnd",l,c,u),l}setOffsetSize(e){let{x:t,y:i}=e;Q0(Qo,this,{x:t,y:i})}resetOffsetSize(){Q0(Qo,this,{x:0,y:0})}}function X3(n){const{width:e,height:t}=hi(Si,this,eK).call(this);let i=0,r=0;return n.row<0?(i=-1,n.row=0):n.row>0&&n.row>=t&&(i=1,n.row=t-1),n.col<0?(r=-1,n.col=0):n.col>0&&n.col>=e&&(r=1,n.col=e-1),{rowDir:i,colDir:r}}function eK(){return{width:Pt(Qo,this).x+Pt(bn,this).countRenderableColumns(),height:Pt(Qo,this).y+Pt(bn,this).countRenderableRows()}}function UT(n,e){const t=Pt(bn,this).findFirstNonHiddenRenderableRow(n,e);return t===null?null:Pt(Qo,this).y+t}function GT(n,e){const t=Pt(bn,this).findFirstNonHiddenRenderableColumn(n,e);return t===null?null:Pt(Qo,this).x+t}function Z3(n){const{row:e,col:t}=Pt(bn,this).visualToRenderableCoords(n);if(e===null||t===null)throw new Error("Renderable coords are not visible.");return Pt(bn,this).createCellCoords(Pt(Qo,this).y+e,Pt(Qo,this).x+t)}function eg(n){const e=n.clone();return e.col=n.col-Pt(Qo,this).x,e.row=n.row-Pt(Qo,this).y,Pt(bn,this).renderableToVisualCoords(e)}qt(HI,Xi);const pE=0,mE=1,tK=2,ZN=3,oPe=[ZN,tK],aPe=[["number"],["number","string"],["number","undefined"],["number","string","undefined"]],YT=Symbol("root"),Q3=Symbol("child");function Ip(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:YT;if(e!==YT&&e!==Q3)throw new Error("The second argument is used internally only and cannot be overwritten.");const t=Array.isArray(n),i=e===YT;let r=pE;if(t){const s=n[0];n.length===0?r=mE:i&&s instanceof yy?r=ZN:i&&Array.isArray(s)?r=Ip(s,Q3):n.length>=2&&n.length<=4&&!n.some((a,l)=>!aPe[l].includes(typeof a))&&(r=tK)}return r}function Tw(n){let{createCellCoords:e,createCellRange:t,keepDirection:i=!1,propToCol:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!oPe.includes(n))throw new Error("Unsupported selection ranges schema type was provided.");return function(s){const o=n===ZN;let a=o?s.from.row:s[0],l=o?s.from.col:s[1],c=o?s.to.row:s[2],u=o?s.to.col:s[3];if(typeof r=="function"&&(typeof l=="string"&&(l=r(l)),typeof u=="string"&&(u=r(u))),fn(c)&&(c=a),fn(u)&&(u=l),!i){const f=a,g=l,p=c,m=u;a=Math.min(f,p),l=Math.min(g,m),c=Math.max(f,p),u=Math.max(g,m)}const h=e(a,l),d=e(c,u);return t(h,h,d)}}function lPe(n){const e=Ip(n.getSelected());if(e===pE||e===mE)return[];const t=Tw(e,{createCellCoords:n._createCellCoords.bind(n),createCellRange:n._createCellRange.bind(n)}),i=new Set;q(n.getSelected(),o=>{const{from:a,to:l}=t(o),c=Math.max(a.col,0),u=l.col-c+1;q(Array.from(new Array(u),(h,d)=>c+d),h=>{i.has(h)||i.add(h)})});const r=Array.from(i).sort((o,a)=>o-a);return ci(r,(o,a,l,c)=>(l!==0&&a===c[l-1]+1?o[o.length-1][1]+=1:o.push([a,1]),o),[])}function cPe(n){const e=Ip(n.getSelected());if(e===pE||e===mE)return[];const t=Tw(e,{createCellCoords:n._createCellCoords.bind(n),createCellRange:n._createCellRange.bind(n)}),i=new Set;q(n.getSelected(),o=>{const{from:a,to:l}=t(o),c=Math.max(a.row,0),u=l.row-c+1;q(Array.from(new Array(u),(h,d)=>c+d),h=>{i.has(h)||i.add(h)})});const r=Array.from(i).sort((o,a)=>o-a);return ci(r,(o,a,l,c)=>(l!==0&&a===c[l-1]+1?o[o.length-1][1]+=1:o.push([a,1]),o),[])}function tg(n,e,t){uPe(n,e),e.set(n,t)}function uPe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ih(n,e,t){return(e=hPe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function hPe(n){var e=dPe(n,"string");return typeof e=="symbol"?e:e+""}function dPe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Cn(n,e){return n.get(nK(n,e))}function va(n,e,t){return n.set(nK(n,e),t),t}function nK(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var er=new WeakMap,Oh=new WeakMap,eC=new WeakMap,Xm=new WeakMap,tC=new WeakMap,Zm=new WeakMap;class iK{constructor(e,t){var i=this;Ih(this,"settings",void 0),Ih(this,"tableProps",void 0),Ih(this,"inProgress",!1),Ih(this,"selectedRange",new rPe((r,s,o)=>this.tableProps.createCellRange(r,s,o))),Ih(this,"highlight",void 0),tg(this,er,void 0),tg(this,Oh,void 0),Ih(this,"selectedByRowHeader",new Set),Ih(this,"selectedByColumnHeader",new Set),tg(this,eC,!1),tg(this,Xm,!1),tg(this,tC,"unknown"),tg(this,Zm,-1),this.settings=e,this.tableProps=t,this.highlight=new tPe({headerClassName:e.currentHeaderClassName,activeHeaderClassName:e.activeHeaderClassName,rowClassName:e.currentRowClassName,columnClassName:e.currentColClassName,cellAttributes:[BD()],rowIndexMapper:this.tableProps.rowIndexMapper,columnIndexMapper:this.tableProps.columnIndexMapper,disabledCellSelection:(r,s)=>this.tableProps.isDisabledCellSelection(r,s),cellCornerVisible:function(){return i.isCellCornerVisible(...arguments)},areaCornerVisible:function(){return i.isAreaCornerVisible(...arguments)},visualToRenderableCoords:r=>this.tableProps.visualToRenderableCoords(r),renderableToVisualCoords:r=>this.tableProps.renderableToVisualCoords(r),createCellCoords:(r,s)=>this.tableProps.createCellCoords(r,s),createCellRange:(r,s,o)=>this.tableProps.createCellRange(r,s,o)}),va(er,this,new HI(this.selectedRange,{rowIndexMapper:this.tableProps.rowIndexMapper,columnIndexMapper:this.tableProps.columnIndexMapper,countRenderableRows:()=>this.tableProps.countRenderableRows(),countRenderableColumns:()=>this.tableProps.countRenderableColumns(),visualToRenderableCoords:r=>this.tableProps.visualToRenderableCoords(r),renderableToVisualCoords:r=>this.tableProps.renderableToVisualCoords(r),findFirstNonHiddenRenderableRow:function(){return i.tableProps.findFirstNonHiddenRenderableRow(...arguments)},findFirstNonHiddenRenderableColumn:function(){return i.tableProps.findFirstNonHiddenRenderableColumn(...arguments)},createCellCoords:(r,s)=>this.tableProps.createCellCoords(r,s),fixedRowsBottom:()=>e.fixedRowsBottom,minSpareRows:()=>e.minSpareRows,minSpareCols:()=>e.minSpareCols,autoWrapRow:()=>e.autoWrapRow,autoWrapCol:()=>e.autoWrapCol})),va(Oh,this,new HI(this.selectedRange,{rowIndexMapper:this.tableProps.rowIndexMapper,columnIndexMapper:this.tableProps.columnIndexMapper,countRenderableRows:()=>{const r=this.selectedRange.current();return this.tableProps.countRenderableRowsInRange(0,r.getOuterBottomEndCorner().row)},countRenderableColumns:()=>{const r=this.selectedRange.current();return this.tableProps.countRenderableColumnsInRange(0,r.getOuterBottomEndCorner().col)},visualToRenderableCoords:r=>this.tableProps.visualToRenderableCoords(r),renderableToVisualCoords:r=>this.tableProps.renderableToVisualCoords(r),findFirstNonHiddenRenderableRow:function(){return i.tableProps.findFirstNonHiddenRenderableRow(...arguments)},findFirstNonHiddenRenderableColumn:function(){return i.tableProps.findFirstNonHiddenRenderableColumn(...arguments)},createCellCoords:(r,s)=>this.tableProps.createCellCoords(r,s),fixedRowsBottom:()=>0,minSpareRows:()=>0,minSpareCols:()=>0,autoWrapRow:()=>!0,autoWrapCol:()=>!0})),Cn(er,this).addLocalHook("beforeTransformStart",function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i.runLocalHooks("beforeModifyTransformStart",...s)}),Cn(er,this).addLocalHook("afterTransformStart",function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i.runLocalHooks("afterModifyTransformStart",...s)}),Cn(er,this).addLocalHook("beforeTransformEnd",function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i.runLocalHooks("beforeModifyTransformEnd",...s)}),Cn(er,this).addLocalHook("afterTransformEnd",function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i.runLocalHooks("afterModifyTransformEnd",...s)}),Cn(er,this).addLocalHook("insertRowRequire",function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i.runLocalHooks("insertRowRequire",...s)}),Cn(er,this).addLocalHook("insertColRequire",function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i.runLocalHooks("insertColRequire",...s)}),Cn(er,this).addLocalHook("beforeRowWrap",function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i.runLocalHooks("beforeRowWrap",...s)}),Cn(er,this).addLocalHook("beforeColumnWrap",function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i.runLocalHooks("beforeColumnWrap",...s)}),Cn(Oh,this).addLocalHook("beforeTransformStart",function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i.runLocalHooks("beforeModifyTransformFocus",...s)}),Cn(Oh,this).addLocalHook("afterTransformStart",function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i.runLocalHooks("afterModifyTransformFocus",...s)})}getSelectedRange(){return this.selectedRange}markSource(e){va(tC,this,e)}markEndSource(){va(tC,this,"unknown")}getSelectionSource(){return Cn(tC,this)}setExpectedLayers(e){va(Zm,this,e)}begin(){this.inProgress=!0}finish(){this.runLocalHooks("afterSelectionFinished",Array.from(this.selectedRange)),this.inProgress=!1,va(Zm,this,-1)}isInProgress(){return this.inProgress}setRangeStart(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:e;const s=this.settings.selectionMode==="multiple",o=fn(t)?this.tableProps.getShortcutManager().isCtrlPressed():t,a=e.clone();va(eC,this,!1),this.runLocalHooks(`beforeSetRangeStart${i?"Only":""}`,a),(!s||s&&!o&&fn(t))&&this.selectedRange.clear(),this.selectedRange.add(a).current().setHighlight(r.clone()),this.getLayerLevel()===0&&(this.selectedByRowHeader.clear(),this.selectedByColumnHeader.clear()),i||this.setRangeEnd(e)}setRangeStartOnly(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e;this.setRangeStart(e,t,!0,i)}setRangeEnd(e){if(this.selectedRange.isEmpty())return;const t=e.clone(),i=this.tableProps.countRows(),r=this.tableProps.countCols(),s=this.selectedRange.current().clone().setTo(e).isSingleHeader();if((i>0||r>0)&&(i===0&&t.col<0&&!s||r===0&&t.row<0&&!s))return;this.runLocalHooks("beforeSetRangeEnd",t),this.begin();const o=this.selectedRange.current();if(this.settings.navigableHeaders||o.highlight.normalize(),this.settings.selectionMode==="single")o.setFrom(o.highlight),o.setTo(o.highlight);else{const l=o.getHorizontalDirection(),c=o.getVerticalDirection(),u=this.isMultiple();o.setTo(t),u&&(l!==o.getHorizontalDirection()||o.getWidth()===1&&!o.includes(o.highlight))&&o.from.assign({col:o.highlight.col}),u&&(c!==o.getVerticalDirection()||o.getHeight()===1&&!o.includes(o.highlight))&&o.from.assign({row:o.highlight.row})}i>0&&r>0&&(!this.settings.navigableHeaders||this.settings.navigableHeaders&&!o.isSingleHeader())&&o.to.normalize(),this.runLocalHooks("beforeHighlightSet"),this.setRangeFocus(this.selectedRange.current().highlight),this.applyAndCommit();const a=Cn(Zm,this)===-1||this.selectedRange.size()===Cn(Zm,this);this.runLocalHooks("afterSetRangeEnd",e,a)}applyAndCommit(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectedRange.current(),t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLayerLevel();const i=this.tableProps.countRows(),r=this.tableProps.countCols();t<this.highlight.layerLevel&&(q(this.highlight.getAreas(),g=>void g.clear()),q(this.highlight.getLayeredAreas(),g=>void g.clear()),q(this.highlight.getRowHeaders(),g=>void g.clear()),q(this.highlight.getColumnHeaders(),g=>void g.clear()),q(this.highlight.getActiveRowHeaders(),g=>void g.clear()),q(this.highlight.getActiveColumnHeaders(),g=>void g.clear()),q(this.highlight.getActiveCornerHeaders(),g=>void g.clear()),q(this.highlight.getRowHighlights(),g=>void g.clear()),q(this.highlight.getColumnHighlights(),g=>void g.clear())),this.highlight.useLayerLevel(t);const s=this.highlight.createArea(),o=this.highlight.createLayeredArea(),a=this.highlight.createRowHeader(),l=this.highlight.createColumnHeader(),c=this.highlight.createActiveRowHeader(),u=this.highlight.createActiveColumnHeader(),h=this.highlight.createActiveCornerHeader(),d=this.highlight.createRowHighlight(),f=this.highlight.createColumnHighlight();if(s.clear(),o.clear(),a.clear(),l.clear(),c.clear(),u.clear(),h.clear(),d.clear(),f.clear(),this.highlight.isEnabledFor(vL,e.highlight)&&(this.isMultiple()||t>=1)&&(s.add(e.from).add(e.to).commit(),o.add(e.from).add(e.to).commit(),t===1)){const g=this.selectedRange.previous();this.highlight.useLayerLevel(t-1),this.highlight.createArea().add(g.from).commit().syncWith(g),this.highlight.createLayeredArea().add(g.from).commit().syncWith(g),this.highlight.useLayerLevel(t)}if(this.highlight.isEnabledFor(bL,e.highlight)){if(!e.isSingleHeader()){const m=this.tableProps.createCellCoords(Math.max(e.from.row,0),-1),v=this.tableProps.createCellCoords(e.to.row,-1),y=this.tableProps.createCellCoords(-1,Math.max(e.from.col,0)),w=this.tableProps.createCellCoords(-1,e.to.col);this.settings.selectionMode==="single"?(a.add(m).commit(),l.add(y).commit(),d.add(m).commit(),f.add(y).commit()):(a.add(m).add(v).commit(),l.add(y).add(w).commit(),d.add(m).add(v).commit(),f.add(y).add(w).commit())}const g=!Cn(Xm,this)&&this.isEntireRowSelected()&&(r>0&&r===e.getWidth()||r===0&&this.isSelectedByRowHeader()),p=!Cn(Xm,this)&&this.isEntireColumnSelected()&&(i>0&&i===e.getHeight()||i===0&&this.isSelectedByColumnHeader());g&&c.add(this.tableProps.createCellCoords(Math.max(e.from.row,0),Math.min(-this.tableProps.countRowHeaders(),-1))).add(this.tableProps.createCellCoords(Math.max(e.to.row,0),-1)).commit(),p&&u.add(this.tableProps.createCellCoords(Math.min(-this.tableProps.countColHeaders(),-1),Math.max(e.from.col,0))).add(this.tableProps.createCellCoords(-1,Math.max(e.to.col,0))).commit(),g&&p&&h.add(this.tableProps.createCellCoords(-this.tableProps.countColHeaders(),-this.tableProps.countRowHeaders())).add(this.tableProps.createCellCoords(-1,-1)).commit()}}setRangeFocus(e){if(this.selectedRange.isEmpty())return;const t=this.selectedRange.current();this.inProgress||this.runLocalHooks("beforeSetFocus",e);const i=this.highlight.getFocus();i.clear(),t.setHighlight(e),this.inProgress||this.runLocalHooks("beforeHighlightSet"),this.highlight.isEnabledFor(wL,t.highlight)&&i.add(t.highlight).commit().syncWith(t),this.inProgress||(va(eC,this,!0),this.runLocalHooks("afterSetFocus",t.highlight))}transformStart(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.settings.navigableHeaders?Cn(er,this).setOffsetSize({x:this.tableProps.countRowHeaders(),y:this.tableProps.countColHeaders()}):Cn(er,this).resetOffsetSize(),this.setRangeStart(Cn(er,this).transformStart(e,t,i))}transformEnd(e,t){this.settings.navigableHeaders?Cn(er,this).setOffsetSize({x:this.tableProps.countRowHeaders(),y:this.tableProps.countColHeaders()}):Cn(er,this).resetOffsetSize(),this.setRangeEnd(Cn(er,this).transformEnd(e,t))}transformFocus(e,t){const i=this.selectedRange.current(),{row:r,col:s}=i.getOuterTopStartCorner(),o=this.tableProps.countRenderableColumnsInRange(0,s-1),a=this.tableProps.countRenderableRowsInRange(0,r-1);i.highlight.isHeader()?Cn(Oh,this).setOffsetSize({x:s<0?Math.abs(s):-o,y:r<0?Math.abs(r):-a}):Cn(Oh,this).setOffsetSize({x:s<0?0:-o,y:r<0?0:-a});const l=Cn(Oh,this).transformStart(e,t);this.setRangeFocus(l.normalize())}shiftRows(e,t){if(!this.isSelected())return;const i=this.selectedRange.current();if(this.isSelectedByCorner())this.selectAll(!0,!0,{disableHeadersHighlight:!0});else if(this.isSelectedByColumnHeader()||i.getOuterTopStartCorner().row>=e){const{from:r,to:s,highlight:o}=i,a=this.tableProps.countRows(),l=this.isSelectedByRowHeader(),c=this.isSelectedByColumnHeader(),u=c?-1:0,h=c?0:t;this.getSelectedRange().pop();const d=this.tableProps.createCellCoords(Gt(r.row+h,u,a-1),r.col),f=this.tableProps.createCellCoords(Gt(s.row+t,u,a-1),s.col);this.markSource("shift"),o.row>=e?this.setRangeStartOnly(d,!0,this.tableProps.createCellCoords(Gt(o.row+t,0,a-1),o.col)):this.setRangeStartOnly(d,!0),l&&this.selectedByRowHeader.add(this.getLayerLevel()),c&&this.selectedByColumnHeader.add(this.getLayerLevel()),this.setRangeEnd(f),this.markEndSource()}}shiftColumns(e,t){if(!this.isSelected())return;const i=this.selectedRange.current();if(this.isSelectedByCorner())this.selectAll(!0,!0,{disableHeadersHighlight:!0});else if(this.isSelectedByRowHeader()||i.getOuterTopStartCorner().col>=e){const{from:r,to:s,highlight:o}=i,a=this.tableProps.countCols(),l=this.isSelectedByRowHeader(),c=this.isSelectedByColumnHeader(),u=l?-1:0,h=l?0:t;this.getSelectedRange().pop();const d=this.tableProps.createCellCoords(r.row,Gt(r.col+h,u,a-1)),f=this.tableProps.createCellCoords(s.row,Gt(s.col+t,u,a-1));this.markSource("shift"),o.col>=e?this.setRangeStartOnly(d,!0,this.tableProps.createCellCoords(o.row,Gt(o.col+t,0,a-1))):this.setRangeStartOnly(d,!0),l&&this.selectedByRowHeader.add(this.getLayerLevel()),c&&this.selectedByColumnHeader.add(this.getLayerLevel()),this.setRangeEnd(f),this.markEndSource()}}getLayerLevel(){return this.selectedRange.size()-1}isSelected(){return!this.selectedRange.isEmpty()}isMultiple(){if(!this.isSelected())return!1;const e=no(!this.selectedRange.current().isSingle());return this.runLocalHooks("afterIsMultipleSelection",e),e.value}isFocusSelectionChanged(){return this.isSelected()&&Cn(eC,this)}isSelectedByRowHeader(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getLayerLevel();return!this.isSelectedByCorner(e)&&(e===-1?this.selectedByRowHeader.size>0:this.selectedByRowHeader.has(e))}isEntireRowSelected(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getLayerLevel();const t=r=>{const{col:s}=r.getOuterTopStartCorner(),o=this.tableProps.countRowHeaders(),a=this.tableProps.countCols();return(o>0&&s<0||o===0)&&r.getWidth()===a};if(e===-1)return Array.from(this.selectedRange).some(r=>t(r));const i=this.selectedRange.peekByIndex(e);return i?t(i):!1}isSelectedByColumnHeader(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getLayerLevel();return!this.isSelectedByCorner()&&(e===-1?this.selectedByColumnHeader.size>0:this.selectedByColumnHeader.has(e))}isEntireColumnSelected(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getLayerLevel();const t=r=>{const{row:s}=r.getOuterTopStartCorner(),o=this.tableProps.countColHeaders(),a=this.tableProps.countRows();return(o>0&&s<0||o===0)&&r.getHeight()===a};if(e===-1)return Array.from(this.selectedRange).some(r=>t(r));const i=this.selectedRange.peekByIndex(e);return i?t(i):!1}isSelectedByAnyHeader(){return this.isSelectedByRowHeader(-1)||this.isSelectedByColumnHeader(-1)||this.isSelectedByCorner()}isSelectedByCorner(){return this.selectedByColumnHeader.has(this.getLayerLevel())&&this.selectedByRowHeader.has(this.getLayerLevel())}inInSelection(e){return this.selectedRange.includes(e)}isCellCornerVisible(){return this.settings.fillHandle&&!this.tableProps.isEditorOpened()&&!this.isMultiple()}isCellVisible(e){const t=this.tableProps.visualToRenderableCoords(e);return t.row!==null&&t.col!==null}isAreaCornerVisible(e){return Number.isInteger(e)&&e!==this.getLayerLevel()?!1:this.settings.fillHandle&&!this.tableProps.isEditorOpened()&&this.isMultiple()}clear(){this.selectedRange.clear(),this.highlight.clear()}deselect(){this.isSelected()&&(this.inProgress=!1,this.clear(),this.runLocalHooks("afterDeselect"))}selectAll(){var e;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{focusPosition:!1,disableHeadersHighlight:!1};const s=this.tableProps.countRows(),o=this.tableProps.countCols(),a=this.tableProps.countRowHeaders(),l=this.tableProps.countColHeaders(),c=i?-l:0,u=t?-a:0;if(c===0&&u===0&&(s===0||o===0))return;let h=(e=this.getSelectedRange().current())===null||e===void 0?void 0:e.highlight;const{focusPosition:d,disableHeadersHighlight:f}=r;va(Xm,this,f),d&&Number.isInteger(d==null?void 0:d.row)&&Number.isInteger(d==null?void 0:d.col)&&(h=this.tableProps.createCellCoords(Gt(d.row,c,s-1),Gt(d.col,u,o-1)));const g=this.tableProps.createCellCoords(c,u),p=this.tableProps.createCellCoords(s-1,o-1);this.clear(),this.setRangeStartOnly(g,void 0,h),u<0&&this.selectedByRowHeader.add(this.getLayerLevel()),c<0&&this.selectedByColumnHeader.add(this.getLayerLevel()),this.setRangeEnd(p),this.finish(),va(Xm,this,!1)}selectCells(e){var t=this;const i=Ip(e);if(i===mE)return!1;if(i===pE)throw new Error(Kt`Unsupported format of the selection ranges was passed. To select cells pass\x20
        the coordinates as an array of arrays ([[rowStart, columnStart/columnPropStart, rowEnd,\x20
        columnEnd/columnPropEnd]]) or as an array of CellRange objects.`);const r=Tw(i,{createCellCoords:function(){return t.tableProps.createCellCoords(...arguments)},createCellRange:function(){return t.tableProps.createCellRange(...arguments)},propToCol:l=>this.tableProps.propToCol(l),keepDirection:!0}),s=this.settings.navigableHeaders,o={countRows:this.tableProps.countRows(),countCols:this.tableProps.countCols(),countRowHeaders:s?this.tableProps.countRowHeaders():0,countColHeaders:s?this.tableProps.countColHeaders():0},a=!e.some(l=>{const c=r(l),u=c.isValid(o);return!(u&&!c.containsHeaders()||u&&c.containsHeaders()&&c.isSingleHeader())});return a&&(this.clear(),this.setExpectedLayers(e.length),q(e,l=>{const{from:c,to:u}=r(l);this.setRangeStartOnly(c.clone(),!1),this.setRangeEnd(u.clone())}),this.finish()),a}selectColumns(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;const r=typeof e=="string"?this.tableProps.propToCol(e):e,s=typeof t=="string"?this.tableProps.propToCol(t):t,o=this.tableProps.countRows(),a=this.tableProps.countCols(),l=this.tableProps.countColHeaders(),c=l===0?0:-l,u=this.tableProps.createCellCoords(c,r),h=this.tableProps.createCellCoords(o-1,s),d=this.tableProps.createCellRange(u,u,h).isValid({countRows:o,countCols:a,countRowHeaders:0,countColHeaders:l});if(d){let f=0,g=0;Number.isInteger(i==null?void 0:i.row)&&Number.isInteger(i==null?void 0:i.col)?(f=Gt(i.row,c,o-1),g=Gt(i.col,Math.min(r,s),Math.max(r,s))):(f=Gt(i,c,o-1),g=r);const p=this.tableProps.createCellCoords(f,g),m=l===0?0:Gt(p.row,c,-1),v=o-1,y=this.tableProps.createCellCoords(m,r),w=this.tableProps.createCellCoords(v,s);this.runLocalHooks("beforeSelectColumns",y,w,p),y.row=m,w.row=v,this.setRangeStartOnly(y,void 0,p),this.selectedByColumnHeader.add(this.getLayerLevel()),this.setRangeEnd(w),this.runLocalHooks("afterSelectColumns",y,w,p),this.finish()}return d}selectRows(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;const r=this.tableProps.countRows(),s=this.tableProps.countCols(),o=this.tableProps.countRowHeaders(),a=o===0?0:-o,l=this.tableProps.createCellCoords(e,a),c=this.tableProps.createCellCoords(t,s-1),u=this.tableProps.createCellRange(l,l,c).isValid({countRows:r,countCols:s,countRowHeaders:o,countColHeaders:0});if(u){let h=0,d=0;Number.isInteger(i==null?void 0:i.row)&&Number.isInteger(i==null?void 0:i.col)?(h=Gt(i.row,Math.min(e,t),Math.max(e,t)),d=Gt(i.col,a,s-1)):(h=e,d=Gt(i,a,s-1));const f=this.tableProps.createCellCoords(h,d),g=o===0?0:Gt(f.col,a,-1),p=s-1,m=this.tableProps.createCellCoords(e,g),v=this.tableProps.createCellCoords(t,p);this.runLocalHooks("beforeSelectRows",m,v,f),m.col=g,v.col=p,this.setRangeStartOnly(m,void 0,f),this.selectedByRowHeader.add(this.getLayerLevel()),this.setRangeEnd(v),this.runLocalHooks("afterSelectRows",m,v,f),this.finish()}return u}refresh(){if(!this.isSelected())return;const e=this.tableProps.countRows(),t=this.tableProps.countCols();if(e===0||t===0){this.deselect();return}const i=this.selectedRange.peekByIndex(this.selectedRange.size()-1),{from:r,to:s,highlight:o}=i;this.clear(),o.assign({row:Gt(o.row,-1/0,e-1),col:Gt(o.col,-1/0,t-1)}),r.assign({row:Gt(r.row,-1/0,e-1),col:Gt(r.col,-1/0,t-1)}),s.assign({row:Gt(s.row,0,e-1),col:Gt(s.col,0,t-1)}),this.selectedRange.ranges.push(i),this.highlight.getFocus().add(o).commit().syncWith(i),this.applyAndCommit(i)}commit(){if(this.highlight.getCustomSelections().forEach(r=>{r.commit()}),!this.isSelected())return;const t=this.highlight.getFocus(),i=this.getLayerLevel();t.commit().syncWith(this.selectedRange.current());for(let r=0;r<this.selectedRange.size();r+=1){this.highlight.useLayerLevel(r);const s=this.highlight.createArea(),o=this.highlight.createLayeredArea(),a=this.highlight.createRowHeader(),l=this.highlight.createColumnHeader(),c=this.highlight.createActiveRowHeader(),u=this.highlight.createActiveColumnHeader(),h=this.highlight.createActiveCornerHeader(),d=this.highlight.createRowHighlight(),f=this.highlight.createColumnHighlight();s.commit(),o.commit(),a.commit(),l.commit(),c.commit(),u.commit(),h.commit(),d.commit(),f.commit()}this.highlight.useLayerLevel(i)}}qt(iK,Xi);const J3=/^(\r\n|\n\r|\r|\n)/,fPe=/^[^\t\r\n]+/,eW=/^\t/;function gPe(n){const e=[[""]];if(n.length===0)return e;let t=0,i=0,r;for(;n.length>0&&r!==n.length;)if(r=n.length,n.match(eW))n=n.replace(eW,""),t+=1,e[i][t]="";else if(n.match(J3))n=n.replace(J3,""),t=0,i+=1,e[i]=[""];else{let s="";if(n.startsWith('"')){let o=0,a=!0;for(;a;){const l=n.slice(0,1);l==='"'&&(o+=1),s+=l,n=n.slice(1),(n.length===0||n.match(/^[\t\r\n]/)&&o%2===0)&&(a=!1)}s=s.replace(/^"/,"").replace(/"$/,"").replace(/["]*/g,l=>new Array(Math.floor(l.length/2)).fill('"').join(""))}else{const o=n.match(fPe);s=o?o[0]:"",n=n.slice(s.length)}e[i][t]=s}return e}function Ov(n){let e,t,i,r,s="",o;for(e=0,t=n.length;e<t;e+=1){for(r=n[e].length,i=0;i<r;i+=1)i>0&&(s+="	"),o=n[e][i],typeof o=="string"?o.indexOf(`
`)>-1?s+=`"${o.replace(/"/g,'""')}"`:s+=o:o==null?s+="":s+=o;e!==t-1&&(s+=`
`)}return s}function kh(n,e,t){return(e=pPe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function pPe(n){var e=mPe(n,"string");return typeof e=="symbol"?e:e+""}function mPe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class Qg{static get DESTINATION_RENDERER(){return 1}static get DESTINATION_CLIPBOARD_GENERATOR(){return 2}constructor(e,t,i){kh(this,"hot",void 0),kh(this,"metaManager",void 0),kh(this,"tableMeta",void 0),kh(this,"dataSource",void 0),kh(this,"duckSchema",void 0),kh(this,"colToPropCache",void 0),kh(this,"propToColCache",void 0),this.hot=e,this.metaManager=i,this.tableMeta=i.getTableMeta(),this.dataSource=t,this.duckSchema=this.createDuckSchema(),this.createMap()}createMap(){const e=this.getSchema();if(typeof e>"u")throw new Error("trying to create `columns` definition but you didn't provide `schema` nor `data`");const t=this.tableMeta.columns;let i;if(this.colToPropCache=[],this.propToColCache=new Map,t){let r=0,s=0,o=!1;if(typeof t=="function"){const a=iE(e);r=a>0?a:this.countFirstRowKeys(),o=!0}else{const a=this.tableMeta.maxCols;r=Math.min(a,t.length)}for(i=0;i<r;i++){const a=o?t(i):t[i];if(ct(a)){if(typeof a.data<"u"){const l=o?s:i;this.colToPropCache[l]=a.data,this.propToColCache.set(a.data,l)}s+=1}}}else this.recursiveDuckColumns(e)}countFirstRowKeys(){return AL(this.dataSource)}recursiveDuckColumns(e,t,i){let r=t,s=i,o;return typeof r>"u"&&(r=0,s=""),typeof e=="object"&&!Array.isArray(e)&&ut(e,(a,l)=>{a===null?(o=s+l,this.colToPropCache.push(o),this.propToColCache.set(o,r),r+=1):r=this.recursiveDuckColumns(a,r,`${l}.`)}),r}colToProp(e){if(Number.isInteger(e)===!1)return e;const t=this.hot.toPhysicalColumn(e);return t===null?e:this.colToPropCache&&De(this.colToPropCache[t])?this.colToPropCache[t]:t}propToCol(e){const t=this.propToColCache.get(e);if(De(t))return this.hot.toVisualColumn(t);const i=this.hot.toVisualColumn(e);return i===null?e:i}getSchema(){const e=this.tableMeta.dataSchema;return e?typeof e=="function"?e():e:this.duckSchema}createDuckSchema(){return this.dataSource&&this.dataSource[0]?Pp(this.dataSource[0]):{}}refreshDuckSchema(){this.duckSchema=this.createDuckSchema()}createRow(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,{source:i,mode:r="above"}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=this.hot.countSourceRows();let o=s,a=0,l=e;if((typeof l!="number"||l>=s)&&(l=s),l<this.hot.countRows()&&(o=this.hot.toPhysicalRow(l)),this.hot.runHooks("beforeCreateRow",l,t,i)===!1||o===null)return{delta:0};const u=this.tableMeta.maxRows,h=this.getSchema().length,d=[];for(;a<t&&s+a<u;){let g=null;this.hot.dataType==="array"?this.tableMeta.dataSchema?g=mr(this.getSchema()):(g=[],$e(h-1,()=>g.push(null))):this.hot.dataType==="function"?g=this.tableMeta.dataSchema(l+a):(g={},vy(g,this.getSchema())),d.push(g),a+=1}this.hot.rowIndexMapper.insertIndexes(l,a),r==="below"&&(o=Math.min(o+1,s)),this.spliceData(o,0,d);const f=this.hot.toVisualRow(o);return this.hot.countSourceRows()===d.length&&this.hot.columnIndexMapper.initToLength(this.hot.getInitialColumnCount()),a>0&&(e==null?this.metaManager.createRow(null,a):i!=="auto"&&this.metaManager.createRow(o,t)),this.hot.runHooks("afterCreateRow",f,a,i),this.hot.forceFullRender=!0,{delta:a,startPhysicalIndex:o}}createCol(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,{source:i,mode:r="start"}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!this.hot.isColumnModificationAllowed())throw new Error("Cannot create new column. When data source in an object, you can only have as much columns as defined in first data row, data schema or in the 'columns' setting.If you want to be able to add new columns, you have to use array datasource.");const s=this.dataSource,o=this.tableMeta.maxCols,a=this.hot.countSourceCols();let l=e;if((typeof l!="number"||l>=a)&&(l=a),this.hot.runHooks("beforeCreateCol",l,t,i)===!1)return{delta:0};let u=a;l<this.hot.countCols()&&(u=this.hot.toPhysicalColumn(l));const h=this.hot.countSourceRows();let d=this.hot.countCols(),f=0,g=u;r==="end"&&(g=Math.min(g+1,a));const p=g;for(;f<t&&d<o;){if(typeof l!="number"||l>=d)if(h>0)for(let v=0;v<h;v+=1)typeof s[v]>"u"&&(s[v]=[]),s[v].push(null);else s.push([null]);else for(let v=0;v<h;v++)s[v].splice(g,0,null);f+=1,g+=1,d+=1}this.hot.columnIndexMapper.insertIndexes(l,f),f>0&&(e==null?this.metaManager.createColumn(null,f):i!=="auto"&&this.metaManager.createColumn(p,t));const m=this.hot.toVisualColumn(p);return this.hot.runHooks("afterCreateCol",m,f,i),this.hot.forceFullRender=!0,this.refreshDuckSchema(),{delta:f,startPhysicalIndex:p}}removeRow(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,i=arguments.length>2?arguments[2]:void 0,r=Number.isInteger(e)?e:-t;const s=this.visualRowsToPhysical(r,t),o=this.hot.countSourceRows();if(r=(o+r)%o,this.hot.runHooks("beforeRemoveRow",r,s.length,s,i)===!1)return!1;const l=s.length;if(this.filterData(r,l,s),r<this.hot.countRows()){this.hot.rowIndexMapper.removeIndexes(s);const u=De(this.tableMeta.columns)||De(this.tableMeta.dataSchema);this.hot.rowIndexMapper.getNotTrimmedIndexesLength()===0&&u===!1&&this.hot.columnIndexMapper.setIndexesSequence([])}return s.slice(0).sort((u,h)=>h-u).forEach(u=>{this.metaManager.removeRow(u,1)}),this.hot.runHooks("afterRemoveRow",r,l,s,i),this.hot.forceFullRender=!0,!0}removeCol(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,i=arguments.length>2?arguments[2]:void 0;if(this.hot.dataType==="object"||this.tableMeta.columns)throw new Error("cannot remove column with object data source or columns option specified");let r=typeof e!="number"?-t:e;r=(this.hot.countCols()+r)%this.hot.countCols();const s=this.visualColumnsToPhysical(r,t),o=s.slice(0).sort((h,d)=>d-h);if(this.hot.runHooks("beforeRemoveCol",r,t,s,i)===!1)return!1;let l=!0;const c=o.length,u=this.dataSource;for(let h=0;h<c;h++)l&&s[0]!==s[h]-h&&(l=!1);if(l)for(let h=0,d=this.hot.countSourceRows();h<d;h++)u[h].splice(s[0],t),h===0&&this.metaManager.removeColumn(s[0],t);else for(let h=0,d=this.hot.countSourceRows();h<d;h++)for(let f=0;f<c;f++)u[h].splice(o[f],1),h===0&&this.metaManager.removeColumn(o[f],1);return r<this.hot.countCols()&&(this.hot.columnIndexMapper.removeIndexes(s),this.hot.columnIndexMapper.getNotTrimmedIndexesLength()===0&&this.hot.rowIndexMapper.setIndexesSequence([])),this.hot.runHooks("afterRemoveCol",r,t,s,i),this.hot.forceFullRender=!0,this.refreshDuckSchema(),!0}spliceCol(e,t,i){const r=this.hot.getDataAtCol(e),s=r.slice(t,t+i),o=r.slice(t+i);for(var a=arguments.length,l=new Array(a>3?a-3:0),c=3;c<a;c++)l[c-3]=arguments[c];gI(l,o);let u=0;for(;u<i;)l.push(null),u+=1;return g9(l),this.hot.populateFromArray(t,e,l,null,null,"spliceCol"),s}spliceRow(e,t,i){const r=this.hot.getSourceDataAtRow(e),s=r.slice(t,t+i),o=r.slice(t+i);for(var a=arguments.length,l=new Array(a>3?a-3:0),c=3;c<a;c++)l[c-3]=arguments[c];gI(l,o);let u=0;for(;u<i;)l.push(null),u+=1;return this.hot.populateFromArray(e,t,[l],null,null,"spliceRow"),s}spliceData(e,t,i){if(this.hot.runHooks("beforeDataSplice",e,t,i)!==!1){const s=[...this.dataSource.slice(0,e),...i,...this.dataSource.slice(e)];this.dataSource.length=0,s.forEach(o=>this.dataSource.push(o))}}filterData(e,t,i){let r=this.hot.runHooks("filterData",e,t,i);Array.isArray(r)===!1&&(r=this.dataSource.filter((s,o)=>i.indexOf(o)===-1)),this.dataSource.length=0,Array.prototype.push.apply(this.dataSource,r)}get(e,t){const i=this.hot.toPhysicalRow(e);let r=this.dataSource[i];const s=this.hot.runHooks("modifyRowData",i);r=isNaN(s)?s:r;const{dataDotNotation:o}=this.hot.getSettings();let a=null;if(r&&r.hasOwnProperty&&kn(r,t))a=r[t];else if(o&&typeof t=="string"&&t.indexOf(".")>-1){let l=r;if(!l)return null;const c=t.split(".");for(let u=0,h=c.length;u<h;u++)if(l=l[c[u]],typeof l>"u")return null;a=l}else typeof t=="function"&&(a=t(this.dataSource.slice(i,i+1)[0]));if(this.hot.hasHook("modifyData")){const l=no(a);this.hot.runHooks("modifyData",i,this.propToCol(t),l,"get"),l.isTouched()&&(a=l.value)}return a}getCopyable(e,t){return this.hot.getCellMeta(e,this.propToCol(t)).copyable?this.get(e,t):""}set(e,t,i){const r=this.hot.toPhysicalRow(e);let s=i,o=this.dataSource[r];const a=this.hot.runHooks("modifyRowData",r);if(o=isNaN(a)?a:o,this.hot.hasHook("modifyData")){const c=no(s);this.hot.runHooks("modifyData",r,this.propToCol(t),c,"set"),c.isTouched()&&(s=c.value)}const{dataDotNotation:l}=this.hot.getSettings();if(o&&o.hasOwnProperty&&kn(o,t))o[t]=s;else if(l&&typeof t=="string"&&t.indexOf(".")>-1){let c=o,u=0,h;const d=t.split(".");for(u=0,h=d.length-1;u<h;u++)typeof c[d[u]]>"u"&&(c[d[u]]={}),c=c[d[u]];c[d[u]]=s}else typeof t=="function"?t(this.dataSource.slice(r,r+1)[0],s):o[t]=s}visualRowsToPhysical(e,t){const i=this.hot.countSourceRows(),r=[];let s=(i+e)%i,o=t,a;for(;s<i&&o;)a=this.hot.toPhysicalRow(s),r.push(a),o-=1,s+=1;return r}visualColumnsToPhysical(e,t){const i=this.hot.countCols(),r=[];let s=(i+e)%i,o=t;for(;s<i&&o;){const a=this.hot.toPhysicalColumn(s);r.push(a),o-=1,s+=1}return r}clear(){for(let e=0;e<this.hot.countSourceRows();e++)for(let t=0;t<this.hot.countCols();t++)this.set(e,this.colToProp(t),"")}getLength(){const e=this.tableMeta.maxRows;let t;e<0||e===0?t=0:t=e||1/0;const i=this.hot.rowIndexMapper.getNotTrimmedIndexesLength();return Math.min(i,t)}getAll(){const e={row:0,col:0},t={row:Math.max(this.hot.countRows()-1,0),col:Math.max(this.hot.countCols()-1,0)};return e.row-t.row===0&&!this.hot.countSourceRows()?[]:this.getRange(e,t,Qg.DESTINATION_RENDERER)}countCachedColumns(){return this.colToPropCache.length}getRange(e,t,i){const r=[];let s,o,a;const l=this.tableMeta.maxRows,c=this.tableMeta.maxCols;if(l===0||c===0)return[];const u=i===Qg.DESTINATION_CLIPBOARD_GENERATOR?this.getCopyable:this.get,h=Math.min(Math.max(l-1,0),Math.max(e.row,t.row)),d=Math.min(Math.max(c-1,0),Math.max(e.col,t.col));for(s=Math.min(e.row,t.row);s<=h;s++){a=[];const f=s>=0?this.hot.toPhysicalRow(s):s;for(o=Math.min(e.col,t.col);o<=d&&f!==null;o++)a.push(u.call(this,s,this.colToProp(o)));f!==null&&r.push(a)}return r}getText(e,t){return Ov(this.getRange(e,t,Qg.DESTINATION_RENDERER))}getCopyableText(e,t){return Ov(this.getRange(e,t,Qg.DESTINATION_CLIPBOARD_GENERATOR))}destroy(){this.hot=null,this.metaManager=null,this.dataSource=null,this.duckSchema=null,this.colToPropCache.length=0,this.propToColCache.clear(),this.propToColCache=void 0}}const{register:bPe,getItem:vPe,hasItem:rK,getNames:wPe,getValues:Z7e}=da("cellTypes");function QN(n){if(!rK(n))throw Error(`You declared cell type "${n}" as a string that is not mapped to a known object.
                 Cell type must be an object or a string mapped to an object registered by
                 "Handsontable.cellTypes.registerCellType" method`);return vPe(n)}function js(n,e){typeof n!="string"&&(e=n,n=e.CELL_TYPE);const{editor:t,renderer:i,validator:r}=e;t&&Gr(n,t),i&&os(n,i),r&&Sd(n,r),bPe(n,e)}function yPe(n,e){var t;return n==="CELL_TYPE"?!1:((t=e._automaticallyAssignedMetaProps)===null||t===void 0?void 0:t.has(n))||!kn(e,n)}function bE(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:n;const i=typeof e.type=="string"?QN(e.type):e.type;if(n._automaticallyAssignedMetaProps&&ut(e,(s,o)=>void n._automaticallyAssignedMetaProps.delete(o)),!ct(i))return;t===n&&!n._automaticallyAssignedMetaProps&&(n._automaticallyAssignedMetaProps=new Set);const r={};ut(i,(s,o)=>{if(yPe(o,t)){var a;r[o]=s,(a=n._automaticallyAssignedMetaProps)===null||a===void 0||a.add(o)}}),li(n,r)}function CPe(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];function t(){}ha(t,n);for(let i=0;i<e.length;i++)t.prototype[e[i]]=void 0;return t}function NS(n){return Number.isInteger(n)&&n>=0}function HS(n,e){if(!n())throw new Error(`Assertion failed: ${e}`)}function nC(n){return n==null}const sK=()=>({_automaticallyAssignedMetaProps:void 0,activeHeaderClassName:"ht__active_highlight",allowEmpty:!0,allowHtml:!1,allowInsertColumn:!0,allowInsertRow:!0,allowInvalid:!0,allowRemoveColumn:!0,allowRemoveRow:!0,ariaTags:!0,autoColumnSize:void 0,autoRowSize:void 0,autoWrapCol:!1,autoWrapRow:!1,bindRowsWithHeaders:void 0,cell:[],cells:void 0,checkedTemplate:void 0,className:void 0,colHeaders:null,collapsibleColumns:void 0,columnHeaderHeight:void 0,columns:void 0,columnSorting:void 0,columnSummary:void 0,colWidths:void 0,commentedCellClassName:"htCommentCell",comments:!1,contextMenu:void 0,copyable:!0,copyPaste:!0,correctFormat:!1,currentColClassName:void 0,currentHeaderClassName:"ht__highlight",currentRowClassName:void 0,customBorders:!1,data:void 0,dataDotNotation:!0,dataSchema:void 0,dateFormat:"DD/MM/YYYY",timeFormat:"h:mm:ss a",datePickerConfig:void 0,defaultDate:void 0,disableVisualSelection:!1,dragToScroll:!0,dropdownMenu:void 0,editor:void 0,enterBeginsEditing:!0,enterMoves:{col:0,row:1},fillHandle:{autoInsertRow:!1},filter:!0,filteringCaseSensitive:!1,filters:void 0,fixedColumnsLeft:0,fixedColumnsStart:0,fixedRowsBottom:0,fixedRowsTop:0,formulas:void 0,fragmentSelection:!1,headerClassName:void 0,height:void 0,hiddenColumns:void 0,hiddenRows:void 0,invalidCellClassName:"htInvalid",imeFastEdit:!1,isEmptyCol(n){let e,t,i;for(e=0,t=this.countRows();e<t;e++)if(i=this.getDataAtCell(e,n),zn(i)===!1)return!1;return!0},isEmptyRow(n){let e,t,i,r;for(e=0,t=this.countCols();e<t;e++)if(i=this.getDataAtCell(n,e),zn(i)===!1)return typeof i=="object"?(r=this.getCellMeta(n,e),nE(this.getSchema()[r.prop],i)):!1;return!0},label:void 0,language:"en-US",layoutDirection:"inherit",licenseKey:void 0,locale:"en-US",manualColumnFreeze:void 0,manualColumnMove:void 0,manualColumnResize:void 0,manualRowMove:void 0,manualRowResize:void 0,maxCols:1/0,maxRows:1/0,mergeCells:!1,minCols:0,minRows:0,minSpareCols:0,minSpareRows:0,multiColumnSorting:void 0,navigableHeaders:!1,tabNavigation:!0,nestedHeaders:void 0,nestedRows:void 0,noWordWrapClassName:"htNoWrap",numericFormat:void 0,observeDOMVisibility:!0,outsideClickDeselects:!0,persistentState:void 0,placeholder:void 0,placeholderCellClassName:"htPlaceholder",preventOverflow:!1,preventWheel:!1,readOnly:!1,readOnlyCellClassName:"htDimmed",renderAllRows:!1,renderAllColumns:!1,renderer:void 0,rowHeaders:void 0,rowHeaderWidth:void 0,rowHeights:void 0,search:!1,selectionMode:"multiple",selectOptions:void 0,skipColumnOnPaste:!1,skipRowOnPaste:!1,sortByRelevance:!0,source:void 0,startCols:5,startRows:5,stretchH:"none",strict:void 0,tableClassName:void 0,tabMoves:{row:0,col:1},title:void 0,trimDropdown:!0,trimRows:void 0,trimWhitespace:!0,type:"text",uncheckedTemplate:void 0,undo:void 0,validator:void 0,viewportColumnRenderingOffset:"auto",viewportRowRenderingOffset:"auto",visibleRows:10,width:void 0,wordWrap:!0});function tW(n,e,t){return(e=SPe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function SPe(n){var e=_Pe(n,"string");return typeof e=="symbol"?e:e+""}function _Pe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function RPe(){return class{}}class EPe{constructor(e){tW(this,"metaCtor",RPe()),tW(this,"meta",void 0),this.meta=this.metaCtor.prototype,li(this.meta,sK()),this.meta.instance=e}getMetaConstructor(){return this.metaCtor}getMeta(){return this.meta}updateMeta(e){var t;li(this.meta,e),bE(this.meta,{...e,type:(t=e.type)!==null&&t!==void 0?t:this.meta.type},e)}}function xPe(n,e,t){return(e=TPe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function TPe(n){var e=MPe(n,"string");return typeof e=="symbol"?e:e+""}function MPe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class APe{constructor(e){xPe(this,"meta",void 0);const t=e.getMetaConstructor();this.meta=new t}getMeta(){return this.meta}updateMeta(e){li(this.meta,e),bE(this.meta,e,e)}}function iC(n,e,t){return(e=PPe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function PPe(n){var e=IPe(n,"string");return typeof e=="symbol"?e:e+""}function IPe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class pR{constructor(e){iC(this,"valueFactory",void 0),iC(this,"data",[]),iC(this,"index",[]),iC(this,"holes",new Set),this.valueFactory=e}obtain(e){HS(()=>NS(e),"Expecting an unsigned number.");const t=this._getStorageIndexByKey(e);let i;if(t>=0)i=this.data[t],i===void 0&&(i=this.valueFactory(e),this.data[t]=i);else if(i=this.valueFactory(e),this.holes.size>0){const r=this.holes.values().next().value;this.holes.delete(r),this.data[r]=i,this.index[e]=r}else this.data.push(i),this.index[e]=this.data.length-1;return i}insert(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;HS(()=>NS(e)||nC(e),"Expecting an unsigned number or null/undefined argument.");const i=[],r=this.data.length;for(let o=0;o<t;o++)i.push(r+o),this.data.push(void 0);const s=nC(e)?this.index.length:e;this.index=[...this.index.slice(0,s),...i,...this.index.slice(s)]}remove(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;HS(()=>NS(e)||nC(e),"Expecting an unsigned number or null/undefined argument.");const i=this.index.splice(nC(e)?this.index.length-t:e,t);for(let r=0;r<i.length;r++){const s=i[r];typeof s=="number"&&this.holes.add(s)}}size(){return this.data.length-this.holes.size}values(){return Ac(this.data,(e,t)=>!this.holes.has(t))[Symbol.iterator]()}entries(){const e=[];for(let i=0;i<this.data.length;i++){const r=this._getKeyByStorageIndex(i);r!==-1&&e.push([r,this.data[i]])}let t=0;return{next:()=>{if(t<e.length){const i=e[t];return t+=1,{value:i,done:!1}}return{done:!0}}}}clear(){this.data=[],this.index=[],this.holes.clear()}_getStorageIndexByKey(e){return this.index.length>e?this.index[e]:-1}_getKeyByStorageIndex(e){return this.index.indexOf(e)}[Symbol.iterator](){return this.entries()}}function nW(n,e,t){return(e=OPe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function OPe(n){var e=kPe(n,"string");return typeof e=="symbol"?e:e+""}function kPe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const DPe=["data","width"];class LPe{constructor(e){nW(this,"globalMeta",void 0),nW(this,"metas",new pR(()=>this._createMeta())),this.globalMeta=e,this.metas=new pR(()=>this._createMeta())}updateMeta(e,t){const i=this.getMeta(e);li(i,t),bE(i,t)}createColumn(e,t){this.metas.insert(e,t)}removeColumn(e,t){this.metas.remove(e,t)}getMeta(e){return this.metas.obtain(e)}getMetaConstructor(e){return this.metas.obtain(e).constructor}clearCache(){this.metas.clear()}_createMeta(){return CPe(this.globalMeta.getMetaConstructor(),DPe).prototype}}function iW(n,e,t){return(e=NPe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function NPe(n){var e=HPe(n,"string");return typeof e=="symbol"?e:e+""}function HPe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class $Pe{constructor(e){iW(this,"columnMeta",void 0),iW(this,"metas",new pR(()=>this._createRow())),this.columnMeta=e}updateMeta(e,t,i){const r=this.getMeta(e,t);li(r,i),bE(r,i)}createRow(e,t){this.metas.insert(e,t)}createColumn(e,t){for(let i=0;i<this.metas.size();i++)this.metas.obtain(i).insert(e,t)}removeRow(e,t){this.metas.remove(e,t)}removeColumn(e,t){for(let i=0;i<this.metas.size();i++)this.metas.obtain(i).remove(e,t)}getMeta(e,t,i){const r=this.metas.obtain(e).obtain(t);return i===void 0?r:r[i]}setMeta(e,t,i,r){var s;const o=this.metas.obtain(e).obtain(t);(s=o._automaticallyAssignedMetaProps)===null||s===void 0||s.delete(i),o[i]=r}removeMeta(e,t,i){const r=this.metas.obtain(e).obtain(t);delete r[i]}getMetas(){const e=[],t=Array.from(this.metas.values());for(let i=0;i<t.length;i++)De(t[i])&&e.push(...t[i].values());return e}getMetasAtRow(e){HS(()=>NS(e),"Expecting an unsigned number.");const t=new Map(this.metas);return t.has(e)?Array.from(t.get(e).values()):[]}clearCache(){this.metas.clear()}_createRow(){return new pR(e=>this._createMeta(e))}_createMeta(e){const t=this.columnMeta.getMetaConstructor(e);return new t}}class oK{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];this.hot=e,this.globalMeta=new EPe(e),this.tableMeta=new APe(this.globalMeta),this.columnMeta=new LPe(this.globalMeta),this.cellMeta=new $Pe(this.columnMeta),i.forEach(r=>new r(this)),this.globalMeta.updateMeta(t)}getGlobalMeta(){return this.globalMeta.getMeta()}updateGlobalMeta(e){this.globalMeta.updateMeta(e)}getTableMeta(){return this.tableMeta.getMeta()}updateTableMeta(e){this.tableMeta.updateMeta(e)}getColumnMeta(e){return this.columnMeta.getMeta(e)}updateColumnMeta(e,t){this.columnMeta.updateMeta(e,t)}getCellMeta(e,t,i){let{visualRow:r,visualColumn:s}=i;const o=this.cellMeta.getMeta(e,t);return o.visualRow=r,o.visualCol=s,o.row=e,o.col=t,this.runLocalHooks("afterGetCellMeta",o),o}getCellMetaKeyValue(e,t,i){if(typeof i!="string")throw new Error("The passed cell meta object key is not a string");return this.cellMeta.getMeta(e,t,i)}setCellMeta(e,t,i,r){this.cellMeta.setMeta(e,t,i,r)}updateCellMeta(e,t,i){this.cellMeta.updateMeta(e,t,i)}removeCellMeta(e,t,i){this.cellMeta.removeMeta(e,t,i)}getCellsMeta(){return this.cellMeta.getMetas()}getCellsMetaAtRow(e){return this.cellMeta.getMetasAtRow(e)}createRow(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;this.cellMeta.createRow(e,t)}removeRow(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;this.cellMeta.removeRow(e,t)}createColumn(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;this.cellMeta.createColumn(e,t),this.columnMeta.createColumn(e,t)}removeColumn(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;this.cellMeta.removeColumn(e,t),this.columnMeta.removeColumn(e,t)}clearCellsCache(){this.cellMeta.clearCache()}clearCache(){this.cellMeta.clearCache(),this.columnMeta.clearCache()}}qt(oK,Xi);function rW(n,e,t,i){const{hotInstance:r,dataMap:s,dataSource:o,internalSource:a,source:l,metaManager:c,firstRun:u}=i,h=pr(a),d=r.getSettings();Array.isArray(d.dataSchema)?r.dataType="array":un(d.dataSchema)?r.dataType="function":r.dataType="object",s&&s.destroy(),n=r.runHooks(`before${h}`,n,u,l);const f=new Qg(r,n,c);if(e(f),typeof n=="object"&&n!==null)n.push&&n.splice||(n=[n]);else if(n===null){const g=f.getSchema();n=[];let p,m=0,v=0;for(m=0,v=d.startRows;m<v;m++)if((r.dataType==="object"||r.dataType==="function")&&d.dataSchema)p=mr(g),n.push(p);else if(r.dataType==="array")p=mr(g[0]),n.push(p);else{p=[];for(let y=0,w=d.startCols;y<w;y++)p.push(null);n.push(p)}}else throw new Error(`${a} only accepts array of objects or array of arrays (${typeof n} given)`);Array.isArray(n[0])&&(r.dataType="array"),d.data=n,f.dataSource=n,o.data=n,o.dataType=r.dataType,o.colToProp=f.colToProp.bind(f),o.propToCol=f.propToCol.bind(f),o.countCachedColumns=f.countCachedColumns.bind(f),t(f),r.runHooks(`after${h}`,n,u,l),u||(r.runHooks("afterChange",null,a),r.render()),r.getSettings().ariaTags&&ze(r.rootElement,[S9(-1),X1(r.countCols()+(r.view?r.countRowHeaders():0))])}function sW(n,e,t){return(e=FPe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function FPe(n){var e=BPe(n,"string");return typeof e=="symbol"?e:e+""}function BPe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class VPe{constructor(e){sW(this,"metaManager",void 0),sW(this,"metaSyncMemo",new Map),this.metaManager=e,e.addLocalHook("afterGetCellMeta",t=>this.extendCellMeta(t)),Oe.getSingleton().add("beforeRender",t=>{t&&this.metaSyncMemo.clear()},this.metaManager.hot)}extendCellMeta(e){var t;const{row:i,col:r}=e;if((t=this.metaSyncMemo.get(i))!==null&&t!==void 0&&t.has(r))return;const{visualRow:s,visualCol:o}=e,a=this.metaManager.hot,l=a.colToProp(o);e.prop=l,a.runHooks("beforeGetCellMeta",s,o,e);const c=kn(e,"type")?e.type:null;let u=un(e.cells)?e.cells(i,r,l):null;if(c)if(u){var h;u.type=(h=u.type)!==null&&h!==void 0?h:c}else u={type:c};u&&this.metaManager.updateCellMeta(i,r,u),a.runHooks("afterGetCellMeta",s,o,e),this.metaSyncMemo.has(i)||this.metaSyncMemo.set(i,new Set),this.metaSyncMemo.get(i).add(r)}}function WPe(n,e,t){jPe(n,e),e.set(n,t)}function jPe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function KT(n,e,t){return(e=zPe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function zPe(n){var e=UPe(n,"string");return typeof e=="symbol"?e:e+""}function UPe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function GPe(n,e){return n.get(YPe(n,e))}function YPe(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var oW=new WeakMap;class KPe{constructor(e){KT(this,"metaManager",void 0),KT(this,"usageTracker",new Set),KT(this,"propDescriptors",new Map([["ariaTags",{initOnly:!0}],["fixedColumnsLeft",{target:"fixedColumnsStart",onChange(t){if(this.metaManager.hot.isRtl()&&t==="fixedColumnsLeft")throw new Error("The `fixedColumnsLeft` is not supported for RTL. Please use option `fixedColumnsStart`.");if(this.usageTracker.has("fixedColumnsLeft")&&this.usageTracker.has("fixedColumnsStart"))throw new Error("The `fixedColumnsLeft` and `fixedColumnsStart` should not be used together. Please use only the option `fixedColumnsStart`.")}}],["layoutDirection",{initOnly:!0}],["renderAllColumns",{initOnly:!0}],["renderAllRows",{initOnly:!0}]])),WPe(this,oW,(t,i,r)=>{if(!r)throw new Error(`The \`${t}\` option can not be updated after the Handsontable is initialized.`)}),this.metaManager=e,this.extendMetaProps()}extendMetaProps(){this.propDescriptors.forEach((e,t)=>{const{initOnly:i,target:r,onChange:s}=e,o=typeof r=="string",a=o?r:t,l=`_${a}`;this.metaManager.globalMeta.meta[l]=this.metaManager.globalMeta.meta[a],s?(this.installPropWatcher(t,l,s),o&&this.installPropWatcher(r,l,s)):i&&(this.installPropWatcher(t,l,GPe(oW,this)),this.metaManager.globalMeta.meta._initOnlySettings||(this.metaManager.globalMeta.meta._initOnlySettings=[]),this.metaManager.globalMeta.meta._initOnlySettings.push(t))})}installPropWatcher(e,t,i){const r=this;Object.defineProperty(this.metaManager.globalMeta.meta,e,{get(){return this[t]},set(s){const o=!r.usageTracker.has(e);r.usageTracker.add(e),i.call(r,e,s,o),this[t]=s},enumerable:!0,configurable:!0})}}const aK="gridDefault",uh="editorManager.handlingEditor",qPe={name:"editorCloseAndSave",callback(n){n._getEditorManager().closeEditorAndSaveChanges()}},XPe="hooksRefRegisterer",lK={_hooksStorage:Object.create(null),addHook(n,e){return this._hooksStorage[n]||(this._hooksStorage[n]=[]),this.hot.addHook(n,e),this._hooksStorage[n].push(e),this},removeHooksByKey(n){q(this._hooksStorage[n]||[],e=>{this.hot.removeHook(n,e)})},clearHooks(){ut(this._hooksStorage,(n,e)=>this.removeHooksByKey(e)),this._hooksStorage={}}};Rl(lK,"MIXIN_NAME",XPe,{writable:!1,enumerable:!1});function Po(n,e,t){return(e=ZPe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ZPe(n){var e=QPe(n,"string");return typeof e=="symbol"?e:e+""}function QPe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const JPe="base",qn=Object.freeze({VIRGIN:"STATE_VIRGIN",EDITING:"STATE_EDITING",WAITING:"STATE_WAITING",FINISHED:"STATE_FINISHED"});class om{static get EDITOR_TYPE(){return JPe}constructor(e){Po(this,"hot",void 0),Po(this,"state",qn.VIRGIN),Po(this,"_opened",!1),Po(this,"_fullEditMode",!1),Po(this,"_closeCallback",null),Po(this,"TD",null),Po(this,"row",null),Po(this,"col",null),Po(this,"prop",null),Po(this,"originalValue",null),Po(this,"cellProperties",null),this.hot=e,this.init()}_fireCallbacks(e){this._closeCallback&&(this._closeCallback(e),this._closeCallback=null)}init(){}getValue(){throw Error("Editor getValue() method unimplemented")}setValue(){throw Error("Editor setValue() method unimplemented")}open(){throw Error("Editor open() method unimplemented")}close(){throw Error("Editor close() method unimplemented")}prepare(e,t,i,r,s,o){this.TD=r,this.row=e,this.col=t,this.prop=i,this.originalValue=s,this.cellProperties=o,this.state=this.isOpened()?this.state:qn.VIRGIN}extend(){return class extends this.constructor{}}saveValue(e,t){let i,r,s,o;if(t){const l=this.hot.getSelectedLast();i=Math.max(Math.min(l[0],l[2]),0),r=Math.max(Math.min(l[1],l[3]),0),s=Math.max(l[0],l[2]),o=Math.max(l[1],l[3])}else[i,r,s,o]=[this.row,this.col,null,null];const a=this.hot.runHooks("modifyGetCellCoords",i,r);Array.isArray(a)&&([i,r]=a),this.hot.populateFromArray(i,r,e,s,o,"edit")}beginEditing(e,t){if(this.state!==qn.VIRGIN)return;const i=this.hot,r=i.rowIndexMapper.getRenderableFromVisualIndex(this.row),s=i.columnIndexMapper.getRenderableFromVisualIndex(this.col);if(i.view.scrollViewport(i._createCellCoords(r,s)),this.state=qn.EDITING,this.isInFullEditMode()){const o=typeof e=="string"?e:jn(this.originalValue);this.setValue(o)}this.open(t),this._opened=!0,this.focus(),i.view.render(),i.runHooks("afterBeginEditing",this.row,this.col)}finishEditing(e,t,i){let r;if(i){const s=this._closeCallback;this._closeCallback=o=>{s&&s(o),i(o),this.hot.view.render()}}if(!this.isWaiting()){if(this.state===qn.VIRGIN){this.hot._registerTimeout(()=>{this._fireCallbacks(!0)});return}if(this.state===qn.EDITING){if(e){this.cancelChanges(),this.hot.view.render();return}const s=this.getValue();this.cellProperties.trimWhitespace?r=[[typeof s=="string"?String.prototype.trim.call(s||""):s]]:r=[[s]],this.state=qn.WAITING,this.saveValue(r,t),this.hot.getCellValidator(this.cellProperties)?this.hot.addHookOnce("postAfterValidate",o=>{this.state=qn.FINISHED,this.discardEditor(o)}):(this.state=qn.FINISHED,this.discardEditor(!0))}}}cancelChanges(){this.state=qn.FINISHED,this.discardEditor()}discardEditor(e){this.state===qn.FINISHED&&(e===!1&&this.cellProperties.allowInvalid!==!0?(this.hot.selectCell(this.row,this.col),this.focus(),this.state=qn.EDITING,this._fireCallbacks(!1)):(this.close(),this._opened=!1,this._fullEditMode=!1,this.state=qn.VIRGIN,this._fireCallbacks(!0),this.hot.getShortcutManager().setActiveContextName("grid")))}enableFullEditMode(){this._fullEditMode=!0}isInFullEditMode(){return this._fullEditMode}isOpened(){return this._opened}isWaiting(){return this.state===qn.WAITING}getEditedCellRect(){var e;const t=this.getEditedCell();if(!t)return;const{wtOverlays:i,wtViewport:r}=this.hot.view._wt,s=this.hot.rootWindow,o=xi(t),a=gn(t),l=xi(this.hot.rootElement),c=gn(this.hot.rootElement),u=i.topOverlay.holder,h=i.inlineStartOverlay.holder,d=u!==s?u.scrollTop:0,f=h!==s?h.scrollLeft:0,g=s.innerWidth-l.left-c,{wtTable:p}=(e=i.getParentOverlay(t))!==null&&e!==void 0?e:this.hot.view._wt,m=p.name,v=["master","inline_start"].includes(m)?d:0,y=["master","top","bottom"].includes(m)?f:0,w=o.top===l.top?0:1;let R=o.top-l.top-w-v,x=0;this.hot.isRtl()?x=s.innerWidth-o.left-a-g-1+y:x=o.left-l.left-1-y,["top","top_inline_start_corner"].includes(m)&&(R+=i.topOverlay.getOverlayOffset()),["inline_start","top_inline_start_corner"].includes(m)&&(x+=Math.abs(i.inlineStartOverlay.getOverlayOffset()));const S=this.hot.hasColHeaders(),T=this.hot.rowIndexMapper.getRenderableFromVisualIndex(this.row),P=this.hot.columnIndexMapper.getRenderableFromVisualIndex(this.col),A=this.hot.rowIndexMapper.getRenderableIndexesLength()-this.hot.view._wt.getSetting("fixedRowsBottom");(S&&T<=0||T===A)&&(R+=1),P<=0&&(x+=1);const L=r.rowsRenderCalculator.startPosition,W=r.columnsRenderCalculator.startPosition,F=Math.abs(i.inlineStartOverlay.getScrollPosition()),V=i.topOverlay.getScrollPosition(),H=Pi(this.hot.rootDocument);let N=t.offsetTop;if(["inline_start","master"].includes(m)&&(N+=L-V),["bottom","bottom_inline_start_corner"].includes(m)){const{wtViewport:z,wtTable:U}=i.bottomOverlay.clone;N+=z.getWorkspaceHeight()-U.getHeight()-H}let j=t.offsetLeft;this.hot.isRtl()?(j>=0?j=p.getWidth()-t.offsetLeft:j=Math.abs(j),j+=W-F-a):["top","master","bottom"].includes(m)&&(j+=W-F);const k=ul(this.TD,this.hot.rootWindow),K=this.hot.isRtl()?"borderRightWidth":"borderLeftWidth",ie=parseInt(k[K],10)>0?0:1,b=parseInt(k.borderTopWidth,10)>0?0:1,C=gn(t)+ie,_=ni(t)+b,I=L9(u)?H:0,$=N9(h)?H:0,M=this.hot.view.maximumVisibleElementWidth(j)-I+ie,B=Math.max(this.hot.view.maximumVisibleElementHeight(N)-$+b,23);return{top:R,start:x,height:_,maxHeight:B,width:C,maxWidth:M}}getEditedCellsLayerClass(){switch(this.checkEditorSection()){case"inline-start":return"ht_clone_left ht_clone_inline_start";case"bottom":return"ht_clone_bottom";case"bottom-inline-start-corner":return"ht_clone_bottom_left_corner ht_clone_bottom_inline_start_corner";case"top":return"ht_clone_top";case"top-inline-start-corner":return"ht_clone_top_left_corner ht_clone_top_inline_start_corner";default:return"ht_clone_master"}}getEditedCell(){return this.hot.getCell(this.row,this.col,!0)}checkEditorSection(){const e=this.hot.countRows();let t="";return this.row<this.hot.getSettings().fixedRowsTop?this.col<this.hot.getSettings().fixedColumnsStart?t="top-inline-start-corner":t="top":this.hot.getSettings().fixedRowsBottom&&this.row>=e-this.hot.getSettings().fixedRowsBottom?this.col<this.hot.getSettings().fixedColumnsStart?t="bottom-inline-start-corner":t="bottom":this.col<this.hot.getSettings().fixedColumnsStart&&(t="inline-start"),t}}qt(om,lK);const eIe={name:"editorCloseAndSaveByArrowKeys",callback(n,e,t){const i=n._getEditorManager(),r=i.getActiveEditor();r.isInFullEditMode()&&r.state===qn.EDITING||(i.closeEditorAndSaveChanges(),n.getSelected()&&(t.includes("arrowdown")?n.selection.transformStart(1,0):t.includes("arrowup")?n.selection.transformStart(-1,0):t.includes("arrowleft")?n.selection.transformStart(0,-1*n.getDirectionFactor()):t.includes("arrowright")&&n.selection.transformStart(0,n.getDirectionFactor())),e.preventDefault())}},tIe={name:"editorCloseAndSaveByEnter",callback(n,e){const t=n._getEditorManager();t.closeEditorAndSaveChanges(e.ctrlKey||e.metaKey),t.moveSelectionAfterEnter(e)}},nIe={name:"editorCloseWithoutSaving",callback(n){const e=n._getEditorManager();e.closeEditorAndRestoreOriginalValue(n.getShortcutManager().isCtrlPressed()),e.activeEditor.focus()}},iIe={name:"editorFastOpen",callback(n,e){const{highlight:t}=n.getSelectedRangeLast();t.isHeader()||n._getEditorManager().openEditor(null,e,!0)}},rIe={name:"editorOpen",callback(n,e,t){const i=n._getEditorManager(),r=n.getSelectedRangeLast(),{highlight:s}=r;if(n.selection.isMultiple()&&!r.isHeader()&&n.countRenderedCols()>0&&n.countRenderedRows()>0){const o=n.getSettings(),a=typeof o.enterMoves=="function"?o.enterMoves(e):o.enterMoves;t.includes("shift")?n.selection.transformFocus(-a.row,-a.col):n.selection.transformFocus(a.row,a.col);return}s.isHeader()||(n.getSettings().enterBeginsEditing?i.cellProperties.readOnly?i.moveSelectionAfterEnter(e):i.openEditor(null,e,!0):i.moveSelectionAfterEnter(e),bo(e))}};function sIe(){return[qPe,eIe,tIe,nIe,iIe,rIe]}const oIe={name:"extendCellsSelectionDown",callback(n){const{highlight:e}=n.getSelectedRangeLast();!n.selection.isSelectedByColumnHeader()&&!n.selection.isSelectedByCorner()&&(e.isCell()||e.isHeader()&&n.selection.isSelectedByRowHeader())&&n.selection.transformEnd(1,0)}},aIe={name:"extendCellsSelectionDownByViewportHeight",callback(n){const{to:e}=n.getSelectedRangeLast(),t=Math.min(e.row+n.countVisibleRows(),n.countRows()-1),i=n.rowIndexMapper.getNearestNotHiddenIndex(t,-1);if(i!==null){const r=n._createCellCoords(i,e.col),s=e.row-n.view.getFirstFullyVisibleRow(),o=Math.min(r.row-s,n.countRows()-1);n.selection.setRangeEnd(r),n.scrollViewportTo({row:o,verticalSnap:"top",horizontalSnap:"start"})}}},lIe={name:"extendCellsSelectionLeft",callback(n){const{highlight:e}=n.getSelectedRangeLast();!n.selection.isSelectedByRowHeader()&&!n.selection.isSelectedByCorner()&&(e.isCell()||e.isHeader()&&n.selection.isSelectedByColumnHeader())&&n.selection.transformEnd(0,-1*n.getDirectionFactor())}},cIe={name:"extendCellsSelectionRight",callback(n){const{highlight:e}=n.getSelectedRangeLast();!n.selection.isSelectedByRowHeader()&&!n.selection.isSelectedByCorner()&&(e.isCell()||e.isHeader()&&n.selection.isSelectedByColumnHeader())&&n.selection.transformEnd(0,n.getDirectionFactor())}},uIe={name:"extendCellsSelectionToColumns",callback(n){const{highlight:e,from:t,to:i}=n.getSelectedRangeLast();n.selection.isSelectedByRowHeader()?n.selection.selectAll(!0,!0):n.selectColumns(t.col,i.col,e)}},hIe={name:"extendCellsSelectionToMostBottom",callback(n){const{selection:e,rowIndexMapper:t}=n,{highlight:i,from:r,to:s}=n.getSelectedRangeLast(),o=i.isHeader()&&n.selection.isSelectedByRowHeader();if(i.isCell()||o){const a=t.getNearestNotHiddenIndex(n.countRows()-1,-1),l=r.clone();l.row=i.row,e.setRangeStart(l,void 0,!1,i.clone()),o&&e.selectedByRowHeader.add(e.getLayerLevel()),e.setRangeEnd(n._createCellCoords(a,s.col))}}},dIe={name:"extendCellsSelectionToMostInlineEnd",callback(n){const{selection:e,columnIndexMapper:t}=n,{highlight:i,from:r,to:s}=n.getSelectedRangeLast();if(!n.selection.isSelectedByRowHeader()&&!n.selection.isSelectedByCorner()&&i.isCell()){const o=t.getNearestNotHiddenIndex(n.countCols()-1,-1),a=r.clone();a.col=i.col,e.setRangeStart(a,void 0,!1,i.clone()),e.setRangeEnd(n._createCellCoords(s.row,o))}}},fIe={name:"extendCellsSelectionToMostInlineStart",callback(n){const{selection:e,columnIndexMapper:t}=n,{highlight:i,from:r,to:s}=n.getSelectedRangeLast();if(!n.selection.isSelectedByRowHeader()&&!n.selection.isSelectedByCorner()&&i.isCell()){const o=parseInt(n.getSettings().fixedColumnsStart,10),a=t.getNearestNotHiddenIndex(o,1),l=r.clone();l.col=i.col,e.setRangeStart(l,void 0,!1,i.clone()),e.setRangeEnd(n._createCellCoords(s.row,a))}}},gIe={name:"extendCellsSelectionToMostLeft",callback(n){const{selection:e,columnIndexMapper:t}=n,{highlight:i,from:r,to:s}=n.getSelectedRangeLast(),o=i.isHeader()&&n.selection.isSelectedByColumnHeader();if(i.isCell()||o){const a=t.getNearestNotHiddenIndex(...n.isRtl()?[n.countCols()-1,-1]:[0,1]),l=r.clone();l.col=i.col,e.setRangeStart(l,void 0,!1,i.clone()),o&&e.selectedByColumnHeader.add(e.getLayerLevel()),e.setRangeEnd(n._createCellCoords(s.row,a))}}},pIe={name:"extendCellsSelectionToMostRight",callback(n){const{selection:e,columnIndexMapper:t}=n,{highlight:i,from:r,to:s}=n.getSelectedRangeLast(),o=i.isHeader()&&n.selection.isSelectedByColumnHeader();if(i.isCell()||o){const a=t.getNearestNotHiddenIndex(...n.isRtl()?[0,1]:[n.countCols()-1,-1]),l=r.clone();l.col=i.col,e.setRangeStart(l,void 0,!1,i.clone()),o&&e.selectedByColumnHeader.add(e.getLayerLevel()),e.setRangeEnd(n._createCellCoords(s.row,a))}}},mIe={name:"extendCellsSelectionToMostTop",callback(n){const{selection:e,rowIndexMapper:t}=n,{highlight:i,from:r,to:s}=n.getSelectedRangeLast(),o=i.isHeader()&&n.selection.isSelectedByRowHeader();if(i.isCell()||o){const a=t.getNearestNotHiddenIndex(0,1),l=r.clone();l.row=i.row,e.setRangeStart(l,void 0,!1,i.clone()),o&&e.selectedByRowHeader.add(e.getLayerLevel()),e.setRangeEnd(n._createCellCoords(a,s.col))}}},bIe={name:"extendCellsSelectionToRows",callback(n){const{highlight:e,from:t,to:i}=n.getSelectedRangeLast();n.selection.isSelectedByColumnHeader()?n.selection.selectAll(!0,!0):n.selectRows(t.row,i.row,e)}},vIe={name:"extendCellsSelectionUp",callback(n){const{highlight:e}=n.getSelectedRangeLast();!n.selection.isSelectedByColumnHeader()&&!n.selection.isSelectedByCorner()&&(e.isCell()||e.isHeader()&&n.selection.isSelectedByRowHeader())&&n.selection.transformEnd(-1,0)}},wIe={name:"extendCellsSelectionUpByViewportHeight",callback(n){const{to:e}=n.getSelectedRangeLast(),t=Math.max(e.row-n.countVisibleRows(),0),i=n.rowIndexMapper.getNearestNotHiddenIndex(t,1);if(i!==null){const r=n._createCellCoords(i,e.col),s=e.row-n.view.getFirstFullyVisibleRow(),o=Math.max(r.row-s,0);n.selection.setRangeEnd(r),n.scrollViewportTo({row:o,verticalSnap:"top",horizontalSnap:"start"})}}};function yIe(){return[oIe,aIe,lIe,cIe,uIe,hIe,dIe,fIe,gIe,pIe,mIe,bIe,vIe,wIe]}const CIe={name:"moveCellSelectionDown",callback(n){let{selection:e}=n;e.transformStart(1,0)}},SIe={name:"moveCellSelectionDownByViewportHeight",callback(n){const{navigableHeaders:e}=n.getSettings(),t=e?n.countColHeaders():0,{row:i}=n.getSelectedRangeLast().highlight;let r=n.countVisibleRows()+t;i===n.countRows()-1?r=1:i+r>n.countRows()&&(r=n.countRows()-i-1),n.selection.transformStart(r,0),n.getSelectedRangeLast().highlight.row<0&&n.scrollViewportTo({row:0})}},_Ie={name:"moveCellSelectionInlineEnd",callback(n,e){const t=n.getSettings(),i=n.getSelectedRangeLast(),r=typeof t.tabMoves=="function"?t.tabMoves(e):t.tabMoves;n.selection.isMultiple()&&!i.isHeader()&&n.countRenderedCols()>0&&n.countRenderedRows()>0?n.selection.transformFocus(-r.row,-r.col):n.selection.transformStart(-r.row,-r.col)}},RIe={name:"moveCellSelectionInlineStart",callback(n,e){const t=n.getSettings(),i=n.getSelectedRangeLast(),r=typeof t.tabMoves=="function"?t.tabMoves(e):t.tabMoves;n.selection.isMultiple()&&!i.isHeader()&&n.countRenderedCols()>0&&n.countRenderedRows()>0?n.selection.transformFocus(r.row,r.col):n.selection.transformStart(r.row,r.col)}},EIe={name:"moveCellSelectionLeft",callback(n){n.selection.transformStart(0,-1*n.getDirectionFactor())}},xIe={name:"moveCellSelectionRight",callback(n){n.selection.transformStart(0,n.getDirectionFactor())}},TIe={name:"moveCellSelectionToMostBottom",callback(n){const{col:e}=n.getSelectedRangeLast().highlight;let t=n.rowIndexMapper.getNearestNotHiddenIndex(n.countRows()-1,-1);t===null&&(t=-1),n.selection.setRangeStart(n._createCellCoords(t,e))}},MIe={name:"moveCellSelectionToMostBottomInlineEnd",callback(n){const{selection:e,rowIndexMapper:t,columnIndexMapper:i}=n,r=parseInt(n.getSettings().fixedRowsBottom,10),s=t.getNearestNotHiddenIndex(n.countRows()-r-1,-1),o=i.getNearestNotHiddenIndex(n.countCols()-1,-1);e.setRangeStart(n._createCellCoords(s,o))}},AIe={name:"moveCellSelectionToMostInlineEnd",callback(n){const{selection:e,columnIndexMapper:t}=n;e.setRangeStart(n._createCellCoords(n.getSelectedRangeLast().highlight.row,t.getNearestNotHiddenIndex(n.countCols()-1,-1)))}},PIe={name:"moveCellSelectionToMostInlineStart",callback(n){const{selection:e,columnIndexMapper:t}=n,i=parseInt(n.getSettings().fixedColumnsStart,10),r=n.getSelectedRangeLast().highlight.row,s=t.getNearestNotHiddenIndex(i,1);e.setRangeStart(n._createCellCoords(r,s))}},IIe={name:"moveCellSelectionToMostLeft",callback(n){const{selection:e,columnIndexMapper:t}=n,i=n.getSelectedRangeLast().highlight.row;let r=t.getNearestNotHiddenIndex(...n.isRtl()?[n.countCols()-1,-1]:[0,1]);r===null&&(r=n.isRtl()?-1:-n.countRowHeaders()),e.setRangeStart(n._createCellCoords(i,r))}},OIe={name:"moveCellSelectionToMostRight",callback(n){const{selection:e,columnIndexMapper:t}=n,{row:i}=n.getSelectedRangeLast().highlight;let r=t.getNearestNotHiddenIndex(...n.isRtl()?[0,1]:[n.countCols()-1,-1]);r===null&&(r=n.isRtl()?-n.countRowHeaders():-1),e.setRangeStart(n._createCellCoords(i,r))}},kIe={name:"moveCellSelectionToMostTop",callback(n){const{col:e}=n.getSelectedRangeLast().highlight;let t=n.rowIndexMapper.getNearestNotHiddenIndex(0,1);t===null&&(t=-n.countColHeaders()),n.selection.setRangeStart(n._createCellCoords(t,e))}},DIe={name:"moveCellSelectionToMostTopInlineStart",callback(n){const{selection:e,rowIndexMapper:t,columnIndexMapper:i}=n,r=parseInt(n.getSettings().fixedRowsTop,10),s=parseInt(n.getSettings().fixedColumnsStart,10),o=t.getNearestNotHiddenIndex(r,1),a=i.getNearestNotHiddenIndex(s,1);e.setRangeStart(n._createCellCoords(o,a))}},LIe={name:"moveCellSelectionUp",callback(n){let{selection:e}=n;e.transformStart(-1,0)}},NIe={name:"moveCellSelectionUpByViewportHight",callback(n){const{navigableHeaders:e}=n.getSettings(),t=e?n.countColHeaders():0,{row:i}=n.getSelectedRangeLast().highlight;let r=-(n.countVisibleRows()+t);i===-t?r=-1:i+r<t&&(r=-(i+t)),n.selection.transformStart(r,0),n.getSelectedRangeLast().highlight.row<0&&n.scrollViewportTo({row:0})}};function HIe(){return[CIe,SIe,_Ie,RIe,EIe,xIe,TIe,MIe,AIe,PIe,IIe,OIe,kIe,DIe,LIe,NIe]}const $Ie={name:"emptySelectedCells",callback(n){n.emptySelectedCells(),n._getEditorManager().prepareEditor()}},FIe={name:"scrollToFocusedCell",callback(n){const{highlight:e}=n.getSelectedRangeLast(),t=n.view.getFirstFullyVisibleRow()-1,i=n.view.getFirstFullyVisibleColumn()-1,r=n.view.getLastFullyVisibleRow()+1,s=n.view.getLastFullyVisibleColumn()+1,o=n._createCellCoords(t,i),a=n._createCellCoords(r,s);if(!n._createCellRange(o,o,a).includes(e)&&(e.row>=0||e.col>=0)){const c={};if(e.col>=0){const u=Math.floor(n.countVisibleCols()/2);c.col=Math.max(e.col-u,0)}if(e.row>=0){const u=Math.floor(n.countVisibleRows()/2);c.row=Math.max(e.row-u,0)}n.scrollViewportTo({...c,verticalSnap:"top",horizontalSnap:"start"})}}},BIe={name:"selectAllCells",callback(n){n.selection.selectAll(!0,!0,{disableHeadersHighlight:!0})}},VIe={name:"selectAllCellsAndHeaders",callback(n){n.selection.selectAll(!0,!0,{disableHeadersHighlight:!1})}},WIe={name:"populateSelectedCellsData",callback(n){const e=n.getSelectedRange(),{row:t,col:i}=e[e.length-1].highlight.normalize(),r=n.getDataAtCell(t,i),s=new Map;for(let o=0;o<e.length;o++)e[o].forAll((a,l)=>{if(a>=0&&l>=0&&(a!==t||l!==i)){const{readOnly:c}=n.getCellMeta(a,l);c||s.set(`${a}x${l}`,[a,l,r])}});n.setDataAtCell(Array.from(s.values()))}},jIe=[...sIe(),...yIe(),...HIe(),$Ie,FIe,BIe,VIe,WIe];function cK(n){const e={};return jIe.forEach(t=>{let{name:i,callback:r}=t;e[i]=function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return r(n,...o)}}),e}function zIe(n){const e=n.getShortcutManager().addContext("editor"),t=cK(n),i={group:uh};e.addShortcuts([{keys:[["Enter"],["Enter","Shift"]],callback:(r,s)=>t.editorCloseAndSaveByEnter(r,s)},{keys:[["Enter","Control/Meta"],["Enter","Control/Meta","Shift"]],captureCtrl:!0,callback:(r,s)=>t.editorCloseAndSaveByEnter(r,s)},{keys:[["Tab"],["Tab","Shift"],["PageDown"],["PageUp"]],forwardToContext:n.getShortcutManager().getContext("grid"),callback:(r,s)=>t.editorCloseAndSave(r,s)},{keys:[["ArrowDown"],["ArrowUp"],["ArrowLeft"],["ArrowRight"]],preventDefault:!1,callback:(r,s)=>t.editorCloseAndSaveByArrowKeys(r,s)},{keys:[["Escape"],["Escape","Control/Meta"]],callback:()=>t.editorCloseWithoutSaving()}],i)}function UIe(n){const e=n.getShortcutManager().addContext("grid"),t=cK(n),i={runOnlyIf:()=>{const{navigableHeaders:r}=n.getSettings();return De(n.getSelected())&&(r||!r&&n.countRenderedRows()>0&&n.countRenderedCols()>0)},group:aK};e.addShortcuts([{keys:[["F2"]],callback:r=>t.editorFastOpen(r)},{keys:[["Enter"],["Enter","Shift"]],callback:(r,s)=>t.editorOpen(r,s)},{keys:[["Backspace"],["Delete"]],callback:()=>t.emptySelectedCells()}],{group:uh,runOnlyIf:()=>De(n.getSelected())}),e.addShortcuts([{keys:[["Control/Meta","A"]],callback:()=>t.selectAllCells(),runOnlyIf:()=>{var r;return!((r=n.getSelectedRangeLast())!==null&&r!==void 0&&r.highlight.isHeader())}},{keys:[["Control/Meta","A"]],callback:()=>{},runOnlyIf:()=>{var r;return(r=n.getSelectedRangeLast())===null||r===void 0?void 0:r.highlight.isHeader()},preventDefault:!0},{keys:[["Control/Meta","Shift","Space"]],callback:()=>t.selectAllCellsAndHeaders()},{keys:[["Control/Meta","Enter"]],callback:()=>t.populateSelectedCellsData(),runOnlyIf:()=>{var r,s;return!((r=n.getSelectedRangeLast())!==null&&r!==void 0&&r.highlight.isHeader())&&((s=n.getSelectedRangeLast())===null||s===void 0?void 0:s.getCellsCount())>1}},{keys:[["Control","Space"]],captureCtrl:!0,callback:()=>t.extendCellsSelectionToColumns()},{keys:[["Shift","Space"]],stopPropagation:!0,callback:()=>t.extendCellsSelectionToRows()},{keys:[["ArrowUp"]],callback:()=>t.moveCellSelectionUp()},{keys:[["ArrowUp","Control/Meta"]],captureCtrl:!0,callback:()=>t.moveCellSelectionToMostTop()},{keys:[["ArrowUp","Shift"]],callback:()=>t.extendCellsSelectionUp()},{keys:[["ArrowUp","Shift","Control/Meta"]],captureCtrl:!0,callback:()=>t.extendCellsSelectionToMostTop(),runOnlyIf:()=>!(n.selection.isSelectedByCorner()||n.selection.isSelectedByColumnHeader())},{keys:[["ArrowDown"]],callback:()=>t.moveCellSelectionDown()},{keys:[["ArrowDown","Control/Meta"]],captureCtrl:!0,callback:()=>t.moveCellSelectionToMostBottom()},{keys:[["ArrowDown","Shift"]],callback:()=>t.extendCellsSelectionDown()},{keys:[["ArrowDown","Shift","Control/Meta"]],captureCtrl:!0,callback:()=>t.extendCellsSelectionToMostBottom(),runOnlyIf:()=>!(n.selection.isSelectedByCorner()||n.selection.isSelectedByColumnHeader())},{keys:[["ArrowLeft"]],callback:()=>t.moveCellSelectionLeft()},{keys:[["ArrowLeft","Control/Meta"]],captureCtrl:!0,callback:()=>t.moveCellSelectionToMostLeft()},{keys:[["ArrowLeft","Shift"]],callback:()=>t.extendCellsSelectionLeft()},{keys:[["ArrowLeft","Shift","Control/Meta"]],captureCtrl:!0,callback:()=>t.extendCellsSelectionToMostLeft(),runOnlyIf:()=>!(n.selection.isSelectedByCorner()||n.selection.isSelectedByRowHeader())},{keys:[["ArrowRight"]],callback:()=>t.moveCellSelectionRight()},{keys:[["ArrowRight","Control/Meta"]],captureCtrl:!0,callback:()=>t.moveCellSelectionToMostRight()},{keys:[["ArrowRight","Shift"]],callback:()=>t.extendCellsSelectionRight()},{keys:[["ArrowRight","Shift","Control/Meta"]],captureCtrl:!0,callback:()=>t.extendCellsSelectionToMostRight(),runOnlyIf:()=>!(n.selection.isSelectedByCorner()||n.selection.isSelectedByRowHeader())},{keys:[["Home"]],captureCtrl:!0,callback:()=>t.moveCellSelectionToMostInlineStart(),runOnlyIf:()=>n.view.isMainTableNotFullyCoveredByOverlays()},{keys:[["Home","Shift"]],callback:()=>t.extendCellsSelectionToMostInlineStart()},{keys:[["Home","Control/Meta"]],captureCtrl:!0,callback:()=>t.moveCellSelectionToMostTopInlineStart(),runOnlyIf:()=>n.view.isMainTableNotFullyCoveredByOverlays()},{keys:[["End"]],captureCtrl:!0,callback:()=>t.moveCellSelectionToMostInlineEnd(),runOnlyIf:()=>n.view.isMainTableNotFullyCoveredByOverlays()},{keys:[["End","Shift"]],callback:()=>t.extendCellsSelectionToMostInlineEnd()},{keys:[["End","Control/Meta"]],captureCtrl:!0,callback:()=>t.moveCellSelectionToMostBottomInlineEnd(),runOnlyIf:()=>n.view.isMainTableNotFullyCoveredByOverlays()},{keys:[["PageUp"]],callback:()=>t.moveCellSelectionUpByViewportHight()},{keys:[["PageUp","Shift"]],callback:()=>t.extendCellsSelectionUpByViewportHeight()},{keys:[["PageDown"]],callback:()=>t.moveCellSelectionDownByViewportHeight()},{keys:[["PageDown","Shift"]],callback:()=>t.extendCellsSelectionDownByViewportHeight()},{keys:[["Tab"]],preventDefault:!1,callback:r=>t.moveCellSelectionInlineStart(r)},{keys:[["Shift","Tab"]],preventDefault:!1,callback:r=>t.moveCellSelectionInlineEnd(r)},{keys:[["Control/Meta","Backspace"]],callback:()=>t.scrollToFocusedCell()}],i)}function GIe(n){[UIe,zIe].forEach(e=>e(n))}function YIe(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const t=n.rootElement,i=aW(n),r=aW(n);return i.addEventListener("focus",()=>e==null?void 0:e.onFocusFromTop()),r.addEventListener("focus",()=>e==null?void 0:e.onFocusFromBottom()),t.firstChild.before(i),t.lastChild.after(r),{activate(){n._registerTimeout(()=>{i.tabIndex=0,r.tabIndex=0},10)},deactivate(){n._registerTimeout(()=>{i.tabIndex=-1,r.tabIndex=-1},10)}}}function aW(n){const t=n.rootDocument.createElement("input");return t.type="text",t.classList.add("htFocusCatcher"),n.getSettings().ariaTags&&ze(t,[qa(),If()]),t}function KIe(n){const e=qIe(n);let t;const{activate:i,deactivate:r}=YIe(n,{onFocusFromTop(){var h;const d=(h=e(t))!==null&&h!==void 0?h:$I(n);d&&(n.runHooks("modifyFocusOnTabNavigation","from_above",d),n.selectCell(d.row,d.col)),n.listen()},onFocusFromBottom(){var h;const d=(h=e(t))!==null&&h!==void 0?h:FI(n);d&&(n.runHooks("modifyFocusOnTabNavigation","from_below",d),n.selectCell(d.row,d.col)),n.listen()}}),s={wrapped:!1,flipped:!1};let o=!0,a=!1,l=!1;n.addHook("afterListen",()=>r()),n.addHook("afterUnlisten",()=>i()),n.addHook("afterSelection",(h,d,f,g,p)=>{if(a&&(s.wrapped&&s.flipped||l)&&(l=!1,p.value=!0),o){var m;t=(m=n.getSelectedRangeLast())===null||m===void 0?void 0:m.highlight}}),n.addHook("beforeRowWrap",(h,d,f)=>{s.wrapped=!0,s.flipped=f});function c(){s.wrapped=!1,s.flipped=!1,n.deselectCell(),n.unlisten()}const u={keys:[["Tab"],["Shift","Tab"]],preventDefault:!1,stopPropagation:!1,relativeToGroup:aK,group:"focusCatcher"};n.getShortcutManager().getContext("grid").addShortcuts([{...u,callback:()=>{const{tabNavigation:h}=n.getSettings();a=!0,n.getSelectedRangeLast()&&!h&&(o=!1),h||(l=!0)},position:"before"},{...u,callback:h=>{const{tabNavigation:d,autoWrapRow:f}=n.getSettings();if(a=!1,o=!0,!d||!n.selection.isSelected()||f&&s.wrapped&&s.flipped||!f&&s.wrapped)return f&&s.wrapped&&s.flipped&&(t=h.shiftKey?$I(n):FI(n)),c(),!1;h.preventDefault()},position:"after"}])}function $I(n){const{rowIndexMapper:e,columnIndexMapper:t}=n,{navigableHeaders:i}=n.getSettings();let r=i&&n.countColHeaders()>0?-n.countColHeaders():0,s=i&&n.countRowHeaders()>0?-n.countRowHeaders():0;return r===0&&(r=e.getVisualFromRenderableIndex(r)),s===0&&(s=t.getVisualFromRenderableIndex(s)),r===null||s===null?null:n._createCellCoords(r,s)}function FI(n){var e,t;const{rowIndexMapper:i,columnIndexMapper:r}=n,{navigableHeaders:s}=n.getSettings();let o=i.getRenderableIndexesLength()-1,a=r.getRenderableIndexesLength()-1;if(o<0){if(!s||n.countColHeaders()===0)return null;o=-1}if(a<0){if(!s||n.countColHeaders()===0)return null;a=-1}return n._createCellCoords((e=i.getVisualFromRenderableIndex(o))!==null&&e!==void 0?e:o,(t=r.getVisualFromRenderableIndex(a))!==null&&t!==void 0?t:a)}function qIe(n){return e=>{if(!e)return null;const t=$I(n),i=FI(n);return e.col<t.col&&(e.col=t.col),e.col>i.col&&(e.col=i.col),e.row<t.row&&(e.row=t.row),e.row>i.row&&(e.row=i.row),e}}function XIe(n){return e=>{let{col:t}=e;n.scrollViewportTo({col:t})}}function ZIe(){return()=>{}}function QIe(n){return e=>{n.scrollViewportTo(e.toObject())}}function JIe(n){return e=>{n.scrollViewportTo(e.toObject())}}function eOe(n){return e=>{n.scrollViewportTo(e.toObject())}}function tOe(n){return e=>{let{row:t}=e;n.scrollViewportTo({row:t})}}function nOe(n){return e=>{const t=n.selection.getSelectionSource(),{row:i,col:r}=e;if(i<0&&r>=0)n.scrollViewportTo({col:r});else if(r<0&&i>=0)n.scrollViewportTo({row:i});else{if(t==="mouse"&&(r===n.view.getLastPartiallyVisibleColumn()||i===n.view.getLastPartiallyVisibleRow()))return;n.scrollViewportTo({row:i,col:r})}}}function iOe(n){const{selection:e}=n;let t=!1,i=!1;return{resume(){i=!1},suspend(){i=!0},skipNextScrollCycle(){t=!0},scrollTo(r){var s;if(t||i){t=!1;return}let o;e.isFocusSelectionChanged()?o=QIe(n):e.isSelectedByCorner()?o=ZIe():e.isSelectedByRowHeader()?o=tOe(n):e.isSelectedByColumnHeader()?o=XIe(n):e.getSelectedRange().size()===1&&e.isMultiple()?o=JIe(n):e.getSelectedRange().size()===1&&!e.isMultiple()?o=nOe(n):e.getSelectedRange().size()>1&&(o=eOe(n)),(s=o)===null||s===void 0||s(r)}}}const lW=new Map([[" ","space"],["spacebar","space"],["scroll","scrolllock"],["del","delete"],["esc","escape"],["medianexttrack","mediatracknext"],["mediaprevioustrack","mediatrackprevious"],["volumeup","audiovolumeup"],["volumedown","audiovolumedown"],["volumemute","audiovolumemute"],["multiply","*"],["add","+"],["divide","/"],["subtract","-"],["left","arrowleft"],["right","arrowright"],["up","arrowup"],["down","arrowdown"]]),rC=n=>n.map(e=>{const t=e.toLowerCase();return lW.has(t)?lW.get(t):t}).sort().join("+"),rOe=n=>n.split("+"),cW=new Map([[96,"numpad0"],[97,"numpad1"],[98,"numpad2"],[99,"numpad3"],[100,"numpad4"],[101,"numpad5"],[102,"numpad6"],[103,"numpad7"],[104,"numpad8"],[105,"numpad9"],[106,"multiply"],[107,"add"],[108,"decimal"],[109,"subtract"],[110,"decimal"],[111,"divide"],[112,"f1"],[113,"f2"],[114,"f3"],[115,"f4"],[116,"f5"],[117,"f6"],[118,"f7"],[119,"f8"],[120,"f9"],[121,"f10"],[122,"f11"],[123,"f12"],[186,"semicolon"],[187,"equal"],[188,"comma"],[189,"minus"],[190,"period"],[191,"slash"],[192,"backquote"],[219,"bracketleft"],[220,"backslash"],[221,"bracketright"],[222,"quote"]]),qT=n=>{let{which:e,key:t}=n;if(cW.has(e))return cW.get(e);const i=String.fromCharCode(e).toLowerCase();return/^[a-z0-9]$/.test(i)?i:t.toLowerCase()},uK=Symbol("shortcut-context");function hK(n){return ct(n)&&n.__kindOf===uK}const sOe=n=>{const e=oE({errorIdExists:l=>`The "${l}" shortcut is already registered in the "${n}" context.`}),t=function(){let{keys:l,callback:c,group:u,runOnlyIf:h=()=>!0,captureCtrl:d=!1,preventDefault:f=!0,stopPropagation:g=!1,relativeToGroup:p,position:m,forwardToContext:v}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(fn(u))throw new Error("You need to define the shortcut's group.");if(un(c)===!1)throw new Error("The shortcut's callback needs to be a function.");if(Array.isArray(l)===!1)throw new Error(Kt`Pass the shortcut\'s keys as an array of arrays,\x20
      using the KeyboardEvent.key properties:\x20
      https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key/Key_Values.`);const y={callback:c,group:u,runOnlyIf:h,captureCtrl:d,preventDefault:f,stopPropagation:g};De(p)&&(y.relativeToGroup=p,y.position=m),hK(v)&&(y.forwardToContext=v),l.forEach(w=>{const R=rC(w);if(e.hasItem(R)){const S=e.getItem(R);let T=S.findIndex(P=>P.group===p);T!==-1?m==="before"?T-=1:T+=1:T=S.length,S.splice(T,0,y)}else e.addItem(R,[y])})},i=function(l){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};l.forEach(u=>{ut(c,(h,d)=>{Object.prototype.hasOwnProperty.call(u,d)===!1&&(u[d]=c[d])}),t(u)})},r=l=>{const c=rC(l);e.removeItem(c)};return{__kindOf:uK,addShortcut:t,addShortcuts:i,getShortcuts:l=>{const c=rC(l),u=e.getItem(c);return De(u)?u.slice():[]},hasShortcut:l=>{const c=rC(l);return e.hasItem(c)},removeShortcutsByKeys:r,removeShortcutsByGroup:l=>{e.getItems().forEach(u=>{let[h,d]=u;const f=d.filter(g=>g.group!==l);f.length===0?r(rOe(h)):(d.length=0,d.push(...f))})}}};function oOe(){const n=new Set;return{press(e){n.add(e)},release(e){n.delete(e)},releaseAll(){n.clear()},isPressed(e){return n.has(e)}}}const aOe=["meta","alt","shift","control"],Qm=oOe(),Jm=[];let sC=0;function lOe(n,e,t,i,r){const s=f=>aOe.includes(f),o=function(f){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const p=[];return f.altKey&&p.push("alt"),g&&(f.ctrlKey||f.metaKey)?p.push("control/meta"):(f.ctrlKey&&p.push("control"),f.metaKey&&p.push("meta")),f.shiftKey&&p.push("shift"),p},a=f=>{if(e(f)===!1)return;const g=t(f);if(f.keyCode===229||g===!1||vu(f))return;const p=qT(f);let m=[];s(p)||(m=o(f));const v=[p].concat(m);!r(f,v)&&(Rw()&&m.includes("meta")||!Rw()&&m.includes("control"))&&r(f,[p].concat(o(f,!0))),i(f)},l=f=>{if(f.key){const g=qT(f);s(g)&&Qm.press(g)}},c=f=>{if(f.key){const g=qT(f);s(g)&&Qm.release(g)}},u=()=>{Qm.releaseAll()};return{mount:()=>{let f=n;for(sC+=1;f;)sC===1&&(f.document.documentElement.addEventListener("keydown",l),Jm.push({event:"keydown",listener:l}),f.document.documentElement.addEventListener("keyup",c),Jm.push({event:"keyup",listener:c})),f.document.documentElement.addEventListener("keydown",a),f.document.documentElement.addEventListener("blur",u),f=af(f)},unmount:()=>{let f=n;for(sC-=1;f;){if(sC===0){for(let g=0;g<Jm.length;g++){const{event:p,listener:m}=Jm[g];f.document.documentElement.removeEventListener(p,m)}Jm.length=0}f.document.documentElement.removeEventListener("keydown",a),f.document.documentElement.removeEventListener("blur",u),f=af(f)}},isPressed:f=>Qm.isPressed(f),releasePressedKeys:()=>Qm.releaseAll()}}const cOe=n=>{let{ownerWindow:e,handleEvent:t,beforeKeyDown:i,afterKeyDown:r}=n;const s=oE({errorIdExists:g=>`The "${g}" context name is already registered.`});let o="grid";const a=g=>{const p=sOe(g);return s.addItem(g,p),p},l=()=>o,c=g=>s.getItem(g),u=g=>{if(!s.hasItem(g))throw new Error(Kt`You've tried to activate the "${g}" shortcut context\x20
        that does not exist. Before activation, register the context using the "addContext" method.`);o=g};let h=!1;const d=function(g,p){let m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:l();const v=hK(m)?m:c(m);let y=!1;if(!v.hasShortcut(p))return y;const w=v.getShortcuts(p);for(let R=0;R<w.length;R++){const{callback:x,runOnlyIf:S,preventDefault:T,stopPropagation:P,captureCtrl:E,forwardToContext:A}=w[R];if(S(g)===!0){if(h=E,y=x(g,p)===!1,h=!1,T&&g.preventDefault(),P&&(bo(g),g.stopPropagation()),y)break;A&&d(g,p,A)}}return y},f=lOe(e,t,i,r,d);return f.mount(),{addContext:a,getActiveContextName:l,getContext:c,setActiveContextName:u,isCtrlPressed:()=>!h&&(f.isPressed("control")||f.isPressed("meta")),releasePressedKeys:()=>f.releasePressedKeys(),destroy:()=>f.unmount()}};let XT=null;const ZT=new Map;function dK(n,e){var t,i=this;let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=this;const o=new uo(s);let a,l,c,u,h,d,f=!0;UMe(r)&&zMe(this),this.rootElement=n,this.rootDocument=n.ownerDocument,this.rootWindow=this.rootDocument.defaultView,this.isDestroyed=!1,this.renderSuspendedCounter=0,this.executionSuspendedCounter=0;const g=(t=e==null?void 0:e.layoutDirection)!==null&&t!==void 0?t:"inherit",p=["rtl","ltr"].includes(g)?g:this.rootWindow.getComputedStyle(this.rootElement).direction;this.rootElement.setAttribute("dir",p),this.isRtl=function(){return p==="rtl"},this.isLtr=function(){return!s.isRtl()},this.getDirectionFactor=function(){return s.isLtr()?1:-1},e.language=BAe(e.language);const m=new oK(s,e,[VPe,KPe]),v=m.getTableMeta(),y=m.getGlobalMeta(),w=oE();this.container=this.rootDocument.createElement("div"),this.renderCall=!1,n.insertBefore(this.container,n.firstChild),DS(this)&&v9(e.licenseKey,n),this.guid=`ht_${ND()}`,ZT.set(this.guid,this),this.columnIndexMapper=new LI,this.rowIndexMapper=new LI,this.columnIndexMapper.addLocalHook("indexesSequenceChange",b=>{s.runHooks("afterColumnSequenceChange",b)}),this.rowIndexMapper.addLocalHook("indexesSequenceChange",b=>{s.runHooks("afterRowSequenceChange",b)}),l=new rAe(s),(!this.rootElement.id||this.rootElement.id.substring(0,3)==="ht_")&&(this.rootElement.id=this.guid);const R=b=>{const{row:C,col:_}=b;return s._createCellCoords(C>=0?s.rowIndexMapper.getRenderableFromVisualIndex(C):C,_>=0?s.columnIndexMapper.getRenderableFromVisualIndex(_):_)},x=b=>{const{row:C,col:_}=b;return s._createCellCoords(C>=0?s.rowIndexMapper.getVisualFromRenderableIndex(C):C,_>=0?s.columnIndexMapper.getVisualFromRenderableIndex(_):_)},S=(b,C)=>{const _=C>b?1:-1,I=Math.min(b,C),$=Math.max(b,C),M=s.rowIndexMapper.getNearestNotHiddenIndex(b,_);return M===null||_===1&&M>$||_===-1&&M<I?null:M>=0?s.rowIndexMapper.getRenderableFromVisualIndex(M):M},T=(b,C)=>{const _=C>b?1:-1,I=Math.min(b,C),$=Math.max(b,C),M=s.columnIndexMapper.getNearestNotHiddenIndex(b,_);return M===null||_===1&&M>$||_===-1&&M<I?null:M>=0?s.columnIndexMapper.getRenderableFromVisualIndex(M):M};let P=new iK(v,{rowIndexMapper:s.rowIndexMapper,columnIndexMapper:s.columnIndexMapper,countCols:()=>s.countCols(),countRows:()=>s.countRows(),propToCol:b=>a.propToCol(b),isEditorOpened:()=>s.getActiveEditor()?s.getActiveEditor().isOpened():!1,countRenderableColumns:()=>this.view.countRenderableColumns(),countRenderableRows:()=>this.view.countRenderableRows(),countRowHeaders:()=>this.countRowHeaders(),countColHeaders:()=>this.countColHeaders(),countRenderableRowsInRange:function(){return i.view.countRenderableRowsInRange(...arguments)},countRenderableColumnsInRange:function(){return i.view.countRenderableColumnsInRange(...arguments)},getShortcutManager:()=>s.getShortcutManager(),createCellCoords:(b,C)=>s._createCellCoords(b,C),createCellRange:(b,C,_)=>s._createCellRange(b,C,_),visualToRenderableCoords:R,renderableToVisualCoords:x,findFirstNonHiddenRenderableRow:S,findFirstNonHiddenRenderableColumn:T,isDisabledCellSelection:(b,C)=>b<0||C<0?s.getSettings().disableVisualSelection:s.getCellMeta(b,C).disableVisualSelection});this.selection=P;const E=b=>{let{hiddenIndexesChanged:C}=b;C&&this.selection.commit()};this.columnIndexMapper.addLocalHook("cacheUpdated",E),this.rowIndexMapper.addLocalHook("cacheUpdated",E),this.selection.addLocalHook("afterSetRangeEnd",(b,C)=>{const _=no(!1),I=this.selection.getSelectedRange(),{from:$,to:M}=I.current(),B=I.size()-1;this.runHooks("afterSelection",$.row,$.col,M.row,M.col,_,B),this.runHooks("afterSelectionByProp",$.row,s.colToProp($.col),M.row,s.colToProp(M.col),_,B),C&&(!_.isTouched()||_.isTouched()&&!_.value)&&d.scrollTo(b);const z=P.isSelectedByRowHeader(),U=P.isSelectedByColumnHeader();z&&U?ge(this.rootElement,["ht__selection--rows","ht__selection--columns"]):z?(Qe(this.rootElement,"ht__selection--columns"),ge(this.rootElement,"ht__selection--rows")):U?(Qe(this.rootElement,"ht__selection--rows"),ge(this.rootElement,"ht__selection--columns")):Qe(this.rootElement,["ht__selection--rows","ht__selection--columns"]),P.getSelectionSource()!=="shift"&&u.closeEditor(null),s.view.render(),u.prepareEditor()}),this.selection.addLocalHook("beforeSetFocus",b=>{this.runHooks("beforeSelectionFocusSet",b.row,b.col)}),this.selection.addLocalHook("afterSetFocus",b=>{const C=no(!1);this.runHooks("afterSelectionFocusSet",b.row,b.col,C),(!C.isTouched()||C.isTouched()&&!C.value)&&d.scrollTo(b),u.closeEditor(),s.view.render(),u.prepareEditor()}),this.selection.addLocalHook("afterSelectionFinished",b=>{const C=b.length-1,{from:_,to:I}=b[C];this.runHooks("afterSelectionEnd",_.row,_.col,I.row,I.col,C),this.runHooks("afterSelectionEndByProp",_.row,s.colToProp(_.col),I.row,s.colToProp(I.col),C)}),this.selection.addLocalHook("afterIsMultipleSelection",b=>{const C=this.runHooks("afterIsMultipleSelection",b.value);b.value&&(b.value=C)}),this.selection.addLocalHook("afterDeselect",()=>{u.closeEditor(),s.view.render(),Qe(this.rootElement,["ht__selection--rows","ht__selection--columns"]),this.runHooks("afterDeselect")}),this.selection.addLocalHook("beforeHighlightSet",()=>this.runHooks("beforeSelectionHighlightSet")).addLocalHook("beforeSetRangeStart",function(){for(var b=arguments.length,C=new Array(b),_=0;_<b;_++)C[_]=arguments[_];return i.runHooks("beforeSetRangeStart",...C)}).addLocalHook("beforeSetRangeStartOnly",function(){for(var b=arguments.length,C=new Array(b),_=0;_<b;_++)C[_]=arguments[_];return i.runHooks("beforeSetRangeStartOnly",...C)}).addLocalHook("beforeSetRangeEnd",function(){for(var b=arguments.length,C=new Array(b),_=0;_<b;_++)C[_]=arguments[_];return i.runHooks("beforeSetRangeEnd",...C)}).addLocalHook("beforeSelectColumns",function(){for(var b=arguments.length,C=new Array(b),_=0;_<b;_++)C[_]=arguments[_];return i.runHooks("beforeSelectColumns",...C)}).addLocalHook("afterSelectColumns",function(){for(var b=arguments.length,C=new Array(b),_=0;_<b;_++)C[_]=arguments[_];return i.runHooks("afterSelectColumns",...C)}).addLocalHook("beforeSelectRows",function(){for(var b=arguments.length,C=new Array(b),_=0;_<b;_++)C[_]=arguments[_];return i.runHooks("beforeSelectRows",...C)}).addLocalHook("afterSelectRows",function(){for(var b=arguments.length,C=new Array(b),_=0;_<b;_++)C[_]=arguments[_];return i.runHooks("afterSelectRows",...C)}).addLocalHook("beforeModifyTransformStart",function(){for(var b=arguments.length,C=new Array(b),_=0;_<b;_++)C[_]=arguments[_];return i.runHooks("modifyTransformStart",...C)}).addLocalHook("afterModifyTransformStart",function(){for(var b=arguments.length,C=new Array(b),_=0;_<b;_++)C[_]=arguments[_];return i.runHooks("afterModifyTransformStart",...C)}).addLocalHook("beforeModifyTransformFocus",function(){for(var b=arguments.length,C=new Array(b),_=0;_<b;_++)C[_]=arguments[_];return i.runHooks("modifyTransformFocus",...C)}).addLocalHook("afterModifyTransformFocus",function(){for(var b=arguments.length,C=new Array(b),_=0;_<b;_++)C[_]=arguments[_];return i.runHooks("afterModifyTransformFocus",...C)}).addLocalHook("beforeModifyTransformEnd",function(){for(var b=arguments.length,C=new Array(b),_=0;_<b;_++)C[_]=arguments[_];return i.runHooks("modifyTransformEnd",...C)}).addLocalHook("afterModifyTransformEnd",function(){for(var b=arguments.length,C=new Array(b),_=0;_<b;_++)C[_]=arguments[_];return i.runHooks("afterModifyTransformEnd",...C)}).addLocalHook("beforeRowWrap",function(){for(var b=arguments.length,C=new Array(b),_=0;_<b;_++)C[_]=arguments[_];return i.runHooks("beforeRowWrap",...C)}).addLocalHook("beforeColumnWrap",function(){for(var b=arguments.length,C=new Array(b),_=0;_<b;_++)C[_]=arguments[_];return i.runHooks("beforeColumnWrap",...C)}).addLocalHook("insertRowRequire",b=>this.alter("insert_row_above",b,1,"auto")).addLocalHook("insertColRequire",b=>this.alter("insert_col_start",b,1,"auto")),c={alter(b,C){var _,I;let $=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,M=arguments.length>3?arguments[3]:void 0,B=arguments.length>4?arguments[4]:void 0;const z=U=>{if(U.length===0)return[];const le=[...U];return le.sort((be,fe)=>{let[Z]=be,[Y]=fe;return Z===Y?0:Z>Y?1:-1}),ci(le,(be,fe)=>{let[Z,Y]=fe;const ne=be[be.length-1],[de,he]=ne,ce=de+he;if(Z<=ce){const D=Math.max(Y-(ce-Z),0);ne[1]+=D}else be.push([Z,Y]);return be},[le[0]])};switch(b){case"insert_row_below":case"insert_row_above":const U=s.countSourceRows();if(v.maxRows===U)return;const le=b==="insert_row_below"?"below":"above";C=(_=C)!==null&&_!==void 0?_:le==="below"?U:0;const{delta:ue,startPhysicalIndex:be}=a.createRow(C,$,{source:M,mode:le});P.shiftRows(s.toVisualRow(be),ue);break;case"insert_col_start":case"insert_col_end":const fe=b==="insert_col_end"?"end":"start";C=(I=C)!==null&&I!==void 0?I:fe==="end"?s.countSourceCols():0;const{delta:Z,startPhysicalIndex:Y}=a.createCol(C,$,{source:M,mode:fe});if(Z){if(Array.isArray(v.colHeaders)){const he=[s.toVisualColumn(Y),0];he.length+=Z,Array.prototype.splice.apply(v.colHeaders,he)}P.shiftColumns(s.toVisualColumn(Y),Z)}break;case"remove_row":const ne=he=>{let ce=0;q(he,D=>{let[O,G]=D;const te=zn(O)?s.countRows()-1:Math.max(O-ce,0);if(Number.isInteger(O)&&(O=Math.max(O-ce,0)),!a.removeRow(O,G,M))return;if(P.isSelected()){const{row:se}=s.getSelectedRangeLast().highlight;se>=O&&se<=O+G-1&&u.closeEditor(!0)}const re=s.countRows();re===0?P.deselect():M==="ContextMenu.removeRow"?P.refresh():P.shiftRows(O,-G);const J=v.fixedRowsTop;J>=te+1&&(v.fixedRowsTop-=Math.min(G,J-te));const Q=v.fixedRowsBottom;Q&&te>=re-Q&&(v.fixedRowsBottom-=Math.min(G,Q)),ce+=G})};Array.isArray(C)?ne(z(C)):ne([[C,$]]);break;case"remove_col":const de=he=>{let ce=0;q(he,D=>{let[O,G]=D;const te=zn(O)?s.countCols()-1:Math.max(O-ce,0);let X=s.toPhysicalColumn(te);if(Number.isInteger(O)&&(O=Math.max(O-ce,0)),!a.removeCol(O,G,M))return;if(P.isSelected()){const{col:se}=s.getSelectedRangeLast().highlight;se>=O&&se<=O+G-1&&u.closeEditor(!0)}s.countCols()===0?P.deselect():M==="ContextMenu.removeColumn"?P.refresh():P.shiftColumns(O,-G);const Q=v.fixedColumnsStart;Q>=te+1&&(v.fixedColumnsStart-=Math.min(G,Q-te)),Array.isArray(v.colHeaders)&&(typeof X>"u"&&(X=-1),v.colHeaders.splice(X,G)),ce+=G})};Array.isArray(C)?de(z(C)):de([[C,$]]);break;default:throw new Error(`There is no such action "${b}"`)}s.view.render(),B||c.adjustRowsAndCols()},adjustRowsAndCols(){const b=v.minRows,C=v.minSpareRows,_=v.minCols,I=v.minSpareCols;if(b){const $=s.countRows();$<b&&a.createRow($,b-$,{source:"auto"})}if(C){const $=s.countEmptyRows(!0);if($<C){const M=C-$,B=Math.min(M,v.maxRows-s.countSourceRows());a.createRow(s.countRows(),B,{source:"auto"})}}{let $;(_||I)&&($=s.countEmptyCols(!0));let M=s.countCols();if(_&&!v.columns&&M<_){const B=_-M;$+=B,a.createCol(M,B,{source:"auto"})}if(I&&!v.columns&&s.dataType==="array"&&$<I){M=s.countCols();const B=I-$,z=Math.min(B,v.maxCols-M);a.createCol(M,z,{source:"auto"})}}s.view&&s.view.adjustElementsSize()},populateFromArray(b,C,_,I,$){let M,B,z,U;const le=[],ue={},be=[],fe=b.row,Z=b.col;if(B=C.length,B===0)return!1;let Y=0,ne=0;switch(ct(_)&&(Y=_.col-Z+1,ne=_.row-fe+1),$){case"shift_down":const de=Tv(C),he=de.length,ce=Math.max(he,Y),D=s.getData().slice(fe),O=Tv(D).slice(Z,Z+ce);for(z=0;z<ce;z+=1)if(z<he){for(M=0,B=de[z].length;M<ne-B;M+=1)de[z].push(de[z][M%B]);z<O.length?be.push(de[z].concat(O[z])):be.push(de[z].concat(new Array(D.length).fill(null)))}else be.push(de[z%he].concat(O[z]));s.populateFromArray(fe,Z,Tv(be));break;case"shift_right":const G=C.length,te=Math.max(G,ne),X=s.getData().slice(fe).map(xe=>xe.slice(Z));for(M=0;M<te;M+=1)if(M<G){for(z=0,U=C[M].length;z<Y-U;z+=1)C[M].push(C[M][z%U]);if(M<X.length)for(let xe=0;xe<X[M].length;xe+=1)C[M].push(X[M][xe]);else C[M].push(...new Array(X[0].length).fill(null))}else C.push(C[M%B].slice(0,te).concat(X[M]));s.populateFromArray(fe,Z,C);break;case"overwrite":default:ue.row=b.row,ue.col=b.col;let re=0,J=0,Q=!0,se;const oe=function(Fe){let Ke=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const ht=C[Fe%C.length];return Ke!==null?ht[Ke%ht.length]:ht},ae=C.length,we=_?_.row-b.row+1:0;for(_?B=we:B=Math.max(ae,we),M=0;M<B&&!(_&&ue.row>_.row&&we>ae||!v.allowInsertRow&&ue.row>s.countRows()-1||ue.row>=v.maxRows);M++){const xe=M-re,Fe=oe(xe).length,Ke=_?_.col-b.col+1:0;if(_?U=Ke:U=Math.max(Fe,Ke),ue.col=b.col,se=s.getCellMeta(ue.row,ue.col),(I==="CopyPaste.paste"||I==="Autofill.fill")&&se.skipRowOnPaste){re+=1,ue.row+=1,B+=1;continue}for(J=0,z=0;z<U&&!(_&&ue.col>_.col&&Ke>Fe||!v.allowInsertColumn&&ue.col>s.countCols()-1||ue.col>=v.maxCols);z++){if(se=s.getCellMeta(ue.row,ue.col),(I==="CopyPaste.paste"||I==="Autofill.fill")&&se.skipColumnOnPaste){J+=1,ue.col+=1,U+=1;continue}if(se.readOnly&&I!=="UndoRedo.undo"){ue.col+=1;continue}const ht=z-J;let tt=oe(xe,ht),qe=s.getDataAtCell(ue.row,ue.col);if(tt!==null&&typeof tt=="object")if(Array.isArray(tt)&&qe===null&&(qe=[]),qe===null||typeof qe!="object")Q=!1;else{const Tt=Pp(Array.isArray(qe)?qe:qe[0]||qe),Nn=Pp(Array.isArray(tt)?tt:tt[0]||tt);nE(Tt,Nn)||Array.isArray(Tt)&&Array.isArray(Nn)?tt=mr(tt):Q=!1}else qe!==null&&typeof qe=="object"&&(Q=!1);Q&&le.push([ue.row,ue.col,tt]),Q=!0,ue.col+=1}ue.row+=1}s.setDataAtCell(le,null,null,I||"populateFromArray");break}}};function A(b){const C=UY(b);XN(C)?(s.runHooks("beforeLanguageChange",C),y.language=C,s.runHooks("afterLanguageChange",C)):GY(b)}function L(b,C){const _=b==="className"?s.rootElement:s.table;if(f)ge(_,C);else{let I=[],$=[];y[b]&&(I=Array.isArray(y[b])?y[b]:mI(y[b])),C&&($=Array.isArray(C)?C:mI(C));const M=pI(I,$),B=pI($,I);M.length&&Qe(_,M),B.length&&ge(_,B)}y[b]=C}this.init=function(){l.setData(v.data),s.runHooks("beforeInit"),(pc()||eL())&&ge(s.rootElement,"mobile"),this.updateSettings(v,!0),this.view=new qMe(this),u=TI.getInstance(s,v,P),d=iOe(s),h=new J1e(s),DS(this)&&KIe(s),s.runHooks("init"),this.forceFullRender=!0,this.view.render(),f&&s.rootElement.offsetParent===null&&H9(s.rootElement,()=>{s.view._wt.wtOverlays.updateLastSpreaderSize(),s.render(),s.view.adjustElementsSize()}),typeof f=="object"&&(s.runHooks("afterChange",f[0],f[1]),f=!1),s.runHooks("afterInit")};function W(){let b=!1;return{validatorsInQueue:0,valid:!0,addValidatorToQueue(){this.validatorsInQueue+=1,b=!1},removeValidatorFormQueue(){this.validatorsInQueue=this.validatorsInQueue-1<0?0:this.validatorsInQueue-1,this.checkIfQueueIsEmpty()},onQueueEmpty(){},checkIfQueueIsEmpty(){this.validatorsInQueue===0&&b===!1&&(b=!0,this.onQueueEmpty(this.valid))}}}function F(b){const C=b.replace(",",".");return isNaN(parseFloat(C))===!1?parseFloat(C):b}function V(b,C,_){if(!b.length){_();return}const I=s.getActiveEditor(),$=new W;let M=!0;$.onQueueEmpty=()=>{I&&M&&I.cancelChanges(),_()};for(let B=b.length-1;B>=0;B--){const[z,U,,le]=b[B],ue=a.propToCol(U);let be;Number.isInteger(ue)?be=s.getCellMeta(z,ue):be={...Object.getPrototypeOf(v),...v},be.type==="numeric"&&typeof le=="string"&&dY(le)&&(b[B][3]=F(le)),s.getCellValidator(be)&&($.addValidatorToQueue(),s.validateCell(b[B][3],be,function(fe,Z){return function(Y){if(typeof Y!="boolean")throw new Error("Validation error: result is not boolean");Y===!1&&Z.allowInvalid===!1&&(M=!1,b.splice(fe,1),Z.valid=!0),$.removeValidatorFormQueue()}}(B,be),C))}$.checkIfQueueIsEmpty()}function H(b,C){for(let I=b.length-1;I>=0;I--){let $=!1;if(b[I]===null){b.splice(I,1);continue}if(!((b[I][2]===null||b[I][2]===void 0)&&(b[I][3]===null||b[I][3]===void 0))){if(v.allowInsertRow)for(;b[I][0]>s.countRows()-1;){const{delta:M}=a.createRow(void 0,void 0,{source:C});if(M===0){$=!0;break}}if(s.dataType==="array"&&(!v.columns||v.columns.length===0)&&v.allowInsertColumn)for(;a.propToCol(b[I][1])>s.countCols()-1;){const{delta:M}=a.createCol(void 0,void 0,{source:C});if(M===0){$=!0;break}}$||a.set(b[I][0],b[I][1],b[I][3])}}const _=b.length>0;if(s.forceFullRender=!0,_){c.adjustRowsAndCols(),s.runHooks("beforeChangeRender",b,C),u.closeEditor(),s.view.render(),u.prepareEditor(),s.view.adjustElementsSize(),s.runHooks("afterChange",b,C||"edit");const I=s.getActiveEditor();I&&De(I.refreshValue)&&I.refreshValue()}else s.view.render()}this._createCellCoords=function(b,C){return s.view._wt.createCellCoords(b,C)},this._createCellRange=function(b,C,_){return s.view._wt.createCellRange(b,C,_)},this.validateCell=function(b,C,_,I){let $=s.getCellValidator(C);function M(B){if(!(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)||C.hidden===!0){_(B);return}const U=C.visualCol,le=C.visualRow,ue=s.getCell(le,U,!0);if(ue&&ue.nodeName!=="TH"){const be=s.rowIndexMapper.getRenderableFromVisualIndex(le),fe=s.columnIndexMapper.getRenderableFromVisualIndex(U);s.view._wt.getSetting("cellRenderer",be,fe,ue)}_(B)}b9($)&&($=function(B){return function(z,U){U(B.test(z))}}($)),un($)?(b=s.runHooks("beforeValidate",b,C.visualRow,C.prop,I),s._registerImmediate(()=>{$.call(C,b,B=>{s&&(B=s.runHooks("afterValidate",B,b,C.visualRow,C.prop,I),C.valid=B,M(B),s.runHooks("postAfterValidate",B,b,C.visualRow,C.prop,I))})})):s._registerImmediate(()=>{C.valid=!0,M(C.valid,!1)})};function N(b,C,_){return Array.isArray(b)?b:[[b,C,_]]}function j(b,C){const _=s.getActiveEditor(),I=s.runHooks("beforeChange",b,C||"edit"),$=b.filter(M=>M!==null);return I===!1||$.length===0?(_&&_.cancelChanges(),[]):$}this.setDataAtCell=function(b,C,_,I){const $=N(b,C,_),M=[];let B=I,z,U,le;for(z=0,U=$.length;z<U;z++){if(typeof $[z]!="object")throw new Error("Method `setDataAtCell` accepts row number or changes array of arrays as its first parameter");if(typeof $[z][1]!="number")throw new Error("Method `setDataAtCell` accepts row and column number as its parameters. If you want to use object property name, use method `setDataAtRowProp`");$[z][1]>=this.countCols()?le=$[z][1]:le=a.colToProp($[z][1]),M.push([$[z][0],le,l.getAtCell(this.toPhysicalRow($[z][0]),$[z][1]),$[z][2]])}!B&&typeof b=="object"&&(B=C);const ue=j(M,I);s.runHooks("afterSetDataAtCell",ue,B),V(ue,B,()=>{H(ue,B)})},this.setDataAtRowProp=function(b,C,_,I){const $=N(b,C,_),M=[];let B=I,z,U;for(z=0,U=$.length;z<U;z++)M.push([$[z][0],$[z][1],l.getAtCell(this.toPhysicalRow($[z][0]),$[z][1]),$[z][2]]);!B&&typeof b=="object"&&(B=C);const le=j(M,I);s.runHooks("afterSetDataAtRowProp",le,B),V(le,B,()=>{H(le,B)})},this.listen=function(){s&&!s.isListening()&&(ZT.forEach(b=>{s!==b&&b.unlisten()}),XT=s.guid,s.runHooks("afterListen"))},this.unlisten=function(){this.isListening()&&(XT=null,s.runHooks("afterUnlisten"))},this.isListening=function(){return XT===s.guid},this.destroyEditor=function(){let b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;u.closeEditor(b),s.view.render(),C&&P.isSelected()&&u.prepareEditor()},this.populateFromArray=function(b,C,_,I,$,M,B){if(!(typeof _=="object"&&typeof _[0]=="object"))throw new Error("populateFromArray parameter `input` must be an array of arrays");const z=typeof I=="number"?s._createCellCoords(I,$):null;return c.populateFromArray(s._createCellCoords(b,C),_,z,M,B)},this.spliceCol=function(b,C,_){for(var I=arguments.length,$=new Array(I>3?I-3:0),M=3;M<I;M++)$[M-3]=arguments[M];return a.spliceCol(b,C,_,...$)},this.spliceRow=function(b,C,_){for(var I=arguments.length,$=new Array(I>3?I-3:0),M=3;M<I;M++)$[M-3]=arguments[M];return a.spliceRow(b,C,_,...$)},this.getSelected=function(){if(P.isSelected())return vt(P.getSelectedRange(),b=>{let{from:C,to:_}=b;return[C.row,C.col,_.row,_.col]})},this.getSelectedLast=function(){const b=this.getSelected();let C;return b&&b.length>0&&(C=b[b.length-1]),C},this.getSelectedRange=function(){if(P.isSelected())return Array.from(P.getSelectedRange())},this.getSelectedRangeLast=function(){const b=this.getSelectedRange();let C;return b&&b.length>0&&(C=b[b.length-1]),C},this.emptySelectedCells=function(b){if(!P.isSelected()||this.countRows()===0||this.countCols()===0)return;const C=[];q(P.getSelectedRange(),_=>{if(_.isSingleHeader())return;const I=_.getTopStartCorner(),$=_.getBottomEndCorner();$e(I.row,$.row,M=>{$e(I.col,$.col,B=>{this.getCellMeta(M,B).readOnly||C.push([M,B,null])})})}),C.length>0&&this.setDataAtCell(C,b)},this.isRenderSuspended=function(){return this.renderSuspendedCounter>0},this.suspendRender=function(){this.renderSuspendedCounter+=1},this.resumeRender=function(){const b=this.renderSuspendedCounter-1;this.renderSuspendedCounter=Math.max(b,0),!this.isRenderSuspended()&&b===this.renderSuspendedCounter&&(this.renderCall?this.render():s.view.render())},this.render=function(){this.view&&(this.renderCall=!0,this.forceFullRender=!0,this.isRenderSuspended()||s.view.render())},this.batchRender=function(b){this.suspendRender();const C=b();return this.resumeRender(),C},this.isExecutionSuspended=function(){return this.executionSuspendedCounter>0},this.suspendExecution=function(){this.executionSuspendedCounter+=1,this.columnIndexMapper.suspendOperations(),this.rowIndexMapper.suspendOperations()},this.resumeExecution=function(){let b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const C=this.executionSuspendedCounter-1;this.executionSuspendedCounter=Math.max(C,0),(!this.isExecutionSuspended()&&C===this.executionSuspendedCounter||b)&&(this.columnIndexMapper.resumeOperations(),this.rowIndexMapper.resumeOperations())},this.batchExecution=function(b){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this.suspendExecution();const _=b();return this.resumeExecution(C),_},this.batch=function(b){this.suspendRender(),this.suspendExecution();const C=b();return this.resumeExecution(),this.resumeRender(),C},this.refreshDimensions=function(){if(!s.view)return;const{width:b,height:C}=s.view.getLastSize(),{width:_,height:I}=s.rootElement.getBoundingClientRect(),$=_!==b||I!==C;s.runHooks("beforeRefreshDimensions",{width:b,height:C},{width:_,height:I},$)!==!1&&(($||s.view._wt.wtOverlays.scrollableElement===s.rootWindow)&&(s.view.setLastSize(_,I),s.render()),s.runHooks("afterRefreshDimensions",{width:b,height:C},{width:_,height:I},$))},this.updateData=function(b,C){rW(b,_=>{a=_},_=>{a=_,s.columnIndexMapper.fitToLength(this.getInitialColumnCount()),s.rowIndexMapper.fitToLength(this.countSourceRows()),c.adjustRowsAndCols(),P.refresh()},{hotInstance:s,dataMap:a,dataSource:l,internalSource:"updateData",source:C,metaManager:m,firstRun:f})},this.loadData=function(b,C){rW(b,_=>{a=_},()=>{m.clearCellsCache(),s.initIndexMappers(),c.adjustRowsAndCols(),P.refresh(),f&&(f=[null,"loadData"])},{hotInstance:s,dataMap:a,dataSource:l,internalSource:"loadData",source:C,metaManager:m,firstRun:f})},this.getInitialColumnCount=function(){const b=v.columns;let C=0;if(Array.isArray(b))C=b.length;else if(un(b))if(s.dataType==="array"){const _=this.countSourceCols();for(let I=0;I<_;I+=1)b(I)&&(C+=1)}else(s.dataType==="object"||s.dataType==="function")&&(C=a.colToPropCache.length);else if(De(v.dataSchema)){const _=a.getSchema();C=Array.isArray(_)?_.length:iE(_)}else C=this.countSourceCols();return C},this.initIndexMappers=function(){this.columnIndexMapper.initToLength(this.getInitialColumnCount()),this.rowIndexMapper.initToLength(this.countSourceRows())},this.getData=function(b,C,_,I){return fn(b)?a.getAll():a.getRange(s._createCellCoords(b,C),s._createCellCoords(_,I),a.DESTINATION_RENDERER)},this.getCopyableText=function(b,C,_,I){return a.getCopyableText(s._createCellCoords(b,C),s._createCellCoords(_,I))},this.getCopyableData=function(b,C){return a.getCopyable(b,a.colToProp(C))},this.getSchema=function(){return a.getSchema()},this.updateSettings=function(b){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const _=(f?s.loadData:s.updateData).bind(this);let I=!1,$,M;if(De(b.rows))throw new Error('The "rows" setting is no longer supported. Do you mean startRows, minRows or maxRows?');if(De(b.cols))throw new Error('The "cols" setting is no longer supported. Do you mean startCols, minCols or maxCols?');if(De(b.ganttChart))throw new Error('Since 8.0.0 the "ganttChart" setting is no longer supported.');for($ in b)$==="data"||($==="language"?A(b.language):$==="className"?L("className",b.className):$==="tableClassName"&&s.table?(L("tableClassName",b.tableClassName),s.view._wt.wtOverlays.syncOverlayTableClassNames()):Oe.getSingleton().isRegistered($)||Oe.getSingleton().isDeprecated($)?(un(b[$])||Array.isArray(b[$]))&&(b[$].initialHook=!0,s.addHook($,b[$])):!C&&kn(b,$)&&(y[$]=b[$]));b.data===void 0&&v.data===void 0?_(null,"updateSettings"):b.data!==void 0?_(b.data,"updateSettings"):b.columns!==void 0&&(a.createMap(),s.initIndexMappers());const B=s.countCols(),z=v.columns;if(z&&un(z)&&(I=!0),(b.cell!==void 0||b.cells!==void 0||b.columns!==void 0)&&m.clearCache(),B>0)for($=0,M=0;$<B;$++){if(z){const ue=I?z($):z[M];ue&&m.updateColumnMeta(M,ue)}M+=1}De(b.cell)&&ut(b.cell,ue=>{s.setCellMetaObject(ue.row,ue.col,ue)}),s.runHooks("afterCellMetaReset");let U=s.rootElement.style.height;U!==""&&(U=parseInt(s.rootElement.style.height,10));let le=b.height;if(un(le)&&(le=le()),C&&s.rootElement.getAttribute("style")&&s.rootElement.setAttribute("data-initialstyle",s.rootElement.getAttribute("style")),le===null){const ue=s.rootElement.getAttribute("data-initialstyle");ue&&(ue.indexOf("height")>-1||ue.indexOf("overflow")>-1)?s.rootElement.setAttribute("style",ue):(s.rootElement.style.height="",s.rootElement.style.overflow="")}else le!==void 0&&(s.rootElement.style.height=isNaN(le)?`${le}`:`${le}px`,s.rootElement.style.overflow="hidden");if(typeof b.width<"u"){let ue=b.width;un(ue)&&(ue=ue()),s.rootElement.style.width=isNaN(ue)?`${ue}`:`${ue}px`}C||(s.view&&(s.view._wt.wtViewport.resetHasOversizedColumnHeadersMarked(),s.view._wt.exportSettingsAsClassNames()),s.runHooks("afterUpdateSettings",b)),c.adjustRowsAndCols(),s.view&&!f&&(s.forceFullRender=!0,s.view.render(),s.view._wt.wtOverlays.adjustElementsSize()),!C&&s.view&&(U===""||le===""||le===void 0)&&U!==le&&s.view._wt.wtOverlays.updateMainScrollableElements()},this.getValue=function(){const b=s.getSelectedLast();if(v.getValue){if(un(v.getValue))return v.getValue.call(s);if(b)return s.getData()[b[0][0]][v.getValue]}else if(b)return s.getDataAtCell(b[0],b[1])},this.getSettings=function(){return v},this.clear=function(){this.selectAll(),this.emptySelectedCells()},this.alter=function(b,C,_,I,$){c.alter(b,C,_,I,$)},this.getCell=function(b,C){let _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,I=C,$=b;if(C>=0){if(this.columnIndexMapper.isHidden(this.toPhysicalColumn(C)))return null;I=this.columnIndexMapper.getRenderableFromVisualIndex(C)}if(b>=0){if(this.rowIndexMapper.isHidden(this.toPhysicalRow(b)))return null;$=this.rowIndexMapper.getRenderableFromVisualIndex(b)}return $===null||I===null||$===void 0||I===void 0?null:s.view.getCellAtCoords(s._createCellCoords($,I),_)},this.getCoords=function(b){const C=this.view._wt.wtTable.getCoords(b);if(C===null)return null;const{row:_,col:I}=C;let $=_,M=I;return _>=0&&($=this.rowIndexMapper.getVisualFromRenderableIndex(_)),I>=0&&(M=this.columnIndexMapper.getVisualFromRenderableIndex(I)),s._createCellCoords($,M)},this.colToProp=function(b){return a.colToProp(b)},this.propToCol=function(b){return a.propToCol(b)},this.toVisualRow=b=>this.rowIndexMapper.getVisualFromPhysicalIndex(b),this.toVisualColumn=b=>this.columnIndexMapper.getVisualFromPhysicalIndex(b),this.toPhysicalRow=b=>this.rowIndexMapper.getPhysicalFromVisualIndex(b),this.toPhysicalColumn=b=>this.columnIndexMapper.getPhysicalFromVisualIndex(b),this.getDataAtCell=function(b,C){return a.get(b,a.colToProp(C))},this.getDataAtRowProp=function(b,C){return a.get(b,C)},this.getDataAtCol=function(b){const C=[],_=a.getRange(s._createCellCoords(0,b),s._createCellCoords(v.data.length-1,b),a.DESTINATION_RENDERER);for(let I=0;I<_.length;I+=1)for(let $=0;$<_[I].length;$+=1)C.push(_[I][$]);return C},this.getDataAtProp=function(b){const C=[],_=a.getRange(s._createCellCoords(0,a.propToCol(b)),s._createCellCoords(v.data.length-1,a.propToCol(b)),a.DESTINATION_RENDERER);for(let I=0;I<_.length;I+=1)for(let $=0;$<_[I].length;$+=1)C.push(_[I][$]);return C},this.getSourceData=function(b,C,_,I){let $;return b===void 0?$=l.getData():$=l.getByRange(s._createCellCoords(b,C),s._createCellCoords(_,I)),$},this.getSourceDataArray=function(b,C,_,I){let $;return b===void 0?$=l.getData(!0):$=l.getByRange(s._createCellCoords(b,C),s._createCellCoords(_,I),!0),$},this.getSourceDataAtCol=function(b){return l.getAtColumn(b)},this.setSourceDataAtCell=function(b,C,_,I){const $=N(b,C,_),M=this.hasHook("afterSetSourceDataAtCell"),B=[];M&&q($,U=>{let[le,ue,be]=U;B.push([le,ue,l.getAtCell(le,ue),be])}),q($,U=>{let[le,ue,be]=U;l.setAtCell(le,ue,be)}),M&&this.runHooks("afterSetSourceDataAtCell",B,I),this.render();const z=s.getActiveEditor();z&&De(z.refreshValue)&&z.refreshValue()},this.getSourceDataAtRow=function(b){return l.getAtRow(b)},this.getSourceDataAtCell=function(b,C){return l.getAtCell(b,C)},this.getDataAtRow=function(b){return a.getRange(s._createCellCoords(b,0),s._createCellCoords(b,this.countCols()-1),a.DESTINATION_RENDERER)[0]||[]},this.getDataType=function(b,C,_,I){const $=b===void 0?[0,0,this.countRows(),this.countCols()]:[b,C,_,I],[M,B]=$;let[,,z,U]=$,le=null,ue=null;z===void 0&&(z=M),U===void 0&&(U=B);let be="mixed";return $e(Math.max(Math.min(M,z),0),Math.max(M,z),fe=>{let Z=!0;return $e(Math.max(Math.min(B,U),0),Math.max(B,U),Y=>(ue=this.getCellMeta(fe,Y).type,le?Z=le===ue:le=ue,Z)),be=Z?ue:"mixed",Z}),be},this.removeCellMeta=function(b,C,_){const[I,$]=[this.toPhysicalRow(b),this.toPhysicalColumn(C)];let M=m.getCellMetaKeyValue(I,$,_);s.runHooks("beforeRemoveCellMeta",b,C,_,M)!==!1&&(m.removeCellMeta(I,$,_),s.runHooks("afterRemoveCellMeta",b,C,_,M)),M=null},this.spliceCellsMeta=function(b){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;for(var _=arguments.length,I=new Array(_>2?_-2:0),$=2;$<_;$++)I[$-2]=arguments[$];if(I.length>0&&!Array.isArray(I[0]))throw new Error("The 3rd argument (cellMetaRows) has to be passed as an array of cell meta objects array.");C>0&&m.removeRow(this.toPhysicalRow(b),C),I.length>0&&q(I.reverse(),M=>{m.createRow(this.toPhysicalRow(b)),q(M,(B,z)=>this.setCellMetaObject(b,z,B))}),s.render()},this.setCellMetaObject=function(b,C,_){typeof _=="object"&&ut(_,(I,$)=>{this.setCellMeta(b,C,$,I)})},this.setCellMeta=function(b,C,_,I){if(s.runHooks("beforeSetCellMeta",b,C,_,I)===!1)return;let M=b,B=C;b<this.countRows()&&(M=this.toPhysicalRow(b)),C<this.countCols()&&(B=this.toPhysicalColumn(C)),m.setCellMeta(M,B,_,I),s.runHooks("afterSetCellMeta",b,C,_,I)},this.getCellsMeta=function(){return m.getCellsMeta()},this.getCellMeta=function(b,C){let _=this.toPhysicalRow(b),I=this.toPhysicalColumn(C);return _===null&&(_=b),I===null&&(I=C),m.getCellMeta(_,I,{visualRow:b,visualColumn:C})},this.getColumnMeta=function(b){return m.getColumnMeta(this.toPhysicalColumn(b))},this.getCellMetaAtRow=function(b){return m.getCellsMetaAtRow(b)},this.isColumnModificationAllowed=function(){return!(s.dataType==="object"||v.columns)},this.getCellRenderer=function(b,C){const _=typeof b=="number"?s.getCellMeta(b,C).renderer:b.renderer;return typeof _=="string"?iR(_):fn(_)?iR("text"):_},this.getCellEditor=function(b,C){const _=typeof b=="number"?s.getCellMeta(b,C).editor:b.editor;return typeof _=="string"?nR(_):fn(_)?nR("text"):_},this.getCellValidator=function(b,C){const _=typeof b=="number"?s.getCellMeta(b,C).validator:b.validator;return typeof _=="string"?uL(_):_},this.validateCells=function(b){this._validateCells(b)},this.validateRows=function(b,C){if(!Array.isArray(b))throw new Error("validateRows parameter `rows` must be an array");this._validateCells(C,b)},this.validateColumns=function(b,C){if(!Array.isArray(b))throw new Error("validateColumns parameter `columns` must be an array");this._validateCells(C,void 0,b)},this._validateCells=function(b,C,_){const I=new W;b&&(I.onQueueEmpty=b);let $=s.countRows()-1;for(;$>=0;){if(C!==void 0&&C.indexOf($)===-1){$-=1;continue}let M=s.countCols()-1;for(;M>=0;){if(_!==void 0&&_.indexOf(M)===-1){M-=1;continue}I.addValidatorToQueue(),s.validateCell(s.getDataAtCell($,M),s.getCellMeta($,M),B=>{if(typeof B!="boolean")throw new Error("Validation error: result is not boolean");B===!1&&(I.valid=!1),I.removeValidatorFormQueue()},"validateCells"),M-=1}$-=1}I.checkIfQueueIsEmpty()},this.getRowHeader=function(b){let C=v.rowHeaders,_=b;return _!==void 0&&(_=s.runHooks("modifyRowHeader",_)),_===void 0?(C=[],$e(s.countRows()-1,I=>{C.push(s.getRowHeader(I))})):Array.isArray(C)&&C[_]!==void 0?C=C[_]:un(C)?C=C(_):C&&typeof C!="string"&&typeof C!="number"&&(C=_+1),C},this.hasRowHeaders=function(){return!!v.rowHeaders},this.hasColHeaders=function(){if(v.colHeaders!==void 0&&v.colHeaders!==null)return!!v.colHeaders;for(let b=0,C=s.countCols();b<C;b++)if(s.getColHeader(b))return!0;return!1},this.getColHeader=function(b){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1;const _=s.runHooks("modifyColHeader",b);if(_===void 0){const z=[],U=s.countCols();for(let le=0;le<U;le++)z.push(s.getColHeader(le));return z}let I=v.colHeaders;const $=function(z){const U=[],le=s.countCols();let ue=0;for(;ue<le;ue++)un(v.columns)&&v.columns(ue)&&U.push(ue);return U[z]},M=s.toPhysicalColumn(_),B=$(M);return v.colHeaders===!1?I=null:v.columns&&un(v.columns)&&v.columns(B)&&v.columns(B).title?I=v.columns(B).title:v.columns&&v.columns[M]&&v.columns[M].title?I=v.columns[M].title:Array.isArray(v.colHeaders)&&v.colHeaders[M]!==void 0?I=v.colHeaders[M]:un(v.colHeaders)?I=v.colHeaders(M):v.colHeaders&&typeof v.colHeaders!="string"&&typeof v.colHeaders!="number"&&(I=uE(_)),I=s.runHooks("modifyColumnHeaderValue",I,b,C),I},this._getColWidthFromSettings=function(b){let C;if(b>=0&&(C=s.getCellMeta(0,b).width),(C===void 0||C===v.width)&&(C=v.colWidths),C!=null){switch(typeof C){case"object":C=C[b];break;case"function":C=C(b);break}typeof C=="string"&&(C=parseInt(C,10))}return C},this.getColWidth=function(b){let C=s._getColWidthFromSettings(b);return C=s.runHooks("modifyColWidth",C,b),C===void 0&&(C=aE),C},this._getRowHeightFromSettings=function(b){let C=v.rowHeights;if(C!=null){switch(typeof C){case"object":C=C[b];break;case"function":C=C(b);break}typeof C=="string"&&(C=parseInt(C,10))}return C},this.getRowHeight=function(b){let C=s._getRowHeightFromSettings(b);return C=s.runHooks("modifyRowHeight",C,b),C},this.countSourceRows=function(){return l.countRows()},this.countSourceCols=function(){return l.countFirstRowKeys()},this.countRows=function(){return a.getLength()},this.countCols=function(){const b=v.maxCols,C=this.columnIndexMapper.getNotTrimmedIndexesLength();return Math.min(b,C)},this.countRenderedRows=function(){return s.view._wt.drawn?s.view._wt.wtTable.getRenderedRowsCount():-1},this.countVisibleRows=function(){return s.view._wt.drawn?s.view._wt.wtTable.getVisibleRowsCount():-1},this.countRenderedCols=function(){return s.view._wt.drawn?s.view._wt.wtTable.getRenderedColumnsCount():-1},this.countVisibleCols=function(){return s.view._wt.drawn?s.view._wt.wtTable.getVisibleColumnsCount():-1},this.countRowHeaders=function(){return this.view.getRowHeadersCount()},this.countColHeaders=function(){return this.view.getColumnHeadersCount()},this.countEmptyRows=function(){let b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,C=0;return PI(s.countRows()-1,_=>{if(s.isEmptyRow(_))C+=1;else if(b===!0)return!1}),C},this.countEmptyCols=function(){let b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,C=0;return PI(s.countCols()-1,_=>{if(s.isEmptyCol(_))C+=1;else if(b===!0)return!1}),C},this.isEmptyRow=function(b){return v.isEmptyRow.call(s,b)},this.isEmptyCol=function(b){return v.isEmptyCol.call(s,b)},this.selectCell=function(b,C,_,I){let $=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,M=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;return fn(b)||fn(C)?!1:this.selectCells([[b,C,_,I]],$,M)},this.selectCells=function(){let b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[[]],C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;C===!1&&d.suspend();const I=P.selectCells(b);return I&&_&&s.listen(),d.resume(),I},this.selectColumns=function(b){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:b,_=arguments.length>2?arguments[2]:void 0;return P.selectColumns(b,C,_)},this.selectRows=function(b){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:b,_=arguments.length>2?arguments[2]:void 0;return P.selectRows(b,C,_)},this.deselectCell=function(){P.deselect()},this.selectAll=function(){let b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:b,_=arguments.length>2?arguments[2]:void 0;d.skipNextScrollCycle(),P.selectAll(b,C,_)};const k=(b,C)=>b.getNearestNotHiddenIndex(C,1,!0);this.scrollViewportTo=function(b){var C;if(typeof b=="number"){var _;b={row:arguments[0],col:arguments[1],verticalSnap:arguments[2]?"bottom":"top",horizontalSnap:arguments[3]?"end":"start",considerHiddenIndexes:(_=arguments[4])!==null&&_!==void 0?_:!0}}const{row:I,col:$,verticalSnap:M,horizontalSnap:B,considerHiddenIndexes:z}=(C=b)!==null&&C!==void 0?C:{};let U,le,ue,be;M!==void 0&&(U=M==="top",le=!U),B!==void 0&&(ue=B==="start",be=!ue);let fe=I,Z=$;if(z===void 0||z){const de=Number.isInteger(I)&&I>=0,he=Number.isInteger($)&&$>=0,ce=de?k(this.rowIndexMapper,I):void 0,D=he?k(this.columnIndexMapper,$):void 0;if(ce===null||D===null)return!1;fe=de?s.rowIndexMapper.getRenderableFromVisualIndex(ce):I,Z=he?s.columnIndexMapper.getRenderableFromVisualIndex(D):$}const Y=Number.isInteger(fe),ne=Number.isInteger(Z);return Y&&fe>=0&&ne&&Z>=0?s.view.scrollViewport(s._createCellCoords(fe,Z),U,be,le,ue):Y&&fe>=0&&(ne&&Z<0||!ne)?s.view.scrollViewportVertically(fe,U,le):ne&&Z>=0&&(Y&&fe<0||!Y)?s.view.scrollViewportHorizontally(Z,be,ue):!1},this.scrollToFocusedCell=function(){let b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:()=>{};if(!this.selection.isSelected())return;this.addHookOnce("afterScroll",b);const{highlight:C}=this.getSelectedRangeLast();this.scrollViewportTo(C.toObject())?this.view.render():(this.removeHook("afterScroll",b),this._registerImmediate(()=>b()))},this.destroy=function(){if(s._clearTimeouts(),s._clearImmediates(),s.view&&s.view.destroy(),l&&l.destroy(),l=null,this.getShortcutManager().destroy(),m.clearCache(),ZT.delete(this.guid),DS(s)){const b=this.rootDocument.querySelector(".hot-display-license-info");b&&b.parentNode.removeChild(b)}ra(s.rootElement),o.destroy(),u&&u.destroy(),s.batchExecution(()=>{s.rowIndexMapper.unregisterAll(),s.columnIndexMapper.unregisterAll(),w.getItems().forEach(b=>{let[,C]=b;C.destroy()}),w.clear(),s.runHooks("afterDestroy")},!0),Oe.getSingleton().destroy(s),ut(s,(b,C,_)=>{un(b)?_[C]=K(C):C!=="guid"&&(_[C]=null)}),s.isDestroyed=!0,a&&a.destroy(),a=null,c=null,P=null,u=null,s=null};function K(b){return()=>{throw new Error(`The "${b}" method cannot be called because this Handsontable instance has been destroyed`)}}this.getActiveEditor=function(){return u.getActiveEditor()},this.getFirstRenderedVisibleRow=function(){return s.view.getFirstRenderedVisibleRow()},this.getLastRenderedVisibleRow=function(){return s.view.getLastRenderedVisibleRow()},this.getFirstRenderedVisibleColumn=function(){return s.view.getFirstRenderedVisibleColumn()},this.getLastRenderedVisibleColumn=function(){return s.view.getLastRenderedVisibleColumn()},this.getFirstFullyVisibleRow=function(){return s.view.getFirstFullyVisibleRow()},this.getLastFullyVisibleRow=function(){return s.view.getLastFullyVisibleRow()},this.getFirstFullyVisibleColumn=function(){return s.view.getFirstFullyVisibleColumn()},this.getLastFullyVisibleColumn=function(){return s.view.getLastFullyVisibleColumn()},this.getFirstPartiallyVisibleRow=function(){return s.view.getFirstPartiallyVisibleRow()},this.getLastPartiallyVisibleRow=function(){return s.view.getLastPartiallyVisibleRow()},this.getFirstPartiallyVisibleColumn=function(){return s.view.getFirstPartiallyVisibleColumn()},this.getLastPartiallyVisibleColumn=function(){return s.view.getLastPartiallyVisibleColumn()},this.getPlugin=function(b){const C=pr(b);return C==="UndoRedo"?this.undoRedo:w.getItem(C)},this.getPluginName=function(b){return b===this.undoRedo?this.undoRedo.constructor.PLUGIN_KEY:w.getId(b)},this.getInstance=function(){return s},this.addHook=function(b,C,_){Oe.getSingleton().add(b,C,s,_)},this.hasHook=function(b){return Oe.getSingleton().has(b,s)||Oe.getSingleton().has(b)},this.addHookOnce=function(b,C,_){Oe.getSingleton().once(b,C,s,_)},this.removeHook=function(b,C){Oe.getSingleton().remove(b,C,s)},this.runHooks=function(b,C,_,I,$,M,B){return Oe.getSingleton().run(s,b,C,_,I,$,M,B)},this.getTranslatedPhrase=function(b,C){return QY(v.language,b,C)},this.toHTML=()=>MI(this),this.toTableElement=()=>{const b=this.rootDocument.createElement("div");return b.insertAdjacentHTML("afterbegin",MI(this)),b.firstElementChild},this.timeouts=[],this._registerTimeout=function(b){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,_=b;typeof _=="function"&&(_=setTimeout(_,C)),this.timeouts.push(_)},this._clearTimeouts=function(){q(this.timeouts,b=>{clearTimeout(b)})},this.immediates=[],this._registerImmediate=function(b){this.immediates.push(setImmediate(b))},this._clearImmediates=function(){q(this.immediates,b=>{clearImmediate(b)})},this._getEditorManager=function(){return u},this.isRtl=function(){return s.rootWindow.getComputedStyle(s.rootElement).direction==="rtl"},this.isLtr=function(){return!s.isRtl()},this.getDirectionFactor=function(){return s.isLtr()?1:-1};const ie=cOe({handleEvent(){return s.isListening()},beforeKeyDown:b=>this.runHooks("beforeKeyDown",b),afterKeyDown:b=>{this.isDestroyed||s.runHooks("afterDocumentKeyDown",b)},ownerWindow:this.rootWindow});this.addHook("beforeOnCellMouseDown",b=>{b.ctrlKey===!1&&b.metaKey===!1&&ie.releasePressedKeys()}),this.getShortcutManager=function(){return ie},this.getFocusManager=function(){return h},cL().forEach(b=>{const C=wy(b);w.addItem(b,new C(this))}),GIe(s),ie.setActiveContextName("grid"),Oe.getSingleton().run(s,"construct")}function uW(n,e,t){n.addEventListener(e,t,!1)}function hW(n,e,t){n.removeEventListener(e,t,!1)}function dW(n){return n.ownerDocument.defaultView.getComputedStyle(n)}function uOe(n){const e={minHeight:200,maxHeight:300,minWidth:100,maxWidth:300},t=n.body,i=n.createTextNode(""),r=n.createElement("span");let s;function o(){i.textContent=s.value,r.style.position="absolute",r.style.fontSize=dW(s).fontSize,r.style.fontFamily=dW(s).fontFamily,r.style.whiteSpace="pre",t.appendChild(r);const u=r.clientWidth+2;t.removeChild(r);const h=s.style;h.height=`${e.minHeight}px`,e.minWidth>u?h.width=`${e.minWidth}px`:u>e.maxWidth?h.width=`${e.maxWidth}px`:h.width=`${u}px`;const d=s.scrollHeight?s.scrollHeight-1:0;e.minHeight>d?h.height=`${e.minHeight}px`:e.maxHeight<d?(h.height=`${e.maxHeight}px`,h.overflowY="visible"):h.height=`${d}px`}function a(){n.defaultView.setTimeout(o,0)}function l(u){if(u&&u.minHeight)if(u.minHeight==="inherit")e.minHeight=s.clientHeight;else{const h=parseInt(u.minHeight,10);isNaN(h)||(e.minHeight=h)}if(u&&u.maxHeight)if(u.maxHeight==="inherit")e.maxHeight=s.clientHeight;else{const h=parseInt(u.maxHeight,10);isNaN(h)||(e.maxHeight=h)}if(u&&u.minWidth)if(u.minWidth==="inherit")e.minWidth=s.clientWidth;else{const h=parseInt(u.minWidth,10);isNaN(h)||(e.minWidth=h)}if(u&&u.maxWidth)if(u.maxWidth==="inherit")e.maxWidth=s.clientWidth;else{const h=parseInt(u.maxWidth,10);isNaN(h)||(e.maxWidth=h)}r.firstChild||(r.className="autoResize",r.style.display="inline-block",r.appendChild(i))}function c(u,h){let d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;s=u,l(h),s.nodeName==="TEXTAREA"&&(s.style.resize="none",s.style.height=`${e.minHeight}px`,s.style.minWidth=`${e.minWidth}px`,s.style.maxWidth=`${e.maxWidth}px`,s.style.overflowY="hidden"),d&&(uW(s,"input",o),uW(s,"keydown",a)),o()}return{init:c,resize:o,unObserve(){hW(s,"input",o),hW(s,"keydown",a)}}}function fW(n,e){const t=UD(e),i=e.value.split(`
`);let r=t,s=0;for(let o=0;o<i.length;o++){const a=i[o];o!==0&&(s+=i[o-1].length+1);const l=s+a.length;if(n==="home"?r=s:n==="end"&&(r=l),t<=l)break}py(e,r)}function Dh(n,e,t){return(e=hOe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function hOe(n){var e=dOe(n,"string");return typeof e=="symbol"?e:e+""}function dOe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const fOe="ht_editor_visible",oC="ht_editor_hidden",gW="textEditor",gOe="text";class Lf extends om{static get EDITOR_TYPE(){return gOe}constructor(e){super(e),Dh(this,"eventManager",new uo(this)),Dh(this,"autoResize",uOe(this.hot.rootDocument)),Dh(this,"TEXTAREA",void 0),Dh(this,"textareaStyle",void 0),Dh(this,"TEXTAREA_PARENT",void 0),Dh(this,"textareaParentStyle",void 0),Dh(this,"layerClass",void 0),this.eventManager=new uo(this),this.createElements(),this.bindEvents(),this.hot.addHookOnce("afterDestroy",()=>this.destroy())}getValue(){return this.TEXTAREA.value}setValue(e){this.TEXTAREA.value=e}open(){this.refreshDimensions(),this.showEditableElement(),this.hot.getShortcutManager().setActiveContextName("editor"),this.registerShortcuts()}close(){this.autoResize.unObserve(),x9(this.hot.rootDocument.activeElement,this.hot.rootElement)&&this.hot.listen(),this.hideEditableElement(),this.unregisterShortcuts()}prepare(e,t,i,r,s,o){const a=this.state;if(super.prepare(e,t,i,r,s,o),!o.readOnly){this.refreshDimensions(!0);const{allowInvalid:l}=o;l&&!this.isOpened()&&(this.TEXTAREA.value=""),a!==qn.FINISHED&&!this.isOpened()&&this.hideEditableElement()}}beginEditing(e,t){this.state===qn.VIRGIN&&(this.TEXTAREA.value="",super.beginEditing(e,t))}focus(){this.TEXTAREA.select(),py(this.TEXTAREA,this.TEXTAREA.value.length)}createElements(){const{rootDocument:e}=this.hot;this.TEXTAREA=e.createElement("TEXTAREA"),ze(this.TEXTAREA,[["data-hot-input",""],nm(-1)]),ge(this.TEXTAREA,"handsontableInput"),this.textareaStyle=this.TEXTAREA.style,this.textareaStyle.width=0,this.textareaStyle.height=0,this.textareaStyle.overflowY="visible",this.TEXTAREA_PARENT=e.createElement("DIV"),ge(this.TEXTAREA_PARENT,"handsontableInputHolder"),Ue(this.TEXTAREA_PARENT,this.layerClass)&&Qe(this.TEXTAREA_PARENT,this.layerClass),ge(this.TEXTAREA_PARENT,oC),this.textareaParentStyle=this.TEXTAREA_PARENT.style,this.TEXTAREA_PARENT.appendChild(this.TEXTAREA),this.hot.rootElement.appendChild(this.TEXTAREA_PARENT)}hideEditableElement(){Q9()&&(this.textareaStyle.textIndent="-99999px"),this.textareaStyle.overflowY="visible",this.textareaParentStyle.opacity="0",this.textareaParentStyle.height="1px",Qe(this.TEXTAREA_PARENT,this.layerClass),ge(this.TEXTAREA_PARENT,oC)}showEditableElement(){this.textareaParentStyle.height="",this.textareaParentStyle.overflow="",this.textareaParentStyle.position="",this.textareaParentStyle[this.hot.isRtl()?"left":"right"]="auto",this.textareaParentStyle.opacity="1",this.textareaStyle.textIndent="";const e=this.TEXTAREA_PARENT.childNodes;let t=!1;$e(e.length-1,i=>{const r=e[i];if(Ue(r,"handsontableEditor"))return t=!0,!1}),Ue(this.TEXTAREA_PARENT,oC)&&Qe(this.TEXTAREA_PARENT,oC),t?(this.layerClass=fOe,ge(this.TEXTAREA_PARENT,this.layerClass)):(this.layerClass=this.getEditedCellsLayerClass(),ge(this.TEXTAREA_PARENT,this.layerClass))}refreshValue(){const e=this.hot.toPhysicalRow(this.row),t=this.hot.getSourceDataAtCell(e,this.col);this.originalValue=t,this.setValue(t),this.refreshDimensions()}refreshDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.state!==qn.EDITING&&!e)return;if(this.TD=this.getEditedCell(),!this.TD){e||this.close();return}const{top:t,start:i,width:r,maxWidth:s,height:o,maxHeight:a}=this.getEditedCellRect();this.textareaParentStyle.top=`${t}px`,this.textareaParentStyle[this.hot.isRtl()?"right":"left"]=`${i}px`,this.showEditableElement();const l=ul(this.TD,this.hot.rootWindow);this.TEXTAREA.style.fontSize=l.fontSize,this.TEXTAREA.style.fontFamily=l.fontFamily,this.TEXTAREA.style.backgroundColor=this.TD.style.backgroundColor;const c=ul(this.TEXTAREA),u=parseInt(c.paddingLeft,10)+parseInt(c.paddingRight,10),h=parseInt(c.paddingTop,10)+parseInt(c.paddingBottom,10),d=r-u,f=o-h,g=s-u,p=a-h;this.autoResize.init(this.TEXTAREA,{minWidth:Math.min(d,g),minHeight:Math.min(f,p),maxWidth:g,maxHeight:p},!0)}bindEvents(){JD()&&this.eventManager.addEventListener(this.TEXTAREA,"focusout",()=>this.finishEditing(!1)),this.addHook("afterScrollHorizontally",()=>this.refreshDimensions()),this.addHook("afterScrollVertically",()=>this.refreshDimensions()),this.addHook("afterColumnResize",()=>{this.refreshDimensions(),this.state===qn.EDITING&&this.focus()}),this.addHook("afterRowResize",()=>{this.refreshDimensions(),this.state===qn.EDITING&&this.focus()})}allowKeyEventPropagation(){}destroy(){this.eventManager.destroy(),this.clearHooks()}registerShortcuts(){const t=this.hot.getShortcutManager().getContext("editor"),i={runOnlyIf:()=>De(this.hot.getSelected()),group:gW},r=()=>{this.hot.rootDocument.execCommand("insertText",!1,`
`)};t.addShortcuts([{keys:[["Control","Enter"]],callback:()=>(r(),!1),runOnlyIf:s=>!this.hot.selection.isMultiple()&&!s.altKey},{keys:[["Meta","Enter"]],callback:()=>(r(),!1),runOnlyIf:()=>!this.hot.selection.isMultiple()},{keys:[["Alt","Enter"]],callback:()=>(r(),!1)},{keys:[["Home"]],callback:(s,o)=>{let[a]=o;fW(a,this.TEXTAREA)}},{keys:[["End"]],callback:(s,o)=>{let[a]=o;fW(a,this.TEXTAREA)}}],i)}unregisterShortcuts(){this.hot.getShortcutManager().getContext("editor").removeShortcutsByGroup(gW)}}const pOe="base";function Ry(n,e,t,i,r,s,o){const a=o.ariaTags,l=[],c=[],u=[],h=[];o.className&&ge(e,o.className),o.readOnly?(l.push(o.readOnlyCellClassName),a&&h.push(JV())):a&&u.push(JV()[0]),o.valid===!1&&o.invalidCellClassName?(l.push(o.invalidCellClassName),a&&h.push(e3())):(c.push(o.invalidCellClassName),a&&u.push(e3()[0])),o.wordWrap===!1&&o.noWordWrapClassName&&l.push(o.noWordWrapClassName),!s&&o.placeholder&&l.push(o.placeholderCellClassName),Qe(e,c),ge(e,l),Of(e,u),ze(e,h)}Ry.RENDERER_TYPE=pOe;const mOe="text";function jc(n,e,t,i,r,s,o){Ry.apply(this,[n,e,t,i,r,s,o]);let a=s;if(!a&&o.placeholder&&(a=o.placeholder),a=jn(a),o.trimWhitespace&&(a=a.trim()),o.rendererTemplate){ra(e);const l=n.rootDocument.createElement("TEMPLATE");l.setAttribute("bind","{{}}"),l.innerHTML=o.rendererTemplate,HTMLTemplateElement.decorate(l),l.model=n.getSourceDataAtRow(t),e.appendChild(l)}else Ku(e,a)}jc.RENDERER_TYPE=mOe;const bOe="text",fK={CELL_TYPE:bOe,editor:Lf,renderer:jc};js(fK);Je.editors={BaseEditor:om};function Je(n,e){const t=new dK(n,e||{},TL);return t.init(),t}Je.Core=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new dK(n,e,TL)};Je.DefaultSettings=sK();Je.hooks=Oe.getSingleton();Je.CellCoords=uf;Je.CellRange=yy;Je.packageName="handsontable";Je.buildDate="17/10/2024 09:16:16";Je.version="14.6.1";Je.languages={dictionaryKeys:kAe,getLanguageDictionary:ZY,getLanguagesDictionaries:$Ae,registerLanguageDictionary:XY,getTranslatedPhrase:QY};const pW="handsontableEditor",vOe="handsontable";class JN extends Lf{static get EDITOR_TYPE(){return vOe}open(){super.open(),this.htEditor&&this.htEditor.destroy(),this.htContainer.style.display==="none"&&(this.htContainer.style.display=""),this.htEditor=new this.hot.constructor(this.htContainer,this.htOptions),this.htEditor.init(),this.htEditor.rootElement.style.display="",this.cellProperties.strict?this.htEditor.selectCell(0,0):this.htEditor.deselectCell(),py(this.TEXTAREA,0,this.TEXTAREA.value.length),this.refreshDimensions()}close(){this.htEditor&&(this.htEditor.rootElement.style.display="none"),this.removeHooksByKey("beforeKeyDown"),super.close()}prepare(e,t,i,r,s,o){super.prepare(e,t,i,r,s,o);const a=this,l={startRows:0,startCols:0,minRows:0,minCols:0,className:"listbox",copyPaste:!1,autoColumnSize:!1,autoRowSize:!1,readOnly:!0,fillHandle:!1,autoWrapCol:!1,autoWrapRow:!1,ariaTags:!1,afterOnCellMouseDown(c,u){const h=this.getSourceData(u.row,u.col);h!==void 0&&a.setValue(h),a.hot.destroyEditor()},preventWheel:!0,layoutDirection:this.hot.isRtl()?"rtl":"ltr"};this.cellProperties.handsontable&&li(l,o.handsontable),this.htOptions=l}beginEditing(e,t){const i=this.hot.getSettings().onBeginEditing;i&&i()===!1||super.beginEditing(e,t)}createElements(){super.createElements();const e=this.hot.rootDocument.createElement("DIV");e.className="handsontableEditor",this.TEXTAREA_PARENT.appendChild(e),this.htContainer=e,this.assignHooks()}finishEditing(e,t,i){if(this.htEditor&&this.htEditor.isListening()&&this.hot.listen(),this.htEditor&&this.htEditor.getSelectedLast()){const r=this.htEditor.getValue();r!==void 0&&this.setValue(r)}super.finishEditing(e,t,i)}assignHooks(){this.hot.addHook("afterDestroy",()=>{this.htEditor&&this.htEditor.destroy()})}registerShortcuts(){const t=this.hot.getShortcutManager().getContext("editor");super.registerShortcuts();const i={group:pW,relativeToGroup:uh,position:"before"},r=(s,o)=>{const a=this.htEditor;if(s!==void 0&&(s<0||a.flipped&&s>a.countRows()-1?a.deselectCell():a.selectCell(s,0),a.getData().length))return o.preventDefault(),bo(o),this.hot.listen(),this.TEXTAREA.focus(),!1};t.addShortcuts([{keys:[["ArrowUp"]],callback:s=>{const o=this.htEditor;let a,l;return!o.getSelectedLast()&&o.flipped?a=o.countRows()-1:o.getSelectedLast()&&(o.flipped?(l=o.getSelectedLast()[0],a=Math.max(0,l-1)):(l=o.getSelectedLast()[0],a=l-1)),r(a,s)},preventDefault:!1},{keys:[["ArrowDown"]],callback:s=>{const o=this.htEditor;let a,l;if(!o.getSelectedLast()&&!o.flipped)a=0;else if(o.getSelectedLast()){if(o.flipped)a=o.getSelectedLast()[0]+1;else if(!o.flipped){const c=o.countRows()-1;l=o.getSelectedLast()[0],a=Math.min(c,l+1)}}return r(a,s)},preventDefault:!1}],i)}unregisterShortcuts(){super.unregisterShortcuts(),this.hot.getShortcutManager().getContext("editor").removeShortcutsByGroup(pW)}}function wOe(n,e,t){yOe(n,e),e.set(n,t)}function yOe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function aC(n,e,t){return(e=COe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function COe(n){var e=SOe(n,"string");return typeof e=="symbol"?e:e+""}function SOe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function mW(n,e){return n.get(_Oe(n,e))}function _Oe(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const ROe="autocomplete";var QT=new WeakMap;class eH extends JN{constructor(){super(...arguments),aC(this,"query",null),aC(this,"strippedChoices",[]),aC(this,"rawChoices",[]),wOe(this,QT,this.hot.guid.slice(0,9)),aC(this,"sortByRelevance",function(e,t,i){const r=[],s=[],o=e.length;let a=t.length,l,c,u,h;if(o===0){for(u=0;u<a;u++)s.push(u);return s}for(u=0;u<a;u++){if(c=vI(jn(t[u])),i)h=c.indexOf(e);else{const d=this.cellProperties.locale;h=c.toLocaleLowerCase(d).indexOf(e.toLocaleLowerCase(d))}h!==-1&&(l=c.length-h-o,r.push({baseIndex:u,index:h,charsLeft:l,value:c}))}for(r.sort((d,f)=>{if(f.index===-1)return-1;if(d.index===-1)return 1;if(d.index<f.index)return-1;if(f.index<d.index)return 1;if(d.index===f.index){if(d.charsLeft<f.charsLeft)return-1;if(d.charsLeft>f.charsLeft)return 1}return 0}),u=0,a=r.length;u<a;u++)s.push(r[u].baseIndex);return s})}static get EDITOR_TYPE(){return ROe}getValue(){const e=this.rawChoices.find(t=>this.stripValueIfNeeded(t)===this.TEXTAREA.value);return De(e)?e:this.TEXTAREA.value}createElements(){super.createElements(),ge(this.htContainer,"autocompleteEditor"),ge(this.htContainer,this.hot.rootWindow.navigator.platform.indexOf("Mac")===-1?"":"htMacScroll"),this.hot.getSettings().ariaTags&&ze(this.TEXTAREA,[bRe(),dRe(),C9("listbox"),CRe()])}prepare(e,t,i,r,s,o){super.prepare(e,t,i,r,s,o),this.hot.getSettings().ariaTags&&ze(this.TEXTAREA,[io("false"),SRe(`${mW(QT,this)}-listbox-${e}-${t}`)])}open(){super.open();const e=this.cellProperties.trimDropdown===void 0?!0:this.cellProperties.trimDropdown,t=this.hot.getSettings().ariaTags,i=Array.isArray(this.cellProperties.source)?this.cellProperties.source:null,r=i==null?void 0:i.length,{row:s,col:o}=this;this.showEditableElement(),this.focus();let a=Pi();a===0&&Rw()&&(a+=15),this.addHook("beforeKeyDown",l=>this.onBeforeKeyDown(l)),this.htEditor.updateSettings({colWidths:e?[gn(this.TEXTAREA)-2]:void 0,width:e?gn(this.TEXTAREA)+a:void 0,autoColumnSize:!0,renderer:(l,c,u,h,d,f,g)=>{jc(l,c,u,h,d,f,g);const{filteringCaseSensitive:p,allowHtml:m,locale:v}=this.cellProperties,y=this.query;let w=jn(f),R,x;w&&!m&&(R=p===!0?w.indexOf(y):w.toLocaleLowerCase(v).indexOf(y.toLocaleLowerCase(v)),R!==-1&&(x=w.substr(R,y.length),w=w.replace(x,`<strong>${x}</strong>`))),t&&ze(c,[fRe(),...i?[xRe(r)]:[],...i?[TRe(i.indexOf(f)+1)]:[],["id",`${this.htEditor.rootElement.id}_${u}-${h}`]]),c.innerHTML=w},afterSelectionEnd:(l,c)=>{if(t){const u=this.htEditor.getCell(l,c,!0);ze(u,[BD()]),ze(this.TEXTAREA,..._Re(u.id))}}}),t&&(ze(this.htEditor.view._wt.wtOverlays.wtTable.TABLE,...qa()),ze(this.htEditor.rootElement,[y9(),RRe("polite"),ERe("text"),["id",`${mW(QT,this)}-listbox-${s}-${o}`]]),ze(this.TEXTAREA,...io("true"))),this.hot._registerTimeout(()=>{this.queryChoices(this.TEXTAREA.value)})}close(){this.removeHooksByKey("beforeKeyDown"),super.close(),this.hot.getSettings().ariaTags&&ze(this.TEXTAREA,[io("false")])}discardEditor(e){super.discardEditor(e),this.hot.view.render()}queryChoices(e){const t=this.cellProperties.source;this.query=e,typeof t=="function"?t.call(this.cellProperties,e,i=>{this.rawChoices=i,this.updateChoicesList(this.stripValuesIfNeeded(i))}):Array.isArray(t)?(this.rawChoices=t,this.updateChoicesList(this.stripValuesIfNeeded(t))):this.updateChoicesList([])}updateChoicesList(e){const t=UD(this.TEXTAREA),i=D9(this.TEXTAREA),r=this.cellProperties.sortByRelevance,s=this.cellProperties.filter;let o=null,a=null,l=e;r&&(o=this.sortByRelevance(this.stripValueIfNeeded(this.getValue()),l,this.cellProperties.filteringCaseSensitive));const c=Array.isArray(o)?o.length:0;if(s===!1)c&&(a=o[0]);else{const u=[];for(let h=0,d=l.length;h<d&&!(r&&c<=h);h++)c?u.push(l[o[h]]):u.push(l[h]);a=0,l=u}this.strippedChoices=l,l.length===0?this.htEditor.rootElement.style.display="none":this.htEditor.rootElement.style.display="",this.htEditor.loadData(Tv([l])),l.length>0&&(this.updateDropdownDimensions(),this.flipDropdownIfNeeded(),this.cellProperties.strict===!0&&this.highlightBestMatchingChoice(a)),this.hot.listen(),py(this.TEXTAREA,t,t===i?void 0:i)}flipDropdownIfNeeded(){const e=cf(this.hot.view._wt.wtTable.TABLE),t=e===this.hot.rootWindow,i=this.cellProperties.preventOverflow;if(t||!t&&(i||i==="horizontal"))return!1;const r=xi(this.TEXTAREA),s=ni(this.TEXTAREA),o=this.getDropdownHeight(),a=e.scrollTop,l=ni(this.hot.view._wt.wtTable.THEAD),c=xi(e),u=r.top-c.top-l+a,h=e.scrollHeight-u-l-s,d=o>h&&u>h;return d?this.flipDropdown(o):this.unflipDropdown(),this.limitDropdownIfNeeded(d?u:h,o),d}limitDropdownIfNeeded(e,t){if(t>e){let i=0,r=0,s=0,o=null;do s=this.htEditor.getRowHeight(r)||this.htEditor.view._wt.getSetting("defaultRowHeight"),i+=s,r+=1;while(i<e);o=i-s,this.htEditor.flipped&&(this.htEditor.rootElement.style.top=`${parseInt(this.htEditor.rootElement.style.top,10)+t-o}px`),this.setDropdownHeight(i-s)}}flipDropdown(e){const t=this.htEditor.rootElement.style;t.position="absolute",t.top=`${-e}px`,this.htEditor.flipped=!0}unflipDropdown(){const e=this.htEditor.rootElement.style;e.position="absolute",e.top="",this.htEditor.flipped=void 0}updateDropdownDimensions(){const e=this.htEditor.getColWidth(0)+Pi(this.hot.rootDocument)+2,t=this.cellProperties.trimDropdown;this.htEditor.updateSettings({height:this.getDropdownHeight(),width:t?void 0:e}),this.htEditor.view._wt.wtTable.alignOverlaysWithTrimmingContainer()}setDropdownHeight(e){this.htEditor.updateSettings({height:e})}highlightBestMatchingChoice(e){typeof e=="number"?this.htEditor.selectCell(e,0,void 0,void 0,void 0,!1):this.htEditor.deselectCell()}getDropdownHeight(){const e=this.htEditor.getRowHeight(0)||23,t=this.cellProperties.visibleRows;return this.strippedChoices.length>=t?t*e:this.strippedChoices.length*e+8}stripValueIfNeeded(e){return this.stripValuesIfNeeded([e])[0]}stripValuesIfNeeded(e){const{allowHtml:t}=this.cellProperties,i=vt(e,s=>jn(s));return vt(i,s=>t?s:vI(s))}allowKeyEventPropagation(e){const t=this.htEditor.getSelectedRangeLast(),i={row:t?t.from.row:-1};let r=!1;return e===He.ARROW_DOWN&&i.row>0&&i.row<this.htEditor.countRows()-1&&(r=!0),e===He.ARROW_UP&&i.row>-1&&(r=!0),r}onBeforeKeyDown(e){if(J9(e.keyCode)||e.keyCode===He.BACKSPACE||e.keyCode===He.DELETE||e.keyCode===He.INSERT){let t=10;if(e.keyCode===He.C&&(e.ctrlKey||e.metaKey))return;this.isOpened()||(t+=10),this.htEditor&&this.hot._registerTimeout(()=>{this.queryChoices(this.TEXTAREA.value)},t)}}}const EOe="checkbox";class gK extends om{static get EDITOR_TYPE(){return EOe}beginEditing(e,t){if(t&&t.type==="mouseup"&&t.target.nodeName==="TD"){const i=this.TD.querySelector('input[type="checkbox"]');Ue(i,"htBadValue")||i.click()}}finishEditing(){}init(){}open(){}close(){}getValue(){}setValue(){}focus(){}}/*!
 * Pikaday
 *
 * Copyright © 2014 David Bushell | BSD & MIT license | https://github.com/Pikaday/Pikaday
 */const Mu=()=>window,Ks=()=>window.document,BI=(n,e)=>window.setTimeout(n,e),Oa=function(n,e,t,i){n.addEventListener(e,t,!!i)},Nl=function(n,e,t,i){n.removeEventListener(e,t,!!i)},xOe=function(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")},ss=function(n,e){return(" "+n.className+" ").indexOf(" "+e+" ")!==-1},JT=function(n,e){ss(n,e)||(n.className=n.className===""?e:n.className+" "+e)},eM=function(n,e){n.className=xOe((" "+n.className+" ").replace(" "+e+" "," "))},tH=function(n){return/Array/.test(Object.prototype.toString.call(n))},hs=function(n){return/Date/.test(Object.prototype.toString.call(n))&&!isNaN(n.getTime())},TOe=function(n){let e=n.getDay();return e===0||e===6},MOe=function(n){return n%4===0&&n%100!==0||n%400===0},bW=function(n,e){return[31,MOe(n)?29:28,31,30,31,30,31,31,30,31,30,31][e]},lC=function(n){hs(n)&&n.setHours(0,0,0,0)},cC=function(n,e){return n.getTime()===e.getTime()},mR=function(n,e,t){let i,r;for(i in e)r=n[i]!==void 0,r&&typeof e[i]=="object"&&e[i]!==null&&e[i].nodeName===void 0?hs(e[i])?t&&(n[i]=new Date(e[i].getTime())):tH(e[i])?t&&(n[i]=e[i].slice(0)):n[i]=mR({},e[i],t):(t||!r)&&(n[i]=e[i]);return n},vW=function(n,e,t){let i=Ks().createEvent("HTMLEvents");i.initEvent(e,!0,!1),i=mR(i,t),n.dispatchEvent(i)},wW=function(n){return n.month<0&&(n.year-=Math.ceil(Math.abs(n.month)/12),n.month+=12),n.month>11&&(n.year+=Math.floor(Math.abs(n.month)/12),n.month-=12),n},wa={field:null,bound:void 0,ariaLabel:"Use the arrow keys to pick a date",position:"bottom left",reposition:!0,format:"YYYY-MM-DD",toString:null,parse:null,defaultDate:null,setDefaultDate:!1,firstDay:0,firstWeekOfYearMinDays:4,formatStrict:!1,minDate:null,maxDate:null,yearRange:10,showWeekNumber:!1,pickWholeWeek:!1,minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0,startRange:null,endRange:null,isRTL:!1,yearSuffix:"",showMonthAfterYear:!1,showDaysInNextAndPreviousMonths:!1,enableSelectionDaysInNextAndPreviousMonths:!1,numberOfMonths:1,mainCalendar:"left",container:void 0,blurFieldOnSelect:!0,i18n:{previousMonth:"Previous Month",nextMonth:"Next Month",months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},theme:null,events:[],onSelect:null,onOpen:null,onClose:null,onDraw:null,keyboardInput:!0},yW=function(n,e,t){for(e+=n.firstDay;e>=7;)e-=7;return t?n.i18n.weekdaysShort[e]:n.i18n.weekdays[e]},AOe=function(n){let e=[],t="false";if(n.isEmpty)if(n.showDaysInNextAndPreviousMonths)e.push("is-outside-current-month"),n.enableSelectionDaysInNextAndPreviousMonths||e.push("is-selection-disabled");else return'<td class="is-empty"></td>';return n.isDisabled&&e.push("is-disabled"),n.isToday&&e.push("is-today"),n.isSelected&&(e.push("is-selected"),t="true"),n.hasEvent&&e.push("has-event"),n.isInRange&&e.push("is-inrange"),n.isStartRange&&e.push("is-startrange"),n.isEndRange&&e.push("is-endrange"),'<td data-day="'+n.day+'" class="'+e.join(" ")+'" aria-selected="'+t+'"><button class="pika-button pika-day" type="button" data-pika-year="'+n.year+'" data-pika-month="'+n.month+'" data-pika-day="'+n.day+'">'+n.day+"</button></td>"},POe=function(n,e){n.setHours(0,0,0,0);let t=n.getDate(),i=n.getDay(),r=e,s=r-1,o=7,a=function(d){return(d+o-1)%o};n.setDate(t+s-a(i));let l=new Date(n.getFullYear(),0,r),c=24*60*60*1e3,u=(n.getTime()-l.getTime())/c;return 1+Math.round((u-s+a(l.getDay()))/o)},IOe=function(n,e,t,i,r){let s=new Date(i,t,e);return'<td class="pika-week">'+(n.hasMoment?n.moment(s).isoWeek():POe(s,r))+"</td>"},OOe=function(n,e,t,i){return'<tr class="pika-row'+(t?" pick-whole-week":"")+(i?" is-selected":"")+'">'+(e?n.reverse():n).join("")+"</tr>"},kOe=function(n){return"<tbody>"+n.join("")+"</tbody>"},DOe=function(n){let e,t=[];for(n.showWeekNumber&&t.push("<th></th>"),e=0;e<7;e++)t.push('<th scope="col"><abbr title="'+yW(n,e)+'">'+yW(n,e,!0)+"</abbr></th>");return"<thead><tr>"+(n.isRTL?t.reverse():t).join("")+"</tr></thead>"},LOe=function(n,e,t,i,r,s){let o,a,l,c=n._o,u=t===c.minYear,h=t===c.maxYear,d='<div id="'+s+'" class="pika-title" role="heading" aria-live="polite">',f,g,p=!0,m=!0;for(l=[],o=0;o<12;o++)l.push('<option value="'+(t===r?o-e:12+o-e)+'"'+(o===i?' selected="selected"':"")+(u&&o<c.minMonth||h&&o>c.maxMonth?' disabled="disabled"':"")+">"+c.i18n.months[o]+"</option>");for(f='<div class="pika-label">'+c.i18n.months[i]+'<select class="pika-select pika-select-month" tabindex="-1">'+l.join("")+"</select></div>",tH(c.yearRange)?(o=c.yearRange[0],a=c.yearRange[1]+1):(o=t-c.yearRange,a=1+t+c.yearRange),l=[];o<a&&o<=c.maxYear;o++)o>=c.minYear&&l.push('<option value="'+o+'"'+(o===t?' selected="selected"':"")+">"+o+"</option>");return g='<div class="pika-label">'+t+c.yearSuffix+'<select class="pika-select pika-select-year" tabindex="-1">'+l.join("")+"</select></div>",c.showMonthAfterYear?d+=g+f:d+=f+g,u&&(i===0||c.minMonth>=i)&&(p=!1),h&&(i===11||c.maxMonth<=i)&&(m=!1),e===0&&(d+='<button class="pika-prev'+(p?"":" is-disabled")+'" type="button">'+c.i18n.previousMonth+"</button>"),e===n._o.numberOfMonths-1&&(d+='<button class="pika-next'+(m?"":" is-disabled")+'" type="button">'+c.i18n.nextMonth+"</button>"),d+="</div>"},NOe=function(n,e,t){return'<table cellpadding="0" cellspacing="0" class="pika-table" role="grid" aria-labelledby="'+t+'">'+DOe(n)+kOe(e)+"</table>"};function VI(n){let e=this,t=e.config(n);e._onMouseDown=function(r){if(!e._v)return;r=r||Mu().event;let s=r.target||r.srcElement;if(s)if(ss(s,"is-disabled")||(ss(s,"pika-button")&&!ss(s,"is-empty")&&!ss(s.parentNode,"is-disabled")?(e.setDate(new Date(s.getAttribute("data-pika-year"),s.getAttribute("data-pika-month"),s.getAttribute("data-pika-day"))),t.bound&&BI(function(){e.hide(),t.blurFieldOnSelect&&t.field&&t.field.blur()},100)):ss(s,"pika-prev")?e.prevMonth():ss(s,"pika-next")&&e.nextMonth()),ss(s,"pika-select"))e._c=!0;else if(r.preventDefault)r.preventDefault();else return r.returnValue=!1,!1},e._onChange=function(r){r=r||Mu().event;let s=r.target||r.srcElement;s&&(ss(s,"pika-select-month")?e.gotoMonth(s.value):ss(s,"pika-select-year")&&e.gotoYear(s.value))},e._onKeyChange=function(r){if(r=r||Mu().event,e.isVisible())switch(r.keyCode){case 13:case 27:t.field&&t.field.blur();break;case 37:e.adjustDate("subtract",1);break;case 38:e.adjustDate("subtract",7);break;case 39:e.adjustDate("add",1);break;case 40:e.adjustDate("add",7);break;case 8:case 46:e.setDate(null);break}},e._parseFieldValue=function(){if(t.parse)return t.parse(t.field.value,t.format);if(this.hasMoment){let r=this.moment(t.field.value,t.format,t.formatStrict);return r&&r.isValid()?r.toDate():null}else return new Date(Date.parse(t.field.value))},e._onInputChange=function(r){let s;r.firedBy!==e&&(s=e._parseFieldValue(),hs(s)&&e.setDate(s),e._v||e.show())},e._onInputFocus=function(){e.show()},e._onInputClick=function(){e.show()},e._onInputBlur=function(){let r=Ks().activeElement;do if(ss(r,"pika-single"))return;while(r=r.parentNode);e._c||(e._b=BI(function(){e.hide()},50)),e._c=!1},e._onClick=function(r){r=r||Mu().event;let s=r.target||r.srcElement,o=s;if(s){!hasEventListeners&&ss(s,"pika-select")&&(s.onchange||(s.setAttribute("onchange","return;"),Oa(s,"change",e._onChange)));do if(ss(o,"pika-single")||o===t.trigger)return;while(o=o.parentNode);e._v&&s!==t.trigger&&o!==t.trigger&&e.hide()}},e.el=Ks().createElement("div"),e.el.className="pika-single"+(t.isRTL?" is-rtl":"")+(t.theme?" "+t.theme:""),Oa(e.el,"mousedown",e._onMouseDown,!0),Oa(e.el,"touchend",e._onMouseDown,!0),Oa(e.el,"change",e._onChange),t.keyboardInput&&Oa(Ks(),"keydown",e._onKeyChange),t.field&&(t.container?t.container.appendChild(e.el):t.bound?Ks().body.appendChild(e.el):t.field.parentNode.insertBefore(e.el,t.field.nextSibling),Oa(t.field,"change",e._onInputChange),t.defaultDate||(t.defaultDate=e._parseFieldValue(),t.setDefaultDate=!0));let i=t.defaultDate;hs(i)?t.setDefaultDate?e.setDate(i,!0):e.gotoDate(i):e.gotoDate(new Date),t.bound?(this.hide(),e.el.className+=" is-bound",Oa(t.trigger,"click",e._onInputClick),Oa(t.trigger,"focus",e._onInputFocus),Oa(t.trigger,"blur",e._onInputBlur)):this.show()}VI.prototype={config:function(n){this._o||(this._o=mR({},wa,!0));let e=mR(this._o,n,!0);e.isRTL=!!e.isRTL,e.field=e.field&&e.field.nodeName?e.field:null,e.theme=typeof e.theme=="string"&&e.theme?e.theme:null,e.bound=!!(e.bound!==void 0?e.field&&e.bound:e.field),e.trigger=e.trigger&&e.trigger.nodeName?e.trigger:e.field,e.disableWeekends=!!e.disableWeekends,e.disableDayFn=typeof e.disableDayFn=="function"?e.disableDayFn:null;let t=parseInt(e.numberOfMonths,10)||1;if(e.numberOfMonths=t>4?4:t,hs(e.minDate)||(e.minDate=!1),hs(e.maxDate)||(e.maxDate=!1),e.minDate&&e.maxDate&&e.maxDate<e.minDate&&(e.maxDate=e.minDate=!1),e.minDate&&this.setMinDate(e.minDate),e.maxDate&&this.setMaxDate(e.maxDate),tH(e.yearRange)){let i=new Date().getFullYear()-10;e.yearRange[0]=parseInt(e.yearRange[0],10)||i,e.yearRange[1]=parseInt(e.yearRange[1],10)||i}else e.yearRange=Math.abs(parseInt(e.yearRange,10))||wa.yearRange,e.yearRange>100&&(e.yearRange=100);return e},toString:function(n){return n=n||this._o.format,hs(this._d)?this._o.toString?this._o.toString(this._d,n):this.hasMoment?this.moment(this._d).format(n):this._d.toDateString():""},getMoment:function(){return this.hasMoment?this.moment(this._d):null},setMoment:function(n,e){this.hasMoment&&this.moment.isMoment(n)&&this.setDate(n.toDate(),e)},useMoment:function(n){this.hasMoment=!0,this.moment=n},getDate:function(){return hs(this._d)?new Date(this._d.getTime()):null},setDate:function(n,e){if(!n)return this._d=null,this._o.field&&(this._o.field.value="",vW(this._o.field,"change",{firedBy:this})),this.draw();if(typeof n=="string"&&(n=new Date(Date.parse(n))),!hs(n))return;let t=this._o.minDate,i=this._o.maxDate;hs(t)&&n<t?n=t:hs(i)&&n>i&&(n=i),this._d=new Date(n.getTime()),lC(this._d),this.gotoDate(this._d),this._o.field&&(this._o.field.value=this.toString(),vW(this._o.field,"change",{firedBy:this})),!e&&typeof this._o.onSelect=="function"&&this._o.onSelect.call(this,this.getDate())},clear:function(){this.setDate(null)},gotoDate:function(n){let e=!0;if(hs(n)){if(this.calendars){let t=new Date(this.calendars[0].year,this.calendars[0].month,1),i=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),r=n.getTime();i.setMonth(i.getMonth()+1),i.setDate(i.getDate()-1),e=r<t.getTime()||i.getTime()<r}e&&(this.calendars=[{month:n.getMonth(),year:n.getFullYear()}],this._o.mainCalendar==="right"&&(this.calendars[0].month+=1-this._o.numberOfMonths)),this.adjustCalendars()}},adjustDate:function(n,e){let t=this.getDate()||new Date,i=parseInt(e)*24*60*60*1e3,r;n==="add"?r=new Date(t.valueOf()+i):n==="subtract"&&(r=new Date(t.valueOf()-i)),this.setDate(r)},adjustCalendars:function(){this.calendars[0]=wW(this.calendars[0]);for(let n=1;n<this._o.numberOfMonths;n++)this.calendars[n]=wW({month:this.calendars[0].month+n,year:this.calendars[0].year});this.draw()},gotoToday:function(){this.gotoDate(new Date)},gotoMonth:function(n){isNaN(n)||(this.calendars[0].month=parseInt(n,10),this.adjustCalendars())},nextMonth:function(){this.calendars[0].month++,this.adjustCalendars()},prevMonth:function(){this.calendars[0].month--,this.adjustCalendars()},gotoYear:function(n){isNaN(n)||(this.calendars[0].year=parseInt(n,10),this.adjustCalendars())},setMinDate:function(n){n instanceof Date?(lC(n),this._o.minDate=n,this._o.minYear=n.getFullYear(),this._o.minMonth=n.getMonth()):(this._o.minDate=wa.minDate,this._o.minYear=wa.minYear,this._o.minMonth=wa.minMonth,this._o.startRange=wa.startRange),this.draw()},setMaxDate:function(n){n instanceof Date?(lC(n),this._o.maxDate=n,this._o.maxYear=n.getFullYear(),this._o.maxMonth=n.getMonth()):(this._o.maxDate=wa.maxDate,this._o.maxYear=wa.maxYear,this._o.maxMonth=wa.maxMonth,this._o.endRange=wa.endRange),this.draw()},setStartRange:function(n){this._o.startRange=n},setEndRange:function(n){this._o.endRange=n},draw:function(n){if(!this._v&&!n)return;let e=this._o,t=e.minYear,i=e.maxYear,r=e.minMonth,s=e.maxMonth,o="",a;this._y<=t&&(this._y=t,!isNaN(r)&&this._m<r&&(this._m=r)),this._y>=i&&(this._y=i,!isNaN(s)&&this._m>s&&(this._m=s));for(let l=0;l<e.numberOfMonths;l++)a="pika-title-"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,2),o+='<div class="pika-lendar">'+LOe(this,l,this.calendars[l].year,this.calendars[l].month,this.calendars[0].year,a)+this.render(this.calendars[l].year,this.calendars[l].month,a)+"</div>";this.el.innerHTML=o,e.bound&&e.field.type!=="hidden"&&BI(function(){e.trigger.focus()},1),typeof this._o.onDraw=="function"&&this._o.onDraw(this),e.bound&&e.field.setAttribute("aria-label",e.ariaLabel)},adjustPosition:function(){let n,e,t,i,r,s,o,a,l,c,u;this._o.container||(this.el.style.position="absolute",n=this._o.trigger,e=this.el.offsetWidth,t=this.el.offsetHeight,i=Mu().innerWidth||Ks().documentElement.clientWidth,r=Mu().innerHeight||Ks().documentElement.clientHeight,s=Ks().body.scrollTop||Ks().documentElement.scrollTop,c=!0,u=!0,l=n.getBoundingClientRect(),o=l.left+Mu().pageXOffset,a=l.bottom+Mu().pageYOffset,(this._o.reposition&&o+e>i||this._o.position.indexOf("right")>-1&&o-e+n.offsetWidth>0)&&(o=o-e+n.offsetWidth,c=!1),(this._o.reposition&&a+t>r+s||this._o.position.indexOf("top")>-1&&a-t-n.offsetHeight>0)&&(a=a-t-n.offsetHeight,u=!1),o<0&&(o=0),a<0&&(a=0),this.el.style.left=o+"px",this.el.style.top=a+"px",JT(this.el,c?"left-aligned":"right-aligned"),JT(this.el,u?"bottom-aligned":"top-aligned"),eM(this.el,c?"right-aligned":"left-aligned"),eM(this.el,u?"top-aligned":"bottom-aligned"))},render:function(n,e,t){let i=this._o,r=new Date,s=bW(n,e),o=new Date(n,e,1).getDay(),a=[],l=[];lC(r),i.firstDay>0&&(o-=i.firstDay,o<0&&(o+=7));let c=e===0?11:e-1,u=e===11?0:e+1,h=e===0?n-1:n,d=e===11?n+1:n,f=bW(h,c),g=s+o,p=g;for(;p>7;)p-=7;g+=7-p;let m=!1;for(let v=0,y=0;v<g;v++){let w=new Date(n,e,1+(v-o)),R=hs(this._d)?cC(w,this._d):!1,x=cC(w,r),S=i.events.indexOf(w.toDateString())!==-1,T=v<o||v>=s+o,P=1+(v-o),E=e,A=n,L=i.startRange&&cC(i.startRange,w),W=i.endRange&&cC(i.endRange,w),F=i.startRange&&i.endRange&&i.startRange<w&&w<i.endRange,V=i.minDate&&w<i.minDate||i.maxDate&&w>i.maxDate||i.disableWeekends&&TOe(w)||i.disableDayFn&&i.disableDayFn(w);T&&(v<o?(P=f+P,E=c,A=h):(P=P-s,E=u,A=d));let H={day:P,month:E,year:A,hasEvent:S,isSelected:R,isToday:x,isDisabled:V,isEmpty:T,isStartRange:L,isEndRange:W,isInRange:F,showDaysInNextAndPreviousMonths:i.showDaysInNextAndPreviousMonths,enableSelectionDaysInNextAndPreviousMonths:i.enableSelectionDaysInNextAndPreviousMonths};i.pickWholeWeek&&R&&(m=!0),l.push(AOe(H)),++y===7&&(i.showWeekNumber&&l.unshift(IOe(this,v-o,e,n,i.firstWeekOfYearMinDays)),a.push(OOe(l,i.isRTL,i.pickWholeWeek,m)),l=[],y=0,m=!1)}return NOe(i,a,t)},isVisible:function(){return this._v},show:function(){this.isVisible()||(this._v=!0,this.draw(),eM(this.el,"is-hidden"),this._o.bound&&(Oa(Ks(),"click",this._onClick),this.adjustPosition()),typeof this._o.onOpen=="function"&&this._o.onOpen.call(this))},hide:function(){let n=this._v;n!==!1&&(this._o.bound&&Nl(Ks(),"click",this._onClick),this._o.container||(this.el.style.position="static",this.el.style.left="auto",this.el.style.top="auto"),JT(this.el,"is-hidden"),this._v=!1,n!==void 0&&typeof this._o.onClose=="function"&&this._o.onClose.call(this))},destroy:function(){let n=this._o;this.hide(),Nl(this.el,"mousedown",this._onMouseDown,!0),Nl(this.el,"touchend",this._onMouseDown,!0),Nl(this.el,"change",this._onChange),n.keyboardInput&&Nl(Ks(),"keydown",this._onKeyChange),n.field&&(Nl(n.field,"change",this._onInputChange),n.bound&&(Nl(n.trigger,"click",this._onInputClick),Nl(n.trigger,"focus",this._onInputFocus),Nl(n.trigger,"blur",this._onInputBlur))),this.el.parentNode&&this.el.parentNode.removeChild(this.el)}};function tM(n,e,t){return(e=HOe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function HOe(n){var e=$Oe(n,"string");return typeof e=="symbol"?e:e+""}function $Oe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const pK="date",CW="dateEditor";class mK extends Lf{constructor(){super(...arguments),tM(this,"defaultDateFormat","DD/MM/YYYY"),tM(this,"parentDestroyed",!1),tM(this,"$datePicker",null)}static get EDITOR_TYPE(){return pK}init(){if(typeof pe!="function")throw new Error("You need to include moment.js to your project.");if(typeof VI!="function")throw new Error("You need to include Pikaday to your project.");super.init(),this.hot.addHook("afterDestroy",()=>{this.parentDestroyed=!0,this.destroyElements()})}createElements(){super.createElements(),this.datePicker=this.hot.rootDocument.createElement("DIV"),this.datePickerStyle=this.datePicker.style,this.datePickerStyle.position="absolute",this.datePickerStyle.top=0,this.datePickerStyle.left=0,this.datePickerStyle.zIndex=9999,this.datePicker.setAttribute("dir",this.hot.isRtl()?"rtl":"ltr"),ge(this.datePicker,"htDatepickerHolder"),this.hot.rootDocument.body.appendChild(this.datePicker),this.eventManager.addEventListener(this.datePicker,"mousedown",e=>{Ue(e.target,"pika-day")&&this.hideDatepicker(),e.stopPropagation()})}destroyElements(){const e=this.datePicker.parentNode;this.$datePicker&&this.$datePicker.destroy(),e&&e.removeChild(this.datePicker)}prepare(e,t,i,r,s,o){super.prepare(e,t,i,r,s,o)}open(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;const i=this.hot.getShortcutManager().getContext("editor");this.showDatepicker(e),super.open(),i.addShortcuts([{keys:[["ArrowLeft"]],callback:()=>{this.$datePicker.adjustDate("subtract",1)}},{keys:[["ArrowRight"]],callback:()=>{this.$datePicker.adjustDate("add",1)}},{keys:[["ArrowUp"]],callback:()=>{this.$datePicker.adjustDate("subtract",7)}},{keys:[["ArrowDown"]],callback:()=>{this.$datePicker.adjustDate("add",7)}}],{group:CW})}close(){var e;this._opened=!1,(e=this.$datePicker)!==null&&e!==void 0&&e.destroy&&this.$datePicker.destroy(),this.hot._registerTimeout(()=>{const r=this.hot._getEditorManager();r.closeEditor(),this.hot.view.render(),r.prepareEditor()}),this.hot.getShortcutManager().getContext("editor").removeShortcutsByGroup(CW),super.close()}finishEditing(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;super.finishEditing(e,t)}showDatepicker(e){const t=this.cellProperties.dateFormat||this.defaultDateFormat,i=this.hot.view.isMouseDown(),r=e?tL(e.keyCode):!1;let s;this.datePicker.style.display="block",this.$datePicker=new VI(this.getDatePickerConfig()),typeof this.$datePicker.useMoment=="function"&&this.$datePicker.useMoment(pe),this.$datePicker._onInputFocus=function(){},this.originalValue?(s=this.originalValue,pe(s,t,!0).isValid()&&this.$datePicker.setMoment(pe(s,t),!0),this.getValue()!==this.originalValue&&this.setValue(this.originalValue),!r&&!i&&this.setValue("")):this.cellProperties.defaultDate?(s=this.cellProperties.defaultDate,pe(s,t,!0).isValid()&&this.$datePicker.setMoment(pe(s,t),!0),!r&&!i&&this.setValue("")):this.$datePicker.gotoToday()}hideDatepicker(){this.datePickerStyle.display="none",this.$datePicker.hide()}getDatePickerConfig(){const e=this.TEXTAREA,t={};this.cellProperties&&this.cellProperties.datePickerConfig&&vy(t,this.cellProperties.datePickerConfig);const i=t.onSelect,r=t.onClose;return t.field=e,t.trigger=e,t.container=this.datePicker,t.bound=!1,t.keyboardInput=!1,t.format=t.format||this.defaultDateFormat,t.reposition=t.reposition||!1,t.isRTL=!1,t.onSelect=s=>{let o=s;isNaN(o.getTime())||(o=pe(o).format(this.cellProperties.dateFormat||this.defaultDateFormat)),this.setValue(o),i&&i()},t.onClose=()=>{this.parentDestroyed||this.finishEditing(!1),r&&r()},t}refreshDimensions(e){var t;if(super.refreshDimensions(e),this.state!==qn.EDITING)return;if(this.TD=this.getEditedCell(),!this.TD){this.hideDatepicker();return}const{rowIndexMapper:i,columnIndexMapper:r}=this.hot,{wtOverlays:s}=this.hot.view._wt,{wtTable:o}=(t=s.getParentOverlay(this.TD))!==null&&t!==void 0?t:this.hot.view._wt,a=i.getVisualFromRenderableIndex(o.getFirstPartiallyVisibleRow()),l=i.getVisualFromRenderableIndex(o.getLastPartiallyVisibleRow()),c=r.getVisualFromRenderableIndex(o.getFirstPartiallyVisibleColumn()),u=r.getVisualFromRenderableIndex(o.getLastPartiallyVisibleColumn());if(this.row>=a&&this.row<=l&&this.col>=c&&this.col<=u){const h=this.TD.getBoundingClientRect();this.datePickerStyle.top=`${this.hot.rootWindow.pageYOffset+h.top+ni(this.TD)}px`;let d=this.hot.rootWindow.pageXOffset;this.hot.isRtl()?d+=h.right-gn(this.datePicker):d+=h.left,this.datePickerStyle.left=`${d}px`}else this.hideDatepicker()}}const FOe="dropdown";class nH extends eH{static get EDITOR_TYPE(){return FOe}prepare(e,t,i,r,s,o){super.prepare(e,t,i,r,s,o),this.cellProperties.filter=!1,this.cellProperties.strict=!0}}Oe.getSingleton().add("beforeValidate",function(n,e,t){const i=this.propToCol(t);if(Number.isInteger(i)){const r=this.getCellMeta(e,i);r.editor===nH&&r.strict===void 0&&(r.filter=!1,r.strict=!0)}});const BOe="numeric";class bK extends Lf{static get EDITOR_TYPE(){return BOe}}const VOe="password";class vK extends Lf{static get EDITOR_TYPE(){return VOe}createElements(){super.createElements(),this.TEXTAREA=this.hot.rootDocument.createElement("input"),this.TEXTAREA.setAttribute("type","password"),this.TEXTAREA.setAttribute("data-hot-input",""),this.TEXTAREA.className="handsontableInput",this.textareaStyle=this.TEXTAREA.style,this.textareaStyle.width=0,this.textareaStyle.height=0,ra(this.TEXTAREA_PARENT),this.TEXTAREA_PARENT.appendChild(this.TEXTAREA)}}const nM="ht_editor_visible",SW="selectEditor",WOe="select";class wK extends om{static get EDITOR_TYPE(){return WOe}init(){this.select=this.hot.rootDocument.createElement("select"),this.select.setAttribute("data-hot-input","true"),this.select.style.display="none",ge(this.select,"htSelectEditor"),this.hot.rootElement.appendChild(this.select),this.registerHooks()}getValue(){return this.select.value}setValue(e){this.select.value=e}open(){this._opened=!0,this.refreshDimensions(),this.select.style.display="",this.hot.getShortcutManager().setActiveContextName("editor"),this.registerShortcuts()}close(){this._opened=!1,this.select.style.display="none",Ue(this.select,nM)&&Qe(this.select,nM),this.unregisterShortcuts(),this.clearHooks()}focus(){this.select.focus()}registerHooks(){this.addHook("afterScrollHorizontally",()=>this.refreshDimensions()),this.addHook("afterScrollVertically",()=>this.refreshDimensions()),this.addHook("afterColumnResize",()=>this.refreshDimensions()),this.addHook("afterRowResize",()=>this.refreshDimensions())}prepare(e,t,i,r,s,o){super.prepare(e,t,i,r,s,o);const a=this.cellProperties.selectOptions;let l;typeof a=="function"?l=this.prepareOptions(a(this.row,this.col,this.prop)):l=this.prepareOptions(a),ra(this.select),ut(l,(c,u)=>{const h=this.hot.rootDocument.createElement("OPTION");h.value=u,kf(h,c),this.select.appendChild(h)})}prepareOptions(e){let t={};if(Array.isArray(e))for(let i=0,r=e.length;i<r;i++)t[e[i]]=e[i];else typeof e=="object"&&(t=e);return t}refreshValue(){const e=this.hot.getSourceDataAtCell(this.row,this.prop);this.originalValue=e,this.setValue(e),this.refreshDimensions()}refreshDimensions(){if(this.state!==qn.EDITING)return;if(this.TD=this.getEditedCell(),!this.TD){this.close();return}const{top:e,start:t,width:i,height:r}=this.getEditedCellRect(),s=this.select.style;s.height=`${r}px`,s.width=`${i}px`,s.top=`${e}px`,s[this.hot.isRtl()?"right":"left"]=`${t}px`,s.margin="0px",ge(this.select,nM)}registerShortcuts(){const t=this.hot.getShortcutManager().getContext("editor"),i={group:SW};this.isInFullEditMode()&&t.addShortcuts([{keys:[["ArrowUp"]],callback:()=>{const r=this.select.selectedIndex-1;r>=0&&(this.select[r].selected=!0)}},{keys:[["ArrowDown"]],callback:()=>{const r=this.select.selectedIndex+1;r<=this.select.length-1&&(this.select[r].selected=!0)}}],i)}unregisterShortcuts(){this.hot.getShortcutManager().getContext("editor").removeShortcutsByGroup(SW)}}const jOe="time";class yK extends Lf{static get EDITOR_TYPE(){return jOe}prepare(e,t,i,r,s,o){super.prepare(e,t,i,r,s,o),this.TEXTAREA.dir="ltr"}}function zOe(){Gr(om),Gr(eH),Gr(gK),Gr(mK),Gr(nH),Gr(JN),Gr(bK),Gr(vK),Gr(wK),Gr(Lf),Gr(yK)}const UOe="html";function iH(n,e,t,i,r,s,o){Ry.apply(this,[n,e,t,i,r,s,o]),kf(e,s??"",!1)}iH.RENDERER_TYPE=UOe;const GOe="autocomplete";function am(n,e,t,i,r,s,o){const{rootDocument:a}=n,l=o.allowHtml?iH:jc,c=a.createElement("DIV"),u=n.getSettings().ariaTags;if(c.className="htAutocompleteArrow",u&&c.setAttribute(...If()),c.appendChild(a.createTextNode("▼")),l.apply(this,[n,e,t,i,r,s,o]),e.firstChild||e.appendChild(a.createTextNode(" ")),e.insertBefore(c,e.firstChild),ge(e,"htAutocomplete"),!n.acArrowListener){const h=new uo(n);n.acArrowListener=function(d){Ue(d.target,"htAutocompleteArrow")&&n.view._wt.getSetting("onCellDblClick",null,n._createCellCoords(t,i),e)},h.addEventListener(n.rootElement,"mousedown",n.acArrowListener),n.addHookOnce("afterDestroy",()=>{h.destroy()})}}am.RENDERER_TYPE=GOe;const YOe="dropdown";function rH(n,e,t,i,r,s,o){am.apply(this,[n,e,t,i,r,s,o])}rH.RENDERER_TYPE=YOe;const _W=new WeakMap,RW=new WeakMap,KOe="htBadValue",Op="data-row",kp="data-col",qOe="checkboxRenderer",CK="checkbox";Oe.getSingleton().add("modifyAutoColumnSizeSeed",function(n,e,t){const{label:i,type:r,row:s,column:o,prop:a}=e;if(r===CK){if(i){const{value:l,property:c}=i;let u=t;if(l)u=typeof l=="function"?l(s,o,a,t):l;else if(c){const h=this.getDataAtRowProp(s,c);u=h!==null?h:t}n=u}return n}});function sH(n,e,t,i,r,s,o){const{rootDocument:a}=n,l=n.getSettings().ariaTags;Ry.apply(this,[n,e,t,i,r,s,o]),XOe(n);let c=ZOe(a);const u=o.label;let h=!1;if(typeof o.checkedTemplate>"u"&&(o.checkedTemplate=!0),typeof o.uncheckedTemplate>"u"&&(o.uncheckedTemplate=!1),ra(e),s===o.checkedTemplate||jn(s).toLocaleLowerCase(o.locale)===jn(o.checkedTemplate).toLocaleLowerCase(o.locale)?c.checked=!0:s===o.uncheckedTemplate||jn(s).toLocaleLowerCase(o.locale)===jn(o.uncheckedTemplate).toLocaleLowerCase(o.locale)?c.checked=!1:zn(s)?ge(c,"noValue"):(c.style.display="none",ge(c,KOe),h=!0),ze(c,[[Op,t],[kp,i]]),l&&ze(c,[eR(c.checked?n.getTranslatedPhrase(KN):n.getTranslatedPhrase(qN)),R9(c.checked),gRe()]),!h&&u){let p="";if(u.value)p=typeof u.value=="function"?u.value.call(this,t,i,r,s):u.value;else if(u.property){const v=n.getDataAtRowProp(t,u.property);p=v!==null?v:""}const m=QOe(a,p,u.separated!==!0);u.position==="before"?u.separated?(e.appendChild(m),e.appendChild(c)):(m.appendChild(c),c=m):(!u.position||u.position==="after")&&(u.separated?(e.appendChild(c),e.appendChild(m)):(m.insertBefore(c,m.firstChild),c=m))}(!u||u&&!u.separated)&&e.appendChild(c),h&&e.appendChild(a.createTextNode("#bad-value#")),_W.has(n)||(_W.set(n,!0),d());function d(){const m=n.getShortcutManager().getContext("grid"),v={group:qOe,relativeToGroup:uh,position:"before"};m.addShortcuts([{keys:[["space"]],callback:()=>(f(),!g()),runOnlyIf:()=>{var y;return(y=n.getSelectedRangeLast())===null||y===void 0?void 0:y.highlight.isCell()}},{keys:[["enter"]],callback:()=>(f(),!g()),runOnlyIf:()=>{const y=n.getSelectedRangeLast();return n.getSettings().enterBeginsEditing&&(y==null?void 0:y.isSingle())&&y.highlight.isCell()}},{keys:[["delete"],["backspace"]],callback:()=>(f(!0),!g()),runOnlyIf:()=>{var y;return(y=n.getSelectedRangeLast())===null||y===void 0?void 0:y.highlight.isCell()}}],v)}function f(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const m=n.getSelectedRange(),v=[],y=new Map;let w=[],R=0;if(m){for(let x=0;x<m.length;x++){const{row:S,col:T}=m[x].getTopStartCorner(),{row:P,col:E}=m[x].getBottomEndCorner();for(let A=S;A<=P;A+=1)for(let L=T;L<=E;L+=1){const W=n.getCellMeta(A,L),F={checkedTemplate:W.checkedTemplate,uncheckedTemplate:W.uncheckedTemplate};if(W.type!=="checkbox"){p===!0&&!W.readOnly&&(y.has(v.length)?y.set(v.length,[...y.get(v.length),[A,L,null]]):y.set(v.length,[[A,L,null]]));continue}if(W.readOnly===!0)continue;typeof W.checkedTemplate>"u"&&(W.checkedTemplate=!0),typeof W.uncheckedTemplate>"u"&&(W.uncheckedTemplate=!1);const V=n.getDataAtCell(A,L);p===!1?[W.checkedTemplate,W.checkedTemplate.toString()].includes(V)?w.push([A,L,W.uncheckedTemplate,F]):[W.uncheckedTemplate,W.uncheckedTemplate.toString(),null,void 0].includes(V)&&w.push([A,L,W.checkedTemplate,F]):w.push([A,L,W.uncheckedTemplate,F]),R+=1}v.push(R),R=0}w.every(x=>{let[,,S]=x;return S===w[0][2]})?w=w.map(x=>{let[S,T,P]=x;return[S,T,P]}):w=w.map(x=>{let[S,T,,P]=x;return[S,T,P.checkedTemplate]}),w.length>0&&v.forEach((x,S)=>{let T=w.splice(0,x);y.size&&y.has(S)&&(T=[...T,...y.get(S)]),n.setDataAtCell(T)})}}function g(){const p=n.getSelectedRange();if(p){for(let m=0;m<p.length;m++){const v=p[m].getTopStartCorner(),y=p[m].getBottomEndCorner();for(let w=v.row;w<=y.row;w++)for(let R=v.col;R<=y.col;R++){const x=n.getCellMeta(w,R),S=n.getCell(w,R);if(S==null)return!0;if(S.querySelectorAll("input[type=checkbox]").length>0&&!x.readOnly)return!0}}return!1}}}sH.RENDERER_TYPE=CK;function XOe(n){let e=RW.get(n);if(!e){const{rootElement:t}=n;e=new uo(n),e.addEventListener(t,"click",i=>eke(i,n)),e.addEventListener(t,"mouseup",i=>JOe(i,n)),e.addEventListener(t,"change",i=>tke(i,n)),RW.set(n,e)}return e}function ZOe(n){const e=n.createElement("input");return e.className="htCheckboxRendererInput",e.type="checkbox",e.setAttribute("tabindex","-1"),e.cloneNode(!1)}function QOe(n,e,t){const i=n.createElement("label");return i.className=`htCheckboxRendererLabel ${t?"fullWidth":""}`,i.appendChild(n.createTextNode(e)),i.cloneNode(!0)}function JOe(n,e){const{target:t}=n;oH(t)&&(!t.hasAttribute(Op)||!t.hasAttribute(kp)||setTimeout(e.listen,10))}function eke(n,e){const{target:t}=n;if(!oH(t)||!t.hasAttribute(Op)||!t.hasAttribute(kp))return;const i=parseInt(t.getAttribute(Op),10),r=parseInt(t.getAttribute(kp),10);e.getCellMeta(i,r).readOnly&&n.preventDefault()}function tke(n,e){const{target:t}=n;if(!oH(t)||!t.hasAttribute(Op)||!t.hasAttribute(kp))return;const i=parseInt(t.getAttribute(Op),10),r=parseInt(t.getAttribute(kp),10),s=e.getCellMeta(i,r);if(!s.readOnly){let o=null;n.target.checked?o=s.uncheckedTemplate===void 0?!0:s.checkedTemplate:o=s.uncheckedTemplate===void 0?!1:s.uncheckedTemplate,e.setDataAtCell(i,r,o)}}function oH(n){return n.tagName==="INPUT"&&n.getAttribute("type")==="checkbox"}const nke="handsontable";function aH(n,e,t,i,r,s,o){am.apply(this,[n,e,t,i,r,s,o])}aH.RENDERER_TYPE=nke;function uC(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var SK={exports:{}};(function(n,e){(function(t){n.exports=t()})(function(){return function t(i,r,s){function o(c,u){if(!r[c]){if(!i[c]){var h=typeof uC=="function"&&uC;if(!u&&h)return h(c,!0);if(a)return a(c,!0);var d=new Error("Cannot find module '"+c+"'");throw d.code="MODULE_NOT_FOUND",d}var f=r[c]={exports:{}};i[c][0].call(f.exports,function(g){return o(i[c][1][g]||g)},f,f.exports,t,i,r,s)}return r[c].exports}for(var a=typeof uC=="function"&&uC,l=0;l<s.length;l++)o(s[l]);return o}({1:[function(t,i,r){(function(s){var o,a=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,l=Math.ceil,c=Math.floor,u="[BigNumber Error] ",h=u+"Number primitive has more than 15 significant digits: ",d=1e14,f=14,g=9007199254740991,p=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],m=1e7,v=1e9;function y(E){var A=0|E;return 0<E||E===A?A:A-1}function w(E){for(var A,L,W=1,F=E.length,V=E[0]+"";W<F;){for(A=E[W++]+"",L=f-A.length;L--;A="0"+A);V+=A}for(F=V.length;V.charCodeAt(--F)===48;);return V.slice(0,F+1||1)}function R(E,A){var L,W,F=E.c,V=A.c,H=E.s,N=A.s,j=E.e,k=A.e;if(!H||!N)return null;if(L=F&&!F[0],W=V&&!V[0],L||W)return L?W?0:-N:H;if(H!=N)return H;if(L=H<0,W=j==k,!F||!V)return W?0:!F^L?1:-1;if(!W)return k<j^L?1:-1;for(N=(j=F.length)<(k=V.length)?j:k,H=0;H<N;H++)if(F[H]!=V[H])return F[H]>V[H]^L?1:-1;return j==k?0:k<j^L?1:-1}function x(E,A,L,W){if(E<A||L<E||E!==(E<0?l(E):c(E)))throw Error(u+(W||"Argument")+(typeof E=="number"?E<A||L<E?" out of range: ":" not an integer: ":" not a primitive number: ")+String(E))}function S(E){var A=E.c.length-1;return y(E.e/f)==A&&E.c[A]%2!=0}function T(E,A){return(1<E.length?E.charAt(0)+"."+E.slice(1):E)+(A<0?"e":"e+")+A}function P(E,A,L){var W,F;if(A<0){for(F=L+".";++A;F+=L);E=F+E}else if(++A>(W=E.length)){for(F=L,A-=W;--A;F+=L);E+=F}else A<W&&(E=E.slice(0,A)+"."+E.slice(A));return E}(o=function E(A){var L,W,F,V,H,N,j,k,K,ie,b=Z.prototype={constructor:Z,toString:null,valueOf:null},C=new Z(1),_=20,I=4,$=-7,M=21,B=-1e7,z=1e7,U=!1,le=1,ue=0,be={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},fe="0123456789abcdefghijklmnopqrstuvwxyz";function Z(D,O){var G,te,X,re,J,Q,se,oe,ae=this;if(!(ae instanceof Z))return new Z(D,O);if(O==null){if(D instanceof Z)return ae.s=D.s,ae.e=D.e,void(ae.c=(D=D.c)?D.slice():D);if((Q=typeof D=="number")&&0*D==0){if(ae.s=1/D<0?(D=-D,-1):1,D===~~D){for(re=0,J=D;10<=J;J/=10,re++);return ae.e=re,void(ae.c=[D])}oe=String(D)}else{if(oe=String(D),!a.test(oe))return F(ae,oe,Q);ae.s=oe.charCodeAt(0)==45?(oe=oe.slice(1),-1):1}-1<(re=oe.indexOf("."))&&(oe=oe.replace(".","")),0<(J=oe.search(/e/i))?(re<0&&(re=J),re+=+oe.slice(J+1),oe=oe.substring(0,J)):re<0&&(re=oe.length)}else{if(x(O,2,fe.length,"Base"),oe=String(D),O==10)return he(ae=new Z(D instanceof Z?D:oe),_+ae.e+1,I);if(Q=typeof D=="number"){if(0*D!=0)return F(ae,oe,Q,O);if(ae.s=1/D<0?(oe=oe.slice(1),-1):1,Z.DEBUG&&15<oe.replace(/^0\.0*|\./,"").length)throw Error(h+D);Q=!1}else ae.s=oe.charCodeAt(0)===45?(oe=oe.slice(1),-1):1;for(G=fe.slice(0,O),re=J=0,se=oe.length;J<se;J++)if(G.indexOf(te=oe.charAt(J))<0){if(te=="."){if(re<J){re=se;continue}}else if(!X&&(oe==oe.toUpperCase()&&(oe=oe.toLowerCase())||oe==oe.toLowerCase()&&(oe=oe.toUpperCase()))){X=!0,J=-1,re=0;continue}return F(ae,String(D),Q,O)}-1<(re=(oe=W(oe,O,10,ae.s)).indexOf("."))?oe=oe.replace(".",""):re=oe.length}for(J=0;oe.charCodeAt(J)===48;J++);for(se=oe.length;oe.charCodeAt(--se)===48;);if(oe=oe.slice(J,++se)){if(se-=J,Q&&Z.DEBUG&&15<se&&(g<D||D!==c(D)))throw Error(h+ae.s*D);if(z<(re=re-J-1))ae.c=ae.e=null;else if(re<B)ae.c=[ae.e=0];else{if(ae.e=re,ae.c=[],J=(re+1)%f,re<0&&(J+=f),J<se){for(J&&ae.c.push(+oe.slice(0,J)),se-=f;J<se;)ae.c.push(+oe.slice(J,J+=f));oe=oe.slice(J),J=f-oe.length}else J-=se;for(;J--;oe+="0");ae.c.push(+oe)}}else ae.c=[ae.e=0]}function Y(D,O,G,te){var X,re,J,Q,se;if(G==null?G=I:x(G,0,8),!D.c)return D.toString();if(X=D.c[0],J=D.e,O==null)se=w(D.c),se=te==1||te==2&&(J<=$||M<=J)?T(se,J):P(se,J,"0");else if(re=(D=he(new Z(D),O,G)).e,Q=(se=w(D.c)).length,te==1||te==2&&(O<=re||re<=$)){for(;Q<O;se+="0",Q++);se=T(se,re)}else if(O-=J,se=P(se,re,"0"),Q<re+1){if(0<--O)for(se+=".";O--;se+="0");}else if(0<(O+=re-Q))for(re+1==Q&&(se+=".");O--;se+="0");return D.s<0&&X?"-"+se:se}function ne(D,O){for(var G,te=1,X=new Z(D[0]);te<D.length;te++){if(!(G=new Z(D[te])).s){X=G;break}O.call(X,G)&&(X=G)}return X}function de(D,O,G){for(var te=1,X=O.length;!O[--X];O.pop());for(X=O[0];10<=X;X/=10,te++);return(G=te+G*f-1)>z?D.c=D.e=null:D.c=G<B?[D.e=0]:(D.e=G,O),D}function he(D,O,G,te){var X,re,J,Q,se,oe,ae,we=D.c,xe=p;if(we){e:{for(X=1,Q=we[0];10<=Q;Q/=10,X++);if((re=O-X)<0)re+=f,J=O,ae=(se=we[oe=0])/xe[X-J-1]%10|0;else if((oe=l((re+1)/f))>=we.length){if(!te)break e;for(;we.length<=oe;we.push(0));se=ae=0,J=(re%=f)-f+(X=1)}else{for(se=Q=we[oe],X=1;10<=Q;Q/=10,X++);ae=(J=(re%=f)-f+X)<0?0:se/xe[X-J-1]%10|0}if(te=te||O<0||we[oe+1]!=null||(J<0?se:se%xe[X-J-1]),te=G<4?(ae||te)&&(G==0||G==(D.s<0?3:2)):5<ae||ae==5&&(G==4||te||G==6&&(0<re?0<J?se/xe[X-J]:0:we[oe-1])%10&1||G==(D.s<0?8:7)),O<1||!we[0])return we.length=0,te?(O-=D.e+1,we[0]=xe[(f-O%f)%f],D.e=-O||0):we[0]=D.e=0,D;if(re==0?(we.length=oe,Q=1,oe--):(we.length=oe+1,Q=xe[f-re],we[oe]=0<J?c(se/xe[X-J]%xe[J])*Q:0),te)for(;;){if(oe==0){for(re=1,J=we[0];10<=J;J/=10,re++);for(J=we[0]+=Q,Q=1;10<=J;J/=10,Q++);re!=Q&&(D.e++,we[0]==d&&(we[0]=1));break}if(we[oe]+=Q,we[oe]!=d)break;we[oe--]=0,Q=1}for(re=we.length;we[--re]===0;we.pop());}D.e>z?D.c=D.e=null:D.e<B&&(D.c=[D.e=0])}return D}function ce(D){var O,G=D.e;return G===null?D.toString():(O=w(D.c),O=G<=$||M<=G?T(O,G):P(O,G,"0"),D.s<0?"-"+O:O)}return Z.clone=E,Z.ROUND_UP=0,Z.ROUND_DOWN=1,Z.ROUND_CEIL=2,Z.ROUND_FLOOR=3,Z.ROUND_HALF_UP=4,Z.ROUND_HALF_DOWN=5,Z.ROUND_HALF_EVEN=6,Z.ROUND_HALF_CEIL=7,Z.ROUND_HALF_FLOOR=8,Z.EUCLID=9,Z.config=Z.set=function(D){var O,G;if(D!=null){if(typeof D!="object")throw Error(u+"Object expected: "+D);if(D.hasOwnProperty(O="DECIMAL_PLACES")&&(x(G=D[O],0,v,O),_=G),D.hasOwnProperty(O="ROUNDING_MODE")&&(x(G=D[O],0,8,O),I=G),D.hasOwnProperty(O="EXPONENTIAL_AT")&&((G=D[O])&&G.pop?(x(G[0],-v,0,O),x(G[1],0,v,O),$=G[0],M=G[1]):(x(G,-v,v,O),$=-(M=G<0?-G:G))),D.hasOwnProperty(O="RANGE"))if((G=D[O])&&G.pop)x(G[0],-v,-1,O),x(G[1],1,v,O),B=G[0],z=G[1];else{if(x(G,-v,v,O),!G)throw Error(u+O+" cannot be zero: "+G);B=-(z=G<0?-G:G)}if(D.hasOwnProperty(O="CRYPTO")){if((G=D[O])!==!!G)throw Error(u+O+" not true or false: "+G);if(G){if(typeof crypto>"u"||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw U=!G,Error(u+"crypto unavailable");U=G}else U=G}if(D.hasOwnProperty(O="MODULO_MODE")&&(x(G=D[O],0,9,O),le=G),D.hasOwnProperty(O="POW_PRECISION")&&(x(G=D[O],0,v,O),ue=G),D.hasOwnProperty(O="FORMAT")){if(typeof(G=D[O])!="object")throw Error(u+O+" not an object: "+G);be=G}if(D.hasOwnProperty(O="ALPHABET")){if(typeof(G=D[O])!="string"||/^.$|[+-.\s]|(.).*\1/.test(G))throw Error(u+O+" invalid: "+G);fe=G}}return{DECIMAL_PLACES:_,ROUNDING_MODE:I,EXPONENTIAL_AT:[$,M],RANGE:[B,z],CRYPTO:U,MODULO_MODE:le,POW_PRECISION:ue,FORMAT:be,ALPHABET:fe}},Z.isBigNumber=function(D){return D instanceof Z||D&&D._isBigNumber===!0||!1},Z.maximum=Z.max=function(){return ne(arguments,b.lt)},Z.minimum=Z.min=function(){return ne(arguments,b.gt)},Z.random=(V=9007199254740992,H=Math.random()*V&2097151?function(){return c(Math.random()*V)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(D){var O,G,te,X,re,J=0,Q=[],se=new Z(C);if(D==null?D=_:x(D,0,v),X=l(D/f),U)if(crypto.getRandomValues){for(O=crypto.getRandomValues(new Uint32Array(X*=2));J<X;)9e15<=(re=131072*O[J]+(O[J+1]>>>11))?(G=crypto.getRandomValues(new Uint32Array(2)),O[J]=G[0],O[J+1]=G[1]):(Q.push(re%1e14),J+=2);J=X/2}else{if(!crypto.randomBytes)throw U=!1,Error(u+"crypto unavailable");for(O=crypto.randomBytes(X*=7);J<X;)9e15<=(re=281474976710656*(31&O[J])+1099511627776*O[J+1]+4294967296*O[J+2]+16777216*O[J+3]+(O[J+4]<<16)+(O[J+5]<<8)+O[J+6])?crypto.randomBytes(7).copy(O,J):(Q.push(re%1e14),J+=7);J=X/7}if(!U)for(;J<X;)(re=H())<9e15&&(Q[J++]=re%1e14);for(X=Q[--J],D%=f,X&&D&&(re=p[f-D],Q[J]=c(X/re)*re);Q[J]===0;Q.pop(),J--);if(J<0)Q=[te=0];else{for(te=-1;Q[0]===0;Q.splice(0,1),te-=f);for(J=1,re=Q[0];10<=re;re/=10,J++);J<f&&(te-=f-J)}return se.e=te,se.c=Q,se}),Z.sum=function(){for(var D=1,O=arguments,G=new Z(O[0]);D<O.length;)G=G.plus(O[D++]);return G},W=function(){var D="0123456789";function O(G,te,X,re){for(var J,Q,se=[0],oe=0,ae=G.length;oe<ae;){for(Q=se.length;Q--;se[Q]*=te);for(se[0]+=re.indexOf(G.charAt(oe++)),J=0;J<se.length;J++)se[J]>X-1&&(se[J+1]==null&&(se[J+1]=0),se[J+1]+=se[J]/X|0,se[J]%=X)}return se.reverse()}return function(G,te,X,re,J){var Q,se,oe,ae,we,xe,Fe,Ke,ht=G.indexOf("."),tt=_,qe=I;for(0<=ht&&(ae=ue,ue=0,G=G.replace(".",""),xe=(Ke=new Z(te)).pow(G.length-ht),ue=ae,Ke.c=O(P(w(xe.c),xe.e,"0"),10,X,D),Ke.e=Ke.c.length),oe=ae=(Fe=O(G,te,X,J?(Q=fe,D):(Q=D,fe))).length;Fe[--ae]==0;Fe.pop());if(!Fe[0])return Q.charAt(0);if(ht<0?--oe:(xe.c=Fe,xe.e=oe,xe.s=re,Fe=(xe=L(xe,Ke,tt,qe,X)).c,we=xe.r,oe=xe.e),ht=Fe[se=oe+tt+1],ae=X/2,we=we||se<0||Fe[se+1]!=null,we=qe<4?(ht!=null||we)&&(qe==0||qe==(xe.s<0?3:2)):ae<ht||ht==ae&&(qe==4||we||qe==6&&1&Fe[se-1]||qe==(xe.s<0?8:7)),se<1||!Fe[0])G=we?P(Q.charAt(1),-tt,Q.charAt(0)):Q.charAt(0);else{if(Fe.length=se,we)for(--X;++Fe[--se]>X;)Fe[se]=0,se||(++oe,Fe=[1].concat(Fe));for(ae=Fe.length;!Fe[--ae];);for(ht=0,G="";ht<=ae;G+=Q.charAt(Fe[ht++]));G=P(G,oe,Q.charAt(0))}return G}}(),L=function(){function D(te,X,re){var J,Q,se,oe,ae=0,we=te.length,xe=X%m,Fe=X/m|0;for(te=te.slice();we--;)ae=((Q=xe*(se=te[we]%m)+(J=Fe*se+(oe=te[we]/m|0)*xe)%m*m+ae)/re|0)+(J/m|0)+Fe*oe,te[we]=Q%re;return ae&&(te=[ae].concat(te)),te}function O(te,X,re,J){var Q,se;if(re!=J)se=J<re?1:-1;else for(Q=se=0;Q<re;Q++)if(te[Q]!=X[Q]){se=te[Q]>X[Q]?1:-1;break}return se}function G(te,X,re,J){for(var Q=0;re--;)te[re]-=Q,Q=te[re]<X[re]?1:0,te[re]=Q*J+te[re]-X[re];for(;!te[0]&&1<te.length;te.splice(0,1));}return function(te,X,re,J,Q){var se,oe,ae,we,xe,Fe,Ke,ht,tt,qe,Tt,Nn,Nf,yo,gm,As,Mn,vi=te.s==X.s?1:-1,Wi=te.c,yn=X.c;if(!(Wi&&Wi[0]&&yn&&yn[0]))return new Z(te.s&&X.s&&(Wi?!yn||Wi[0]!=yn[0]:yn)?Wi&&Wi[0]==0||!yn?0*vi:vi/0:NaN);for(tt=(ht=new Z(vi)).c=[],vi=re+(oe=te.e-X.e)+1,Q||(Q=d,oe=y(te.e/f)-y(X.e/f),vi=vi/f|0),ae=0;yn[ae]==(Wi[ae]||0);ae++);if(yn[ae]>(Wi[ae]||0)&&oe--,vi<0)tt.push(1),we=!0;else{for(yo=Wi.length,As=yn.length,vi+=2,1<(xe=c(Q/(yn[ae=0]+1)))&&(yn=D(yn,xe,Q),Wi=D(Wi,xe,Q),As=yn.length,yo=Wi.length),Nf=As,Tt=(qe=Wi.slice(0,As)).length;Tt<As;qe[Tt++]=0);Mn=yn.slice(),Mn=[0].concat(Mn),gm=yn[0],yn[1]>=Q/2&&gm++;do{if(xe=0,(se=O(yn,qe,As,Tt))<0){if(Nn=qe[0],As!=Tt&&(Nn=Nn*Q+(qe[1]||0)),1<(xe=c(Nn/gm)))for(Q<=xe&&(xe=Q-1),Ke=(Fe=D(yn,xe,Q)).length,Tt=qe.length;O(Fe,qe,Ke,Tt)==1;)xe--,G(Fe,As<Ke?Mn:yn,Ke,Q),Ke=Fe.length,se=1;else xe==0&&(se=xe=1),Ke=(Fe=yn.slice()).length;if(Ke<Tt&&(Fe=[0].concat(Fe)),G(qe,Fe,Tt,Q),Tt=qe.length,se==-1)for(;O(yn,qe,As,Tt)<1;)xe++,G(qe,As<Tt?Mn:yn,Tt,Q),Tt=qe.length}else se===0&&(xe++,qe=[0]);tt[ae++]=xe,qe[0]?qe[Tt++]=Wi[Nf]||0:(qe=[Wi[Nf]],Tt=1)}while((Nf++<yo||qe[0]!=null)&&vi--);we=qe[0]!=null,tt[0]||tt.splice(0,1)}if(Q==d){for(ae=1,vi=tt[0];10<=vi;vi/=10,ae++);he(ht,re+(ht.e=ae+oe*f-1)+1,J,we)}else ht.e=oe,ht.r=+we;return ht}}(),N=/^(-?)0([xbo])(?=\w[\w.]*$)/i,j=/^([^.]+)\.$/,k=/^\.([^.]+)$/,K=/^-?(Infinity|NaN)$/,ie=/^\s*\+(?=[\w.])|^\s+|\s+$/g,F=function(D,O,G,te){var X,re=G?O:O.replace(ie,"");if(K.test(re))D.s=isNaN(re)?null:re<0?-1:1,D.c=D.e=null;else{if(!G&&(re=re.replace(N,function(J,Q,se){return X=(se=se.toLowerCase())=="x"?16:se=="b"?2:8,te&&te!=X?J:Q}),te&&(X=te,re=re.replace(j,"$1").replace(k,"0.$1")),O!=re))return new Z(re,X);if(Z.DEBUG)throw Error(u+"Not a"+(te?" base "+te:"")+" number: "+O);D.c=D.e=D.s=null}},b.absoluteValue=b.abs=function(){var D=new Z(this);return D.s<0&&(D.s=1),D},b.comparedTo=function(D,O){return R(this,new Z(D,O))},b.decimalPlaces=b.dp=function(D,O){var G,te,X;if(D!=null)return x(D,0,v),O==null?O=I:x(O,0,8),he(new Z(this),D+this.e+1,O);if(!(G=this.c))return null;if(te=((X=G.length-1)-y(this.e/f))*f,X=G[X])for(;X%10==0;X/=10,te--);return te<0&&(te=0),te},b.dividedBy=b.div=function(D,O){return L(this,new Z(D,O),_,I)},b.dividedToIntegerBy=b.idiv=function(D,O){return L(this,new Z(D,O),0,1)},b.exponentiatedBy=b.pow=function(D,O){var G,te,X,re,J,Q,se,oe,ae=this;if((D=new Z(D)).c&&!D.isInteger())throw Error(u+"Exponent not an integer: "+ce(D));if(O!=null&&(O=new Z(O)),J=14<D.e,!ae.c||!ae.c[0]||ae.c[0]==1&&!ae.e&&ae.c.length==1||!D.c||!D.c[0])return oe=new Z(Math.pow(+ce(ae),J?2-S(D):+ce(D))),O?oe.mod(O):oe;if(Q=D.s<0,O){if(O.c?!O.c[0]:!O.s)return new Z(NaN);(te=!Q&&ae.isInteger()&&O.isInteger())&&(ae=ae.mod(O))}else{if(9<D.e&&(0<ae.e||ae.e<-1||(ae.e==0?1<ae.c[0]||J&&24e7<=ae.c[1]:ae.c[0]<8e13||J&&ae.c[0]<=9999975e7)))return re=ae.s<0&&S(D)?-0:0,-1<ae.e&&(re=1/re),new Z(Q?1/re:re);ue&&(re=l(ue/f+2))}for(se=J?(G=new Z(.5),Q&&(D.s=1),S(D)):(X=Math.abs(+ce(D)))%2,oe=new Z(C);;){if(se){if(!(oe=oe.times(ae)).c)break;re?oe.c.length>re&&(oe.c.length=re):te&&(oe=oe.mod(O))}if(X){if((X=c(X/2))===0)break;se=X%2}else if(he(D=D.times(G),D.e+1,1),14<D.e)se=S(D);else{if((X=+ce(D))==0)break;se=X%2}ae=ae.times(ae),re?ae.c&&ae.c.length>re&&(ae.c.length=re):te&&(ae=ae.mod(O))}return te?oe:(Q&&(oe=C.div(oe)),O?oe.mod(O):re?he(oe,ue,I,void 0):oe)},b.integerValue=function(D){var O=new Z(this);return D==null?D=I:x(D,0,8),he(O,O.e+1,D)},b.isEqualTo=b.eq=function(D,O){return R(this,new Z(D,O))===0},b.isFinite=function(){return!!this.c},b.isGreaterThan=b.gt=function(D,O){return 0<R(this,new Z(D,O))},b.isGreaterThanOrEqualTo=b.gte=function(D,O){return(O=R(this,new Z(D,O)))===1||O===0},b.isInteger=function(){return!!this.c&&y(this.e/f)>this.c.length-2},b.isLessThan=b.lt=function(D,O){return R(this,new Z(D,O))<0},b.isLessThanOrEqualTo=b.lte=function(D,O){return(O=R(this,new Z(D,O)))===-1||O===0},b.isNaN=function(){return!this.s},b.isNegative=function(){return this.s<0},b.isPositive=function(){return 0<this.s},b.isZero=function(){return!!this.c&&this.c[0]==0},b.minus=function(D,O){var G,te,X,re,J=this,Q=J.s;if(O=(D=new Z(D,O)).s,!Q||!O)return new Z(NaN);if(Q!=O)return D.s=-O,J.plus(D);var se=J.e/f,oe=D.e/f,ae=J.c,we=D.c;if(!se||!oe){if(!ae||!we)return ae?(D.s=-O,D):new Z(we?J:NaN);if(!ae[0]||!we[0])return we[0]?(D.s=-O,D):new Z(ae[0]?J:I==3?-0:0)}if(se=y(se),oe=y(oe),ae=ae.slice(),Q=se-oe){for((X=(re=Q<0)?(Q=-Q,ae):(oe=se,we)).reverse(),O=Q;O--;X.push(0));X.reverse()}else for(te=(re=(Q=ae.length)<(O=we.length))?Q:O,Q=O=0;O<te;O++)if(ae[O]!=we[O]){re=ae[O]<we[O];break}if(re&&(X=ae,ae=we,we=X,D.s=-D.s),0<(O=(te=we.length)-(G=ae.length)))for(;O--;ae[G++]=0);for(O=d-1;Q<te;){if(ae[--te]<we[te]){for(G=te;G&&!ae[--G];ae[G]=O);--ae[G],ae[te]+=d}ae[te]-=we[te]}for(;ae[0]==0;ae.splice(0,1),--oe);return ae[0]?de(D,ae,oe):(D.s=I==3?-1:1,D.c=[D.e=0],D)},b.modulo=b.mod=function(D,O){var G,te,X=this;return D=new Z(D,O),!X.c||!D.s||D.c&&!D.c[0]?new Z(NaN):!D.c||X.c&&!X.c[0]?new Z(X):(le==9?(te=D.s,D.s=1,G=L(X,D,0,3),D.s=te,G.s*=te):G=L(X,D,0,le),(D=X.minus(G.times(D))).c[0]||le!=1||(D.s=X.s),D)},b.multipliedBy=b.times=function(D,O){var G,te,X,re,J,Q,se,oe,ae,we,xe,Fe,Ke,ht,tt,qe=this,Tt=qe.c,Nn=(D=new Z(D,O)).c;if(!(Tt&&Nn&&Tt[0]&&Nn[0]))return!qe.s||!D.s||Tt&&!Tt[0]&&!Nn||Nn&&!Nn[0]&&!Tt?D.c=D.e=D.s=null:(D.s*=qe.s,Tt&&Nn?(D.c=[0],D.e=0):D.c=D.e=null),D;for(te=y(qe.e/f)+y(D.e/f),D.s*=qe.s,(se=Tt.length)<(we=Nn.length)&&(Ke=Tt,Tt=Nn,Nn=Ke,X=se,se=we,we=X),X=se+we,Ke=[];X--;Ke.push(0));for(ht=d,tt=m,X=we;0<=--X;){for(G=0,xe=Nn[X]%tt,Fe=Nn[X]/tt|0,re=X+(J=se);X<re;)G=((oe=xe*(oe=Tt[--J]%tt)+(Q=Fe*oe+(ae=Tt[J]/tt|0)*xe)%tt*tt+Ke[re]+G)/ht|0)+(Q/tt|0)+Fe*ae,Ke[re--]=oe%ht;Ke[re]=G}return G?++te:Ke.splice(0,1),de(D,Ke,te)},b.negated=function(){var D=new Z(this);return D.s=-D.s||null,D},b.plus=function(D,O){var G,te=this,X=te.s;if(O=(D=new Z(D,O)).s,!X||!O)return new Z(NaN);if(X!=O)return D.s=-O,te.minus(D);var re=te.e/f,J=D.e/f,Q=te.c,se=D.c;if(!re||!J){if(!Q||!se)return new Z(X/0);if(!Q[0]||!se[0])return se[0]?D:new Z(Q[0]?te:0*X)}if(re=y(re),J=y(J),Q=Q.slice(),X=re-J){for((G=0<X?(J=re,se):(X=-X,Q)).reverse();X--;G.push(0));G.reverse()}for((X=Q.length)-(O=se.length)<0&&(G=se,se=Q,Q=G,O=X),X=0;O;)X=(Q[--O]=Q[O]+se[O]+X)/d|0,Q[O]=d===Q[O]?0:Q[O]%d;return X&&(Q=[X].concat(Q),++J),de(D,Q,J)},b.precision=b.sd=function(D,O){var G,te,X;if(D!=null&&D!==!!D)return x(D,1,v),O==null?O=I:x(O,0,8),he(new Z(this),D,O);if(!(G=this.c))return null;if(te=(X=G.length-1)*f+1,X=G[X]){for(;X%10==0;X/=10,te--);for(X=G[0];10<=X;X/=10,te++);}return D&&this.e+1>te&&(te=this.e+1),te},b.shiftedBy=function(D){return x(D,-g,g),this.times("1e"+D)},b.squareRoot=b.sqrt=function(){var D,O,G,te,X,re=this,J=re.c,Q=re.s,se=re.e,oe=_+4,ae=new Z("0.5");if(Q!==1||!J||!J[0])return new Z(!Q||Q<0&&(!J||J[0])?NaN:J?re:1/0);if((G=(Q=Math.sqrt(+ce(re)))==0||Q==1/0?(((O=w(J)).length+se)%2==0&&(O+="0"),Q=Math.sqrt(+O),se=y((se+1)/2)-(se<0||se%2),new Z(O=Q==1/0?"1e"+se:(O=Q.toExponential()).slice(0,O.indexOf("e")+1)+se)):new Z(Q+"")).c[0]){for((Q=(se=G.e)+oe)<3&&(Q=0);;)if(X=G,G=ae.times(X.plus(L(re,X,oe,1))),w(X.c).slice(0,Q)===(O=w(G.c)).slice(0,Q)){if(G.e<se&&--Q,(O=O.slice(Q-3,Q+1))!="9999"&&(te||O!="4999")){+O&&(+O.slice(1)||O.charAt(0)!="5")||(he(G,G.e+_+2,1),D=!G.times(G).eq(re));break}if(!te&&(he(X,X.e+_+2,0),X.times(X).eq(re))){G=X;break}oe+=4,Q+=4,te=1}}return he(G,G.e+_+1,I,D)},b.toExponential=function(D,O){return D!=null&&(x(D,0,v),D++),Y(this,D,O,1)},b.toFixed=function(D,O){return D!=null&&(x(D,0,v),D=D+this.e+1),Y(this,D,O)},b.toFormat=function(D,O,G){var te;if(G==null)D!=null&&O&&typeof O=="object"?(G=O,O=null):D&&typeof D=="object"?(G=D,D=O=null):G=be;else if(typeof G!="object")throw Error(u+"Argument not an object: "+G);if(te=this.toFixed(D,O),this.c){var X,re=te.split("."),J=+G.groupSize,Q=+G.secondaryGroupSize,se=G.groupSeparator||"",oe=re[0],ae=re[1],we=this.s<0,xe=we?oe.slice(1):oe,Fe=xe.length;if(Q&&(X=J,J=Q,Fe-=Q=X),0<J&&0<Fe){for(X=Fe%J||J,oe=xe.substr(0,X);X<Fe;X+=J)oe+=se+xe.substr(X,J);0<Q&&(oe+=se+xe.slice(X)),we&&(oe="-"+oe)}te=ae?oe+(G.decimalSeparator||"")+((Q=+G.fractionGroupSize)?ae.replace(new RegExp("\\d{"+Q+"}\\B","g"),"$&"+(G.fractionGroupSeparator||"")):ae):oe}return(G.prefix||"")+te+(G.suffix||"")},b.toFraction=function(D){var O,G,te,X,re,J,Q,se,oe,ae,we,xe,Fe=this,Ke=Fe.c;if(D!=null&&(!(Q=new Z(D)).isInteger()&&(Q.c||Q.s!==1)||Q.lt(C)))throw Error(u+"Argument "+(Q.isInteger()?"out of range: ":"not an integer: ")+ce(Q));if(!Ke)return new Z(Fe);for(O=new Z(C),oe=G=new Z(C),te=se=new Z(C),xe=w(Ke),re=O.e=xe.length-Fe.e-1,O.c[0]=p[(J=re%f)<0?f+J:J],D=!D||0<Q.comparedTo(O)?0<re?O:oe:Q,J=z,z=1/0,Q=new Z(xe),se.c[0]=0;ae=L(Q,O,0,1),(X=G.plus(ae.times(te))).comparedTo(D)!=1;)G=te,te=X,oe=se.plus(ae.times(X=oe)),se=X,O=Q.minus(ae.times(X=O)),Q=X;return X=L(D.minus(G),te,0,1),se=se.plus(X.times(oe)),G=G.plus(X.times(te)),se.s=oe.s=Fe.s,we=L(oe,te,re*=2,I).minus(Fe).abs().comparedTo(L(se,G,re,I).minus(Fe).abs())<1?[oe,te]:[se,G],z=J,we},b.toNumber=function(){return+ce(this)},b.toPrecision=function(D,O){return D!=null&&x(D,1,v),Y(this,D,O,2)},b.toString=function(D){var O,G=this,te=G.s,X=G.e;return X===null?te?(O="Infinity",te<0&&(O="-"+O)):O="NaN":(O=D==null?X<=$||M<=X?T(w(G.c),X):P(w(G.c),X,"0"):D===10?P(w((G=he(new Z(G),_+X+1,I)).c),G.e,"0"):(x(D,2,fe.length,"Base"),W(P(w(G.c),X,"0"),10,D,te,!0)),te<0&&G.c[0]&&(O="-"+O)),O},b.valueOf=b.toJSON=function(){return ce(this)},b._isBigNumber=!0,typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(b[Symbol.toStringTag]="BigNumber",b[Symbol.for("nodejs.util.inspect.custom")]=b.valueOf),A!=null&&Z.set(A),Z}()).default=o.BigNumber=o,i!==void 0&&i.exports?i.exports=o:(s||(s=typeof self<"u"&&self?self:window),s.BigNumber=o)})(this)},{}],2:[function(t,i,r){i.exports={languageTag:"en-US",delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},spaceSeparated:!1,ordinal:function(s){var o=s%10;return~~(s%100/10)==1?"th":o===1?"st":o===2?"nd":o===3?"rd":"th"},currency:{symbol:"$",position:"prefix",code:"USD"},currencyFormat:{thousandSeparated:!0,totalLength:4,spaceSeparated:!0},formats:{fourDigits:{totalLength:4,spaceSeparated:!0},fullWithTwoDecimals:{output:"currency",thousandSeparated:!0,mantissa:2},fullWithTwoDecimalsNoCurrency:{thousandSeparated:!0,mantissa:2},fullWithNoDecimals:{output:"currency",thousandSeparated:!0,mantissa:0}}}},{}],3:[function(t,i,r){function s(y,w){return function(R){if(Array.isArray(R))return R}(y)||function(R,x){var S=[],T=!0,P=!1,E=void 0;try{for(var A,L=R[Symbol.iterator]();!(T=(A=L.next()).done)&&(S.push(A.value),!x||S.length!==x);T=!0);}catch(W){P=!0,E=W}finally{try{T||L.return==null||L.return()}finally{if(P)throw E}}return S}(y,w)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var o=t("./globalState"),a=t("./validating"),l=t("./parsing"),c=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],u={general:{scale:1024,suffixes:c,marker:"bd"},binary:{scale:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],marker:"b"},decimal:{scale:1e3,suffixes:c,marker:"d"}},h={totalLength:0,characteristic:0,forceAverage:!1,average:!1,mantissa:-1,optionalMantissa:!0,thousandSeparated:!1,spaceSeparated:!1,negative:"sign",forceSign:!1};function d(y){var w=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},R=2<arguments.length?arguments[2]:void 0;if(typeof w=="string"&&(w=l.parseFormat(w)),!a.validateFormat(w))return"ERROR: invalid format";var x=w.prefix||"",S=w.postfix||"",T=function(P,E,A){switch(E.output){case"currency":return E=v(E,o.currentCurrencyDefaultFormat()),function(fe,Z,Y){var ne=Y.currentCurrency(),de=Object.assign({},h,Z),he=void 0,ce="",D=!!de.totalLength||!!de.forceAverage||de.average,O=Z.currencyPosition||ne.position,G=Z.currencySymbol||ne.symbol;de.spaceSeparated&&(ce=" "),O==="infix"&&(he=ce+G+ce);var te=m({instance:fe,providedFormat:Z,state:Y,decimalSeparator:he});return O==="prefix"&&(te=fe._value<0&&de.negative==="sign"?"-".concat(ce).concat(G).concat(te.slice(1)):G+ce+te),O&&O!=="postfix"||(te=te+(ce=D?"":ce)+G),te}(P,E,o);case"percent":return E=v(E,o.currentPercentageDefaultFormat()),function(fe,Z,Y,ne){var de=Z.prefixSymbol,he=m({instance:ne(100*fe._value),providedFormat:Z,state:Y}),ce=Object.assign({},h,Z);return de?"%".concat(ce.spaceSeparated?" ":"").concat(he):"".concat(he).concat(ce.spaceSeparated?" ":"","%")}(P,E,o,A);case"byte":return E=v(E,o.currentByteDefaultFormat()),C=P,I=o,$=A,M=(_=E).base||"binary",B=u[M],z=f(C._value,B.suffixes,B.scale),U=z.value,le=z.suffix,ue=m({instance:$(U),providedFormat:_,state:I,defaults:I.currentByteDefaultFormat()}),be=I.currentAbbreviations(),"".concat(ue).concat(be.spaced?" ":"").concat(le);case"time":return E=v(E,o.currentTimeDefaultFormat()),k=P,K=Math.floor(k._value/60/60),ie=Math.floor((k._value-60*K*60)/60),b=Math.round(k._value-60*K*60-60*ie),"".concat(K,":").concat(ie<10?"0":"").concat(ie,":").concat(b<10?"0":"").concat(b);case"ordinal":return E=v(E,o.currentOrdinalDefaultFormat()),L=P,W=E,V=(F=o).currentOrdinal(),H=Object.assign({},h,W),N=m({instance:L,providedFormat:W,state:F}),j=V(L._value),"".concat(N).concat(H.spaceSeparated?" ":"").concat(j);case"number":default:return m({instance:P,providedFormat:E,numbro:A})}var L,W,F,V,H,N,j,k,K,ie,b,C,_,I,$,M,B,z,U,le,ue,be}(y,w,R);return T=(T=x+T)+S}function f(y,w,R){var x=w[0],S=Math.abs(y);if(R<=S){for(var T=1;T<w.length;++T){var P=Math.pow(R,T),E=Math.pow(R,T+1);if(P<=S&&S<E){x=w[T],y/=P;break}}x===w[0]&&(y/=Math.pow(R,w.length-1),x=w[w.length-1])}return{value:y,suffix:x}}function g(y){for(var w="",R=0;R<y;R++)w+="0";return w}function p(y,w){return y.toString().indexOf("e")!==-1?function(R,x){var S=R.toString(),T=s(S.split("e"),2),P=T[0],E=T[1],A=s(P.split("."),2),L=A[0],W=A[1],F=W===void 0?"":W;if(0<+E)S=L+F+g(E-F.length);else{var V=".";V=+L<0?"-0".concat(V):"0".concat(V);var H=(g(-E-1)+Math.abs(L)+F).substr(0,x);H.length<x&&(H+=g(x-H.length)),S=V+H}return 0<+E&&0<x&&(S+=".".concat(g(x))),S}(y,w):(Math.round(+"".concat(y,"e+").concat(w))/Math.pow(10,w)).toFixed(w)}function m(y){var w=y.instance,R=y.providedFormat,x=y.state,S=x===void 0?o:x,T=y.decimalSeparator,P=y.defaults,E=P===void 0?S.currentDefaults():P,A=w._value;if(A===0&&S.hasZeroFormat())return S.getZeroFormat();if(!isFinite(A))return A.toString();var L,W,F,V,H,N,j,k,K=Object.assign({},h,E,R),ie=K.totalLength,b=ie?0:K.characteristic,C=K.optionalCharacteristic,_=K.forceAverage,I=!!ie||!!_||K.average,$=ie?-1:I&&R.mantissa===void 0?0:K.mantissa,M=!ie&&(R.optionalMantissa===void 0?$===-1:K.optionalMantissa),B=K.trimMantissa,z=K.thousandSeparated,U=K.spaceSeparated,le=K.negative,ue=K.forceSign,be=K.exponential,fe="";if(I){var Z=function(D){var O=D.value,G=D.forceAverage,te=D.abbreviations,X=D.spaceSeparated,re=X!==void 0&&X,J=D.totalLength,Q=J===void 0?0:J,se="",oe=Math.abs(O),ae=-1;if(oe>=Math.pow(10,12)&&!G||G==="trillion"?(se=te.trillion,O/=Math.pow(10,12)):oe<Math.pow(10,12)&&oe>=Math.pow(10,9)&&!G||G==="billion"?(se=te.billion,O/=Math.pow(10,9)):oe<Math.pow(10,9)&&oe>=Math.pow(10,6)&&!G||G==="million"?(se=te.million,O/=Math.pow(10,6)):(oe<Math.pow(10,6)&&oe>=Math.pow(10,3)&&!G||G==="thousand")&&(se=te.thousand,O/=Math.pow(10,3)),se&&(se=(re?" ":"")+se),Q){var we=O.toString().split(".")[0];ae=Math.max(Q-we.length,0)}return{value:O,abbreviation:se,mantissaPrecision:ae}}({value:A,forceAverage:_,abbreviations:S.currentAbbreviations(),spaceSeparated:U,totalLength:ie});A=Z.value,fe+=Z.abbreviation,ie&&($=Z.mantissaPrecision)}if(be){var Y=(W=(L={value:A,characteristicPrecision:b}).value,F=L.characteristicPrecision,V=F===void 0?0:F,H=s(W.toExponential().split("e"),2),N=H[0],j=H[1],k=+N,V&&1<V&&(k*=Math.pow(10,V-1),j=0<=(j=+j-(V-1))?"+".concat(j):j),{value:k,abbreviation:"e".concat(j)});A=Y.value,fe=Y.abbreviation+fe}var ne,de,he,ce=function(D,O,G,te,X){if(te===-1)return D;var re=p(O,te),J=s(re.toString().split("."),2),Q=J[0],se=J[1],oe=se===void 0?"":se;if(oe.match(/^0+$/)&&(G||X))return Q;var ae=oe.match(/0+$/);return X&&ae?"".concat(Q,".").concat(oe.toString().slice(0,ae.index)):re.toString()}(A.toString(),A,M,$,B);return ce=function(D,O,G,te,X){var re=te.currentDelimiters(),J=re.thousands;X=X||re.decimal;var Q=re.thousandsSize||3,se=D.toString(),oe=se.split(".")[0],ae=se.split(".")[1];return G&&(O<0&&(oe=oe.slice(1)),function(we,xe){for(var Fe=[],Ke=0,ht=we;0<ht;ht--)Ke===xe&&(Fe.unshift(ht),Ke=0),Ke++;return Fe}(oe.length,Q).forEach(function(we,xe){oe=oe.slice(0,we+xe)+J+oe.slice(we+xe)}),O<0&&(oe="-".concat(oe))),se=ae?oe+X+ae:oe}(ce=function(D,O,G,te){var X=D,re=s(X.toString().split("."),2),J=re[0],Q=re[1];if(J.match(/^-?0$/)&&G)return Q?"".concat(J.replace("0",""),".").concat(Q):J.replace("0","");if(J.length<te)for(var se=te-J.length,oe=0;oe<se;oe++)X="0".concat(X);return X.toString()}(ce,0,C,b),A,z,S,T),(I||be)&&(ce=ce+fe),(ue||A<0)&&(ne=ce,he=le,ce=(de=A)===0?ne:+ne==0?ne.replace("-",""):0<de?"+".concat(ne):he==="sign"?ne:"(".concat(ne.replace("-",""),")")),ce}function v(y,w){if(!y)return w;var R=Object.keys(y);return R.length===1&&R[0]==="output"?w:y}i.exports=function(y){return{format:function(){for(var w=arguments.length,R=new Array(w),x=0;x<w;x++)R[x]=arguments[x];return d.apply(void 0,R.concat([y]))},getByteUnit:function(){for(var w=arguments.length,R=new Array(w),x=0;x<w;x++)R[x]=arguments[x];return(function(S){var T=u.general;return f(S._value,T.suffixes,T.scale).suffix}).apply(void 0,R.concat([y]))},getBinaryByteUnit:function(){for(var w=arguments.length,R=new Array(w),x=0;x<w;x++)R[x]=arguments[x];return(function(S){var T=u.binary;return f(S._value,T.suffixes,T.scale).suffix}).apply(void 0,R.concat([y]))},getDecimalByteUnit:function(){for(var w=arguments.length,R=new Array(w),x=0;x<w;x++)R[x]=arguments[x];return(function(S){var T=u.decimal;return f(S._value,T.suffixes,T.scale).suffix}).apply(void 0,R.concat([y]))},formatOrDefault:v}}},{"./globalState":4,"./parsing":8,"./validating":10}],4:[function(t,i,r){var s=t("./en-US"),o=t("./validating"),a=t("./parsing"),l={},c=void 0,u={},h=null,d={};function f(p){c=p}function g(){return u[c]}l.languages=function(){return Object.assign({},u)},l.currentLanguage=function(){return c},l.currentCurrency=function(){return g().currency},l.currentAbbreviations=function(){return g().abbreviations},l.currentDelimiters=function(){return g().delimiters},l.currentOrdinal=function(){return g().ordinal},l.currentDefaults=function(){return Object.assign({},g().defaults,d)},l.currentOrdinalDefaultFormat=function(){return Object.assign({},l.currentDefaults(),g().ordinalFormat)},l.currentByteDefaultFormat=function(){return Object.assign({},l.currentDefaults(),g().byteFormat)},l.currentPercentageDefaultFormat=function(){return Object.assign({},l.currentDefaults(),g().percentageFormat)},l.currentCurrencyDefaultFormat=function(){return Object.assign({},l.currentDefaults(),g().currencyFormat)},l.currentTimeDefaultFormat=function(){return Object.assign({},l.currentDefaults(),g().timeFormat)},l.setDefaults=function(p){p=a.parseFormat(p),o.validateFormat(p)&&(d=p)},l.getZeroFormat=function(){return h},l.setZeroFormat=function(p){return h=typeof p=="string"?p:null},l.hasZeroFormat=function(){return h!==null},l.languageData=function(p){if(p){if(u[p])return u[p];throw new Error('Unknown tag "'.concat(p,'"'))}return g()},l.registerLanguage=function(p){var m=1<arguments.length&&arguments[1]!==void 0&&arguments[1];if(!o.validateLanguage(p))throw new Error("Invalid language data");u[p.languageTag]=p,m&&f(p.languageTag)},l.setLanguage=function(p){var m=1<arguments.length&&arguments[1]!==void 0?arguments[1]:s.languageTag;if(!u[p]){var v=p.split("-")[0],y=Object.keys(u).find(function(w){return w.split("-")[0]===v});return u[y]?void f(y):void f(m)}f(p)},l.registerLanguage(s),c=s.languageTag,i.exports=l},{"./en-US":2,"./parsing":8,"./validating":10}],5:[function(t,i,r){i.exports=function(s){return{loadLanguagesInNode:function(o){return a=s,void o.forEach(function(l){var c=void 0;try{c=t("../languages/".concat(l))}catch{console.error('Unable to load "'.concat(l,'". No matching language file found.'))}c&&a.registerLanguage(c)});var a}}}},{}],6:[function(t,i,r){var s=t("bignumber.js");function o(a,l,c){var u=new s(a._value),h=l;return c.isNumbro(l)&&(h=l._value),h=new s(h),a._value=u.minus(h).toNumber(),a}i.exports=function(a){return{add:function(l,c){return h=c,d=a,f=new s((u=l)._value),g=h,d.isNumbro(h)&&(g=h._value),g=new s(g),u._value=f.plus(g).toNumber(),u;var u,h,d,f,g},subtract:function(l,c){return o(l,c,a)},multiply:function(l,c){return h=c,d=a,f=new s((u=l)._value),g=h,d.isNumbro(h)&&(g=h._value),g=new s(g),u._value=f.times(g).toNumber(),u;var u,h,d,f,g},divide:function(l,c){return h=c,d=a,f=new s((u=l)._value),g=h,d.isNumbro(h)&&(g=h._value),g=new s(g),u._value=f.dividedBy(g).toNumber(),u;var u,h,d,f,g},set:function(l,c){return u=l,d=h=c,a.isNumbro(h)&&(d=h._value),u._value=d,u;var u,h,d},difference:function(l,c){return u=c,o(d=(h=a)(l._value),u,h),Math.abs(d._value);var u,h,d}}}},{"bignumber.js":1}],7:[function(t,i,r){function s(m,v){for(var y=0;y<v.length;y++){var w=v[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(m,w.key,w)}}var o=t("./globalState"),a=t("./validating"),l=t("./loading")(p),c=t("./unformatting"),u=t("./formatting")(p),h=t("./manipulating")(p),d=t("./parsing"),f=function(){function m(w){(function(R,x){if(!(R instanceof x))throw new TypeError("Cannot call a class as a function")})(this,m),this._value=w}var v,y;return v=m,(y=[{key:"clone",value:function(){return p(this._value)}},{key:"format",value:function(){var w=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};return u.format(this,w)}},{key:"formatCurrency",value:function(w){return typeof w=="string"&&(w=d.parseFormat(w)),(w=u.formatOrDefault(w,o.currentCurrencyDefaultFormat())).output="currency",u.format(this,w)}},{key:"formatTime",value:function(){var w=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};return w.output="time",u.format(this,w)}},{key:"binaryByteUnits",value:function(){return u.getBinaryByteUnit(this)}},{key:"decimalByteUnits",value:function(){return u.getDecimalByteUnit(this)}},{key:"byteUnits",value:function(){return u.getByteUnit(this)}},{key:"difference",value:function(w){return h.difference(this,w)}},{key:"add",value:function(w){return h.add(this,w)}},{key:"subtract",value:function(w){return h.subtract(this,w)}},{key:"multiply",value:function(w){return h.multiply(this,w)}},{key:"divide",value:function(w){return h.divide(this,w)}},{key:"set",value:function(w){return h.set(this,g(w))}},{key:"value",value:function(){return this._value}},{key:"valueOf",value:function(){return this._value}}])&&s(v.prototype,y),m}();function g(m){var v=m;return p.isNumbro(m)?v=m._value:typeof m=="string"?v=p.unformat(m):isNaN(m)&&(v=NaN),v}function p(m){return new f(g(m))}p.version="2.1.2",p.isNumbro=function(m){return m instanceof f},p.language=o.currentLanguage,p.registerLanguage=o.registerLanguage,p.setLanguage=o.setLanguage,p.languages=o.languages,p.languageData=o.languageData,p.zeroFormat=o.setZeroFormat,p.defaultFormat=o.currentDefaults,p.setDefaults=o.setDefaults,p.defaultCurrencyFormat=o.currentCurrencyDefaultFormat,p.validate=a.validate,p.loadLanguagesInNode=l.loadLanguagesInNode,p.unformat=c.unformat,i.exports=p},{"./formatting":3,"./globalState":4,"./loading":5,"./manipulating":6,"./parsing":8,"./unformatting":9,"./validating":10}],8:[function(t,i,r){i.exports={parseFormat:function(s){var o,a,l,c,u,h,d,f,g,p,m,v,y,w,R,x,S,T,P,E,A=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};return typeof s!="string"?s:(a=A,s=(l=(o=s).match(/^{([^}]*)}/))?(a.prefix=l[1],o.slice(l[0].length)):o,u=A,function(L,W){if(L.indexOf("$")===-1){if(L.indexOf("%")===-1)return L.indexOf("bd")!==-1?(W.output="byte",W.base="general"):L.indexOf("b")!==-1?(W.output="byte",W.base="binary"):L.indexOf("d")!==-1?(W.output="byte",W.base="decimal"):L.indexOf(":")===-1?L.indexOf("o")!==-1&&(W.output="ordinal"):W.output="time";W.output="percent"}else W.output="currency"}(s=(h=(c=s).match(/{([^}]*)}$/))?(u.postfix=h[1],c.slice(0,-h[0].length)):c,A),d=A,(f=s.match(/[1-9]+[0-9]*/))&&(d.totalLength=+f[0]),g=A,(p=s.split(".")[0].match(/0+/))&&(g.characteristic=p[0].length),function(L,W){if(L.indexOf(".")!==-1){var F=L.split(".")[0];W.optionalCharacteristic=F.indexOf("0")===-1}}(s,A),m=A,s.indexOf("a")!==-1&&(m.average=!0),y=A,(v=s).indexOf("K")!==-1?y.forceAverage="thousand":v.indexOf("M")!==-1?y.forceAverage="million":v.indexOf("B")!==-1?y.forceAverage="billion":v.indexOf("T")!==-1&&(y.forceAverage="trillion"),function(L,W){var F=L.split(".")[1];if(F){var V=F.match(/0+/);V&&(W.mantissa=V[0].length)}}(s,A),R=A,(w=s).match(/\[\.]/)?R.optionalMantissa=!0:w.match(/\./)&&(R.optionalMantissa=!1),x=A,s.indexOf(",")!==-1&&(x.thousandSeparated=!0),S=A,s.indexOf(" ")!==-1&&(S.spaceSeparated=!0),P=A,(T=s).match(/^\+?\([^)]*\)$/)&&(P.negative="parenthesis"),T.match(/^\+?-/)&&(P.negative="sign"),E=A,s.match(/^\+/)&&(E.forceSign=!0),A)}}},{}],9:[function(t,i,r){var s=[{key:"ZiB",factor:Math.pow(1024,7)},{key:"ZB",factor:Math.pow(1e3,7)},{key:"YiB",factor:Math.pow(1024,8)},{key:"YB",factor:Math.pow(1e3,8)},{key:"TiB",factor:Math.pow(1024,4)},{key:"TB",factor:Math.pow(1e3,4)},{key:"PiB",factor:Math.pow(1024,5)},{key:"PB",factor:Math.pow(1e3,5)},{key:"MiB",factor:Math.pow(1024,2)},{key:"MB",factor:Math.pow(1e3,2)},{key:"KiB",factor:Math.pow(1024,1)},{key:"KB",factor:Math.pow(1e3,1)},{key:"GiB",factor:Math.pow(1024,3)},{key:"GB",factor:Math.pow(1e3,3)},{key:"EiB",factor:Math.pow(1024,6)},{key:"EB",factor:Math.pow(1e3,6)},{key:"B",factor:1}];function o(l){return l.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}function a(l,c){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:"",h=3<arguments.length?arguments[3]:void 0,d=4<arguments.length?arguments[4]:void 0,f=5<arguments.length?arguments[5]:void 0,g=6<arguments.length?arguments[6]:void 0;if(l!=="")return l===d?0:function p(m,v){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:"",w=3<arguments.length?arguments[3]:void 0,R=4<arguments.length?arguments[4]:void 0,x=5<arguments.length?arguments[5]:void 0,S=6<arguments.length?arguments[6]:void 0;if(!isNaN(+m))return+m;var T="",P=m.replace(/(^[^(]*)\((.*)\)([^)]*$)/,"$1$2$3");if(P!==m)return-1*p(P,v,y,w,R,x,S);for(var E=0;E<s.length;E++){var A=s[E];if((T=m.replace(A.key,""))!==m)return p(T,v,y,w,R,x,S)*A.factor}if((T=m.replace("%",""))!==m)return p(T,v,y,w,R,x,S)/100;var L=parseFloat(m);if(!isNaN(L)){var W=w(L);if(W&&W!=="."&&(T=m.replace(new RegExp("".concat(o(W),"$")),""))!==m)return p(T,v,y,w,R,x,S);var F={};Object.keys(x).forEach(function(ie){F[x[ie]]=ie});for(var V=Object.keys(F).sort().reverse(),H=V.length,N=0;N<H;N++){var j=V[N],k=F[j];if((T=m.replace(j,""))!==m){var K=void 0;switch(k){case"thousand":K=Math.pow(10,3);break;case"million":K=Math.pow(10,6);break;case"billion":K=Math.pow(10,9);break;case"trillion":K=Math.pow(10,12)}return p(T,v,y,w,R,x,S)*K}}}}(function(p,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:"",y=p.replace(v,"");return y=(y=y.replace(new RegExp("([0-9])".concat(o(m.thousands),"([0-9])"),"g"),"$1$2")).replace(m.decimal,".")}(l,c,u),c,u,h,d,f,g)}i.exports={unformat:function(l,c){var u,h,d,f=t("./globalState"),g=f.currentDelimiters(),p=f.currentCurrency().symbol,m=f.currentOrdinal(),v=f.getZeroFormat(),y=f.currentAbbreviations(),w=void 0;if(typeof l=="string")w=function(R,x){if(!R.indexOf(":")||x.thousands===":")return!1;var S=R.split(":");if(S.length!==3)return!1;var T=+S[0],P=+S[1],E=+S[2];return!isNaN(T)&&!isNaN(P)&&!isNaN(E)}(l,g)?(u=l.split(":"),h=+u[0],d=+u[1],+u[2]+60*d+3600*h):a(l,g,p,m,v,y,c);else{if(typeof l!="number")return;w=l}if(w!==void 0)return w}}},{"./globalState":4}],10:[function(t,i,r){function s(g){return function(p){if(Array.isArray(p)){for(var m=0,v=new Array(p.length);m<p.length;m++)v[m]=p[m];return v}}(g)||function(p){if(Symbol.iterator in Object(p)||Object.prototype.toString.call(p)==="[object Arguments]")return Array.from(p)}(g)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(g){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(g)}var a=t("./unformatting"),l=/^[a-z]{2,3}(-[a-zA-Z]{4})?(-([A-Z]{2}|[0-9]{3}))?$/,c={output:{type:"string",validValues:["currency","percent","byte","time","ordinal","number"]},base:{type:"string",validValues:["decimal","binary","general"],restriction:function(g,p){return p.output==="byte"},message:"`base` must be provided only when the output is `byte`",mandatory:function(g){return g.output==="byte"}},characteristic:{type:"number",restriction:function(g){return 0<=g},message:"value must be positive"},prefix:"string",postfix:"string",forceAverage:{type:"string",validValues:["trillion","billion","million","thousand"]},average:"boolean",currencyPosition:{type:"string",validValues:["prefix","infix","postfix"]},currencySymbol:"string",totalLength:{type:"number",restrictions:[{restriction:function(g){return 0<=g},message:"value must be positive"},{restriction:function(g,p){return!p.exponential},message:"`totalLength` is incompatible with `exponential`"}]},mantissa:{type:"number",restriction:function(g){return 0<=g},message:"value must be positive"},optionalMantissa:"boolean",trimMantissa:"boolean",optionalCharacteristic:"boolean",thousandSeparated:"boolean",spaceSeparated:"boolean",abbreviations:{type:"object",children:{thousand:"string",million:"string",billion:"string",trillion:"string"}},negative:{type:"string",validValues:["sign","parenthesis"]},forceSign:"boolean",exponential:{type:"boolean"},prefixSymbol:{type:"boolean",restriction:function(g,p){return p.output==="percent"},message:"`prefixSymbol` can be provided only when the output is `percent`"}},u={languageTag:{type:"string",mandatory:!0,restriction:function(g){return g.match(l)},message:"the language tag must follow the BCP 47 specification (see https://tools.ieft.org/html/bcp47)"},delimiters:{type:"object",children:{thousands:"string",decimal:"string",thousandsSize:"number"},mandatory:!0},abbreviations:{type:"object",children:{thousand:{type:"string",mandatory:!0},million:{type:"string",mandatory:!0},billion:{type:"string",mandatory:!0},trillion:{type:"string",mandatory:!0}},mandatory:!0},spaceSeparated:"boolean",ordinal:{type:"function",mandatory:!0},currency:{type:"object",children:{symbol:"string",position:"string",code:"string"},mandatory:!0},defaults:"format",ordinalFormat:"format",byteFormat:"format",percentageFormat:"format",currencyFormat:"format",timeDefaults:"format",formats:{type:"object",children:{fourDigits:{type:"format",mandatory:!0},fullWithTwoDecimals:{type:"format",mandatory:!0},fullWithTwoDecimalsNoCurrency:{type:"format",mandatory:!0},fullWithNoDecimals:{type:"format",mandatory:!0}}}};function h(g){return!!a.unformat(g)}function d(g,p,m){var v=3<arguments.length&&arguments[3]!==void 0&&arguments[3],y=Object.keys(g).map(function(w){if(!p[w])return console.error("".concat(m," Invalid key: ").concat(w)),!1;var R=g[w],x=p[w];if(typeof x=="string"&&(x={type:x}),x.type==="format"){if(!d(R,c,"[Validate ".concat(w,"]"),!0))return!1}else if(o(R)!==x.type)return console.error("".concat(m," ").concat(w,' type mismatched: "').concat(x.type,'" expected, "').concat(o(R),'" provided')),!1;if(x.restrictions&&x.restrictions.length)for(var S=x.restrictions.length,T=0;T<S;T++){var P=x.restrictions[T],E=P.restriction,A=P.message;if(!E(R,g))return console.error("".concat(m," ").concat(w," invalid value: ").concat(A)),!1}return x.restriction&&!x.restriction(R,g)?(console.error("".concat(m," ").concat(w," invalid value: ").concat(x.message)),!1):x.validValues&&x.validValues.indexOf(R)===-1?(console.error("".concat(m," ").concat(w," invalid value: must be among ").concat(JSON.stringify(x.validValues),', "').concat(R,'" provided')),!1):!(x.children&&!d(R,x.children,"[Validate ".concat(w,"]")))});return v||y.push.apply(y,s(Object.keys(p).map(function(w){var R=p[w];if(typeof R=="string"&&(R={type:R}),R.mandatory){var x=R.mandatory;if(typeof x=="function"&&(x=x(g)),x&&g[w]===void 0)return console.error("".concat(m,' Missing mandatory key "').concat(w,'"')),!1}return!0}))),y.reduce(function(w,R){return w&&R},!0)}function f(g){return d(g,c,"[Validate format]")}i.exports={validate:function(g,p){var m=h(g),v=f(p);return m&&v},validateFormat:f,validateInput:h,validateLanguage:function(g){return d(g,u,"[Validate language]")}}},{"./unformatting":9}]},{},[7])(7)})})(SK);var ike=SK.exports;const Lh=_f(ike),rke="numeric";function _K(n,e){if(or(n)){const t=e.numericFormat,i=t&&t.culture||"-",r=t&&t.pattern;if(typeof i<"u"&&!Lh.languages()[i]){const s=i.replace("-",""),o=Lh.allLanguages?Lh.allLanguages[i]:Lh[s];o&&Lh.registerLanguage(o)}Lh.setLanguage(i),n=Lh(n).format(r||"0")}return n}function lH(n,e,t,i,r,s,o){let a=s;if(or(a)){const l=o.className||"",c=l.length?l.split(" "):[];a=_K(a,o),c.indexOf("htLeft")<0&&c.indexOf("htCenter")<0&&c.indexOf("htRight")<0&&c.indexOf("htJustify")<0&&c.push("htRight"),c.indexOf("htNumeric")<0&&c.push("htNumeric"),o.className=c.join(" "),e.dir="ltr"}jc(n,e,t,i,r,a,o)}lH.RENDERER_TYPE=rke;const ske="password";function cH(n,e,t,i,r,s,o){jc.apply(this,[n,e,t,i,r,s,o]);const a=o.hashLength||e.innerHTML.length,l=o.hashSymbol||"*";let c="";$e(a-1,()=>{c+=l}),kf(e,c)}cH.RENDERER_TYPE=ske;const oke="select";function uH(n,e,t,i,r,s,o){jc.apply(this,[n,e,t,i,r,s,o])}uH.RENDERER_TYPE=oke;const ake="time";function hH(n,e,t,i,r,s,o){jc.apply(this,[n,e,t,i,r,s,o]),e.dir="ltr"}hH.RENDERER_TYPE=ake;function lke(){os(am),os(Ry),os(sH),os(rH),os(aH),os(iH),os(lH),os(cH),os(uH),os(jc),os(hH)}const cke="autocomplete";function vE(n,e){let t=n;if(t==null&&(t=""),this.allowEmpty&&t===""){e(!0);return}this.strict&&this.source?typeof this.source=="function"?this.source(t,EW(t,e)):EW(t,e)(this.source):e(!0)}vE.VALIDATOR_TYPE=cke;function EW(n,e){const t=n;return function(i){let r=!1;for(let s=0,o=i.length;s<o;s++)if(t===i[s]){r=!0;break}e(r)}}function RK(n){const e=new Date(n);return isNaN(new Date(`${n}T00:00`).getDate())?e:new Date(e.getTime()+e.getTimezoneOffset()*6e4)}const uke=Object.freeze(Object.defineProperty({__proto__:null,getNormalizedDate:RK},Symbol.toStringTag,{value:"Module"})),hke="date";function dH(n,e){const t=lY(pK,this.instance);let i=n,r=!0;i==null&&(i="");let s=pe(i,this.dateFormat||t.defaultDateFormat,!0).isValid(),o=pe(new Date(i)).isValid()||s;if(this.allowEmpty&&i===""&&(o=!0,s=!0),o||(r=!1),!o&&s&&(r=!0),o&&!s)if(this.correctFormat===!0){const a=dke(i,this.dateFormat);this.instance.setDataAtCell(this.visualRow,this.visualCol,a,"dateValidator"),r=!0}else r=!1;e(r)}dH.VALIDATOR_TYPE=hke;function dke(n,e){const t=pe(RK(n)),i=pe(n,e),r=n.search(/[A-z]/g)>-1;let s;return t.isValid()&&t.format("x")===i.format("x")||!i.isValid()||r?s=t:s=i,s.format(e)}const fke="dropdown";function fH(n,e){vE.apply(this,[n,e])}fH.VALIDATOR_TYPE=fke;const gke="numeric";function gH(n,e){let t=n;t==null&&(t=""),this.allowEmpty&&t===""?e(!0):e(t===""?!1:or(n))}gH.VALIDATOR_TYPE=gke;const pke=["YYYY-MM-DDTHH:mm:ss.SSSZ","X","x"],mke="time";function pH(n,e){const t=this.timeFormat||"h:mm:ss a";let i=!0,r=n;r===null&&(r=""),r=/^\d{3,}$/.test(r)?parseInt(r,10):r;const s=/^\d{1,2}$/.test(r);s&&(r+=":00");const o=pe(r,pke,!0).isValid()?pe(r):pe(r,t);let a=o.isValid(),l=pe(r,t,!0).isValid()&&!s;if(this.allowEmpty&&r===""&&(a=!0,l=!0),a||(i=!1),!a&&l&&(i=!0),a&&!l)if(this.correctFormat===!0){const c=o.format(t);this.instance.setDataAtCell(this.visualRow,this.visualCol,c,"timeValidator"),i=!0}else i=!1;e(i)}pH.VALIDATOR_TYPE=mke;function bke(){Sd(vE),Sd(fH),Sd(dH),Sd(gH),Sd(pH)}const vke="autocomplete",wke={CELL_TYPE:vke,editor:eH,renderer:am,validator:vE},yke="checkbox",Cke={CELL_TYPE:yke,editor:gK,renderer:sH},Ske="date";function EK(n,e,t,i,r,s,o){am.apply(this,[n,e,t,i,r,s,o])}EK.RENDERER_TYPE=Ske;const _ke="date",Rke={CELL_TYPE:_ke,editor:mK,renderer:EK,validator:dH},Eke="dropdown",xke={CELL_TYPE:Eke,editor:nH,renderer:rH,validator:fH},Tke="handsontable",Mke={CELL_TYPE:Tke,editor:JN,renderer:aH},Ake="numeric",Pke={CELL_TYPE:Ake,editor:bK,renderer:lH,validator:gH,dataType:"number"},Ike="password",Oke={CELL_TYPE:Ike,editor:vK,renderer:cH,copyable:!1},kke="select",Dke={CELL_TYPE:kke,editor:wK,renderer:uH},Lke="time",Nke={CELL_TYPE:Lke,editor:yK,renderer:hH,validator:pH};function Hke(){js(wke),js(Cke),js(Rke),js(xke),js(Mke),js(Pke),js(Oke),js(Dke),js(fK),js(Nke)}function $ke(n,e){xK(n,e),e.add(n)}function Fke(n,e,t){xK(n,e),e.set(n,t)}function xK(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ng(n,e,t){return(e=Bke(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Bke(n){var e=Vke(n,"string");return typeof e=="symbol"?e:e+""}function Vke(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function ig(n,e){return n.get(TK(n,e))}function TK(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const xW=new Map([["plugin",UEe],["cell-type",rK],["editor",aY],["renderer",pY],["validator",mY]]),Wke="base",iM=[];let ya=null;var Nh=new WeakMap,TW=new WeakSet;class Ht{static get PLUGIN_KEY(){return Wke}static get SETTING_KEYS(){return[this.PLUGIN_KEY]}constructor(e){$ke(this,TW),ng(this,"eventManager",new uo(this)),ng(this,"pluginName",null),ng(this,"pluginsInitializedCallbacks",[]),ng(this,"isPluginsReady",!1),ng(this,"enabled",!1),ng(this,"initialized",!1),Fke(this,Nh,{}),Rl(this,"hot",e,{writable:!1}),ya=null,this.hot.addHook("afterPluginsInitialized",()=>this.onAfterPluginsInitialized()),this.hot.addHook("afterUpdateSettings",t=>this.onUpdateSettings(t)),this.hot.addHook("beforeInit",()=>this.init())}init(){this.pluginName=this.hot.getPluginName(this);const e=this.constructor.PLUGIN_DEPS,t=Array.isArray(e)?e:[];if(t.length>0){const r=[];if(t.forEach(s=>{const[o,a]=s.split(":");if(!xW.has(o))throw new Error(`Unknown plugin dependency type "${o}" was found.`);xW.get(o)(a)||r.push(` - ${a} (${o})`)}),r.length>0){const s=[`The ${this.pluginName} plugin requires the following modules:
`,`${r.join(`
`)}
`].join("");iM.push(s)}}if(ya||(ya=cL()),ya.indexOf("UndoRedo")>=0&&ya.splice(ya.indexOf("UndoRedo"),1),ya.indexOf(this.pluginName)>=0&&ya.splice(ya.indexOf(this.pluginName),1),this.hot.addHookOnce("afterPluginsInitialized",()=>{this.isEnabled&&this.isEnabled()&&this.enablePlugin()}),ya.length===0){if(iM.length>0){const r=[`${iM.join(`
`)}
`,"You have to import and register them manually."].join("");throw new Error(r)}this.hot.runHooks("afterPluginsInitialized")}this.initialized=!0}enablePlugin(){this.enabled=!0}disablePlugin(){var e;(e=this.eventManager)===null||e===void 0||e.clear(),this.clearHooks(),this.enabled=!1}addHook(e,t,i){ig(Nh,this)[e]=ig(Nh,this)[e]||[];const r=ig(Nh,this)[e];this.hot.addHook(e,t,i),r.push(t),ig(Nh,this)[e]=r}removeHooks(e){q(ig(Nh,this)[e]||[],t=>{this.hot.removeHook(e,t)})}clearHooks(){const e=ig(Nh,this);ut(e,(t,i)=>this.removeHooks(i)),e.length=0}callOnPluginsReady(e){this.isPluginsReady?e():this.pluginsInitializedCallbacks.push(e)}onAfterPluginsInitialized(){q(this.pluginsInitializedCallbacks,e=>e()),this.pluginsInitializedCallbacks.length=0,this.isPluginsReady=!0}onUpdateSettings(e){const t=TK(TW,this,jke).call(this,e);this.isEnabled&&(this.enabled&&!this.isEnabled()&&this.disablePlugin(),!this.enabled&&this.isEnabled()&&this.enablePlugin(),this.enabled&&this.isEnabled()&&t&&this.updatePlugin(e))}updatePlugin(){}destroy(){var e;(e=this.eventManager)===null||e===void 0||e.destroy(),this.clearHooks(),ut(this,(t,i)=>{i!=="hot"&&(this[i]=null)}),delete this.t,delete this.hot}}function jke(n){if(!n)return!1;const e=this.constructor.SETTING_KEYS;if(typeof e=="boolean")return e;for(let t=0;t<e.length;t++)if(n[e[t]]!==void 0)return!0;return!1}function Hh(n,e,t){return(e=zke(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function zke(n){var e=Uke(n,"string");return typeof e=="symbol"?e:e+""}function Uke(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}let mH=class{constructor(e){Hh(this,"hot",null),Hh(this,"container",null),Hh(this,"injected",!1),Hh(this,"rows",[]),Hh(this,"columns",[]),Hh(this,"samples",null),Hh(this,"settings",{useHeaders:!0}),this.hot=e}addRow(e,t){if(this.columns.length)throw new Error("Doesn't support multi-dimensional table");this.rows.length||(this.container=this.createContainer(this.hot.rootElement.className));const i={row:e};this.rows.push(i),this.samples=t,this.table=this.createTable(this.hot.table.className),this.table.colGroup.appendChild(this.createColGroupsCol(e)),this.table.tr.appendChild(this.createRow(e)),this.container.container.appendChild(this.table.fragment),i.table=this.table.table}addColumnHeadersRow(e){const t=this.hot.getColHeader(0);if(t!=null){const i={row:-1};this.rows.push(i),this.container=this.createContainer(this.hot.rootElement.className),this.samples=e,this.table=this.createTable(this.hot.table.className),this.table.colGroup.appendChild(this.createColGroupsCol()),this.appendColumnHeadersRow(),this.container.container.appendChild(this.table.fragment),i.table=this.table.table}}addColumn(e,t){if(this.rows.length)throw new Error("Doesn't support multi-dimensional table");this.columns.length||(this.container=this.createContainer(this.hot.rootElement.className));const i={col:e};this.columns.push(i),this.samples=t,this.table=this.createTable(this.hot.table.className),this.getSetting("useHeaders")&&this.hot.getColHeader(e)!==null&&this.hot.view.appendColHeader(e,this.table.th),this.table.tBody.appendChild(this.createCol(e)),this.container.container.appendChild(this.table.fragment),i.table=this.table.table}getHeights(e){this.injected||this.injectTable(),q(this.rows,t=>{const{height:i}=t.table.getBoundingClientRect();e(t.row,Math.ceil(i)-1)})}getWidths(e){this.injected||this.injectTable(),q(this.columns,t=>{const{width:i}=t.table.getBoundingClientRect();e(t.col,Math.ceil(i))})}setSettings(e){this.settings=e}setSetting(e,t){this.settings||(this.settings={}),this.settings[e]=t}getSettings(){return this.settings}getSetting(e){return this.settings?this.settings[e]:null}createColGroupsCol(e){const t=this.hot.rootDocument.createDocumentFragment();return this.hot.hasRowHeaders()&&t.appendChild(this.createColElement(-1,-1)),this.samples.forEach(i=>{q(i.strings,r=>{t.appendChild(this.createColElement(r.col,e))})}),t}createRow(e){const{rootDocument:t}=this.hot,i=t.createDocumentFragment(),r=t.createElement("th");return this.hot.hasRowHeaders()&&(this.hot.view.appendRowHeader(e,r),i.appendChild(r)),this.samples.forEach(s=>{q(s.strings,o=>{const a=o.col,l=this.hot.getCellMeta(e,a),c=this.hot.getCellRenderer(l),u=t.createElement("td");u.setAttribute("ghost-table",1),c(this.hot,u,e,a,this.hot.colToProp(a),o.value,l),i.appendChild(u)})}),i}appendColumnHeadersRow(){const{rootDocument:e}=this.hot,t=e.createDocumentFragment(),i=[];if(this.hot.hasRowHeaders()){const r=e.createElement("th");i.push([-1,r]),t.appendChild(r)}this.samples.forEach(r=>{q(r.strings,s=>{const o=s.col,a=e.createElement("th");i.push([o,a]),t.appendChild(a)})}),this.table.tHead.appendChild(t),q(i,r=>{const[s,o]=r;this.hot.view.appendColHeader(s,o)})}createCol(e){const{rootDocument:t}=this.hot,i=t.createDocumentFragment();return this.samples.forEach(r=>{q(r.strings,s=>{const o=s.row,a=this.hot.getCellMeta(o,e),l=this.hot.getCellRenderer(a),c=t.createElement("td"),u=t.createElement("tr");c.setAttribute("ghost-table",1),l(this.hot,c,o,e,this.hot.colToProp(e),s.value,a),u.appendChild(c),i.appendChild(u)})}),i}clean(){this.rows.length=0,this.rows[-1]=void 0,this.columns.length=0,this.samples&&this.samples.clear(),this.samples=null,this.removeTable()}injectTable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;this.injected||((e||this.hot.rootElement).appendChild(this.container.fragment),this.injected=!0)}removeTable(){this.injected&&this.container.container.parentNode&&(this.container.container.parentNode.removeChild(this.container.container),this.container=null,this.injected=!1)}createColElement(e,t){const i=this.hot.rootDocument.createElement("col");let r=0;t>=0&&e>=0&&(r=this.hot.getCellMeta(t,e).colspan);let s=this.hot.getColWidth(e);if(r>1)for(let o=e+1;o<e+r;o++)s+=this.hot.getColWidth(o);return i.style.width=`${s}px`,i}createTable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const{rootDocument:t}=this.hot,i=t.createDocumentFragment(),r=t.createElement("table"),s=t.createElement("thead"),o=t.createElement("tbody"),a=t.createElement("colgroup"),l=t.createElement("tr"),c=t.createElement("th");return this.isVertical()&&r.appendChild(a),this.isHorizontal()&&(l.appendChild(c),s.appendChild(l),r.style.tableLayout="auto",r.style.width="auto"),r.appendChild(s),this.isVertical()&&o.appendChild(l),r.appendChild(o),ge(r,e),i.appendChild(r),{fragment:i,table:r,tHead:s,tBody:o,colGroup:a,tr:l,th:c}}createContainer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const{rootDocument:t}=this.hot,i=t.createDocumentFragment(),r=t.createElement("div"),s=`htGhostTable htAutoSize ${e.trim()}`;return ge(r,s),i.appendChild(r),{fragment:i,container:r}}isVertical(){return!!(this.rows.length&&!this.columns.length)}isHorizontal(){return!!(this.columns.length&&!this.rows.length)}};function hC(n,e,t){return(e=Gke(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Gke(n){var e=Yke(n,"string");return typeof e=="symbol"?e:e+""}function Yke(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class wE{static get SAMPLE_COUNT(){return 3}constructor(e){hC(this,"samples",null),hC(this,"dataFactory",null),hC(this,"customSampleCount",null),hC(this,"allowDuplicates",!1),this.dataFactory=e}getSampleCount(){return this.customSampleCount?this.customSampleCount:wE.SAMPLE_COUNT}setSampleCount(e){this.customSampleCount=e}setAllowDuplicates(e){this.allowDuplicates=e}generateRowSamples(e,t){return this.generateSamples("row",t,e)}generateColumnSamples(e,t){return this.generateSamples("col",t,e)}generateSamples(e,t,i){const r=new Map,{from:s,to:o}=typeof i=="number"?{from:i,to:i}:i;return $e(s,o,a=>{const l=this.generateSample(e,t,a);r.set(a,l)}),r}generateSample(e,t,i){if(e!=="row"&&e!=="col")throw new Error("Unsupported sample type");const r=new Map,s=e==="row"?"col":"row",o=[];return $e(t.from,t.to,a=>{const l=e==="row"?this.dataFactory(i,a):this.dataFactory(a,i);if(l===!1)return;const{value:c,bundleSeed:u}=l,h=typeof u=="string"&&u.length>0;let d;h?d=u:ct(c)?d=`${Object.keys(c).length}`:Array.isArray(c)?d=`${c.length}`:d=`${jn(c).length}`,r.has(d)||r.set(d,{needed:this.getSampleCount(),strings:[]});const f=r.get(d);f.needed&&(!(o.indexOf(c)>-1)||this.allowDuplicates||h)&&(f.strings.push({value:c,[s]:a}),o.push(c),f.needed-=1)}),r}}function Kke(n,e){MK(n,e),e.add(n)}function MW(n,e,t){MK(n,e),e.set(n,t)}function MK(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function eb(n,e,t){return(e=qke(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function qke(n){var e=Xke(n,"string");return typeof e=="symbol"?e:e+""}function Xke(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Td(n,e){return n.get(Ha(n,e))}function bH(n,e,t){return n.set(Ha(n,e),t),t}function Ha(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}Oe.getSingleton().register("modifyAutoColumnSizeSeed");const tb="autoColumnSize",Zke=10,Qke="autoColumnSize";var Dg=new WeakMap,Dp=new WeakMap,Gl=new WeakSet;class kv extends Ht{static get PLUGIN_KEY(){return tb}static get PLUGIN_PRIORITY(){return Zke}static get SETTING_KEYS(){return!0}static get CALCULATION_STEP(){return 50}static get SYNC_CALCULATION_LIMIT(){return 50}constructor(e){super(e),Kke(this,Gl),eb(this,"ghostTable",new mH(this.hot)),eb(this,"samplesGenerator",new wE((t,i)=>{const r=this.hot.toPhysicalRow(t),s=this.hot.toPhysicalColumn(i);if(this.hot.rowIndexMapper.isHidden(r)||this.hot.columnIndexMapper.isHidden(s))return!1;const o=this.hot.getCellMeta(t,i);let a="";o.spanned||(a=this.hot.getDataAtCell(t,i));let l="";return this.hot.hasHook("modifyAutoColumnSizeSeed")&&(l=this.hot.runHooks("modifyAutoColumnSizeSeed",l,o,a)),{value:a,bundleSeed:l}})),eb(this,"inProgress",!1),eb(this,"measuredColumns",0),eb(this,"columnWidthsMap",new ch),MW(this,Dg,[]),MW(this,Dp,[]),this.hot.columnIndexMapper.registerMap(Qke,this.columnWidthsMap),this.addHook("beforeColumnResize",(t,i,r)=>Ha(Gl,this,AW).call(this,t,i,r))}isEnabled(){return this.hot.getSettings()[tb]!==!1&&!this.hot.getSettings().colWidths}enablePlugin(){var e=this;if(this.enabled)return;const t=this.hot.getSettings()[tb];t&&t.useHeaders!==null&&t.useHeaders!==void 0&&this.ghostTable.setSetting("useHeaders",t.useHeaders),this.setSamplingOptions(),this.addHook("afterLoadData",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Ha(Gl,e,tDe).call(e,...r)}),this.addHook("beforeChangeRender",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Ha(Gl,e,nDe).call(e,...r)}),this.addHook("afterFormulasValuesUpdate",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Ha(Gl,e,rDe).call(e,...r)}),this.addHook("beforeRender",()=>Ha(Gl,this,eDe).call(this)),this.addHook("modifyColWidth",(i,r)=>this.getColumnWidth(r,i)),this.addHook("init",()=>Ha(Gl,this,iDe).call(this)),super.enablePlugin()}updatePlugin(){bH(Dp,this,this.findColumnsWhereHeaderWasChanged()),super.updatePlugin()}disablePlugin(){super.disablePlugin(),this.addHook("beforeColumnResize",(e,t,i)=>Ha(Gl,this,AW).call(this,e,t,i))}calculateVisibleColumnsWidth(){if(!this.hot.countRows())return;const e=this.getFirstVisibleColumn(),t=this.getLastVisibleColumn();if(e===-1||t===-1)return;const i=this.hot.renderCall;this.calculateColumnsWidth({from:e,to:t},void 0,i)}calculateColumnsWidth(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{from:0,to:this.hot.countCols()-1},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{from:0,to:this.hot.countRows()-1},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const r=typeof e=="number"?{from:e,to:e}:e,s=typeof t=="number"?{from:t,to:t}:t;$e(r.from,r.to,o=>{let a=this.hot.toPhysicalColumn(o);a===null&&(a=o),(i||this.columnWidthsMap.getValueAtIndex(a)===null&&!this.hot._getColWidthFromSettings(a))&&this.samplesGenerator.generateColumnSamples(o,s).forEach((c,u)=>this.ghostTable.addColumn(u,c))}),this.ghostTable.columns.length&&(this.hot.batchExecution(()=>{this.ghostTable.getWidths((o,a)=>{const l=this.hot.toPhysicalColumn(o);this.columnWidthsMap.setValueAtIndex(l,a)})},!0),this.measuredColumns=r.to+1,this.ghostTable.clean())}calculateAllColumnsWidth(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{from:0,to:this.hot.countRows()-1},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=0;const r=this.hot.countCols()-1;let s=null;this.inProgress=!0;const o=()=>{if(!this.hot){_w(s),this.inProgress=!1;return}this.calculateColumnsWidth({from:i,to:Math.min(i+kv.CALCULATION_STEP,r)},e,t),i=i+kv.CALCULATION_STEP+1,i<r?s=rE(o):(_w(s),this.inProgress=!1,this.hot.view.adjustElementsSize())},a=this.getSyncCalculationLimit();a>=0&&(this.calculateColumnsWidth({from:0,to:a},e,t),i=a+1),i<r?o():this.inProgress=!1}setSamplingOptions(){const e=this.hot.getSettings()[tb],t=e&&kn(e,"samplingRatio")?e.samplingRatio:void 0,i=e&&kn(e,"allowSampleDuplicates")?e.allowSampleDuplicates:void 0;t&&!isNaN(t)&&this.samplesGenerator.setSampleCount(parseInt(t,10)),i&&this.samplesGenerator.setAllowDuplicates(i)}recalculateAllColumnsWidth(){this.hot.view.isVisible()&&this.calculateAllColumnsWidth({from:0,to:this.hot.countRows()-1},!0)}getSyncCalculationLimit(){const e=this.hot.getSettings()[tb];let t=kv.SYNC_CALCULATION_LIMIT;const i=this.hot.countCols()-1;return ct(e)&&(t=e.syncLimit,HD(t)?t=aL(i,t):t>>=0),Math.min(t,i)}getColumnWidth(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r=t;return r===void 0&&(r=this.columnWidthsMap.getValueAtIndex(this.hot.toPhysicalColumn(e)),i&&typeof r=="number"&&(r=Math.max(r,aE))),r}getFirstVisibleColumn(){var e;return(e=this.hot.view.getFirstRenderedVisibleColumn())!==null&&e!==void 0?e:-1}getLastVisibleColumn(){var e;return(e=this.hot.view.getLastRenderedVisibleColumn())!==null&&e!==void 0?e:-1}findColumnsWhereHeaderWasChanged(){return this.hot.getColHeader().reduce((i,r,s)=>{const o=Td(Dg,this).length;return(o-1<s||Td(Dg,this)[s]!==r)&&i.push(this.hot.toVisualColumn(s)),o-1<s?Td(Dg,this).push(r):Td(Dg,this)[s]=r,i},[])}clearCache(e){Array.isArray(e)?this.hot.batchExecution(()=>{e.forEach(t=>{this.columnWidthsMap.setValueAtIndex(t,null)})},!0):this.columnWidthsMap.clear()}isNeedRecalculate(){return!!this.columnWidthsMap.getValues().slice(0,this.measuredColumns).filter(e=>e===null).length}destroy(){this.ghostTable.clean(),super.destroy()}}function Jke(n){const e={from:0,to:this.hot.countRows()-1};n.forEach(t=>{const i=this.hot.toPhysicalColumn(t);i!==null&&(this.hot._getColWidthFromSettings(i)||this.samplesGenerator.generateColumnSamples(t,e).forEach((s,o)=>this.ghostTable.addColumn(o,s)))}),this.ghostTable.columns.length&&(this.hot.batchExecution(()=>{this.ghostTable.getWidths((t,i)=>{const r=this.hot.toPhysicalColumn(t);this.columnWidthsMap.setValueAtIndex(r,i)})},!0),this.ghostTable.clean())}function eDe(){this.calculateVisibleColumnsWidth(),this.inProgress||(Ha(Gl,this,Jke).call(this,Td(Dp,this)),bH(Dp,this,[]))}function tDe(n,e){e||this.recalculateAllColumnsWidth()}function nDe(n){const e=n.reduce((t,i)=>{let[,r]=i;const s=this.hot.propToCol(r);return Number.isInteger(s)&&t.indexOf(s)===-1&&t.push(s),t},[]);Td(Dp,this).push(...e)}function AW(n,e,t){let i=n;return t&&(this.calculateColumnsWidth(e,void 0,!0),i=this.getColumnWidth(e,void 0,!1)),i}function iDe(){bH(Dg,this,this.hot.getColHeader()),this.recalculateAllColumnsWidth()}function rDe(n){const e=n.reduce((t,i)=>{var r;const s=(r=i.address)===null||r===void 0?void 0:r.col;if(Number.isInteger(s)){const o=this.hot.toVisualColumn(s);t.indexOf(o)===-1&&t.push(o)}return t},[]);Td(Dp,this).push(...e)}const Md={horizontal:"horizontal",vertical:"vertical"};function sDe(n,e,t){let i,r,s;return e[0]===n[0]&&e[1]<n[1]?(s="left",i=t(e[0],e[1]),r=t(e[2],n[1]-1)):e[2]===n[2]&&e[0]===n[0]&&e[3]>n[3]?(s="right",i=t(e[0],n[3]+1),r=t(e[2],e[3])):e[0]<n[0]&&e[1]===n[1]?(s="up",i=t(e[0],e[1]),r=t(n[0]-1,e[3])):e[2]>n[2]&&e[1]===n[1]&&(s="down",i=t(n[2]+1,e[1]),r=t(e[2],e[3])),i&&i.normalize(),r&&r.normalize(),{directionOfDrag:s,startOfDragCoords:i,endOfDragCoords:r}}function oDe(n){const e={};return n===!0?(e.directions=Object.keys(Md),e.autoInsertRow=!0):ct(n)?(De(n.autoInsertRow)?n.direction===Md.horizontal?e.autoInsertRow=!1:e.autoInsertRow=n.autoInsertRow:e.autoInsertRow=!1,De(n.direction)?e.directions=[n.direction]:e.directions=Object.keys(Md)):typeof n=="string"?(e.directions=[n],e.autoInsertRow=!0):(e.directions=[],e.autoInsertRow=!1),e}function aDe(n,e){lDe(n,e),e.add(n)}function lDe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function rg(n,e,t){return(e=cDe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function cDe(n){var e=uDe(n,"string");return typeof e=="symbol"?e:e+""}function uDe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function nb(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}Oe.getSingleton().register("modifyAutofillRange");Oe.getSingleton().register("beforeAutofill");Oe.getSingleton().register("afterAutofill");const PW="autofill",hDe=20,dDe=["fillHandle"],fDe="insert_row_below",gDe=200;var sg=new WeakSet;class pDe extends Ht{constructor(){super(...arguments),aDe(this,sg),rg(this,"addingStarted",!1),rg(this,"mouseDownOnCellCorner",!1),rg(this,"mouseDragOutside",!1),rg(this,"handleDraggedCells",0),rg(this,"directions",[]),rg(this,"autoInsertRow",!1)}static get PLUGIN_KEY(){return PW}static get PLUGIN_PRIORITY(){return hDe}static get SETTING_KEYS(){return[PW,...dDe]}isEnabled(){return this.hot.getSettings().fillHandle}enablePlugin(){this.enabled||(this.mapSettings(),this.registerEvents(),this.addHook("afterOnCellCornerMouseDown",e=>nb(sg,this,bDe).call(this,e)),this.addHook("afterOnCellCornerDblClick",e=>nb(sg,this,mDe).call(this,e)),this.addHook("beforeOnCellMouseOver",(e,t)=>nb(sg,this,vDe).call(this,t)),super.enablePlugin())}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){this.clearMappedSettings(),super.disablePlugin()}getSelectionData(){const e=this.hot.getSelectedRangeLast(),{row:t,col:i}=e.getTopStartCorner(),{row:r,col:s}=e.getBottomEndCorner(),o=this.hot.runHooks("modifyCopyableRange",[{startRow:t,startCol:i,endRow:r,endCol:s}]),a=[],l=[],c=[];return q(o,u=>{for(let h=u.startRow;h<=u.endRow;h+=1)a.indexOf(h)===-1&&a.push(h);for(let h=u.startCol;h<=u.endCol;h+=1)l.indexOf(h)===-1&&l.push(h)}),q(a,u=>{const h=[];q(l,d=>{h.push(this.hot.getCopyableData(u,d))}),c.push(h)}),c}fillIn(){if(this.hot.selection.highlight.getFill().isEmpty())return!1;const[e,t,i,r]=this.hot.selection.highlight.getFill().getVisualCorners(),s=this.hot.getSelectedRangeLast(),o=s.getTopStartCorner(),a=s.getBottomEndCorner();this.resetSelectionOfDraggedArea();const l=[o.row,o.col,a.row,a.col],c=this.hot.runHooks("modifyAutofillRange",[Math.min(o.row,e),Math.min(o.col,t),Math.max(a.row,i),Math.max(a.col,r)],l),{directionOfDrag:u,startOfDragCoords:h,endOfDragCoords:d}=sDe(l,c,(f,g)=>this.hot._createCellCoords(f,g));if(h&&h.row>-1&&h.col>-1){const f=this.getSelectionData(),g=s.clone(),p=this.hot._createCellRange(h,h,d),m=this.hot.runHooks("beforeAutofill",f,g,p,u);if(m===!1)return this.hot.selection.highlight.getFill().clear(),this.hot.render(),!1;let v=m;const y=m;if(["up","left"].indexOf(u)>-1&&!(y.length===1&&y[0].length===0))if(v=[],u==="up"){const w=d.row-h.row+1,R=w%y.length;for(let x=0;x<w;x++)v.push(y[(x+(y.length-R))%y.length])}else{const w=d.col-h.col+1,R=w%y[0].length;for(let x=0;x<y.length;x++){v.push([]);for(let S=0;S<w;S++)v[x].push(y[x][(S+(y[x].length-R))%y[x].length])}}this.hot.populateFromArray(h.row,h.col,v,d.row,d.col,`${this.pluginName}.fill`,null),this.setSelection(c),this.hot.runHooks("afterAutofill",v,g,p,u),this.hot.render()}else this.hot.view.render();return!0}reduceSelectionAreaIfNeeded(e){return e.row<0&&(e.row=0),e.col<0&&(e.col=0),e}getCoordsOfDragAndDropBorders(e){const t=this.hot.getSelectedRangeLast(),i=t.getBottomEndCorner();let r=e;if(this.directions.includes(Md.vertical)&&this.directions.includes(Md.horizontal)){const s=t.getTopStartCorner();(i.col<=e.col||s.col>=e.col)&&(r=this.hot._createCellCoords(i.row,e.col)),(i.row<e.row||s.row>e.row)&&(r=this.hot._createCellCoords(e.row,i.col))}else if(this.directions.includes(Md.vertical))r=this.hot._createCellCoords(e.row,i.col);else if(this.directions.includes(Md.horizontal))r=this.hot._createCellCoords(i.row,e.col);else return;return this.reduceSelectionAreaIfNeeded(r)}showBorder(e){const t=this.getCoordsOfDragAndDropBorders(e);t&&this.redrawBorders(t)}addRow(){this.hot._registerTimeout(()=>{this.hot.alter(fDe,void 0,1,`${this.pluginName}.fill`),this.addingStarted=!1},gDe)}addNewRowIfNeeded(){if(!this.hot.selection.highlight.getFill().isEmpty()&&this.addingStarted===!1&&this.autoInsertRow){const e=this.hot.getSelectedLast(),t=this.hot.selection.highlight.getFill().getVisualCorners(),i=this.hot.countRows();e[2]<i-1&&t[2]===i-1&&(this.addingStarted=!0,this.addRow())}}getIndexOfLastAdjacentFilledInRow(e){const t=this.hot.getData(),i=this.hot.countRows();let r;for(let s=e[2]+1;s<i;s++){for(let l=e[1];l<=e[3];l++){const c=t[s][l];if(!zn(c))return-1}const o=t[s][e[1]-1],a=t[s][e[3]+1];(!zn(o)||!zn(a))&&(r=s)}return r}addSelectionFromStartAreaToSpecificRowIndex(e,t){this.hot.selection.highlight.getFill().clear().add(this.hot._createCellCoords(e[0],e[1])).add(this.hot._createCellCoords(t,e[3])).commit()}setSelection(e){this.hot.selectCell(...vt(e,t=>Math.max(t,0)),!1,!1)}selectAdjacent(){const e=this.hot.getSelectedLast(),t=this.getIndexOfLastAdjacentFilledInRow(e);return t===-1||t===void 0?!1:(this.addSelectionFromStartAreaToSpecificRowIndex(e,t),!0)}resetSelectionOfDraggedArea(){this.handleDraggedCells=0,this.hot.selection.highlight.getFill().clear()}redrawBorders(e){this.hot.selection.highlight.getFill().clear().add(this.hot.getSelectedRangeLast().from).add(this.hot.getSelectedRangeLast().to).add(e).commit(),this.hot.view.render()}getIfMouseWasDraggedOutside(e){const{documentElement:t}=this.hot.rootDocument,i=xi(this.hot.table).top-(this.hot.rootWindow.pageYOffset||t.scrollTop)+ni(this.hot.table),r=xi(this.hot.table).left-(this.hot.rootWindow.pageXOffset||t.scrollLeft)+gn(this.hot.table);return e.clientY>i&&e.clientX<=r}registerEvents(){const{documentElement:e}=this.hot.rootDocument;this.eventManager.addEventListener(e,"mouseup",()=>nb(sg,this,wDe).call(this)),this.eventManager.addEventListener(e,"mousemove",t=>nb(sg,this,yDe).call(this,t))}clearMappedSettings(){this.directions.length=0,this.autoInsertRow=!1}mapSettings(){const e=oDe(this.hot.getSettings().fillHandle);this.directions=e.directions,this.autoInsertRow=e.autoInsertRow}destroy(){super.destroy()}}function mDe(){this.selectAdjacent()&&this.fillIn()}function bDe(){this.handleDraggedCells=1,this.mouseDownOnCellCorner=!0}function vDe(n){this.mouseDownOnCellCorner&&!this.hot.view.isMouseDown()&&this.handleDraggedCells&&(this.handleDraggedCells+=1,this.showBorder(n),this.addNewRowIfNeeded())}function wDe(){this.handleDraggedCells&&(this.handleDraggedCells>1&&this.fillIn(),this.handleDraggedCells=0,this.mouseDownOnCellCorner=!1)}function yDe(n){const e=this.getIfMouseWasDraggedOutside(n);this.addingStarted===!1&&this.handleDraggedCells>0&&e?(this.mouseDragOutside=!0,this.addingStarted=!0):this.mouseDragOutside=!1,this.mouseDragOutside&&this.autoInsertRow&&this.addRow()}function CDe(n,e){AK(n,e),e.add(n)}function SDe(n,e,t){AK(n,e),e.set(n,t)}function AK(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function og(n,e,t){return(e=_De(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function _De(n){var e=RDe(n,"string");return typeof e=="symbol"?e:e+""}function RDe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function EDe(n,e,t){return n.set($a(n,e),t),t}function vH(n,e){return n.get($a(n,e))}function $a(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const dC="autoRowSize",xDe=40,TDe="autoRowSize";var Mw=new WeakMap,Yl=new WeakSet;class Dv extends Ht{static get PLUGIN_KEY(){return dC}static get PLUGIN_PRIORITY(){return xDe}static get SETTING_KEYS(){return!0}static get CALCULATION_STEP(){return 50}static get SYNC_CALCULATION_LIMIT(){return 500}constructor(e){super(e),CDe(this,Yl),og(this,"headerHeight",null),og(this,"ghostTable",new mH(this.hot)),og(this,"samplesGenerator",new wE((t,i)=>{const r=this.hot.toPhysicalRow(t),s=this.hot.toPhysicalColumn(i);if(this.hot.rowIndexMapper.isHidden(r)||this.hot.columnIndexMapper.isHidden(s)||t>=0&&i>=0&&this.hot.getCellMeta(t,i).hidden)return!1;let o;return t>=0?o=this.hot.getDataAtCell(t,i):t===-1&&(o=this.hot.getColHeader(i)),{value:o}})),og(this,"inProgress",!1),og(this,"measuredRows",0),og(this,"rowHeightsMap",new ch),SDe(this,Mw,[]),this.hot.rowIndexMapper.registerMap(TDe,this.rowHeightsMap),this.addHook("beforeRowResize",(t,i,r)=>$a(Yl,this,IW).call(this,t,i,r))}isEnabled(){const e=this.hot.getSettings()[dC];return e===!0||ct(e)}enablePlugin(){var e=this;this.enabled||(this.setSamplingOptions(),this.addHook("afterLoadData",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return $a(Yl,e,PDe).call(e,...i)}),this.addHook("beforeChangeRender",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return $a(Yl,e,IDe).call(e,...i)}),this.addHook("beforeColumnResize",()=>this.recalculateAllRowsHeight()),this.addHook("afterFormulasValuesUpdate",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return $a(Yl,e,kDe).call(e,...i)}),this.addHook("beforeRender",()=>$a(Yl,this,ADe).call(this)),this.addHook("modifyRowHeight",(t,i)=>this.getRowHeight(i,t)),this.addHook("init",()=>$a(Yl,this,ODe).call(this)),this.addHook("modifyColumnHeaderHeight",()=>this.getColumnHeaderHeight()),super.enablePlugin())}disablePlugin(){this.headerHeight=null,super.disablePlugin(),this.addHook("beforeRowResize",(e,t,i)=>$a(Yl,this,IW).call(this,e,t,i))}calculateVisibleRowsHeight(){if(!this.hot.countCols())return;const e=this.getFirstVisibleRow(),t=this.getLastVisibleRow();if(e===-1||t===-1)return;const i=this.hot.renderCall;this.calculateRowsHeight({from:e,to:t},void 0,i)}calculateRowsHeight(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{from:0,to:this.hot.countRows()-1},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{from:0,to:this.hot.countCols()-1},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const r=typeof e=="number"?{from:e,to:e}:e,s=typeof t=="number"?{from:t,to:t}:t;if(this.hot.getColHeader(0)!==null){const o=this.samplesGenerator.generateRowSamples(-1,s);this.ghostTable.addColumnHeadersRow(o.get(-1))}$e(r.from,r.to,o=>{let a=this.hot.toPhysicalRow(o);a===null&&(a=o),(i||this.rowHeightsMap.getValueAtIndex(a)===null)&&this.samplesGenerator.generateRowSamples(o,s).forEach((c,u)=>this.ghostTable.addRow(u,c))}),this.ghostTable.rows.length&&(this.hot.batchExecution(()=>{this.ghostTable.getHeights((o,a)=>{o<0?this.headerHeight=a:this.rowHeightsMap.setValueAtIndex(this.hot.toPhysicalRow(o),a)})},!0),this.measuredRows=r.to+1,this.ghostTable.clean())}calculateAllRowsHeight(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{from:0,to:this.hot.countCols()-1},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=0;const r=this.hot.countRows()-1;let s=null;this.inProgress=!0;const o=()=>{if(!this.hot){_w(s),this.inProgress=!1;return}this.calculateRowsHeight({from:i,to:Math.min(i+Dv.CALCULATION_STEP,r)},e,t),i=i+Dv.CALCULATION_STEP+1,i<r?s=rE(o):(_w(s),this.inProgress=!1,this.hot.view.adjustElementsSize(),this.hot.view._wt.wtOverlays.inlineStartOverlay.needFullRender&&this.hot.view._wt.wtOverlays.inlineStartOverlay.clone.draw())},a=this.getSyncCalculationLimit();a>=0&&(this.calculateRowsHeight({from:0,to:a},e,t),i=a+1),i<r?o():(this.inProgress=!1,this.hot.view.adjustElementsSize())}setSamplingOptions(){const e=this.hot.getSettings()[dC],t=e&&kn(e,"samplingRatio")?e.samplingRatio:void 0,i=e&&kn(e,"allowSampleDuplicates")?e.allowSampleDuplicates:void 0;t&&!isNaN(t)&&this.samplesGenerator.setSampleCount(parseInt(t,10)),i&&this.samplesGenerator.setAllowDuplicates(i)}recalculateAllRowsHeight(){this.hot.view.isVisible()&&this.calculateAllRowsHeight({from:0,to:this.hot.countCols()-1},!0)}getSyncCalculationLimit(){const e=this.hot.getSettings()[dC];let t=Dv.SYNC_CALCULATION_LIMIT;const i=this.hot.countRows()-1;return ct(e)&&(t=e.syncLimit,HD(t)?t=aL(i,t):t>>=0),Math.min(t,i)}getRowHeight(e,t){const i=e<0?this.headerHeight:this.rowHeightsMap.getValueAtIndex(this.hot.toPhysicalRow(e));let r=t;return i!==null&&i>(t||0)&&(r=i),r}getColumnHeaderHeight(){return this.headerHeight}getFirstVisibleRow(){var e;return(e=this.hot.view.getFirstRenderedVisibleRow())!==null&&e!==void 0?e:-1}getLastVisibleRow(){var e;return(e=this.hot.view.getLastRenderedVisibleRow())!==null&&e!==void 0?e:-1}clearCache(e){this.headerHeight=null,Array.isArray(e)?this.hot.batchExecution(()=>{e.forEach(t=>{this.rowHeightsMap.setValueAtIndex(t,null)})},!0):this.rowHeightsMap.clear()}clearCacheByRange(e){const{from:t,to:i}=typeof e=="number"?{from:e,to:e}:e;this.hot.batchExecution(()=>{$e(Math.min(t,i),Math.max(t,i),r=>{this.rowHeightsMap.setValueAtIndex(r,null)})},!0)}isNeedRecalculate(){return!!this.rowHeightsMap.getValues().slice(0,this.measuredRows).filter(e=>e===null).length}destroy(){this.ghostTable.clean(),super.destroy()}}function MDe(n){const e={from:0,to:this.hot.countCols()-1};n.forEach(t=>{this.samplesGenerator.generateRowSamples(t,e).forEach((r,s)=>this.ghostTable.addRow(s,r))}),this.ghostTable.rows.length&&(this.hot.batchExecution(()=>{this.ghostTable.getHeights((t,i)=>{const r=this.hot.toPhysicalRow(t);this.rowHeightsMap.setValueAtIndex(r,i)})},!0),this.ghostTable.clean())}function ADe(){this.calculateVisibleRowsHeight(),this.inProgress||($a(Yl,this,MDe).call(this,vH(Mw,this)),EDe(Mw,this,[]))}function IW(n,e,t){let i=n;return t&&(this.calculateRowsHeight(e,void 0,!0),i=this.getRowHeight(e)),i}function PDe(n,e){e||this.recalculateAllRowsHeight()}function IDe(n){const e=n.reduce((t,i)=>{let[r]=i;return t.indexOf(r)===-1&&t.push(r),t},[]);vH(Mw,this).push(...e)}function ODe(){this.recalculateAllRowsHeight()}function kDe(n){const e=n.reduce((t,i)=>{var r;const s=(r=i.address)===null||r===void 0?void 0:r.row;if(Number.isInteger(s)){const o=this.hot.toVisualRow(s);t.indexOf(o)===-1&&t.push(o)}return t},[]);vH(Mw,this).push(...e)}const{getListWithInsertedItems:DDe,getListWithRemovedItems:LDe}=BY("physicallyIndexed");class NDe extends Df{constructor(){super(e=>e)}insert(e,t){const i=DL(this.indexedValues,t);this.indexedValues=DDe(i,e,t,this.initValueOrFn),super.insert(e,t)}remove(e){const t=LDe(this.indexedValues,e);this.indexedValues=kL(t,e),super.remove(e)}}const{getListWithInsertedItems:HDe,getListWithRemovedItems:$De}=BY("physicallyIndexed");class FDe extends Df{constructor(){super(e=>e)}insert(e,t){this.indexedValues=HDe(this.indexedValues,e,t,(i,r)=>this.getNextValue(r)),super.insert(e,t)}remove(e){this.indexedValues=$De(this.indexedValues,e),super.remove(e)}getNextValue(e){return Math.max(...this.getValues())+1+e}}function BDe(n,e){VDe(n,e),e.add(n)}function VDe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function WDe(n,e,t){return(e=jDe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function jDe(n){var e=zDe(n,"string");return typeof e=="symbol"?e:e+""}function zDe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function UDe(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const rM="bindRowsWithHeaders",GDe=210,YDe="loose",KDe=new Map([["loose",NDe],["strict",FDe]]);var OW=new WeakSet;class qDe extends Ht{constructor(){super(...arguments),BDe(this,OW),WDe(this,"headerIndexes",null)}static get PLUGIN_KEY(){return rM}static get PLUGIN_PRIORITY(){return GDe}isEnabled(){return!!this.hot.getSettings()[rM]}enablePlugin(){if(this.enabled)return;let e=this.hot.getSettings()[rM];typeof e!="string"&&(e=YDe);const t=KDe.get(e);this.headerIndexes=this.hot.rowIndexMapper.registerMap("bindRowsWithHeaders",new t),this.addHook("modifyRowHeader",i=>UDe(OW,this,XDe).call(this,i)),super.enablePlugin()}disablePlugin(){this.hot.rowIndexMapper.unregisterMap("bindRowsWithHeaders"),super.disablePlugin()}destroy(){super.destroy()}}function XDe(n){return this.headerIndexes.getValueAtIndex(this.hot.toPhysicalRow(n))}function ZDe(n,e){PK(n,e),e.add(n)}function QDe(n,e,t){PK(n,e),e.set(n,t)}function PK(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function kW(n,e,t){return(e=JDe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function JDe(n){var e=eLe(n,"string");return typeof e=="symbol"?e:e+""}function eLe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function DW(n,e){return n.get(Jg(n,e))}function sM(n,e,t){return n.set(Jg(n,e),t),t}function Jg(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const $S="collapsibleColumns",tLe=290,nLe=["nestedHeaders"],dp="collapsibleIndicator",LW=$S,NW=new Map([["collapse",{hideColumn:!0,beforeHook:"beforeColumnCollapse",afterHook:"afterColumnCollapse"}],["expand",{hideColumn:!1,beforeHook:"beforeColumnExpand",afterHook:"afterColumnExpand"}]]);var ag=new WeakMap,ib=new WeakSet;class iLe extends Ht{constructor(){super(...arguments),ZDe(this,ib),kW(this,"nestedHeadersPlugin",null),kW(this,"headerStateManager",null),QDe(this,ag,null)}static get PLUGIN_KEY(){return $S}static get PLUGIN_PRIORITY(){return tLe}static get PLUGIN_DEPS(){return["plugin:NestedHeaders"]}static get SETTING_KEYS(){return[$S,...nLe]}isEnabled(){return!!this.hot.getSettings()[$S]}enablePlugin(){var e=this;if(this.enabled)return;const{nestedHeaders:t}=this.hot.getSettings();t||Yt("You need to configure the Nested Headers plugin in order to use collapsible headers."),sM(ag,this,this.hot.columnIndexMapper.createAndRegisterIndexMap(this.pluginName,"hiding")),this.nestedHeadersPlugin=this.hot.getPlugin("nestedHeaders"),this.headerStateManager=this.nestedHeadersPlugin.getStateManager(),this.addHook("init",()=>Jg(ib,this,oLe).call(this)),this.addHook("afterLoadData",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Jg(ib,e,aLe).call(e,...r)}),this.addHook("afterGetColHeader",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Jg(ib,e,rLe).call(e,...r)}),this.addHook("beforeOnCellMouseDown",(i,r,s)=>Jg(ib,this,sLe).call(this,i,r,s)),this.registerShortcuts(),super.enablePlugin(),this.updatePlugin()}updatePlugin(){if(this.hot.view){if(!this.nestedHeadersPlugin.detectedOverlappedHeaders){const{collapsibleColumns:e}=this.hot.getSettings();typeof e=="boolean"?this.headerStateManager.mapState(t=>({collapsible:t.origColspan>1})):Array.isArray(e)&&(this.headerStateManager.mapState(()=>({collapsible:!1})),this.headerStateManager.mergeStateWith(e))}super.updatePlugin()}}disablePlugin(){this.hot.columnIndexMapper.unregisterMap(this.pluginName),sM(ag,this,null),this.nestedHeadersPlugin=null,this.unregisterShortcuts(),this.clearButtons(),super.disablePlugin()}registerShortcuts(){this.hot.getShortcutManager().getContext("grid").addShortcut({keys:[["Enter"]],callback:()=>{var e;const{row:t,col:i}=this.hot.getSelectedRangeLast().highlight,{collapsible:r,isCollapsed:s,columnIndex:o}=(e=this.headerStateManager.getHeaderTreeNodeData(t,i))!==null&&e!==void 0?e:{};if(r)return s?this.expandSection({row:t,col:o}):this.collapseSection({row:t,col:o}),!1},runOnlyIf:()=>{var e,t;return((e=this.hot.getSelectedRangeLast())===null||e===void 0?void 0:e.isSingle())&&((t=this.hot.getSelectedRangeLast())===null||t===void 0?void 0:t.highlight.isHeader())},group:LW,relativeToGroup:uh,position:"before"})}unregisterShortcuts(){this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup(LW)}clearButtons(){if(!this.hot.view)return;const e=this.hot.view._wt.getSetting("columnHeaders").length,t=this.hot.view._wt.wtTable.THEAD,i=this.hot.view._wt.wtOverlays.topOverlay.clone.wtTable.THEAD,r=this.hot.view._wt.wtOverlays.topInlineStartCornerOverlay?this.hot.view._wt.wtOverlays.topInlineStartCornerOverlay.clone.wtTable.THEAD:null,s=function(o){o&&o.parentNode.removeChild(o)};$e(0,e-1,o=>{const a=t.childNodes[o],l=i.childNodes[o],c=r?r.childNodes[o]:null;$e(0,a.childNodes.length-1,u=>{let h=a.childNodes[u].querySelector(`.${dp}`);s(h),l&&l.childNodes[u]&&(h=l.childNodes[u].querySelector(`.${dp}`),s(h)),r&&c&&c.childNodes[u]&&(h=c.childNodes[u].querySelector(`.${dp}`),s(h))})})}expandSection(e){this.toggleCollapsibleSection([e],"expand")}collapseSection(e){this.toggleCollapsibleSection([e],"collapse")}toggleAllCollapsibleSections(e){const t=this.headerStateManager.mapNodes(i=>{const{collapsible:r,origColspan:s,headerLevel:o,columnIndex:a,isCollapsed:l}=i;if(r===!0&&s>1&&(l&&e==="expand"||!l&&e==="collapse"))return{row:this.headerStateManager.levelToRowCoords(o),col:a}});this.toggleCollapsibleSection(t,e)}collapseAll(){this.toggleAllCollapsibleSections("collapse")}expandAll(){this.toggleAllCollapsibleSections("expand")}toggleCollapsibleSection(e,t){if(!NW.has(t))throw new Error(`Unsupported action is passed (${t}).`);if(!Array.isArray(e))return;const i=Ac(e,f=>{let{row:g}=f;return g<0});let r=i.length>0;q(i,f=>{var g;let{row:p,col:m}=f;const{collapsible:v,isCollapsed:y}=(g=this.headerStateManager.getHeaderSettings(p,m))!==null&&g!==void 0?g:{};if(!v||y&&t==="collapse"||!y&&t==="expand")return r=!1,!1});const s=[],o=[];r&&q(i,f=>{let{row:g,col:p}=f;const{colspanCompensation:m,affectedColumns:v,rollbackModification:y}=this.headerStateManager.triggerNodeModification(t,g,p);m>0&&(o.push(...v),s.push(y))});const a=this.getCollapsedColumns();let l=[];t==="collapse"?l=LD([...a,...o]):t==="expand"&&(l=Ac(a,f=>!o.includes(f)));const c=NW.get(t);if(this.hot.runHooks(c.beforeHook,a,l,r)===!1){q(s,f=>{f()});return}this.hot.batchExecution(()=>{q(o,f=>{DW(ag,this).setValueAtIndex(this.hot.toPhysicalColumn(f),c.hideColumn)})},!0);const h=this.getCollapsedColumns().length!==a.length,d=this.hot.getSelectedRangeLast();if(t==="collapse"&&h&&d){const{row:f,col:g}=d.highlight;if((this.hot.rowIndexMapper.isHidden(f)||this.hot.columnIndexMapper.isHidden(g))&&o.includes(g)){const m=f>=0?this.hot.rowIndexMapper.getNearestNotHiddenIndex(f,1,!0):f,v=g>=0?this.hot.columnIndexMapper.getNearestNotHiddenIndex(g,1,!0):g;m!==null&&v!==null&&this.hot.selectCell(m,v)}}this.hot.runHooks(c.afterHook,a,l,r,h),this.hot.render(),this.hot.view.adjustElementsSize()}getCollapsedColumns(){return DW(ag,this).getHiddenIndexes()}destroy(){sM(ag,this,null),super.destroy()}}function rLe(n,e,t){var i;const{collapsible:r,origColspan:s,isCollapsed:o}=(i=this.headerStateManager.getHeaderSettings(t,n))!==null&&i!==void 0?i:{},a=r&&s>1&&n>=this.hot.getSettings().fixedColumnsStart,l=this.hot.getSettings().ariaTags;let c=e.querySelector(`.${dp}`);if(Of(e,[io("")[0]]),a)c||(c=this.hot.rootDocument.createElement("div"),ge(c,dp),e.querySelector("div:first-child").appendChild(c)),Qe(c,["collapsed","expanded"]),o?(ge(c,"collapsed"),Ku(c,"+"),l&&ze(e,...io(!1))):(ge(c,"expanded"),Ku(c,"-"),l&&ze(e,...io(!0))),l&&ze(c,...If());else{var u;(u=c)===null||u===void 0||u.remove()}}function sLe(n,e){Ue(n.target,dp)&&(Ue(n.target,"expanded")?(this.eventManager.fireEvent(n.target,"mouseup"),this.toggleCollapsibleSection([e],"collapse")):Ue(n.target,"collapsed")&&(this.eventManager.fireEvent(n.target,"mouseup"),this.toggleCollapsibleSection([e],"expand")),bo(n))}function oLe(){this.updatePlugin()}function aLe(n,e){e||this.updatePlugin()}function $h(n,e,t){return(e=lLe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function lLe(n){var e=cLe(n,"string");return typeof e=="symbol"?e:e+""}function cLe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const uLe=["sortEmptyCells","indicator","headerAction","compareFunctionFactory"],hLe=!1,dLe=!0,fLe=!0;class gLe{constructor(e,t){$h(this,"hot",void 0),$h(this,"sortingStates",new dE),$h(this,"sortEmptyCells",hLe),$h(this,"indicator",dLe),$h(this,"headerAction",fLe),$h(this,"compareFunctionFactory",void 0),$h(this,"mapName",void 0),this.hot=e,this.mapName=t,this.hot.columnIndexMapper.registerMap(t,this.sortingStates)}updateAllColumnsProperties(e){ct(e)&&ut(e,(t,i)=>{uLe.includes(i)&&(this[i]=t)})}getAllColumnsProperties(){const e={sortEmptyCells:this.sortEmptyCells,indicator:this.indicator,headerAction:this.headerAction};return typeof this.compareFunctionFactory=="function"&&(e.compareFunctionFactory=this.compareFunctionFactory),e}getSortOrderOfColumn(e){var t;return(t=this.sortingStates.getValueAtIndex(this.hot.toPhysicalColumn(e)))===null||t===void 0?void 0:t.sortOrder}getIndexOfColumnInSortQueue(e){return e=this.hot.toPhysicalColumn(e),this.sortingStates.getEntries().findIndex(t=>{let[i]=t;return i===e})}getNumberOfSortedColumns(){return this.sortingStates.getLength()}isListOfSortedColumnsEmpty(){return this.getNumberOfSortedColumns()===0}isColumnSorted(e){return ct(this.sortingStates.getValueAtIndex(this.hot.toPhysicalColumn(e)))}getSortStates(){return this.sortingStates===null?[]:this.sortingStates.getEntries().map(t=>{let[i,r]=t;return{column:this.hot.toVisualColumn(i),...r}})}getColumnSortState(e){const t=this.getSortOrderOfColumn(e);if(De(t))return{column:e,sortOrder:t}}setSortStates(e){this.sortingStates.clear();for(let t=0;t<e.length;t+=1)this.sortingStates.setValueAtIndex(this.hot.toPhysicalColumn(e[t].column),{sortOrder:e[t].sortOrder})}destroy(){this.hot.columnIndexMapper.unregisterMap(this.mapName),this.sortingStates=null}}function IK(n,e,t){const i=e.locale;return function(r,s){const{sortEmptyCells:o}=t;return typeof r=="string"&&(r=r.toLocaleLowerCase(i)),typeof s=="string"&&(s=s.toLocaleLowerCase(i)),r===s?tl:zn(r)?zn(s)?tl:o&&n==="asc"?Vn:Wn:zn(s)?o&&n==="asc"?Wn:Vn:isNaN(r)&&!isNaN(s)?n==="asc"?Wn:Vn:!isNaN(r)&&isNaN(s)||(isNaN(r)||isNaN(s)||(r=parseFloat(r),s=parseFloat(s)),r<s)?n==="asc"?Vn:Wn:r>s?n==="asc"?Wn:Vn:tl}}const OK="default";function pLe(n,e,t){return function(i,r){const s=parseFloat(i),o=parseFloat(r),{sortEmptyCells:a}=t;if(s===o||isNaN(s)&&isNaN(o))return tl;if(a){if(zn(i))return n==="asc"?Vn:Wn;if(zn(r))return n==="asc"?Wn:Vn}return isNaN(s)?Wn:isNaN(o)?Vn:s<o?n==="asc"?Vn:Wn:s>o?n==="asc"?Wn:Vn:tl}}const mLe="numeric";function bLe(n,e,t){const i=e.checkedTemplate,r=e.uncheckedTemplate,{sortEmptyCells:s}=t;return function(o,a){const l=zn(o),c=zn(a),u=l?r:o,h=c?r:a,d=u===r||u===i,f=h===r||h===i;if(s===!1){if(l&&c===!1)return Wn;if(l===!1&&c)return Vn}return d===!1&&f?n==="asc"?Vn:Wn:d&&f===!1?n==="asc"?Wn:Vn:d===!1&&f===!1?IK(n,e,t)(o,a):u===r&&h===i?n==="asc"?Vn:Wn:u===i&&h===r?n==="asc"?Wn:Vn:tl}}const vLe="checkbox";function wLe(n,e,t){return $K(n,e.dateFormat,t)}const yLe="date";function CLe(n,e,t){return $K(n,e.timeFormat,t)}const SLe="time",{register:Ey,getItem:HW,hasItem:_Le}=da("sorting.compareFunctionFactory"),{register:kK,getItem:RLe}=da("sorting.mainSortComparator");function DK(n){return _Le(n)?HW(n):HW(OK)}Ey(vLe,bLe);Ey(yLe,wLe);Ey(OK,IK);Ey(mLe,pLe);Ey(SLe,CLe);const tl=0,Vn=-1,Wn=1;function ELe(n,e){const t=RLe(e);for(var i=arguments.length,r=new Array(i>2?i-2:0),s=2;s<i;s++)r[s-2]=arguments[s];n.sort(t(...r))}const bR="asc",vR="desc",LK="colHeader";function xLe(n){if(ct(n)===!1)return!1;const{column:e,sortOrder:t}=n;return Number.isInteger(e)&&[bR,vR].includes(t)}function TLe(n){if(n.some(t=>xLe(t)===!1))return!1;const e=n.map(t=>{let{column:i}=t;return i});return new Set(e).size===e.length}function $W(n){if(n!==vR)return n===bR?vR:bR}function NK(n){return n.querySelector(`.${LK}`)}function HK(n,e){if(n<0||!e.parentNode)return!1;const t=e.parentNode.parentNode.childNodes;return Array.from(t).indexOf(e.parentNode)-t.length===-1}function wH(n,e,t){return n===-1&&e>=0&&qu(t)===!1}function $K(n,e,t){return function(i,r){const{sortEmptyCells:s}=t;if(i===r)return tl;if(zn(i))return zn(r)?tl:s&&n==="asc"?Vn:Wn;if(zn(r))return s&&n==="asc"?Wn:Vn;const o=pe(i,e),a=pe(r,e);return o.isValid()?a.isValid()?a.isAfter(o)?n==="asc"?Vn:Wn:a.isBefore(o)?n==="asc"?Wn:Vn:tl:Vn:Wn}}const MLe="ascending",ALe="descending",FK="indicatorDisabled",BK="columnSorting",VK="sortAction",WK=new Map([[bR,MLe],[vR,ALe]]);function PLe(n,e,t,i){const r=[BK];if(i&&r.push(VK),t===!1)return r.push(FK),r;const s=n.getSortOrderOfColumn(e);return De(s)&&r.push(WK.get(s)),r}function ILe(){return Array.from(WK.values()).concat(VK,FK,BK)}function OLe(n,e){return function(t,i){const[,...r]=t,[,...s]=i;return function(a){const l=n[a],c=e[a],u=r[a],h=s[a],d=c.columnSorting;return(d.compareFunctionFactory?d.compareFunctionFactory:DK(c.type))(l,c,d)(u,h)}(0)}}function kLe(n,e){DLe(n,e),e.add(n)}function DLe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function fC(n,e,t){return(e=LLe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function LLe(n){var e=NLe(n,"string");return typeof e=="symbol"?e:e+""}function NLe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Lg(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const wR="columnSorting",HLe=50,yR="append",$Le="replace",FW=wR;kK(wR,OLe);Oe.getSingleton().register("beforeColumnSort");Oe.getSingleton().register("afterColumnSort");var gd=new WeakSet;class jK extends Ht{constructor(){super(...arguments),kLe(this,gd),fC(this,"columnStatesManager",null),fC(this,"columnMetaCache",null),fC(this,"pluginKey",wR),fC(this,"indexesSequenceCache",null)}static get PLUGIN_KEY(){return wR}static get PLUGIN_PRIORITY(){return HLe}isEnabled(){return!!this.hot.getSettings()[this.pluginKey]}enablePlugin(){var e=this;this.enabled||(this.columnStatesManager=new gLe(this.hot,`${this.pluginKey}.sortingStates`),this.columnMetaCache=new ch(t=>{let i=this.hot.toVisualColumn(t);return i===null&&(i=t),this.getMergedPluginSettings(i)}),this.hot.columnIndexMapper.registerMap(`${this.pluginKey}.columnMeta`,this.columnMetaCache),this.addHook("afterGetColHeader",(t,i)=>Lg(gd,this,FLe).call(this,t,i)),this.addHook("beforeOnCellMouseDown",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Lg(gd,e,VLe).call(e,...i)}),this.addHook("afterOnCellMouseDown",(t,i)=>this.onAfterOnCellMouseDown(t,i)),this.addHook("afterInit",()=>Lg(gd,this,WI).call(this)),this.addHook("afterLoadData",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Lg(gd,e,BLe).call(e,...i)}),this.hot.view&&Lg(gd,this,WI).call(this),this.registerShortcuts(),super.enablePlugin())}disablePlugin(){const e=(t,i)=>{const r=NK(i);HK(t,i)===!1||r===null||this.updateHeaderClasses(r)};this.hot.addHook("afterGetColHeader",e),this.hot.addHookOnce("afterViewRender",()=>{this.hot.removeHook("afterGetColHeader",e)}),this.hot.batchExecution(()=>{this.indexesSequenceCache!==null&&(this.hot.rowIndexMapper.setIndexesSequence(this.indexesSequenceCache.getValues()),this.hot.rowIndexMapper.unregisterMap(this.pluginKey),this.indexesSequenceCache=null)},!0),this.hot.columnIndexMapper.unregisterMap(`${this.pluginKey}.columnMeta`),this.columnStatesManager.destroy(),this.columnMetaCache=null,this.columnStatesManager=null,this.unregisterShortcuts(),super.disablePlugin()}registerShortcuts(){this.hot.getShortcutManager().getContext("grid").addShortcut({keys:[["Enter"]],callback:()=>{const{highlight:e}=this.hot.getSelectedRangeLast();return this.sort(this.getColumnNextConfig(e.col)),!1},runOnlyIf:()=>{var e,t;const i=(e=this.hot.getSelectedRangeLast())===null||e===void 0?void 0:e.highlight;return i&&((t=this.hot.getSelectedRangeLast())===null||t===void 0?void 0:t.isSingle())&&this.hot.selection.isCellVisible(i)&&i.row===-1&&i.col>=0},relativeToGroup:uh,position:"before",group:FW})}unregisterShortcuts(){this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup(FW)}sort(e){const t=this.getSortConfig(),i=this.getNormalizedSortConfigs(e),r=this.areValidSortConfigs(i);this.hot.runHooks("beforeColumnSort",t,i,r)!==!1&&(t.length===0&&this.indexesSequenceCache===null&&(this.indexesSequenceCache=this.hot.rowIndexMapper.registerMap(this.pluginKey,new VY),this.indexesSequenceCache.setValues(this.hot.rowIndexMapper.getIndexesSequence())),r&&(this.columnStatesManager.setSortStates(i),this.sortByPresetSortStates(i),this.saveAllSortSettings(i)),this.hot.runHooks("afterColumnSort",t,r?i:t,r),r&&(this.hot.render(),this.hot.forceFullRender=!1,this.hot.view.render()))}clearSort(){this.sort([])}isSorted(){return this.enabled&&!this.columnStatesManager.isListOfSortedColumnsEmpty()}getSortConfig(e){return De(e)?this.columnStatesManager.getColumnSortState(e):this.columnStatesManager.getSortStates()}setSortConfig(e){const t=this.getNormalizedSortConfigs(e);this.areValidSortConfigs(t)&&this.columnStatesManager.setSortStates(t)}getNormalizedSortConfigs(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Array.isArray(e)?e.slice(0,1):[e]}areValidSortConfigs(e){const t=this.hot.countCols();return TLe(e)&&e.every(i=>{let{column:r}=i;return r<=t&&r>=0})}saveAllSortSettings(e){const t=this.columnStatesManager.getAllColumnsProperties(),i=r=>{let{column:s,...o}=r;return{column:this.hot.toPhysicalColumn(s),...o}};t.initialConfig=vt(e,i),this.hot.runHooks("persistentStateSave","columnSorting",t)}getAllSavedSortSettings(){const e={};this.hot.runHooks("persistentStateLoad","columnSorting",e);const t=e.value,i=r=>{let{column:s,...o}=r;return{column:this.hot.toVisualColumn(s),...o}};return De(t)&&Array.isArray(t.initialConfig)&&(t.initialConfig=vt(t.initialConfig,i)),t}getColumnNextConfig(e){const t=this.columnStatesManager.getSortOrderOfColumn(e);if(De(t)){const r=$W(t);return De(r)?{column:e,sortOrder:r}:void 0}const i=this.hot.countCols();if(Number.isInteger(e)&&e>=0&&e<i)return{column:e,sortOrder:$W()}}getNextSortConfig(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:yR;const i=this.columnStatesManager.getIndexOfColumnInSortQueue(e),r=i!==-1,s=this.getSortConfig(),o=this.getColumnNextConfig(e);if(r){if(fn(o))return[...s.slice(0,i),...s.slice(i+1)];if(t===yR)return[...s.slice(0,i),...s.slice(i+1),o];if(t===$Le)return[...s.slice(0,i),o,...s.slice(i+1)]}return De(o)?s.concat(o):s}getPluginColumnConfig(e){if(ct(e)){const t=e[this.pluginKey];if(ct(t))return t}return{}}getMergedPluginSettings(e){const t=this.hot.getSettings()[this.pluginKey],i=this.columnStatesManager.getAllColumnsProperties(),r=this.hot.getCellMeta(0,e),s=Object.getPrototypeOf(r);return Array.isArray(s.columns)?Object.assign(i,t,this.getPluginColumnConfig(s.columns[e])):un(s.columns)?Object.assign(i,t,this.getPluginColumnConfig(s.columns(e))):Object.assign(i,t)}getFirstCellSettings(e){const t=this.hot.getCellMeta(0,e),i=Object.create(t);return i[this.pluginKey]=this.columnMetaCache.getValueAtIndex(this.hot.toPhysicalColumn(e)),i}getNumberOfRowsToSort(e){const t=this.hot.getSettings();return t.maxRows<=e?t.maxRows:e-t.minSpareRows}sortByPresetSortStates(e){if(this.hot.rowIndexMapper.setIndexesSequence(this.indexesSequenceCache.getValues()),e.length===0)return;const t=[],i=this.hot.countRows(),r=c=>vt(e,u=>this.hot.getDataAtCell(c,u.column));for(let c=0;c<this.getNumberOfRowsToSort(i);c+=1)t.push([this.hot.toPhysicalRow(c)].concat(r(c)));const s=vt(t,c=>c[0]);ELe(t,this.pluginKey,vt(e,c=>c.sortOrder),vt(e,c=>this.getFirstCellSettings(c.column)));for(let c=t.length;c<i;c+=1)t.push([c].concat(r(c)));const o=vt(t,c=>c[0]),a=new Map(vt(s,(c,u)=>[c,o[u]])),l=vt(this.hot.rowIndexMapper.getIndexesSequence(),c=>a.has(c)?a.get(c):c);this.hot.rowIndexMapper.setIndexesSequence(l)}sortBySettings(e){if(ct(e)){this.columnStatesManager.updateAllColumnsProperties(e);const t=e.initialConfig;(Array.isArray(t)||ct(t))&&this.sort(t)}else this.hot.render()}updateHeaderClasses(e){if(Qe(e,ILe()),this.enabled!==!1){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];ge(e,PLe(...i))}}onUpdateSettings(e){super.onUpdateSettings(),this.columnMetaCache!==null&&this.columnMetaCache.init(this.hot.columnIndexMapper.getNumberOfIndexes()),De(e[this.pluginKey])&&this.sortBySettings(e[this.pluginKey])}wasClickableHeaderClicked(e,t){return this.getFirstCellSettings(t)[this.pluginKey].headerAction&&Ue(e.target,LK)}onAfterOnCellMouseDown(e,t){if(wH(t.row,t.col,e)!==!1&&this.wasClickableHeaderClicked(e,t.col)){this.hot.getShortcutManager().isCtrlPressed()&&(this.hot.deselectCell(),this.hot.selectColumns(t.col));const i=this.hot.getActiveEditor(),r=this.getColumnNextConfig(t.col);i!=null&&i.isOpened()&&this.hot.getCellValidator(i.row,i.col)?this.hot.addHookOnce("postAfterValidate",()=>{this.sort(r)}):this.sort(r)}}destroy(){var e;(e=this.columnStatesManager)===null||e===void 0||e.destroy(),super.destroy()}}function WI(){const n=this.getAllSavedSortSettings();if(ct(n))this.sortBySettings(n);else{const e=this.hot.getSettings()[this.pluginKey];this.sortBySettings(e)}}function FLe(n,e){const t=NK(e);if(HK(n,e)===!1||t===null)return;const i=this.getFirstCellSettings(n)[this.pluginKey],r=i.indicator,s=i.headerAction;if(this.updateHeaderClasses(t,this.columnStatesManager,n,r,s),this.hot.getSettings().ariaTags){const o=this.columnStatesManager.getSortOrderOfColumn(n);ze(e,...yRe(o?`${o}ending`:"none"))}}function BLe(n){n===!0&&this.hot.view&&Lg(gd,this,WI).call(this)}function VLe(n,e,t,i){wH(e.row,e.col,n)!==!1&&this.wasClickableHeaderClicked(n,e.col)&&this.hot.getShortcutManager().isCtrlPressed()&&(i.column=!0)}function Fh(n,e,t){return(e=WLe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function WLe(n){var e=jLe(n,"string");return typeof e=="symbol"?e:e+""}function jLe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class zLe{constructor(e,t){Fh(this,"plugin",void 0),Fh(this,"hot",void 0),Fh(this,"endpoints",[]),Fh(this,"settings",void 0),Fh(this,"settingsType","array"),Fh(this,"currentEndpoint",null),Fh(this,"cellsToSetCache",[]),this.plugin=e,this.hot=this.plugin.hot,this.settings=t}initEndpoints(){this.endpoints=this.parseSettings(),this.refreshAllEndpoints()}getEndpoint(e){return this.settingsType==="function"?this.fillMissingEndpointData(this.settings)[e]:this.endpoints[e]}getAllEndpoints(){return this.settingsType==="function"?this.fillMissingEndpointData(this.settings):this.endpoints}fillMissingEndpointData(e){return this.parseSettings(e.call(this))}parseSettings(e){const t=[];let i=e;if(!i&&typeof this.settings=="function"){this.settingsType="function";return}return i||(i=this.settings),q(i,r=>{const s={};this.assignSetting(r,s,"ranges",[[0,this.hot.countRows()-1]]),this.assignSetting(r,s,"reversedRowCoords",!1),this.assignSetting(r,s,"destinationRow",new Error(`
        You must provide a destination row for the Column Summary plugin in order to work properly!
      `)),this.assignSetting(r,s,"destinationColumn",new Error(`
        You must provide a destination column for the Column Summary plugin in order to work properly!
      `)),this.assignSetting(r,s,"sourceColumn",r.destinationColumn),this.assignSetting(r,s,"type","sum"),this.assignSetting(r,s,"forceNumeric",!1),this.assignSetting(r,s,"suppressDataTypeErrors",!0),this.assignSetting(r,s,"customFunction",null),this.assignSetting(r,s,"readOnly",!0),this.assignSetting(r,s,"roundFloat",!1),t.push(s)}),t}assignSetting(e,t,i,r){if(i==="ranges"&&e[i]===void 0){t[i]=r;return}else if(i==="ranges"&&e[i].length===0)return;if(e[i]===void 0){if(r instanceof Error)throw r;t[i]=r}else i==="destinationRow"&&t.reversedRowCoords?t[i]=this.hot.countRows()-e[i]-1:t[i]=e[i]}resetSetupBeforeStructureAlteration(e,t,i){if(this.settingsType!=="function")return;const r=e.indexOf("row")>-1?"row":"col",s=this.getAllEndpoints();q(s,o=>{r==="row"&&o.destinationRow>=t&&(e==="insert_row"?o.alterRowOffset=i:e==="remove_row"&&(o.alterRowOffset=-1*i)),r==="col"&&o.destinationColumn>=t&&(e==="insert_col"?o.alterColumnOffset=i:e==="remove_col"&&(o.alterColumnOffset=-1*i))}),this.resetAllEndpoints(s,!1)}resetSetupAfterStructureAlteration(e,t,i,r,s){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;if(this.settingsType==="function"){const d=()=>(this.hot.removeHook("beforeViewRender",d),this.refreshAllEndpoints());this.hot.addHookOnce("beforeViewRender",d);return}const a=e.indexOf("row")>-1?"row":"col",l=e.indexOf("remove")>-1?-1:1,c=this.getAllEndpoints(),u=e.indexOf("move_row")===0,h=t;q(c,d=>{a==="row"&&d.destinationRow>=h&&(d.alterRowOffset=l*i),a==="col"&&d.destinationColumn>=h&&(d.alterColumnOffset=l*i)}),this.resetAllEndpoints(c,!u),u?q(c,d=>{this.extendEndpointRanges(d,h,r[0],r.length),this.recreatePhysicalRanges(d),this.clearOffsetInformation(d)}):q(c,d=>{this.shiftEndpointCoordinates(d,h)}),o&&this.refreshAllEndpoints()}clearOffsetInformation(e){e.alterRowOffset=void 0,e.alterColumnOffset=void 0}extendEndpointRanges(e,t,i,r){q(e.ranges,s=>{s[1]&&(t>=s[0]&&t<=s[1]?i>s[1]?s[1]+=r:i<s[0]&&(s[0]-=r):i>=s[0]&&i<=s[1]&&(s[1]-=r,t<=s[0]&&(s[0]+=1,s[1]+=1)))})}recreatePhysicalRanges(e){const t=e.ranges,i=[],r=[];q(t,s=>{const o=[];if(s[1])for(let a=s[0];a<=s[1];a++)o.push(this.hot.toPhysicalRow(a));else o.push(this.hot.toPhysicalRow(s[0]));r.push(o)}),q(r,s=>{let o=[];q(s,(a,l)=>{l===0?o.push(a):s[l]!==s[l-1]+1&&(o.push(s[l-1]),i.push(o),o=[],o.push(a)),l===s.length-1&&(o.push(a),i.push(o))})}),e.ranges=i}shiftEndpointCoordinates(e,t){e.alterRowOffset&&e.alterRowOffset!==0?(e.destinationRow+=e.alterRowOffset||0,q(e.ranges,i=>{q(i,(r,s)=>{r>=t&&(i[s]+=e.alterRowOffset||0)})})):e.alterColumnOffset&&e.alterColumnOffset!==0&&(e.destinationColumn+=e.alterColumnOffset||0,e.sourceColumn+=e.alterColumnOffset||0)}resetAllEndpoints(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getAllEndpoints(),t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;e.some(r=>{const s=r.alterRowOffset||0,o=r.alterColumnOffset||0;return r.destinationRow+s>=this.hot.countRows()||r.destinationColumn+o>=this.hot.countCols()})||(this.cellsToSetCache=[],q(e,r=>{this.resetEndpointValue(r,t)}),this.hot.setDataAtCell(this.cellsToSetCache,"ColumnSummary.reset"),this.cellsToSetCache=[])}refreshAllEndpoints(){this.cellsToSetCache=[],q(this.getAllEndpoints(),e=>{this.currentEndpoint=e,this.plugin.calculate(e),this.setEndpointValue(e,"init")}),this.currentEndpoint=null,this.hot.setDataAtCell(this.cellsToSetCache,"ColumnSummary.reset"),this.cellsToSetCache=[]}refreshChangedEndpoints(e){const t=[];this.cellsToSetCache=[],q(e,(i,r,s)=>{`${i[2]||""}`!=`${i[3]}`&&q(this.getAllEndpoints(),(o,a)=>{this.hot.propToCol(s[r][1])===o.sourceColumn&&t.indexOf(a)===-1&&t.push(a)})}),q(t,i=>{this.refreshEndpoint(this.getEndpoint(i))}),this.hot.setDataAtCell(this.cellsToSetCache,"ColumnSummary.reset"),this.cellsToSetCache=[]}refreshCellMetas(){this.endpoints.forEach(e=>{const t=this.hot.toVisualRow(e.destinationRow);if(t!==null){const i=this.hot.getCellMeta(t,e.destinationColumn);i.readOnly=e.readOnly,i.className="columnSummaryResult"}})}refreshEndpoint(e){this.currentEndpoint=e,this.plugin.calculate(e),this.setEndpointValue(e),this.currentEndpoint=null}resetEndpointValue(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const i=e.alterRowOffset||0,r=e.alterColumnOffset||0;this.cellsToSetCache.push([this.hot.toVisualRow(e.destinationRow+(t?i:0)),this.hot.toVisualColumn(e.destinationColumn+(t?r:0)),""])}setEndpointValue(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const r=this.hot.toVisualRow(e.destinationRow);if(e.destinationRow>=this.hot.countRows()||e.destinationColumn>=this.hot.countCols()){this.throwOutOfBoundsWarning();return}const s=this.hot.toVisualRow(e.destinationRow);if(s!==null){const o=this.hot.getCellMeta(s,e.destinationColumn);(t==="init"||o.readOnly!==e.readOnly)&&(o.readOnly=e.readOnly,o.className="columnSummaryResult")}if((e.roundFloat===!0||Number.isInteger(e.roundFloat))&&!isNaN(e.result)){const o=e.roundFloat;let a=0;Number.isInteger(o)&&(a=Math.min(Math.max(0,o),100)),e.result=e.result.toFixed(a)}i?this.hot.setDataAtCell(r,e.destinationColumn,e.result,"ColumnSummary.set"):this.cellsToSetCache.push([r,e.destinationColumn,e.result]),e.alterRowOffset=void 0,e.alterColumnOffset=void 0}throwOutOfBoundsWarning(){Yt("One of the Column Summary plugins' destination points you provided is beyond the table boundaries!")}}function oM(n){return n==null||isNaN(n)}function ULe(n,e){GLe(n,e),e.add(n)}function GLe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function YLe(n,e,t){return(e=KLe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function KLe(n){var e=qLe(n,"string");return typeof e=="symbol"?e:e+""}function qLe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function gC(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const aM="columnSummary",XLe=220;var rb=new WeakSet;class ZLe extends Ht{constructor(){super(...arguments),ULe(this,rb),YLe(this,"endpoints",null)}static get PLUGIN_KEY(){return aM}static get PLUGIN_PRIORITY(){return XLe}isEnabled(){return!!this.hot.getSettings()[aM]}enablePlugin(){var e=this;this.enabled||(this.settings=this.hot.getSettings()[aM],this.endpoints=new zLe(this,this.settings),this.addHook("afterInit",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return gC(rb,e,QLe).call(e,...i)}),this.addHook("afterChange",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return gC(rb,e,eNe).call(e,...i)}),this.addHook("afterUpdateSettings",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return gC(rb,e,JLe).call(e,...i)}),this.addHook("beforeCreateRow",(t,i,r)=>this.endpoints.resetSetupBeforeStructureAlteration("insert_row",t,i,null,r)),this.addHook("beforeCreateCol",(t,i,r)=>this.endpoints.resetSetupBeforeStructureAlteration("insert_col",t,i,null,r)),this.addHook("beforeRemoveRow",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return e.endpoints.resetSetupBeforeStructureAlteration("remove_row",...i)}),this.addHook("beforeRemoveCol",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return e.endpoints.resetSetupBeforeStructureAlteration("remove_col",...i)}),this.addHook("afterCreateRow",(t,i,r)=>this.endpoints.resetSetupAfterStructureAlteration("insert_row",t,i,null,r)),this.addHook("afterCreateCol",(t,i,r)=>this.endpoints.resetSetupAfterStructureAlteration("insert_col",t,i,null,r)),this.addHook("afterRemoveRow",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return e.endpoints.resetSetupAfterStructureAlteration("remove_row",...i)}),this.addHook("afterRemoveCol",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return e.endpoints.resetSetupAfterStructureAlteration("remove_col",...i)}),this.addHook("afterRowMove",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return gC(rb,e,tNe).call(e,...i)}),super.enablePlugin())}disablePlugin(){this.endpoints=null,this.settings=null,this.currentEndpoint=null,super.disablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),this.endpoints.initEndpoints(),super.updatePlugin()}calculate(e){switch(e.type.toLowerCase()){case"sum":e.result=this.calculateSum(e);break;case"min":e.result=this.calculateMinMax(e,e.type);break;case"max":e.result=this.calculateMinMax(e,e.type);break;case"count":e.result=this.countEntries(e);break;case"average":e.result=this.calculateAverage(e);break;case"custom":e.result=e.customFunction.call(this,e);break}}calculateSum(e){let t=0;return ut(e.ranges,i=>{t+=this.getPartialSum(i,e.sourceColumn)}),t}getPartialSum(e,t){let i=0,r=e[1]||e[0],s=null,o=0;do{if(s=this.getCellValue(r,t),s=oM(s)?null:s,s!==null){const a=(`${s}`.split(".")[1]||[]).length||1;a>o&&(o=a)}i+=s||0,r-=1}while(r>=e[0]);return Math.round(i*10**o)/10**o}calculateMinMax(e,t){let i=null;return ut(e.ranges,r=>{const s=this.getPartialMinMax(r,e.sourceColumn,t);if(i===null&&s!==null&&(i=s),s!==null)switch(t){case"min":i=Math.min(i,s);break;case"max":i=Math.max(i,s);break}}),i===null?"Not enough data":i}getPartialMinMax(e,t,i){let r=null,s=e[1]||e[0],o;do{if(o=this.getCellValue(s,t),o=oM(o)?null:o,r===null)r=o;else if(o!==null)switch(i){case"min":r=Math.min(r,o);break;case"max":r=Math.max(r,o);break}s-=1}while(s>=e[0]);return r}countEmpty(e,t){let i,r=0,s=e[1]||e[0];do i=this.getCellValue(s,t),i=oM(i)?null:i,i===null&&(r+=1),s-=1;while(s>=e[0]);return r}countEntries(e){let t=0;const i=e.ranges;return ut(i,r=>{const s=r[1]===void 0?1:r[1]-r[0]+1,o=this.countEmpty(r,e.sourceColumn);t+=s,t-=o}),t}calculateAverage(e){const t=this.calculateSum(e),i=this.countEntries(e);return t/i}getCellValue(e,t){const i=this.hot.toVisualRow(e),r=this.hot.toVisualColumn(t);let s=this.hot.getSourceDataAtCell(e,t),o="";if(i!==null&&r!==null&&(o=this.hot.getCellMeta(i,r).className||""),o.indexOf("columnSummaryResult")>-1)return null;if(this.endpoints.currentEndpoint.forceNumeric&&(typeof s=="string"&&(s=s.replace(/,/,".")),s=parseFloat(s)),isNaN(s)&&!this.endpoints.currentEndpoint.suppressDataTypeErrors)throw new Error(Kt`ColumnSummary plugin: cell at (${e}, ${t}) is not in a\x20
          numeric format. Cannot do the calculation.`);return s}}function QLe(){this.endpoints.initEndpoints()}function JLe(n){n.columns!==void 0&&this.endpoints.refreshCellMetas()}function eNe(n,e){n&&e!=="ColumnSummary.reset"&&e!=="ColumnSummary.set"&&e!=="loadData"&&this.endpoints.refreshChangedEndpoints(n)}function tNe(n,e){this.endpoints.resetSetupBeforeStructureAlteration("move_row",n[0],n.length,n,this.pluginName),this.endpoints.resetSetupAfterStructureAlteration("move_row",e,n.length,n,this.pluginName)}function nNe(n,e){zK(n,e),e.add(n)}function lM(n,e,t){zK(n,e),e.set(n,t)}function zK(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ng(n,e){return n.get(yH(n,e))}function jI(n,e,t){return n.set(yH(n,e),t),t}function yH(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var CR=new WeakMap,pC=new WeakMap,mC=new WeakMap,BW=new WeakSet;class UK{constructor(){nNe(this,BW),lM(this,CR,!0),lM(this,pC,null),lM(this,mC,new ResizeObserver(e=>yH(BW,this,iNe).call(this,e)))}setObservedElement(e){jI(pC,this,e)}unobserve(){Ng(mC,this).unobserve(Ng(pC,this))}observe(){jI(CR,this,!0),Ng(mC,this).observe(Ng(pC,this))}destroy(){Ng(mC,this).disconnect()}}function iNe(n){if(Ng(CR,this)||!Array.isArray(n)||!n.length){jI(CR,this,!1);return}n.forEach(e=>{let{borderBoxSize:t}=e;const{inlineSize:i,blockSize:r}=t[0];this.runLocalHooks("resize",i,r)})}qt(UK,Xi);function Bh(n,e,t){rNe(n,e),e.set(n,t)}function rNe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function tn(n,e){return n.get(GK(n,e))}function Hl(n,e,t){return n.set(GK(n,e),t),t}function GK(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var Vh=new WeakMap,cM=new WeakMap,$l=new WeakMap,Wh=new WeakMap,Kc=new WeakMap,bC=new WeakMap,lg=new WeakMap;class Ad{static get CLASS_EDITOR_CONTAINER(){return"htCommentsContainer"}static get CLASS_EDITOR(){return"htComments"}static get CLASS_INPUT(){return"htCommentTextArea"}static get CLASS_CELL(){return"htCommentCell"}constructor(e,t){var i=this;Bh(this,Vh,void 0),Bh(this,cM,!1),Bh(this,$l,null),Bh(this,Wh,void 0),Bh(this,Kc,void 0),Bh(this,bC,!0),Bh(this,lg,new UK),Hl(Vh,this,e),Hl(cM,this,t),Hl(Wh,this,this.createEditor()),Hl(Kc,this,tn(Wh,this).style),tn(lg,this).setObservedElement(this.getInputElement()),tn(lg,this).addLocalHook("resize",function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i.runLocalHooks("resize",...s)}),this.hide()}setPosition(e,t){tn(Kc,this).left=`${e}px`,tn(Kc,this).top=`${t}px`}setSize(e,t){if(e&&t){const i=this.getInputElement();i.style.width=`${e}px`,i.style.height=`${t}px`}}getSize(){return{width:gn(this.getInputElement()),height:ni(this.getInputElement())}}observeSize(){tn(lg,this).observe()}resetSize(){const e=this.getInputElement();e.style.width="",e.style.height=""}setReadOnlyState(e){const t=this.getInputElement();t.readOnly=e}show(){tn(Kc,this).display="block",Hl(bC,this,!1)}hide(){tn(lg,this).unobserve(),tn(bC,this)||(tn(Kc,this).display="none"),Hl(bC,this,!0)}isVisible(){return tn(Kc,this).display==="block"}setValue(){const t=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:"")||"";this.getInputElement().value=t}getValue(){return this.getInputElement().value}isFocused(){return tn(Vh,this).activeElement===this.getInputElement()}focus(){this.getInputElement().focus()}createEditor(){const e=tn(Vh,this).createElement("div"),t=tn(Vh,this).createElement("textarea");return e.style.display="none",Hl($l,this,tn(Vh,this).createElement("div")),tn($l,this).setAttribute("dir",tn(cM,this)?"rtl":"ltr"),ge(tn($l,this),Ad.CLASS_EDITOR_CONTAINER),tn(Vh,this).body.appendChild(tn($l,this)),ge(e,Ad.CLASS_EDITOR),ge(t,Ad.CLASS_INPUT),t.setAttribute("data-hot-input",!0),e.appendChild(t),tn($l,this).appendChild(e),e}getInputElement(){return tn(Wh,this).querySelector(`.${Ad.CLASS_INPUT}`)}destroy(){const e=tn($l,this)?tn($l,this).parentNode:null;tn(Wh,this).parentNode.removeChild(tn(Wh,this)),Hl(Wh,this,null),Hl(Kc,this,null),tn(lg,this).destroy(),e&&e.removeChild(tn($l,this))}}qt(Ad,Xi);function uM(n,e,t){return(e=sNe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function sNe(n){var e=oNe(n,"string");return typeof e=="symbol"?e:e+""}function oNe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const aNe=250,lNe=250;class YK{constructor(e){uM(this,"wasLastActionShow",!0),uM(this,"showDebounced",null),uM(this,"hidingTimer",null),this.updateDelay(e)}hide(){this.wasLastActionShow=!1,this.hidingTimer=setTimeout(()=>{this.wasLastActionShow===!1&&this.runLocalHooks("hide")},lNe)}show(e){this.wasLastActionShow=!0,this.showDebounced(e)}cancelHiding(){this.wasLastActionShow=!0,clearTimeout(this.hidingTimer),this.hidingTimer=null}updateDelay(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:aNe;this.showDebounced=tE(t=>{this.wasLastActionShow&&this.runLocalHooks("show",t.from.row,t.from.col)},e)}destroy(){this.clearLocalHooks()}}qt(YK,Xi);function cNe(n,e){return n.indexOf(e)!==-1?n:`${n.replace("htTop","").replace("htMiddle","").replace("htBottom","").replace("  ","")} ${e}`}function uNe(n,e){return n.indexOf(e)!==-1?n:`${n.replace("htLeft","").replace("htCenter","").replace("htRight","").replace("htJustify","").replace("  ","")} ${e}`}function jh(n,e){const t={};return q(n,i=>{i.forAll((r,s)=>{r>=0&&s>=0&&(t[r]||(t[r]=[]),t[r][s]=e(r,s))})}),t}function lu(n,e,t,i,r){q(n,s=>{s.forAll((o,a)=>{o>=0&&a>=0&&hNe(o,a,e,t,i,r)})})}function hNe(n,e,t,i,r,s){const o=r(n,e);let a=i;o.className&&(t==="vertical"?a=cNe(o.className,i):a=uNe(o.className,i)),s(n,e,"className",a)}function Ql(n){return`<span class="selected">✓</span>${n}`}function Lv(n,e){let t=!1;return Array.isArray(n)&&q(n,i=>(i.forAll((r,s)=>{if(r>=0&&s>=0&&e(r,s))return t=!0,!1}),t)),t}function yE(n,e){const t={top:0,left:0};if(e!==n.ownerDocument){const{frameElement:i}=e.defaultView,{top:r,left:s}=i.getBoundingClientRect();t.top=r,t.left=s}return t}function dNe(n){return function(e,t){const i=this.getCellMeta(e,t).className;return i&&i.indexOf(n)!==-1}}function Br(n,e){return Lv(n.getSelectedRange(),dNe(e).bind(n))}const ft="---------";function fNe(){return{name:ft}}const Gs="alignment";function gNe(){return{key:Gs,name(){return this.getTranslatedPhrase(sN)},disabled(){if(this.countRows()===0||this.countCols()===0)return!0;const n=this.getSelectedRangeLast();return!n||n.isSingleHeader()?!0:!(this.getSelectedRange()&&!this.selection.isSelectedByCorner())},submenu:{items:[{key:`${Gs}:left`,checkable:!0,ariaLabel(){return this.getTranslatedPhrase(aR)},ariaChecked(){return Br(this,"htLeft")},name(){let n=this.getTranslatedPhrase(aR);return Br(this,"htLeft")&&(n=Ql(n)),n},callback(){const n=this.getSelectedRange(),e=jh(n,(r,s)=>this.getCellMeta(r,s).className),t="horizontal",i="htLeft";this.runHooks("beforeCellAlignment",e,n,t,i),lu(n,t,i,(r,s)=>this.getCellMeta(r,s),(r,s,o,a)=>this.setCellMeta(r,s,o,a)),this.render()},disabled:!1},{key:`${Gs}:center`,checkable:!0,ariaLabel(){return this.getTranslatedPhrase(lR)},ariaChecked(){return Br(this,"htCenter")},name(){let n=this.getTranslatedPhrase(lR);return Br(this,"htCenter")&&(n=Ql(n)),n},callback(){const n=this.getSelectedRange(),e=jh(n,(r,s)=>this.getCellMeta(r,s).className),t="horizontal",i="htCenter";this.runHooks("beforeCellAlignment",e,n,t,i),lu(n,t,i,(r,s)=>this.getCellMeta(r,s),(r,s,o,a)=>this.setCellMeta(r,s,o,a)),this.render()},disabled:!1},{key:`${Gs}:right`,checkable:!0,ariaLabel(){return this.getTranslatedPhrase(cR)},ariaChecked(){return Br(this,"htRight")},name(){let n=this.getTranslatedPhrase(cR);return Br(this,"htRight")&&(n=Ql(n)),n},callback(){const n=this.getSelectedRange(),e=jh(n,(r,s)=>this.getCellMeta(r,s).className),t="horizontal",i="htRight";this.runHooks("beforeCellAlignment",e,n,t,i),lu(n,t,i,(r,s)=>this.getCellMeta(r,s),(r,s,o,a)=>this.setCellMeta(r,s,o,a)),this.render()},disabled:!1},{key:`${Gs}:justify`,checkable:!0,ariaLabel(){return this.getTranslatedPhrase(uR)},ariaChecked(){return Br(this,"htJustify")},name(){let n=this.getTranslatedPhrase(uR);return Br(this,"htJustify")&&(n=Ql(n)),n},callback(){const n=this.getSelectedRange(),e=jh(n,(r,s)=>this.getCellMeta(r,s).className),t="horizontal",i="htJustify";this.runHooks("beforeCellAlignment",e,n,t,i),lu(n,t,i,(r,s)=>this.getCellMeta(r,s),(r,s,o,a)=>this.setCellMeta(r,s,o,a)),this.render()},disabled:!1},{name:ft},{key:`${Gs}:top`,checkable:!0,ariaLabel(){return this.getTranslatedPhrase(hR)},ariaChecked(){return Br(this,"htTop")},name(){let n=this.getTranslatedPhrase(hR);return Br(this,"htTop")&&(n=Ql(n)),n},callback(){const n=this.getSelectedRange(),e=jh(n,(r,s)=>this.getCellMeta(r,s).className),t="vertical",i="htTop";this.runHooks("beforeCellAlignment",e,n,t,i),lu(n,t,i,(r,s)=>this.getCellMeta(r,s),(r,s,o,a)=>this.setCellMeta(r,s,o,a)),this.render()},disabled:!1},{key:`${Gs}:middle`,checkable:!0,ariaLabel(){return this.getTranslatedPhrase(dR)},ariaChecked(){return Br(this,"htMiddle")},name(){let n=this.getTranslatedPhrase(dR);return Br(this,"htMiddle")&&(n=Ql(n)),n},callback(){const n=this.getSelectedRange(),e=jh(n,(r,s)=>this.getCellMeta(r,s).className),t="vertical",i="htMiddle";this.runHooks("beforeCellAlignment",e,n,t,i),lu(n,t,i,(r,s)=>this.getCellMeta(r,s),(r,s,o,a)=>this.setCellMeta(r,s,o,a)),this.render()},disabled:!1},{key:`${Gs}:bottom`,checkable:!0,ariaLabel(){return this.getTranslatedPhrase(fR)},ariaChecked(){return Br(this,"htBottom")},name(){let n=this.getTranslatedPhrase(fR);return Br(this,"htBottom")&&(n=Ql(n)),n},callback(){const n=this.getSelectedRange(),e=jh(n,(r,s)=>this.getCellMeta(r,s).className),t="vertical",i="htBottom";this.runHooks("beforeCellAlignment",e,n,t,i),lu(n,t,i,(r,s)=>this.getCellMeta(r,s),(r,s,o,a)=>this.setCellMeta(r,s,o,a)),this.render()},disabled:!1}]}}}const CE="clear_column";function pNe(){return{key:CE,name(){return this.getTranslatedPhrase(UL)},callback(n,e){const t=e[0].start.col,i=e[0].end.col;this.countRows()&&this.populateFromArray(0,t,[[null]],Math.max(e[0].start.row,e[0].end.row),i,"ContextMenu.clearColumn")},disabled(){const n=this.getSelectedRangeLast();return!n||n.isSingleHeader()&&n.highlight.col<0?!0:!this.selection.isSelectedByColumnHeader()}}}const xy="col_left";function mNe(){return{key:xy,name(){return this.getTranslatedPhrase(FL)},callback(){const n=this.getSelectedRangeLast().getTopLeftCorner(),e=this.isRtl()?"insert_col_end":"insert_col_start";this.alter(e,n.col,1,"ContextMenu.columnLeft")},disabled(){if(!this.isColumnModificationAllowed())return!0;const n=this.getSelectedRangeLast();return!n||n.isSingleHeader()&&n.highlight.col<0?!0:this.selection.isSelectedByCorner()?this.countCols()===0:this.selection.isSelectedByRowHeader()||this.countCols()>=this.getSettings().maxCols},hidden(){return!this.getSettings().allowInsertColumn}}}const Ty="col_right";function bNe(){return{key:Ty,name(){return this.getTranslatedPhrase(BL)},callback(){const n=this.getSelectedRangeLast().getTopRightCorner(),e=this.isRtl()?"insert_col_start":"insert_col_end";this.alter(e,n.col,1,"ContextMenu.columnRight")},disabled(){if(!this.isColumnModificationAllowed())return!0;const n=this.getSelectedRangeLast();return!n||n.isSingleHeader()&&n.highlight.col<0?!0:this.selection.isSelectedByCorner()?!1:this.selection.isSelectedByRowHeader()||this.countCols()>=this.getSettings().maxCols},hidden(){return!this.getSettings().allowInsertColumn}}}const My="make_read_only";function vNe(){return{key:My,checkable:!0,ariaChecked(){return Lv(this.getSelectedRange(),(e,t)=>this.getCellMeta(e,t).readOnly)},ariaLabel(){return this.getTranslatedPhrase(oR)},name(){let n=this.getTranslatedPhrase(oR);return Lv(this.getSelectedRange(),(t,i)=>this.getCellMeta(t,i).readOnly)&&(n=Ql(n)),n},callback(){const n=this.getSelectedRange(),e=Lv(n,(t,i)=>this.getCellMeta(t,i).readOnly);q(n,t=>{t.forAll((i,r)=>{i>=0&&r>=0&&this.setCellMeta(i,r,"readOnly",!e)})}),this.render()},disabled(){const n=this.getSelectedRangeLast();return!!(!n||n.isSingleHeader()||this.selection.isSelectedByCorner()||this.countRows()===0||this.countCols()===0||!this.getSelectedRange()||this.getSelectedRange().length===0)}}}const SE="redo";function wNe(){return{key:SE,name(){return this.getTranslatedPhrase(zL)},callback(){this.redo()},hidden(){const n=this.getPlugin("undoRedo");return!n||!n.isEnabled()},disabled(){return!this.getPlugin("undoRedo").isRedoAvailable()}}}const Ay="remove_col";function yNe(){return{key:Ay,name(){const n=this.getSelected();let e=0;if(n)if(n.length>1)e=1;else{const[,t,,i]=n[0];t-i!==0&&(e=1)}return this.getTranslatedPhrase(WL,e)},callback(){this.alter("remove_col",lPe(this),null,"ContextMenu.removeColumn")},disabled(){if(!this.isColumnModificationAllowed())return!0;const n=this.getSelectedRangeLast();if(!n||n.isSingleHeader()&&n.highlight.col<0)return!0;const e=this.countCols();return this.selection.isSelectedByCorner()?e===0:this.selection.isSelectedByRowHeader()||e===0},hidden(){return!this.getSettings().allowRemoveColumn}}}const _E="remove_row";function CNe(){return{key:_E,name(){const n=this.getSelected();let e=0;if(n)if(n.length>1)e=1;else{const[t,,i]=n[0];t-i!==0&&(e=1)}return this.getTranslatedPhrase(VL,e)},callback(){this.alter("remove_row",cPe(this),1,"ContextMenu.removeRow")},disabled(){const n=this.getSelectedRangeLast();if(!n||n.isSingleHeader()&&n.highlight.row<0)return!0;const e=this.countRows();return this.selection.isSelectedByCorner()?e===0:this.selection.isSelectedByColumnHeader()||e===0},hidden(){return!this.getSettings().allowRemoveRow}}}const RE="row_above";function SNe(){return{key:RE,name(){return this.getTranslatedPhrase(HL)},callback(){const n=this.getSelectedRangeLast().getTopLeftCorner();this.alter("insert_row_above",n.row,1,"ContextMenu.rowAbove")},disabled(){const n=this.getSelectedRangeLast();return!n||n.isSingleHeader()&&n.highlight.row<0?!0:this.selection.isSelectedByCorner()?this.countRows()===0:this.selection.isSelectedByColumnHeader()||this.countRows()>=this.getSettings().maxRows},hidden(){return!this.getSettings().allowInsertRow}}}const EE="row_below";function _Ne(){return{key:EE,name(){return this.getTranslatedPhrase($L)},callback(){const n=this.getSelectedRangeLast().getBottomRightCorner();this.alter("insert_row_below",n.row,1,"ContextMenu.rowBelow")},disabled(){const n=this.getSelectedRangeLast();return!n||n.isSingleHeader()&&n.highlight.row<0?!0:this.selection.isSelectedByCorner()?!1:this.selection.isSelectedByColumnHeader()||this.countRows()>=this.getSettings().maxRows},hidden(){return!this.getSettings().allowInsertRow}}}const Aw="no_items";function RNe(){return{key:Aw,name(){return this.getTranslatedPhrase(NL)},disabled:!0,isCommand:!1}}const xE="undo";function ENe(){return{key:xE,name(){return this.getTranslatedPhrase(jL)},callback(){this.undo()},hidden(){const n=this.getPlugin("undoRedo");return!n||!n.isEnabled()},disabled(){return!this.getPlugin("undoRedo").isUndoAvailable()}}}const xNe=[RE,EE,xy,Ty,CE,_E,Ay,xE,SE,My,Gs,ft,Aw],TNe={[ft]:fNe,[Aw]:RNe,[RE]:SNe,[EE]:_Ne,[xy]:mNe,[Ty]:bNe,[CE]:pNe,[_E]:CNe,[Ay]:yNe,[xE]:ENe,[SE]:wNe,[My]:vNe,[Gs]:gNe};function KK(){const n={};return ut(TNe,(e,t)=>{n[t]=e()}),n}function MNe(n){return{key:"commentsAddEdit",name(){var e;const t=(e=this.getSelectedRangeLast())===null||e===void 0?void 0:e.highlight;return t!=null&&t.isCell()&&n.getCommentAtCell(t.row,t.col)?this.getTranslatedPhrase(nN):this.getTranslatedPhrase(tN)},callback(){const e=this.getSelectedRangeLast();n.setRange(e),n.show(),n.focusEditor()},disabled(){const e=this.getSelectedRangeLast();return!!(!e||e.highlight.isHeader()||this.selection.isEntireRowSelected()&&this.selection.isEntireColumnSelected()||this.countRenderedRows()===0||this.countRenderedCols()===0)}}}function ANe(n){return{key:"commentsRemove",name(){return this.getTranslatedPhrase(iN)},callback(){this.getSelectedRangeLast().forAll((t,i)=>{t>=0&&i>=0&&n.removeCommentAtCell(t,i,!1)}),this.render()},disabled(){const e=this.getSelectedRangeLast();return!!(!e||e.highlight.isHeader()||this.selection.isEntireRowSelected()&&this.selection.isEntireColumnSelected()||this.countRenderedRows()===0||this.countRenderedCols()===0)}}}function PNe(n){return{key:"commentsReadOnly",name(){const e=this.getTranslatedPhrase(rN);return Lv(this.getSelectedRange(),(i,r)=>n.getCommentMeta(i,r,FS))?Ql(e):e},callback(){this.getSelectedRangeLast().forAll((t,i)=>{if(t>=0&&i>=0){const r=!!n.getCommentMeta(t,i,FS);n.updateCommentMeta(t,i,{[FS]:!r})}})},disabled(){const e=this.getSelectedRangeLast();return!!(!e||e.highlight.isHeader()||!n.getCommentAtCell(e.highlight.row,e.highlight.col)||this.selection.isEntireRowSelected()&&this.selection.isEntireColumnSelected()||this.countRenderedRows()===0||this.countRenderedCols()===0)}}}function INe(n,e){qK(n,e),e.add(n)}function cg(n,e,t){qK(n,e),e.set(n,t)}function qK(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ONe(n,e,t){return(e=kNe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function kNe(n){var e=DNe(n,"string");return typeof e=="symbol"?e:e+""}function DNe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Au(n,e,t){return n.set(Ho(n,e),t),t}function mt(n,e){return n.get(Ho(n,e))}function Ho(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const Nv="comments",LNe=60,Jl="comment",Xb="value",XK="style",FS="readOnly",vC=Nv,zI=`plugin:${Nv}`;var rn=new WeakMap,Da=new WeakMap,TE=new WeakMap,BS=new WeakMap,UI=new WeakMap,SR=new WeakMap,Ca=new WeakSet;class NNe extends Ht{constructor(){super(...arguments),INe(this,Ca),ONe(this,"range",{}),cg(this,rn,null),cg(this,Da,null),cg(this,TE,!1),cg(this,BS,!1),cg(this,UI,null),cg(this,SR,"")}static get PLUGIN_KEY(){return Nv}static get PLUGIN_PRIORITY(){return LNe}isEnabled(){return!!this.hot.getSettings()[Nv]}enablePlugin(){var e=this;this.enabled||(mt(rn,this)||(Au(rn,this,new Ad(this.hot.rootDocument,this.hot.isRtl())),mt(rn,this).addLocalHook("resize",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Ho(Ca,e,jNe).call(e,...i)})),mt(Da,this)||Au(Da,this,new YK(this.getDisplayDelaySetting())),this.addHook("afterContextMenuDefaultOptions",t=>this.addToContextMenu(t)),this.addHook("afterRenderer",(t,i,r,s,o,a)=>Ho(Ca,this,BNe).call(this,t,a)),this.addHook("afterScroll",()=>Ho(Ca,this,UNe).call(this)),this.addHook("afterBeginEditing",()=>this.hide()),this.addHook("afterDocumentKeyDown",t=>Ho(Ca,this,zNe).call(this,t)),mt(Da,this).addLocalHook("hide",()=>this.hide()),mt(Da,this).addLocalHook("show",(t,i)=>this.showAtCell(t,i)),this.registerShortcuts(),this.registerListeners(),super.enablePlugin())}updatePlugin(){mt(Da,this).updateDelay(this.getDisplayDelaySetting()),super.updatePlugin()}disablePlugin(){this.unregisterShortcuts(),super.disablePlugin()}registerShortcuts(){const e=this.hot.getShortcutManager(),t=e.getContext("grid"),i=e.addContext(zI);t.addShortcut({keys:[["Control","Alt","M"]],callback:()=>{const r=this.hot.getSelectedRangeLast();Au(BS,this,!0),this.hot.scrollToFocusedCell(()=>{this.setRange(r),this.show(),this.focusEditor(),e.setActiveContextName(zI),this.hot._registerTimeout(()=>{Au(BS,this,!1)})})},stopPropagation:!0,runOnlyIf:()=>{var r;return((r=this.hot.getSelectedRangeLast())===null||r===void 0?void 0:r.highlight.isCell())&&!mt(rn,this).isVisible()},group:vC}),i.addShortcut({keys:[["Escape"]],callback:()=>{mt(rn,this).setValue(mt(SR,this)),this.hide(),e.setActiveContextName("grid")},runOnlyIf:()=>mt(rn,this).isVisible()&&mt(rn,this).isFocused(),group:vC}),i.addShortcut({keys:[["Control/Meta","Enter"]],callback:()=>{this.hide(),e.setActiveContextName("grid")},runOnlyIf:()=>mt(rn,this).isVisible()&&mt(rn,this).isFocused(),group:vC})}unregisterShortcuts(){this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup(vC)}registerListeners(){const{rootDocument:e}=this.hot,t=this.getEditorInputElement();this.eventManager.addEventListener(e,"mouseover",i=>Ho(Ca,this,$Ne).call(this,i)),this.eventManager.addEventListener(e,"mousedown",i=>Ho(Ca,this,HNe).call(this,i)),this.eventManager.addEventListener(e,"mouseup",()=>Ho(Ca,this,FNe).call(this)),this.eventManager.addEventListener(t,"focus",()=>Ho(Ca,this,WNe).call(this)),this.eventManager.addEventListener(t,"blur",()=>Ho(Ca,this,VNe).call(this))}setRange(e){this.range=e}clearRange(){this.range={}}targetIsCellWithComment(e){const t=Yu(e.target,"TD","TBODY");return!!(t&&Ue(t,"htCommentCell")&&Yu(t,[this.hot.rootElement]))}targetIsCommentTextArea(e){return this.getEditorInputElement()===e.target}setComment(e){if(!this.range.from)throw new Error('Before using this method, first set cell range (hot.getPlugin("comment").setRange())');const t=mt(rn,this).getValue();let i="";e!=null?i=e:t!=null&&(i=t);const r=this.range.from.row,s=this.range.from.col;this.updateCommentMeta(r,s,{[Xb]:i}),this.hot.render()}setCommentAtCell(e,t,i){this.setRange({from:this.hot._createCellCoords(e,t)}),this.setComment(i)}removeComment(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;if(!this.range.from)throw new Error('Before using this method, first set cell range (hot.getPlugin("comment").setRange())');this.hot.setCellMeta(this.range.from.row,this.range.from.col,Jl),e&&this.hot.render(),this.hide()}removeCommentAtCell(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;this.setRange({from:this.hot._createCellCoords(e,t)}),this.removeComment(i)}getComment(){const e=this.range.from.row,t=this.range.from.col;return this.getCommentMeta(e,t,Xb)}getCommentAtCell(e,t){return this.getCommentMeta(e,t,Xb)}show(){var e;if(!this.range.from)throw new Error('Before using this method, first set cell range (hot.getPlugin("comment").setRange())');const{from:{row:t,col:i}}=this.range;if(t<0||t>this.hot.countSourceRows()-1||i<0||i>this.hot.countSourceCols()-1)return!1;const r=this.hot.getCellMeta(this.range.from.row,this.range.from.col);return mt(Da,this).cancelHiding(),mt(rn,this).setValue((e=r[Jl]?r[Jl][Xb]:null)!==null&&e!==void 0?e:""),mt(rn,this).show(),this.refreshEditor(!0),!0}showAtCell(e,t){return this.setRange({from:this.hot._createCellCoords(e,t)}),this.show()}hide(){mt(rn,this).hide()}refreshEditor(){var e,t;if(!(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&(!this.range.from||!mt(rn,this).isVisible()))return;const{rowIndexMapper:r,columnIndexMapper:s}=this.hot,{row:o,col:a}=this.range.from;let l=r.getRenderableFromVisualIndex(o),c=s.getRenderableFromVisualIndex(a);const u=l===null;mt(rn,this).setPosition(0,0),l===null&&(l=r.getRenderableFromVisualIndex(r.getNearestNotHiddenIndex(o,-1))),c===null&&(c=s.getRenderableFromVisualIndex(s.getNearestNotHiddenIndex(a,-1)));const h=l===null,d=c===null;l=(e=l)!==null&&e!==void 0?e:0,c=(t=c)!==null&&t!==void 0?t:0;const{rootWindow:f,view:{_wt:g}}=this.hot,{wtTable:p}=g,m=g.getCell({row:l,col:c},!0),v=this.getCommentMeta(o,a,XK);v?mt(rn,this).setSize(v.width,v.height):mt(rn,this).resetSize();const y=d?0:p.getStretchedColumnWidth(c),w=u&&!h?ni(m):0,{left:R,top:x,width:S,height:T}=m.getBoundingClientRect(),{width:P,height:E}=mt(rn,this).getSize(),{innerWidth:A,innerHeight:L}=this.hot.rootWindow,W=this.hot.rootDocument.documentElement;let F=R+f.scrollX+y,V=x+f.scrollY+w;this.hot.isRtl()&&(F-=P+y),this.hot.isLtr()&&R+S+P>A?F=R+f.scrollX-P-1:this.hot.isRtl()&&F<-(W.scrollWidth-W.clientWidth)&&(F=R+f.scrollX+y+1),x+E>L&&(V-=E-T+1),mt(rn,this).setPosition(F,V),mt(rn,this).setReadOnlyState(this.getCommentMeta(o,a,FS)),mt(rn,this).observeSize()}focusEditor(){mt(rn,this).focus()}updateCommentMeta(e,t,i){const r=this.hot.getCellMeta(e,t)[Jl];let s;r?(s=mr(r),vy(s,i)):s=i,this.hot.setCellMeta(e,t,Jl,s)}getCommentMeta(e,t,i){const r=this.hot.getCellMeta(e,t);if(r[Jl])return r[Jl][i]}addToContextMenu(e){e.items.push({name:ft},MNe(this),ANe(this),PNe(this))}getDisplayDelaySetting(){const e=this.hot.getSettings()[Nv];if(ct(e))return e.displayDelay}getEditorInputElement(){return mt(rn,this).getInputElement()}destroy(){var e,t;(e=mt(rn,this))===null||e===void 0||e.destroy(),(t=mt(Da,this))===null||t===void 0||t.destroy(),super.destroy()}}function HNe(n){if(!(!this.hot.view||!this.hot.view._wt)&&!mt(TE,this)&&!this.targetIsCommentTextArea(n)){const e=Yu(n.target,"TD","TBODY");let t=null;e&&(t=this.hot.getCoords(e)),(!e||this.range.from&&t&&(this.range.from.row!==t.row||this.range.from.col!==t.col))&&this.hide()}}function $Ne(n){const{rootDocument:e}=this.hot;if(!(mt(TE,this)||mt(rn,this).isFocused()||Ue(n.target,"wtBorder")||mt(UI,this)===n.target||!mt(rn,this)))if(Au(UI,this,e.elementFromPoint(n.clientX,n.clientY)),this.targetIsCellWithComment(n)){const t=this.hot._createCellRange(this.hot.getCoords(n.target));mt(Da,this).show(t)}else Nu(n.target,e)&&!this.targetIsCommentTextArea(n)&&mt(Da,this).hide()}function FNe(){Au(TE,this,!1)}function BNe(n,e){e[Jl]&&e[Jl][Xb]&&ge(n,e.commentedCellClassName)}function VNe(){Au(SR,this,""),this.hot.getShortcutManager().setActiveContextName("grid"),this.setComment()}function WNe(){Au(SR,this,this.getComment()),this.hot.listen(),this.hot.getShortcutManager().setActiveContextName(zI)}function jNe(n,e){this.updateCommentMeta(this.range.from.row,this.range.from.col,{[XK]:{width:n,height:e}})}function zNe(n){mt(rn,this).isVisible()&&bo(n)}function UNe(){mt(BS,this)||this.hide()}var VW=D1,GNe=TypeError,YNe=function(n,e){if(!delete n[e])throw new GNe("Cannot delete property "+VW(e)+" of "+VW(n))},KNe=qi,qNe=ry,XNe=ay,ZNe=iG,QNe=YNe,JNe=rG,eHe=[].unshift(0)!==1,tHe=function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(n){return n instanceof TypeError}},nHe=eHe||!tHe();KNe({target:"Array",proto:!0,arity:1,forced:nHe},{unshift:function(e){var t=qNe(this),i=XNe(t),r=arguments.length;if(r){JNe(i+r);for(var s=i;s--;){var o=s+r;s in t?t[o]=t[s]:QNe(t,o)}for(var a=0;a<r;a++)t[a]=arguments[a]}return ZNe(t,i+r)}});function hM(n,e,t){return(e=iHe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function iHe(n){var e=rHe(n,"string");return typeof e=="symbol"?e:e+""}function rHe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class ZK{constructor(e){hM(this,"hot",void 0),hM(this,"commands",{}),hM(this,"commonCallback",null),this.hot=e}registerCommand(e,t){this.commands[e]=t}setCommonCallback(e){this.commonCallback=e}execute(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];const s=e.split(":"),o=s[0],a=s.length===2?s[1]:null;let l=this.commands[o];if(!l)throw new Error(`Menu command '${o}' not exists.`);if(a&&l.submenu&&(l=sHe(a,l.submenu.items)),l.disabled===!0||typeof l.disabled=="function"&&l.disabled.call(this.hot)===!0||kn(l,"submenu"))return;const c=[];typeof l.callback=="function"&&c.push(l.callback),typeof this.commonCallback=="function"&&c.push(this.commonCallback),i.unshift(s.join(":")),q(c,u=>u.apply(this.hot,i))}}function sHe(n,e){let t;return q(e,i=>{const r=i.key?i.key.split(":"):null;if(Array.isArray(r)&&r[1]===n)return t=i,!1}),t}function dM(n,e,t){return(e=oHe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function oHe(n){var e=aHe(n,"string");return typeof e=="symbol"?e:e+""}function aHe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class QK{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;dM(this,"hot",void 0),dM(this,"predefinedItems",KK()),dM(this,"defaultOrderPattern",void 0),this.hot=e,this.defaultOrderPattern=t}setPredefinedItems(e){const t={};this.defaultOrderPattern.length=0,ut(e,(i,r)=>{let s="";i.name===ft?(t[ft]=i,s=ft):isNaN(parseInt(r,10))?(i.key=i.key===void 0?r:i.key,t[r]=i,s=i.key):(t[i.key]=i,s=i.key),this.defaultOrderPattern.push(s)}),this.predefinedItems=t}getItems(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return lHe(e,this.defaultOrderPattern,this.predefinedItems)}}function lHe(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=[];let r=n;return r&&r.items?r=r.items:Array.isArray(r)||(r=e),ct(r)?ut(r,(s,o)=>{let a=t[typeof s=="string"?s:o];a||(a=s),ct(s)?li(a,s):typeof a=="string"&&(a={name:a}),a.key===void 0&&(a.key=o),i.push(a)}):q(r,(s,o)=>{let a=t[s];!a&&xNe.indexOf(s)>=0||(a||(a={name:s,key:`${o}`}),ct(s)&&li(a,s),a.key===void 0&&(a.key=o),i.push(a))}),i}function qc(n,e,t){return(e=cHe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function cHe(n){var e=uHe(n,"string");return typeof e=="symbol"?e:e+""}function uHe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class hHe{constructor(e,t){qc(this,"top",void 0),qc(this,"topRelative",void 0),qc(this,"left",void 0),qc(this,"leftRelative",void 0),qc(this,"scrollTop",void 0),qc(this,"scrollLeft",void 0),qc(this,"cellHeight",void 0),qc(this,"cellWidth",void 0);const i=t.scrollY,r=t.scrollX;let s,o,a,l,c,u;this.rootWindow=t,this.type=this.getSourceType(e),this.type==="literal"?(s=parseInt(e.top,10),a=parseInt(e.left,10),c=e.height||0,u=e.width||0,o=s,l=a,s+=i,a+=r):this.type==="event"&&(s=parseInt(e.pageY,10),a=parseInt(e.pageX,10),c=e.target.clientHeight,u=e.target.clientWidth,o=s-i,l=a-r),this.top=s,this.topRelative=o,this.left=a,this.leftRelative=l,this.scrollTop=i,this.scrollLeft=r,this.cellHeight=c,this.cellWidth=u}getSourceType(e){let t="literal";return e instanceof Event&&(t="event"),t}fitsAbove(e){return this.topRelative>=e.offsetHeight}fitsBelow(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.rootWindow.innerHeight;return this.topRelative+e.offsetHeight<=t}fitsOnRight(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.rootWindow.innerWidth;return this.leftRelative+this.cellWidth+e.offsetWidth<=t}fitsOnLeft(e){return this.leftRelative>=e.offsetWidth}}function sb(n,e,t){dHe(n,e),e.set(n,t)}function dHe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ct(n,e){return n.get(JK(n,e))}function wC(n,e,t){return n.set(JK(n,e),t),t}function JK(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var yr=new WeakMap,Xc=new WeakMap,Vr=new WeakMap,fM=new WeakMap,ug=new WeakMap;class fHe{constructor(e){sb(this,yr,void 0),sb(this,Xc,void 0),sb(this,Vr,void 0),sb(this,fM,!1),sb(this,ug,{above:0,below:0,left:0,right:0}),wC(fM,this,e)}setOffset(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Ct(ug,this)[e]=t,this}setElement(e){return wC(yr,this,e),this}setParentElement(e){return wC(Xc,this,e),this}updatePosition(e){wC(Vr,this,new hHe(e,Ct(yr,this).ownerDocument.defaultView)),Ct(fM,this)?(Ct(Vr,this).fitsBelow(Ct(yr,this))?this.setPositionBelowCursor():Ct(Vr,this).fitsAbove(Ct(yr,this))?this.setPositionAboveCursor():this.setPositionBelowCursor(),this.updateHorizontalPosition()):(this.setPositionBelowCursor(),this.setPositionOnRightOfCursor())}updateHorizontalPosition(){Ct(yr,this).dir==="rtl"?Ct(Vr,this).fitsOnLeft(Ct(yr,this))?this.setPositionOnLeftOfCursor():this.setPositionOnRightOfCursor():Ct(Vr,this).fitsOnRight(Ct(yr,this))?this.setPositionOnRightOfCursor():this.setPositionOnLeftOfCursor()}setPositionAboveCursor(){let e=Ct(ug,this).above+Ct(Vr,this).top-Ct(yr,this).offsetHeight;Ct(Xc,this)&&(e=Ct(Vr,this).top+Ct(Vr,this).cellHeight-Ct(yr,this).offsetHeight+3),Ct(yr,this).style.top=`${e}px`}setPositionBelowCursor(){let e=Ct(ug,this).below+Ct(Vr,this).top+1;Ct(Xc,this)&&(e=Ct(Vr,this).top-1),Ct(yr,this).style.top=`${e}px`}setPositionOnRightOfCursor(){let e=Ct(Vr,this).left;if(Ct(Xc,this)){const t=Number.parseInt(getComputedStyle(Ct(Xc,this).querySelector(".htCore")).borderRightWidth,10);e+=Ct(Vr,this).cellWidth+t}else e+=Ct(ug,this).right;Ct(yr,this).style.left=`${e}px`}setPositionOnLeftOfCursor(){let e=Ct(ug,this).left+Ct(Vr,this).left-Ct(yr,this).offsetWidth;if(Ct(Xc,this)){const t=Number.parseInt(getComputedStyle(Ct(Xc,this).querySelector(".htCore")).borderLeftWidth,10);e-=t}Ct(yr,this).style.left=`${e}px`}}function eq(n){let{initialPage:e=-1,size:t=()=>0,onItemSelect:i=()=>{},onClear:r=()=>{}}=n;const s=new Set;let o=Gt(e,-1,g()-1);function a(m,v){const y=g()-1;return m<0&&(m=y),m>y&&(m=0),s.has(m)?-1:(s.add(m),i(m,!1)===!1&&(m=a(v===1?++m:--m,v)),m)}function l(m){m>-1&&m<g()&&i(m,!0)!==!1&&(o=m)}function c(){return o}function u(){g()>0&&(s.clear(),o=a(0,1))}function h(){g()>0&&(s.clear(),o=a(g()-1,-1))}function d(){g()>0&&(s.clear(),o=a(++o,1))}function f(){g()>0&&(s.clear(),o=a(--o,-1))}function g(){return Math.max(t(),0)}function p(){s.clear(),o=e,r()}return{setCurrentPage:l,getCurrentPage:c,toFirstItem:u,toLastItem:h,toNextItem:d,toPreviousItem:f,getSize:g,clear:p}}function gHe(n){return vt(n,e=>({start:e.getTopStartCorner(),end:e.getBottomEndCorner()}))}function GI(n){return kn(n,"submenu")}function YI(n){return new RegExp(ft,"i").test(n.name)}function VS(n,e){return n.disabled===!0||typeof n.disabled=="function"&&n.disabled.call(e)===!0}function WW(n){return kn(n,"disableSelection")}function pHe(n){return Ue(n,"htSeparator")}function mHe(n){return Ue(n,"htSubmenu")}function bHe(n){return Ue(n,"htDisabled")}function vHe(n){return Ue(n,"htSelectionDisabled")}function wHe(n,e){return!n.hidden||!(typeof n.hidden=="function"&&n.hidden.call(e))}function tq(n,e){const t=n.slice(0);for(let i=0;i<t.length&&t[i].name===e;)t.shift();return t}function yHe(n,e){let t=n.slice(0);return t.reverse(),t=tq(t,e),t.reverse(),t}function CHe(n){const e=[];return q(n,(t,i)=>{i>0?e[e.length-1].name!==t.name&&e.push(t):e.push(t)}),e}function SHe(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ft,t=n.slice(0);return t=tq(t,e),t=yHe(t,e),t=CHe(t),t}function _He(n){return n.checkable===!0}function RHe(n){return eq({size:()=>n.countRows(),onItemSelect(e,t){const i=n.getCell(e,0);if(!i||pHe(i)||bHe(i)||vHe(i))return!1;n.selectCell(e,0,...t?[e,0,!1,!1]:[])},onClear(){n.deselectCell()}})}function EHe(n){const{hot:e,hotMenu:t}=n;return[{keys:[["Control/Meta","A"]],forwardToContext:e.getShortcutManager().getContext("grid"),callback:()=>n.close(!0)},{keys:[["Tab"],["Shift","Tab"]],callback:(i,r)=>{const s=e.getSettings(),o=typeof s.tabMoves=="function"?s.tabMoves(i):s.tabMoves;r.includes("shift")?e.selection.transformStart(-o.row,-o.col):e.selection.transformStart(o.row,o.col),n.close(!0)}},{keys:[["Escape"]],callback:()=>n.close()},{keys:[["ArrowDown"]],callback:()=>n.getNavigator().toNextItem()},{keys:[["ArrowUp"]],callback:()=>n.getNavigator().toPreviousItem()},{keys:[["ArrowRight"]],callback:()=>{const i=t.getSelectedLast();if(i){const r=n.openSubMenu(i[0]);r&&r.getNavigator().toFirstItem()}}},{keys:[["ArrowLeft"]],callback:()=>{t.getSelectedLast()&&n.isSubMenu()&&(n.close(),n.isSubMenu()&&n.parentMenu.hotMenu.listen())}},{keys:[["Control/Meta","ArrowUp"],["Home"]],callback:()=>n.getNavigator().toFirstItem()},{keys:[["Control/Meta","ArrowDown"],["End"]],callback:()=>n.getNavigator().toLastItem()},{keys:[["Enter"],["Space"]],callback:i=>{const r=t.getSelectedLast();r&&(t.getSourceDataAtRow(r[0]).submenu?n.openSubMenu(r[0]).getNavigator().toFirstItem():(n.executeCommand(i),n.close(!0)))}},{keys:[["PageUp"]],callback:()=>{t.getSelectedLast()?t.selection.transformStart(-t.countVisibleRows(),0):n.getNavigator().toFirstItem()}},{keys:[["PageDown"]],callback:()=>{t.getSelectedLast()?t.selection.transformStart(t.countVisibleRows(),0):n.getNavigator().toLastItem()}}]}const nq="menu",jW=nq;function xHe(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const t=[];i(EHe(n)),e.forEach(c=>{let{shortcuts:u,contextName:h}=c;r(u,h)});function i(c,u){a(u).addShortcuts(c,{group:nq})}function r(c,u){const h=a(u);c.forEach(d=>{let{keys:f}=d;f.forEach(g=>h.removeShortcutsByKeys(g))}),t.push({shortcuts:c,contextName:u}),i(c,u)}function s(){return[...t]}function o(c){return c?`${jW}:${c}`:jW}function a(c){var u;const h=n.hotMenu.getShortcutManager(),d=o(c);return(u=h.getContext(d))!==null&&u!==void 0?u:h.addContext(d)}function l(c){n.hotMenu.getShortcutManager().setActiveContextName(o(c))}return{addCustomShortcuts:r,getCustomShortcuts:s,getContext:a,listen:l}}function THe(n){return(e,t,i,r,s,o)=>{const a=e.getSourceDataAtRow(i),l=n.rootDocument.createElement("div"),c=typeof o=="function"?o.call(n):o,u=typeof a.ariaLabel=="function"?a.ariaLabel.call(n):a.ariaLabel,h=typeof a.ariaChecked=="function"?a.ariaChecked.call(n):a.ariaChecked;if(ra(t),ge(l,"htItemWrapper"),n.getSettings().ariaTags){const d=!VS(a,n)&&!WW(a)&&!YI(a);ze(t,[..._He(a)?[hRe(),eR(u),R9(h)]:[uRe(),eR(c)],...d?[nm(-1)]:[],...VS(a,n)?[vRe()]:[],...GI(a)?[io(!1)]:[]])}t.className="",t.appendChild(l),YI(a)?ge(t,"htSeparator"):typeof a.renderer=="function"?(ge(t,"htCustomMenuRenderer"),t.appendChild(a.renderer(e,l,i,r,s,c))):kf(l,c),VS(a,n)?ge(t,"htDisabled"):WW(a)?ge(t,"htSelectionDisabled"):GI(a)&&ge(t,"htSubmenu")}}function gM(n,e,t){MHe(n,e),e.set(n,t)}function MHe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Sa(n,e,t){return(e=AHe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function AHe(n){var e=PHe(n,"string");return typeof e=="symbol"?e:e+""}function PHe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function pM(n,e,t){return n.set(iq(n,e),t),t}function zh(n,e){return n.get(iq(n,e))}function iq(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const zW=215;var ob=new WeakMap,yC=new WeakMap,CC=new WeakMap;class lm{get tableBorderWidth(){return zh(CC,this)===void 0&&this.hotMenu&&pM(CC,this,parseInt(ul(this.hotMenu.view._wt.wtTable.TABLE).borderWidth,10)),zh(CC,this)}constructor(e,t){var i=this;Sa(this,"hot",void 0),Sa(this,"options",void 0),Sa(this,"eventManager",new uo(this)),Sa(this,"container",void 0),Sa(this,"positioner",void 0),Sa(this,"hotMenu",null),Sa(this,"hotSubMenus",{}),Sa(this,"parentMenu",void 0),Sa(this,"menuItems",null),Sa(this,"origOutsideClickDeselects",null),gM(this,ob,void 0),gM(this,yC,void 0),gM(this,CC,void 0),this.hot=e,this.options=t||{parent:null,name:null,className:"",keepInViewport:!0,standalone:!1,minWidth:zW,container:this.hot.rootDocument.documentElement},this.container=this.createContainer(this.options.name),this.positioner=new fHe(this.options.keepInViewport),this.parentMenu=this.options.parent||null,this.registerEvents(),this.isSubMenu()&&this.addLocalHook("afterSelectionChange",function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i.parentMenu.runLocalHooks("afterSelectionChange",...s)})}registerEvents(){let e=this.hot.rootWindow;for(;e;)this.eventManager.addEventListener(e.document,"mousedown",t=>this.onDocumentMouseDown(t)),this.eventManager.addEventListener(e.document,"touchstart",t=>this.onDocumentMouseDown(t)),this.eventManager.addEventListener(e.document,"contextmenu",t=>this.onDocumentContextMenu(t)),e=af(e)}setMenuItems(e){this.menuItems=e}getNavigator(){return zh(ob,this)}getKeyboardShortcutsCtrl(){return zh(yC,this)}getSelectedItem(){return this.hasSelectedItem()?this.hotMenu.getSourceDataAtRow(this.hotMenu.getSelectedLast()[0]):null}hasSelectedItem(){return Array.isArray(this.hotMenu.getSelectedLast())}isSubMenu(){return this.parentMenu!==null}open(){this.runLocalHooks("beforeOpen"),this.container.removeAttribute("style"),this.container.style.display="block";const e=tE(a=>this.openSubMenu(a),300),t=this.options.minWidth||zW;let i=!1,r=Ac(this.menuItems,a=>(a.key===Aw&&(i=!0),wHe(a,this.hot)));if(r.length<1&&!i)r.push(KK()[Aw]);else if(r.length===0)return;r=SHe(r,ft);let s=!1;const o={data:r,colHeaders:!1,autoColumnSize:!0,autoWrapRow:!1,modifyColWidth(a){return De(a)&&a<t?t:a},autoRowSize:!1,readOnly:!0,editor:!1,copyPaste:!1,hiddenRows:!0,maxCols:1,columns:[{data:"name",renderer:THe(this.hot)}],renderAllRows:!0,fragmentSelection:!1,outsideClickDeselects:!1,disableVisualSelection:"area",layoutDirection:this.hot.isRtl()?"rtl":"ltr",ariaTags:!1,beforeOnCellMouseOver:(a,l)=>{zh(ob,this).setCurrentPage(l.row)},afterOnCellMouseOver:(a,l)=>{this.isAllSubMenusClosed()?e(l.row):this.openSubMenu(l.row)},rowHeights:a=>r[a].name===ft?1:void 0,afterOnCellContextMenu:a=>{a.preventDefault(),CI()&&s&&this.hasSelectedItem()&&this.close(!0)},afterSelection:(a,l,c,u,h)=>{this.hotMenu.view.isMouseDown()&&(h.value=!0),this.runLocalHooks("afterSelectionChange",this.getSelectedItem())},beforeOnCellMouseUp:a=>{this.hasSelectedItem()&&(s=!this.isCommandPassive(this.getSelectedItem()),this.executeCommand(a))},afterOnCellMouseUp:a=>{(!CI()||!qu(a))&&s&&this.hasSelectedItem()&&(pc()||eL()?this.hot._registerTimeout(()=>this.close(!0),325):this.close(!0))},afterUnlisten:()=>{!this.hasSelectedItem()&&this.isOpened()&&this.hotMenu.listen()}};this.origOutsideClickDeselects=this.hot.getSettings().outsideClickDeselects,this.hot.getSettings().outsideClickDeselects=!1,this.hotMenu=new this.hot.constructor(this.container,o),this.hotMenu.addHook("afterInit",()=>this.onAfterInit()),this.hotMenu.init(),pM(ob,this,RHe(this.hotMenu)),pM(yC,this,xHe(this)),zh(yC,this).listen(),this.focus(),this.isSubMenu()&&this.addLocalHook("afterOpen",()=>this.parentMenu.runLocalHooks("afterSubmenuOpen",this)),this.runLocalHooks("afterOpen",this)}close(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.isOpened()){if(e&&this.isSubMenu())this.parentMenu.close();else if(zh(ob,this).clear(),this.closeAllSubMenus(),this.container.style.display="none",this.hotMenu.destroy(),this.hotMenu=null,this.hot.getSettings().outsideClickDeselects=this.origOutsideClickDeselects,this.runLocalHooks("afterClose"),this.isSubMenu()){if(this.hot.getSettings().ariaTags){const t=this.parentMenu.hotMenu.getSelectedLast();if(t){const i=this.parentMenu.hotMenu.getCell(t[0],0);ze(i,[io(!1)])}}this.parentMenu.hotMenu.listen()}}}openSubMenu(e){if(!this.hotMenu)return!1;const t=this.hotMenu.getCell(e,0);if(this.closeAllSubMenus(),!t||!mHe(t))return!1;const i=this.hotMenu.getSourceDataAtRow(e),r=new lm(this.hot,{parent:this,name:i.name,className:this.options.className,keepInViewport:!0,container:this.options.container});return r.setMenuItems(i.submenu.items),r.open(),r.setPosition(t.getBoundingClientRect()),this.hotSubMenus[i.key]=r,this.hot.getSettings().ariaTags&&ze(t,[io(!0)]),r}closeSubMenu(e){const t=this.hotMenu.getSourceDataAtRow(e),i=this.hotSubMenus[t.key];if(i){i.destroy(),delete this.hotSubMenus[t.key];const r=this.hotMenu.getCell(e,0);this.hot.getSettings().ariaTags&&ze(r,[io(!1)])}}closeAllSubMenus(){q(this.hotMenu.getData(),(e,t)=>this.closeSubMenu(t))}isAllSubMenusClosed(){return Object.keys(this.hotSubMenus).length===0}focus(){this.isOpened()&&(this.hotMenu.rootElement.focus({preventScroll:!0}),this.getKeyboardShortcutsCtrl().listen(),this.hotMenu.listen())}destroy(){const e=this.container.parentNode;this.clearLocalHooks(),this.close(),this.parentMenu=null,this.eventManager.destroy(),e&&e.removeChild(this.container)}isOpened(){return this.hotMenu!==null}executeCommand(e){if(!this.isOpened()||!this.hasSelectedItem())return;const t=this.getSelectedItem();if(this.runLocalHooks("select",t,e),this.isCommandPassive(t))return;const i=this.hot.getSelectedRange(),r=i?gHe(i):[];this.runLocalHooks("executeCommand",t.key,r,e),this.isSubMenu()&&this.parentMenu.runLocalHooks("executeCommand",t.key,r,e)}isCommandPassive(e){return e.isCommand===!1||YI(e)||VS(e,this.hot)||GI(e)}setOffset(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.positioner.setOffset(e,t)}setPosition(e){this.isSubMenu()&&this.positioner.setParentElement(this.parentMenu.container),this.positioner.setElement(this.container).updatePosition(e)}updateMenuDimensions(){const{wtTable:e}=this.hotMenu.view._wt,t=this.hotMenu.getSettings().data,i=e.hider.style,r=e.holder.style,s=parseInt(i.width,10),o=ci(t,(a,l,c)=>{const h=this.hotMenu.getCell(c,0)?ni(this.hotMenu.getCell(c,0)):0;return a+(l.name===ft?1:h)},0);r.width=`${s+3}px`,r.height=`${o+3}px`,i.height=r.height}createContainer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;const t=this.options.container.ownerDocument;let i=e,r;return i&&(un(i)&&(i=i.call(this.hot),i===null||fn(i)?i="":i=i.toString()),i=i.replace(/[^A-z0-9]/g,"_"),i=`${this.options.className}Sub_${i}`,r=t.querySelector(`.${this.options.className}.${i}`)),r||(r=t.createElement("div"),ge(r,`htMenu ${this.options.className}`),i&&ge(r,i),this.options.container.appendChild(r)),r}onAfterInit(){this.updateMenuDimensions(),this.hot.getSettings().ariaTags&&ze(this.hotMenu.rootElement,[cRe(),nm(-1)])}onDocumentMouseDown(e){this.isOpened()&&(this.options.standalone&&this.hotMenu&&!Nu(e.target,this.hotMenu.rootElement)?this.close(!0):(this.isAllSubMenusClosed()||this.isSubMenu())&&!Nu(e.target,".htMenu")&&this.close(!0))}onDocumentContextMenu(e){this.isOpened()&&Ue(e.target,"htCore")&&Nu(e.target,this.hotMenu.rootElement)&&e.preventDefault()}}qt(lm,Xi);function IHe(n,e){OHe(n,e),e.add(n)}function OHe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function mM(n,e,t){return(e=kHe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function kHe(n){var e=DHe(n,"string");return typeof e=="symbol"?e:e+""}function DHe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function SC(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const Zb="contextMenu",LHe=70,UW=Zb;Oe.getSingleton().register("afterContextMenuDefaultOptions");Oe.getSingleton().register("beforeContextMenuShow");Oe.getSingleton().register("afterContextMenuShow");Oe.getSingleton().register("afterContextMenuHide");Oe.getSingleton().register("afterContextMenuExecute");var ab=new WeakSet;class ME extends Ht{constructor(){super(...arguments),IHe(this,ab),mM(this,"commandExecutor",new ZK(this.hot)),mM(this,"itemsFactory",null),mM(this,"menu",null)}static get PLUGIN_KEY(){return Zb}static get PLUGIN_PRIORITY(){return LHe}static get PLUGIN_DEPS(){return["plugin:AutoColumnSize"]}static get DEFAULT_ITEMS(){return[RE,EE,ft,xy,Ty,ft,_E,Ay,ft,xE,SE,ft,My,ft,Gs]}isEnabled(){return!!this.hot.getSettings()[Zb]}enablePlugin(){var e=this;if(this.enabled)return;const t=this.hot.getSettings()[Zb];typeof t.callback=="function"&&this.commandExecutor.setCommonCallback(t.callback),this.menu=new lm(this.hot,{className:"htContextMenu",keepInViewport:!0,container:t.uiContainer||this.hot.rootDocument.body}),this.menu.addLocalHook("beforeOpen",()=>SC(ab,this,HHe).call(this)),this.menu.addLocalHook("afterOpen",()=>SC(ab,this,$He).call(this)),this.menu.addLocalHook("afterClose",()=>SC(ab,this,FHe).call(this)),this.menu.addLocalHook("executeCommand",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e.executeCommand.call(e,...r)}),this.addHook("afterOnCellContextMenu",i=>SC(ab,this,NHe).call(this,i)),this.registerShortcuts(),super.enablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){this.close(),this.menu&&(this.menu.destroy(),this.menu=null),this.unregisterShortcuts(),super.disablePlugin()}registerShortcuts(){this.hot.getShortcutManager().getContext("grid").addShortcut({keys:[["Control/Meta","Shift","Backslash"],["Shift","F10"]],callback:()=>{const{highlight:e}=this.hot.getSelectedRangeLast();this.hot.scrollToFocusedCell();const t=this.hot.getCell(e.row,e.col,!0).getBoundingClientRect(),i=yE(this.menu.container,this.hot.rootDocument);this.open({left:t.left+i.left,top:t.top+i.top-1+t.height},{left:t.width,above:-t.height}),this.menu.getNavigator().toFirstItem()},runOnlyIf:()=>{var e;const t=(e=this.hot.getSelectedRangeLast())===null||e===void 0?void 0:e.highlight;return t&&this.hot.selection.isCellVisible(t)&&!this.menu.isOpened()},group:UW})}unregisterShortcuts(){this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup(UW)}open(e){var t;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{above:0,below:0,left:0,right:0};if((t=this.menu)!==null&&t!==void 0&&t.isOpened())return;this.prepareMenuItems(),this.menu.open(),this.menu.tableBorderWidth>0||(i.below+=1,i.right+=1,i.above-=1,i.left-=1),ut(i,(s,o)=>{this.menu.setOffset(o,s)}),this.menu.setPosition(e)}close(){var e;(e=this.menu)===null||e===void 0||e.close(),this.itemsFactory=null}executeCommand(e){this.itemsFactory===null&&this.prepareMenuItems();for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];this.commandExecutor.execute(e,...i)}prepareMenuItems(){this.itemsFactory=new QK(this.hot,ME.DEFAULT_ITEMS);const e=this.hot.getSettings()[Zb],t={items:this.itemsFactory.getItems(e)};this.hot.runHooks("afterContextMenuDefaultOptions",t),this.itemsFactory.setPredefinedItems(t.items);const i=this.itemsFactory.getItems(e);this.hot.runHooks("beforeContextMenuSetItems",i),this.menu.setMenuItems(i),q(i,r=>this.commandExecutor.registerCommand(r.key,r))}destroy(){this.close(),this.menu&&this.menu.destroy(),super.destroy()}}function NHe(n){const e=this.hot.getSettings(),t=e.rowHeaders,i=e.colHeaders;function r(a){return a.nodeName==="TD"||a.parentNode.nodeName==="TD"}const s=n.target;if(this.close(),Ue(s,"handsontableInput")||(n.preventDefault(),n.stopPropagation(),!(t||i)&&!r(s)&&!(Ue(s,"current")&&Ue(s,"wtBorder"))))return;const o=yE(this.menu.container,this.hot.rootDocument);this.open({top:n.clientY+o.top,left:n.clientX+o.left})}function HHe(){this.hot.runHooks("beforeContextMenuShow",this)}function $He(){this.hot.runHooks("afterContextMenuShow",this)}function FHe(){this.hot.listen(),this.hot.runHooks("afterContextMenuHide",this)}ME.SEPARATOR={name:ft};function BHe(n){return{key:"copy",name(){return this.getTranslatedPhrase(GL)},callback(){n.copyCellsOnly()},disabled(){if(this.countRows()===0||this.countCols()===0)return!0;const e=this.getSelectedRangeLast();if(!e||e.isSingleHeader())return!0;const t=this.getSelected();return!t||t.length>1},hidden:!1}}function VHe(n){return{key:"copy_column_headers_only",name(){const e=this.getSelectedRangeLast(),t=e?Gt(e.getWidth()-1,0,1):0;return this.getTranslatedPhrase(qL,t)},callback(){n.copyColumnHeadersOnly()},disabled(){if(!this.hasColHeaders())return!0;const e=this.getSelectedRangeLast();if(!e||e.isSingleHeader())return!0;const t=this.getSelected();return!t||t.length>1},hidden:!1}}function WHe(n){return{key:"copy_with_column_group_headers",name(){const e=this.getSelectedRangeLast(),t=e?Gt(e.getWidth()-1,0,1):0;return this.getTranslatedPhrase(KL,t)},callback(){n.copyWithAllColumnHeaders()},disabled(){if(!this.hasColHeaders()||!this.getSettings().nestedHeaders)return!0;const e=this.getSelectedRangeLast();if(!e||e.isSingleHeader())return!0;const t=this.getSelected();return!t||t.length>1},hidden:!1}}function jHe(n){return{key:"copy_with_column_headers",name(){const e=this.getSelectedRangeLast(),t=e?Gt(e.getWidth()-1,0,1):0;return this.getTranslatedPhrase(YL,t)},callback(){n.copyWithColumnHeaders()},disabled(){if(!this.hasColHeaders())return!0;const e=this.getSelectedRangeLast();if(!e||e.isSingleHeader())return!0;const t=this.getSelected();return!t||t.length>1},hidden:!1}}function zHe(n){return{key:"cut",name(){return this.getTranslatedPhrase(XL)},callback(){n.cut()},disabled(){if(this.countRows()===0||this.countCols()===0)return!0;const e=this.getSelectedRangeLast();if(!e||e.isSingleHeader())return!0;const t=this.getSelected();return!t||t.length>1},hidden:!1}}class UHe{constructor(){this.data={}}setData(e,t){this.data[e]=t}getData(e){return this.data[e]||void 0}}class GHe{constructor(){this.clipboardData=new UHe}preventDefault(){}}function YHe(n,e){rq(n,e),e.add(n)}function hg(n,e,t){rq(n,e),e.set(n,t)}function rq(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _r(n,e){return n.get(ep(n,e))}function dg(n,e,t){return n.set(ep(n,e),t),t}function ep(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var Zc=new WeakMap,bM=new WeakMap,lb=new WeakMap,KI=new WeakMap,qI=new WeakMap,cb=new WeakMap,ub=new WeakSet;class KHe{constructor(e){let{countRows:t,countColumns:i,rowsLimit:r,columnsLimit:s,countColumnHeaders:o}=e;YHe(this,ub),hg(this,Zc,void 0),hg(this,bM,void 0),hg(this,lb,void 0),hg(this,KI,void 0),hg(this,qI,void 0),hg(this,cb,void 0),dg(bM,this,t),dg(lb,this,i),dg(KI,this,r),dg(qI,this,s),dg(cb,this,o)}setSelectedRange(e){dg(Zc,this,e)}getCellsRange(){if(_r(bM,this).call(this)===0||_r(lb,this).call(this)===0)return null;const{row:e,col:t}=_r(Zc,this).getTopStartCorner(),{row:i,col:r}=_r(Zc,this).getBottomEndCorner(),s=ep(ub,this,qHe).call(this,e,i),o=ep(ub,this,vM).call(this,t,r);return{isRangeTrimmed:i!==s||r!==o,startRow:e,startCol:t,endRow:s,endCol:o}}getMostBottomColumnHeadersRange(){if(_r(lb,this).call(this)===0||_r(cb,this).call(this)===0)return null;const{col:e}=_r(Zc,this).getTopStartCorner(),{col:t}=_r(Zc,this).getBottomEndCorner(),i=ep(ub,this,vM).call(this,e,t);return{isRangeTrimmed:t!==i,startRow:-1,startCol:e,endRow:-1,endCol:i}}getAllColumnHeadersRange(){if(_r(lb,this).call(this)===0||_r(cb,this).call(this)===0)return null;const{col:e}=_r(Zc,this).getTopStartCorner(),{col:t}=_r(Zc,this).getBottomEndCorner(),i=ep(ub,this,vM).call(this,e,t);return{isRangeTrimmed:t!==i,startRow:-_r(cb,this).call(this),startCol:e,endRow:-1,endCol:i}}}function vM(n,e){return Math.min(e,Math.max(n+_r(qI,this).call(this)-1,n))}function qHe(n,e){return Math.min(e,Math.max(n+_r(KI,this).call(this)-1,n))}function sq(n){const e=[],t=[];return q(n,i=>{const r=Math.min(i.startRow,i.endRow),s=Math.max(i.startRow,i.endRow);$e(r,s,l=>{e.indexOf(l)===-1&&e.push(l)});const o=Math.min(i.startCol,i.endCol),a=Math.max(i.startCol,i.endCol);$e(o,a,l=>{t.indexOf(l)===-1&&t.push(l)})}),{rows:e,columns:t}}function XHe(n,e){oq(n,e),e.add(n)}function Qc(n,e,t){oq(n,e),e.set(n,t)}function oq(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function hb(n,e,t){return(e=ZHe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ZHe(n){var e=QHe(n,"string");return typeof e=="symbol"?e:e+""}function QHe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Kr(n,e){return n.get(qr(n,e))}function No(n,e,t){return n.set(qr(n,e),t),t}function qr(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}Oe.getSingleton().register("afterCopyLimit");Oe.getSingleton().register("modifyCopyableRange");Oe.getSingleton().register("beforeCut");Oe.getSingleton().register("afterCut");Oe.getSingleton().register("beforePaste");Oe.getSingleton().register("afterPaste");Oe.getSingleton().register("beforeCopy");Oe.getSingleton().register("afterCopy");const _C="copyPaste",JHe=80,e$e=["fragmentSelection"],GW=['<meta name="generator" content="Handsontable"/>','<style type="text/css">td{white-space:normal}br{mso-data-placement:same-cell}</style>'].join("");var XI=new WeakMap,ZI=new WeakMap,QI=new WeakMap,fg=new WeakMap,RC=new WeakMap,EC=new WeakMap,gg=new WeakMap,_R=new WeakMap,cs=new WeakSet;class t$e extends Ht{constructor(){super(...arguments),XHe(this,cs),hb(this,"columnsLimit",1/0),hb(this,"rowsLimit",1/0),hb(this,"pasteMode","overwrite"),hb(this,"uiContainer",this.hot.rootDocument.body),Qc(this,XI,!1),Qc(this,ZI,!1),Qc(this,QI,!1),Qc(this,fg,"cells-only"),Qc(this,RC,!1),Qc(this,EC,!1),Qc(this,gg,new KHe({countRows:()=>this.hot.countRows(),countColumns:()=>this.hot.countCols(),rowsLimit:()=>this.rowsLimit,columnsLimit:()=>this.columnsLimit,countColumnHeaders:()=>this.hot.view.getColumnHeadersCount()})),Qc(this,_R,!1),hb(this,"copyableRanges",[])}static get PLUGIN_KEY(){return _C}static get SETTING_KEYS(){return[_C,...e$e]}static get PLUGIN_PRIORITY(){return JHe}isEnabled(){return!!this.hot.getSettings()[_C]}enablePlugin(){var e=this;if(this.enabled)return;const{[_C]:t}=this.hot.getSettings();if(typeof t=="object"){var i,r;this.pasteMode=(i=t.pasteMode)!==null&&i!==void 0?i:this.pasteMode,this.rowsLimit=isNaN(t.rowsLimit)?this.rowsLimit:t.rowsLimit,this.columnsLimit=isNaN(t.columnsLimit)?this.columnsLimit:t.columnsLimit,No(XI,this,!!t.copyColumnHeaders),No(ZI,this,!!t.copyColumnGroupHeaders),No(QI,this,!!t.copyColumnHeadersOnly),this.uiContainer=(r=t.uiContainer)!==null&&r!==void 0?r:this.uiContainer}this.addHook("afterContextMenuDefaultOptions",s=>qr(cs,this,r$e).call(this,s)),this.addHook("afterSelection",function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return qr(cs,e,s$e).call(e,...o)}),this.addHook("afterSelectionEnd",()=>qr(cs,this,o$e).call(this)),this.eventManager.addEventListener(this.hot.rootDocument,"copy",function(){return e.onCopy(...arguments)}),this.eventManager.addEventListener(this.hot.rootDocument,"cut",function(){return e.onCut(...arguments)}),this.eventManager.addEventListener(this.hot.rootDocument,"paste",function(){return e.onPaste(...arguments)}),QD()&&(this.eventManager.addEventListener(this.hot.rootDocument.body,"mouseenter",function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return qr(cs,e,a$e).call(e,...o)}),this.eventManager.addEventListener(this.hot.rootDocument.body,"mouseleave",function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return qr(cs,e,l$e).call(e,...o)}),this.addHook("afterSelection",()=>qr(cs,this,c$e).call(this))),super.enablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){super.disablePlugin()}copy(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"cells-only";No(fg,this,e),No(RC,this,!0),qr(cs,this,YW).call(this,"copy")}copyCellsOnly(){this.copy("cells-only")}copyColumnHeadersOnly(){this.copy("column-headers-only")}copyWithAllColumnHeaders(){this.copy("with-column-group-headers")}copyWithColumnHeaders(){this.copy("with-column-headers")}cut(){No(EC,this,!0),qr(cs,this,YW).call(this,"cut")}getRangedCopyableData(e){return Ov(this.getRangedData(e))}getRangedData(e){const t=[],{rows:i,columns:r}=sq(e);return q(i,s=>{const o=[];q(r,a=>{s<0?o.push(this.hot.getColHeader(a,s)):o.push(this.hot.getCopyableData(s,a))}),t.push(o)}),t}paste(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e;if(!e&&!t)return;const i=new GHe;e&&i.clipboardData.setData("text/plain",e),t&&i.clipboardData.setData("text/html",t),this.onPaste(i)}setCopyableText(){const e=this.hot.getSelectedRangeLast();if(!e)return;if(e.isSingleHeader()){this.copyableRanges=[];return}Kr(gg,this).setSelectedRange(e);const t=new Map([["headers",null],["cells",null]]);Kr(fg,this)==="column-headers-only"?t.set("headers",Kr(gg,this).getMostBottomColumnHeadersRange()):(Kr(fg,this)==="with-column-headers"?t.set("headers",Kr(gg,this).getMostBottomColumnHeadersRange()):Kr(fg,this)==="with-column-group-headers"&&t.set("headers",Kr(gg,this).getAllColumnHeadersRange()),t.set("cells",Kr(gg,this).getCellsRange())),this.copyableRanges=Array.from(t.values()).filter(r=>r!==null).map(r=>{let{startRow:s,startCol:o,endRow:a,endCol:l}=r;return{startRow:s,startCol:o,endRow:a,endCol:l}}),this.copyableRanges=this.hot.runHooks("modifyCopyableRange",this.copyableRanges);const i=t.get("cells");if(i!==null&&i.isRangeTrimmed){const{startRow:r,startCol:s,endRow:o,endCol:a}=i;this.hot.runHooks("afterCopyLimit",o-r+1,a-s+1,this.rowsLimit,this.columnsLimit)}}isEditorOpened(){var e;return(e=this.hot.getActiveEditor())===null||e===void 0?void 0:e.isOpened()}populateValues(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.hot.getSelectedRangeLast();if(!e.length)return;const i=e.length,r=e[0].length,s=[],{row:o,col:a}=t.getTopStartCorner(),{row:l,col:c}=t.getBottomEndCorner();let u=o,h=a,d=o,f=a;for(;s.length<i||u<=l;){const{skipRowOnPaste:g,visualRow:p}=this.hot.getCellMeta(u,a);if(u=p+1,g===!0)continue;d=p,h=a;const m=[],v=s.length%i;for(;m.length<r||h<=c;){const{skipColumnOnPaste:y,visualCol:w}=this.hot.getCellMeta(o,h);if(h=w+1,y===!0)continue;f=w;const R=m.length%r;m.push(e[v][R])}s.push(m)}return No(_R,this,!0),this.hot.populateFromArray(o,a,s,void 0,void 0,"CopyPaste.paste",this.pasteMode),[o,a,d,f]}onCopy(e){var t;const i=this.hot.getFocusManager().getRefocusElement(),r=(t=e.target)===null||t===void 0?void 0:t.hasAttribute("data-hot-input");if(!this.hot.isListening()&&!Kr(RC,this)||this.isEditorOpened()||e.target instanceof HTMLElement&&(r&&e.target!==i||!r&&e.target!==this.hot.rootDocument.body))return;e.preventDefault(),this.setCopyableText(),No(RC,this,!1);const s=this.getRangedData(this.copyableRanges),o=qr(cs,this,n$e).call(this,this.copyableRanges);if(!!this.hot.runHooks("beforeCopy",s,this.copyableRanges,o)){const l=Ov(s);if(e&&e.clipboardData){const c=AI(s,this.hot.rootDocument);e.clipboardData.setData("text/plain",l),e.clipboardData.setData("text/html",[GW,c].join(""))}else typeof ClipboardEvent>"u"&&this.hot.rootWindow.clipboardData.setData("Text",l);this.hot.runHooks("afterCopy",s,this.copyableRanges,o)}No(fg,this,"cells-only")}onCut(e){var t;const i=this.hot.getFocusManager().getRefocusElement(),r=(t=e.target)===null||t===void 0?void 0:t.hasAttribute("data-hot-input");if(!this.hot.isListening()&&!Kr(EC,this)||this.isEditorOpened()||e.target instanceof HTMLElement&&(r&&e.target!==i||!r&&e.target!==this.hot.rootDocument.body))return;e.preventDefault(),this.setCopyableText(),No(EC,this,!1);const s=this.getRangedData(this.copyableRanges);if(!!this.hot.runHooks("beforeCut",s,this.copyableRanges)){const a=Ov(s);if(e&&e.clipboardData){const l=AI(s,this.hot.rootDocument);e.clipboardData.setData("text/plain",a),e.clipboardData.setData("text/html",[GW,l].join(""))}else typeof ClipboardEvent>"u"&&this.hot.rootWindow.clipboardData.setData("Text",a);this.hot.emptySelectedCells("CopyPaste.cut"),this.hot.runHooks("afterCut",s,this.copyableRanges)}}onPaste(e){var t;const i=this.hot.getFocusManager().getRefocusElement(),r=(t=e.target)===null||t===void 0?void 0:t.hasAttribute("data-hot-input");if(!this.hot.isListening()||this.isEditorOpened()||!this.hot.getSelected()||e.target instanceof HTMLElement&&(r&&e.target!==i||!r&&e.target!==this.hot.rootDocument.body))return;e.preventDefault();let s;if(e&&typeof e.clipboardData<"u"){const u=q1(e.clipboardData.getData("text/html"),{ADD_TAGS:["meta"],ADD_ATTR:["content"],FORCE_BODY:!0});u&&/(<table)|(<TABLE)/g.test(u)?s=hY(u,this.hot.rootDocument).data:s=e.clipboardData.getData("text/plain")}else typeof ClipboardEvent>"u"&&typeof this.hot.rootWindow.clipboardData<"u"&&(s=this.hot.rootWindow.clipboardData.getData("Text"));if(typeof s=="string"&&(s=gPe(s)),s===void 0||s&&s.length===0||this.hot.runHooks("beforePaste",s,this.copyableRanges)===!1)return;const[o,a,l,c]=this.populateValues(s);this.hot.selectCell(o,a,Math.min(this.hot.countRows()-1,l),Math.min(this.hot.countCols()-1,c)),this.hot.runHooks("afterPaste",s,this.copyableRanges)}destroy(){super.destroy()}}function YW(n){if(QD()){const e=this.hot.getSelectedRangeLast();if(e){const{row:t,col:i}=e.highlight,r=this.hot.getCell(t,i,!0);r&&$9(r,()=>{this.hot.rootDocument.execCommand(n)})}}else this.hot.rootDocument.execCommand(n)}function n$e(n){const{rows:e}=sq(n);let t=0;for(let i=0;i<e.length&&!(e[i]>=0);i++)t+=1;return{columnHeadersCount:t}}function i$e(){if(this.hot.isListening()){const n=this.hot.getSelectedRangeLast();if(n){const{row:e,col:t}=n.highlight,i=this.hot.getCell(e,t,!0);i&&YD(i)}}}function aq(){if(this.hot.isListening()){const n=this.hot.getSelectedRangeLast();if(n){const{row:e,col:t}=n.highlight,i=this.hot.getCell(e,t,!0);i!=null&&i.hasAttribute("contenteditable")&&KD(i)}}}function r$e(n){n.items.push({name:"---------"},BHe(this)),Kr(XI,this)&&n.items.push(jHe(this)),Kr(ZI,this)&&n.items.push(WHe(this)),Kr(QI,this)&&n.items.push(VHe(this)),n.items.push(zHe(this))}function s$e(n,e,t,i,r){Kr(_R,this)&&(r.value=!0),No(_R,this,!1)}function o$e(){this.isEditorOpened()||this.hot.getSettings().fragmentSelection||this.setCopyableText()}function a$e(){qr(cs,this,aq).call(this)}function l$e(){qr(cs,this,i$e).call(this)}function c$e(){qr(cs,this,aq).call(this)}function lq(n,e){return`border_row${n}col${e}`}function Qb(){return{width:1,color:"#000"}}function mc(){return{hide:!0}}function u$e(){return{width:1,color:"#000",cornerVisible:!1}}function wM(n){if(De(n.start)||De(n.left)){var e;n.start=(e=n.start)!==null&&e!==void 0?e:n.left}if(De(n.end)||De(n.right)){var t;n.end=(t=n.end)!==null&&t!==void 0?t:n.right}return delete n.left,delete n.right,n}function db(n){return De(n.start)&&(n.left=n.start),De(n.end)&&(n.right=n.end),n}function yM(n,e){return{id:lq(n,e),border:u$e(),row:n,col:e,top:mc(),bottom:mc(),start:mc(),end:mc()}}function h$e(n,e){return kn(e,"border")&&e.border&&(n.border=e.border),kn(e,"top")&&De(e.top)&&(e.top?(ct(e.top)||(e.top=Qb()),n.top=e.top):(e.top=mc(),n.top=e.top)),kn(e,"bottom")&&De(e.bottom)&&(e.bottom?(ct(e.bottom)||(e.bottom=Qb()),n.bottom=e.bottom):(e.bottom=mc(),n.bottom=e.bottom)),kn(e,"start")&&De(e.start)&&(e.start?(ct(e.start)||(e.start=Qb()),n.start=e.start):(e.start=mc(),n.start=e.start)),kn(e,"end")&&De(e.end)&&(e.end?(ct(e.end)||(e.end=Qb()),n.end=e.end):(e.end=mc(),n.end=e.end)),n}function Pc(n,e){let t=!1;return q(n.getSelectedRange(),i=>{i.forAll((r,s)=>{if(r<0||s<0)return;const o=n.getCellMeta(r,s).borders;if(o)if(e){if(!kn(o[e],"hide")||o[e].hide===!1)return t=!0,!1}else return t=!0,!1})}),t}function AE(n){return`<span class="selected">✓</span>${n}`}function d$e(n){return n.some(e=>De(e.left)||De(e.right))}function f$e(n){return n.some(e=>De(e.start)||De(e.end))}const g$e=new Map([["left","start"],["right","end"]]);function p$e(n){var e;return(e=g$e.get(n))!==null&&e!==void 0?e:n}function m$e(n){return{key:"borders:bottom",name(){let e=this.getTranslatedPhrase(cN);return Pc(this,"bottom")&&(e=AE(e)),e},callback(e,t){const i=Pc(this,"bottom");n.prepareBorder(t,"bottom",i)}}}function b$e(n){const e=n.hot.isRtl()?"end":"start";return{key:"borders:left",name(){let t=this.getTranslatedPhrase(uN);return Pc(this,e)&&(t=AE(t)),t},callback(t,i){const r=Pc(this,e);n.prepareBorder(i,e,r)}}}function v$e(n){return{key:"borders:no_borders",name(){return this.getTranslatedPhrase(hN)},callback(e,t){n.prepareBorder(t,"noBorders")},disabled(){return!Pc(this)}}}function w$e(n){const e=n.hot.isRtl()?"start":"end";return{key:"borders:right",name(){let t=this.getTranslatedPhrase(lN);return Pc(this,e)&&(t=AE(t)),t},callback(t,i){const r=Pc(this,e);n.prepareBorder(i,e,r)}}}function y$e(n){return{key:"borders:top",name(){let e=this.getTranslatedPhrase(aN);return Pc(this,"top")&&(e=AE(e)),e},callback(e,t){const i=Pc(this,"top");n.prepareBorder(t,"top",i)}}}function C$e(n,e){S$e(n,e),e.add(n)}function S$e(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _$e(n,e,t){return(e=R$e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function R$e(n){var e=E$e(n,"string");return typeof e=="symbol"?e:e+""}function E$e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function KW(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const WS="customBorders",x$e=90;var CM=new WeakSet;class T$e extends Ht{constructor(){super(...arguments),C$e(this,CM),_$e(this,"savedBorders",[])}static get PLUGIN_KEY(){return WS}static get PLUGIN_PRIORITY(){return x$e}isEnabled(){return!!this.hot.getSettings()[WS]}enablePlugin(){this.enabled||(this.addHook("afterContextMenuDefaultOptions",e=>KW(CM,this,M$e).call(this,e)),this.addHook("init",()=>KW(CM,this,A$e).call(this)),super.enablePlugin())}disablePlugin(){this.hideBorders(),super.disablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),this.changeBorderSettings(),super.updatePlugin()}setBorders(e,t){let i=["top","bottom","start","end"],r=null;t&&(this.checkSettingsCohesion([t]),i=Object.keys(t),r=wM(t));const s=Ip(e),o=Tw(s,{createCellCoords:this.hot._createCellCoords.bind(this.hot),createCellRange:this.hot._createCellRange.bind(this.hot)});q(e,a=>{o(a).forAll((l,c)=>{q(i,u=>{this.prepareBorderFromCustomAdded(l,c,r,p$e(u))})})}),this.hot.view.render()}getBorders(e){if(!Array.isArray(e))return this.savedBorders;const t=Ip(e),i=Tw(t,{createCellCoords:this.hot._createCellCoords.bind(this.hot),createCellRange:this.hot._createCellRange.bind(this.hot)}),r=[];return q(e,s=>{i(s).forAll((o,a)=>{q(this.savedBorders,l=>{l.row===o&&l.col===a&&r.push(db(l))})})}),r}clearBorders(e){e?this.setBorders(e):(q(this.savedBorders,t=>{this.clearBordersFromSelectionSettings(t.id),this.clearNullCellRange(),this.hot.removeCellMeta(t.row,t.col,"borders")}),this.savedBorders.length=0)}insertBorderIntoSettings(e,t){this.checkSavedBorders(e)||this.savedBorders.push(e);const r=this.hot._createCellRange(this.hot._createCellCoords(e.row,e.col));this.checkCustomSelections(e,r,t)||this.hot.selection.highlight.addCustomSelection({border:e,visualCellRange:r})}prepareBorderFromCustomAdded(e,t,i,r){const s=this.hot.countRows(),o=this.hot.countCols();if(e>=s||t>=o)return;let a=yM(e,t);i&&(a=h$e(a,i),q(this.hot.selection.highlight.customSelections,l=>{if(a.id===l.settings.id)return Object.assign(l.settings,i),a.id=l.settings.id,a.top=l.settings.top,a.bottom=l.settings.bottom,a.start=l.settings.start,a.end=l.settings.end,!1})),this.hot.setCellMeta(e,t,"borders",db(a)),this.insertBorderIntoSettings(a,r)}prepareBorderFromCustomAddedRange(e,t){const i=Math.min(e.to.row,this.hot.countRows()-1),r=Math.min(e.to.col,this.hot.countCols()-1);$e(e.from.row,i,s=>{$e(e.from.col,r,o=>{const a=yM(s,o);let l=0;s===e.from.row&&kn(t,"top")&&(l+=1,a.top=t.top),s===e.to.row&&kn(t,"bottom")&&(l+=1,a.bottom=t.bottom),o===e.from.col&&kn(t,"start")&&(l+=1,a.start=t.start),o===e.to.col&&kn(t,"end")&&(l+=1,a.end=t.end),l>0&&(this.hot.setCellMeta(s,o,"borders",db(a)),this.insertBorderIntoSettings(a))})})}removeAllBorders(e,t){const i=lq(e,t);this.spliceBorder(i),this.clearBordersFromSelectionSettings(i),this.clearNullCellRange(),this.hot.removeCellMeta(e,t,"borders")}setBorder(e,t,i,r){let s=this.hot.getCellMeta(e,t).borders;!s||s.border===void 0?s=yM(e,t):s=wM(s),r?(s[i]=mc(),this.countHide(s)===4?this.removeAllBorders(e,t):(this.checkCustomSelectionsFromContextMenu(s,i,r)||this.insertBorderIntoSettings(s),this.hot.setCellMeta(e,t,"borders",db(s)))):(s[i]=Qb(),this.checkCustomSelectionsFromContextMenu(s,i,r)||this.insertBorderIntoSettings(s),this.hot.setCellMeta(e,t,"borders",db(s)))}prepareBorder(e,t,i){q(e,r=>{let{start:s,end:o}=r;if(s.row===o.row&&s.col===o.col)t==="noBorders"?this.removeAllBorders(s.row,s.col):this.setBorder(s.row,s.col,t,i);else switch(t){case"noBorders":$e(s.col,o.col,a=>{$e(s.row,o.row,l=>{this.removeAllBorders(l,a)})});break;case"top":$e(s.col,o.col,a=>{this.setBorder(s.row,a,t,i)});break;case"bottom":$e(s.col,o.col,a=>{this.setBorder(o.row,a,t,i)});break;case"start":$e(s.row,o.row,a=>{this.setBorder(a,s.col,t,i)});break;case"end":$e(s.row,o.row,a=>{this.setBorder(a,o.col,t,i)});break}})}createCustomBorders(e){q(e,t=>{const i=wM(t);t.range?this.prepareBorderFromCustomAddedRange(t.range,i):this.prepareBorderFromCustomAdded(t.row,t.col,i)})}countHide(e){const{top:t,bottom:i,start:r,end:s}=e;return ci([t,i,r,s],(a,l)=>{let c=a;return l&&l.hide&&(c+=1),c},0)}clearBordersFromSelectionSettings(e){const t=vt(this.hot.selection.highlight.customSelections,i=>i.settings.id).indexOf(e);t>-1&&this.hot.selection.highlight.customSelections[t].clear()}clearNullCellRange(){q(this.hot.selection.highlight.customSelections,(e,t)=>{if(e.cellRange===null)return this.hot.selection.highlight.customSelections[t].destroy(),this.hot.selection.highlight.customSelections.splice(t,1),!1})}hideBorders(){q(this.savedBorders,e=>{this.clearBordersFromSelectionSettings(e.id),this.clearNullCellRange()})}spliceBorder(e){const t=vt(this.savedBorders,i=>i.id).indexOf(e);t>-1&&this.savedBorders.splice(t,1)}checkSavedBorders(e){let t=!1;return this.countHide(e)===4?(this.spliceBorder(e.id),t=!0):q(this.savedBorders,(r,s)=>{if(e.id===r.id)return this.savedBorders[s]=e,t=!0,!1}),t}checkCustomSelectionsFromContextMenu(e,t,i){let r=!1;return q(this.hot.selection.highlight.customSelections,s=>{if(e.id===s.settings.id){const o=this.hot.view._wt.selectionManager.getBorderInstances(s);return q(o,a=>{a.toggleHiddenClass(t,i)}),r=!0,!1}}),r}checkCustomSelections(e,t,i){const r=this.countHide(e);let s=!1;return r===4?(this.removeAllBorders(e.row,e.col),s=!0):q(this.hot.selection.highlight.customSelections,o=>{if(e.id===o.settings.id){if(o.visualCellRange=t,o.commit(),i){const a=this.hot.view._wt.selectionManager.getBorderInstances(o);q(a,l=>{l.changeBorderStyle(i,e)})}return s=!0,!1}}),s}changeBorderSettings(){const e=this.hot.getSettings()[WS];if(Array.isArray(e)){const t=mr(e);this.checkSettingsCohesion(t),t.length||(this.savedBorders=t),this.createCustomBorders(t)}else e!==void 0&&this.createCustomBorders(this.savedBorders)}checkSettingsCohesion(e){const t=d$e(e),i=f$e(e);if(t&&i)throw new Error('The "left"/"right" and "start"/"end" options should not be used together. Please use only the option "start"/"end".');if(this.hot.isRtl()&&t)throw new Error('The "left"/"right" properties are not supported for RTL. Please use option "start"/"end".')}destroy(){super.destroy()}}function M$e(n){this.hot.getSettings()[WS]&&n.items.push({name:"---------"},{key:"borders",name(){return this.getTranslatedPhrase(oN)},disabled(){const e=this.getSelectedRangeLast();return!e||e.isSingleHeader()?!0:this.selection.isSelectedByCorner()},submenu:{items:[y$e(this),w$e(this),m$e(this),b$e(this),v$e(this)]}})}function A$e(){this.changeBorderSettings()}function P$e(n,e){I$e(n,e),e.add(n)}function I$e(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function SM(n,e,t){return(e=O$e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function O$e(n){var e=k$e(n,"string");return typeof e=="symbol"?e:e+""}function k$e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function qW(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const XW="dragToScroll",D$e=100;var _M=new WeakSet;class L$e extends Ht{constructor(){super(...arguments),P$e(this,_M),SM(this,"boundaries",null),SM(this,"callback",null),SM(this,"listening",!1)}static get PLUGIN_KEY(){return XW}static get PLUGIN_PRIORITY(){return D$e}isEnabled(){return!!this.hot.getSettings()[XW]}enablePlugin(){this.enabled||(this.addHook("afterOnCellMouseDown",e=>qW(_M,this,ZW).call(this,e)),this.addHook("afterOnCellCornerMouseDown",e=>qW(_M,this,ZW).call(this,e)),this.registerEvents(),super.enablePlugin())}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){this.unregisterEvents(),super.disablePlugin()}setBoundaries(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{left:0,right:this.hot.rootWindow.innerWidth,top:0,bottom:this.hot.rootWindow.innerHeight};this.boundaries=e}setCallback(e){this.callback=e}check(e,t){let i=0,r=0;t<this.boundaries.top?r=t-this.boundaries.top:t>this.boundaries.bottom&&(r=t-this.boundaries.bottom),e<this.boundaries.left?i=e-this.boundaries.left:e>this.boundaries.right&&(i=e-this.boundaries.right),this.callback(i,r)}listen(){this.listening=!0}unlisten(){this.listening=!1}isListening(){return this.listening}registerEvents(){const{rootWindow:e}=this.hot;let t=e;for(;t;)this.eventManager.addEventListener(t.document,"contextmenu",()=>this.unlisten()),this.eventManager.addEventListener(t.document,"mouseup",()=>this.unlisten()),this.eventManager.addEventListener(t.document,"mousemove",i=>this.onMouseMove(i)),t=af(t)}unregisterEvents(){this.eventManager.clear()}onMouseMove(e){this.isListening()&&this.check(e.clientX,e.clientY)}destroy(){super.destroy()}}function ZW(n){if(qu(n))return;const e=this.hot.view._wt.wtOverlays.topOverlay.mainTableScrollableElement;this.setBoundaries(e!==this.hot.rootWindow?e.getBoundingClientRect():void 0),this.setCallback((t,i)=>{var r,s;const o=(r=e.scrollLeft)!==null&&r!==void 0?r:e.scrollX,a=(s=e.scrollTop)!==null&&s!==void 0?s:e.scrollY;e.scroll(o+Math.sign(t)*50,a+Math.sign(i)*20)}),this.listen()}function N$e(n,e){cq(n,e),e.add(n)}function H$e(n,e,t){cq(n,e),e.set(n,t)}function cq(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function RM(n,e,t){return(e=$$e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function $$e(n){var e=F$e(n,"string");return typeof e=="symbol"?e:e+""}function F$e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function B$e(n,e){return n.get(Ys(n,e))}function uq(n,e,t){return n.set(Ys(n,e),t),t}function Ys(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}Oe.getSingleton().register("afterDropdownMenuDefaultOptions");Oe.getSingleton().register("beforeDropdownMenuShow");Oe.getSingleton().register("afterDropdownMenuShow");Oe.getSingleton().register("afterDropdownMenuHide");Oe.getSingleton().register("afterDropdownMenuExecute");const jS="dropdownMenu",V$e=230,Pw="changeType",EM=jS;var PE=new WeakMap,$o=new WeakSet;class IE extends Ht{static get PLUGIN_KEY(){return jS}static get PLUGIN_PRIORITY(){return V$e}static get PLUGIN_DEPS(){return["plugin:AutoColumnSize"]}static get DEFAULT_ITEMS(){return[xy,Ty,ft,Ay,ft,CE,ft,My,ft,Gs]}constructor(e){super(e),N$e(this,$o),RM(this,"commandExecutor",new ZK(this.hot)),RM(this,"itemsFactory",null),RM(this,"menu",null),H$e(this,PE,!1),this.hot.addHook("afterGetColHeader",(t,i)=>Ys($o,this,j$e).call(this,t,i))}isEnabled(){return this.hot.getSettings()[jS]}enablePlugin(){var e=this;if(this.enabled)return;this.itemsFactory=new QK(this.hot,IE.DEFAULT_ITEMS),this.addHook("beforeOnCellMouseDown",function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return Ys($o,e,q$e).call(e,...s)}),this.addHook("beforeViewportScrollHorizontally",function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return Ys($o,e,K$e).call(e,...s)});const t=this.hot.getSettings()[jS],i={items:this.itemsFactory.getItems(t)};this.registerEvents(),typeof t.callback=="function"&&this.commandExecutor.setCommonCallback(t.callback),this.registerShortcuts(),super.enablePlugin(),this.callOnPluginsReady(()=>{this.hot.runHooks("afterDropdownMenuDefaultOptions",i),this.itemsFactory.setPredefinedItems(i.items);const r=this.itemsFactory.getItems(t);this.menu&&this.menu.destroy(),this.menu=new lm(this.hot,{className:"htDropdownMenu",keepInViewport:!0,container:t.uiContainer||this.hot.rootDocument.body}),this.hot.runHooks("beforeDropdownMenuSetItems",r),this.menu.setMenuItems(r),this.menu.addLocalHook("beforeOpen",()=>Ys($o,this,z$e).call(this)),this.menu.addLocalHook("afterOpen",()=>Ys($o,this,U$e).call(this)),this.menu.addLocalHook("afterSubmenuOpen",s=>Ys($o,this,G$e).call(this,s)),this.menu.addLocalHook("afterClose",()=>Ys($o,this,Y$e).call(this)),this.menu.addLocalHook("executeCommand",function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return e.executeCommand.call(e,...o)}),q(r,s=>this.commandExecutor.registerCommand(s.key,s))})}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){this.close(),this.menu&&this.menu.destroy(),this.unregisterShortcuts(),super.disablePlugin()}registerShortcuts(){const e=this.hot.getShortcutManager().getContext("grid"),t=()=>{const{highlight:i}=this.hot.getSelectedRangeLast();if((i.isHeader()&&i.row===-1||i.isCell())&&i.col>=0){this.hot.selectColumns(i.col,i.col,-1);const{from:r}=this.hot.getSelectedRangeLast(),s=yE(this.menu.container,this.hot.rootDocument),o=this.hot.getCell(-1,r.col,!0).querySelector(`.${Pw}`),a=o.getBoundingClientRect();this.open({left:a.left+s.left,top:a.top+o.offsetHeight+s.top},{left:a.width,right:0,above:0,below:3}),this.menu.getNavigator().toFirstItem()}};e.addShortcuts([{keys:[["Shift","Alt","ArrowDown"],["Control/Meta","Enter"]],callback:t,runOnlyIf:()=>{var i;const r=(i=this.hot.getSelectedRangeLast())===null||i===void 0?void 0:i.highlight;return r&&this.hot.selection.isCellVisible(r)&&r.isHeader()&&!this.menu.isOpened()},captureCtrl:!0,group:EM},{keys:[["Shift","Alt","ArrowDown"]],callback:t,runOnlyIf:()=>{var i;const r=(i=this.hot.getSelectedRangeLast())===null||i===void 0?void 0:i.highlight;return r&&this.hot.selection.isCellVisible(r)&&r.isCell()&&!this.menu.isOpened()},group:EM}])}unregisterShortcuts(){this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup(EM)}registerEvents(){this.eventManager.addEventListener(this.hot.rootElement,"click",e=>Ys($o,this,W$e).call(this,e))}open(e){var t;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{above:0,below:0,left:0,right:0};(t=this.menu)!==null&&t!==void 0&&t.isOpened()||(this.menu.open(),ut(i,(r,s)=>{this.menu.setOffset(s,r)}),this.menu.setPosition(e))}close(){var e;(e=this.menu)===null||e===void 0||e.close()}executeCommand(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];this.commandExecutor.execute(e,...i)}setListening(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.menu.isOpened()&&(e?this.menu.hotMenu.listen():this.menu.hotMenu.unlisten())}destroy(){this.close(),this.menu&&this.menu.destroy(),super.destroy()}}function hq(n){n.getKeyboardShortcutsCtrl().addCustomShortcuts([{keys:[["Control/Meta","A"]],callback:()=>!1}])}function W$e(n){if(Ue(n.target,Pw)){const e=yE(this.menu.container,this.hot.rootDocument),t=n.target.getBoundingClientRect();n.stopPropagation(),uq(PE,this,!1),this.open({left:t.left+e.left,top:t.top+n.target.offsetHeight+e.top},{left:t.width,right:0,above:0,below:3})}}function j$e(n,e){const t=e.parentNode;if(!t)return;const i=t.parentNode.childNodes,r=Array.prototype.indexOf.call(i,t);if(n<0||r!==i.length-1)return;const s=e.querySelector(`.${Pw}`);if(this.enabled&&s)return;if(!this.enabled){s&&s.parentNode.removeChild(s);return}const o=this.hot.rootDocument.createElement("button");o.className=Pw,o.type="button",o.tabIndex=-1,this.hot.getSettings().ariaTags&&(ze(o,[If(),eR(" ")]),ze(e,[C9("menu")])),o.onclick=function(){return!1},e.firstChild.insertBefore(o,e.firstChild.firstChild)}function z$e(){this.hot.runHooks("beforeDropdownMenuShow",this)}function U$e(){this.hot.runHooks("afterDropdownMenuShow",this),Ys($o,this,hq).call(this,this.menu)}function G$e(n){Ys($o,this,hq).call(this,n)}function Y$e(){this.hot.listen(),this.hot.runHooks("afterDropdownMenuHide",this)}function K$e(n){return B$e(PE,this)?null:n}function q$e(n){Ue(n.target,Pw)&&uq(PE,this,!0)}IE.SEPARATOR={name:ft};function QW(n,e,t){return(e=X$e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function X$e(n){var e=Z$e(n,"string");return typeof e=="symbol"?e:e+""}function Z$e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class Q$e{constructor(e){QW(this,"hot",void 0),QW(this,"options",{}),this.hot=e}setOptions(e){this.options=e}getData(){const{startRow:e,startCol:t,endRow:i,endCol:r}=this._getDataRange(),s=this.options,o=[];return $e(e,i,a=>{const l=[];!s.exportHiddenRows&&this._isHiddenRow(a)||($e(t,r,c=>{!s.exportHiddenColumns&&this._isHiddenColumn(c)||l.push(this.hot.getDataAtCell(a,c))}),o.push(l))}),o}getRowHeaders(){const e=[];if(this.options.rowHeaders){const{startRow:t,endRow:i}=this._getDataRange(),r=this.hot.getRowHeader();$e(t,i,s=>{!this.options.exportHiddenRows&&this._isHiddenRow(s)||e.push(r[s])})}return e}getColumnHeaders(){const e=[];if(this.options.columnHeaders){const{startCol:t,endCol:i}=this._getDataRange(),r=this.hot.getColHeader();$e(t,i,s=>{!this.options.exportHiddenColumns&&this._isHiddenColumn(s)||e.push(r[s])})}return e}_getDataRange(){const e=this.hot.countCols()-1,t=this.hot.countRows()-1;let[i=0,r=0,s=t,o=e]=this.options.range;return i=Math.max(i,0),r=Math.max(r,0),s=Math.min(s,t),o=Math.min(o,e),{startRow:i,startCol:r,endRow:s,endCol:o}}_isHiddenRow(e){return this.hot.rowIndexMapper.isHidden(this.hot.toPhysicalRow(e))}_isHiddenColumn(e){return this.hot.columnIndexMapper.isHidden(this.hot.toPhysicalColumn(e))}}function JW(n,e,t){return(e=J$e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function J$e(n){var e=e2e(n,"string");return typeof e=="symbol"?e:e+""}function e2e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class CH{static get DEFAULT_OPTIONS(){return{mimeType:"text/plain",fileExtension:"txt",filename:"Handsontable [YYYY]-[MM]-[DD]",encoding:"utf-8",bom:!1,columnHeaders:!1,rowHeaders:!1,exportHiddenColumns:!1,exportHiddenRows:!1,range:[]}}constructor(e,t){JW(this,"dataProvider",void 0),JW(this,"options",void 0),this.dataProvider=e,this.options=this._mergeOptions(t),this.dataProvider.setOptions(this.options)}_mergeOptions(e){let t=sa(this.constructor.DEFAULT_OPTIONS);const i=new Date;return t=li(sa(CH.DEFAULT_OPTIONS),t),t=li(t,e),t.filename=$D(t.filename,{YYYY:i.getFullYear(),MM:`${i.getMonth()+1}`.padStart(2,"0"),DD:`${i.getDate()}`.padStart(2,"0")}),t}}const t2e="\r",n2e='"',i2e=`
`;class r2e extends CH{static get DEFAULT_OPTIONS(){return{mimeType:"text/csv",fileExtension:"csv",bom:!0,columnDelimiter:",",rowDelimiter:`\r
`}}export(){const e=this.options,t=this.dataProvider.getData();let i=this.dataProvider.getColumnHeaders();const r=i.length>0,s=this.dataProvider.getRowHeaders(),o=s.length>0;let a=e.bom?"\uFEFF":"";return r&&(i=vt(i,l=>this._escapeCell(l,!0)),o&&(a+=e.columnDelimiter),a+=i.join(e.columnDelimiter),a+=e.rowDelimiter),q(t,(l,c)=>{c>0&&(a+=e.rowDelimiter),o&&(a+=this._escapeCell(s[c])+e.columnDelimiter),a+=l.map(u=>this._escapeCell(u)).join(e.columnDelimiter)}),a}_escapeCell(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=jn(e);return i!==""&&(t||i.indexOf(t2e)>=0||i.indexOf(n2e)>=0||i.indexOf(i2e)>=0||i.indexOf(this.options.columnDelimiter)>=0)&&(i=i.replace(new RegExp('"',"g"),'""'),i=`"${i}"`),i}}const s2e="csv",JI={[s2e]:r2e};function o2e(n,e,t){return typeof JI[n]=="function"?new JI[n](e,t):null}const a2e="exportFile",l2e=240;class c2e extends Ht{static get PLUGIN_KEY(){return a2e}static get PLUGIN_PRIORITY(){return l2e}isEnabled(){return!0}exportAsString(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this._createTypeFormatter(e,t).export()}exportAsBlob(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this._createBlob(this._createTypeFormatter(e,t))}downloadFile(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{rootDocument:i,rootWindow:r}=this.hot,s=this._createTypeFormatter(e,t),o=this._createBlob(s),a=r.URL||r.webkitURL,l=i.createElement("a"),c=`${s.options.filename}.${s.options.fileExtension}`;if(l.download!==void 0){const u=a.createObjectURL(o);l.style.display="none",l.setAttribute("href",u),l.setAttribute("download",c),i.body.appendChild(l),l.dispatchEvent(new MouseEvent("click")),i.body.removeChild(l),setTimeout(()=>{a.revokeObjectURL(u)},100)}else navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob(o,c)}_createTypeFormatter(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!JI[e])throw new Error(`Export format type "${e}" is not supported.`);return o2e(e,new Q$e(this.hot),t)}_createBlob(e){let t=null;return typeof Blob<"u"&&(t=new Blob([e.export()],{type:`${e.options.mimeType};charset=${e.options.encoding}`})),t}}function pg(n,e,t){return(e=u2e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function u2e(n){var e=h2e(n,"string");return typeof e=="symbol"?e:e+""}function h2e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class Py{constructor(e,t){let{id:i,stateless:r=!0}=t;pg(this,"hot",void 0),pg(this,"id",void 0),pg(this,"elements",[]),pg(this,"hidden",!1),pg(this,"stateId",""),pg(this,"state",void 0),this.hot=e,this.id=i,this.stateId=`Filters.component.${this.id}`,this.state=r?null:this.hot.columnIndexMapper.registerMap(this.stateId,new dE)}getElements(){return this.elements}reset(){q(this.elements,e=>e.reset())}hide(){this.hidden=!0}show(){this.hidden=!1}isHidden(){return this.hot===null||this.hidden}restoreState(e){this.state&&this.setState(this.state.getValueAtIndex(e))}setState(){throw new Error("The state setting logic is not implemented")}saveState(e){this.state&&this.state.setValueAtIndex(e,this.getState())}getState(){throw new Error("The state gathering logic is not implemented")}destroy(){this.hot.columnIndexMapper.unregisterMap(this.stateId),this.clearLocalHooks(),q(this.elements,e=>e.destroy()),this.state=null,this.elements=null,this.hot=null}}qt(Py,Xi);const Iw={};function Xu(n,e){if(!Iw[n])throw Error(`Filter condition "${n}" does not exist.`);const{condition:t,descriptor:i}=Iw[n];let r=e;return i.inputValuesDecorator&&(r=i.inputValuesDecorator(r)),function(s){return t.apply(s.meta.instance,[].concat([s],[r]))}}function Pd(n){if(!Iw[n])throw Error(`Filter condition "${n}" does not exist.`);return Iw[n].descriptor}function ui(n,e,t){t.key=n,Iw[n]={condition:e,descriptor:t}}const Li="none";function d2e(){return!0}ui(Li,d2e,{name:fE,inputsCount:0,showOperators:!1});const Hv="empty";function f2e(n){return zn(n.value)}ui(Hv,f2e,{name:vN,inputsCount:0,showOperators:!0});const zS="not_empty";function g2e(n,e){return!Xu(Hv,e)(n)}ui(zS,g2e,{name:wN,inputsCount:0,showOperators:!0});const $v="eq";function p2e(n,e){let[t]=e;return jn(n.value).toLocaleLowerCase(n.meta.locale)===jn(t)}ui($v,p2e,{name:yN,inputsCount:1,showOperators:!0});const US="neq";function m2e(n,e){return!Xu($v,e)(n)}ui(US,m2e,{name:CN,inputsCount:1,showOperators:!0});const dq="gt";function b2e(n,e){let[t]=e,i=t;return n.meta.type==="numeric"&&(i=parseFloat(i,10)),n.value>i}ui(dq,b2e,{name:xN,inputsCount:1,showOperators:!0});const fq="gte";function v2e(n,e){let[t]=e,i=t;return n.meta.type==="numeric"&&(i=parseFloat(i,10)),n.value>=i}ui(fq,v2e,{name:TN,inputsCount:1,showOperators:!0});const gq="lt";function w2e(n,e){let[t]=e,i=t;return n.meta.type==="numeric"&&(i=parseFloat(i,10)),n.value<i}ui(gq,w2e,{name:MN,inputsCount:1,showOperators:!0});const pq="lte";function y2e(n,e){let[t]=e,i=t;return n.meta.type==="numeric"&&(i=parseFloat(i,10)),n.value<=i}ui(pq,y2e,{name:AN,inputsCount:1,showOperators:!0});const SH="date_after";function C2e(n,e){let[t]=e;const i=pe(n.value,n.meta.dateFormat),r=pe(t,n.meta.dateFormat);return!i.isValid()||!r.isValid()?!1:i.diff(r)>=0}ui(SH,C2e,{name:ON,inputsCount:1,showOperators:!0});const _H="date_before";function S2e(n,e){let[t]=e;const i=pe(n.value,n.meta.dateFormat),r=pe(t,n.meta.dateFormat);return!i.isValid()||!r.isValid()?!1:i.diff(r)<=0}ui(_H,S2e,{name:kN,inputsCount:1,showOperators:!0});const RR="between";function _2e(n,e){let[t,i]=e,r=t,s=i;if(n.meta.type==="numeric"){const o=parseFloat(r,10),a=parseFloat(s,10);r=Math.min(o,a),s=Math.max(o,a)}else if(n.meta.type==="date"){const o=Xu(_H,[s]),a=Xu(SH,[r]);return o(n)&&a(n)}return n.value>=r&&n.value<=s}ui(RR,_2e,{name:PN,inputsCount:2,showOperators:!0});const mq="not_between";function R2e(n,e){return!Xu(RR,e)(n)}ui(mq,R2e,{name:IN,inputsCount:2,showOperators:!0});const bq="begins_with";function E2e(n,e){let[t]=e;return jn(n.value).toLocaleLowerCase(n.meta.locale).startsWith(jn(t))}ui(bq,E2e,{name:SN,inputsCount:1,showOperators:!0});const vq="ends_with";function x2e(n,e){let[t]=e;return jn(n.value).toLocaleLowerCase(n.meta.locale).endsWith(jn(t))}ui(vq,x2e,{name:_N,inputsCount:1,showOperators:!0});const RH="contains";function T2e(n,e){let[t]=e;return jn(n.value).toLocaleLowerCase(n.meta.locale).indexOf(jn(t))>=0}ui(RH,T2e,{name:RN,inputsCount:1,showOperators:!0});const wq="not_contains";function M2e(n,e){return!Xu(RH,e)(n)}ui(wq,M2e,{name:EN,inputsCount:1,showOperators:!0});const yq="date_tomorrow";function A2e(n){const e=pe(n.value,n.meta.dateFormat);return e.isValid()?e.isSame(pe().subtract(-1,"days").startOf("day"),"d"):!1}ui(yq,A2e,{name:LN,inputsCount:0});const Cq="date_today";function P2e(n){const e=pe(n.value,n.meta.dateFormat);return e.isValid()?e.isSame(pe().startOf("day"),"d"):!1}ui(Cq,P2e,{name:DN,inputsCount:0});const Sq="date_yesterday";function I2e(n){const e=pe(n.value,n.meta.dateFormat);return e.isValid()?e.isSame(pe().subtract(1,"days").startOf("day"),"d"):!1}ui(Sq,I2e,{name:NN,inputsCount:0});Y9();function O2e(n,e){let t=n;return t===""&&(t=`(${e})`),t}const eO=new Set([1]).has(1),k2e=eO&&typeof Array.from=="function";function Iy(n){let e=n;return eO&&(e=new Set(e)),function(t){let i;return eO?i=e.has(t):i=!!~e.indexOf(t),i}}function _q(n){return n??""}function tO(n){let e=n;return k2e?e=Array.from(new Set(e)):e=LD(e),e=e.sort((t,i)=>typeof t=="number"&&typeof i=="number"?t-i:t===i?0:t>i?1:-1),e}function ej(n,e,t,i){const r=[],s=n===e;let o;return s||(o=Iy(e)),q(n,a=>{let l=!1;(s||o(a))&&(l=!0);const c={checked:l,value:a,visualValue:O2e(a,t)};i&&i(c),r.push(c)}),r}const Id="by_value";function D2e(n,e){let[t]=e;return t(n.value)}ui(Id,D2e,{name:"By value",inputsCount:0,inputValuesDecorator(n){let[e]=n;return[Iy(e)]},showOperators:!1});const Ow={};function L2e(n){if(!Ow[n])throw Error(`Operation with id "${n}" does not exist.`);const e=Ow[n].func;return function(t,i){return e(t,i)}}function N2e(n){return Ow[n].name}function EH(n,e,t){Ow[n]={name:e,func:t}}const Fu="conjunction",H2e=FN;function $2e(n,e){return n.every(t=>t.func(e))}EH(Fu,H2e,$2e);const ER="disjunction",F2e=gE;function B2e(n,e){return n.some(t=>t.func(e))}EH(ER,F2e,B2e);const xH="disjunctionWithExtraCondition",V2e=gE;function W2e(n,e){if(n.length<3)throw Error("Operation doesn't work on less then three conditions.");return n.slice(0,n.length-1).some(t=>t.func(e))&&n[n.length-1].func(e)}EH(xH,V2e,W2e);const j2e="numeric",Rq="text",z2e="date",tj={[j2e]:[Li,ft,Hv,zS,ft,$v,US,ft,dq,fq,gq,pq,RR,mq],[Rq]:[Li,ft,Hv,zS,ft,$v,US,ft,bq,vq,ft,RH,wq],[z2e]:[Li,ft,Hv,zS,ft,$v,US,ft,_H,SH,RR,ft,yq,Cq,Sq]};function U2e(n){const e=[];let t=n;return tj[t]||(t=Rq),q(tj[t],i=>{let r;i===ft?r={name:ft}:r=sa(Pd(i)),e.push(r)}),e}function fb(n,e,t){return(e=G2e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function G2e(n){var e=Y2e(n,"string");return typeof e=="symbol"?e:e+""}function Y2e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const xM="built",TM="building",nj=["click","input","keydown","keypress","keyup","focus","blur","change"];let Jo=class Eq{static get DEFAULTS(){return sa({className:"",value:"",tagName:"div",children:[],wrapIt:!0})}constructor(e,t){fb(this,"hot",void 0),fb(this,"eventManager",new uo(this)),fb(this,"options",void 0),fb(this,"_element",void 0),fb(this,"buildState",void 0),this.hot=e,this.options=li(Eq.DEFAULTS,t),this._element=this.hot.rootDocument.createElement(this.options.wrapIt?"div":this.options.tagName)}setValue(e){this.options.value=e,this.update()}getValue(){return this.options.value}get element(){return this.buildState===TM?this._element:this.buildState===xM?(this.update(),this._element):(this.buildState=TM,this.build(),this.buildState=xM,this._element)}isBuilt(){return this.buildState===xM}translateIfPossible(e){return typeof e=="string"&&e.startsWith(Lr)?this.hot.getTranslatedPhrase(e):e}build(){const e=(t,i)=>{this.eventManager.addEventListener(t,i,r=>this.runLocalHooks(i,r,this))};if(this.buildState||(this.buildState=TM),this._element.setAttribute("data-hot-input",!0),this.options.tabIndex!==void 0&&this._element.setAttribute("tabindex",this.options.tabIndex),this.options.role!==void 0&&this._element.setAttribute("role",this.options.role),this.options.className&&ge(this._element,this.options.className),this.options.children.length)q(this.options.children,t=>this._element.appendChild(t.element));else if(this.options.wrapIt){const t=this.hot.rootDocument.createElement(this.options.tagName);t.setAttribute("data-hot-input",!0),ut(this.options,(i,r)=>{t[r]!==void 0&&r!=="className"&&r!=="tagName"&&r!=="children"&&(t[r]=this.translateIfPossible(i))}),this._element.appendChild(t),q(nj,i=>e(t,i))}else q(nj,t=>e(this._element,t))}update(){}reset(){this.options.value="",this.update()}show(){this.element.style.display=""}hide(){this.element.style.display="none"}focus(){}destroy(){this.eventManager.destroy(),this.eventManager=null,this.hot=null,this._element.parentNode&&this._element.parentNode.removeChild(this._element),this._element=null}};qt(Jo,Xi);function K2e(n,e){xq(n,e),e.add(n)}function q2e(n,e,t){xq(n,e),e.set(n,t)}function xq(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function xC(n,e){return n.get(TH(n,e))}function X2e(n,e,t){return n.set(TH(n,e),t),t}function TH(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var mg=new WeakMap,ij=new WeakSet;class Bu extends Jo{static get DEFAULTS(){return sa({placeholder:"",type:"text",tagName:"input",tabIndex:-1})}constructor(e,t){super(e,li(Bu.DEFAULTS,t)),K2e(this,ij),q2e(this,mg,void 0),this.registerHooks()}registerHooks(){this.addLocalHook("keyup",e=>TH(ij,this,Z2e).call(this,e))}build(){super.build();const e=this.hot.rootDocument.createElement("div");X2e(mg,this,this._element.firstChild),ge(this._element,"htUIInput"),ge(e,"htUIInputIcon"),this._element.appendChild(e),this.update()}update(){this.isBuilt()&&(xC(mg,this).type=this.options.type,xC(mg,this).placeholder=this.translateIfPossible(this.options.placeholder),xC(mg,this).value=this.translateIfPossible(this.options.value))}focus(){this.isBuilt()&&xC(mg,this).focus()}}function Z2e(n){this.options.value=n.target.value}function Q2e(n,e){Tq(n,e),e.add(n)}function gb(n,e,t){Tq(n,e),e.set(n,t)}function Tq(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function bg(n,e,t){return n.set(Fv(n,e),t),t}function Hn(n,e){return n.get(Fv(n,e))}function Fv(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var Ci=new WeakMap,TC=new WeakMap,MC=new WeakMap,MM=new WeakMap,AC=new WeakMap,PC=new WeakSet;class kw extends Jo{static get DEFAULTS(){return sa({className:"htUISelect",wrapIt:!1,tabIndex:-1})}constructor(e,t){super(e,li(kw.DEFAULTS,t)),Q2e(this,PC),gb(this,Ci,null),gb(this,TC,[]),gb(this,MC,void 0),gb(this,MM,void 0),gb(this,AC,void 0),this.registerHooks()}getMenu(){return Hn(Ci,this)}registerHooks(){this.addLocalHook("click",()=>Fv(PC,this,tFe).call(this))}setItems(e){bg(TC,this,this.translateNames(e)),Hn(Ci,this)&&Hn(Ci,this).setMenuItems(Hn(TC,this))}translateNames(e){return q(e,t=>{t.name=this.translateIfPossible(t.name)}),e}build(){super.build(),bg(Ci,this,new lm(this.hot,{className:"htSelectUI htFiltersConditionsMenu",keepInViewport:!1,standalone:!0,container:this.options.menuContainer})),Hn(Ci,this).setMenuItems(Hn(TC,this));const e=new Jo(this.hot,{className:"htUISelectCaption"}),t=new Jo(this.hot,{className:"htUISelectDropdown"});bg(MC,this,e),bg(MM,this,e.element),bg(AC,this,t),this.hot.getSettings().ariaTags&&(ze(t.element,[If()]),ze(this._element,[y9()])),q([e,t],i=>this._element.appendChild(i.element)),Hn(Ci,this).addLocalHook("select",i=>Fv(PC,this,J2e).call(this,i)),Hn(Ci,this).addLocalHook("afterClose",()=>Fv(PC,this,eFe).call(this)),this.update()}update(){if(!this.isBuilt())return;let e;this.options.value?e=this.options.value.name:e=Hn(Ci,this).hot.getTranslatedPhrase(fE),Hn(MM,this).textContent=e,super.update()}openOptions(){const e=this.element.getBoundingClientRect();Hn(Ci,this)&&(Hn(Ci,this).open(),Hn(Ci,this).setPosition({left:this.hot.isLtr()?e.left-5:e.left-31,top:e.top-1,width:e.width,height:e.height}),Hn(Ci,this).getNavigator().toFirstItem(),Hn(Ci,this).getKeyboardShortcutsCtrl().addCustomShortcuts([{keys:[["Tab"],["Shift","Tab"]],callback:t=>{this.closeOptions(),this.runLocalHooks("tabKeydown",t)}},{keys:[["Control/Meta","A"]],callback:()=>!1}]))}closeOptions(){Hn(Ci,this)&&Hn(Ci,this).close()}focus(){this.isBuilt()&&this.element.focus()}destroy(){Hn(Ci,this)&&(Hn(Ci,this).destroy(),bg(Ci,this,null)),Hn(MC,this)&&Hn(MC,this).destroy(),Hn(AC,this)&&Hn(AC,this).destroy(),super.destroy()}}function J2e(n){n.name!==ft&&(this.options.value=n,this.update(),this.runLocalHooks("select",this.options.value))}function eFe(){this.runLocalHooks("afterClose")}function tFe(){this.openOptions()}function nFe(n,e){iFe(n,e),e.add(n)}function iFe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function rj(n,e,t){return(e=rFe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function rFe(n){var e=sFe(n,"string");return typeof e=="symbol"?e:e+""}function sFe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function sj(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var AM=new WeakSet;class nO extends Py{constructor(e,t){super(e,{id:t.id,stateless:!1}),nFe(this,AM),rj(this,"name",""),rj(this,"addSeparator",!1),this.name=t.name,this.addSeparator=t.addSeparator,this.elements.push(new kw(this.hot,{menuContainer:t.menuContainer})),this.elements.push(new Bu(this.hot,{placeholder:UN})),this.elements.push(new Bu(this.hot,{placeholder:GN})),this.registerHooks()}registerHooks(){this.getSelectElement().addLocalHook("select",e=>sj(AM,this,oFe).call(this,e)).addLocalHook("afterClose",()=>this.runLocalHooks("afterClose")).addLocalHook("tabKeydown",e=>this.runLocalHooks("selectTabKeydown",e)),q(this.getInputElements(),e=>{e.addLocalHook("keydown",t=>sj(AM,this,aFe).call(this,t))})}setState(e){if(this.reset(),!e)return;const t=sa(e.command);t.name.startsWith(Gn)&&(t.name=this.hot.getTranslatedPhrase(t.name)),this.getSelectElement().setValue(t),q(e.args,(i,r)=>{if(r>t.inputsCount-1)return!1;const s=this.getInputElement(r);s.setValue(i),s[t.inputsCount>r?"show":"hide"](),r||this.hot._registerTimeout(()=>s.focus(),10)})}getState(){const e=this.getSelectElement().getValue()||Pd(Li),t=[];return q(this.getInputElements(),(i,r)=>{e.inputsCount>r&&t.push(i.getValue())}),{command:e,args:t}}updateState(e,t){const i=Pd(e?e.name:Li);this.state.setValueAtIndex(t,{command:i,args:e?e.args:[]}),e||q(this.getInputElements(),r=>r.setValue(null))}getSelectElement(){return this.elements.filter(e=>e instanceof kw)[0]}getInputElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.getInputElements()[e]}getInputElements(){return this.elements.filter(e=>e instanceof Bu)}getMenuItemDescriptor(){return{key:this.id,name:this.name,isCommand:!1,disableSelection:!0,hidden:()=>this.isHidden(),renderer:(e,t,i,r,s,o)=>{ge(t.parentNode,"htFiltersMenuCondition"),this.addSeparator&&ge(t.parentNode,"border");const a=this.hot.rootDocument.createElement("div");return ge(a,"htFiltersMenuLabel"),a.textContent=o,t.appendChild(a),t.parentElement.hasAttribute("ghost-table")||q(this.elements,l=>t.appendChild(l.element)),t}}}reset(){const e=this.hot.getPlugin("filters").getSelectedColumn();let t=[Pd(Li)];if(e!==null){const{visualIndex:i}=e;t=U2e(this.hot.getDataType(0,i,this.hot.countRows(),i))}q(this.getInputElements(),i=>i.hide()),this.getSelectElement().setItems(t),super.reset(),this.getSelectElement().setValue(t[0])}}function oFe(n){q(this.getInputElements(),(e,t)=>{e[n.inputsCount>t?"show":"hide"](),t===0&&this.hot._registerTimeout(()=>e.focus(),10)}),this.runLocalHooks("change",n)}function aFe(n){rm(n.keyCode,"ESCAPE")&&(this.runLocalHooks("cancel"),bo(n))}function oj(n,e,t){lFe(n,e),e.set(n,t)}function lFe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function pb(n,e){return n.get(Mq(n,e))}function aj(n,e,t){return n.set(Mq(n,e),t),t}function Mq(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var vg=new WeakMap,PM=new WeakMap;class xR extends Jo{static get DEFAULTS(){return sa({type:"radio",tagName:"input",className:"htUIRadio",label:{}})}constructor(e,t){super(e,li(xR.DEFAULTS,t)),oj(this,vg,void 0),oj(this,PM,void 0)}build(){super.build();const e=this.hot.rootDocument.createElement("label");e.textContent=this.translateIfPossible(this.options.label.textContent),e.htmlFor=this.translateIfPossible(this.options.label.htmlFor),aj(PM,this,e),aj(vg,this,this._element.firstChild),pb(vg,this).checked=this.options.checked,this._element.appendChild(e),this.update()}update(){this.isBuilt()&&(pb(PM,this).textContent=this.translateIfPossible(this.options.label.textContent))}isChecked(){return this.isBuilt()?pb(vg,this).checked:!1}setChecked(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isBuilt()&&(pb(vg,this).checked=e)}focus(){this.isBuilt()&&pb(vg,this).focus()}}function cFe(n,e){uFe(n,e),e.add(n)}function uFe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function hFe(n,e,t){return(e=dFe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function dFe(n){var e=fFe(n,"string");return typeof e=="symbol"?e:e+""}function fFe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function gFe(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const lj=0;var cj=new WeakSet;class pFe extends Py{constructor(e,t){super(e,{id:t.id,stateless:!1}),cFe(this,cj),hFe(this,"name",""),this.name=t.name,this.buildOperatorsElement()}getMenuItemDescriptor(){return{key:this.id,name:this.name,isCommand:!1,disableSelection:!0,hidden:()=>this.isHidden(),renderer:(e,t)=>(ge(t.parentNode,"htFiltersMenuOperators"),q(this.elements,i=>t.appendChild(i.element)),t)}}buildOperatorsElement(){const e=[Fu,ER];q(e,t=>{const i=new xR(this.hot,{name:"operator",label:{htmlFor:t,textContent:N2e(t)},value:t,checked:t===e[lj],id:t});i.addLocalHook("change",r=>gFe(cj,this,mFe).call(this,r)),this.elements.push(i)})}setChecked(e){if(this.elements.length<e)throw Error(Kt`Radio button with index ${e} doesn't exist.`);q(this.elements,(t,i)=>{t.setChecked(i===e)})}getActiveOperationId(){const e=this.elements.find(t=>t instanceof xR&&t.isChecked());return e?e.getValue():Fu}getState(){return this.getActiveOperationId()}setState(e){this.reset(),e&&this.getActiveOperationId()!==e&&q(this.elements,t=>{t.setChecked(t.getValue()===e)})}updateState(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Fu,t=arguments.length>1?arguments[1]:void 0,i=e;i===xH&&(i=ER),this.state.setValueAtIndex(t,i)}reset(){this.setChecked(lj)}}function mFe(n){this.setState(n.target.value)}function bFe(n,e,t){vFe(n,e),e.set(n,t)}function vFe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function IM(n,e){return n.get(Aq(n,e))}function wFe(n,e,t){return n.set(Aq(n,e),t),t}function Aq(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var mb=new WeakMap;class Dw extends Jo{static get DEFAULTS(){return sa({href:"#",tagName:"a",tabIndex:-1,role:"button"})}constructor(e,t){super(e,li(Dw.DEFAULTS,t)),bFe(this,mb,void 0)}build(){super.build(),wFe(mb,this,this._element.firstChild)}update(){this.isBuilt()&&(IM(mb,this).textContent=this.translateIfPossible(this.options.textContent))}focus(){this.isBuilt()&&IM(mb,this).focus()}activate(){IM(mb,this).click()}}function yFe(n,e){Pq(n,e),e.add(n)}function wg(n,e,t){Pq(n,e),e.set(n,t)}function Pq(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function at(n,e){return n.get(tp(n,e))}function Io(n,e,t){return n.set(tp(n,e),t),t}function tp(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const uj="multipleSelect.itemBox";var Fo=new WeakMap,ri=new WeakMap,OM=new WeakMap,Fl=new WeakMap,Jc=new WeakMap,eu=new WeakMap,bb=new WeakSet;class Lw extends Jo{static get DEFAULTS(){return sa({className:"htUIMultipleSelect",value:[]})}constructor(e,t){super(e,li(Lw.DEFAULTS,t)),yFe(this,bb),wg(this,Fo,[]),wg(this,ri,void 0),wg(this,OM,void 0),wg(this,Fl,void 0),wg(this,Jc,void 0),wg(this,eu,void 0),Io(Fl,this,new Bu(this.hot,{placeholder:zN,className:"htUIMultipleSelectSearch"})),Io(Jc,this,new Dw(this.hot,{textContent:BN,className:"htUISelectAll"})),Io(eu,this,new Dw(this.hot,{textContent:VN,className:"htUIClearAll"})),this.registerHooks()}getItemsBox(){return at(ri,this)}registerHooks(){at(Fl,this).addLocalHook("keydown",e=>tp(bb,this,SFe).call(this,e)),at(Fl,this).addLocalHook("input",e=>tp(bb,this,CFe).call(this,e)),at(Jc,this).addLocalHook("click",e=>tp(bb,this,_Fe).call(this,e)),at(eu,this).addLocalHook("click",e=>tp(bb,this,RFe).call(this,e))}setItems(e){var t;Io(Fo,this,e),(t=at(ri,this))===null||t===void 0||t.loadData(at(Fo,this))}setLocale(e){Io(OM,this,e)}getLocale(){return at(OM,this)}getItems(){return[...at(Fo,this)]}getValue(){return xFe(at(Fo,this))}getSearchInputElement(){return at(Fl,this)}getSelectAllElement(){return at(Jc,this)}getClearAllElement(){return at(eu,this)}isSelectedAllValues(){return at(Fo,this).length===this.getValue().length}build(){super.build();const{rootDocument:e}=this.hot,t=e.createElement("div"),i=new Jo(this.hot,{className:"htUISelectionControls",children:[at(Jc,this),at(eu,this)]});this._element.appendChild(at(Fl,this).element),this._element.appendChild(i.element),this._element.appendChild(t);const r=s=>{var o;if(!this._element)return;(o=at(ri,this))===null||o===void 0||o.destroy(),ge(s,"htUIMultipleSelectHot"),Io(ri,this,new this.hot.constructor(s,{data:at(Fo,this),columns:[{data:"checked",type:"checkbox",label:{property:"visualValue",position:"after"}}],beforeRenderer:(c,u,h,d,f,g)=>{c.title=g.instance.getDataAtRowProp(u,g.label.property)},afterListen:()=>{this.runLocalHooks("focus",this)},beforeOnCellMouseUp:()=>{at(ri,this).listen()},colWidths:()=>at(ri,this).container.scrollWidth-Pi(e),maxCols:1,autoWrapCol:!0,height:110,copyPaste:!1,disableVisualSelection:"area",fillHandle:!1,fragmentSelection:"cell",tabMoves:{row:1,col:0},layoutDirection:this.hot.isRtl()?"rtl":"ltr"})),at(ri,this).init();const l=at(ri,this).getShortcutManager().getContext("grid");l.removeShortcutsByKeys(["Tab"]),l.removeShortcutsByKeys(["Shift","Tab"]),l.addShortcut({keys:[["Escape"]],callback:c=>{this.runLocalHooks("keydown",c,this)},group:uj}),l.addShortcut({keys:[["Tab"],["Shift","Tab"]],callback:c=>{at(ri,this).deselectCell(),this.runLocalHooks("keydown",c,this),this.runLocalHooks("listTabKeydown",c,this)},group:uj})};r(t),this.hot._registerTimeout(()=>r(t),100)}focus(){this.isBuilt()&&at(ri,this).listen()}reset(){at(Fl,this).reset(),at(Jc,this).reset(),at(eu,this).reset()}update(){this.isBuilt()&&(at(ri,this).loadData(EFe(at(Fo,this),this.options.value)),super.update())}destroy(){var e;(e=at(ri,this))===null||e===void 0||e.destroy(),at(Fl,this).destroy(),at(eu,this).destroy(),at(Jc,this).destroy(),Io(Fl,this,null),Io(eu,this,null),Io(Jc,this,null),Io(ri,this,null),Io(Fo,this,null),super.destroy()}}function CFe(n){const e=n.target.value.toLocaleLowerCase(this.getLocale());let t;e===""?t=[...at(Fo,this)]:t=at(Fo,this).filter(i=>`${i.value}`.toLocaleLowerCase(this.getLocale()).indexOf(e)>=0),at(ri,this).loadData(t)}function SFe(n){this.runLocalHooks("keydown",n,this),qD(rm,n.keyCode)("ARROW_DOWN")&&(n.preventDefault(),bo(n),at(ri,this).listen(),at(ri,this).selectCell(0,0))}function _Fe(n){const e=[];n.preventDefault(),at(ri,this).getSourceData().forEach((t,i)=>{t.checked=!0,e.push(ML(t,i)[0])}),at(ri,this).setSourceDataAtCell(e)}function RFe(n){const e=[];n.preventDefault(),at(ri,this).getSourceData().forEach((t,i)=>{t.checked=!1,e.push(ML(t,i)[0])}),at(ri,this).setSourceDataAtCell(e)}function EFe(n,e){const t=Iy(e);return n.map(i=>(i.checked=t(i.value),i))}function xFe(n){const e=[];return n.forEach(t=>{t.checked&&e.push(t.value)}),e}function TFe(n,e){MFe(n,e),e.add(n)}function MFe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function AFe(n,e,t){return(e=PFe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function PFe(n){var e=IFe(n,"string");return typeof e=="symbol"?e:e+""}function IFe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function IC(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var vb=new WeakSet;class OFe extends Py{constructor(e,t){super(e,{id:t.id,stateless:!1}),TFe(this,vb),AFe(this,"name",""),this.name=t.name,this.elements.push(new Lw(this.hot)),this.registerHooks()}registerHooks(){this.getMultipleSelectElement().addLocalHook("keydown",e=>IC(vb,this,kFe).call(this,e)).addLocalHook("listTabKeydown",e=>this.runLocalHooks("listTabKeydown",e)),this.hot.addHook("modifyFiltersMultiSelectValue",(e,t)=>IC(vb,this,DFe).call(this,e,t))}getElements(){const e=this.getMultipleSelectElement();return[e.getSearchInputElement(),e.getSelectAllElement(),e.getClearAllElement(),this.getMultipleSelectElement()]}setState(e){if(this.reset(),e&&e.command.key===Id){const t=this.getMultipleSelectElement();t.setItems(e.itemsSnapshot),t.setValue(e.args[0]),t.setLocale(e.locale)}}getState(){const e=this.getMultipleSelectElement(),t=e.getItems();return{command:{key:e.isSelectedAllValues()||!t.length?Li:Id},args:[e.getValue()],itemsSnapshot:t}}updateState(e){const t=(i,r,s,o,a)=>{const[l]=Ac(r,h=>h.name===Id),c={},u=this.hot.getTranslatedPhrase(gR);if(l){const h=o(i,a),d=vt(h,y=>y.value),f=new Map(h.map(y=>[y.value,this.hot.getCellMeta(y.meta.visualRow,y.meta.visualCol)])),g=tO(d);s&&(l.args[0]=s);const p=[],m=ej(g,l.args[0],u,y=>{y.checked&&p.push(y.value),IC(vb,this,hj).call(this,y,f)}),v=e.editedConditionStack.column;c.locale=this.hot.getCellMeta(0,v).locale,c.args=[p],c.command=Pd(Id),c.itemsSnapshot=m}else c.args=[],c.command=Pd(Li);this.state.setValueAtIndex(i,c)};t(e.editedConditionStack.column,e.editedConditionStack.conditions,e.conditionArgsChange,e.filteredRowsFactory),e.dependentConditionStacks.length&&t(e.dependentConditionStacks[0].column,e.dependentConditionStacks[0].conditions,e.conditionArgsChange,e.filteredRowsFactory,e.editedConditionStack)}getMultipleSelectElement(){return this.elements.filter(e=>e instanceof Lw)[0]}getMenuItemDescriptor(){return{key:this.id,name:this.name,isCommand:!1,disableSelection:!0,hidden:()=>this.isHidden(),renderer:(e,t,i,r,s,o)=>{ge(t.parentNode,"htFiltersMenuValue");const a=this.hot.rootDocument.createElement("div");return ge(a,"htFiltersMenuLabel"),a.textContent=o,t.appendChild(a),t.parentElement.hasAttribute("ghost-table")||q(this.elements,l=>t.appendChild(l.element)),t}}}reset(){const e=this.hot.getTranslatedPhrase(gR),t=this._getColumnVisibleValues(),i=t.map(l=>l.value),r=new Map(t.map(l=>[l.value,l.meta])),s=tO(i),o=ej(s,s,e,l=>{IC(vb,this,hj).call(this,l,r)});this.getMultipleSelectElement().setItems(o),super.reset(),this.getMultipleSelectElement().setValue(s);const a=this.hot.getPlugin("filters").getSelectedColumn();a!==null&&this.getMultipleSelectElement().setLocale(this.hot.getCellMeta(0,a.visualIndex).locale)}_getColumnVisibleValues(){const e=this.hot.getPlugin("filters").getSelectedColumn();return e===null?[]:vt(this.hot.getDataAtCol(e.visualIndex),(t,i)=>({value:_q(t),meta:this.hot.getCellMeta(i,e.visualIndex)}))}}function kFe(n){rm(n.keyCode,"ESCAPE")&&(this.runLocalHooks("cancel"),bo(n))}function hj(n,e){this.hot.hasHook("modifyFiltersMultiSelectValue")&&(n.visualValue=this.hot.runHooks("modifyFiltersMultiSelectValue",n.visualValue,e.get(n.value)))}function DFe(n,e){switch(e.type){case"numeric":return _K(n,e);default:return n}}var Iq;function LFe(n,e){NFe(n,e),e.add(n)}function NFe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function HFe(n,e,t){return(e=$Fe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function $Fe(n){var e=FFe(n,"string");return typeof e=="symbol"?e:e+""}function FFe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function BFe(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var dj=new WeakSet;class Nw extends Py{static get BUTTON_OK(){return"ok"}static get BUTTON_CANCEL(){return"cancel"}constructor(e,t){super(e,{id:t.id,stateless:!0}),LFe(this,dj),HFe(this,"name",""),this.name=t.name,this.elements.push(new Bu(this.hot,{type:"button",value:WN,className:"htUIButton htUIButtonOK",identifier:Nw.BUTTON_OK})),this.elements.push(new Bu(this.hot,{type:"button",value:jN,className:"htUIButton htUIButtonCancel",identifier:Nw.BUTTON_CANCEL})),this.registerHooks()}registerHooks(){q(this.elements,e=>{e.addLocalHook("click",(t,i)=>BFe(dj,this,VFe).call(this,t,i))})}getMenuItemDescriptor(){return{key:this.id,name:this.name,isCommand:!1,disableSelection:!0,hidden:()=>this.isHidden(),renderer:(e,t)=>(ge(t.parentNode,"htFiltersMenuActionBar"),q(this.elements,i=>t.appendChild(i.element)),t)}}accept(){this.runLocalHooks("accept")}cancel(){this.runLocalHooks("cancel")}}Iq=Nw;function VFe(n,e){e.options.identifier===Iq.BUTTON_OK?this.accept():this.cancel()}function OC(n,e,t){return(e=WFe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function WFe(n){var e=jFe(n,"string");return typeof e=="symbol"?e:e+""}function jFe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const fj="ConditionCollection.filteringStates";class MH{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;OC(this,"hot",void 0),OC(this,"isMapRegistrable",void 0),OC(this,"filteringStates",new dE),OC(this,"previousConditionStack",null),this.hot=e,this.isMapRegistrable=t,this.isMapRegistrable===!0?this.hot.columnIndexMapper.registerMap(fj,this.filteringStates):this.filteringStates.init(this.hot.columnIndexMapper.getNumberOfIndexes())}isEmpty(){return this.getFilteredColumns().length===0}isMatch(e,t){var i;const r=this.filteringStates.getValueAtIndex(t),s=(i=r==null?void 0:r.conditions)!==null&&i!==void 0?i:[],o=r==null?void 0:r.operation;return this.isMatchInConditions(s,e,o)}isMatchInConditions(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Fu;return e.length?L2e(i)(e,t):!0}addCondition(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Fu,r=arguments.length>3?arguments[3]:void 0;const s=this.hot.getCellMeta(0,e).locale,o=vt(t.args,u=>typeof u=="string"?u.toLocaleLowerCase(s):u),a=t.name||t.command.key;this.previousConditionStack===null&&this.setPreviousConditionStack(this.exportAllConditions()),this.runLocalHooks("beforeAdd",e);const l=this.getOperation(e);if(l){if(l!==i)throw Error(Kt`The column of index ${e} has been already applied with a \`${l}\`\x20
        filter operation. Use \`removeConditions\` to clear the current conditions and then add new ones.\x20
        Mind that you cannot mix different types of operations (for instance, if you use \`conjunction\`,\x20
        use it consequently for a particular column).`)}else if(fn(Ow[i]))throw new Error(Kt`Unexpected operation named \`${i}\`. Possible ones are\x20
        \`disjunction\` and \`conjunction\`.`);const c=this.getConditions(e);c.length===0?this.filteringStates.setValueAtIndex(e,{operation:i,conditions:[{name:a,args:o,func:Xu(a,o)}]},r):c.push({name:a,args:o,func:Xu(a,o)}),this.runLocalHooks("afterAdd",e)}getConditions(e){var t,i;return(t=(i=this.filteringStates.getValueAtIndex(e))===null||i===void 0?void 0:i.conditions)!==null&&t!==void 0?t:[]}getOperation(e){var t;return(t=this.filteringStates.getValueAtIndex(e))===null||t===void 0?void 0:t.operation}getFilteredColumns(){return this.filteringStates.getEntries().map(e=>{let[t]=e;return t})}getColumnStackPosition(e){return this.getFilteredColumns().indexOf(e)}exportAllConditions(){return ci(this.filteringStates.getEntries(),(e,t)=>{let[i,{operation:r,conditions:s}]=t;return e.push({column:i,operation:r,conditions:vt(s,o=>{let{name:a,args:l}=o;return{name:a,args:l}})}),e},[])}importAllConditions(e){this.clean(),q(e,t=>{q(t.conditions,i=>this.addCondition(t.column,i))})}removeConditions(e){this.setPreviousConditionStack(this.exportAllConditions()),this.runLocalHooks("beforeRemove",e),this.filteringStates.clearValue(e),this.runLocalHooks("afterRemove",e)}clean(){this.runLocalHooks("beforeClean"),this.filteringStates.clear(),this.runLocalHooks("afterClean")}hasConditions(e,t){const i=this.getConditions(e);return t?i.some(r=>r.name===t):i.length>0}setPreviousConditionStack(e){this.previousConditionStack=e}destroy(){this.isMapRegistrable&&this.hot.columnIndexMapper.unregisterMap(fj),this.filteringStates=null,this.clearLocalHooks()}}qt(MH,Xi);function gj(n,e,t){return(e=zFe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function zFe(n){var e=UFe(n,"string");return typeof e=="symbol"?e:e+""}function UFe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class Oq{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:()=>[];gj(this,"conditionCollection",void 0),gj(this,"columnDataFactory",void 0),this.conditionCollection=e,this.columnDataFactory=t}filter(){let e=[];return q(this.conditionCollection.getFilteredColumns(),(t,i)=>{let r=this.columnDataFactory(t);i&&(r=this._getIntersectData(r,e)),e=this.filterByColumn(t,r)}),e}filterByColumn(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const i=[];return q(t,r=>{r!==void 0&&this.conditionCollection.isMatch(r,e)&&i.push(r)}),i}_getIntersectData(e,t){const i=[];return q(t,r=>{const s=r.meta.visualRow;e[s]!==void 0&&(i[s]=e[s])}),i}}function GFe(n,e){YFe(n,e),e.add(n)}function YFe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Uh(n,e,t){return(e=KFe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function KFe(n){var e=qFe(n,"string");return typeof e=="symbol"?e:e+""}function qFe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function kM(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var kC=new WeakSet;class kq{constructor(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:()=>[];GFe(this,kC),Uh(this,"hot",void 0),Uh(this,"conditionCollection",void 0),Uh(this,"columnDataFactory",void 0),Uh(this,"changes",[]),Uh(this,"grouping",!1),Uh(this,"latestEditedColumnPosition",-1),Uh(this,"latestOrderStack",[]),this.hot=e,this.conditionCollection=t,this.columnDataFactory=i,this.conditionCollection.addLocalHook("beforeRemove",r=>kM(kC,this,XFe).call(this,r)),this.conditionCollection.addLocalHook("afterRemove",r=>this.updateStatesAtColumn(r)),this.conditionCollection.addLocalHook("afterAdd",r=>this.updateStatesAtColumn(r)),this.conditionCollection.addLocalHook("beforeClean",()=>kM(kC,this,ZFe).call(this)),this.conditionCollection.addLocalHook("afterClean",()=>kM(kC,this,QFe).call(this))}groupChanges(){this.grouping=!0}flush(){this.grouping=!1,q(this.changes,e=>{this.updateStatesAtColumn(e)}),this.changes.length=0}updateStatesAtColumn(e,t){var i=this;if(this.grouping){this.changes.indexOf(e)===-1&&this.changes.push(e);return}const r=this.conditionCollection.exportAllConditions();let s=this.conditionCollection.getColumnStackPosition(e);s===-1&&(s=this.latestEditedColumnPosition);const o=r.slice(0,s),a=r.slice(s);a.length&&a[0].column===e&&a.shift();const l=B9(function(u,h){let d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];const f=new MH(i.hot,!1),g=[].concat(u,d);f.importAllConditions(g);const p=i.columnDataFactory(h);let m;f.isEmpty()?m=p:m=new Oq(f,y=>i.columnDataFactory(y)).filter(),m=vt(m,y=>y.meta.visualRow);const v=Iy(m);return f.destroy(),Ac(p,y=>v(y.meta.visualRow))})(o),c=[].concat(this.conditionCollection.getConditions(e));this.runLocalHooks("update",{editedConditionStack:{column:e,conditions:c},dependentConditionStacks:a,filteredRowsFactory:l,conditionArgsChange:t})}destroy(){this.clearLocalHooks(),ut(this,(e,t)=>{this[t]=null})}}function XFe(n){this.latestEditedColumnPosition=this.conditionCollection.getColumnStackPosition(n)}function ZFe(){this.latestOrderStack=this.conditionCollection.getFilteredColumns()}function QFe(){q(this.latestOrderStack,n=>{this.updateStatesAtColumn(n)})}qt(kq,Xi);function JFe(n){return eq({initialPage:0,size:()=>n.length,onItemSelect:(t,i)=>{const r=n[t];if(r instanceof Lw)return i;if(r.element&&!lf(r.element))return!1;r.focus()}})}const wb="filters";function eBe(n,e){let t=-1;const i=JFe(e),r=l=>()=>{n.isOpened()&&n.getKeyboardShortcutsCtrl().listen(wb),i.setCurrentPage(e.indexOf(l))};e.forEach(l=>{l instanceof Jo&&(l.addLocalHook("click",r(l)),l.addLocalHook("focus",r(l)),l.addLocalHook("afterClose",r(l)))}),n.addLocalHook("afterSelectionChange",l=>{l.key.startsWith("filter_")||i.clear()});function s(l){const c=n.getKeyboardShortcutsCtrl(),u=l.getKeyboardShortcutsCtrl();i.clear(),u.addCustomShortcuts([{keys:[["Tab"],["Shift","Tab"]],forwardToContext:c.getContext(wb),callback:()=>{l.isSubMenu()&&l.close(),c.listen(wb)}}]),!l.isSubMenu()&&c.addCustomShortcuts([{keys:[["Tab"],["Shift","Tab"]],callback:h=>{const d=n.getNavigator();d.getCurrentPage()>-1&&(t=d.getCurrentPage()),d.clear(),h.shiftKey?i.toPreviousItem():i.toNextItem()}},{keys:[["Escape"]],callback:()=>{n.close()}},{keys:[["Enter"],["Space"]],preventDefault:!1,callback:h=>{const d=e[i.getCurrentPage()];d instanceof kw&&(d.openOptions(),h.preventDefault()),d instanceof Dw&&(d.activate(),h.preventDefault()),d instanceof Jo||h.preventDefault()}}],wb)}n.addLocalHook("afterSubmenuOpen",s),n.addLocalHook("afterOpen",s);function o(){n.focus(),n.getKeyboardShortcutsCtrl().listen(wb)}function a(){return t}return{...i,listen:o,getLastMenuPage:a}}function tBe(n,e){Dq(n,e),e.add(n)}function nBe(n,e,t){Dq(n,e),e.set(n,t)}function Dq(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function yb(n,e,t){return(e=iBe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function iBe(n){var e=rBe(n,"string");return typeof e=="symbol"?e:e+""}function rBe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function sBe(n,e,t){return n.set(as(n,e),t),t}function Cb(n,e){return n.get(as(n,e))}function as(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const iO="filters",oBe=250,pj=iO;var Gh=new WeakMap,Bs=new WeakSet;class aBe extends Ht{static get PLUGIN_KEY(){return iO}static get PLUGIN_PRIORITY(){return oBe}static get PLUGIN_DEPS(){return["plugin:DropdownMenu","plugin:HiddenRows","cell-type:checkbox"]}constructor(e){super(e),tBe(this,Bs),yb(this,"dropdownMenuPlugin",null),yb(this,"conditionCollection",null),yb(this,"conditionUpdateObserver",null),yb(this,"components",new Map([["filter_by_condition",null],["filter_operators",null],["filter_by_condition2",null],["filter_by_value",null],["filter_action_bar",null]])),yb(this,"filtersRowsMap",null),nBe(this,Gh,void 0),this.hot.addHook("afterGetColHeader",(t,i)=>as(Bs,this,fBe).call(this,t,i))}isEnabled(){return!!this.hot.getSettings()[iO]}enablePlugin(){if(this.enabled)return;this.filtersRowsMap=this.hot.rowIndexMapper.registerMap(this.pluginName,new _y),this.dropdownMenuPlugin=this.hot.getPlugin("dropdownMenu");const e=this.hot.getSettings().dropdownMenu,t=e&&e.uiContainer||this.hot.rootDocument.body,i=o=>(o.addLocalHook("accept",()=>as(Bs,this,mj).call(this,"accept")),o.addLocalHook("cancel",()=>as(Bs,this,mj).call(this,"cancel")),o.addLocalHook("change",a=>as(Bs,this,dBe).call(this,o,a)),o),r=()=>`${this.hot.getTranslatedPhrase(HN)}:`,s=()=>`${this.hot.getTranslatedPhrase($N)}:`;if(!this.components.get("filter_by_condition")){const o=new nO(this.hot,{id:"filter_by_condition",name:r,addSeparator:!1,menuContainer:t});o.addLocalHook("afterClose",()=>as(Bs,this,bj).call(this)),this.components.set("filter_by_condition",i(o))}if(this.components.get("filter_operators")||this.components.set("filter_operators",new pFe(this.hot,{id:"filter_operators",name:"Operators"})),!this.components.get("filter_by_condition2")){const o=new nO(this.hot,{id:"filter_by_condition2",name:"",addSeparator:!0,menuContainer:t});o.addLocalHook("afterClose",()=>as(Bs,this,bj).call(this)),this.components.set("filter_by_condition2",i(o))}if(this.components.get("filter_by_value")||this.components.set("filter_by_value",i(new OFe(this.hot,{id:"filter_by_value",name:s}))),this.components.get("filter_action_bar")||this.components.set("filter_action_bar",i(new Nw(this.hot,{id:"filter_action_bar",name:"Action bar"}))),this.conditionCollection||(this.conditionCollection=new MH(this.hot)),this.conditionUpdateObserver||(this.conditionUpdateObserver=new kq(this.hot,this.conditionCollection,o=>this.getDataMapAtColumn(o)),this.conditionUpdateObserver.addLocalHook("update",o=>as(Bs,this,gBe).call(this,o))),this.components.forEach(o=>o.show()),this.addHook("afterDropdownMenuDefaultOptions",o=>as(Bs,this,hBe).call(this,o)),this.addHook("afterDropdownMenuShow",()=>as(Bs,this,cBe).call(this)),this.addHook("afterDropdownMenuHide",()=>as(Bs,this,uBe).call(this)),this.addHook("afterChange",o=>as(Bs,this,lBe).call(this,o)),this.hot.getSettings().dropdownMenu&&this.dropdownMenuPlugin&&(this.dropdownMenuPlugin.disablePlugin(),this.dropdownMenuPlugin.enablePlugin()),!Cb(Gh,this)&&this.dropdownMenuPlugin.enabled){const o=this.dropdownMenuPlugin.menu,a=[{focus:()=>{const c=o.getNavigator(),u=Cb(Gh,this).getLastMenuPage();o.focus(),u>0?c.setCurrentPage(u):c.toFirstItem()}},...Array.from(this.components).map(c=>{let[,u]=c;return u.getElements()}).flat()];sBe(Gh,this,eBe(o,a));const l=c=>{Cb(Gh,this).listen(),c.preventDefault(),rm(c.keyCode,"TAB")&&(c.shiftKey?Cb(Gh,this).toPreviousItem():Cb(Gh,this).toNextItem())};this.components.get("filter_by_value").addLocalHook("listTabKeydown",l),this.components.get("filter_by_condition").addLocalHook("selectTabKeydown",l)}this.registerShortcuts(),super.enablePlugin()}disablePlugin(){if(this.enabled){var e;(e=this.dropdownMenuPlugin)!==null&&e!==void 0&&e.enabled&&this.dropdownMenuPlugin.menu.clearLocalHooks(),this.components.forEach((t,i)=>{t.destroy(),this.components.set(i,null)}),this.conditionCollection.destroy(),this.conditionCollection=null,this.hot.rowIndexMapper.unregisterMap(this.pluginName)}this.unregisterShortcuts(),super.disablePlugin()}registerShortcuts(){this.hot.getShortcutManager().getContext("grid").addShortcut({keys:[["Alt","A"]],stopPropagation:!0,callback:()=>{const e=this.hot.getSelected();this.clearConditions(),this.filter(),e&&this.hot.selectCells(e)},group:pj})}unregisterShortcuts(){this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup(pj)}addCondition(e,t,i){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Fu;const s=this.hot.toPhysicalColumn(e);this.conditionCollection.addCondition(s,{command:{key:t},args:i},r)}removeConditions(e){const t=this.hot.toPhysicalColumn(e);this.conditionCollection.removeConditions(t)}clearConditions(e){if(e===void 0)this.conditionCollection.clean();else{const t=this.hot.toPhysicalColumn(e);this.conditionCollection.removeConditions(t)}}filter(){const{navigableHeaders:e}=this.hot.getSettings(),t=this._createDataFilter(),i=!this.conditionCollection.isEmpty();let r=[];const s=this.conditionCollection.exportAllConditions();if(this.hot.runHooks("beforeFilter",s,this.conditionCollection.previousConditionStack)!==!1)if(i){const a=[];this.hot.batchExecution(()=>{this.filtersRowsMap.clear(),r=vt(t.filter(),c=>c.meta.visualRow);const l=Iy(r);$e(this.hot.countSourceRows()-1,c=>{l(c)||a.push(c)}),q(a,c=>{this.filtersRowsMap.setValueAtIndex(c,!0)})},!0),!e&&!r.length&&this.hot.deselectCell()}else this.filtersRowsMap.clear();this.hot.runHooks("afterFilter",s),this.conditionCollection.setPreviousConditionStack(null),this.hot.view.adjustElementsSize(),this.hot.render(),this.hot.selection.isSelected()&&this.hot.selectCell(e?-1:0,this.hot.getSelectedRangeLast().highlight.col)}getSelectedColumn(){var e;const t=(e=this.hot.getSelectedRangeLast())===null||e===void 0?void 0:e.highlight;return t?{visualIndex:t.col,physicalIndex:this.hot.toPhysicalColumn(t.col)}:null}getDataMapAtColumn(e){const t=this.hot.toVisualColumn(e),i=[];return q(this.hot.getSourceDataAtCol(t),(r,s)=>{var o;const{row:a,col:l,visualCol:c,visualRow:u,type:h,instance:d,dateFormat:f,locale:g}=this.hot.getCellMeta(s,t),p=(o=this.hot.getDataAtCell(this.hot.toVisualRow(s),t))!==null&&o!==void 0?o:r;i.push({meta:{row:a,col:l,visualCol:c,visualRow:u,type:h,instance:d,dateFormat:f,locale:g},value:_q(p)})}),i}updateValueComponentCondition(e){const t=this.hot.getDataAtCol(e),i=tO(t);this.conditionUpdateObserver.updateStatesAtColumn(e,i)}restoreComponents(e){var t;const i=(t=this.getSelectedColumn())===null||t===void 0?void 0:t.physicalIndex;e.forEach(r=>{r.isHidden()||r.restoreState(i)}),this.updateDependentComponentsVisibility()}getOperationBasedOnArguments(e,t,i,r){let s=e;return s===ER&&t.command.key!==Li&&i.command.key!==Li&&r.command.key!==Li?s=xH:r.command.key!==Li&&(t.command.key===Li||i.command.key===Li)&&(s=Fu),s}setListeningDropdownMenu(){this.dropdownMenuPlugin&&this.dropdownMenuPlugin.setListening()}updateDependentComponentsVisibility(){const e=this.components.get("filter_by_condition"),{command:t}=e.getState(),i=[this.components.get("filter_by_condition2"),this.components.get("filter_operators")];t.showOperators?this.showComponents(...i):this.hideComponents(...i)}_createDataFilter(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.conditionCollection;return new Oq(e,t=>this.getDataMapAtColumn(t))}getIndexesOfComponents(){const e=[];if(!this.dropdownMenuPlugin)return e;const t=this.dropdownMenuPlugin.menu;for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return q(r,o=>{q(t.menuItems,(a,l)=>{a.key===o.getMenuItemDescriptor().key&&e.push(l)})}),e}changeComponentsVisibility(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;if(!this.dropdownMenuPlugin)return;const i=this.dropdownMenuPlugin.menu.hotMenu,r=i.getPlugin("hiddenRows");for(var s=arguments.length,o=new Array(s>1?s-1:0),a=1;a<s;a++)o[a-1]=arguments[a];const l=this.getIndexesOfComponents(...o);e?r.showRows(l):r.hideRows(l),i.render()}hideComponents(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.changeComponentsVisibility(!1,...t)}showComponents(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.changeComponentsVisibility(!0,...t)}destroy(){this.enabled&&(this.components.forEach((e,t)=>{e!==null&&(e.destroy(),this.components.set(t,null))}),this.conditionCollection.destroy(),this.conditionUpdateObserver.destroy(),this.hot.rowIndexMapper.unregisterMap(this.pluginName)),super.destroy()}}function lBe(n){n&&q(n,e=>{const[,t]=e,i=this.hot.propToCol(t);this.conditionCollection.hasConditions(i)&&this.updateValueComponentCondition(i)})}function cBe(){const n=this.dropdownMenuPlugin.menu;this.restoreComponents(Array.from(this.components.values())),n.updateMenuDimensions()}function uBe(){this.components.get("filter_by_condition").getSelectElement().closeOptions(),this.components.get("filter_by_condition2").getSelectElement().closeOptions()}function hBe(n){n.items.push({name:ft}),this.components.forEach(e=>{n.items.push(e.getMenuItemDescriptor())})}function mj(n){var e;if(n==="accept"){const i=this.getSelectedColumn();if(i===null){var t;(t=this.dropdownMenuPlugin)===null||t===void 0||t.close();return}const{physicalIndex:r}=i,s=this.components.get("filter_by_condition").getState(),o=this.components.get("filter_by_condition2").getState(),a=this.components.get("filter_by_value").getState(),l=this.getOperationBasedOnArguments(this.components.get("filter_operators").getActiveOperationId(),s,o,a);this.conditionUpdateObserver.groupChanges();let c=this.conditionCollection.getColumnStackPosition(r);c===-1&&(c=void 0),this.conditionCollection.removeConditions(r),s.command.key!==Li&&(this.conditionCollection.addCondition(r,s,l,c),o.command.key!==Li&&this.conditionCollection.addCondition(r,o,l,c)),a.command.key!==Li&&this.conditionCollection.addCondition(r,a,l,c),this.conditionUpdateObserver.flush(),this.components.forEach(u=>u.saveState(r)),this.filtersRowsMap.clear(),this.filter()}(e=this.dropdownMenuPlugin)===null||e===void 0||e.close()}function dBe(n,e){this.updateDependentComponentsVisibility(),n.constructor===nO&&!e.inputsCount&&this.setListeningDropdownMenu()}function bj(){this.setListeningDropdownMenu()}function fBe(n,e){const t=this.hot.toPhysicalColumn(n);this.enabled&&this.conditionCollection.hasConditions(t)?ge(e,"htFiltersActive"):Qe(e,"htFiltersActive")}function gBe(n){var e;if(!((e=this.dropdownMenuPlugin)!==null&&e!==void 0&&e.enabled))return;const{editedConditionStack:{conditions:t,column:i}}=n,r=t.filter(o=>o.name===Id),s=t.filter(o=>o.name!==Id);if(r.length>=2||s.length>=3)Yt(Kt`The filter conditions have been applied properly, but couldn’t be displayed visually.\x20
        The overall amount of conditions exceed the capability of the dropdown menu.\x20
        For more details see the documentation.`);else{const o=this.conditionCollection.getOperation(i);this.components.get("filter_by_condition").updateState(s[0],i),this.components.get("filter_by_condition2").updateState(s[1],i),this.components.get("filter_operators").updateState(o,i),this.components.get("filter_by_value").updateState(n)}}const Lq="internal-use-in-handsontable",rO={licenseKey:Lq,useArrayArithmetic:!0,useColumnIndex:!1,useStats:!1,evaluateNullToZero:!0,precisionEpsilon:1e-13,precisionRounding:14,smartRounding:!0,leapYear1900:!1,nullDate:{year:1899,month:12,day:30},nullYear:30,dateFormats:["DD/MM/YYYY","DD/MM/YY"],timeFormats:["hh:mm","hh:mm:ss.sss"],matchWholeCell:!0,useRegularExpressions:!1,useWildcards:!0,functionArgSeparator:",",thousandSeparator:"",decimalSeparator:".",language:"enGB"};function Nq(n){var e;return{maxColumns:n.maxColumns,maxRows:n.maxRows,language:(e=n[ar])===null||e===void 0||(e=e.language)===null||e===void 0?void 0:e.langCode}}function Hq(n){return Object.keys(n).reduce((e,t)=>(t!=="hyperformula"&&(e[t]=n[t]),e),{})}function pBe(n){var e;const t=n[ar],i=Hq(t!=null&&(e=t.engine)!==null&&e!==void 0&&e.hyperformula?t.engine:{}),r=Nq(n);return{...rO,...i,...r}}function mBe(n){var e;const t=n[ar],i=Hq(t!=null&&(e=t.engine)!==null&&e!==void 0&&e.hyperformula?t.engine:{}),r=Nq(n);return{...i,...r}}function bBe(n,e){return Object.keys(e).some(t=>e[t]!==void 0&&e[t]!==n[t])}function OE(){const n="engine_relationship",e=da(ar);return e.hasItem(n)||e.register(n,new Map),e.getItem(n)}function AH(){const n="shared_engine_usage",e=da(ar);return e.hasItem(n)||e.register(n,new Map),e.getItem(n)}function vBe(n){const e=n.getSettings(),t=e[ar],i=t==null?void 0:t.engine;if(t===!0||fn(i))return null;if(typeof i.hyperformula=="function"||typeof i=="function"){var r;return wBe((r=i.hyperformula)!==null&&r!==void 0?r:i,e,n)}else if(typeof i=="object"&&fn(i.hyperformula)){const s=OE(),o=AH().get(i);return s.has(i)||s.set(i,[]),s.get(i).push(n),o&&o.push(n.guid),i.getConfig().licenseKey||i.updateConfig({licenseKey:Lq}),(i.getConfig().leapYear1900!==rO.leapYear1900||nE(i.getConfig().nullDate,rO.nullDate)===!1)&&Yt(Kt`If you use HyperFormula with Handsontable, keep the default \`leapYear1900\` and \`nullDate\` 
      settings. Otherwise, HyperFormula's dates may not sync correctly with Handsontable's dates.`),i}return null}function wBe(n,e,t){const i=e[ar],r=pBe(e),s=OE(),o=AH();yBe(n,i.functions),CBe(n,i.language);const a=n.buildEmpty(r);return s.set(a,[t]),o.set(a,[t.guid]),SBe(a,i.namedExpressions),a.on("sheetAdded",()=>{a.rebuildAndRecalculate()}),a.on("sheetRemoved",()=>{a.rebuildAndRecalculate()}),a}function vj(n){var e;const t=OE(),i=t.size===0?[]:Array.from((e=t.get(n))!==null&&e!==void 0?e:[]);return new Map(i.map(r=>[r.getPlugin("formulas").sheetId,r]))}function wj(n,e){if(n){const t=OE(),i=t.get(n),r=AH(),s=r.get(n);i&&i.includes(e)&&(i.splice(i.indexOf(e),1),i.length===0&&t.delete(n)),s&&s.includes(e.guid)&&(s.splice(s.indexOf(e.guid),1),s.length===0&&(r.delete(n),n.destroy()))}}function yBe(n,e){e&&e.forEach(t=>{const{name:i,plugin:r,translations:s}=t;try{n.registerFunction(i,r,s)}catch(o){Yt(o.message)}})}function CBe(n,e){if(e){const{langCode:t}=e;try{n.registerLanguage(t,e)}catch(i){Yt(i.message)}}}function SBe(n,e){e&&(n.suspendEvaluation(),e.forEach(t=>{const{name:i,expression:r,scope:s,options:o}=t;try{n.addNamedExpression(i,r,s,o)}catch(a){Yt(a.message)}}),n.resumeEvaluation())}function _Be(n,e){return(fn(e)||!n.doesSheetExist(e))&&(e=n.addSheet(e)),e}const $q="DD/MM/YYYY";function Fq(n){return typeof n=="string"&&n.charAt(0)==="'"&&n.charAt(1)==="="}function RBe(n){return Fq(n)?n.substr(1):n}function EBe(n){return typeof n=="string"&&n.startsWith("=")}function PH(n,e){return typeof n=="string"&&e==="date"}function Bq(n,e){return pe(n,e,!0).isValid()}function Vq(n,e){return pe(n,e,!0).format($q)}function xBe(n,e){return pe(n,$q,!0).format(e)}function Wq(n,e){const i=new Date(Date.UTC(0,0,n+-1));return pe(i).format(e)}function TBe(n,e,t){const i=Array.from(Array(t).keys()).filter(s=>n.includes(s)===!1);if(e===0){var r;return(r=i[e])!==null&&r!==void 0?r:0}return i[e-1]+1}function MBe(n,e){const t=[];return n.forEach(i=>{const r={from:i,to:e};t.forEach(s=>{const o=s.from>s.to,a=s.to<=r.from;s.from>r.from&&a&&o&&(r.from+=1)}),r.from>=e&&(e+=1),t.push(r)}),t}function ABe(n){return n.forEach((e,t)=>{n.slice(t+1).forEach(r=>{const s=r.from<r.to;r.from>e.from&&s&&(r.from-=1)})}),n}function IH(n,e,t){const i=MBe(n,TBe(n,e,t));return ABe(i)}function Yh(n,e,t){PBe(n,e),e.set(n,t)}function PBe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Sn(n,e){return n.get(jq(n,e))}function tu(n,e,t){return n.set(jq(n,e),t),t}function jq(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var Sb=new WeakMap,nu=new WeakMap,ns=new WeakMap,DC=new WeakMap,DM=new WeakMap,LM=new WeakMap,LC=new WeakMap;class yj{constructor(e,t,i){Yh(this,Sb,void 0),Yh(this,nu,void 0),Yh(this,ns,void 0),Yh(this,DC,[]),Yh(this,DM,[]),Yh(this,LM,void 0),Yh(this,LC,[]),tu(Sb,this,e),tu(nu,this,t),tu(ns,this,i)}setRemovedHfIndexes(e){return tu(LC,this,e.map(t=>{const i=Sn(nu,this).getVisualFromPhysicalIndex(t);return this.getHfIndexFromVisualIndex(i)})),Sn(LC,this)}getRemovedHfIndexes(){return Sn(LC,this)}getHfIndexFromVisualIndex(e){const t=Sn(nu,this).getIndexesSequence(),i=Sn(nu,this).getNotTrimmedIndexes();return t.indexOf(i[e])}syncMoves(e){const i=`move${pr(Sn(Sb,this))}s`;Sn(ns,this).getEngine().batch(()=>{e.forEach(r=>{const s=r.from!==r.to,o=r.from+1!==r.to;s&&o&&Sn(ns,this).getEngine()[i](Sn(ns,this).getSheetId(),r.from,1,r.to)})})}storeMovesInformation(e,t,i){i!==!1&&(tu(DM,this,e.map(r=>this.getHfIndexFromVisualIndex(r))),tu(LM,this,this.getHfIndexFromVisualIndex(t)))}calculateAndSyncMoves(e,t){if(Sn(ns,this).isPerformingUndoRedo()||e===!1||t===!1)return;const i=IH(Sn(DM,this),Sn(LM,this),Sn(nu,this).getNumberOfIndexes());Sn(ns,this).getSheetId()===null?Sn(ns,this).getPostponeAction(()=>this.syncMoves(i)):this.syncMoves(i)}getIndexesChangeSyncMethod(){const e=`set${pr(Sn(Sb,this))}Order`;return t=>{if(Sn(ns,this).isPerformingUndoRedo())return;const i=Sn(nu,this).getIndexesSequence();if(t==="update"&&i.length>0){const r=Sn(DC,this).map(l=>i.indexOf(l)),s=Sn(ns,this).getEngine().getSheetDimensions(Sn(ns,this).getSheetId());let o;Sn(Sb,this)==="row"?o=s.height:o=s.width;const a=r.length;for(let l=a;l<o;l+=1)r.push(l);Sn(ns,this).getEngine()[e](Sn(ns,this).getSheetId(),r)}tu(DC,this,i)}}init(){tu(DC,this,Sn(nu,this).getIndexesSequence())}}function Kh(n,e,t){IBe(n,e),e.set(n,t)}function IBe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Bl(n,e){return n.get(zq(n,e))}function qh(n,e,t){return n.set(zq(n,e),t),t}function zq(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var NC=new WeakMap,HC=new WeakMap,NM=new WeakMap,HM=new WeakMap,$M=new WeakMap,FM=new WeakMap,BM=new WeakMap;class OBe{constructor(e,t,i){Kh(this,NC,void 0),Kh(this,HC,void 0),Kh(this,NM,void 0),Kh(this,HM,!1),Kh(this,$M,!1),Kh(this,FM,null),Kh(this,BM,null),qh(NC,this,new yj("row",e,this)),qh(HC,this,new yj("column",t,this)),qh(NM,this,i)}getForAxis(e){return e==="row"?Bl(NC,this):Bl(HC,this)}setPerformUndo(e){qh(HM,this,e)}setPerformRedo(e){qh($M,this,e)}isPerformingUndoRedo(){return Bl(HM,this)||Bl($M,this)}getSheetId(){return Bl(BM,this)}getEngine(){return Bl(FM,this)}getPostponeAction(){return Bl(NM,this)}setupSyncEndpoint(e,t){qh(FM,this,e),qh(BM,this,t),Bl(NC,this).init(),Bl(HC,this).init()}}function kBe(n,e){Uq(n,e),e.add(n)}function yg(n,e,t){return(e=DBe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function DBe(n){var e=LBe(n,"string");return typeof e=="symbol"?e:e+""}function LBe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function VM(n,e,t){Uq(n,e),e.set(n,t)}function Uq(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Zu(n,e,t){return n.set(Zt(n,e),t),t}function fp(n,e){return n.get(Zt(n,e))}function Zt(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const ar="formulas",NBe=["maxRows","maxColumns","language"],HBe=260;Oe.getSingleton().register("afterNamedExpressionAdded");Oe.getSingleton().register("afterNamedExpressionRemoved");Oe.getSingleton().register("afterSheetAdded");Oe.getSingleton().register("afterSheetRemoved");Oe.getSingleton().register("afterSheetRenamed");Oe.getSingleton().register("afterFormulasValuesUpdate");const cm=n=>n==="UndoRedo.undo"||n==="UndoRedo.redo"||n==="auto";var Ic=new WeakMap,OH=new WeakMap,_b=new WeakMap,nn=new WeakSet;class $Be extends Ht{constructor(){var e;super(...arguments),e=this,kBe(this,nn),VM(this,Ic,!1),VM(this,OH,!1),VM(this,_b,[["valuesUpdated",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Zt(nn,e,eVe).call(e,...i)}],["namedExpressionAdded",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Zt(nn,e,tVe).call(e,...i)}],["namedExpressionRemoved",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Zt(nn,e,nVe).call(e,...i)}],["sheetAdded",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Zt(nn,e,iVe).call(e,...i)}],["sheetRenamed",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Zt(nn,e,rVe).call(e,...i)}],["sheetRemoved",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Zt(nn,e,sVe).call(e,...i)}]]),yg(this,"staticRegister",da("formulas")),yg(this,"engine",null),yg(this,"sheetName",null),yg(this,"indexSyncer",null),yg(this,"rowAxisSyncer",null),yg(this,"columnAxisSyncer",null)}static get PLUGIN_KEY(){return ar}static get PLUGIN_PRIORITY(){return HBe}static get SETTING_KEYS(){return[ar,...NBe]}get sheetId(){return this.sheetName===null?null:this.engine.getSheetId(this.sheetName)}isEnabled(){return!!this.hot.getSettings()[ar]}enablePlugin(){var e,t=this;if(!this.enabled){if(this.engine=(e=vBe(this.hot))!==null&&e!==void 0?e:this.engine,!this.engine){Yt("Missing the required `engine` key in the Formulas settings. Please fill it with either an engine class or an engine instance.");return}if(this.sheetName!==null&&!this.engine.doesSheetExist(this.sheetName)){const i=this.addSheet(this.sheetName,this.hot.getSourceDataArray());i!==!1&&(this.sheetName=i)}this.addHook("beforeLoadData",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Zt(nn,t,Cj).call(t,...r)}),this.addHook("afterLoadData",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Zt(nn,t,Sj).call(t,...r)}),this.addHook("beforeUpdateData",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Zt(nn,t,Cj).call(t,...r)}),this.addHook("afterUpdateData",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Zt(nn,t,Sj).call(t,...r)}),this.addHook("modifyData",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Zt(nn,t,WBe).call(t,...r)}),this.addHook("modifySourceData",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Zt(nn,t,jBe).call(t,...r)}),this.addHook("beforeValidate",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Zt(nn,t,FBe).call(t,...r)}),this.addHook("afterSetSourceDataAtCell",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Zt(nn,t,zBe).call(t,...r)}),this.addHook("afterSetDataAtCell",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Zt(nn,t,_j).call(t,...r)}),this.addHook("afterSetDataAtRowProp",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Zt(nn,t,_j).call(t,...r)}),this.addHook("beforeCreateRow",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Zt(nn,t,UBe).call(t,...r)}),this.addHook("beforeCreateCol",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Zt(nn,t,GBe).call(t,...r)}),this.addHook("afterCreateRow",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Zt(nn,t,qBe).call(t,...r)}),this.addHook("afterCreateCol",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Zt(nn,t,XBe).call(t,...r)}),this.addHook("beforeRemoveRow",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Zt(nn,t,YBe).call(t,...r)}),this.addHook("beforeRemoveCol",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Zt(nn,t,KBe).call(t,...r)}),this.addHook("afterRemoveRow",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Zt(nn,t,ZBe).call(t,...r)}),this.addHook("afterRemoveCol",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Zt(nn,t,QBe).call(t,...r)}),this.indexSyncer=new OBe(this.hot.rowIndexMapper,this.hot.columnIndexMapper,i=>{this.hot.addHookOnce("init",()=>{i()})}),this.rowAxisSyncer=this.indexSyncer.getForAxis("row"),this.columnAxisSyncer=this.indexSyncer.getForAxis("column"),this.hot.addHook("afterRowSequenceChange",this.rowAxisSyncer.getIndexesChangeSyncMethod()),this.hot.addHook("afterColumnSequenceChange",this.columnAxisSyncer.getIndexesChangeSyncMethod()),this.hot.addHook("beforeRowMove",(i,r,s,o)=>{this.rowAxisSyncer.storeMovesInformation(i,r,o)}),this.hot.addHook("beforeColumnMove",(i,r,s,o)=>{this.columnAxisSyncer.storeMovesInformation(i,r,o)}),this.hot.addHook("afterRowMove",(i,r,s,o,a)=>{this.rowAxisSyncer.calculateAndSyncMoves(o,a)}),this.hot.addHook("afterColumnMove",(i,r,s,o,a)=>{this.columnAxisSyncer.calculateAndSyncMoves(o,a)}),this.hot.addHook("beforeColumnFreeze",(i,r)=>{this.columnAxisSyncer.storeMovesInformation([i],this.hot.getSettings().fixedColumnsStart,r)}),this.hot.addHook("afterColumnFreeze",(i,r)=>{this.columnAxisSyncer.calculateAndSyncMoves(r,r)}),this.hot.addHook("beforeColumnUnfreeze",(i,r)=>{this.columnAxisSyncer.storeMovesInformation([i],this.hot.getSettings().fixedColumnsStart-1,r)}),this.hot.addHook("afterColumnUnfreeze",(i,r)=>{this.columnAxisSyncer.calculateAndSyncMoves(r,r)}),this.addHook("afterCellMetaReset",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Zt(nn,t,VBe).call(t,...r)}),this.addHook("beforeUndo",()=>{this.indexSyncer.setPerformUndo(!0),this.engine.undo()}),this.addHook("beforeRedo",()=>{this.indexSyncer.setPerformRedo(!0),this.engine.redo()}),this.addHook("afterUndo",()=>{this.indexSyncer.setPerformUndo(!1)}),this.addHook("afterUndo",()=>{this.indexSyncer.setPerformRedo(!1)}),this.addHook("afterDetachChild",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Zt(nn,t,JBe).call(t,...r)}),this.addHook("beforeAutofill",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Zt(nn,t,BBe).call(t,...r)}),fp(_b,this).forEach(i=>{let[r,s]=i;return this.engine.on(r,s)}),super.enablePlugin()}}disablePlugin(){fp(_b,this).forEach(e=>{let[t,i]=e;return this.engine.off(t,i)}),wj(this.engine,this.hot),this.engine=null,super.disablePlugin()}updatePlugin(e){const t=mBe(this.hot.getSettings());bBe(this.engine.getConfig(),t)&&this.engine.updateConfig(t);const i=this.hot.getSettings()[ar];if(De(i)&&De(i.sheetName)&&i.sheetName!==this.sheetName&&this.switchSheet(i.sheetName),!e.data&&this.sheetName===null){const r=this.hot.getSettings()[ar].sheetName;r&&this.engine.doesSheetExist(r)?this.switchSheet(this.sheetName):this.sheetName=this.addSheet(r??void 0,this.hot.getSourceDataArray())}super.updatePlugin(e)}destroy(){fp(_b,this).forEach(e=>{var t;let[i,r]=e;return(t=this.engine)===null||t===void 0?void 0:t.off(i,r)}),Zu(_b,this,null),wj(this.engine,this.hot),this.engine=null,super.destroy()}addSheet(e,t){if(De(t)&&!$Y(t))return Yt("The provided data should be an array of arrays."),!1;if(e!=null&&this.engine.doesSheetExist(e))return Yt("Sheet with the provided name already exists."),!1;try{const i=this.engine.addSheet(e??void 0);return t&&this.engine.setSheetContent(this.engine.getSheetId(i),t),i}catch(i){return Yt(i.message),!1}}switchSheet(e){if(!this.engine.doesSheetExist(e)){iL(`The sheet named \`${e}\` does not exist, switch aborted.`);return}this.sheetName=e;const t=this.engine.getSheetSerialized(this.sheetId);t.length>0&&this.hot.loadData(t,`${pr(ar)}.switchSheet`)}getCellType(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.sheetId;const r=this.hot.toPhysicalRow(e),s=this.hot.toPhysicalColumn(t);return r!==null&&s!==null?this.engine.getCellType({sheet:i,row:this.rowAxisSyncer.getHfIndexFromVisualIndex(e),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(t)}):"EMPTY"}isFormulaCellType(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.sheetId;return this.engine.doesCellHaveFormula({sheet:i,row:this.rowAxisSyncer.getHfIndexFromVisualIndex(e),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(t)})}renderDependentSheets(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const i=new Set;e.forEach(r=>{var s;const o=r==null||(s=r.address)===null||s===void 0?void 0:s.sheet;o!==void 0&&(i.has(o)||i.add(o))}),vj(this.engine).forEach((r,s)=>{if((t||s!==this.sheetId)&&i.has(s)){var o;r.render(),(o=r.view)===null||o===void 0||o.adjustElementsSize()}})}validateDependentCells(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const i=s=>{var o;const{row:a,col:l,sheet:c}=(o=s==null?void 0:s.address)!==null&&o!==void 0?o:{};return De(c)?`${c}:${a}x${l}`:""},r=new Set(t.map(s=>i(s)));e.forEach(s=>{var o,a;const{row:l,col:c}=(o=s.address)!==null&&o!==void 0?o:{};if(De(l)===!1||De(c)===!1||l>=this.hot.countRows()||c>=this.hot.countCols())return;const u=s==null||(a=s.address)===null||a===void 0?void 0:a.sheet,h=i(s);if(u!==void 0&&!r.has(h)){const d=vj(this.engine).get(u);if(!d)return;d.validateCell(d.getDataAtCell(l,c),d.getCellMeta(l,c),()=>{})}})}syncChangeWithEngine(e,t,i){const r={row:this.rowAxisSyncer.getHfIndexFromVisualIndex(e),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(t),sheet:this.sheetId};if(!this.engine.isItPossibleToSetCellContents(r)){Yt(`Not possible to set cell data at ${JSON.stringify(r)}`);return}const s=this.hot.getCellMeta(e,t);return PH(i,s.type)&&(Bq(i,s.dateFormat)?i=Vq(i,s.dateFormat):EBe(i)===!1&&(i=`'${i}`)),this.engine.setCellContents(r,i)}}function FBe(n,e,t){const i=this.hot.propToCol(t);if(this.isFormulaCellType(e,i)){const r={row:this.rowAxisSyncer.getHfIndexFromVisualIndex(e),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(i),sheet:this.sheetId},s=this.hot.getCellMeta(e,i);let o=this.engine.getCellValue(r);return s.type==="date"&&or(o)&&(o=Wq(o,s.dateFormat)),typeof o=="object"&&o!==null?o.value:o}return n}function BBe(n,e,t){const{row:i,col:r}=e.getTopStartCorner(),{row:s,col:o}=e.getBottomEndCorner(),{row:a,col:l}=t.getTopStartCorner(),{row:c,col:u}=t.getBottomEndCorner(),h={start:{row:this.rowAxisSyncer.getHfIndexFromVisualIndex(i),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(r),sheet:this.sheetId},end:{row:this.rowAxisSyncer.getHfIndexFromVisualIndex(s),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(o),sheet:this.sheetId}},d={start:{row:this.rowAxisSyncer.getHfIndexFromVisualIndex(a),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(l),sheet:this.sheetId},end:{row:this.rowAxisSyncer.getHfIndexFromVisualIndex(c),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(u),sheet:this.sheetId}};if(this.engine.isItPossibleToSetCellContents(d)===!1)return!1;const f=this.engine.getFillRangeData(h,d),{row:g,col:p}=h.start,{row:m,col:v}=h.end,y=m-g+1,w=v-p+1;for(let R=0;R<f.length;R+=1)for(let x=0;x<f[R].length;x+=1){const S=f[R][x],T=g+R%y,P=p+x%w,E=this.hot.getCellMeta(T,P);PH(S,E.type)&&(S.startsWith("'")?f[R][x]=S.slice(1):this.isFormulaCellType(T,P,this.sheetId)===!1&&(f[R][x]=xBe(S,E.dateFormat)))}return f}function Cj(n,e){(arguments.length>2&&arguments[2]!==void 0?arguments[2]:"").includes(pr(ar))||Zu(OH,this,fn(this.hot.getSettings().data))}function VBe(){const n=this.hot.getSourceDataArray();let e=!1;n.forEach((t,i)=>{t.forEach((r,s)=>{const o=this.hot.getCellMeta(i,s),a=o.dateFormat;PH(r,o.type)&&(e=!0,Bq(r,a)?n[i][s]=Vq(r,a):this.isFormulaCellType(i,s)===!1&&(n[i][s]=`'${r}`))})}),e===!0&&(Zu(Ic,this,!0),this.engine.setSheetContent(this.sheetId,n),Zu(Ic,this,!1))}function Sj(n,e){if(!(arguments.length>2&&arguments[2]!==void 0?arguments[2]:"").includes(pr(ar)))if(this.sheetName=_Be(this.engine,this.hot.getSettings()[ar].sheetName),fp(OH,this))this.switchSheet(this.sheetName);else{const i=this.hot.getSourceDataArray();if(this.engine.isItPossibleToReplaceSheetContent(this.sheetId,i)){Zu(Ic,this,!0);const r=this.engine.setSheetContent(this.sheetId,i);this.indexSyncer.setupSyncEndpoint(this.engine,this.sheetId),this.renderDependentSheets(r),Zu(Ic,this,!1)}}}function WBe(n,e,t,i){if(i!=="get"||fp(Ic,this)||this.sheetName===null||!this.engine.doesSheetExist(this.sheetName))return;const r=this.hot.toVisualRow(n);if(r===null||e===null)return;if(!this.isFormulaCellType(r,e)&&this.getCellType(r,e)!=="ARRAY"){Fq(t.value)&&(t.value=RBe(t.value));return}const o={row:this.rowAxisSyncer.getHfIndexFromVisualIndex(r),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(e),sheet:this.sheetId};let a=this.engine.getCellValue(o),l=this.hot.getCellsMeta().find(u=>u.visualRow===r&&u.visualCol===e);l===void 0&&(l={}),l.type==="date"&&or(a)&&(a=Wq(a,l.dateFormat));const c=typeof a=="object"&&a!==null?a.value:a;t.value=c}function jBe(n,e,t,i){if(i!=="get"||fp(Ic,this)||this.sheetName===null||!this.engine.doesSheetExist(this.sheetName))return;const r=this.hot.toVisualRow(n),s=this.hot.propToCol(e);if(r===null||s===null||!this.isFormulaCellType(r,s)&&this.getCellType(r,s)!=="ARRAY")return;const a=this.engine.getSheetDimensions(this.engine.getSheetId(this.sheetName));if(a.width===0&&a.height===0)return;const l={row:this.rowAxisSyncer.getHfIndexFromVisualIndex(r),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(s),sheet:this.sheetId};t.value=this.engine.getCellSerialized(l)}function _j(n,e){if(cm(e))return;const t=[],i=[],r=this.engine.batch(()=>{n.forEach(s=>{let[o,a,,l]=s;const c=this.hot.propToCol(a),u=this.hot.toPhysicalRow(o),h=this.hot.toPhysicalColumn(c),d={row:this.rowAxisSyncer.getHfIndexFromVisualIndex(o),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(c),sheet:this.sheetId};u!==null&&h!==null?this.syncChangeWithEngine(o,c,l):t.push([o,c,l]),i.push({address:d})})});t.length&&this.hot.addHookOnce("afterChange",()=>{const s=this.engine.batch(()=>{t.forEach(o=>{let[a,l,c]=o;this.syncChangeWithEngine(a,l,c)})});this.renderDependentSheets(s,!0)}),this.renderDependentSheets(r),this.validateDependentCells(r,i)}function zBe(n,e){if(cm(e))return;const t=[],i=[];n.forEach(r=>{let[s,o,,a]=r;const l=this.hot.propToCol(o);if(!or(l))return;const c={row:this.rowAxisSyncer.getHfIndexFromVisualIndex(s),col:this.columnAxisSyncer.getHfIndexFromVisualIndex(l),sheet:this.sheetId};if(!this.engine.isItPossibleToSetCellContents(c)){Yt(`Not possible to set source cell data at ${JSON.stringify(c)}`);return}i.push({address:c}),t.push(...this.engine.setCellContents(c,a))}),this.renderDependentSheets(t),this.validateDependentCells(t,i)}function UBe(n,e){let t=this.rowAxisSyncer.getHfIndexFromVisualIndex(n);if(n>=this.hot.countRows()&&(t=n),this.sheetId===null||!this.engine.doesSheetExist(this.sheetName)||!this.engine.isItPossibleToAddRows(this.sheetId,[t,e]))return!1}function GBe(n,e){let t=this.columnAxisSyncer.getHfIndexFromVisualIndex(n);if(n>=this.hot.countCols()&&(t=n),this.sheetId===null||!this.engine.doesSheetExist(this.sheetName)||!this.engine.isItPossibleToAddColumns(this.sheetId,[t,e]))return!1}function YBe(n,e,t){return this.rowAxisSyncer.setRemovedHfIndexes(t).every(s=>this.engine.isItPossibleToRemoveRows(this.sheetId,[s,1]))===!1?!1:void 0}function KBe(n,e,t){return this.columnAxisSyncer.setRemovedHfIndexes(t).every(s=>this.engine.isItPossibleToRemoveColumns(this.sheetId,[s,1]))===!1?!1:void 0}function qBe(n,e,t){if(cm(t))return;const i=this.engine.addRows(this.sheetId,[this.rowAxisSyncer.getHfIndexFromVisualIndex(n),e]);this.renderDependentSheets(i)}function XBe(n,e,t){if(cm(t))return;const i=this.engine.addColumns(this.sheetId,[this.columnAxisSyncer.getHfIndexFromVisualIndex(n),e]);this.renderDependentSheets(i)}function ZBe(n,e,t,i){if(cm(i))return;const r=this.rowAxisSyncer.getRemovedHfIndexes().sort((o,a)=>a-o),s=this.engine.batch(()=>{r.forEach(o=>{this.engine.removeRows(this.sheetId,[o,1])})});this.renderDependentSheets(s)}function QBe(n,e,t,i){if(cm(i))return;const r=this.columnAxisSyncer.getRemovedHfIndexes().sort((o,a)=>a-o),s=this.engine.batch(()=>{r.forEach(o=>{this.engine.removeColumns(this.sheetId,[o,1])})});this.renderDependentSheets(s)}function JBe(n,e,t){var i;Zu(Ic,this,!0);const r=this.hot.getSourceDataArray(t,0,t+(((i=e.__children)===null||i===void 0?void 0:i.length)||0),this.hot.countSourceCols());Zu(Ic,this,!1),r.forEach((s,o)=>{s.forEach((a,l)=>{this.engine.setCellContents({col:l,row:t+o,sheet:this.sheetId},[[a]])})})}function eVe(n){this.hot.runHooks("afterFormulasValuesUpdate",n)}function tVe(n,e){this.hot.runHooks("afterNamedExpressionAdded",n,e)}function nVe(n,e){this.hot.runHooks("afterNamedExpressionRemoved",n,e)}function iVe(n){this.hot.runHooks("afterSheetAdded",n)}function rVe(n,e){this.sheetName=e,this.hot.runHooks("afterSheetRenamed",n,e)}function sVe(n,e){this.hot.runHooks("afterSheetRemoved",n,e)}function oVe(n){return{key:"hidden_columns_hide",name(){const e=this.getSelectedLast();let t=0;if(Array.isArray(e)){const[,i,,r]=e;i-r!==0&&(t=1)}return this.getTranslatedPhrase(gN,t)},callback(){const{from:e,to:t}=this.getSelectedRangeLast(),i=Math.max(Math.min(e.col,t.col),0),r=Math.max(e.col,t.col),s=[];for(let l=i;l<=r;l+=1)s.push(l);n.hideColumns(s);const o=s[s.length-1],a=this.columnIndexMapper.getNearestNotHiddenIndex(o,1,!0);Number.isInteger(a)&&a>=0?this.selectColumns(a):this.deselectCell(),this.render(),this.view.adjustElementsSize()},disabled:!1,hidden(){return!(this.selection.isSelectedByColumnHeader()||this.selection.isSelectedByCorner())}}}function aVe(n){const e=[];return{key:"hidden_columns_show",name(){const t=e.length>1?1:0;return this.getTranslatedPhrase(pN,t)},callback(){var t,i;if(e.length===0)return;let r=e[0],s=e[e.length-1];r=(t=this.columnIndexMapper.getNearestNotHiddenIndex(r-1,-1))!==null&&t!==void 0?t:0,s=(i=this.columnIndexMapper.getNearestNotHiddenIndex(s+1,1))!==null&&i!==void 0?i:this.countCols()-1,n.showColumns(e),this.render(),this.view.adjustElementsSize(),s-r+1===this.countCols()||this.selectColumns(r,s)},disabled:!1,hidden(){const t=vt(n.getHiddenColumns(),h=>this.toPhysicalColumn(h));if(!(this.selection.isSelectedByColumnHeader()||this.selection.isSelectedByCorner())||t.length<1)return!0;e.length=0;const i=this.getSelectedRangeLast(),r=i.getTopStartCorner().col,s=i.getBottomEndCorner().col,o=this.columnIndexMapper,a=o.getRenderableFromVisualIndex(r),l=o.getRenderableFromVisualIndex(s),c=o.getNotTrimmedIndexes(),u=[];if(r!==s){const h=s-r+1,d=l-a+1;if(h>d){const f=c.slice(r,s+1);u.push(...f.filter(g=>t.includes(g)))}}else if(a===0&&a<r)u.push(...c.slice(0,r));else if(a===null)u.push(...c.slice(0,this.countCols()));else{const h=this.countCols()-1,d=o.getRenderableFromVisualIndex(o.getNearestNotHiddenIndex(h,-1));l===d&&h>s&&u.push(...c.slice(s+1))}return q(u,h=>{e.push(this.toVisualColumn(h))}),e.length===0}}}function lVe(n,e){Gq(n,e),e.add(n)}function Rj(n,e,t){Gq(n,e),e.set(n,t)}function Gq(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ms(n,e){return n.get(hu(n,e))}function Rb(n,e,t){return n.set(hu(n,e),t),t}function hu(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}Oe.getSingleton().register("beforeHideColumns");Oe.getSingleton().register("afterHideColumns");Oe.getSingleton().register("beforeUnhideColumns");Oe.getSingleton().register("afterUnhideColumns");const WM="hiddenColumns",cVe=310;var Xa=new WeakMap,_a=new WeakMap,Xh=new WeakSet;class uVe extends Ht{constructor(){super(...arguments),lVe(this,Xh),Rj(this,Xa,{}),Rj(this,_a,null)}static get PLUGIN_KEY(){return WM}static get PLUGIN_PRIORITY(){return cVe}isEnabled(){return!!this.hot.getSettings()[WM]}enablePlugin(){var e=this;if(this.enabled)return;const t=this.hot.getSettings()[WM];ct(t)&&(Rb(Xa,this,t),fn(t.copyPasteEnabled)&&(t.copyPasteEnabled=!0)),Rb(_a,this,new hE),ms(_a,this).addLocalHook("init",()=>hu(Xh,this,mVe).call(this)),this.hot.columnIndexMapper.registerMap(this.pluginName,ms(_a,this)),this.addHook("afterContextMenuDefaultOptions",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return hu(Xh,e,pVe).call(e,...r)}),this.addHook("afterGetCellMeta",(i,r,s)=>hu(Xh,this,dVe).call(this,i,r,s)),this.addHook("modifyColWidth",(i,r)=>hu(Xh,this,hVe).call(this,i,r),2),this.addHook("afterGetColHeader",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return hu(Xh,e,gVe).call(e,...r)}),this.addHook("modifyCopyableRange",i=>hu(Xh,this,fVe).call(this,i)),super.enablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){this.hot.columnIndexMapper.unregisterMap(this.pluginName),Rb(Xa,this,{}),super.disablePlugin(),this.resetCellsMeta()}showColumns(e){const t=this.getHiddenColumns(),i=this.isValidConfig(e);let r=t;const s=ms(_a,this).getValues().slice(),o=e.length>0;if(i&&o){const l=e.map(c=>this.hot.toPhysicalColumn(c));q(l,c=>{s[c]=!1}),r=ci(s,(c,u,h)=>(u&&c.push(this.hot.toVisualColumn(h)),c),[])}this.hot.runHooks("beforeUnhideColumns",t,r,i&&o)!==!1&&(i&&o&&ms(_a,this).setValues(s),this.hot.view.adjustElementsSize(),this.hot.runHooks("afterUnhideColumns",t,r,i&&o,i&&r.length<t.length))}showColumn(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.showColumns(t)}hideColumns(e){const t=this.getHiddenColumns(),i=this.isValidConfig(e);let r=t;i&&(r=Array.from(new Set(t.concat(e)))),this.hot.runHooks("beforeHideColumns",t,r,i)!==!1&&(i&&this.hot.batchExecution(()=>{q(e,o=>{ms(_a,this).setValueAtIndex(this.hot.toPhysicalColumn(o),!0)})},!0),this.hot.runHooks("afterHideColumns",t,r,i,i&&r.length>t.length))}hideColumn(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.hideColumns(t)}getHiddenColumns(){return vt(ms(_a,this).getHiddenIndexes(),e=>this.hot.toVisualColumn(e))}isHidden(e){return ms(_a,this).getValueAtIndex(this.hot.toPhysicalColumn(e))||!1}isValidConfig(e){const t=this.hot.countCols();return Array.isArray(e)&&e.length>0?e.every(i=>Number.isInteger(i)&&i>=0&&i<t):!1}resetCellsMeta(){q(this.hot.getCellsMeta(),e=>{e&&(e.skipColumnOnPaste=!1)})}destroy(){Rb(Xa,this,null),Rb(_a,this,null),super.destroy()}}function hVe(n,e){if(this.isHidden(e))return 0;if(ms(Xa,this).indicators&&(this.isHidden(e+1)||this.isHidden(e-1))&&typeof n=="number"&&this.hot.hasColHeaders())return n+15}function dVe(n,e,t){if(ms(Xa,this).copyPasteEnabled===!1&&this.isHidden(e)&&(t.skipColumnOnPaste=!0),this.isHidden(e-1))t.className=t.className||"",t.className.indexOf("afterHiddenColumn")===-1&&(t.className+=" afterHiddenColumn");else if(t.className){const i=t.className.split(" ");if(i.length>0){const r=i.indexOf("afterHiddenColumn");r>-1&&i.splice(r,1),t.className=i.join(" ")}}}function fVe(n){if(ms(Xa,this).copyPasteEnabled)return n;const e=[],t=(i,r,s,o)=>{e.push({startRow:i,endRow:r,startCol:s,endCol:o})};return q(n,i=>{let r=!0,s=0;$e(i.startCol,i.endCol,o=>{this.isHidden(o)?(r||t(i.startRow,i.endRow,s,o-1),r=!0):(r&&(s=o),o===i.endCol&&t(i.startRow,i.endRow,s,o),r=!1)})}),e}function gVe(n,e){if(!ms(Xa,this).indicators||n<0)return;const t=[];n>=1&&this.isHidden(n-1)&&t.push("afterHiddenColumn"),n<this.hot.countCols()-1&&this.isHidden(n+1)&&t.push("beforeHiddenColumn"),ge(e,t)}function pVe(n){n.items.push({name:ft},oVe(this),aVe(this))}function mVe(){Array.isArray(ms(Xa,this).columns)&&this.hideColumns(ms(Xa,this).columns)}function bVe(n){return{key:"hidden_rows_hide",name(){const e=this.getSelectedLast();let t=0;if(Array.isArray(e)){const[i,,r]=e;i-r!==0&&(t=1)}return this.getTranslatedPhrase(mN,t)},callback(){const{from:e,to:t}=this.getSelectedRangeLast(),i=Math.max(Math.min(e.row,t.row),0),r=Math.max(e.row,t.row),s=[];for(let l=i;l<=r;l+=1)s.push(l);n.hideRows(s);const o=s[s.length-1],a=this.rowIndexMapper.getNearestNotHiddenIndex(o,1,!0);Number.isInteger(a)&&a>=0?this.selectRows(a):this.deselectCell(),this.render(),this.view.adjustElementsSize()},disabled:!1,hidden(){return!(this.selection.isSelectedByRowHeader()||this.selection.isSelectedByCorner())}}}function vVe(n){const e=[];return{key:"hidden_rows_show",name(){const t=e.length>1?1:0;return this.getTranslatedPhrase(bN,t)},callback(){var t,i;if(e.length===0)return;let r=e[0],s=e[e.length-1];r=(t=this.rowIndexMapper.getNearestNotHiddenIndex(r-1,-1))!==null&&t!==void 0?t:0,s=(i=this.rowIndexMapper.getNearestNotHiddenIndex(s+1,1))!==null&&i!==void 0?i:this.countRows()-1,n.showRows(e),this.render(),this.view.adjustElementsSize(),s-r+1===this.countRows()||this.selectRows(r,s)},disabled:!1,hidden(){const t=vt(n.getHiddenRows(),h=>this.toPhysicalRow(h));if(!(this.selection.isSelectedByRowHeader()||this.selection.isSelectedByCorner())||t.length<1)return!0;e.length=0;const i=this.getSelectedRangeLast(),r=i.getTopStartCorner().row,s=i.getBottomEndCorner().row,o=this.rowIndexMapper,a=o.getRenderableFromVisualIndex(r),l=o.getRenderableFromVisualIndex(s),c=o.getNotTrimmedIndexes(),u=[];if(r!==s){const h=s-r+1,d=l-a+1;if(h>d){const f=c.slice(r,s+1);u.push(...f.filter(g=>t.includes(g)))}}else if(a===0&&a<r)u.push(...c.slice(0,r));else if(a===null)u.push(...c.slice(0,this.countRows()));else{const h=this.countRows()-1,d=o.getRenderableFromVisualIndex(o.getNearestNotHiddenIndex(h,-1));l===d&&h>s&&u.push(...c.slice(s+1))}return q(u,h=>{e.push(this.toVisualRow(h))}),e.length===0}}}function wVe(n,e){Yq(n,e),e.add(n)}function Ej(n,e,t){Yq(n,e),e.set(n,t)}function Yq(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function qs(n,e){return n.get(du(n,e))}function Eb(n,e,t){return n.set(du(n,e),t),t}function du(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}Oe.getSingleton().register("beforeHideRows");Oe.getSingleton().register("afterHideRows");Oe.getSingleton().register("beforeUnhideRows");Oe.getSingleton().register("afterUnhideRows");const jM="hiddenRows",yVe=320;var bc=new WeakMap,Ra=new WeakMap,Zh=new WeakSet;class CVe extends Ht{constructor(){super(...arguments),wVe(this,Zh),Ej(this,bc,{}),Ej(this,Ra,null)}static get PLUGIN_KEY(){return jM}static get PLUGIN_PRIORITY(){return yVe}isEnabled(){return!!this.hot.getSettings()[jM]}enablePlugin(){var e=this;if(this.enabled)return;const t=this.hot.getSettings()[jM];ct(t)&&(Eb(bc,this,t),fn(t.copyPasteEnabled)&&(t.copyPasteEnabled=!0)),Eb(Ra,this,new hE),qs(Ra,this).addLocalHook("init",()=>du(Zh,this,TVe).call(this)),this.hot.rowIndexMapper.registerMap(this.pluginName,qs(Ra,this)),this.addHook("afterContextMenuDefaultOptions",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return du(Zh,e,xVe).call(e,...r)}),this.addHook("afterGetCellMeta",(i,r,s)=>du(Zh,this,_Ve).call(this,i,r,s)),this.addHook("modifyRowHeight",(i,r)=>du(Zh,this,SVe).call(this,i,r)),this.addHook("afterGetRowHeader",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return du(Zh,e,EVe).call(e,...r)}),this.addHook("modifyCopyableRange",i=>du(Zh,this,RVe).call(this,i)),super.enablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){this.hot.rowIndexMapper.unregisterMap(this.pluginName),Eb(bc,this,{}),super.disablePlugin(),this.resetCellsMeta()}showRows(e){const t=this.getHiddenRows(),i=this.isValidConfig(e);let r=t;const s=qs(Ra,this).getValues().slice(),o=e.length>0;if(i&&o){const l=e.map(c=>this.hot.toPhysicalRow(c));q(l,c=>{s[c]=!1}),r=ci(s,(c,u,h)=>(u&&c.push(this.hot.toVisualRow(h)),c),[])}this.hot.runHooks("beforeUnhideRows",t,r,i&&o)!==!1&&(i&&o&&qs(Ra,this).setValues(s),this.hot.runHooks("afterUnhideRows",t,r,i&&o,i&&r.length<t.length))}showRow(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.showRows(t)}hideRows(e){const t=this.getHiddenRows(),i=this.isValidConfig(e);let r=t;i&&(r=Array.from(new Set(t.concat(e)))),this.hot.runHooks("beforeHideRows",t,r,i)!==!1&&(i&&this.hot.batchExecution(()=>{q(e,o=>{qs(Ra,this).setValueAtIndex(this.hot.toPhysicalRow(o),!0)})},!0),this.hot.runHooks("afterHideRows",t,r,i,i&&r.length>t.length))}hideRow(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.hideRows(t)}getHiddenRows(){return vt(qs(Ra,this).getHiddenIndexes(),e=>this.hot.toVisualRow(e))}isHidden(e){return qs(Ra,this).getValueAtIndex(this.hot.toPhysicalRow(e))||!1}isValidConfig(e){const t=this.hot.countRows();return Array.isArray(e)&&e.length>0?e.every(i=>Number.isInteger(i)&&i>=0&&i<t):!1}resetCellsMeta(){q(this.hot.getCellsMeta(),e=>{e&&(e.skipRowOnPaste=!1)})}destroy(){Eb(bc,this,null),Eb(Ra,this,null),super.destroy()}}function SVe(n,e){return this.isHidden(e)?0:n}function _Ve(n,e,t){if(qs(bc,this).copyPasteEnabled===!1&&this.isHidden(n)&&(t.skipRowOnPaste=!0),this.isHidden(n-1))t.className=t.className||"",t.className.indexOf("afterHiddenRow")===-1&&(t.className+=" afterHiddenRow");else if(t.className){const i=t.className.split(" ");if(i.length>0){const r=i.indexOf("afterHiddenRow");r>-1&&i.splice(r,1),t.className=i.join(" ")}}}function RVe(n){if(qs(bc,this).copyPasteEnabled)return n;const e=[],t=(i,r,s,o)=>{e.push({startRow:i,endRow:r,startCol:s,endCol:o})};return q(n,i=>{let r=!0,s=0;$e(i.startRow,i.endRow,o=>{this.isHidden(o)?(r||t(s,o-1,i.startCol,i.endCol),r=!0):(r&&(s=o),o===i.endRow&&t(s,o,i.startCol,i.endCol),r=!1)})}),e}function EVe(n,e){if(!qs(bc,this).indicators||n<0)return;const t=[];n>=1&&this.isHidden(n-1)&&t.push("afterHiddenRow"),n<this.hot.countRows()-1&&this.isHidden(n+1)&&t.push("beforeHiddenRow"),ge(e,t)}function xVe(n){n.items.push({name:ft},bVe(this),vVe(this))}function TVe(){Array.isArray(qs(bc,this).rows)&&this.hideRows(qs(bc,this).rows)}function MVe(n){return{key:"freeze_column",name(){return this.getTranslatedPhrase(ZL)},callback(e,t){const[{start:{col:i}}]=t;n.freezeColumn(i),this.render(),this.view.adjustElementsSize()},hidden(){const e=this.getSelectedRange();let t=!1;return(e===void 0||e.length>1||e[0].from.col!==e[0].to.col||e[0].from.col<=this.getSettings().fixedColumnsStart-1)&&(t=!0),t}}}function AVe(n){return{key:"unfreeze_column",name(){return this.getTranslatedPhrase(QL)},callback(e,t){const[{start:{col:i}}]=t;n.unfreezeColumn(i),this.render(),this.view.adjustElementsSize()},hidden(){const e=this.getSelectedRange();let t=!1;return(e===void 0||e.length>1||e[0].from.col!==e[0].to.col||e[0].from.col>=this.getSettings().fixedColumnsStart)&&(t=!0),t}}}function PVe(n,e){Kq(n,e),e.add(n)}function IVe(n,e,t){Kq(n,e),e.set(n,t)}function Kq(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function sO(n,e){return n.get(TR(n,e))}function zM(n,e,t){return n.set(TR(n,e),t),t}function TR(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}Oe.getSingleton().register("beforeColumnFreeze");Oe.getSingleton().register("afterColumnFreeze");Oe.getSingleton().register("beforeColumnUnfreeze");Oe.getSingleton().register("afterColumnUnfreeze");const xj="manualColumnFreeze",OVe=110;var pd=new WeakMap,UM=new WeakSet;class kVe extends Ht{constructor(){super(...arguments),PVe(this,UM),IVe(this,pd,!1)}static get PLUGIN_KEY(){return xj}static get PLUGIN_PRIORITY(){return OVe}isEnabled(){return!!this.hot.getSettings()[xj]}enablePlugin(){this.enabled||(this.addHook("afterContextMenuDefaultOptions",e=>TR(UM,this,DVe).call(this,e)),this.addHook("beforeColumnMove",(e,t)=>TR(UM,this,LVe).call(this,e,t)),super.enablePlugin())}disablePlugin(){zM(pd,this,!1),super.disablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}freezeColumn(e){const t=this.hot.getSettings(),i=t.fixedColumnsStart<this.hot.countCols()&&e>t.fixedColumnsStart-1;sO(pd,this)||zM(pd,this,!0),this.hot.runHooks("beforeColumnFreeze",e,i)!==!1&&(i&&(this.hot.columnIndexMapper.moveIndexes(e,t.fixedColumnsStart),t._fixedColumnsStart+=1),this.hot.runHooks("afterColumnFreeze",e,i))}unfreezeColumn(e){const t=this.hot.getSettings(),i=t.fixedColumnsStart>0&&e<=t.fixedColumnsStart-1;sO(pd,this)||zM(pd,this,!0),this.hot.runHooks("beforeColumnUnfreeze",e,i)!==!1&&(i&&(t._fixedColumnsStart-=1,this.hot.columnIndexMapper.moveIndexes(e,t.fixedColumnsStart)),this.hot.runHooks("afterColumnUnfreeze",e,i))}}function DVe(n){n.items.push({name:"---------"},MVe(this),AVe(this))}function LVe(n,e){if(sO(pd,this)){const t=this.hot.getSettings().fixedColumnsStart;if(e<t||n.some(i=>i<t))return!1}}function $C(n,e,t){return(e=NVe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function NVe(n){var e=HVe(n,"string");return typeof e=="symbol"?e:e+""}function HVe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const GM=0,Tj=1,Mj=2,Cg="px";let qq=class{constructor(e){$C(this,"hot",void 0),$C(this,"_element",null),$C(this,"state",GM),$C(this,"inlineProperty",void 0),this.hot=e,this.inlineProperty=e.isRtl()?"right":"left"}appendTo(e){e.appendChild(this._element),this.state=Mj}build(){this.state===GM&&(this._element=this.hot.rootDocument.createElement("div"),this.state=Tj)}destroy(){this.isAppended()&&this._element.parentElement.removeChild(this._element),this._element=null,this.state=GM}isAppended(){return this.state===Mj}isBuilt(){return this.state>=Tj}setPosition(e,t){or(e)&&(this._element.style.top=e+Cg),or(t)&&(this._element.style[this.inlineProperty]=t+Cg)}getPosition(){const e=this._element.style;return{top:e.top?parseInt(e.top,10):0,start:e[this.inlineProperty]?parseInt(e[this.inlineProperty],10):0}}setSize(e,t){or(e)&&(this._element.style.width=e+Cg),or(t)&&(this._element.style.height=t+Cg)}getSize(){return{width:this._element.style.width?parseInt(this._element.style.width,10):0,height:this._element.style.height?parseInt(this._element.style.height,10):0}}setOffset(e,t){or(e)&&(this._element.style.marginTop=e+Cg),or(t)&&(this._element.style[`margin${pr(this.inlineProperty)}`]=t+Cg)}getOffset(){const e=this._element.style,t=`margin${pr(this.inlineProperty)}`;return{top:e.marginTop?parseInt(e.marginTop,10):0,start:e[t]?parseInt(e[t],10):0}}};const $Ve="ht__manualColumnMove--backlight";let FVe=class extends qq{build(){super.build(),ge(this._element,$Ve)}};const BVe="ht__manualColumnMove--guideline";let VVe=class extends qq{build(){super.build(),ge(this._element,BVe)}};function WVe(n,e){Xq(n,e),e.add(n)}function Oo(n,e,t){Xq(n,e),e.set(n,t)}function Xq(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Xr(n,e,t){return n.set(fu(n,e),t),t}function Ne(n,e){return n.get(fu(n,e))}function fu(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}Oe.getSingleton().register("beforeColumnMove");Oe.getSingleton().register("afterColumnMove");const YM="manualColumnMove",jVe=120,Aj="ht__manualColumnMove",MR="show-ui",oO="on-moving--columns",aO="after-selection--columns";var Mr=new WeakMap,wu=new WeakMap,vc=new WeakMap,GS=new WeakMap,Pu=new WeakMap,xr=new WeakMap,FC=new WeakMap,zs=new WeakMap,Hg=new WeakMap,AR=new WeakMap,Bv=new WeakMap,Qh=new WeakSet;class zVe extends Ht{constructor(){super(...arguments),WVe(this,Qh),Oo(this,Mr,new FVe(this.hot)),Oo(this,wu,new VVe(this.hot)),Oo(this,vc,[]),Oo(this,GS,0),Oo(this,Pu,!1),Oo(this,xr,{}),Oo(this,FC,void 0),Oo(this,zs,void 0),Oo(this,Hg,void 0),Oo(this,AR,void 0),Oo(this,Bv,void 0)}static get PLUGIN_KEY(){return YM}static get PLUGIN_PRIORITY(){return jVe}isEnabled(){return!!this.hot.getSettings()[YM]}enablePlugin(){var e=this;this.enabled||(this.addHook("beforeOnCellMouseDown",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return fu(Qh,e,UVe).call(e,...i)}),this.addHook("beforeOnCellMouseOver",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return fu(Qh,e,YVe).call(e,...i)}),this.addHook("afterScrollVertically",()=>fu(Qh,this,qVe).call(this)),this.addHook("afterLoadData",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return fu(Qh,e,XVe).call(e,...i)}),this.buildPluginUI(),this.registerEvents(),ge(this.hot.rootElement,Aj),super.enablePlugin())}updatePlugin(){this.disablePlugin(),this.enablePlugin(),this.moveBySettingsOrLoad(),super.updatePlugin()}disablePlugin(){Qe(this.hot.rootElement,Aj),this.unregisterEvents(),Ne(Mr,this).destroy(),Ne(wu,this).destroy(),super.disablePlugin()}moveColumn(e,t){return this.moveColumns([e],t)}moveColumns(e,t){const i=Ne(FC,this),r=this.isMovePossible(e,t),s=this.hot.runHooks("beforeColumnMove",e,t,i,r);if(Xr(FC,this,void 0),s===!1)return;r&&this.hot.columnIndexMapper.moveIndexes(e,t);const o=r&&this.isColumnOrderChanged(e,t);return this.hot.runHooks("afterColumnMove",e,t,i,r,o),o}dragColumn(e,t){return this.dragColumns([e],t)}dragColumns(e,t){const i=this.countFinalIndex(e,t);return Xr(FC,this,t),this.moveColumns(e,i)}isMovePossible(e,t){const i=this.hot.columnIndexMapper.getNotTrimmedIndexesLength(),r=e.length+t>i,s=t<0,o=e.some(l=>l<0),a=e.some(l=>l>=i);return!(r||s||o||a)}isColumnOrderChanged(e,t){return e.some((i,r)=>i-r!==t)}countFinalIndex(e,t){const i=ci(e,(r,s)=>(s<t&&(r+=1),r),0);return t-i}getColumnsWidth(e,t){const i=this.hot.columnIndexMapper;let r=0;for(let s=e;s<=t;s+=1){const o=i.getRenderableFromVisualIndex(s);s<0?r+=this.hot.view._wt.wtViewport.getRowHeaderWidth()||0:o!==null&&(r+=this.hot.view._wt.wtTable.getStretchedColumnWidth(o)||0)}return r}moveBySettingsOrLoad(){const e=this.hot.getSettings()[YM];if(Array.isArray(e))this.moveColumns(e,0);else if(e!==void 0){const t=this.persistentStateLoad();t.length&&this.moveColumns(t,0)}}isFixedColumnsStart(e){return e<this.hot.getSettings().fixedColumnsStart}persistentStateSave(){this.hot.runHooks("persistentStateSave","manualColumnMove",this.hot.columnIndexMapper.getIndexesSequence())}persistentStateLoad(){const e={};return this.hot.runHooks("persistentStateLoad","manualColumnMove",e),e.value?e.value:[]}prepareColumnsToMoving(e,t){const i=[];return $e(e,t,r=>{i.push(r)}),i}refreshPositions(){const e=this.hot.view.getFirstFullyVisibleColumn();this.isFixedColumnsStart(Ne(zs,this))&&e>0&&this.hot.scrollViewportTo({col:this.hot.columnIndexMapper.getNearestNotHiddenIndex(e-1,-1)});const t=this.hot.view._wt.wtTable,i=this.hot.view._wt.wtOverlays.scrollableElement,r=typeof i.scrollX=="number"?i.scrollX:i.scrollLeft;let s=this.hot.view.THEAD.offsetLeft+this.getColumnsWidth(0,Ne(zs,this)-1);const o=t.hider.offsetWidth,a=t.TBODY.offsetLeft,l=Ne(Mr,this).getOffset().start,c=Ne(Mr,this).getSize().width;let u=0,h=0;if(this.hot.isRtl()){const g=this.hot.rootWindow,p=gn(this.hot.rootElement),m=g.innerWidth-Ne(Hg,this)-p;h=g.innerWidth-Ne(xr,this).eventPageX-m-(i.scrollX===void 0?r:0)}else h=Ne(xr,this).eventPageX-(Ne(Hg,this)-(i.scrollX===void 0?r:0));if(Ne(AR,this)&&(u=this.hot.view._wt.wtOverlays.inlineStartOverlay.clone.wtTable.getColumnHeader(-1).offsetWidth),this.isFixedColumnsStart(Ne(zs,this))&&(s+=r),s+=u,Ne(zs,this)<0)Ne(Bv,this)>0?Ne(xr,this).col=0:Ne(xr,this).col=e>0?e-1:e;else if(Ne(xr,this).TD.offsetWidth/2+s<=h){const g=Ne(zs,this)>=Ne(GS,this)?Ne(GS,this)-1:Ne(zs,this);Ne(xr,this).col=g+1,s+=Ne(xr,this).TD.offsetWidth}else Ne(xr,this).col=Ne(zs,this);let d=h,f=s;h+c+l>=o?d=o-c-l:h+l<a+u&&(d=a+u+Math.abs(l)),s>=o-1?f=o-1:f===0?f=1:i.scrollX!==void 0&&Ne(zs,this)<Ne(Bv,this)&&(f-=Ne(Hg,this)<=i.scrollX?Ne(Hg,this):0),Ne(Mr,this).setPosition(null,d),Ne(wu,this).setPosition(null,f)}registerEvents(){const{documentElement:e}=this.hot.rootDocument;this.eventManager.addEventListener(e,"mousemove",t=>fu(Qh,this,GVe).call(this,t)),this.eventManager.addEventListener(e,"mouseup",()=>fu(Qh,this,KVe).call(this))}unregisterEvents(){this.eventManager.clear()}buildPluginUI(){Ne(Mr,this).build(),Ne(wu,this).build()}destroy(){Ne(Mr,this).destroy(),Ne(wu,this).destroy(),super.destroy()}}function UVe(n,e,t,i){const r=this.hot.view._wt.wtTable,s=this.hot.selection.isSelectedByColumnHeader(),o=this.hot.getSelectedRangeLast(),a=Ue(n.target,"sortAction");if(!o||!s||Ne(Pu,this)||n.button!==0||a){Xr(Pu,this,!1),Ne(vc,this).length=0,Qe(this.hot.rootElement,[oO,MR]);return}const l=Ne(wu,this).isBuilt()&&!Ne(wu,this).isAppended(),c=Ne(Mr,this).isBuilt()&&!Ne(Mr,this).isAppended();l&&c&&(Ne(wu,this).appendTo(r.hider),Ne(Mr,this).appendTo(r.hider));const{from:u,to:h}=o,d=Math.min(u.col,h.col),f=Math.max(u.col,h.col);if(e.row<0&&e.col>=d&&e.col<=f){i.column=!0,Xr(Pu,this,!0);const g=t.firstChild?nY(n,t.firstChild).x:n.offsetX;Ne(xr,this).eventPageX=n.pageX,Xr(zs,this,e.col),Ne(xr,this).TD=t,Ne(xr,this).col=e.col,Xr(vc,this,this.prepareColumnsToMoving(d,f)),Xr(AR,this,!!this.hot.getSettings().rowHeaders),Xr(GS,this,this.hot.countCols()),Xr(Bv,this,this.hot.getSettings().fixedColumnsStart),Xr(Hg,this,xi(this.hot.rootElement).left);const p=Ne(AR,this)?-1:0,m=r.holder.scrollTop+r.getColumnHeaderHeight(0)+1,v=e.col<Ne(Bv,this),y=this.hot.view._wt.wtOverlays.inlineStartOverlay.getOverlayOffset(),w=Math.abs(g-(this.hot.isRtl()?t.offsetWidth:0)),R=this.getColumnsWidth(d,e.col-1)+w,x=this.getColumnsWidth(p,d-1)+(v?y:0)+R;Ne(Mr,this).setPosition(m,x),Ne(Mr,this).setSize(this.getColumnsWidth(d,f),r.hider.offsetHeight-m),Ne(Mr,this).setOffset(null,-R),ge(this.hot.rootElement,oO)}else Qe(this.hot.rootElement,aO),Xr(Pu,this,!1),Ne(vc,this).length=0}function GVe(n){Ne(Pu,this)&&(Ne(xr,this).eventPageX=n.pageX,this.refreshPositions())}function YVe(n,e,t,i){!this.hot.getSelectedRangeLast()||!Ne(Pu,this)||(Ne(vc,this).indexOf(e.col)>-1?Qe(this.hot.rootElement,MR):ge(this.hot.rootElement,MR),i.row=!0,i.column=!0,i.cell=!0,Xr(zs,this,e.col),Ne(xr,this).TD=t)}function KVe(){const n=Ne(xr,this).col,e=Ne(vc,this).length;if(Xr(zs,this,void 0),Xr(Pu,this,!1),Qe(this.hot.rootElement,[oO,MR,aO]),this.hot.selection.isSelectedByColumnHeader()&&ge(this.hot.rootElement,aO),e<1||n===void 0)return;const t=Ne(vc,this)[0],i=this.hot.toPhysicalColumn(t),r=this.dragColumns(Ne(vc,this),n);if(Ne(vc,this).length=0,r===!0){this.persistentStateSave(),this.hot.render(),this.hot.view.adjustElementsSize();const s=this.hot.toVisualColumn(i),o=s+e-1;this.hot.selectColumns(s,o)}}function qVe(){const n=this.hot.view._wt.wtTable,e=n.getColumnHeaderHeight(0)+1,t=n.holder.scrollTop,i=e+t;Ne(Mr,this).setPosition(i),Ne(Mr,this).setSize(null,n.hider.offsetHeight-i)}function XVe(){this.moveBySettingsOrLoad()}function ZVe(n,e){Zq(n,e),e.add(n)}function tr(n,e,t){Zq(n,e),e.set(n,t)}function Zq(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Zn(n,e,t){return n.set(Bo(n,e),t),t}function Me(n,e){return n.get(Bo(n,e))}function Bo(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const PR="manualColumnResize",QVe=130,Pj="manualColumnWidths";var ec=new WeakMap,BC=new WeakMap,ds=new WeakMap,IR=new WeakMap,Ga=new WeakMap,JVe=new WeakMap,gp=new WeakMap,VC=new WeakMap,zr=new WeakMap,Kl=new WeakMap,gf=new WeakMap,OR=new WeakMap,Vv=new WeakMap,Wv=new WeakMap,gs=new WeakMap,jv=new WeakMap,Ea=new WeakSet;class e3e extends Ht{static get PLUGIN_KEY(){return PR}static get PLUGIN_PRIORITY(){return QVe}constructor(e){super(e),ZVe(this,Ea),tr(this,ec,null),tr(this,BC,null),tr(this,ds,[]),tr(this,IR,null),tr(this,Ga,null),tr(this,JVe,null),tr(this,gp,null),tr(this,VC,null),tr(this,zr,this.hot.rootDocument.createElement("DIV")),tr(this,Kl,this.hot.rootDocument.createElement("DIV")),tr(this,gf,null),tr(this,OR,!1),tr(this,Vv,0),tr(this,Wv,null),tr(this,gs,void 0),tr(this,jv,void 0),ge(Me(zr,this),"manualColumnResizer"),ge(Me(Kl,this),"manualColumnResizerGuide")}get inlineDir(){return this.hot.isRtl()?"right":"left"}isEnabled(){return this.hot.getSettings()[PR]}enablePlugin(){this.enabled||(Zn(gs,this,new ch),Me(gs,this).addLocalHook("init",()=>Bo(Ea,this,t3e).call(this)),this.hot.columnIndexMapper.registerMap(this.pluginName,Me(gs,this)),this.addHook("modifyColWidth",(e,t)=>Bo(Ea,this,a3e).call(this,e,t),1),this.addHook("beforeStretchingColumnWidth",(e,t)=>Bo(Ea,this,l3e).call(this,e,t)),this.addHook("beforeColumnResize",(e,t,i)=>Bo(Ea,this,c3e).call(this,e,t,i)),this.bindEvents(),super.enablePlugin())}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){Zn(jv,this,Me(gs,this).getValues()),this.hot.columnIndexMapper.unregisterMap(this.pluginName),super.disablePlugin()}saveManualColumnWidths(){this.hot.runHooks("persistentStateSave",Pj,Me(gs,this).getValues())}loadManualColumnWidths(){const e={};return this.hot.runHooks("persistentStateLoad",Pj,e),e.value}setManualSize(e,t){const i=Math.max(t,20),r=this.hot.toPhysicalColumn(e);return Me(gs,this).setValueAtIndex(r,i),i}clearManualSize(e){const t=this.hot.toPhysicalColumn(e);Me(gs,this).setValueAtIndex(t,null)}setupHandlePosition(e){if(!e.parentNode)return;Zn(ec,this,e);const{_wt:t}=this.hot.view,i=t.wtTable.getCoords(Me(ec,this)),r=i.col;if(r<0)return;const s=ni(Me(ec,this)),o=Me(ec,this).getBoundingClientRect(),a=r<t.getSetting("fixedColumnsStart");let l;a&&(l=t.wtOverlays.topInlineStartCornerOverlay.getRelativeCellPosition(Me(ec,this),i.row,i.col)),l||(l=t.wtOverlays.topOverlay.getRelativeCellPosition(Me(ec,this),i.row,i.col)),Zn(BC,this,this.hot.columnIndexMapper.getVisualFromRenderableIndex(r)),Zn(ds,this,[]);const c=this.hot.selection.isSelectedByCorner()||this.hot.selection.isSelectedByColumnHeader();if(this.hot.selection.isSelected()&&c){const u=this.hot.getSelectedRange();q(u,h=>{const d=h.getTopStartCorner().col,f=h.getBottomEndCorner().col;$e(d,f,g=>{Me(ds,this).includes(g)||Me(ds,this).push(g)})})}Me(ds,this).includes(Me(BC,this))||Zn(ds,this,[Me(BC,this)]),Zn(VC,this,l.start-6),Zn(gp,this,parseInt(o.width,10)),Me(zr,this).style.top=`${l.top}px`,Me(zr,this).style[this.inlineDir]=`${Me(VC,this)+Me(gp,this)}px`,Me(zr,this).style.height=`${s}px`,this.hot.rootElement.appendChild(Me(zr,this))}refreshHandlePosition(){Me(zr,this).style[this.inlineDir]=`${Me(VC,this)+Me(IR,this)}px`}setupGuidePosition(){const e=parseInt(ni(Me(zr,this)),10),t=parseInt(Me(zr,this).style.top,10)+e,i=parseInt(this.hot.view.maximumVisibleElementHeight(0),10);ge(Me(zr,this),"active"),ge(Me(Kl,this),"active"),Me(Kl,this).style.top=`${t}px`,this.refreshGuidePosition(),Me(Kl,this).style.height=`${i-e}px`,this.hot.rootElement.appendChild(Me(Kl,this))}refreshGuidePosition(){Me(Kl,this).style[this.inlineDir]=Me(zr,this).style[this.inlineDir]}hideHandleAndGuide(){Qe(Me(zr,this),"active"),Qe(Me(Kl,this),"active")}checkIfColumnHeader(e){const t=Yu(e,["THEAD"],this.hot.rootElement),{topOverlay:i,topInlineStartCornerOverlay:r}=this.hot.view._wt.wtOverlays;return[i.clone.wtTable.THEAD,r.clone.wtTable.THEAD].includes(t)}getClosestTHParent(e){return e.tagName!=="TABLE"?e.tagName==="TH"?e:this.getClosestTHParent(e.parentNode):null}afterMouseDownTimeout(){const e=()=>{this.hot.forceFullRender=!0,this.hot.view.render(),this.hot.view.adjustElementsSize()},t=(i,r)=>{const s=this.hot.runHooks("beforeColumnResize",Me(Ga,this),i,!0);s!==void 0&&Zn(Ga,this,s),this.hot.getSettings().stretchH==="all"?this.clearManualSize(i):this.setManualSize(i,Me(Ga,this)),this.saveManualColumnWidths(),this.hot.runHooks("afterColumnResize",Me(Ga,this),i,!0),r&&e()};Me(Vv,this)>=2&&(Me(ds,this).length>1?(q(Me(ds,this),r=>{t(r)}),e()):q(Me(ds,this),r=>{t(r,!0)})),Zn(Vv,this,0),Zn(Wv,this,null)}bindEvents(){const{rootWindow:e,rootElement:t}=this.hot;this.eventManager.addEventListener(t,"mouseover",i=>Bo(Ea,this,n3e).call(this,i)),this.eventManager.addEventListener(t,"mousedown",i=>Bo(Ea,this,i3e).call(this,i)),this.eventManager.addEventListener(e,"mousemove",i=>Bo(Ea,this,r3e).call(this,i)),this.eventManager.addEventListener(e,"mouseup",()=>Bo(Ea,this,s3e).call(this)),this.eventManager.addEventListener(Me(zr,this),"contextmenu",()=>Bo(Ea,this,o3e).call(this))}destroy(){super.destroy()}}function t3e(){const n=this.hot.getSettings()[PR],e=this.loadManualColumnWidths();typeof e<"u"?this.hot.batchExecution(()=>{e.forEach((t,i)=>{Me(gs,this).setValueAtIndex(i,t)})},!0):Array.isArray(n)?(this.hot.batchExecution(()=>{n.forEach((t,i)=>{Me(gs,this).setValueAtIndex(i,t)})},!0),Zn(jv,this,n)):n===!0&&Array.isArray(Me(jv,this))&&this.hot.batchExecution(()=>{Me(jv,this).forEach((t,i)=>{Me(gs,this).setValueAtIndex(i,t)})},!0)}function n3e(n){if(!GD(n.target)&&Me(OR,this)!==!0&&this.checkIfColumnHeader(n.target)){const e=this.getClosestTHParent(n.target);if(!e)return;const t=e.getAttribute("colspan");e&&(t===null||t==="1")&&(Me(gf,this)||this.setupHandlePosition(e))}}function i3e(n){n.target.parentNode===this.hot.rootElement&&Ue(n.target,"manualColumnResizer")&&(this.setupHandlePosition(Me(ec,this)),this.setupGuidePosition(),Zn(gf,this,!0),Me(Wv,this)===null&&(Zn(Wv,this,setTimeout(()=>this.afterMouseDownTimeout(),500)),this.hot._registerTimeout(Me(Wv,this))),Zn(Vv,this,Me(Vv,this)+1),this.startX=n.pageX,Zn(Ga,this,Me(gp,this)))}function r3e(n){if(Me(gf,this)){const e=(n.pageX-this.startX)*this.hot.getDirectionFactor();Zn(IR,this,Me(gp,this)+e),q(Me(ds,this),t=>{Zn(Ga,this,this.setManualSize(t,Me(IR,this)))}),this.refreshHandlePosition(),this.refreshGuidePosition()}}function s3e(){const n=()=>{this.hot.forceFullRender=!0,this.hot.view.render(),this.hot.view.adjustElementsSize()},e=(t,i)=>{this.hot.runHooks("beforeColumnResize",Me(Ga,this),t,!1),i&&n(),this.saveManualColumnWidths(),this.hot.runHooks("afterColumnResize",Me(Ga,this),t,!1)};Me(gf,this)&&(this.hideHandleAndGuide(),Zn(gf,this,!1),Me(Ga,this)!==Me(gp,this)&&(Me(ds,this).length>1?(q(Me(ds,this),i=>{e(i)}),n()):q(Me(ds,this),i=>{e(i,!0)})),this.setupHandlePosition(Me(ec,this)))}function o3e(){this.hideHandleAndGuide(),this.hot.rootElement.removeChild(Me(zr,this)),this.hot.rootElement.removeChild(Me(Kl,this)),Zn(gf,this,!1),Zn(OR,this,!0),this.hot._registerImmediate(()=>{Zn(OR,this,!1)})}function a3e(n,e){let t=n;if(this.enabled){const i=this.hot.toPhysicalColumn(e),r=Me(gs,this).getValueAtIndex(i);this.hot.getSettings()[PR]&&r&&(t=r)}return t}function l3e(n,e){let t=Me(gs,this).getValueAtIndex(e);return t===null&&(t=n),t}function c3e(){this.hot.view._wt.wtViewport.resetHasOversizedColumnHeadersMarked()}function KM(n,e,t){return(e=u3e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function u3e(n){var e=h3e(n,"string");return typeof e=="symbol"?e:e+""}function h3e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const qM=0,Ij=1,Oj=2,Sg="px";let Qq=class{constructor(e){KM(this,"hot",void 0),KM(this,"_element",null),KM(this,"state",qM),this.hot=e}appendTo(e){e.appendChild(this._element),this.state=Oj}build(){this.state===qM&&(this._element=this.hot.rootDocument.createElement("div"),this.state=Ij)}destroy(){this.isAppended()&&this._element.parentElement.removeChild(this._element),this._element=null,this.state=qM}isAppended(){return this.state===Oj}isBuilt(){return this.state>=Ij}setPosition(e,t){e!==void 0&&(this._element.style.top=e+Sg),t!==void 0&&(this._element.style.left=t+Sg)}getPosition(){return{top:this._element.style.top?parseInt(this._element.style.top,10):0,left:this._element.style.left?parseInt(this._element.style.left,10):0}}setSize(e,t){e&&(this._element.style.width=e+Sg),t&&(this._element.style.height=t+Sg)}getSize(){return{width:this._element.style.width?parseInt(this._element.style.width,10):0,height:this._element.style.height?parseInt(this._element.style.height,10):0}}setOffset(e,t){e&&(this._element.style.marginTop=e+Sg),t&&(this._element.style.marginLeft=t+Sg)}getOffset(){return{top:this._element.style.marginTop?parseInt(this._element.style.marginTop,10):0,left:this._element.style.marginLeft?parseInt(this._element.style.marginLeft,10):0}}};const d3e="ht__manualRowMove--backlight";class f3e extends Qq{build(){super.build(),ge(this._element,d3e)}}const g3e="ht__manualRowMove--guideline";class p3e extends Qq{build(){super.build(),ge(this._element,g3e)}}function m3e(n,e){Jq(n,e),e.add(n)}function _g(n,e,t){Jq(n,e),e.set(n,t)}function Jq(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Od(n,e,t){return n.set(gu(n,e),t),t}function nt(n,e){return n.get(gu(n,e))}function gu(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}Oe.getSingleton().register("beforeRowMove");Oe.getSingleton().register("afterRowMove");const XM="manualRowMove",b3e=140,kj="ht__manualRowMove",kR="show-ui",lO="on-moving--rows",cO="after-selection--rows";var Ar=new WeakMap,yu=new WeakMap,wc=new WeakMap,Iu=new WeakMap,Zr=new WeakMap,WC=new WeakMap,Jh=new WeakSet;class v3e extends Ht{constructor(){super(...arguments),m3e(this,Jh),_g(this,Ar,new f3e(this.hot)),_g(this,yu,new p3e(this.hot)),_g(this,wc,[]),_g(this,Iu,void 0),_g(this,Zr,{}),_g(this,WC,void 0)}static get PLUGIN_KEY(){return XM}static get PLUGIN_PRIORITY(){return b3e}isEnabled(){return!!this.hot.getSettings()[XM]}enablePlugin(){var e=this;this.enabled||(this.addHook("beforeOnCellMouseDown",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return gu(Jh,e,w3e).call(e,...i)}),this.addHook("beforeOnCellMouseOver",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return gu(Jh,e,C3e).call(e,...i)}),this.addHook("afterScrollHorizontally",()=>gu(Jh,this,_3e).call(this)),this.addHook("afterLoadData",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return gu(Jh,e,R3e).call(e,...i)}),this.buildPluginUI(),this.registerEvents(),ge(this.hot.rootElement,kj),super.enablePlugin())}updatePlugin(){this.disablePlugin(),this.enablePlugin(),this.moveBySettingsOrLoad(),super.updatePlugin()}disablePlugin(){Qe(this.hot.rootElement,kj),this.unregisterEvents(),nt(Ar,this).destroy(),nt(yu,this).destroy(),super.disablePlugin()}moveRow(e,t){return this.moveRows([e],t)}moveRows(e,t){const i=nt(WC,this),r=this.isMovePossible(e,t),s=this.hot.runHooks("beforeRowMove",e,t,i,r);if(Od(WC,this,void 0),s===!1)return;r&&this.hot.rowIndexMapper.moveIndexes(e,t);const o=r&&this.isRowOrderChanged(e,t);return this.hot.runHooks("afterRowMove",e,t,i,r,o),o}dragRow(e,t){return this.dragRows([e],t)}dragRows(e,t){const i=this.countFinalIndex(e,t);return Od(WC,this,t),this.moveRows(e,i)}isMovePossible(e,t){const i=this.hot.rowIndexMapper.getNotTrimmedIndexesLength(),r=e.length+t>i,s=t<0,o=e.some(l=>l<0),a=e.some(l=>l>=i);return!(r||s||o||a)}isRowOrderChanged(e,t){return e.some((i,r)=>i-r!==t)}countFinalIndex(e,t){const i=ci(e,(r,s)=>(s<t&&(r+=1),r),0);return t-i}getRowsHeight(e,t){const i=this.hot.rowIndexMapper;let r=0;for(let s=e;s<=t;s++){const o=i.getRenderableFromVisualIndex(s);o!==null&&(r+=this.hot.view._wt.wtTable.getRowHeight(o)||23)}return r}moveBySettingsOrLoad(){const e=this.hot.getSettings()[XM];if(Array.isArray(e))this.moveRows(e,0);else if(e!==void 0){const t=this.persistentStateLoad();t.length&&this.moveRows(t,0)}}isFixedRowTop(e){return e<this.hot.getSettings().fixedRowsTop}isFixedRowBottom(e){return e>this.hot.countRows()-1-this.hot.getSettings().fixedRowsBottom}persistentStateSave(){this.hot.runHooks("persistentStateSave","manualRowMove",this.hot.rowIndexMapper.getIndexesSequence())}persistentStateLoad(){const e={};return this.hot.runHooks("persistentStateLoad","manualRowMove",e),e.value?e.value:[]}prepareRowsToMoving(){const e=this.hot.getSelectedRangeLast(),t=[];if(!e)return t;const{from:i,to:r}=e,s=Math.min(i.row,r.row),o=Math.max(i.row,r.row);return $e(s,o,a=>{t.push(a)}),t}refreshPositions(){const e=nt(Zr,this).coords,t=this.hot.view.getFirstFullyVisibleRow(),i=this.hot.view.getLastFullyVisibleRow(),r=this.hot.countRows();this.isFixedRowTop(e.row)&&t>0&&this.hot.scrollViewportTo(this.hot.rowIndexMapper.getNearestNotHiddenIndex(t-1,-1)),this.isFixedRowBottom(e.row)&&i<r&&this.hot.scrollViewportTo(this.hot.rowIndexMapper.getNearestNotHiddenIndex(i+1,1),void 0,!0);const s=this.hot.view._wt.wtTable,o=nt(Zr,this).TD,a=this.hot.rootElement,l=xi(a),c=cf(a),u=s.holder.scrollTop,h=this.hot.rootWindow!==c?c.scrollTop:0,d=l.top-h,f=nt(Zr,this).eventPageY-d+u,g=s.hider.offsetHeight,p=s.TBODY.offsetTop,m=nt(Ar,this).getOffset().top,v=nt(Ar,this).getSize().height,y=o.offsetHeight/2,w=o.offsetHeight;let R=this.hot.view.THEAD.offsetHeight+this.getRowsHeight(0,e.row-1);const x=f>=R+y;this.isFixedRowTop(e.row)&&(R+=this.hot.view._wt.wtOverlays.topOverlay.getOverlayOffset()),e.row<0?nt(Zr,this).row=t>0?t-1:t:x?(nt(Zr,this).row=e.row+1,R+=e.row===0?w-1:w):nt(Zr,this).row=e.row;let S=f,T=R;f+v+m>=g?S=g-v-m:f+m<p&&(S=p+Math.abs(m)),R>=g-1&&(T=g-1),nt(Ar,this).setPosition(S),nt(yu,this).setPosition(T)}registerEvents(){const{documentElement:e}=this.hot.rootDocument;this.eventManager.addEventListener(e,"mousemove",t=>gu(Jh,this,y3e).call(this,t)),this.eventManager.addEventListener(e,"mouseup",()=>gu(Jh,this,S3e).call(this))}unregisterEvents(){this.eventManager.clear()}buildPluginUI(){nt(Ar,this).build(),nt(yu,this).build()}destroy(){nt(Ar,this).destroy(),nt(yu,this).destroy(),super.destroy()}}function w3e(n,e,t,i){const{wtTable:r,wtViewport:s}=this.hot.view._wt,o=this.hot.selection.isSelectedByRowHeader(),a=this.hot.getSelectedRangeLast();if(!a||!o||nt(Iu,this)||n.button!==0){Od(Iu,this,!1),nt(wc,this).length=0,Qe(this.hot.rootElement,[lO,kR]);return}const l=nt(yu,this).isBuilt()&&!nt(yu,this).isAppended(),c=nt(Ar,this).isBuilt()&&!nt(Ar,this).isAppended();l&&c&&(nt(yu,this).appendTo(r.hider),nt(Ar,this).appendTo(r.hider));const{from:u,to:h}=a,d=Math.min(u.row,h.row),f=Math.max(u.row,h.row);if(e.col<0&&e.row>=d&&e.row<=f){i.row=!0,Od(Iu,this,!0),nt(Zr,this).eventPageY=n.pageY,nt(Zr,this).coords=e,nt(Zr,this).TD=t,Od(wc,this,this.prepareRowsToMoving());const g=r.holder.scrollLeft+s.getRowHeaderWidth(),p=this.getRowsHeight(d,e.row-1)+n.offsetY;nt(Ar,this).setPosition(null,g),nt(Ar,this).setSize(r.hider.offsetWidth-g,this.getRowsHeight(d,f)),nt(Ar,this).setOffset(-p,null),ge(this.hot.rootElement,lO),this.refreshPositions()}else Qe(this.hot.rootElement,cO),Od(Iu,this,!1),nt(wc,this).length=0}function y3e(n){nt(Iu,this)&&(nt(Zr,this).eventPageY=n.pageY,this.refreshPositions())}function C3e(n,e,t,i){!this.hot.getSelectedRangeLast()||!nt(Iu,this)||(nt(wc,this).indexOf(e.row)>-1?Qe(this.hot.rootElement,kR):ge(this.hot.rootElement,kR),i.row=!0,i.column=!0,i.cell=!0,nt(Zr,this).coords=e,nt(Zr,this).TD=t)}function S3e(){const n=nt(Zr,this).row,e=nt(wc,this).length;if(Od(Iu,this,!1),Qe(this.hot.rootElement,[lO,kR,cO]),this.hot.selection.isSelectedByRowHeader()&&ge(this.hot.rootElement,cO),e<1||n===void 0)return;const t=nt(wc,this)[0],i=this.hot.toPhysicalRow(t),r=this.dragRows(nt(wc,this),n);if(nt(wc,this).length=0,r===!0){this.persistentStateSave(),this.hot.render(),this.hot.view.adjustElementsSize();const s=this.hot.toVisualRow(i),o=s+e-1;this.hot.selectRows(s,o)}}function _3e(){const n=this.hot.view._wt.wtTable,e=this.hot.view._wt.wtViewport.getRowHeaderWidth(),t=n.holder.scrollLeft,i=e+t;nt(Ar,this).setPosition(null,i),nt(Ar,this).setSize(n.hider.offsetWidth-i)}function R3e(){this.moveBySettingsOrLoad()}function E3e(n,e){eX(n,e),e.add(n)}function nr(n,e,t){eX(n,e),e.set(n,t)}function eX(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Bn(n,e,t){return n.set(tc(n,e),t),t}function Te(n,e){return n.get(tc(n,e))}function tc(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const DR="manualRowResize",x3e=30,Dj="manualRowHeights";var La=new WeakMap,jC=new WeakMap,fs=new WeakMap,zv=new WeakMap,Cu=new WeakMap,kH=new WeakMap,pp=new WeakMap,zC=new WeakMap,Sr=new WeakMap,ka=new WeakMap,pf=new WeakMap,LR=new WeakMap,Uv=new WeakMap,Gv=new WeakMap,Wo=new WeakMap,Yv=new WeakMap,iu=new WeakSet;class T3e extends Ht{static get PLUGIN_KEY(){return DR}static get PLUGIN_PRIORITY(){return x3e}constructor(e){super(e),E3e(this,iu),nr(this,La,null),nr(this,jC,null),nr(this,fs,[]),nr(this,zv,null),nr(this,Cu,null),nr(this,kH,null),nr(this,pp,null),nr(this,zC,null),nr(this,Sr,this.hot.rootDocument.createElement("DIV")),nr(this,ka,this.hot.rootDocument.createElement("DIV")),nr(this,pf,!1),nr(this,LR,!1),nr(this,Uv,0),nr(this,Gv,null),nr(this,Wo,void 0),nr(this,Yv,void 0),ge(Te(Sr,this),"manualRowResizer"),ge(Te(ka,this),"manualRowResizerGuide")}get inlineDir(){return this.hot.isRtl()?"right":"left"}isEnabled(){return this.hot.getSettings()[DR]}enablePlugin(){this.enabled||(Bn(Wo,this,new ch),Te(Wo,this).addLocalHook("init",()=>tc(iu,this,D3e).call(this)),this.hot.rowIndexMapper.registerMap(this.pluginName,Te(Wo,this)),this.addHook("modifyRowHeight",(e,t)=>tc(iu,this,k3e).call(this,e,t)),this.bindEvents(),super.enablePlugin())}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}disablePlugin(){Bn(Yv,this,Te(Wo,this).getValues()),this.hot.rowIndexMapper.unregisterMap(this.pluginName),super.disablePlugin()}saveManualRowHeights(){this.hot.runHooks("persistentStateSave",Dj,Te(Wo,this).getValues())}loadManualRowHeights(){const e={};return this.hot.runHooks("persistentStateLoad",Dj,e),e.value}setManualSize(e,t){const i=this.hot.toPhysicalRow(e),r=Math.max(t,yY);return Te(Wo,this).setValueAtIndex(i,r),r}getLastDesiredRowHeight(){return Te(zv,this)}setupHandlePosition(e){Bn(La,this,e);const{view:t}=this.hot,{_wt:i}=t,r=i.wtTable.getCoords(Te(La,this)),s=r.row;if(s<0)return;const o=gn(Te(La,this)),a=Te(La,this).getBoundingClientRect(),l=s<i.getSetting("fixedRowsTop"),c=s>=t.countNotHiddenRowIndexes(0,1)-i.getSetting("fixedRowsBottom");let u;l?u=i.wtOverlays.topInlineStartCornerOverlay.getRelativeCellPosition(Te(La,this),r.row,r.col):c&&(u=i.wtOverlays.bottomInlineStartCornerOverlay.getRelativeCellPosition(Te(La,this),r.row,r.col)),u||(u=i.wtOverlays.inlineStartOverlay.getRelativeCellPosition(Te(La,this),r.row,r.col)),Bn(jC,this,this.hot.rowIndexMapper.getVisualFromRenderableIndex(s)),Bn(fs,this,[]);const h=this.hot.selection.isSelectedByCorner()||this.hot.selection.isSelectedByRowHeader();if(this.hot.selection.isSelected()&&h){const d=this.hot.getSelectedRange();q(d,f=>{const g=f.getTopStartCorner().row,p=f.getBottomStartCorner().row;$e(g,p,m=>{Te(fs,this).includes(m)||Te(fs,this).push(m)})})}Te(fs,this).includes(Te(jC,this))||Bn(fs,this,[Te(jC,this)]),Bn(zC,this,u.top-6),Bn(pp,this,parseInt(a.height,10)),Te(Sr,this).style.top=`${Te(zC,this)+Te(pp,this)}px`,Te(Sr,this).style[this.inlineDir]=`${u.start}px`,Te(Sr,this).style.width=`${o}px`,this.hot.rootElement.appendChild(Te(Sr,this))}refreshHandlePosition(){Te(Sr,this).style.top=`${Te(zC,this)+Te(zv,this)}px`}setupGuidePosition(){const e=parseInt(gn(Te(Sr,this)),10),t=parseInt(Te(Sr,this).style[this.inlineDir],10)+e,i=parseInt(this.hot.view.maximumVisibleElementWidth(0),10);ge(Te(Sr,this),"active"),ge(Te(ka,this),"active"),Te(ka,this).style.top=Te(Sr,this).style.top,Te(ka,this).style[this.inlineDir]=`${t}px`,Te(ka,this).style.width=`${i-e}px`,this.hot.rootElement.appendChild(Te(ka,this))}refreshGuidePosition(){Te(ka,this).style.top=Te(Sr,this).style.top}hideHandleAndGuide(){Qe(Te(Sr,this),"active"),Qe(Te(ka,this),"active")}checkIfRowHeader(e){const t=Yu(e,["TBODY"],this.hot.rootElement),{inlineStartOverlay:i,topInlineStartCornerOverlay:r,bottomInlineStartCornerOverlay:s}=this.hot.view._wt.wtOverlays;return[i.clone.wtTable.TBODY,r.clone.wtTable.TBODY,s.clone.wtTable.TBODY].includes(t)}getClosestTHParent(e){return e.tagName!=="TABLE"?e.tagName==="TH"?e:this.getClosestTHParent(e.parentNode):null}getActualRowHeight(e){const t=this.hot.view._wt.wtTable.getRowHeight(e);return t!==void 0&&Te(Cu,this)<t?t:Te(Cu,this)}afterMouseDownTimeout(){const e=()=>{this.hot.forceFullRender=!0,this.hot.view.render(),this.hot.view.adjustElementsSize()},t=(i,r)=>{const s=this.hot.runHooks("beforeRowResize",this.getActualRowHeight(i),i,!0);s!==void 0&&Bn(Cu,this,s),this.setManualSize(i,Te(Cu,this)),this.hot.runHooks("afterRowResize",this.getActualRowHeight(i),i,!0),r&&e()};Te(Uv,this)>=2&&(Te(fs,this).length>1?(q(Te(fs,this),r=>{t(r)}),e()):q(Te(fs,this),r=>{t(r,!0)})),Bn(Uv,this,0),Bn(Gv,this,null)}bindEvents(){const{rootElement:e,rootWindow:t}=this.hot;this.eventManager.addEventListener(e,"mouseover",i=>tc(iu,this,M3e).call(this,i)),this.eventManager.addEventListener(e,"mousedown",i=>tc(iu,this,A3e).call(this,i)),this.eventManager.addEventListener(t,"mousemove",i=>tc(iu,this,P3e).call(this,i)),this.eventManager.addEventListener(t,"mouseup",()=>tc(iu,this,I3e).call(this)),this.eventManager.addEventListener(Te(Sr,this),"contextmenu",()=>tc(iu,this,O3e).call(this))}destroy(){super.destroy()}}function M3e(n){if(!GD(n.target)&&Te(LR,this)!==!0&&this.checkIfRowHeader(n.target)){const e=this.getClosestTHParent(n.target);e&&(Te(pf,this)||this.setupHandlePosition(e))}}function A3e(n){Ue(n.target,"manualRowResizer")&&(this.setupHandlePosition(Te(La,this)),this.setupGuidePosition(),Bn(pf,this,!0),Te(Gv,this)===null&&(Bn(Gv,this,setTimeout(()=>this.afterMouseDownTimeout(),500)),this.hot._registerTimeout(Te(Gv,this))),Bn(Uv,this,Te(Uv,this)+1),Bn(kH,this,n.pageY),Bn(Cu,this,Te(pp,this)))}function P3e(n){Te(pf,this)&&(Bn(zv,this,Te(pp,this)+(n.pageY-Te(kH,this))),q(Te(fs,this),e=>{Bn(Cu,this,this.setManualSize(e,Te(zv,this)))}),this.refreshHandlePosition(),this.refreshGuidePosition())}function I3e(){const n=()=>{this.hot.forceFullRender=!0,this.hot.view.render(),this.hot.view.adjustElementsSize()},e=(t,i)=>{this.hot.runHooks("beforeRowResize",this.getActualRowHeight(t),t,!1),i&&n(),this.saveManualRowHeights(),this.hot.runHooks("afterRowResize",this.getActualRowHeight(t),t,!1)};Te(pf,this)&&(this.hideHandleAndGuide(),Bn(pf,this,!1),Te(Cu,this)!==Te(pp,this)&&(Te(fs,this).length>1?(q(Te(fs,this),i=>{e(i)}),n()):q(Te(fs,this),i=>{e(i,!0)})),this.setupHandlePosition(Te(La,this)))}function O3e(){this.hideHandleAndGuide(),this.hot.rootElement.removeChild(Te(Sr,this)),this.hot.rootElement.removeChild(Te(ka,this)),Bn(pf,this,!1),Bn(LR,this,!0),this.hot._registerImmediate(()=>{Bn(LR,this,!1)})}function k3e(n,e){let t=n;if(this.enabled){const i=this.hot.toPhysicalRow(e),r=Te(Wo,this).getValueAtIndex(i);this.hot.getSettings()[DR]&&r&&(t=r)}return t}function D3e(){const n=this.hot.getSettings()[DR],e=this.loadManualRowHeights();this.hot.batchExecution(()=>{typeof e<"u"?e.forEach((t,i)=>{Te(Wo,this).setValueAtIndex(i,t)}):Array.isArray(n)?(n.forEach((t,i)=>{Te(Wo,this).setValueAtIndex(i,t)}),Bn(Yv,this,n)):n===!0&&Array.isArray(Te(Yv,this))&&Te(Yv,this).forEach((t,i)=>{Te(Wo,this).setValueAtIndex(i,t)})},!0)}function L3e(n,e,t){N3e(n,e),e.set(n,t)}function N3e(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ed(n,e,t){return(e=H3e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function H3e(n){var e=$3e(n,"string");return typeof e=="symbol"?e:e+""}function $3e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Lj(n,e){return n.get(tX(n,e))}function UC(n,e,t){return n.set(tX(n,e),t),t}function tX(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var td=new WeakMap;class Na{constructor(e,t,i,r,s,o){ed(this,"row",void 0),ed(this,"col",void 0),ed(this,"rowspan",void 0),ed(this,"colspan",void 0),ed(this,"removed",!1),ed(this,"cellCoordsFactory",void 0),ed(this,"cellRangeFactory",void 0),L3e(this,td,null),this.row=e,this.col=t,this.rowspan=i,this.colspan=r,this.cellCoordsFactory=s,this.cellRangeFactory=o}static NEGATIVE_VALUES_WARNING(e){let{row:t,col:i,rowspan:r,colspan:s}=e;return Kt`The merged cell declared with {row: ${t}, col: ${i},\x20
      rowspan: ${r}, colspan: ${s}} contains negative values, which is\x20
      not supported. It will not be added to the collection.`}static IS_OUT_OF_BOUNDS_WARNING(e){let{row:t,col:i}=e;return Kt`The merged cell declared at [${t}, ${i}] is positioned\x20
      (or positioned partially) outside of the table range. It was not added to the table, please fix your setup.`}static IS_SINGLE_CELL(e){let{row:t,col:i}=e;return Kt`The merged cell declared at [${t}, ${i}] has both "rowspan"\x20
      and "colspan" declared as "1", which makes it a single cell. It cannot be added to the collection.`}static ZERO_SPAN_WARNING(e){let{row:t,col:i}=e;return Kt`The merged cell declared at [${t}, ${i}] has "rowspan"\x20
      or "colspan" declared as "0", which is not supported. It cannot be added to the collection.`}static containsNegativeValues(e){let{row:t,col:i,rowspan:r,colspan:s}=e;return t<0||i<0||r<0||s<0}static isSingleCell(e){let{rowspan:t,colspan:i}=e;return i===1&&t===1}static containsZeroSpan(e){let{rowspan:t,colspan:i}=e;return i===0||t===0}static isOutOfBounds(e,t,i){return e.row<0||e.col<0||e.row>=t||e.row+e.rowspan-1>=t||e.col>=i||e.col+e.colspan-1>=i}normalize(e){const t=e.countRows(),i=e.countCols();this.row<0?this.row=0:this.row>t-1&&(this.row=t-1),this.col<0?this.col=0:this.col>i-1&&(this.col=i-1),this.row+this.rowspan>t-1&&(this.rowspan=t-this.row),this.col+this.colspan>i-1&&(this.colspan=i-this.col),UC(td,this,null)}includes(e,t){return this.row<=e&&this.col<=t&&this.row+this.rowspan-1>=e&&this.col+this.colspan-1>=t}includesHorizontally(e){return this.col<=e&&this.col+this.colspan-1>=e}includesVertically(e){return this.row<=e&&this.row+this.rowspan-1>=e}shift(e,t){const i=e[0]||e[1],r=t+Math.abs(e[0]||e[1])-1,s=e[0]?"colspan":"rowspan",o=e[0]?"col":"row",a=Math.min(t,r),l=Math.max(t,r),c=this[o],u=this[o]+this[s]-1;if(c>=t&&(this[o]+=i),i>0)t<=u&&t>c&&(this[s]+=i);else if(i<0){if(a<=c&&l>=u)return this.removed=!0,UC(td,this,null),!1;if(c>=a&&c<=l){const h=l-c+1,d=Math.abs(i)-h;this[o]-=d+i,this[s]-=h}else if(c<=a&&u>=l)this[s]+=i;else if(c<=a&&u>=a&&u<l){const h=u-a+1;this[s]-=h}}return UC(td,this,null),!0}isFarther(e,t){return e?t==="down"?e.row+e.rowspan-1<this.row+this.rowspan-1:t==="up"?e.row>this.row:t==="right"?e.col+e.colspan-1<this.col+this.colspan-1:t==="left"?e.col>this.col:null:!0}getLastRow(){return this.row+this.rowspan-1}getLastColumn(){return this.col+this.colspan-1}getRange(){return Lj(td,this)||UC(td,this,this.cellRangeFactory(this.cellCoordsFactory(this.row,this.col),this.cellCoordsFactory(this.row,this.col),this.cellCoordsFactory(this.getLastRow(),this.getLastColumn()))),Lj(td,this)}}function F3e(n,e){B3e(n,e),e.add(n)}function B3e(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function GC(n,e,t){return(e=V3e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function V3e(n){var e=W3e(n,"string");return typeof e=="symbol"?e:e+""}function W3e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function nd(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var ru=new WeakSet;class NR{constructor(e){F3e(this,ru),GC(this,"plugin",void 0),GC(this,"mergedCells",[]),GC(this,"mergedCellsMatrix",new Map),GC(this,"hot",void 0),this.plugin=e,this.hot=e.hot}static IS_OVERLAPPING_WARNING(e){let{row:t,col:i}=e;return Kt`The merged cell declared at [${t}, ${i}], overlaps\x20
      with the other declared merged cell. The overlapping merged cell was not added to the table, please\x20
      fix your setup.`}get(e,t){var i;return this.mergedCellsMatrix.has(e)&&(i=this.mergedCellsMatrix.get(e).get(t))!==null&&i!==void 0?i:!1}getByRange(e){let t=!1;return q(this.mergedCells,i=>i.row<=e.from.row&&i.row+i.rowspan-1>=e.to.row&&i.col<=e.from.col&&i.col+i.colspan-1>=e.to.col?(t=i,t):!0),t}filterOverlappingMergeCells(e){const t=new Set;return this.mergedCells.forEach(r=>{const{row:s,col:o,colspan:a,rowspan:l}=r;for(let c=s;c<s+l;c++)for(let u=o;u<o+a;u++)t.add(`r${c},c${u}`)}),e.filter(r=>{const{row:s,col:o,colspan:a,rowspan:l}=r,c=new Set;let u=!1;for(let h=s;h<s+l;h++){for(let d=o;d<o+a;d++){const f=`r${h},c${d}`;if(t.has(f)){Yt(NR.IS_OVERLAPPING_WARNING(r)),u=!0;break}c.add(f)}if(u)break}return u||t.add(...c),!u})}getWithinRange(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const{row:i,col:r}=e.getTopStartCorner(),{row:s,col:o}=e.getBottomEndCorner(),a=[];for(let l=i;l<=s;l++)for(let c=r;c<=o;c++){const u=this.get(l,c);u&&(t||!t&&u.row===l&&u.col===c)&&a.push(u)}return a}add(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const i=e.row,r=e.col,s=e.rowspan,o=e.colspan,a=new Na(i,r,s,o,this.hot._createCellCoords,this.hot._createCellRange),l=this.get(i,r),c=t?!1:this.isOverlapping(a);return!l&&!c?(this.hot&&a.normalize(this.hot),this.mergedCells.push(a),nd(ru,this,Nj).call(this,a),a):(Yt(NR.IS_OVERLAPPING_WARNING(a)),!1)}remove(e,t){const i=this.get(e,t),r=i?this.mergedCells.indexOf(i):-1;return i&&r!==-1?(this.mergedCells.splice(r,1),nd(ru,this,j3e).call(this,i),i):!1}clear(){q(this.mergedCells,e=>{let{row:t,col:i,rowspan:r,colspan:s}=e;$e(t,t+r,o=>{$e(i,i+s,a=>{const l=this.hot.getCell(o,a);l&&(l.removeAttribute("rowspan"),l.removeAttribute("colspan"),l.style.display="")})})}),this.mergedCells.length=0,this.mergedCellsMatrix=new Map}isOverlapping(e){const t=e.getRange();for(let i=0;i<this.mergedCells.length;i++)if(this.mergedCells[i].getRange().overlaps(t))return!0;return!1}isFirstRenderableMergedCell(e,t){const i=this.get(e,t);return i&&this.hot.rowIndexMapper.getNearestNotHiddenIndex(i.row,1)===e&&this.hot.columnIndexMapper.getNearestNotHiddenIndex(i.col,1)===t}getFirstRenderableCoords(e,t){const i=this.get(e,t);if(!i||this.isFirstRenderableMergedCell(e,t))return this.hot._createCellCoords(e,t);const r=this.hot.rowIndexMapper.getNearestNotHiddenIndex(i.row,1),s=this.hot.columnIndexMapper.getNearestNotHiddenIndex(i.col,1);return this.hot._createCellCoords(r,s)}getStartMostColumnIndex(e,t){const i=nd(ru,this,YC).call(this,e,"col",-1);let r=t;for(let s=0;s<i.length;s++)if(i[s]<=t){r=i[s];break}return r}getEndMostColumnIndex(e,t){const i=nd(ru,this,YC).call(this,e,"col",1);let r=t;for(let s=0;s<i.length;s++)if(i[s]>=t){r=i[s];break}return r}getTopMostRowIndex(e,t){const i=nd(ru,this,YC).call(this,e,"row",-1);let r=t;for(let s=0;s<i.length;s++)if(i[s]<=t){r=i[s];break}return r}getBottomMostRowIndex(e,t){const i=nd(ru,this,YC).call(this,e,"row",1);let r=t;for(let s=0;s<i.length;s++)if(i[s]>=t){r=i[s];break}return r}shiftCollections(e,t,i){const r=[0,0];switch(e){case"right":r[0]+=i;break;case"left":r[0]-=i;break;case"down":r[1]+=i;break;case"up":r[1]-=i;break}const s=[];this.mergedCells.forEach(o=>{o.shift(r,t),o.removed&&s.push(o)}),s.forEach(o=>{this.mergedCells.splice(this.mergedCells.indexOf(o),1)}),this.mergedCellsMatrix.clear(),this.mergedCells.forEach(o=>{nd(ru,this,Nj).call(this,o)})}}function YC(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;const i=new Map,r=t===1?n.getTopStartCorner():n.getBottomEndCorner(),s=t===1?n.getBottomEndCorner():n.getTopStartCorner();for(let o=r.row;t===1?o<=s.row:o>=s.row;o+=t)for(let a=r.col;t===1?a<=s.col:a>=s.col;a+=t){const l=e==="row"?o:a,c=this.get(o,a);let u=l;c&&(u=t===1?c[e]+c[`${e}span`]-1:c[e]),i.has(l)||i.set(l,new Set),i.get(l).add(u)}return Array.from(new Set(Array.from(i.entries()).filter(o=>{let[,a]=o;return a.size===1}).flatMap(o=>{let[,a]=o;return Array.from(a)})))}function Nj(n){for(let e=n.row;e<n.row+n.rowspan;e++)for(let t=n.col;t<n.col+n.colspan;t++)this.mergedCellsMatrix.has(e)||this.mergedCellsMatrix.set(e,new Map),this.mergedCellsMatrix.get(e).set(t,n)}function j3e(n){for(let e=n.row;e<n.row+n.rowspan;e++)for(let t=n.col;t<n.col+n.colspan;t++)this.mergedCellsMatrix.get(e).delete(t)}function ZM(n,e,t){return(e=z3e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function z3e(n){var e=U3e(n,"string");return typeof e=="symbol"?e:e+""}function U3e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class G3e{constructor(e){ZM(this,"plugin",void 0),ZM(this,"mergedCellsCollection",void 0),ZM(this,"currentFillData",null),this.plugin=e,this.mergedCellsCollection=this.plugin.mergedCellsCollection}correctSelectionAreaSize(e){if(e[0]===e[2]&&e[1]===e[3]){const t=this.mergedCellsCollection.get(e[0],e[1]);t&&(e[2]=e[0]+t.rowspan-1,e[3]=e[1]+t.colspan-1)}}getDirection(e,t){let i=null;return t[0]===e[0]&&t[1]===e[1]&&t[3]===e[3]?i="down":t[2]===e[2]&&t[1]===e[1]&&t[3]===e[3]?i="up":t[1]===e[1]&&t[2]===e[2]?i="right":i="left",i}snapDragArea(e,t,i,r){const s=t.slice(0),o=this.getAutofillSize(e,t,i),[a,l,c,u]=e,d=["up","down"].indexOf(i)>-1?c-a+1:u-l+1,f=Math.floor(o/d)*d,g=o-f,p=this.getFarthestCollection(e,t,i,r);if(p){if(i==="down"){const m=p.row+p.rowspan-a-g;s[2]+m>=this.plugin.hot.countRows()?s[2]-=g:s[2]+=g?m:0}else if(i==="right"){const m=p.col+p.colspan-l-g;s[3]+m>=this.plugin.hot.countCols()?s[3]-=g:s[3]+=g?m:0}else if(i==="up"){const m=c-g-p.row+1;s[0]+m<0?s[0]+=g:s[0]-=g?m:0}else if(i==="left"){const m=u-g-p.col+1;s[1]+m<0?s[1]+=g:s[1]-=g?m:0}}return this.updateCurrentFillCache({baseArea:e,dragDirection:i,foundMergedCells:r,fillSize:o,dragArea:s,cycleLength:d}),s}updateCurrentFillCache(e){this.currentFillData||(this.currentFillData={}),li(this.currentFillData,e)}getAutofillSize(e,t,i){const[r,s,o,a]=e,[l,c,u,h]=t;switch(i){case"up":return r-l;case"down":return u-o;case"left":return s-c;case"right":return h-a;default:return null}}getDragArea(e,t,i){const[r,s,o,a]=e,[l,c,u,h]=t;switch(i){case"up":return[l,c,r-1,a];case"down":return[o+1,s,u,a];case"left":return[l,c,o,s-1];case"right":return[r,a+1,u,h];default:return null}}getFarthestCollection(e,t,i,r){const[s,o,a,l]=e,c=["up","down"].indexOf(i)>-1,u=c?a:l,h=c?s:o,d=this.getAutofillSize(e,t,i),f=c?a-s+1:l-o+1,g=Math.floor(d/f)*f,p=d-g;let m=null,v=null,y=null;switch(i){case"up":m="includesVertically",y=u-p+1;break;case"left":m="includesHorizontally",y=u-p+1;break;case"down":m="includesVertically",y=h+p-1;break;case"right":m="includesHorizontally",y=h+p-1;break}return q(r,w=>{w[m](y)&&w.isFarther(v,i)&&(v=w)}),v}recreateAfterDataPopulation(e){if(!this.currentFillData)return;const t=this.getRangeFromChanges(e),i=this.currentFillData.foundMergedCells,r=this.currentFillData.dragDirection,s=(c,u)=>{switch(r){case"up":return c.row-u>=t.from.row;case"down":return c.row+c.rowspan-1+u<=t.to.row;case"left":return c.col-u>=t.from.column;case"right":return c.col+c.colspan-1+u<=t.to.column;default:return null}};let o=0,a=null,l=1;do for(let c=0;c<i.length;c+=1){if(a=i[c],o=l*this.currentFillData.cycleLength,s(a,o))switch(r){case"up":this.plugin.mergedCellsCollection.add({row:a.row-o,rowspan:a.rowspan,col:a.col,colspan:a.colspan});break;case"down":this.plugin.mergedCellsCollection.add({row:a.row+o,rowspan:a.rowspan,col:a.col,colspan:a.colspan});break;case"left":this.plugin.mergedCellsCollection.add({row:a.row,rowspan:a.rowspan,col:a.col-o,colspan:a.colspan});break;case"right":this.plugin.mergedCellsCollection.add({row:a.row,rowspan:a.rowspan,col:a.col+o,colspan:a.colspan});break}c===i.length-1&&(l+=1)}while(s(a,o));this.currentFillData=null,this.plugin.hot.render(),i.length>0&&this.plugin.ifChromeForceRepaint()}getRangeFromChanges(e){const t={min:null,max:null},i={min:null,max:null};return q(e,r=>{const s=r[0],o=this.plugin.hot.propToCol(r[1]);(t.min===null||s<t.min)&&(t.min=s),(t.max===null||s>t.max)&&(t.max=s),(i.min===null||o<i.min)&&(i.min=o),(i.max===null||o>i.max)&&(i.max=o)}),{from:{row:t.min,column:i.min},to:{row:t.max,column:i.max}}}dragAreaOverlapsCollections(e,t,i){const r=this.getDragArea(e,t,i),[s,o,a,l]=r,c=this.plugin.hot._createCellCoords(s,o),u=this.plugin.hot._createCellCoords(a,l),h=this.plugin.hot._createCellRange(c,c,u);return this.mergedCellsCollection.getWithinRange(h,!0).length>0}}function QM(n,e,t){return(e=Y3e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Y3e(n){var e=K3e(n,"string");return typeof e=="symbol"?e:e+""}function K3e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class q3e{constructor(e){QM(this,"plugin",void 0),QM(this,"hot",void 0),QM(this,"fullySelectedMergedCellClassName","fullySelectedMergedCell"),this.plugin=e,this.hot=e.hot}getSelectedMergedCellClassName(e,t,i,r){const s=Math.min(i[0],i[2]),o=Math.min(i[1],i[3]),a=Math.max(i[0],i[2]),l=Math.max(i[1],i[3]);if(r===void 0||!this.plugin.mergedCellsCollection.isFirstRenderableMergedCell(e,t))return;const u=this.plugin.mergedCellsCollection.get(e,t);if(!u)return;const h=u.getLastRow(),d=u.getLastColumn();if(s<=u.row&&o<=u.col&&a>=h&&l>=d)return`${this.fullySelectedMergedCellClassName}-${r}`;if(this.isMergeCellFullySelected(u,this.plugin.hot.getSelectedRange()))return`${this.fullySelectedMergedCellClassName}-multiple`}isMergeCellFullySelected(e,t){const i=[];if(!t||!e)return!1;for(let r=0;r<e.rowspan;r+=1)for(let s=0;s<e.colspan;s+=1)i.push(this.hot._createCellCoords(e.row+r,e.col+s));for(let r=0;r<i.length;r+=1){const s=[];for(let o=0;o<t.length;o+=1)s[o]=t[o].includes(i[r]);if(!s.includes(!0))return!1}return!0}getSelectedMergedCellClassNameToRemove(){const e=[];for(let t=0;t<=7;t+=1)e.push(`${this.fullySelectedMergedCellClassName}-${t}`);return e.push(`${this.fullySelectedMergedCellClassName}-multiple`),e}}function X3e(n){return{key:"mergeCells",name(){const e=this.getSelectedLast();if(e){const t=n.mergedCellsCollection.get(e[0],e[1]);if(t.row===e[0]&&t.col===e[1]&&t.row+t.rowspan-1===e[2]&&t.col+t.colspan-1===e[3])return this.getTranslatedPhrase(eN)}return this.getTranslatedPhrase(JL)},callback(){const e=this.getSelectedRangeLast();if(!e)return;e.setDirection(this.isRtl()?"NE-SW":"NW-SE");const{from:t,to:i}=e;n.toggleMerge(e),this.selectCell(t.row,t.col,i.row,i.col,!1)},disabled(){const e=this.getSelectedLast();return e?Na.isSingleCell({row:e[0],col:e[1],rowspan:e[2]-e[0]+1,colspan:e[3]-e[1]+1})||this.selection.isSelectedByCorner():!0},hidden:!1}}function Kv(n,e,t){return(e=Z3e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Z3e(n){var e=Q3e(n,"string");return typeof e=="symbol"?e:e+""}function Q3e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class Hj{constructor(e){Kv(this,"data",void 0),Kv(this,"next",null),Kv(this,"prev",null),this.data=e}}class KC{constructor(){Kv(this,"first",null),Kv(this,"last",null)}push(e){const t=new Hj(e);if(this.first===null)this.first=t,this.last=t;else{const i=this.last;this.last=t,t.prev=i,i.next=t}return t}unshift(e){const t=new Hj(e);if(this.first===null)this.first=t,this.last=t;else{const i=this.first;this.first=t,t.next=i,i.prev=t}}inorder(e){let t=this.first;for(;t;){const i=e(t);if(t===this.last||i===!0)break;t=t.next}}remove(e){if(this.first===null)return!1;let t=this.first,i,r;for(;t;){if(t.data===e)return i=t.next,r=t.prev,i&&(i.prev=r),r&&(r.next=i),t===this.first&&(this.first=i),t===this.last&&(this.last=r),!0;t=t.next}return!1}hasCycle(){let e=this.first,t=this.first;for(;;){if(e===null||(e=e.next,e===null))return!1;if(e=e.next,t=t.next,e===t)return!0}}pop(){if(this.last===null)return null;const e=this.last;return this.last=this.last.prev,e}shift(){if(this.first===null)return null;const e=this.first;return this.first=this.first.next,e}recursiveReverse(){function e(i,r){r&&(e(r,r.next),r.next=i)}if(!this.first)return;e(this.first,this.first.next),this.first.next=null;const t=this.first;this.first=this.last,this.last=t}reverse(){if(!this.first||!this.first.next)return;let e=this.first.next,t=this.first,i;for(;e;)i=e.next,e.next=t,t.prev=e,t=e,e=i;this.first.next=null,this.last.prev=null,i=this.first,this.first=t,this.last=i}}function J3e(n,e){nX(n,e),e.add(n)}function id(n,e,t){nX(n,e),e.set(n,t)}function nX(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Wt(n,e){return n.get(HR(n,e))}function is(n,e,t){return n.set(HR(n,e),t),t}function HR(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var xa=new WeakMap,Ta=new WeakMap,Ma=new WeakMap,Aa=new WeakMap,uO=new WeakMap,qC=new WeakMap,XC=new WeakMap,JM=new WeakSet;class eWe{constructor(e){let{mergedCellsGetter:t,rowIndexMapper:i,columnIndexMapper:r}=e;J3e(this,JM),id(this,xa,new KC),id(this,Ta,new KC),id(this,Ma,null),id(this,Aa,null),id(this,uO,null),id(this,qC,null),id(this,XC,null),is(uO,this,t),is(qC,this,i),is(XC,this,r)}getCurrentVerticalNode(){return Wt(Aa,this).data}getFirstVerticalNode(){return Wt(Ta,this).first.data}getNextVerticalNode(){return Wt(Aa,this).next.data}getPrevVerticalNode(){return Wt(Aa,this).prev.data}getCurrentHorizontalNode(){return Wt(Ma,this).data}getFirstHorizontalNode(){return Wt(xa,this).first.data}getNextHorizontalNode(){return Wt(Ma,this).next.data}getPrevHorizontalNode(){return Wt(Ma,this).prev.data}setPrevNodeAsActive(){is(Aa,this,Wt(Aa,this).prev),is(Ma,this,Wt(Ma,this).prev)}setNextNodeAsActive(){is(Aa,this,Wt(Aa,this).next),is(Ma,this,Wt(Ma,this).next)}buildFocusOrder(e){const t=e.getTopStartCorner(),i=e.getBottomEndCorner(),r=new WeakSet;is(xa,this,new KC);for(let o=t.row;o<=i.row;o++)if(!Wt(qC,this).isHidden(o))for(let a=t.col;a<=i.col;a++){if(Wt(XC,this).isHidden(a))continue;const l=HR(JM,this,$j).call(this,e,Wt(xa,this),r,o,a);l&&is(Ma,this,l)}Wt(xa,this).first&&(Wt(xa,this).first.prev=Wt(xa,this).last,Wt(xa,this).last.next=Wt(xa,this).first);const s=new WeakSet;is(Ta,this,new KC);for(let o=t.col;o<=i.col;o++)if(!Wt(XC,this).isHidden(o))for(let a=t.row;a<=i.row;a++){if(Wt(qC,this).isHidden(a))continue;const l=HR(JM,this,$j).call(this,e,Wt(Ta,this),s,a,o);l&&is(Aa,this,l)}Wt(Ta,this).first&&(Wt(Ta,this).first.prev=Wt(Ta,this).last,Wt(Ta,this).last.next=Wt(Ta,this).first)}setActiveNode(e,t){return Wt(xa,this).inorder(i=>{const{rowStart:r,rowEnd:s,colStart:o,colEnd:a}=i.data;if(e>=r&&e<=s&&t>=o&&t<=a)return is(Ma,this,i),!1}),Wt(Ta,this).inorder(i=>{const{rowStart:r,rowEnd:s,colStart:o,colEnd:a}=i.data;if(e>=r&&e<=s&&t>=o&&t<=a)return is(Aa,this,i),!1}),this}}function $j(n,e,t,i,r){const s=n.getTopStartCorner(),o=n.getBottomEndCorner(),a=n.highlight.clone().normalize(),l=Wt(uO,this).call(this,i,r);if(l&&t.has(l))return null;const c={colStart:r,colEnd:r,rowStart:i,rowEnd:i};if(l){if(t.add(l),l.row<s.row||l.row+l.rowspan-1>o.row||l.col<s.col||l.col+l.colspan-1>o.col)return null;c.colStart=l.col,c.colEnd=l.col+l.colspan-1,c.rowStart=l.row,c.rowEnd=l.row+l.rowspan-1}const u=e.push(c);return i===a.row&&r===a.col||l&&a.row>=l.row&&a.row<=l.row+l.rowspan-1&&a.col>=l.col&&a.col<=l.col+l.colspan-1?u:null}function tWe(n){const{hot:e}=n,{rowIndexMapper:t,columnIndexMapper:i}=e;function r(){}function s(o,a,l){const c=n.mergedCellsCollection.get(a,l);if(!ct(c)){o.removeAttribute("rowspan"),o.removeAttribute("colspan"),o.style.display="";return}const{row:u,col:h,colspan:d,rowspan:f}=c,[g,p]=n.translateMergedCellToRenderable(u,f,h,d),m=t.getRenderableFromVisualIndex(a),v=i.getRenderableFromVisualIndex(l),y=g-m+1,w=p-v+1,R=t.getNearestNotHiddenIndex(u,1),x=i.getNearestNotHiddenIndex(h,1),S=Math.min(f,y),T=Math.min(d,w);R===a&&x===l?(o.setAttribute("rowspan",S),o.setAttribute("colspan",T)):(o.removeAttribute("rowspan"),o.removeAttribute("colspan"),o.style.display="none")}return{before:r,after:s}}function nWe(n,e){iX(n,e),e.add(n)}function ZC(n,e,t){iX(n,e),e.set(n,t)}function iX(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function eA(n,e,t){return(e=iWe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function iWe(n){var e=rWe(n,"string");return typeof e=="symbol"?e:e+""}function rWe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Hw(n,e,t){return n.set(Ut(n,e),t),t}function hn(n,e){return n.get(Ut(n,e))}function Ut(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}Oe.getSingleton().register("beforeMergeCells");Oe.getSingleton().register("afterMergeCells");Oe.getSingleton().register("beforeUnmergeCells");Oe.getSingleton().register("afterUnmergeCells");const qv="mergeCells",sWe=150,Fj=qv;var Zs=new WeakMap,Js=new WeakMap,Ya=new WeakMap,Bj=new WeakMap,Xt=new WeakSet;class oWe extends Ht{constructor(){super(...arguments),nWe(this,Xt),eA(this,"mergedCellsCollection",null),eA(this,"autofillCalculations",null),eA(this,"selectionCalculations",null),ZC(this,Zs,null),ZC(this,Js,{row:0,col:0}),ZC(this,Ya,new eWe({mergedCellsGetter:(e,t)=>this.mergedCellsCollection.get(e,t),rowIndexMapper:this.hot.rowIndexMapper,columnIndexMapper:this.hot.columnIndexMapper})),ZC(this,Bj,tWe(this))}static get PLUGIN_KEY(){return qv}static get PLUGIN_PRIORITY(){return sWe}isEnabled(){return!!this.hot.getSettings()[qv]}enablePlugin(){var e=this;this.enabled||(this.mergedCellsCollection=new NR(this),this.autofillCalculations=new G3e(this),this.selectionCalculations=new q3e(this),this.addHook("afterInit",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Ut(Xt,e,aWe).call(e,...i)}),this.addHook("modifyTransformFocus",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Ut(Xt,e,cWe).call(e,...i)}),this.addHook("modifyTransformStart",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Ut(Xt,e,uWe).call(e,...i)}),this.addHook("modifyTransformEnd",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Ut(Xt,e,hWe).call(e,...i)}),this.addHook("beforeSelectionHighlightSet",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Ut(Xt,e,dWe).call(e,...i)}),this.addHook("beforeSetRangeStart",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Ut(Xt,e,Vj).call(e,...i)}),this.addHook("beforeSetRangeStartOnly",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Ut(Xt,e,Vj).call(e,...i)}),this.addHook("beforeSelectionFocusSet",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Ut(Xt,e,pWe).call(e,...i)}),this.addHook("afterSelectionFocusSet",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Ut(Xt,e,mWe).call(e,...i)}),this.addHook("afterSelectionEnd",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Ut(Xt,e,bWe).call(e,...i)}),this.addHook("modifyGetCellCoords",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Ut(Xt,e,fWe).call(e,...i)}),this.addHook("afterIsMultipleSelection",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Ut(Xt,e,lWe).call(e,...i)}),this.addHook("afterRenderer",function(){return hn(Bj,e).after(...arguments)}),this.addHook("afterContextMenuDefaultOptions",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Ut(Xt,e,gWe).call(e,...i)}),this.addHook("afterGetCellMeta",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Ut(Xt,e,vWe).call(e,...i)}),this.addHook("afterViewportRowCalculatorOverride",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Ut(Xt,e,wWe).call(e,...i)}),this.addHook("afterViewportColumnCalculatorOverride",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Ut(Xt,e,yWe).call(e,...i)}),this.addHook("modifyAutofillRange",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Ut(Xt,e,CWe).call(e,...i)}),this.addHook("afterCreateCol",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Ut(Xt,e,SWe).call(e,...i)}),this.addHook("afterRemoveCol",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Ut(Xt,e,_We).call(e,...i)}),this.addHook("afterCreateRow",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Ut(Xt,e,RWe).call(e,...i)}),this.addHook("afterRemoveRow",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Ut(Xt,e,EWe).call(e,...i)}),this.addHook("afterChange",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Ut(Xt,e,xWe).call(e,...i)}),this.addHook("beforeDrawBorders",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Ut(Xt,e,TWe).call(e,...i)}),this.addHook("afterDrawSelection",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Ut(Xt,e,MWe).call(e,...i)}),this.addHook("beforeRemoveCellClassNames",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Ut(Xt,e,AWe).call(e,...i)}),this.addHook("beforeBeginEditing",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Ut(Xt,e,PWe).call(e,...i)}),this.addHook("modifyRowHeightByOverlayName",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return Ut(Xt,e,IWe).call(e,...i)}),this.addHook("beforeUndoStackChange",(t,i)=>{if(i==="MergeCells")return!1}),this.registerShortcuts(),super.enablePlugin())}disablePlugin(){this.clearCollections(),this.unregisterShortcuts(),this.hot.render(),super.disablePlugin()}updatePlugin(){const e=this.hot.getSettings()[qv];this.disablePlugin(),this.enablePlugin(),this.generateFromSettings(e),super.updatePlugin()}ifChromeForceRepaint(){if(!ZD())return;const e=[];let t=[];this.mergedCellsCollection.mergedCells.forEach(i=>{const{row:r,rowspan:s}=i;for(let o=r+1;o<r+s;o++)t.push(o)}),t=[...new Set(t)],t.forEach(i=>{const r=this.hot.rowIndexMapper.getRenderableFromVisualIndex(i);this.hot.view._wt.wtOverlays.getOverlays(!0).map(s=>(s==null?void 0:s.name)==="master"?s:s.clone.wtTable).forEach(s=>{const o=s.getRow(r);o&&(o.style.background=Ap(o,"backgroundColor").replace(")",", 0.99)"),e.push(o))})}),this.hot._registerTimeout(()=>{e.forEach(i=>{i.style.background=Ap(i,"backgroundColor").replace(", 0.99)",")")})},1)}validateSetting(e){return e?Na.containsNegativeValues(e)?(Yt(Na.NEGATIVE_VALUES_WARNING(e)),!1):Na.isOutOfBounds(e,this.hot.countRows(),this.hot.countCols())?(Yt(Na.IS_OUT_OF_BOUNDS_WARNING(e)),!1):Na.isSingleCell(e)?(Yt(Na.IS_SINGLE_CELL(e)),!1):Na.containsZeroSpan(e)?(Yt(Na.ZERO_SPAN_WARNING(e)),!1):!0:!1}generateFromSettings(e){if(!Array.isArray(e))return;const t=e.filter(s=>this.validateSetting(s)),i=this.mergedCellsCollection.filterOverlappingMergeCells(t),r=[];i.forEach(s=>{const{row:o,col:a,rowspan:l,colspan:c}=s,u=this.hot._createCellCoords(o,a),h=this.hot._createCellCoords(o+l-1,a+c-1),d=this.hot._createCellRange(u,u,h);this.mergeRange(d,!0,!0);for(let f=o;f<o+l;f++)for(let g=a;g<a+c;g++)(f!==o||g!==a)&&r.push([f,g,null])}),r.length!==0&&this.hot.setDataAtCell(r,void 0,void 0,this.pluginName)}clearCollections(){this.mergedCellsCollection.clear()}canMergeRange(e){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)?!0:this.validateSetting(e)}mergeSelection(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.hot.getSelectedRangeLast();if(!e)return;e.setDirection(this.hot.isRtl()?"NE-SW":"NW-SE");const{from:t,to:i}=e;this.unmergeRange(e,!0),this.mergeRange(e),this.hot.selectCell(t.row,t.col,i.row,i.col,!1)}unmergeSelection(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.hot.getSelectedRangeLast();if(!e)return;const{from:t,to:i}=e;this.unmergeRange(e,!0),this.hot.selectCell(t.row,t.col,i.row,i.col,!1)}mergeRange(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const r=e.getTopStartCorner(),s=e.getBottomEndCorner(),o={row:r.row,col:r.col,rowspan:s.row-r.row+1,colspan:s.col-r.col+1},a=[];let l=null;return this.canMergeRange(o,t)?(this.hot.runHooks("beforeMergeCells",e,t),$e(0,o.rowspan-1,u=>{$e(0,o.colspan-1,h=>{let d=null;a[u]||(a[u]=[]),u===0&&h===0?d=this.hot.getSourceDataAtCell(this.hot.toPhysicalRow(o.row),this.hot.toPhysicalColumn(o.col)):this.hot.setCellMeta(o.row+u,o.col+h,"hidden",!0),a[u][h]=d})}),this.hot.setCellMeta(o.row,o.col,"spanned",!0),this.mergedCellsCollection.add(o,t)?(i?l=[o.row,o.col,a]:this.hot.populateFromArray(o.row,o.col,a,void 0,void 0,this.pluginName),t||this.ifChromeForceRepaint(),this.hot.runHooks("afterMergeCells",e,o,t),l):!0):!1}unmergeRange(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const i=this.mergedCellsCollection.getWithinRange(e);i.length!==0&&(this.hot.runHooks("beforeUnmergeCells",e,t),q(i,r=>{this.mergedCellsCollection.remove(r.row,r.col),$e(0,r.rowspan-1,s=>{$e(0,r.colspan-1,o=>{this.hot.removeCellMeta(r.row+s,r.col+o,"hidden"),this.hot.removeCellMeta(r.row+s,r.col+o,"copyable")})}),this.hot.removeCellMeta(r.row,r.col,"spanned")}),this.hot.runHooks("afterUnmergeCells",e,t),this.hot.render())}toggleMerge(e){const t=this.mergedCellsCollection.get(e.from.row,e.from.col);t.row===e.from.row&&t.col===e.from.col&&t.row+t.rowspan-1===e.to.row&&t.col+t.colspan-1===e.to.col?this.unmergeRange(e):this.mergeSelection(e)}merge(e,t,i,r){const s=this.hot._createCellCoords(e,t),o=this.hot._createCellCoords(i,r);this.mergeRange(this.hot._createCellRange(s,s,o))}unmerge(e,t,i,r){const s=this.hot._createCellCoords(e,t),o=this.hot._createCellCoords(i,r);this.unmergeRange(this.hot._createCellRange(s,s,o))}registerShortcuts(){this.hot.getShortcutManager().getContext("grid").addShortcut({keys:[["Control","m"]],callback:()=>{const i=this.hot.getSelectedRangeLast();i&&!i.isSingleHeader()&&(this.toggleMerge(i),this.hot.render())},runOnlyIf:i=>!i.altKey,group:Fj})}unregisterShortcuts(){this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup(Fj)}modifyViewportRowStart(e,t){const i=this.hot.rowIndexMapper,r=i.getVisualFromRenderableIndex(e.startRow);for(let s=0;s<t;s+=1){const o=this.mergedCellsCollection.get(r,s);if(ct(o)){const a=i.getRenderableFromVisualIndex(i.getNearestNotHiddenIndex(o.row,1));if(a<e.startRow){e.startRow=a,this.modifyViewportRowStart(e,t);return}}}}modifyViewportRowEnd(e,t){const i=this.hot.rowIndexMapper,r=i.getVisualFromRenderableIndex(e.endRow);for(let s=0;s<t;s+=1){const o=this.mergedCellsCollection.get(r,s);if(ct(o)){const a=o.row+o.rowspan-1,l=i.getRenderableFromVisualIndex(i.getNearestNotHiddenIndex(a,-1));if(l>e.endRow){e.endRow=l,this.modifyViewportRowEnd(e,t);return}}}}modifyViewportColumnStart(e,t){const i=this.hot.columnIndexMapper,r=i.getVisualFromRenderableIndex(e.startColumn);for(let s=0;s<t;s+=1){const o=this.mergedCellsCollection.get(s,r);if(ct(o)){const a=i.getRenderableFromVisualIndex(i.getNearestNotHiddenIndex(o.col,1));if(a<e.startColumn){e.startColumn=a,this.modifyViewportColumnStart(e,t);return}}}}modifyViewportColumnEnd(e,t){const i=this.hot.columnIndexMapper,r=i.getVisualFromRenderableIndex(e.endColumn);for(let s=0;s<t;s+=1){const o=this.mergedCellsCollection.get(s,r);if(ct(o)){const a=o.col+o.colspan-1,l=i.getRenderableFromVisualIndex(i.getNearestNotHiddenIndex(a,-1));if(l>e.endColumn){e.endColumn=l,this.modifyViewportColumnEnd(e,t);return}}}}translateMergedCellToRenderable(e,t,i,r){const{rowIndexMapper:s,columnIndexMapper:o}=this.hot;let a,l;t===0?a=s.getNearestNotHiddenIndex(e,1):a=s.getNearestNotHiddenIndex(e+t-1,-1),r===0?l=o.getNearestNotHiddenIndex(i,1):l=o.getNearestNotHiddenIndex(i+r-1,-1);const c=e>=0?s.getRenderableFromVisualIndex(a):e,u=i>=0?o.getRenderableFromVisualIndex(l):i;return[c,u]}}function aWe(){this.generateFromSettings(this.hot.getSettings()[qv]),this.hot.render()}function lWe(n){if(n){const e=this.mergedCellsCollection.mergedCells,t=this.hot.getSelectedRangeLast(),i=t.getTopStartCorner(),r=t.getBottomEndCorner();for(let s=0;s<e.length;s+=1)if(i.row===e[s].row&&i.col===e[s].col&&r.row===e[s].row+e[s].rowspan-1&&r.col===e[s].col+e[s].colspan-1)return!1}return n}function cWe(n){hn(Js,this).row=n.row,hn(Js,this).col=n.col}function uWe(n){const e=this.hot.getSelectedRangeLast(),{highlight:t}=e,{columnIndexMapper:i,rowIndexMapper:r}=this.hot;hn(Zs,this)&&(r.getRenderableFromVisualIndex(hn(Zs,this).row)!==null&&(t.row=hn(Zs,this).row),i.getRenderableFromVisualIndex(hn(Zs,this).col)!==null&&(t.col=hn(Zs,this).col),Hw(Zs,this,null));const s=this.mergedCellsCollection.get(t.row,t.col);if(!s)return;const o=s.col,a=s.col+s.colspan-1;if(n.col<0){const u=t.col>=o&&t.col<=a?o-1:a,h=i.getNearestNotHiddenIndex(u,-1);h===null?n.col=-this.hot.view.countRenderableColumnsInRange(0,t.col):n.col=-Math.max(this.hot.view.countRenderableColumnsInRange(h,t.col)-1,1)}else if(n.col>0){const u=t.col>=o&&t.col<=a?a+1:o,h=i.getNearestNotHiddenIndex(u,1);h===null?n.col=this.hot.view.countRenderableColumnsInRange(t.col,this.hot.countCols()):n.col=Math.max(this.hot.view.countRenderableColumnsInRange(t.col,h)-1,1)}const l=s.row,c=s.row+s.rowspan-1;if(n.row<0){const u=t.row>=l&&t.row<=c?l-1:c,h=r.getNearestNotHiddenIndex(u,-1);h===null?n.row=-this.hot.view.countRenderableRowsInRange(0,t.row):n.row=-Math.max(this.hot.view.countRenderableRowsInRange(h,t.row)-1,1)}else if(n.row>0){const u=t.row>=l&&t.row<=c?c+1:l,h=r.getNearestNotHiddenIndex(u,1);h===null?n.row=this.hot.view.countRenderableRowsInRange(t.row,this.hot.countRows()):n.row=Math.max(this.hot.view.countRenderableRowsInRange(t.row,h)-1,1)}}function hWe(n){const e=this.hot.getSelectedRangeLast(),t=e.clone(),{to:i}=e,{columnIndexMapper:r,rowIndexMapper:s}=this.hot,o=(a,l)=>{t.expand(this.hot._createCellCoords(a,l));for(let c=0;c<this.mergedCellsCollection.mergedCells.length;c+=1)t.expandByRange(this.mergedCellsCollection.mergedCells[c].getRange())};if(n.col<0){let a=this.mergedCellsCollection.getStartMostColumnIndex(e,i.col)+n.col;o(i.row,a),e.getHorizontalDirection()==="E-W"&&t.getHorizontalDirection()==="E-W"&&(a=t.getTopStartCorner().col);const l=r.getNearestNotHiddenIndex(a,1);l!==null&&(n.col=-Math.max(this.hot.view.countRenderableColumnsInRange(l,i.col)-1,1))}else if(n.col>0){let a=this.mergedCellsCollection.getEndMostColumnIndex(e,i.col)+n.col;o(i.row,a),e.getHorizontalDirection()==="W-E"&&t.getHorizontalDirection()==="W-E"&&(a=t.getBottomEndCorner().col);const l=r.getNearestNotHiddenIndex(a,-1);l!==null&&(n.col=Math.max(this.hot.view.countRenderableColumnsInRange(i.col,l)-1,1))}if(n.row<0){let a=this.mergedCellsCollection.getTopMostRowIndex(e,i.row)+n.row;o(a,i.col),e.getVerticalDirection()==="S-N"&&t.getVerticalDirection()==="S-N"&&(a=t.getTopStartCorner().row);const l=s.getNearestNotHiddenIndex(a,1);l!==null&&(n.row=-Math.max(this.hot.view.countRenderableRowsInRange(l,i.row)-1,1))}else if(n.row>0){let a=this.mergedCellsCollection.getBottomMostRowIndex(e,i.row)+n.row;o(a,i.col),e.getVerticalDirection()==="N-S"&&t.getVerticalDirection()==="N-S"&&(a=t.getBottomStartCorner().row);const l=s.getNearestNotHiddenIndex(a,-1);l!==null&&(n.row=Math.max(this.hot.view.countRenderableRowsInRange(i.row,l)-1,1))}}function dWe(){const n=this.hot.getSelectedRangeLast(),{highlight:e}=n;if(this.hot.selection.isSelectedByColumnHeader()||this.hot.selection.isSelectedByRowHeader()){Hw(Zs,this,e.clone());return}for(let i=0;i<this.mergedCellsCollection.mergedCells.length;i+=1)n.expandByRange(this.mergedCellsCollection.mergedCells[i].getRange(),!1);for(let i=0;i<this.mergedCellsCollection.mergedCells.length;i+=1)n.expandByRange(this.mergedCellsCollection.mergedCells[i].getRange(),!1);const t=this.mergedCellsCollection.get(e.row,e.col);Hw(Zs,this,e.clone()),t&&e.assign(t)}function fWe(n,e){if(n<0||e<0)return;const t=this.mergedCellsCollection.get(n,e);if(!t)return;const{row:i,col:r,colspan:s,rowspan:o}=t;return[i,r,i+o-1,r+s-1]}function gWe(n){n.items.push({name:"---------"},X3e(this))}function Vj(){Hw(Zs,this,null)}function pWe(){if(hn(Zs,this).isCell())return;const n=this.hot.getSelectedRangeLast(),e=n.getVerticalDirection(),t=n.getHorizontalDirection(),i=hn(Zs,this).clone().normalize();hn(Ya,this).setActiveNode(i.row,i.col),hn(Js,this).row>0||hn(Js,this).col>0?hn(Ya,this).setPrevNodeAsActive():(t==="E-W"&&hn(Js,this).col<0||e==="S-N"&&hn(Js,this).row<0)&&hn(Ya,this).setNextNodeAsActive()}function mWe(n,e){const t=this.hot.getSelectedRangeLast(),{columnIndexMapper:i,rowIndexMapper:r}=this.hot;let s=null,o=null;if(hn(Js,this).col<0){const{rowEnd:a,colEnd:l}=hn(Ya,this).getPrevHorizontalNode();o=i.getNearestNotHiddenIndex(l,-1),s=r.getNearestNotHiddenIndex(a,-1)}else if(hn(Js,this).col>0){const{rowStart:a,colStart:l}=hn(Ya,this).getNextHorizontalNode();o=i.getNearestNotHiddenIndex(l,1),s=r.getNearestNotHiddenIndex(a,1)}else if(hn(Js,this).row<0){const{rowEnd:a,colEnd:l}=hn(Ya,this).getPrevVerticalNode();o=i.getNearestNotHiddenIndex(l,-1),s=r.getNearestNotHiddenIndex(a,-1)}else if(hn(Js,this).row>0){const{rowStart:a,colStart:l}=hn(Ya,this).getNextVerticalNode();o=i.getNearestNotHiddenIndex(l,1),s=r.getNearestNotHiddenIndex(a,1)}if(s!==null||o!==null){const a=this.hot._createCellCoords(s,o),l=this.mergedCellsCollection.get(a.row,a.col),c=this.hot.selection.highlight.getFocus();n=a.row,e=a.col,l?t.highlight.assign({row:this.hot.rowIndexMapper.getNearestNotHiddenIndex(l.row,1),col:this.hot.columnIndexMapper.getNearestNotHiddenIndex(l.col,1)}):t.highlight.assign(a),c.clear(),c.add(a).commit()}hn(Ya,this).setActiveNode(n,e),Hw(Js,this,{row:0,col:0})}function bWe(){this.hot.getSelectedRangeLast().isHeader()||hn(Ya,this).buildFocusOrder(this.hot.getSelectedRangeLast())}function vWe(n,e,t){const i=this.mergedCellsCollection.get(n,e);i&&(i.row!==n||i.col!==e?t.copyable=!1:(t.rowspan=i.rowspan,t.colspan=i.colspan))}function wWe(n){const e=this.hot.countCols();this.modifyViewportRowStart(n,e),this.modifyViewportRowEnd(n,e)}function yWe(n){const e=this.hot.countRows();this.modifyViewportColumnStart(n,e),this.modifyViewportColumnEnd(n,e)}function CWe(n,e){this.autofillCalculations.correctSelectionAreaSize(e);const t=this.autofillCalculations.getDirection(e,n);let i=n;if(this.autofillCalculations.dragAreaOverlapsCollections(e,i,t))return i=e,i;const r=this.hot._createCellCoords(e[0],e[1]),s=this.hot._createCellCoords(e[2],e[3]),o=this.hot._createCellRange(r,r,s),a=this.mergedCellsCollection.getWithinRange(o);return a.length===0||(i=this.autofillCalculations.snapDragArea(e,i,t,a)),i}function SWe(n,e){this.mergedCellsCollection.shiftCollections("right",n,e)}function _We(n,e){this.mergedCellsCollection.shiftCollections("left",n,e)}function RWe(n,e,t){t!=="auto"&&this.mergedCellsCollection.shiftCollections("down",n,e)}function EWe(n,e){this.mergedCellsCollection.shiftCollections("up",n,e)}function xWe(n,e){e==="Autofill.fill"&&this.autofillCalculations.recreateAfterDataPopulation(n)}function TWe(n,e){if(e&&e==="area"){const t=this.hot.getSelectedRangeLast(),i=this.mergedCellsCollection.getWithinRange(t);q(i,r=>{t.getBottomEndCorner().row===r.getLastRow()&&t.getBottomEndCorner().col===r.getLastColumn()&&(n[2]=r.row,n[3]=r.col)})}}function MWe(n,e,t,i){if(t)return this.selectionCalculations.getSelectedMergedCellClassName(n,e,t,i)}function AWe(){return this.selectionCalculations.getSelectedMergedCellClassNameToRemove()}function PWe(n,e,t,i){if(!(i instanceof MouseEvent))return;const r=this.hot.getSelectedRangeLast(),s=this.mergedCellsCollection.getByRange(r);if(!s)return;const o=this.hot._createCellCoords(s.row,s.col),a=this.hot._createCellCoords(s.row+s.rowspan-1,s.col+s.colspan-1);return this.hot.selection.getLayerLevel()===0&&r.isEqual(this.hot._createCellRange(o,o,a))}function IWe(n,e,t){if(this.hot.getSettings().rowHeaders||t==="bottom"||t==="bottom_inline_start_corner")return n;let i,r;if(t==="master")i=this.hot.view.getFirstRenderedVisibleColumn(),r=this.hot.view.getLastRenderedVisibleColumn();else{const d=this.hot.view.getOverlayByName(t);i=this.hot.columnIndexMapper.getVisualFromRenderableIndex(d.clone.wtTable.getFirstRenderedColumn()),r=this.hot.columnIndexMapper.getVisualFromRenderableIndex(d.clone.wtTable.getLastRenderedColumn())}if(!this.mergedCellsCollection.get(e,i))return n;const o=this.hot._createCellCoords(e,i),a=this.hot._createCellCoords(e,r),l=this.hot._createCellRange(o,o,a),c=this.mergedCellsCollection.getWithinRange(l),u=c.reduce((d,f)=>{let{rowspan:g}=f;return Math.max(d,g)},1);let h=0;return c.length>1&&c[0].rowspan<u&&(h=u-c[0].rowspan),c.forEach(d=>{var f;let{rowspan:g}=d,p=0;t==="top"||t==="top_inline_start_corner"?p=Math.min(u,this.hot.view.countNotHiddenFixedRowsTop()-e):p=g-h,n=Math.max((f=n)!==null&&f!==void 0?f:0,Ut(Xt,this,OWe).call(this,e,p))}),n}function OWe(n,e){const t=this.hot.view._wt.wtSettings.getSettingPure("defaultRowHeight"),i=this.hot.getPlugin("autoRowSize");let r=0;for(let o=n;o<n+e;o++)if(!this.hot.rowIndexMapper.isHidden(o)){var s;r+=(s=i==null?void 0:i.getRowHeight(o))!==null&&s!==void 0?s:t}return r}function kWe(n,e){return function(t,i){const[,...r]=t,[,...s]=i;return function o(a){const l=n[a],c=e[a],u=r[a],h=s[a],d=c.multiColumnSorting,g=(d.compareFunctionFactory?d.compareFunctionFactory:DK(c.type))(l,c,d)(u,h);if(g===tl){const p=a+1;if(typeof e[p]<"u")return o(p)}return g}(0)}}function Wj(){Yt(Kt`Plugins \`columnSorting\` and \`multiColumnSorting\` should not be enabled simultaneously. 
    Only \`multiColumnSorting\` will work. The \`columnSorting\` plugin will be disabled.`)}const rX="sort";function DWe(n,e,t){const i=[];return t===!1||n.isColumnSorted(e)&&n.getNumberOfSortedColumns()>1&&i.push(`${rX}-${n.getIndexOfColumnInSortQueue(e)+1}`),i}function LWe(n){const e=n.className.split(" "),t=new RegExp(`^${rX}-[0-9]{1,2}$`);return e.filter(i=>t.test(i))}function NWe(n,e,t){return(e=HWe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function HWe(n){var e=$We(n,"string");return typeof e=="symbol"?e:e+""}function $We(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const $R="multiColumnSorting",FWe=170,tA="columnSorting",jj=$R;kK($R,kWe);class BWe extends jK{constructor(){super(...arguments),NWe(this,"pluginKey",$R)}static get PLUGIN_KEY(){return $R}static get PLUGIN_PRIORITY(){return FWe}isEnabled(){return super.isEnabled()}enablePlugin(){!this.enabled&&this.hot.getSettings()[this.pluginKey]&&this.hot.getSettings()[tA]&&(Wj(),this.hot.getPlugin(tA).disablePlugin()),super.enablePlugin()}disablePlugin(){super.disablePlugin()}registerShortcuts(){super.registerShortcuts(),this.hot.getShortcutManager().getContext("grid").addShortcut({keys:[["Shift","Enter"]],callback:()=>{const{highlight:e}=this.hot.getSelectedRangeLast();return e.row===-1&&e.col>=0&&this.sort(this.getNextSortConfig(e.col,yR)),!1},runOnlyIf:()=>{var e,t;const i=(e=this.hot.getSelectedRangeLast())===null||e===void 0?void 0:e.highlight;return i&&((t=this.hot.getSelectedRangeLast())===null||t===void 0?void 0:t.isSingle())&&this.hot.selection.isCellVisible(i)&&i.isHeader()},relativeToGroup:uh,position:"before",group:jj})}unregisterShortcuts(){super.unregisterShortcuts(),this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup(jj)}sort(e){super.sort(e)}clearSort(){super.clearSort()}isSorted(){return super.isSorted()}getSortConfig(e){return super.getSortConfig(e)}setSortConfig(e){super.setSortConfig(e)}getNormalizedSortConfigs(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Array.isArray(e)?e:[e]}updateHeaderClasses(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];super.updateHeaderClasses(e,...i),Qe(e,LWe(e)),this.enabled!==!1&&ge(e,DWe(...i))}onUpdateSettings(e){this.hot.getSettings()[this.pluginKey]&&this.hot.getSettings()[tA]&&Wj(),super.onUpdateSettings(e)}onAfterOnCellMouseDown(e,t){wH(t.row,t.col,e)!==!1&&this.wasClickableHeaderClicked(e,t.col)&&(this.hot.getShortcutManager().isCtrlPressed()?(this.hot.deselectCell(),this.hot.selectColumns(t.col),this.sort(this.getNextSortConfig(t.col,yR))):this.sort(this.getColumnNextConfig(t.col)))}}function zj(n,e,t){return(e=VWe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function VWe(n){var e=WWe(n,"string");return typeof e=="symbol"?e:e+""}function WWe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const jWe="multipleSelectionHandles",zWe=160;class UWe extends Ht{constructor(){super(...arguments),zj(this,"dragged",[]),zj(this,"lastSetCell",null)}static get PLUGIN_KEY(){return jWe}static get PLUGIN_PRIORITY(){return zWe}isEnabled(){return pc()}enablePlugin(){this.enabled||(this.registerListeners(),super.enablePlugin())}registerListeners(){const e=this,{rootElement:t}=this.hot;function i(r){if(e.dragged.length===1)return e.dragged.splice(0,e.dragged.length),!0;const s=e.dragged.indexOf(r);if(s===-1)return!1;s===0?e.dragged=e.dragged.slice(0,1):s===1&&(e.dragged=e.dragged.slice(-1))}this.eventManager.addEventListener(t,"touchstart",r=>{let s;if(Ue(r.target,"topSelectionHandle-HitArea"))return s=e.hot.getSelectedRangeLast(),e.dragged.push("top"),e.touchStartRange={width:s.getWidth(),height:s.getHeight(),direction:s.getDirection()},r.preventDefault(),!1;if(Ue(r.target,"bottomSelectionHandle-HitArea"))return s=e.hot.getSelectedRangeLast(),e.dragged.push("bottom"),e.touchStartRange={width:s.getWidth(),height:s.getHeight(),direction:s.getDirection()},r.preventDefault(),!1}),this.eventManager.addEventListener(t,"touchend",r=>{if(Ue(r.target,"topSelectionHandle-HitArea"))return i.call(e,"top"),e.touchStartRange=void 0,r.preventDefault(),!1;if(Ue(r.target,"bottomSelectionHandle-HitArea"))return i.call(e,"bottom"),e.touchStartRange=void 0,r.preventDefault(),!1}),this.eventManager.addEventListener(t,"touchmove",r=>{const{rootDocument:s}=this.hot;let o,a,l,c,u,h;if(e.dragged.length===0)return;const d=s.elementFromPoint(r.touches[0].clientX,r.touches[0].clientY);!d||d===e.lastSetCell||((d.nodeName==="TD"||d.nodeName==="TH")&&(o=e.hot.getCoords(d),o.col===-1&&(o.col=0),a=e.hot.getSelectedRangeLast(),l=a.getWidth(),c=a.getHeight(),u=a.getDirection(),l===1&&c===1&&e.hot.selection.setRangeEnd(o),h=e.getCurrentRangeCoords(a,o,e.touchStartRange.direction,u,e.dragged[0]),h.start!==null&&e.hot.selection.setRangeStart(h.start),e.hot.selection.setRangeEnd(h.end),e.lastSetCell=d),r.preventDefault())})}getCurrentRangeCoords(e,t,i,r,s){const o=e.getTopStartCorner(),a=e.getBottomEndCorner(),l=e.getBottomStartCorner(),c=e.getTopEndCorner();let u={start:null,end:null};switch(i){case"NE-SW":switch(r){case"NE-SW":case"NW-SE":s==="top"?u={start:this.hot._createCellCoords(t.row,e.highlight.col),end:this.hot._createCellCoords(l.row,t.col)}:u={start:this.hot._createCellCoords(e.highlight.row,t.col),end:this.hot._createCellCoords(t.row,o.col)};break;case"SE-NW":s==="bottom"&&(u={start:this.hot._createCellCoords(a.row,t.col),end:this.hot._createCellCoords(t.row,o.col)});break}break;case"NW-SE":switch(r){case"NE-SW":s==="top"?u={start:t,end:l}:u.end=t;break;case"NW-SE":s==="top"?u={start:t,end:a}:u.end=t;break;case"SE-NW":s==="top"?u={start:t,end:o}:u.end=t;break;case"SW-NE":s==="top"?u={start:t,end:c}:u.end=t;break}break;case"SW-NE":switch(r){case"NW-SE":s==="bottom"?u={start:this.hot._createCellCoords(t.row,o.col),end:this.hot._createCellCoords(l.row,t.col)}:u={start:this.hot._createCellCoords(o.row,t.col),end:this.hot._createCellCoords(t.row,a.col)};break;case"SW-NE":s==="top"?u={start:this.hot._createCellCoords(e.highlight.row,t.col),end:this.hot._createCellCoords(t.row,a.col)}:u={start:this.hot._createCellCoords(t.row,o.col),end:this.hot._createCellCoords(o.row,t.col)};break;case"SE-NW":s==="bottom"?u={start:this.hot._createCellCoords(t.row,c.col),end:this.hot._createCellCoords(o.row,t.col)}:s==="top"&&(u={start:l,end:t});break}break;case"SE-NW":switch(r){case"NW-SE":case"NE-SW":case"SW-NE":s==="top"&&(u.end=t);break;case"SE-NW":s==="top"?u.end=t:u={start:t,end:o};break}break}return u}isDragged(){return this.dragged.length>0}}function hO(){let{label:n="",colspan:e=1,origColspan:t=1,collapsible:i=!1,crossHiddenColumns:r=[],isCollapsed:s=!1,isHidden:o=!1,isRoot:a=!1,isPlaceholder:l=!1,headerClassNames:c=[]}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{label:n,colspan:e,origColspan:t,collapsible:i,isCollapsed:s,crossHiddenColumns:r,isHidden:o,isRoot:a,isPlaceholder:l,headerClassNames:c}}function sX(){return{label:"",isPlaceholder:!0}}function GWe(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1/0;const t=[];if(e===0)return t;q(n,r=>{const s=[];let o=0;t.push(s),q(r,a=>{const l=hO();if(ct(a)){const{label:u,colspan:h,headerClassName:d}=a;l.label=jn(u),typeof h=="number"&&h>1&&(l.colspan=h,l.origColspan=h),typeof d=="string"&&(l.headerClassNames=[...d.split(" ")])}else l.label=jn(a);o+=l.origColspan;let c=!1;if(o>=e&&(l.colspan=l.origColspan-(o-e),l.origColspan=l.colspan,c=!0),s.push(l),l.colspan>1)for(let u=0;u<l.colspan-1;u++)s.push(sX());return!c})});const i=Math.max(...vt(t,r=>r.length));return q(t,r=>{if(r.length<i){const s=vt(new Array(i-r.length),()=>hO());r.splice(r.length,0,...s)}}),t}function nA(n,e,t){YWe(n,e),e.set(n,t)}function YWe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ko(n,e){return n.get(oX(n,e))}function xb(n,e,t){return n.set(oX(n,e),t),t}function oX(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const Uj=["label","collapsible"];var Vl=new WeakMap,rd=new WeakMap,iA=new WeakMap;class KWe{constructor(){nA(this,Vl,[]),nA(this,rd,0),nA(this,iA,1/0)}setColumnsLimit(e){xb(iA,this,e)}setData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];xb(Vl,this,GWe(e,ko(iA,this))),xb(rd,this,ko(Vl,this).length)}getData(){return ko(Vl,this)}mergeWith(e){q(e,t=>{let{row:i,col:r,...s}=t;const o=this.getHeaderSettings(i,r);o!==null&&li(o,s,Uj)})}map(e){q(ko(Vl,this),t=>{q(t,i=>{const r=e({...i});ct(r)&&li(i,r,Uj)})})}getHeaderSettings(e,t){var i;if(e>=ko(rd,this)||e<0)return null;const r=ko(Vl,this)[e];return Array.isArray(r)===!1||t>=r.length?null:(i=r[t])!==null&&i!==void 0?i:null}getHeadersSettings(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;const r=[];if(e>=ko(rd,this)||e<0)return r;const s=ko(Vl,this)[e];let o=0;for(let a=t;a<s.length;a++){const l=s[a];if(l.isPlaceholder)throw new Error("The first column settings cannot overlap the other header layers");if(o+=l.colspan,r.push(l),l.colspan>1&&(a+=l.colspan-1),o===i)break;if(o>i)throw new Error("The last column settings cannot overlap the other header layers")}return r}getLayersCount(){return ko(rd,this)}getColumnsCount(){return ko(rd,this)>0?ko(Vl,this)[0].length:0}clear(){xb(Vl,this,[]),xb(rd,this,0)}}function rA(n,e,t){return(e=qWe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function qWe(n){var e=XWe(n,"string");return typeof e=="symbol"?e:e+""}function XWe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}const aX="DF-pre-order";function lX(n,e){let t=n.call(e,this);for(let i=0;i<this.childs.length;i++){if(t===!1)return!1;t=lX.call(this.childs[i],n,e)}return t}const ZWe="DF-post-order";function cX(n,e){for(let t=0;t<this.childs.length;t++)if(cX.call(this.childs[t],n,e)===!1)return!1;return n.call(e,this)}const uX="BF";function QWe(n,e){const t=[this];function i(){if(t.length===0)return;const r=t.shift();t.push(...r.childs),n.call(e,r)!==!1&&i()}i()}const JWe=uX,Gj=new Map([[aX,lX],[ZWe,cX],[uX,QWe]]);class FR{constructor(e){rA(this,"data",{}),rA(this,"parent",null),rA(this,"childs",[]),this.data=e}addChild(e){e.parent=this,this.childs.push(e)}cloneTree(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this;const t=new FR({...e.data});for(let i=0;i<e.childs.length;i++)t.addChild(this.cloneTree(e.childs[i]));return t}replaceTreeWith(e){this.data={...e.data},this.childs=[];for(let t=0;t<e.childs.length;t++)this.addChild(e.childs[t])}walkDown(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:JWe;if(!Gj.has(t))throw new Error(`Traversal strategy "${t}" does not exist`);Gj.get(t).call(this,e,this)}walkUp(e){const t=this,i=r=>{e.call(t,r)!==!1&&r.parent!==null&&i(r.parent)};i(this)}}function sA(n,e,t){eje(n,e),e.set(n,t)}function eje(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Cr(n,e){return n.get(hX(n,e))}function tje(n,e,t){return n.set(hX(n,e),t),t}function hX(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var Rg=new WeakMap,sd=new WeakMap,Eg=new WeakMap;class nje{constructor(e){sA(this,Rg,new Map),sA(this,sd,new Map),sA(this,Eg,null),tje(Eg,this,e)}getRoots(){return Array.from(Cr(Rg,this).values())}getRootByColumn(e){let t;return Cr(sd,this).has(e)&&(t=Cr(Rg,this).get(Cr(sd,this).get(e))),t}getNode(e,t){const i=this.getRootByColumn(t);if(!i)return;const r=t-Cr(sd,this).get(t);let s=0,o;return i.walkDown(a=>{const{data:{origColspan:l,headerLevel:c}}=a;if(e===c){if(r>=s&&r<=s+l-1)return o=a,o.data.isRoot=t===o.data.columnIndex,!1;s+=l}}),o}rebuildTreeIndex(){let e=0;Cr(sd,this).clear(),q(Cr(Rg,this),t=>{let[,{data:{colspan:i}}]=t;for(let r=e;r<e+i;r++)Cr(sd,this).set(r,e);e+=i})}buildTree(){this.clear();const e=Cr(Eg,this).getColumnsCount();let t=0;for(;t<e;){const i=Cr(Eg,this).getHeaderSettings(0,t),r=new FR;Cr(Rg,this).set(t,r),this.buildLeaves(r,t,0,i.origColspan),t+=i.origColspan}this.rebuildTreeIndex()}buildLeaves(e,t,i){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;const s=Cr(Eg,this).getHeadersSettings(i,t,r);i+=1,q(s,o=>{const a={...o,headerLevel:i-1,columnIndex:t};let l;i===1?(e.data=a,l=e):(l=new FR(a),e.addChild(l)),i<Cr(Eg,this).getLayersCount()&&this.buildLeaves(l,t,i,o.origColspan),t+=o.origColspan})}clear(){Cr(Rg,this).clear(),Cr(sd,this).clear()}}function dX(n,e){n.walkDown(t=>{let{data:i,childs:r}=t;if(!i.isHidden&&(e(i.columnIndex),r.length===0))for(let s=1;s<i.colspan;s++)e(i.columnIndex+s)})}function BR(n,e){let{childs:t}=n;if(t.length!==0)return t[0].data[e]}function VR(n){return BR(n,"origColspan")===n.data.origColspan}function DH(n){const{data:e,childs:t}=n;if(!e.isCollapsed||e.isHidden||e.origColspan<=1)return{rollbackModification:()=>{},affectedColumns:[],colspanCompensation:0};if(VR(n))return DH(t[0]);e.isCollapsed=!1;const r=t.slice(1),s=new Set;let o=0;if(r.length>0)q(r,a=>{a.replaceTreeWith(a.data.clonedTree),a.data.clonedTree=null;const l=a.data;o+=l.colspan,dX(a,c=>{s.add(c)})});else{const{colspan:a,origColspan:l,columnIndex:c}=e;o=l-a;for(let u=1;u<l;u++)s.add(c+u)}return n.walkUp(a=>{const{data:l}=a;l.colspan+=o,l.colspan>=l.origColspan?(l.colspan=l.origColspan,l.isCollapsed=!1):VR(a)&&(l.isCollapsed=BR(a,"isCollapsed"))}),{rollbackModification:()=>LH(n),affectedColumns:Array.from(s),colspanCompensation:o}}function LH(n){var e;const{data:t,childs:i}=n;if(t.isCollapsed||t.isHidden||t.origColspan<=1)return{rollbackModification:()=>{},affectedColumns:[],colspanCompensation:0};if(VR(n))return LH(i[0]);t.isCollapsed=!0;const s=i.slice(1),o=new Set;if(s.length>0)q(s,l=>{dX(l,c=>{o.add(c)}),l.data.clonedTree=l.cloneTree(),l.walkDown(c=>{let{data:u}=c;u.isHidden=!0})});else{const{origColspan:l,columnIndex:c}=t;for(let u=1;u<l;u++){const h=c+u;o.add(h)}}const a=t.colspan-((e=BR(n,"colspan"))!==null&&e!==void 0?e:1);return n.walkUp(l=>{const{data:c}=l;c.colspan-=a,c.colspan<=1?(c.colspan=1,c.isCollapsed=!0):VR(l)&&(c.isCollapsed=BR(l,"isCollapsed"))}),{rollbackModification:()=>DH(n),affectedColumns:Array.from(o),colspanCompensation:a}}function ije(n,e){if(!Number.isInteger(e))throw new Error("The passed gridColumnIndex argument has invalid type.");if(n.childs.length>0)throw new Error(Kt`The passed node is not the last node on the tree. Only for\x20
the last node, the hide column modification can be applied.`);const{crossHiddenColumns:t}=n.data;if(t.includes(e))return;let i=!1;n.walkUp(r=>{const{data:{collapsible:s}}=r;if(s)return i=!0,!1}),!i&&n.walkUp(r=>{const{data:s}=r;s.crossHiddenColumns.push(e),s.colspan>1?s.colspan-=1:s.isHidden=!0})}function rje(n,e){if(!Number.isInteger(e))throw new Error("The passed gridColumnIndex argument has invalid type.");if(n.childs.length>0)throw new Error(Kt`The passed node is not the last node on the tree. Only for\x20
the last node, the show column modification can be applied.`);const{crossHiddenColumns:t}=n.data;if(!t.includes(e))return;let i=!1;n.walkUp(r=>{const{data:{collapsible:s}}=r;if(s)return i=!0,!1}),!i&&n.walkUp(r=>{const{data:s}=r;s.crossHiddenColumns.splice(s.crossHiddenColumns.indexOf(e),1),!s.isHidden&&s.colspan<s.origColspan&&(s.colspan+=1),s.isHidden=!1})}const Yj=new Map([["collapse",LH],["expand",DH],["hide-column",ije],["show-column",rje]]);function sje(n,e,t){if(!Yj.has(n))throw new Error(`The node modifier action ("${n}") does not exist.`);return Yj.get(n)(e,t)}function QC(n){const e=[];return q(n,t=>{t.walkDown(i=>{const r=i.data,{origColspan:s,columnIndex:o,headerLevel:a,crossHiddenColumns:l}=r,c=aje(e,a);let u=!1;for(let h=o;h<o+s;h++)if(l.includes(h)||u)c.push(sX());else{const f=oje(r);f.isRoot=!0,c.push(f),u=!0}})}),e}function oje(n){const{crossHiddenColumns:e,...t}=hO(n);return t}function aje(n,e){let t;return Array.isArray(n[e])?t=n[e]:(t=[],n[e]=t),t}function oA(n,e,t){lje(n,e),e.set(n,t)}function lje(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Tb(n,e,t){return n.set(fX(n,e),t),t}function $n(n,e){return n.get(fX(n,e))}function fX(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var Pa=new WeakMap,Wr=new WeakMap,od=new WeakMap;class cje{constructor(){oA(this,Pa,new KWe),oA(this,Wr,new nje($n(Pa,this))),oA(this,od,[[]])}setState(e){$n(Pa,this).setData(e);let t=!1;try{$n(Wr,this).buildTree()}catch{$n(Wr,this).clear(),$n(Pa,this).clear(),t=!0}return Tb(od,this,QC($n(Wr,this).getRoots())),t}setColumnsLimit(e){$n(Pa,this).setColumnsLimit(e)}mergeStateWith(e){const t=vt(e,i=>{let{row:r,...s}=i;return{row:r<0?this.rowCoordsToLevel(r):r,...s}});$n(Pa,this).mergeWith(t),$n(Wr,this).buildTree(),Tb(od,this,QC($n(Wr,this).getRoots()))}mapState(e){$n(Pa,this).map(e),$n(Wr,this).buildTree(),Tb(od,this,QC($n(Wr,this).getRoots()))}mapNodes(e){return ci($n(Wr,this).getRoots(),(t,i)=>(i.walkDown(r=>{const s=e(r.data);s!==void 0&&t.push(s)}),t),[])}triggerNodeModification(e,t,i){t<0&&(t=this.rowCoordsToLevel(t));const r=$n(Wr,this).getNode(t,i);let s;return r&&(s=sje(e,r,i),Tb(od,this,QC($n(Wr,this).getRoots()))),s}triggerColumnModification(e,t){return this.triggerNodeModification(e,-1,t)}rowCoordsToLevel(e){if(e>=0)return null;const t=e+Math.max(this.getLayersCount(),1);return t<0?null:t}levelToRowCoords(e){if(e<0)return null;const t=e-Math.max(this.getLayersCount(),1);return t>=0?null:t}getHeaderSettings(e,t){var i,r;return e<0&&(e=this.rowCoordsToLevel(e)),e===null||e>=this.getLayersCount()?null:(i=(r=$n(od,this)[e])===null||r===void 0?void 0:r[t])!==null&&i!==void 0?i:null}getHeaderTreeNodeData(e,t){const i=this.getHeaderTreeNode(e,t);return i?{...i.data}:null}getHeaderTreeNode(e,t){if(e<0&&(e=this.rowCoordsToLevel(e)),e===null||e>=this.getLayersCount())return null;const i=$n(Wr,this).getNode(e,t);return i||null}findTopMostEntireHeaderLevel(e){var t;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e;const r=i-e+1;let s=!1,o=null;for(let a=e;a<=i;a++){const l=$n(Wr,this).getRootByColumn(a);if(!l)break;s=!0,l.walkDown(c=>{const{columnIndex:u,headerLevel:h,origColspan:d,isHidden:f}=c.data;f||d<=r&&u>=e&&u+d-1<=i&&(o===null||h<o)&&(o=h)},aX)}return s&&o===null?-1:this.levelToRowCoords((t=o)!==null&&t!==void 0?t:0)}findLeftMostColumnIndex(e,t){var i;const{isRoot:r}=(i=this.getHeaderSettings(e,t))!==null&&i!==void 0?i:{isRoot:!0};if(r)return t;let s=t-1;for(;s>=0;){var o;const{isRoot:a}=(o=this.getHeaderSettings(e,s))!==null&&o!==void 0?o:{isRoot:!0};if(a)break;s-=1}return s}findRightMostColumnIndex(e,t){var i;const{isRoot:r,origColspan:s}=(i=this.getHeaderSettings(e,t))!==null&&i!==void 0?i:{isRoot:!0,origColspan:1};if(r)return t+s-1;let o=t+1;for(;o<this.getColumnsCount();){var a;const{isRoot:l}=(a=this.getHeaderSettings(e,o))!==null&&a!==void 0?a:{isRoot:!0};if(l)break;o+=1}return o-1}getLayersCount(){return $n(Pa,this).getLayersCount()}getColumnsCount(){return $n(Pa,this).getColumnsCount()}clear(){Tb(od,this,[]),$n(Pa,this).clear(),$n(Wr,this).clear()}}function Mb(n,e,t){return(e=uje(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function uje(n){var e=hje(n,"string");return typeof e=="symbol"?e:e+""}function hje(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class dje{constructor(e,t){Mb(this,"hot",void 0),Mb(this,"nestedHeaderSettingsGetter",void 0),Mb(this,"layersCount",0),Mb(this,"container",void 0),Mb(this,"widthsMap",void 0),this.hot=e,this.nestedHeaderSettingsGetter=t,this.widthsMap=this.hot.columnIndexMapper.createAndRegisterIndexMap("nestedHeaders.widthsMap","physicalIndexToValue")}setLayersCount(e){return this.layersCount=e,this}getWidth(e){return this.widthsMap.getValueAtIndex(this.hot.toPhysicalColumn(e))}buildWidthsMap(){this.container=this.hot.rootDocument.createElement("div"),this.container.classList.add("handsontable","htGhostTable","htAutoSize"),this._buildGhostTable(this.container),this.hot.rootDocument.body.appendChild(this.container);const e=this.container.querySelectorAll("tr:last-of-type th"),t=e.length;this.widthsMap.clear();for(let i=0;i<t;i++){const r=this.hot.columnIndexMapper.getVisualFromRenderableIndex(i),s=this.hot.toPhysicalColumn(r);this.widthsMap.setValueAtIndex(s,e[i].offsetWidth)}this.container.parentNode.removeChild(this.container),this.container=null}_buildGhostTable(e){const{rootDocument:t,columnIndexMapper:i}=this.hot,r=t.createDocumentFragment(),s=t.createElement("table"),o=!!this.hot.getSettings().dropdownMenu,a=i.getRenderableIndexesLength();for(let l=0;l<this.layersCount;l++){const c=t.createElement("tr");for(let u=0;u<a;u++){let h=i.getVisualFromRenderableIndex(u);h===null&&(h=u);const d=t.createElement("th"),f=this.nestedHeaderSettingsGetter(l,h);if(f&&(!f.isPlaceholder||f.isHidden)){let g=f.label;o&&(g+='<button class="changeType"></button>'),kf(d,g),d.colSpan=f.colspan,c.appendChild(d)}}s.appendChild(c)}r.appendChild(s),e.appendChild(r)}clear(){this.widthsMap.clear(),this.container=null}}function fje(n,e){gX(n,e),e.add(n)}function Kj(n,e,t){return(e=gje(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function gje(n){var e=pje(n,"string");return typeof e=="symbol"?e:e+""}function pje(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function JC(n,e,t){gX(n,e),e.set(n,t)}function gX(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function kd(n,e,t){return n.set(Fn(n,e),t),t}function Mt(n,e){return n.get(Fn(n,e))}function Fn(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const qj="nestedHeaders",mje=280;var Qt=new WeakMap,su=new WeakMap,Xv=new WeakMap,kE=new WeakMap,Yn=new WeakSet;class bje extends Ht{constructor(){super(...arguments),fje(this,Yn),JC(this,Qt,new cje),JC(this,su,null),JC(this,Xv,null),JC(this,kE,!1),Kj(this,"ghostTable",new dje(this.hot,(e,t)=>this.getHeaderSettings(e,t))),Kj(this,"detectedOverlappedHeaders",!1)}static get PLUGIN_KEY(){return qj}static get PLUGIN_PRIORITY(){return mje}isEnabled(){return!!this.hot.getSettings()[qj]}enablePlugin(){var e=this;if(this.enabled)return;const{nestedHeaders:t}=this.hot.getSettings();(!Array.isArray(t)||!Array.isArray(t[0]))&&Yt(Kt`Your Nested Headers plugin configuration is invalid. The settings has to be\x20
                        passed as an array of arrays e.q. [['A1', { label: 'A2', colspan: 2 }]]`),this.addHook("init",()=>Fn(Yn,this,kje).call(this)),this.addHook("afterLoadData",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Fn(Yn,e,Dje).call(e,...r)}),this.addHook("beforeOnCellMouseDown",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Fn(Yn,e,Cje).call(e,...r)}),this.addHook("afterOnCellMouseDown",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Fn(Yn,e,Sje).call(e,...r)}),this.addHook("beforeOnCellMouseOver",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Fn(Yn,e,_je).call(e,...r)}),this.addHook("beforeOnCellMouseUp",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Fn(Yn,e,Rje).call(e,...r)}),this.addHook("beforeSelectionHighlightSet",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Fn(Yn,e,Eje).call(e,...r)}),this.addHook("modifyTransformStart",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Fn(Yn,e,xje).call(e,...r)}),this.addHook("afterSelection",()=>Fn(Yn,this,eS).call(this)),this.addHook("afterSelectionFocusSet",()=>Fn(Yn,this,eS).call(this)),this.addHook("beforeViewportScrollHorizontally",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Fn(Yn,e,vje).call(e,...r)}),this.addHook("afterGetColumnHeaderRenderers",i=>Fn(Yn,this,Mje).call(this,i)),this.addHook("modifyColWidth",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Fn(Yn,e,Pje).call(e,...r)}),this.addHook("modifyColumnHeaderValue",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Fn(Yn,e,Ije).call(e,...r)}),this.addHook("beforeHighlightingColumnHeader",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Fn(Yn,e,wje).call(e,...r)}),this.addHook("beforeCopy",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Fn(Yn,e,yje).call(e,...r)}),this.addHook("beforeSelectColumns",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Fn(Yn,e,Tje).call(e,...r)}),this.addHook("afterViewportColumnCalculatorOverride",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Fn(Yn,e,Aje).call(e,...r)}),this.addHook("modifyFocusedElement",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return Fn(Yn,e,Oje).call(e,...r)}),this.hot.columnIndexMapper.addLocalHook("cacheUpdated",()=>Fn(Yn,this,eS).call(this)),this.hot.rowIndexMapper.addLocalHook("cacheUpdated",()=>Fn(Yn,this,eS).call(this)),super.enablePlugin(),this.updatePlugin()}updatePlugin(){if(!this.hot.view)return;const{nestedHeaders:e}=this.hot.getSettings();Mt(Qt,this).setColumnsLimit(this.hot.countCols()),Array.isArray(e)&&(this.detectedOverlappedHeaders=Mt(Qt,this).setState(e)),this.detectedOverlappedHeaders&&Yt(Kt`Your Nested Headers plugin setup contains overlapping headers. This kind of configuration\x20
                        is currently not supported.`),this.enabled&&this.hot.columnIndexMapper.hidingMapsCollection.getMergedValues().forEach((t,i)=>{const r=t===!0?"hide-column":"show-column";Mt(Qt,this).triggerColumnModification(r,i)}),!Mt(su,this)&&this.enabled&&kd(su,this,this.hot.columnIndexMapper.createChangesObserver("hiding").subscribe(t=>{t.forEach(i=>{let{op:r,index:s,newValue:o}=i;if(r==="replace"){const a=o===!0?"hide-column":"show-column";Mt(Qt,this).triggerColumnModification(a,s)}}),this.ghostTable.buildWidthsMap()})),this.ghostTable.setLayersCount(this.getLayersCount()).buildWidthsMap(),super.updatePlugin()}disablePlugin(){this.clearColspans(),Mt(Qt,this).clear(),Mt(su,this).unsubscribe(),kd(su,this,null),this.ghostTable.clear(),super.disablePlugin()}getStateManager(){return Mt(Qt,this)}getLayersCount(){return Mt(Qt,this).getLayersCount()}getHeaderSettings(e,t){return Mt(Qt,this).getHeaderSettings(e,t)}clearColspans(){if(!this.hot.view)return;const{_wt:e}=this.hot.view,t=e.getSetting("columnHeaders").length,i=e.wtTable.THEAD,r=e.wtOverlays.topOverlay.clone.wtTable.THEAD,s=e.wtOverlays.topInlineStartCornerOverlay?e.wtOverlays.topInlineStartCornerOverlay.clone.wtTable.THEAD:null;for(let o=0;o<t;o++){const a=i.childNodes[o];if(!a)break;const l=r.childNodes[o],c=s?s.childNodes[o]:null;for(let u=0,h=a.childNodes.length;u<h;u++)a.childNodes[u].removeAttribute("colspan"),Qe(a.childNodes[u],"hiddenHeader"),l&&l.childNodes[u]&&(l.childNodes[u].removeAttribute("colspan"),Qe(l.childNodes[u],"hiddenHeader")),s&&c&&c.childNodes[u]&&(c.childNodes[u].removeAttribute("colspan"),Qe(c.childNodes[u],"hiddenHeader"))}}headerRendererFactory(e){var t=this;const i=this.hot.view._wt.getSetting("fixedColumnsStart");return(r,s)=>{var o;const{columnIndexMapper:a,view:l}=this.hot;let c=a.getVisualFromRenderableIndex(r);c===null&&(c=r),s.removeAttribute("colspan"),Qe(s,"hiddenHeader");const{colspan:u,isHidden:h,isPlaceholder:d,headerClassNames:f}=(o=Mt(Qt,this).getHeaderSettings(e,c))!==null&&o!==void 0?o:{label:""};if(d||h)ge(s,"hiddenHeader");else if(u>1){var g,p;const{wtOverlays:m}=l._wt,v=(g=m.topInlineStartCornerOverlay)===null||g===void 0?void 0:g.clone.wtTable.THEAD.contains(s),y=(p=m.inlineStartOverlay)===null||p===void 0?void 0:p.clone.wtTable.THEAD.contains(s),w=v||y?Math.min(u,i-r):u;w>1&&s.setAttribute("colspan",w)}if(this.hot.view.appendColHeader(c,s,function(){return t.getColumnHeaderValue(...arguments)},e),!d&&!h){const m=s.querySelector("div.relative");m&&f&&f.length>0&&(Qe(m,this.hot.getColumnMeta(c).headerClassName),ge(m,f))}}}getColumnHeaderValue(e,t){var i;const{isHidden:r,isPlaceholder:s}=(i=Mt(Qt,this).getHeaderSettings(t,e))!==null&&i!==void 0?i:{};return s||r?"":this.hot.getColHeader(e,t)}destroy(){kd(Qt,this,null),Mt(su,this)!==null&&(Mt(su,this).unsubscribe(),kd(su,this,null)),super.destroy()}_getHeaderTreeNodeDataByCoords(e){if(!(e.row>=0||e.col<0))return Mt(Qt,this).getHeaderTreeNodeData(e.row,e.col)}}function eS(){var n;const e=(n=this.hot)===null||n===void 0?void 0:n.getSelectedRangeLast();if(!e)return;const{highlight:t}=e;if(t.isHeader()&&t.col>=0){const r=Mt(Qt,this).findLeftMostColumnIndex(t.row,t.col),s=this.hot.selection.highlight.getFocus();s.visualCellRange.highlight.col=r,s.visualCellRange.from.col=r,s.visualCellRange.to.col=r,s.commit()}}function vje(n){const e=this.hot.getSelectedRangeLast();if(!e)return n;const{highlight:t}=e;if(!(t.isHeader()&&t.col>=0))return n;const r=this.hot.view.getFirstFullyVisibleColumn(),s=this.hot.view.getLastFullyVisibleColumn(),o=Mt(Qt,this).findLeftMostColumnIndex(t.row,t.col),a=Mt(Qt,this).findRightMostColumnIndex(t.row,t.col);return o<r&&a>s?n:o<r?o:a}function wje(n,e,t){const i=Mt(Qt,this).getHeaderTreeNodeData(e,n);if(!i)return n;const{columnCursor:r,selectionType:s,selectionWidth:o}=t,{isRoot:a,colspan:l}=Mt(Qt,this).getHeaderSettings(e,n);if(s===bL){if(!a)return i.columnIndex}else if(s===PY&&(l>o-r||!a))return null;return n}function yje(n,e,t){let{columnHeadersCount:i}=t;if(i!==0)for(let s=0;s<e.length;s++){const{startRow:o,startCol:a,endRow:l,endCol:c}=e[s],u=l-o+1,h=a-c+1;if(o>=0||h===1)break;for(let d=a;d<=c;d++)for(let f=o;f<=l;f++){var r;const g=u+f,p=d-a;if(p===0)continue;((r=Mt(Qt,this).getHeaderTreeNodeData(f,d))===null||r===void 0?void 0:r.isRoot)===!1&&(n[g][p]="")}}}function Cje(n,e,t,i){this._getHeaderTreeNodeDataByCoords(e)&&(i.column=!0)}function Sje(n,e){const t=this._getHeaderTreeNodeDataByCoords(e);if(!t)return;kd(Xv,this,e.clone()),kd(kE,this,!0);const{selection:i}=this.hot,r=i.isSelected()?i.getSelectedRange().current():null,s=[],{columnIndex:o,origColspan:a}=t,l=!i.inInSelection(e);n.shiftKey&&r?e.col<r.from.col?s.push(r.getTopEndCorner().col,o,e.row):e.col>r.from.col?s.push(r.getTopStartCorner().col,o+a-1,e.row):s.push(o,o+a-1,e.row):(sE(n)||qu(n)&&l||tY(n))&&s.push(o,o+a-1,e.row),i.selectColumns(...s)}function _je(n,e,t,i){if(!this.hot.view.isMouseDown())return;const r=this._getHeaderTreeNodeDataByCoords(e);if(!r)return;const{columnIndex:s,origColspan:o}=r,a=this.hot.getSelectedRangeLast(),l=a.getTopStartCorner(),c=a.getBottomEndCorner(),{from:u}=a;i.column=!0,i.cell=!0;const h=[],d=Gt(e.row,-1/0,-1);e.col<u.col?h.push(c.col,s,d):e.col>u.col?h.push(l.col,s+o-1,d):h.push(s,s+o-1,d),this.hot.selection.selectColumns(...h)}function Rje(){kd(kE,this,!1)}function Eje(){const{navigableHeaders:n}=this.hot.getSettings();if(!this.hot.view.isMouseDown()||!Mt(kE,this)||!n)return;const e=this.hot.getSelectedRangeLast(),t=e.getTopStartCorner().col,i=e.getBottomEndCorner().col,{columnIndex:r,origColspan:s}=Mt(Qt,this).getHeaderTreeNodeData(Mt(Xv,this).row,Mt(Xv,this).col);if(e.setHighlight(Mt(Xv,this)),s>e.getWidth()||r<t||r+s-1>i){const o=Mt(Qt,this).findTopMostEntireHeaderLevel(Gt(t,r,r+s-1),Gt(i,r,r+s-1));e.highlight.row=o,e.highlight.col=e.from.col}}function xje(n){const{highlight:e}=this.hot.getSelectedRangeLast(),t=this.hot._createCellCoords(e.row+n.row,e.col+n.col);if(!(t.isHeader()&&t.col>=0))return;const r=Mt(Qt,this).findLeftMostColumnIndex(t.row,t.col),s=Mt(Qt,this).findRightMostColumnIndex(t.row,t.col);if(n.col<0){const o=e.col>=r&&e.col<=s?r-1:s,a=this.hot.columnIndexMapper.getNearestNotHiddenIndex(o,-1);a===null?n.col=-this.hot.view.countRenderableColumnsInRange(0,e.col):n.col=-Math.max(this.hot.view.countRenderableColumnsInRange(a,e.col)-1,1)}else if(n.col>0){const o=e.col>=r&&e.col<=s?s+1:r,a=this.hot.columnIndexMapper.getNearestNotHiddenIndex(o,1);a===null?n.col=this.hot.view.countRenderableColumnsInRange(e.col,this.hot.countCols()):n.col=Math.max(this.hot.view.countRenderableColumnsInRange(e.col,a)-1,1)}}function Tje(n,e){const t=n.row,i=this._getHeaderTreeNodeDataByCoords({row:t,col:n.col}),r=this._getHeaderTreeNodeDataByCoords({row:t,col:e.col});e.col<n.col?(i&&(n.col=i.columnIndex+i.origColspan-1),r&&(e.col=r.columnIndex)):e.col>=n.col&&(i&&(n.col=i.columnIndex),r&&(e.col=r.columnIndex+r.origColspan-1))}function Mje(n){n.length=0;for(let e=0;e<Mt(Qt,this).getLayersCount();e++)n.push(this.headerRendererFactory(e))}function Aje(n){const e=Mt(Qt,this).getLayersCount();let t=n.startColumn,i=!!e;for(let r=0;r<e;r++){const s=Mt(Qt,this).findLeftMostColumnIndex(r,n.startColumn),o=this.hot.columnIndexMapper.getRenderableFromVisualIndex(s);if(s>=0&&(i=!1),or(o)&&o<n.startColumn){t=o;break}}n.startColumn=i?Mt(Qt,this).getHeaderTreeNodeData(0,t).columnIndex:t}function Pje(n,e){const t=this.ghostTable.getWidth(e);return n>t?n:t}function Ije(n,e,t){var i;const{label:r}=(i=Mt(Qt,this).getHeaderTreeNodeData(t,e))!==null&&i!==void 0?i:{label:""};return r}function Oje(n,e){if(n<0)return this.hot.getCell(n,Mt(Qt,this).findLeftMostColumnIndex(n,e),!0)}function kje(){this.updatePlugin()}function Dje(n,e){e||this.updatePlugin()}function Ab(n,e,t){return(e=Lje(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Lje(n){var e=Nje(n,"string");return typeof e=="symbol"?e:e+""}function Nje(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class Hje{constructor(e,t){Ab(this,"hot",void 0),Ab(this,"data",null),Ab(this,"plugin",void 0),Ab(this,"parentReference",new WeakMap),Ab(this,"cache",{levels:[],levelCount:0,rows:[],nodeInfo:new WeakMap}),this.hot=t,this.plugin=e}setData(e){this.data=e}getData(){return this.data}getRawSourceData(){let e=null;return this.plugin.disableCoreAPIModifiers(),e=this.hot.getSourceData(),this.plugin.enableCoreAPIModifiers(),e}updateWithData(e){this.setData(e),this.rewriteCache()}rewriteCache(){this.cache={levels:[],levelCount:0,rows:[],nodeInfo:new WeakMap},$e(0,this.data.length-1,e=>{this.cacheNode(this.data[e],0,null)})}cacheNode(e,t,i){this.cache.levels[t]||(this.cache.levels[t]=[],this.cache.levelCount+=1),this.cache.levels[t].push(e),this.cache.rows.push(e),this.cache.nodeInfo.set(e,{parent:i,row:this.cache.rows.length-1,level:t}),this.hasChildren(e)&&q(e.__children,r=>{this.cacheNode(r,t+1,e)})}getDataObject(e){return e==null?null:this.cache.rows[e]}readTreeNodes(e,t,i,r){let s=!1,o=t;if(isNaN(o)&&o.end)return o;let a=e;return a||(a={__children:this.data},s=!0,o-=1),i!=null&&o===i?{result:a,end:!0}:r!=null&&a===r?{result:o,end:!0}:(o+=1,a.__children&&q(a.__children,l=>{if(this.parentReference.set(l,s?null:a),o=this.readTreeNodes(l,o,i,r),isNaN(o)&&o.end)return!1}),o)}mockParent(){const e=this.mockNode();return e.__children=this.data,e}mockNode(){const e={};return ut(this.data[0],(t,i)=>{e[i]=null}),e}getRowIndex(e){return e==null?null:this.cache.nodeInfo.get(e).row}getRowIndexWithinParent(e){let t=null;isNaN(e)?t=e:t=this.getDataObject(e);const i=this.getRowParent(e);return i==null?this.data.indexOf(t):i.__children.indexOf(t)}countAllRows(){const e={__children:this.data};return this.countChildren(e)}countChildren(e){let t=0,i=e;return isNaN(i)||(i=this.getDataObject(i)),!i||!i.__children?0:(q(i.__children,r=>{t+=1,r.__children&&(t+=this.countChildren(r))}),t)}getRowParent(e){let t;return isNaN(e)?t=e:t=this.getDataObject(e),this.getRowObjectParent(t)}getRowObjectParent(e){return!e||typeof e!="object"?null:this.cache.nodeInfo.get(e).parent}getRowLevel(e){let t=null;return isNaN(e)?t=e:t=this.getDataObject(e),t?this.getRowObjectLevel(t):null}getRowObjectLevel(e){return e==null?null:this.cache.nodeInfo.get(e).level}hasChildren(e){let t=e;return isNaN(t)||(t=this.getDataObject(t)),!!(t.__children&&t.__children.length)}isChild(e){return this.getRowParent(e)!==null}getChild(e,t){var i;return((i=e.__children)===null||i===void 0?void 0:i[t])||null}isRowHighestLevel(e){return!this.isChild(e)}isParent(e){var t;let i=e;return isNaN(i)||(i=this.getDataObject(i)),i&&!!i.__children&&((t=i.__children)===null||t===void 0?void 0:t.length)!==0}addChild(e,t){let i=t;this.hot.runHooks("beforeAddChild",e,i);let r=null;e&&(r=this.getRowIndex(e)),this.hot.runHooks("beforeCreateRow",r+this.countChildren(e)+1,1);let s=e;e||(s=this.mockParent()),s.__children||(s.__children=[]),i||(i=this.mockNode()),s.__children.push(i),this.rewriteCache();const o=this.getRowIndex(i);this.hot.rowIndexMapper.insertIndexes(o,1),this.hot.runHooks("afterCreateRow",o,1),this.hot.runHooks("afterAddChild",e,i)}addChildAtIndex(e,t,i){let r=i,s;if(r||(r=this.mockNode()),this.hot.runHooks("beforeAddChild",e,r,t),e){const a=this.getRowIndex(e)+t+1;this.hot.runHooks("beforeCreateRow",a,1),e.__children.splice(t,null,r),this.rewriteCache(),this.plugin.disableCoreAPIModifiers(),this.hot.setSourceDataAtCell(this.getRowIndexWithinParent(e),"__children",e.__children,"NestedRows.addChildAtIndex"),this.hot.rowIndexMapper.insertIndexes(a,1),this.plugin.enableCoreAPIModifiers(),this.hot.runHooks("afterCreateRow",a,1),s=a}else this.plugin.disableCoreAPIModifiers(),this.hot.alter("insert_row_above",t,1,"NestedRows.addChildAtIndex"),this.plugin.enableCoreAPIModifiers(),s=this.getRowIndex(this.data[t]);r=this.getDataObject(s),this.hot.runHooks("afterAddChild",e,r,t)}addSibling(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"below";const i=this.translateTrimmedRow(e),r=this.getRowParent(i),s=this.getRowIndexWithinParent(i);switch(t){case"below":this.addChildAtIndex(r,s+1,null);break;case"above":this.addChildAtIndex(r,s,null);break}}detachFromParent(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=null;const r=[];Array.isArray(e)?($e(e[0],e[2],d=>{const f=this.translateTrimmedRow(d);r.push(this.getDataObject(f))}),$e(0,r.length-2,d=>{this.detachFromParent(r[d],!1)}),i=r[r.length-1]):i=e;const s=this.getRowIndex(i),o=this.countChildren(i),a=this.getRowIndexWithinParent(i),l=this.getRowParent(i),c=this.getRowParent(l),u=this.getRowIndex(c);let h=null;if(this.hot.runHooks("beforeDetachChild",l,i),a!=null){const d=Array.from(new Array(s+o+1).keys()).splice(-1*(o+1));if(this.hot.runHooks("beforeRemoveRow",s,o+1,d,this.plugin.pluginName),l.__children.splice(a,1),this.rewriteCache(),this.hot.runHooks("afterRemoveRow",s,o+1,d,this.plugin.pluginName),c){h=u+this.countChildren(c);const f=this.getChild(c,this.countChildren(c)-1),g=this.getRowIndex(f);this.hot.runHooks("beforeCreateRow",g+1,o+1,this.plugin.pluginName),c.__children.push(i)}else h=this.hot.countRows()+1,this.hot.runHooks("beforeCreateRow",h-2,o+1,this.plugin.pluginName),this.data.push(i)}this.rewriteCache(),this.hot.runHooks("afterCreateRow",h-2,o+1,this.plugin.pluginName),this.hot.runHooks("afterDetachChild",l,i,this.getRowIndex(i)),t&&this.hot.render()}filterData(e,t,i){const r=[];q(i,s=>{r.push(this.getDataObject(s))}),q(r,s=>{const o=this.getRowIndexWithinParent(s),a=this.getRowParent(s);a===null?this.data.splice(o,1):a.__children.splice(o,1)}),this.rewriteCache()}spliceData(e,t,i){const r=this.getDataObject(e-1);let s=null,o=e;r&&r.__children&&r.__children.length===0?(s=r,o=0):e<this.countAllRows()&&(s=this.getRowParent(e),o=this.getRowIndexWithinParent(e)),s?i?s.__children.splice(o,t,...i):s.__children.splice(o,t):i?this.data.splice(o,t,...i):this.data.splice(o,t),this.rewriteCache()}syncRowWithRawSource(e){let t=e,i=null;do i=this.getRowParent(i),i!==null&&(t=i);while(i!==null);this.plugin.disableCoreAPIModifiers(),this.hot.setSourceDataAtCell(this.getRowIndex(t),"__children",t.__children,"NestedRows.syncRowWithRawSource"),this.plugin.enableCoreAPIModifiers()}moveRow(e,t,i,r){const s=t===this.hot.countRows(),o=this.getRowParent(e),a=this.getRowIndexWithinParent(e),l=o.__children.slice(a,a+1),c=e>t;let u=s?this.getRowParent(t-1):this.getRowParent(t);u==null&&(u=this.getRowParent(t-1)),u==null&&(u=this.getDataObject(t-1)),u?u.__children||(u.__children=[]):(u=this.getDataObject(t),u.__children=[]);const h=s||i||r?u.__children.length:this.getRowIndexWithinParent(t),d=o===u;u.__children.splice(h,0,l[0]),o.__children.splice(a+(c&&d?1:0),1),this.syncRowWithRawSource(o),d||this.syncRowWithRawSource(u)}translateTrimmedRow(e){return this.plugin.collapsingUI?this.plugin.collapsingUI.translateTrimmedRow(e):e}untranslateTrimmedRow(e){return this.plugin.collapsingUI?this.plugin.collapsingUI.untranslateTrimmedRow(e):e}}function Xj(n,e,t){return(e=$je(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function $je(n){var e=Fje(n,"string");return typeof e=="symbol"?e:e+""}function Fje(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class NH{constructor(e,t){Xj(this,"hot",void 0),Xj(this,"plugin",void 0),this.hot=t,this.plugin=e}}class Fa extends NH{static get CSS_CLASSES(){return{indicatorContainer:"ht_nestingLevels",parent:"ht_nestingParent",indicator:"ht_nestingLevel",emptyIndicator:"ht_nestingLevel_empty",button:"ht_nestingButton",expandButton:"ht_nestingExpand",collapseButton:"ht_nestingCollapse"}}constructor(e,t){super(e,t),this.dataManager=this.plugin.dataManager,this.collapsingUI=this.plugin.collapsingUI,this.rowHeaderWidthCache=null}appendLevelIndicators(e,t){const i=this.hot.toPhysicalRow(e),r=this.dataManager.getRowLevel(i),s=this.dataManager.getDataObject(i),o=t.getElementsByTagName("DIV")[0],a=o.querySelector("span.rowHeader"),l=o.querySelectorAll('[class^="ht_nesting"]'),c=this.hot.getSettings().ariaTags;if(q(l,u=>{u&&o.removeChild(u)}),ge(t,Fa.CSS_CLASSES.indicatorContainer),r){const{rootDocument:u}=this.hot,h=a.cloneNode(!0);o.innerHTML="",$e(0,r-1,()=>{const d=u.createElement("SPAN");ge(d,Fa.CSS_CLASSES.emptyIndicator),o.appendChild(d)}),o.appendChild(h)}if(this.dataManager.hasChildren(s)){const u=this.hot.rootDocument.createElement("DIV");c&&ze(u,[If()]),ge(t,Fa.CSS_CLASSES.parent),this.collapsingUI.areChildrenCollapsed(i)?(ge(u,`${Fa.CSS_CLASSES.button} ${Fa.CSS_CLASSES.expandButton}`),c&&ze(t,[io(!1)])):(ge(u,`${Fa.CSS_CLASSES.button} ${Fa.CSS_CLASSES.collapseButton}`),c&&ze(t,[io(!0)])),o.appendChild(u)}}updateRowHeaderWidth(e){let t=e;t||(t=this.dataManager.cache.levelCount),this.rowHeaderWidthCache=Math.max(50,11+10*t+25),this.hot.render()}}class Bje extends NH{constructor(e,t){var i;super(e,t),i=this,this.dataManager=this.plugin.dataManager,this.collapsedRows=[],this.collapsedRowsStash={stash:function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;i.lastCollapsedRows=i.collapsedRows.slice(0),i.expandMultipleChildren(i.lastCollapsedRows,r)},shiftStash:function(r,s){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;s==null&&(s=1/0),q(i.lastCollapsedRows,(a,l)=>{a>=r&&a<s&&(i.lastCollapsedRows[l]=a+o)})},applyStash:function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;i.collapseMultipleChildren(i.lastCollapsedRows,r),i.lastCollapsedRows=void 0},trimStash:(r,s)=>{$e(r,r+s-1,o=>{const a=this.lastCollapsedRows.indexOf(o);a>-1&&this.lastCollapsedRows.splice(a,1)})}}}collapseChildren(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const r=[];let s=null,o=null,a=null;return isNaN(e)?(s=e,o=this.dataManager.getRowIndex(s)):(s=this.dataManager.getDataObject(e),o=e),this.dataManager.hasChildren(s)&&q(s.__children,l=>{r.push(this.dataManager.getRowIndex(l))}),a=this.collapseRows(r,!0,!1),i&&this.trimRows(a),t&&this.renderAndAdjust(),this.collapsedRows.indexOf(o)===-1&&this.collapsedRows.push(o),a}collapseMultipleChildren(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const r=[];q(e,s=>{r.push(...this.collapseChildren(s,!1,!1))}),i&&this.trimRows(r),t&&this.renderAndAdjust()}collapseRow(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.collapseRows([e],t)}collapseRows(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const r=[];return q(e,s=>{r.push(s),t&&this.collapseChildRows(s,r)}),i&&this.trimRows(r),r}collapseChildRows(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(this.dataManager.hasChildren(e)){const r=this.dataManager.getDataObject(e);q(r.__children,s=>{const o=this.dataManager.getRowIndex(s);t.push(o),this.collapseChildRows(o,t)})}i&&this.trimRows(t)}expandRow(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.expandRows([e],t)}expandRows(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const r=[];return q(e,s=>{r.push(s),t&&this.expandChildRows(s,r)}),i&&this.untrimRows(r),r}expandChildRows(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(this.dataManager.hasChildren(e)){const r=this.dataManager.getDataObject(e);q(r.__children,s=>{if(!this.isAnyParentCollapsed(s)){const o=this.dataManager.getRowIndex(s);t.push(o),this.expandChildRows(o,t)}})}i&&this.untrimRows(t)}expandChildren(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const r=[];let s=null,o=null,a=null;return isNaN(e)?(s=e,o=this.dataManager.getRowIndex(e)):(s=this.dataManager.getDataObject(e),o=e),this.collapsedRows.splice(this.collapsedRows.indexOf(o),1),this.dataManager.hasChildren(s)&&q(s.__children,l=>{const c=this.dataManager.getRowIndex(l);r.push(c)}),a=this.expandRows(r,!0,!1),i&&this.untrimRows(a),t&&this.renderAndAdjust(),a}expandMultipleChildren(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const r=[];q(e,s=>{r.push(...this.expandChildren(s,!1,!1))}),i&&this.untrimRows(r),t&&this.renderAndAdjust()}collapseAll(){const e=this.dataManager.getData(),t=[];q(e,i=>{this.dataManager.hasChildren(i)&&t.push(i)}),this.collapseMultipleChildren(t),this.renderAndAdjust()}expandAll(){const e=this.dataManager.getData(),t=[];q(e,i=>{this.dataManager.hasChildren(i)&&t.push(i)}),this.expandMultipleChildren(t),this.renderAndAdjust()}trimRows(e){this.hot.batchExecution(()=>{q(e,t=>{this.plugin.collapsedRowsMap.setValueAtIndex(t,!0)})},!0)}untrimRows(e){this.hot.batchExecution(()=>{q(e,t=>{this.plugin.collapsedRowsMap.setValueAtIndex(t,!1)})},!0)}areChildrenCollapsed(e){let t=isNaN(e)?e:this.dataManager.getDataObject(e),i=!0;return t===null&&(t={__children:this.dataManager.data}),this.dataManager.hasChildren(t)&&q(t.__children,r=>{const s=this.dataManager.getRowIndex(r);if(!this.plugin.collapsedRowsMap.getValueAtIndex(s))return i=!1,!1}),i}isAnyParentCollapsed(e){let t=e;for(;t!==null;){t=this.dataManager.getRowParent(t);const i=this.dataManager.getRowIndex(t);if(this.collapsedRows.indexOf(i)>-1)return!0}return!1}toggleState(e,t){if(t.col>=0)return;const i=this.translateTrimmedRow(t.row);Ue(e.target,Fa.CSS_CLASSES.button)&&(this.areChildrenCollapsed(i)?this.expandChildren(i):this.collapseChildren(i),bo(e))}translateTrimmedRow(e){return this.hot.toPhysicalRow(e)}untranslateTrimmedRow(e){return this.hot.toVisualRow(e)}renderAndAdjust(){this.hot.render(),this.hot.view.adjustElementsSize()}}function Vje(n,e,t){Wje(n,e),e.set(n,t)}function Wje(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function jje(n,e,t){return(e=zje(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function zje(n){var e=Uje(n,"string");return typeof e=="symbol"?e:e+""}function Uje(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Gje(n,e){return n.get(Yje(n,e))}function Yje(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var Zj=new WeakMap;class Kje extends NH{constructor(){super(...arguments),jje(this,"dataManager",this.plugin.dataManager),Vje(this,Zj,{row_above:(e,t)=>{const i=t[t.length-1];this.dataManager.addSibling(i.start.row,"above")},row_below:(e,t)=>{const i=t[t.length-1];this.dataManager.addSibling(i.start.row,"below")}})}appendOptions(e){const t=[{key:"add_child",name(){return this.getTranslatedPhrase(dN)},callback:()=>{const i=this.dataManager.translateTrimmedRow(this.hot.getSelectedLast()[0]),r=this.dataManager.getDataObject(i);this.dataManager.addChild(r)},disabled:()=>{const i=this.hot.getSelectedLast();return!i||i[0]<0||this.hot.selection.isSelectedByColumnHeader()||this.hot.countRows()>=this.hot.getSettings().maxRows}},{key:"detach_from_parent",name(){return this.getTranslatedPhrase(fN)},callback:()=>{this.dataManager.detachFromParent(this.hot.getSelectedLast())},disabled:()=>{const i=this.hot.getSelectedLast(),r=this.dataManager.translateTrimmedRow(i[0]);return!this.dataManager.getRowParent(r)||!i||i[0]<0||this.hot.selection.isSelectedByColumnHeader()||this.hot.countRows()>=this.hot.getSettings().maxRows}},{name:"---------"}];return $e(0,e.items.length-1,i=>{if(i===0)return q(t,(r,s)=>{e.items.splice(i+s,0,r)}),!1}),this.modifyRowInsertingOptions(e)}modifyRowInsertingOptions(e){return $e(0,e.items.length-1,t=>{const i=Gje(Zj,this)[e.items[t].key];i!=null&&(e.items[t].callback=i)}),e}}function tS(n,e,t){return(e=qje(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function qje(n){var e=Xje(n,"string");return typeof e=="symbol"?e:e+""}function Xje(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class Zje{constructor(e){tS(this,"plugin",void 0),tS(this,"hot",void 0),tS(this,"dataManager",void 0),tS(this,"collapsingUI",void 0),this.plugin=e,this.hot=e.hot,this.dataManager=e.dataManager,this.collapsingUI=e.collapsingUI}onBeforeRowMove(e,t,i,r){if(this.displayAPICompatibilityWarning({rows:e,finalIndex:t,dropIndex:i,movePossible:r}))return!1;this.movedToCollapsed=!1;const o=i===this.hot.countRows(),a=o?this.hot.countSourceRows():this.dataManager.translateTrimmedRow(i);let l=!0;const c=e.map(g=>{if(!l)return!1;const p=this.dataManager.translateTrimmedRow(g);return l=this.shouldAllowMoving(p,a),p}),u=c.indexOf(a)===-1;if(!l||!u)return!1;const h=this.getBaseParent(c),d=this.getTargetParent(o,a),f=h===d;return this.movedToCollapsed=this.collapsingUI.areChildrenCollapsed(d),this.collapsingUI.collapsedRowsStash.stash(),this.shiftCollapsibleParentsLocations(c,a,f),this.moveRows(c,a,d),this.dataManager.rewriteCache(),this.moveCellsMeta(c,a),this.collapsingUI.collapsedRowsStash.applyStash(!1),this.hot.runHooks("afterRowMove",e,t,i,r,r&&this.isRowOrderChanged(e,t)),this.hot.render(),this.selectCells(e,i),!1}displayAPICompatibilityWarning(e){const{rows:t,finalIndex:i,dropIndex:r,movePossible:s}=e;let o=!1;return fn(r)&&(Yt(Kt`Since version 8.0.0 of the Handsontable the 'moveRows' method isn't used for moving rows\x20
      when the NestedRows plugin is enabled. Please use the 'dragRows' method instead.`),this.hot.runHooks("afterRowMove",t,i,r,s,!1),o=!0),o}shouldAllowMoving(e,t){return!(this.dataManager.isParent(e)||this.dataManager.isRowHighestLevel(e)||e===t||t===0)}getBaseParent(e){return this.dataManager.getRowParent(e[0])}getTargetParent(e,t){let i=this.dataManager.getRowParent(e?t-1:t);return i==null&&(i=this.dataManager.getRowParent(t-1)),i}shiftCollapsibleParentsLocations(e,t,i){i||(Math.max(...e)<=t?this.collapsingUI.collapsedRowsStash.shiftStash(e[0],t,-1*e.length):this.collapsingUI.collapsedRowsStash.shiftStash(t,e[0],e.length))}moveRows(e,t,i){const r=t===this.dataManager.getRowIndex(i)+this.dataManager.countChildren(i)+1;this.hot.batchRender(()=>{e.forEach(s=>{this.dataManager.moveRow(s,t,this.movedToCollapsed,r)})})}moveCellsMeta(e,t){const i=[],r=Math.max(...e)<t;e.forEach(s=>{i.push(this.hot.getCellMetaAtRow(s))}),this.hot.spliceCellsMeta(e[0],e.length),this.hot.spliceCellsMeta(t-(r?i.length:0),0,...i)}selectCells(e,t){const i=e.length;let r=0,s=0,o=null,a=null;if(this.movedToCollapsed){let l=null;e[i-1]<t?l=this.dataManager.translateTrimmedRow(t-i):l=this.dataManager.translateTrimmedRow(t);const c=this.dataManager.getRowParent(l===null?this.hot.countSourceRows()-1:l-1),u=this.dataManager.getRowIndex(c);r=this.dataManager.untranslateTrimmedRow(u),s=r}else e[i-1]<t?(s=t-1,r=s-i+1):(r=t,s=r+i-1);o=this.hot.selection,a=this.hot.countCols()-1,o.setRangeStart(this.hot._createCellCoords(r,0)),o.setRangeEnd(this.hot._createCellCoords(s,a),!0)}isRowOrderChanged(e,t){return e.some((i,r)=>i-r!==t)}}function Qje(n,e){pX(n,e),e.add(n)}function Qj(n,e,t){pX(n,e),e.set(n,t)}function pX(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function aA(n,e,t){return(e=Jje(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Jje(n){var e=e5e(n,"string");return typeof e=="symbol"?e:e+""}function e5e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function YS(n,e){return n.get(_i(n,e))}function WR(n,e,t){return n.set(_i(n,e),t),t}function _i(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const jR="nestedRows",t5e=300,Jj=jR,n5e="The Nested Rows plugin requires an Array of Objects as a dataset to be provided. The plugin has been disabled.";var DE=new WeakMap,xg=new WeakMap,ki=new WeakSet;class i5e extends Ht{constructor(){super(...arguments),Qje(this,ki),aA(this,"dataManager",null),aA(this,"headersUI",null),aA(this,"collapsedRowsMap",null),Qj(this,DE,!1),Qj(this,xg,!1)}static get PLUGIN_KEY(){return jR}static get PLUGIN_PRIORITY(){return t5e}isEnabled(){return!!this.hot.getSettings()[jR]}enablePlugin(){var e=this;this.enabled||(this.collapsedRowsMap=this.hot.rowIndexMapper.registerMap("nestedRows",new _y),this.dataManager=new Hje(this,this.hot),this.collapsingUI=new Bje(this,this.hot),this.headersUI=new Fa(this,this.hot),this.contextMenuUI=new Kje(this,this.hot),this.rowMoveController=new Zje(this),this.addHook("afterInit",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return _i(ki,e,b5e).call(e,...i)}),this.addHook("beforeViewRender",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return _i(ki,e,v5e).call(e,...i)}),this.addHook("modifyRowData",function(){return e.onModifyRowData(...arguments)}),this.addHook("modifySourceLength",function(){return e.onModifySourceLength(...arguments)}),this.addHook("beforeDataSplice",function(){return e.onBeforeDataSplice(...arguments)}),this.addHook("filterData",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return _i(ki,e,o5e).call(e,...i)}),this.addHook("afterContextMenuDefaultOptions",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return _i(ki,e,a5e).call(e,...i)}),this.addHook("afterGetRowHeader",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return _i(ki,e,l5e).call(e,...i)}),this.addHook("beforeOnCellMouseDown",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return _i(ki,e,s5e).call(e,...i)}),this.addHook("beforeRemoveRow",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return _i(ki,e,h5e).call(e,...i)}),this.addHook("afterRemoveRow",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return _i(ki,e,u5e).call(e,...i)}),this.addHook("beforeAddChild",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return _i(ki,e,d5e).call(e,...i)}),this.addHook("afterAddChild",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return _i(ki,e,f5e).call(e,...i)}),this.addHook("beforeDetachChild",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return _i(ki,e,g5e).call(e,...i)}),this.addHook("afterDetachChild",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return _i(ki,e,p5e).call(e,...i)}),this.addHook("modifyRowHeaderWidth",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return _i(ki,e,c5e).call(e,...i)}),this.addHook("afterCreateRow",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return _i(ki,e,m5e).call(e,...i)}),this.addHook("beforeRowMove",function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return _i(ki,e,r5e).call(e,...i)}),this.addHook("beforeLoadData",t=>_i(ki,this,e5).call(this,t)),this.addHook("beforeUpdateData",t=>_i(ki,this,e5).call(this,t)),this.registerShortcuts(),super.enablePlugin())}disablePlugin(){this.hot.rowIndexMapper.unregisterMap("nestedRows"),this.unregisterShortcuts(),super.disablePlugin()}updatePlugin(){this.disablePlugin();const e=this.dataManager.getData();this.enablePlugin(),this.dataManager.updateWithData(e),super.updatePlugin()}registerShortcuts(){this.hot.getShortcutManager().getContext("grid").addShortcut({keys:[["Enter"]],callback:()=>{const{highlight:e}=this.hot.getSelectedRangeLast(),t=this.collapsingUI.translateTrimmedRow(e.row);return this.collapsingUI.areChildrenCollapsed(t)?this.collapsingUI.expandChildren(t):this.collapsingUI.collapseChildren(t),!1},runOnlyIf:()=>{var e,t;const i=(e=this.hot.getSelectedRangeLast())===null||e===void 0?void 0:e.highlight;return i&&((t=this.hot.getSelectedRangeLast())===null||t===void 0?void 0:t.isSingle())&&this.hot.selection.isCellVisible(i)&&i.col===-1&&i.row>=0},group:Jj,relativeToGroup:uh,position:"before"})}unregisterShortcuts(){this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup(Jj)}disableCoreAPIModifiers(){WR(xg,this,!0)}enableCoreAPIModifiers(){WR(xg,this,!1)}onModifyRowData(e){if(!YS(xg,this))return this.dataManager.getDataObject(e)}onModifySourceLength(){if(!YS(xg,this))return this.dataManager.countAllRows()}onBeforeDataSplice(e,t,i){return YS(xg,this)||this.dataManager.isRowHighestLevel(e)?!0:(this.dataManager.spliceData(e,t,i),!1)}destroy(){super.destroy()}}function r5e(n,e,t,i){return this.rowMoveController.onBeforeRowMove(n,e,t,i)}function s5e(n,e,t){this.collapsingUI.toggleState(n,e,t)}function o5e(n,e,t){return this.collapsingUI.collapsedRowsStash.stash(),this.collapsingUI.collapsedRowsStash.trimStash(t[0],e),this.collapsingUI.collapsedRowsStash.shiftStash(t[0],null,-1*e),this.dataManager.filterData(n,e,t),WR(DE,this,!0),this.dataManager.getData().slice()}function a5e(n){return this.contextMenuUI.appendOptions(n)}function l5e(n,e){this.headersUI.appendLevelIndicators(n,e)}function c5e(n){return Math.max(this.headersUI.rowHeaderWidthCache,n)}function u5e(n,e,t,i){i!==this.pluginName&&this.hot._registerTimeout(()=>{WR(DE,this,!1),this.headersUI.updateRowHeaderWidth(),this.collapsingUI.collapsedRowsStash.applyStash()})}function h5e(n,e,t){const i=Array.from(t.reduce((r,s)=>{if(this.dataManager.isParent(s)){const o=this.dataManager.getDataObject(s).__children;return r.add(s),Array.isArray(o)&&o.forEach(a=>r.add(this.dataManager.getRowIndex(a))),r}return r.add(s)},new Set));t.length=0,t.push(...i)}function d5e(){this.collapsingUI.collapsedRowsStash.stash()}function f5e(n,e){this.collapsingUI.collapsedRowsStash.shiftStash(this.dataManager.getRowIndex(e)),this.collapsingUI.collapsedRowsStash.applyStash(),this.headersUI.updateRowHeaderWidth()}function g5e(){this.collapsingUI.collapsedRowsStash.stash()}function p5e(n,e,t){this.collapsingUI.collapsedRowsStash.shiftStash(t,null,-1),this.collapsingUI.collapsedRowsStash.applyStash(),this.headersUI.updateRowHeaderWidth()}function m5e(){this.dataManager.rewriteCache()}function b5e(){this.headersUI.updateRowHeaderWidth()}function v5e(n,e){YS(DE,this)&&(e.skipRender=!0)}function e5(n){if(!FY(n)){iL(n5e),this.hot.getSettings()[jR]=!1,this.disablePlugin();return}this.dataManager.setData(n),this.dataManager.rewriteCache()}function lA(n,e,t){return(e=w5e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function w5e(n){var e=y5e(n,"string");return typeof e=="symbol"?e:e+""}function y5e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class C5e{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:window;lA(this,"rootWindow",void 0),lA(this,"prefix",void 0),lA(this,"savedKeys",[]),this.rootWindow=t,this.prefix=e,this.loadSavedKeys()}saveValue(e,t){this.rootWindow.localStorage.setItem(`${this.prefix}_${e}`,JSON.stringify(t)),this.savedKeys.indexOf(e)===-1&&(this.savedKeys.push(e),this.saveSavedKeys())}loadValue(e,t){const i=typeof e>"u"?t:e,r=this.rootWindow.localStorage.getItem(`${this.prefix}_${i}`);return r===null?void 0:JSON.parse(r)}reset(e){this.rootWindow.localStorage.removeItem(`${this.prefix}_${e}`)}resetAll(){q(this.savedKeys,(e,t)=>{this.rootWindow.localStorage.removeItem(`${this.prefix}_${this.savedKeys[t]}`)}),this.clearSavedKeys()}loadSavedKeys(){const e=this.rootWindow.localStorage.getItem(`${this.prefix}__persistentStateKeys`),t=typeof e=="string"?JSON.parse(e):void 0;this.savedKeys=t||[]}saveSavedKeys(){this.rootWindow.localStorage.setItem(`${this.prefix}__persistentStateKeys`,JSON.stringify(this.savedKeys))}clearSavedKeys(){this.savedKeys.length=0,this.saveSavedKeys()}}function S5e(n,e,t){return(e=_5e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function _5e(n){var e=R5e(n,"string");return typeof e=="symbol"?e:e+""}function R5e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}Oe.getSingleton().register("persistentStateSave");Oe.getSingleton().register("persistentStateLoad");Oe.getSingleton().register("persistentStateReset");const t5="persistentState",E5e=0;class x5e extends Ht{constructor(){super(...arguments),S5e(this,"storage",void 0)}static get PLUGIN_KEY(){return t5}static get PLUGIN_PRIORITY(){return E5e}isEnabled(){return!!this.hot.getSettings()[t5]}enablePlugin(){this.enabled||(this.storage||(this.storage=new C5e(this.hot.rootElement.id,this.hot.rootWindow)),this.addHook("persistentStateSave",(e,t)=>this.saveValue(e,t)),this.addHook("persistentStateLoad",(e,t)=>this.loadValue(e,t)),this.addHook("persistentStateReset",()=>this.resetValue()),super.enablePlugin())}disablePlugin(){this.storage=void 0,super.disablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}loadValue(e,t){t.value=this.storage.loadValue(e)}saveValue(e,t){this.storage.saveValue(e,t)}resetValue(e){typeof e>"u"?this.storage.resetAll():this.storage.reset(e)}destroy(){super.destroy()}}function T5e(n,e){M5e(n,e),e.add(n)}function M5e(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function cA(n,e,t){return(e=A5e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function A5e(n){var e=P5e(n,"string");return typeof e=="symbol"?e:e+""}function P5e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function n5(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const uA="search",I5e=190,O5e="htSearchResult",k5e=function(n,e,t,i,r){n.getCellMeta(e,t).isSearchResult=r},D5e=function(n,e,t){return fn(n)||n===null||!n.toLocaleLowerCase||n.length===0||fn(e)||e===null?!1:e.toString().toLocaleLowerCase(t.locale).indexOf(n.toLocaleLowerCase(t.locale))!==-1};var hA=new WeakSet;class L5e extends Ht{constructor(){super(...arguments),T5e(this,hA),cA(this,"callback",k5e),cA(this,"queryMethod",D5e),cA(this,"searchResultClass",O5e)}static get PLUGIN_KEY(){return uA}static get PLUGIN_PRIORITY(){return I5e}isEnabled(){return this.hot.getSettings()[uA]}enablePlugin(){var e=this;if(this.enabled)return;const t=this.hot.getSettings()[uA];this.updatePluginSettings(t),this.addHook("beforeRenderer",function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return n5(hA,e,i5).call(e,...r)}),super.enablePlugin()}disablePlugin(){var e=this;const t=function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return n5(hA,e,i5).call(e,...r)};this.hot.addHook("beforeRenderer",t),this.hot.addHookOnce("afterViewRender",()=>{this.hot.removeHook("beforeRenderer",t)}),super.disablePlugin()}updatePlugin(){this.disablePlugin(),this.enablePlugin(),super.updatePlugin()}query(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getCallback(),i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.getQueryMethod();const r=this.hot.countRows(),s=this.hot.countCols(),o=[],a=this.hot;return $e(0,r-1,l=>{$e(0,s-1,c=>{const u=this.hot.getDataAtCell(l,c),h=this.hot.getCellMeta(l,c),d=h.search.callback||t,g=(h.search.queryMethod||i)(e,u,h);if(g){const p={row:l,col:c,data:u};o.push(p)}d&&d(a,l,c,u,g)})}),o}getCallback(){return this.callback}setCallback(e){this.callback=e}getQueryMethod(){return this.queryMethod}setQueryMethod(e){this.queryMethod=e}getSearchResultClass(){return this.searchResultClass}setSearchResultClass(e){this.searchResultClass=e}updatePluginSettings(e){ct(e)&&(e.searchResultClass&&this.setSearchResultClass(e.searchResultClass),e.queryMethod&&this.setQueryMethod(e.queryMethod),e.callback&&this.setCallback(e.callback))}destroy(){super.destroy()}}function i5(n,e,t,i,r,s){const o=s.className||[];let a=[];typeof o=="string"?a=o.split(" "):a.push(...o),this.isEnabled()&&s.isSearchResult?a.includes(this.searchResultClass)||a.push(`${this.searchResultClass}`):a.includes(this.searchResultClass)&&a.splice(a.indexOf(this.searchResultClass),1),s.className=a.join(" ")}function N5e(n,e){H5e(n,e),e.add(n)}function H5e(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function nS(n,e,t){return(e=$5e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function $5e(n){var e=F5e(n,"string");return typeof e=="symbol"?e:e+""}function F5e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function dA(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const B5e="touchScroll",V5e=200;var iS=new WeakSet;class W5e extends Ht{constructor(){super(...arguments),N5e(this,iS),nS(this,"scrollbars",[]),nS(this,"clones",[]),nS(this,"lockedCollection",!1),nS(this,"freezeOverlays",!1)}static get PLUGIN_KEY(){return B5e}static get PLUGIN_PRIORITY(){return V5e}static get SETTING_KEYS(){return!0}isEnabled(){return XD()}enablePlugin(){this.enabled||(this.addHook("afterViewRender",()=>dA(iS,this,j5e).call(this)),this.registerEvents(),super.enablePlugin())}updatePlugin(){this.lockedCollection=!1,super.updatePlugin()}disablePlugin(){super.disablePlugin()}registerEvents(){this.addHook("beforeTouchScroll",()=>dA(iS,this,z5e).call(this)),this.addHook("afterMomentumScroll",()=>dA(iS,this,U5e).call(this))}}function j5e(){if(this.lockedCollection)return;const{topOverlay:n,bottomOverlay:e,inlineStartOverlay:t,topInlineStartCornerOverlay:i,bottomInlineStartCornerOverlay:r}=this.hot.view._wt.wtOverlays;this.lockedCollection=!0,this.scrollbars.length=0,this.scrollbars.push(n),e.clone&&this.scrollbars.push(e),this.scrollbars.push(t),i&&this.scrollbars.push(i),r&&r.clone&&this.scrollbars.push(r),this.clones=[],n.needFullRender&&this.clones.push(n.clone.wtTable.holder.parentNode),e.needFullRender&&this.clones.push(e.clone.wtTable.holder.parentNode),t.needFullRender&&this.clones.push(t.clone.wtTable.holder.parentNode),i&&this.clones.push(i.clone.wtTable.holder.parentNode),r&&r.clone&&this.clones.push(r.clone.wtTable.holder.parentNode)}function z5e(){this.freezeOverlays=!0,q(this.clones,n=>{ge(n,"hide-tween")})}function U5e(){this.freezeOverlays=!1,q(this.clones,n=>{Qe(n,"hide-tween"),ge(n,"show-tween")}),this.hot._registerTimeout(()=>{q(this.clones,n=>{Qe(n,"show-tween")})},400),q(this.scrollbars,n=>{n.refresh(),n.resetFixedPosition()}),this.hot.view._wt.wtOverlays.syncScrollWithMaster()}function G5e(n,e){Y5e(n,e),e.add(n)}function Y5e(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function K5e(n,e,t){return(e=q5e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function q5e(n){var e=X5e(n,"string");return typeof e=="symbol"?e:e+""}function X5e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Z5e(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}const KS="trimRows",Q5e=330;var r5=new WeakSet;class J5e extends Ht{constructor(){super(...arguments),G5e(this,r5),K5e(this,"trimmedRowsMap",null)}static get PLUGIN_KEY(){return KS}static get PLUGIN_PRIORITY(){return Q5e}isEnabled(){return!!this.hot.getSettings()[KS]}enablePlugin(){this.enabled||(this.trimmedRowsMap=this.hot.rowIndexMapper.registerMap("trimRows",new _y),this.trimmedRowsMap.addLocalHook("init",()=>Z5e(r5,this,e6e).call(this)),super.enablePlugin())}updatePlugin(){const e=this.hot.getSettings()[KS];Array.isArray(e)&&this.hot.batchExecution(()=>{this.trimmedRowsMap.clear(),q(e,t=>{this.trimmedRowsMap.setValueAtIndex(t,!0)})},!0),super.updatePlugin()}disablePlugin(){this.hot.rowIndexMapper.unregisterMap("trimRows"),super.disablePlugin()}getTrimmedRows(){return this.trimmedRowsMap.getTrimmedIndexes()}trimRows(e){const t=this.getTrimmedRows(),i=this.isValidConfig(e);let r=t;i&&(r=Array.from(new Set(t.concat(e)))),this.hot.runHooks("beforeTrimRow",t,r,i)!==!1&&(i&&this.hot.batchExecution(()=>{q(e,o=>{this.trimmedRowsMap.setValueAtIndex(o,!0)})},!0),this.hot.runHooks("afterTrimRow",t,r,i,i&&r.length>t.length))}trimRow(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.trimRows(t)}untrimRows(e){const t=this.getTrimmedRows(),i=this.isValidConfig(e);let r=t;const s=this.trimmedRowsMap.getValues().slice(),o=e.length>0;i&&o&&(q(e,l=>{s[l]=!1}),r=ci(s,(l,c,u)=>(c&&l.push(u),l),[])),this.hot.runHooks("beforeUntrimRow",t,r,i&&o)!==!1&&(i&&o&&this.trimmedRowsMap.setValues(s),this.hot.runHooks("afterUntrimRow",t,r,i&&o,i&&r.length<t.length))}untrimRow(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.untrimRows(t)}isTrimmed(e){return this.trimmedRowsMap.getValueAtIndex(e)||!1}untrimAll(){this.untrimRows(this.getTrimmedRows())}isValidConfig(e){const t=this.hot.countSourceRows();return e.every(i=>Number.isInteger(i)&&i>=0&&i<t)}destroy(){super.destroy()}}function e6e(){const n=this.hot.getSettings()[KS];Array.isArray(n)&&this.hot.batchExecution(()=>{q(n,e=>{this.trimmedRowsMap.setValueAtIndex(e,!0)})},!0)}var mX={},t6e=ah,n6e=mX,i6e=t6e("iterator"),r6e=Array.prototype,s6e=function(n){return n!==void 0&&(n6e.Array===n||r6e[i6e]===n)},o6e=Z7,s5=L1,a6e=P1,l6e=mX,c6e=ah,u6e=c6e("iterator"),bX=function(n){if(!a6e(n))return s5(n,u6e)||s5(n,"@@iterator")||l6e[o6e(n)]},h6e=ca,d6e=iy,f6e=$c,g6e=D1,p6e=bX,m6e=TypeError,b6e=function(n,e){var t=arguments.length<2?p6e(n):e;if(d6e(t))return f6e(h6e(t,n));throw new m6e(g6e(n)+" is not iterable")},v6e=fG,w6e=ca,y6e=$c,C6e=D1,S6e=s6e,_6e=ay,o5=O1,R6e=b6e,E6e=bX,a5=cD,x6e=TypeError,qS=function(n,e){this.stopped=n,this.result=e},l5=qS.prototype,T6e=function(n,e,t){var i=t&&t.that,r=!!(t&&t.AS_ENTRIES),s=!!(t&&t.IS_RECORD),o=!!(t&&t.IS_ITERATOR),a=!!(t&&t.INTERRUPTED),l=v6e(e,i),c,u,h,d,f,g,p,m=function(y){return c&&a5(c,"normal",y),new qS(!0,y)},v=function(y){return r?(y6e(y),a?l(y[0],y[1],m):l(y[0],y[1])):a?l(y,m):l(y)};if(s)c=n.iterator;else if(o)c=n;else{if(u=E6e(n),!u)throw new x6e(C6e(n)+" is not iterable");if(S6e(u)){for(h=0,d=_6e(n);d>h;h++)if(f=v(n[h]),f&&o5(l5,f))return f;return new qS(!1)}c=R6e(n,u)}for(g=s?n.next:c.next;!(p=w6e(g,c)).done;){try{f=v(p.value)}catch(y){a5(c,"throw",y)}if(typeof f=="object"&&f&&o5(l5,f))return f}return new qS(!1)},M6e=la,A6e=lh,P6e=A1,I6e=function(n,e,t){M6e?A6e.f(n,e,P6e(0,t)):n[e]=t},O6e=qi,k6e=T6e,D6e=I6e;O6e({target:"Object",stat:!0},{fromEntries:function(e){var t={};return k6e(e,function(i,r){D6e(t,i,r)},{AS_ENTRIES:!0}),t}});const vX="undoRedo",L6e="undoRedo";function Re(n){const e=this;this.instance=n,this.doneActions=[],this.undoneActions=[],this.ignoreNewActions=!1,this.enabled=!1,n.addHook("afterChange",function(i,r){const s=i&&i.length;if(!s||!i.find(l=>{const[,,c,u]=l;return c!==u}))return;const a=()=>{const l=i.reduce((u,h)=>(u.push([...h]),u),[]);q(l,u=>{u[1]=n.propToCol(u[1])});const c=s>1?this.getSelected():[[l[0][0],l[0][1]]];return new Re.ChangeAction(l,c)};e.done(a,r)}),n.addHook("afterCreateRow",(i,r,s)=>{e.done(()=>new Re.CreateRowAction(i,r),s)});const t=(i,r,s,o)=>{const a=["visualRow","visualCol","row","col","prop"],l=a.length,c=[];return $e(s,o,u=>{$e(i,r,h=>{const d=n.getCellMeta(h,u);if(Object.keys(d).length!==l){const f=Object.fromEntries(Object.entries(d).filter(g=>{let[p]=g;return a.includes(p)===!1}));c.push([d.visualRow,d.visualCol,f])}})}),c};n.addHook("beforeRemoveRow",(i,r,s,o)=>{const a=()=>{const l=n.toPhysicalRow(i),c=l+r-1,u=mr(e.instance.getSourceData(l,0,l+r-1,e.instance.countSourceCols()-1));return new Re.RemoveRowAction(l,u,n.getSettings().fixedRowsBottom,n.getSettings().fixedRowsTop,n.rowIndexMapper.getIndexesSequence(),t(l,c,0,n.countCols()-1))};e.done(a,o)}),n.addHook("afterCreateCol",(i,r,s)=>{e.done(()=>new Re.CreateColumnAction(i,r),s)}),n.addHook("beforeRemoveCol",(i,r,s,o)=>{const a=()=>{const l=e.instance.getSourceDataArray(),c=(e.instance.countCols()+i)%e.instance.countCols(),u=c+r-1,h=[],d=[],f=[];$e(l.length-1,m=>{const v=[],y=l[m];$e(c,u,w=>{v.push(y[n.toPhysicalColumn(w)])}),h.push(v)}),$e(r-1,m=>{f.push(n.toPhysicalColumn(c+m))}),Array.isArray(n.getSettings().colHeaders)&&$e(r-1,m=>{d.push(n.getSettings().colHeaders[n.toPhysicalColumn(c+m)]||null)});const g=n.columnIndexMapper.getIndexesSequence(),p=n.rowIndexMapper.getIndexesSequence();return new Re.RemoveColumnAction(c,f,h,d,g,p,n.getSettings().fixedColumnsStart,t(0,n.countRows(),c,u))};e.done(a,o)}),n.addHook("beforeCellAlignment",(i,r,s,o)=>{e.done(()=>new Re.CellAlignmentAction(i,r,s,o))}),n.addHook("beforeFilter",(i,r)=>{e.done(()=>new Re.FiltersAction(i,r))}),n.addHook("beforeRowMove",(i,r)=>{i!==!1&&e.done(()=>new Re.RowMoveAction(i,r))}),n.addHook("beforeColumnMove",(i,r)=>{i!==!1&&e.done(()=>new Re.ColumnMoveAction(i,r))}),n.addHook("beforeMergeCells",(i,r)=>{r||e.done(()=>new Re.MergeCellsAction(n,i))}),n.addHook("afterUnmergeCells",(i,r)=>{r||e.done(()=>new Re.UnmergeCellsAction(n,i))}),n.addHook("beforeColumnSort",(i,r,s)=>{s&&e.done(()=>new Re.ColumnSortAction(i,r))}),n.addHook("afterInit",()=>{e.init()})}Re.prototype.done=function(n,e){if(this.ignoreNewActions||e==="UndoRedo.undo"||e==="UndoRedo.redo"||e==="auto")return;const i=this.doneActions.slice();if(this.instance.runHooks("beforeUndoStackChange",i,e)===!1)return;const s=n(),o=this.undoneActions.slice();this.doneActions.push(s),this.instance.runHooks("afterUndoStackChange",i,this.doneActions.slice()),this.instance.runHooks("beforeRedoStackChange",o),this.undoneActions.length=0,this.instance.runHooks("afterRedoStackChange",o,this.undoneActions.slice())};Re.prototype.undo=function(){if(this.isUndoAvailable()){const n=this.doneActions.slice();this.instance.runHooks("beforeUndoStackChange",n);const e=this.doneActions.pop();this.instance.runHooks("afterUndoStackChange",n,this.doneActions.slice());const t=mr(e);if(this.instance.runHooks("beforeUndo",t)===!1)return;this.ignoreNewActions=!0;const r=this,s=this.undoneActions.slice();this.instance.runHooks("beforeRedoStackChange",s),e.undo(this.instance,()=>{r.ignoreNewActions=!1,r.undoneActions.push(e)}),this.instance.runHooks("afterRedoStackChange",s,this.undoneActions.slice()),this.instance.runHooks("afterUndo",t)}};Re.prototype.redo=function(){if(this.isRedoAvailable()){const n=this.undoneActions.slice();this.instance.runHooks("beforeRedoStackChange",n);const e=this.undoneActions.pop();this.instance.runHooks("afterRedoStackChange",n,this.undoneActions.slice());const t=mr(e);if(this.instance.runHooks("beforeRedo",t)===!1)return;this.ignoreNewActions=!0;const r=this,s=this.doneActions.slice();this.instance.runHooks("beforeUndoStackChange",s),e.redo(this.instance,()=>{r.ignoreNewActions=!1,r.doneActions.push(e)}),this.instance.runHooks("afterUndoStackChange",s,this.doneActions.slice()),this.instance.runHooks("afterRedo",t)}};Re.prototype.isUndoAvailable=function(){return this.doneActions.length>0};Re.prototype.isRedoAvailable=function(){return this.undoneActions.length>0};Re.prototype.clear=function(){this.doneActions.length=0,this.undoneActions.length=0};Re.prototype.isEnabled=function(){return this.enabled};Re.prototype.enable=function(){if(this.isEnabled())return;const n=this.instance;this.enabled=!0,$6e(n),this.registerShortcuts(),n.addHook("afterChange",wX)};Re.prototype.disable=function(){if(!this.isEnabled())return;const n=this.instance;this.enabled=!1,F6e(n),this.unregisterShortcuts(),n.removeHook("afterChange",wX)};Re.prototype.destroy=function(){this.clear(),this.instance=null,this.doneActions=null,this.undoneActions=null};Re.Action=function(){};Re.Action.prototype.undo=function(){};Re.Action.prototype.redo=function(){};Re.ChangeAction=function(n,e){this.changes=n,this.selected=e,this.actionType="change"};ha(Re.ChangeAction,Re.Action);Re.ChangeAction.prototype.undo=function(n,e){const t=mr(this.changes),i=n.countEmptyRows(!0),r=n.countEmptyCols(!0);for(let o=0,a=t.length;o<a;o++)t[o].splice(3,1);n.addHookOnce("afterChange",e),n.setDataAtCell(t,null,null,"UndoRedo.undo");for(let o=0,a=t.length;o<a;o++){const[l,c]=t[o];n.getSettings().minSpareRows&&l+1+n.getSettings().minSpareRows===n.countRows()&&i===n.getSettings().minSpareRows&&(n.alter("remove_row",parseInt(l+1,10),n.getSettings().minSpareRows),n.undoRedo.doneActions.pop()),n.getSettings().minSpareCols&&c+1+n.getSettings().minSpareCols===n.countCols()&&r===n.getSettings().minSpareCols&&(n.alter("remove_col",parseInt(c+1,10),n.getSettings().minSpareCols),n.undoRedo.doneActions.pop())}const s=n.getSelectedLast();if(s!==void 0){const[o,a]=t[0],[l,c]=s,u=n.view.getFirstFullyVisibleRow(),h=n.view.getFirstFullyVisibleColumn(),d=o>=u,f=a>=h;if((d&&f)===!1&&(l!==o||c!==a)===!0){const m={row:o,col:a};d===!1&&(m.verticalSnap="top"),f===!1&&(m.horizontalSnap="start"),n.scrollViewportTo(m)}}n.selectCells(this.selected,!1,!1)};Re.ChangeAction.prototype.redo=function(n,e){const t=mr(this.changes);for(let i=0,r=t.length;i<r;i++)t[i].splice(2,1);n.addHookOnce("afterChange",e),n.setDataAtCell(t,null,null,"UndoRedo.redo"),this.selected&&n.selectCells(this.selected,!1,!1)};Re.CreateRowAction=function(n,e){this.index=n,this.amount=e,this.actionType="insert_row"};ha(Re.CreateRowAction,Re.Action);Re.CreateRowAction.prototype.undo=function(n,e){const t=n.countRows(),i=n.getSettings().minSpareRows;this.index>=t&&this.index-i<t&&(this.index-=i),n.addHookOnce("afterRemoveRow",e),n.alter("remove_row",this.index,this.amount,"UndoRedo.undo")};Re.CreateRowAction.prototype.redo=function(n,e){n.addHookOnce("afterCreateRow",e),n.alter("insert_row_above",this.index,this.amount,"UndoRedo.redo")};Re.RemoveRowAction=function(n,e,t,i,r,s){this.index=n,this.data=e,this.actionType="remove_row",this.fixedRowsBottom=t,this.fixedRowsTop=i,this.rowIndexesSequence=r,this.removedCellMetas=s};ha(Re.RemoveRowAction,Re.Action);Re.RemoveRowAction.prototype.undo=function(n,e){const t=n.getSettings(),i=[];t.fixedRowsBottom=this.fixedRowsBottom,t.fixedRowsTop=this.fixedRowsTop,this.data.forEach((r,s)=>{Object.keys(r).forEach(o=>{const a=parseInt(o,10);i.push([this.index+s,isNaN(a)?o:a,r[o]])})}),n.alter("insert_row_above",this.index,this.data.length,"UndoRedo.undo"),this.removedCellMetas.forEach(r=>{let[s,o,a]=r;n.setCellMetaObject(s,o,a)}),n.addHookOnce("afterViewRender",e),n.setSourceDataAtCell(i,null,null,"UndoRedo.undo"),n.rowIndexMapper.setIndexesSequence(this.rowIndexesSequence)};Re.RemoveRowAction.prototype.redo=function(n,e){n.addHookOnce("afterRemoveRow",e),n.alter("remove_row",this.index,this.data.length,"UndoRedo.redo")};Re.CreateColumnAction=function(n,e){this.index=n,this.amount=e,this.actionType="insert_col"};ha(Re.CreateColumnAction,Re.Action);Re.CreateColumnAction.prototype.undo=function(n,e){n.addHookOnce("afterRemoveCol",e),n.alter("remove_col",this.index,this.amount,"UndoRedo.undo")};Re.CreateColumnAction.prototype.redo=function(n,e){n.addHookOnce("afterCreateCol",e),n.alter("insert_col_start",this.index,this.amount,"UndoRedo.redo")};Re.RemoveColumnAction=function(n,e,t,i,r,s,o,a){this.index=n,this.indexes=e,this.data=t,this.amount=this.data[0].length,this.headers=i,this.columnPositions=r.slice(0),this.rowPositions=s.slice(0),this.actionType="remove_col",this.fixedColumnsStart=o,this.removedCellMetas=a};ha(Re.RemoveColumnAction,Re.Action);Re.RemoveColumnAction.prototype.undo=function(n,e){const t=n.getSettings();t.fixedColumnsStart=this.fixedColumnsStart;const i=this.indexes.slice(0).sort(),r=(c,u,h)=>h[this.indexes.indexOf(i[u])],s=this.data.length,o=[];for(let c=0;c<s;c++)o.push(vt(this.data[c],r));const a=vt(this.headers,r),l=[];n.alter("insert_col_start",this.indexes[0],this.indexes.length,"UndoRedo.undo"),q(n.getSourceDataArray(),(c,u)=>{q(i,(h,d)=>{c[h]=o[u][d],l.push([u,h,c[h]])})}),n.setSourceDataAtCell(l,void 0,void 0,"UndoRedo.undo"),typeof this.headers<"u"&&q(a,(c,u)=>{n.getSettings().colHeaders[i[u]]=c}),this.removedCellMetas.forEach(c=>{let[u,h,d]=c;n.setCellMetaObject(u,h,d)}),n.batchExecution(()=>{n.rowIndexMapper.setIndexesSequence(this.rowPositions),n.columnIndexMapper.setIndexesSequence(this.columnPositions)},!0),n.addHookOnce("afterViewRender",e),n.render()};Re.RemoveColumnAction.prototype.redo=function(n,e){n.addHookOnce("afterRemoveCol",e),n.alter("remove_col",this.index,this.amount,"UndoRedo.redo")};Re.CellAlignmentAction=function(n,e,t,i){this.stateBefore=n,this.range=e,this.type=t,this.alignment=i};Re.CellAlignmentAction.prototype.undo=function(n,e){q(this.range,t=>{t.forAll((i,r)=>{i>=0&&r>=0&&n.setCellMeta(i,r,"className",this.stateBefore[i][r]||" htLeft")})}),n.addHookOnce("afterViewRender",e),n.render()};Re.CellAlignmentAction.prototype.redo=function(n,e){lu(this.range,this.type,this.alignment,(t,i)=>n.getCellMeta(t,i),(t,i,r,s)=>n.setCellMeta(t,i,r,s)),n.addHookOnce("afterViewRender",e),n.render()};Re.FiltersAction=function(n,e){this.previousConditionsStack=e,this.conditionsStack=n,this.actionType="filter"};ha(Re.FiltersAction,Re.Action);Re.FiltersAction.prototype.undo=function(n,e){const t=n.getPlugin("filters");n.addHookOnce("afterViewRender",e),this.previousConditionsStack&&t.conditionCollection.importAllConditions(this.previousConditionsStack),t.filter()};Re.FiltersAction.prototype.redo=function(n,e){const t=n.getPlugin("filters");n.addHookOnce("afterViewRender",e),t.conditionCollection.importAllConditions(this.conditionsStack),t.filter()};class N6e extends Re.Action{constructor(e,t){super(),this.cellRange=t;const i=this.cellRange.getTopStartCorner(),r=this.cellRange.getBottomEndCorner();this.rangeData=e.getData(i.row,i.col,r.row,r.col)}undo(e,t){const i=e.getPlugin("mergeCells");e.addHookOnce("afterViewRender",t),i.unmergeRange(this.cellRange,!0);const r=this.cellRange.getTopStartCorner();e.populateFromArray(r.row,r.col,this.rangeData,void 0,void 0,"MergeCells")}redo(e,t){const i=e.getPlugin("mergeCells");e.addHookOnce("afterViewRender",t),i.mergeRange(this.cellRange)}}Re.MergeCellsAction=N6e;class H6e extends Re.Action{constructor(e,t){super(),this.cellRange=t}undo(e,t){const i=e.getPlugin("mergeCells");e.addHookOnce("afterViewRender",t),i.mergeRange(this.cellRange,!0)}redo(e,t){const i=e.getPlugin("mergeCells");e.addHookOnce("afterViewRender",t),i.unmergeRange(this.cellRange,!0),e.render()}}Re.UnmergeCellsAction=H6e;Re.RowMoveAction=function(n,e){this.rows=n.slice(),this.finalRowIndex=e,this.actionType="row_move"};ha(Re.RowMoveAction,Re.Action);Re.RowMoveAction.prototype.undo=function(n,e){const t=n.getPlugin("manualRowMove");n.addHookOnce("afterViewRender",e),IH(this.rows,this.finalRowIndex,n.rowIndexMapper.getNumberOfIndexes()).reverse().forEach(r=>{let{from:s,to:o}=r;s<o&&(o-=1),t.moveRow(o,s)}),n.render(),n.deselectCell(),n.selectRows(this.rows[0],this.rows[0]+this.rows.length-1)};Re.RowMoveAction.prototype.redo=function(n,e){const t=n.getPlugin("manualRowMove");n.addHookOnce("afterViewRender",e),t.moveRows(this.rows.slice(),this.finalRowIndex),n.render(),n.deselectCell(),n.selectRows(this.finalRowIndex,this.finalRowIndex+this.rows.length-1)};Re.ColumnMoveAction=function(n,e){this.columns=n.slice(),this.finalColumnIndex=e,this.actionType="col_move"};ha(Re.ColumnMoveAction,Re.Action);Re.ColumnMoveAction.prototype.undo=function(n,e){const t=n.getPlugin("manualColumnMove");n.addHookOnce("afterViewRender",e),IH(this.columns,this.finalColumnIndex,n.columnIndexMapper.getNumberOfIndexes()).reverse().forEach(r=>{let{from:s,to:o}=r;s<o&&(o-=1),t.moveColumn(o,s)}),n.render(),n.deselectCell(),n.selectColumns(this.columns[0],this.columns[0]+this.columns.length-1)};Re.ColumnMoveAction.prototype.redo=function(n,e){const t=n.getPlugin("manualColumnMove");n.addHookOnce("afterViewRender",e),t.moveColumns(this.columns.slice(),this.finalColumnIndex),n.render(),n.deselectCell(),n.selectColumns(this.finalColumnIndex,this.finalColumnIndex+this.columns.length-1)};Re.ColumnSortAction=function(n,e){this.previousSortState=n,this.nextSortState=e};ha(Re.ColumnSortAction,Re.Action);Re.ColumnSortAction.prototype.undo=function(n,e){const t=n.getPlugin("columnSorting"),i=n.getPlugin("multiColumnSorting"),r=i.isEnabled()?i:t;this.previousSortState.length?r.sort(this.previousSortState):r.clearSort(),e()};Re.ColumnSortAction.prototype.redo=function(n,e){const t=n.getPlugin("columnSorting"),i=n.getPlugin("multiColumnSorting");(i.isEnabled()?i:t).sort(this.nextSortState),e()};Re.prototype.init=function(){const n=this.instance.getSettings().undo,e=typeof n>"u"||n;this.instance.undoRedo||(this.instance.undoRedo=this),e?this.instance.undoRedo.enable():this.instance.undoRedo.disable()};Re.prototype.registerShortcuts=function(){const e=this.instance.getShortcutManager().getContext("grid"),i={runOnlyIf:r=>!r.altKey,group:vX};e.addShortcuts([{keys:[["Control/Meta","z"]],callback:()=>{this.undo()}},{keys:[["Control/Meta","y"],["Control/Meta","Shift","z"]],callback:()=>{this.redo()}}],i)};Re.prototype.unregisterShortcuts=function(){this.instance.getShortcutManager().getContext("grid").removeShortcutsByGroup(vX)};function wX(n,e){const t=this;if(e==="loadData")return t.undoRedo.clear()}function $6e(n){n.undo=function(){return n.undoRedo.undo()},n.redo=function(){return n.undoRedo.redo()},n.isUndoAvailable=function(){return n.undoRedo.isUndoAvailable()},n.isRedoAvailable=function(){return n.undoRedo.isRedoAvailable()},n.clearUndo=function(){return n.undoRedo.clear()}}function F6e(n){delete n.undo,delete n.redo,delete n.isUndoAvailable,delete n.isRedoAvailable,delete n.clearUndo}const Oy=Oe.getSingleton();Oy.add("afterUpdateSettings",function(){var n;(n=this.getPlugin("undoRedo"))===null||n===void 0||n.init()});Oy.register("beforeUndo");Oy.register("afterUndo");Oy.register("beforeRedo");Oy.register("afterRedo");Re.PLUGIN_KEY=L6e;Re.SETTING_KEYS=!0;function B6e(){At(kv),At(pDe),At(Dv),At(qDe),At(iLe),At(jK),At(ZLe),At(NNe),At(ME),At(t$e),At(T$e),At(L$e),At(IE),At(c2e),At(aBe),At($Be),At(uVe),At(CVe),At(kVe),At(zVe),At(e3e),At(v3e),At(T3e),At(oWe),At(BWe),At(UWe),At(bje),At(i5e),At(x5e),At(L5e),At(W5e),At(J5e),At(Re)}function V6e(){zOe(),lke(),bke(),Hke(),B6e()}function W6e(n){const e=typeof window>"u"?!1:window.jQuery;e&&(e.fn.handsontable=function(t){const i=this.first();let r=i.data("handsontable");if(typeof t!="string"){const c=t||{};return r?r.updateSettings(c):(r=new n.Core(i[0],c),i.data("handsontable",r),r.init()),i}let s;if(r)if(typeof r[t]<"u"){for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];s=r[t].call(r,...a),t==="destroy"&&i.removeData()}else throw new Error(`Handsontable do not provide action: ${t}`);return s})}var fA,gA,pA,mA,bA;V6e();W6e(Je);Je.__GhostTable=mH;Je._getListenersCounter=U1e;Je._getRegisteredMapsCounter=gAe;Je.EventManager=uo;const j6e=[Q_e,o1e,tAe,uke,i1e,BRe,nRe,LEe,n1e,rRe,c1e,DEe],z6e=[NRe,u1e];Je.helper={};Je.dom={};q(j6e,n=>{q(Object.getOwnPropertyNames(n),e=>{e.charAt(0)!=="_"&&(Je.helper[e]=n[e])})});q(z6e,n=>{q(Object.getOwnPropertyNames(n),e=>{e.charAt(0)!=="_"&&(Je.dom[e]=n[e])})});Je.cellTypes=(fA=Je.cellTypes)!==null&&fA!==void 0?fA:{};q(wPe(),n=>{Je.cellTypes[n]=QN(n)});Je.cellTypes.registerCellType=js;Je.cellTypes.getCellType=QN;Je.editors=(gA=Je.editors)!==null&&gA!==void 0?gA:{};q(F1e(),n=>{Je.editors[`${pr(n)}Editor`]=nR(n)});Je.editors.registerEditor=Gr;Je.editors.getEditor=nR;Je.renderers=(pA=Je.renderers)!==null&&pA!==void 0?pA:{};q(XEe(),n=>{const e=iR(n);n==="base"&&(Je.renderers.cellDecorator=e),Je.renderers[`${pr(n)}Renderer`]=e});Je.renderers.registerRenderer=os;Je.renderers.getRenderer=iR;Je.validators=(mA=Je.validators)!==null&&mA!==void 0?mA:{};q(JEe(),n=>{Je.validators[`${pr(n)}Validator`]=uL(n)});Je.validators.registerValidator=Sd;Je.validators.getValidator=uL;Je.plugins=(bA=Je.plugins)!==null&&bA!==void 0?bA:{};q(cL(),n=>{Je.plugins[n]=wy(n)});Je.plugins[`${pr(Ht.PLUGIN_KEY)}Plugin`]=Ht;Je.plugins.registerPlugin=At;Je.plugins.getPlugin=wy;var yX;let CX,SX,_X,RX,EX,xX,TX;function U6e(n,e,t,i,r,s){var o,a,l,c,u,h,d,f=Symbol.metadata||Symbol.for("Symbol.metadata"),g=Object.defineProperty,p=Object.create,m=[p(null),p(null)],v=e.length;function y(S,T,P){return function(E,A){T&&(A=E,E=n);for(var L=0;L<S.length;L++)A=S[L].apply(E,P?[A]:[]);return P?A:E}}function w(S,T,P,E){if(typeof S!="function"&&(E||S!==void 0))throw new TypeError(T+" must "+(P||"be")+" a function"+(E?"":" or undefined"));return S}function R(S,T,P,E,A,L,W,F,V,H,N){function j(Y){if(!N(Y))throw new TypeError("Attempted to access private element on non-instance")}var k=[].concat(T[0]),K=T[3],ie=!W,b=A===1,C=A===3,_=A===4,I=A===2;function $(Y,ne,de){return function(he,ce){return ne&&(ce=he,he=S),de&&de(he),M[Y].call(he,ce)}}if(!ie){var M={},B=[],z=C?"get":_||b?"set":"value";if(V?(H||b?M={get:c5(function(){return K(this)},E,"get"),set:function(Y){T[4](this,Y)}}:M[z]=K,H||c5(M[z],E,I?"":z)):H||(M=Object.getOwnPropertyDescriptor(S,E)),!H&&!V){if((a=m[+F][E])&&(a^A)!=7)throw Error("Decorating two elements with the same name ("+M[z].name+") is not supported yet");m[+F][E]=A<3?1:A}}for(var U=S,le=k.length-1;le>=0;le-=P?2:1){var ue=w(k[le],"A decorator","be",!0),be=P?k[le-1]:void 0,fe={},Z={kind:["field","accessor","method","getter","setter","class"][A],name:E,metadata:o,addInitializer:(function(Y,ne){if(Y.v)throw new TypeError("attempted to call addInitializer after decoration was finished");w(ne,"An initializer","be",!0),L.push(ne)}).bind(null,fe)};if(ie)a=ue.call(be,U,Z),fe.v=1,w(a,"class decorators","return")&&(U=a);else if(Z.static=F,Z.private=V,a=Z.access={has:V?N.bind():function(Y){return E in Y}},_||(a.get=V?I?function(Y){return j(Y),M.value}:$("get",0,j):function(Y){return Y[E]}),I||C||(a.set=V?$("set",0,j):function(Y,ne){Y[E]=ne}),U=ue.call(be,b?{get:M.get,set:M.set}:M[z],Z),fe.v=1,b){if(typeof U=="object"&&U)(a=w(U.get,"accessor.get"))&&(M.get=a),(a=w(U.set,"accessor.set"))&&(M.set=a),(a=w(U.init,"accessor.init"))&&B.unshift(a);else if(U!==void 0)throw new TypeError("accessor decorators must return an object with get, set, or init properties or undefined")}else w(U,(H?"field":"method")+" decorators","return")&&(H?B.unshift(U):M[z]=U)}return A<2&&W.push(y(B,F,1),y(L,F,0)),H||ie||(V?b?W.splice(-1,0,$("get",F),$("set",F)):W.push(I?M[z]:w.call.bind(M[z])):g(S,E,M)),U}function x(S){return g(S,f,{configurable:!0,enumerable:!0,value:o})}return o=p(o??null),u=[],h=function(S){S&&u.push(y(S))},d=function(S,T){for(var P=0;P<t.length;P++){var E=t[P],A=E[1],L=7&A;if((8&A)==S&&!L==T){var W=E[2],F=!!E[3],V=16&A;R(S?n:n.prototype,E,V,F?"#"+W:G6e(W),L,L<2?[]:S?c=c||[]:l=l||[],u,!!S,F,T,S&&F?function(H){return K6e(H)===n}:r)}}},d(8,0),d(0,0),d(8,1),d(0,1),h(l),h(c),a=u,v||x(n),{e:a,get c(){var S=[];return v&&[x(n=R(n,[e],i,n.name,5,S)),y(S,1)]}}}function G6e(n){var e=Y6e(n,"string");return typeof e=="symbol"?e:e+""}function Y6e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function c5(n,e,t){typeof e=="symbol"&&(e=(e=e.description)?"["+e+"]":"");try{Object.defineProperty(n,"name",{configurable:!0,value:t?t+" "+e:e})}catch{}return n}function K6e(n){if(Object(n)!==n)throw TypeError("right-hand side of 'in' should be an object, got "+(n!==null?typeof n:"null"));return n}let LE;class q6e{constructor(){this.ea=ve(Ww),this.mytable=void 0,this.hot=void 0,this.datachannel=SX(this),this.tabid=(_X(this),RX(this)),this.datatype=(EX(this),xX(this,"all")),this.showtable=(TX(this),!0),this.data=[]}attached(){this.data=[["Gene","Type","CEA","CA19_9","Tumor Size","Metabolic Activity","ctDNA","CRP","Bowel MovementPatterns","Ki-67","Cascpase-3","MMP-1","Cell Proliferation"],["APC","Tumor suppressor gene",.8,.3,.9,.7,.6,.2,.1,.9,-.6,-.7,.9],["KRAS","Kirsten Rat Sarcoma Viral Oncogene Homolog",.7,.4,.8,.6,.5,.3,0,.8,-.5,.2,.8],["TP53","Tumor Protein 53",.6,.2,.7,.5,.4,.4,.1,.7,.9,-.4,.7],["MLH1","Mismatch Repair gene",.5,.3,.6,.4,.7,.5,.2,.6,.7,-.3,.6],["MSH2","Mismatch Repair gene",.5,.3,.6,.4,.7,.5,.2,.6,.7,-.3,.6],["BRAF","Oncogene MAPK/ERK signaling pathway",.4,.5,.5,.8,.3,.3,0,.5,-.2,.5,.5],["SMAD4","Tumor suppressor gene",.3,.2,.4,.3,.2,.4,.1,.4,.6,-.5,.4],["PIK3CA","Oncogene",.6,.4,.7,.6,.5,.3,0,.7,-.4,.3,.7],["NRAS","Oncogene",.4,.3,.5,.5,.4,.2,.1,.5,-.3,.2,.5],["CTNNB1","Cell adhesion signaling pathway",.3,.2,.4,.3,.3,.1,0,.4,-.2,-.1,.4],["FBXW7","Tumor suppressor gene",.2,.1,.3,.2,.2,.3,.1,.3,.5,-.4,.3]],this.datatype=="nodes"?this.data=this.getNodesData(this.data):this.datatype=="edges"&&(this.data=this.getEdgesData(this.data));let e=this;this.hot=new Je(this.mytable,{data:this.data,rowHeaders:!0,colHeaders:!0,autoWrapRow:!0,autoWrapCol:!0,licenseKey:"non-commercial-and-evaluation",afterChange:function(t,i){i==="loadData"||!t||t.forEach(([r,s,o,a])=>{e.changeContent(r,s,o,a)})}}),this.ea.subscribe("showtab",t=>{this.tabid===t&&(console.log("Table refresh dimension for ",t),this.hot.refreshDimensions(),this.hot.render())}),this.hot.addHook("beforeKeyDown",t=>{t.keyCode===45&&!t.shiftKey?(t.preventDefault(),this.addRow()):t.keyCode===45&&t.shiftKey&&(t.preventDefault(),this.addColumn())})}changeContent(e,t,i,r){if(this.datatype==="all")if(console.log(`Cell at row ${e}, column ${t} changed from "${i}" to "${r}".`),e==0)this.ea.publish(this.datachannel,{type:"changeNode",old:i,value:r});else if(t==0)this.ea.publish(this.datachannel,{type:"changeNode",old:i,value:r});else if(t==1){const s=this.hot.getDataAtCell(e,0);this.ea.publish(this.datachannel,{type:"changeType",node:s,old:i,value:r})}else{const s=this.hot.getDataAtCell(e,0),o=this.hot.getDataAtCell(0,t);this.ea.publish(this.datachannel,{type:"changeEdge",subject:s,object:o,old:i,value:r})}else if(this.datatype==="nodes")console.log(`Add node.Cell at row ${e}, column ${t} changed from "${i}" to "${r}".`),(t==0||oldvalue)&&(console.log("publishing"),this.ea.publish(this.datachannel,{type:"changeNode",old:i,value:r}));else if(this.datatype==="edges"&&(console.log(`Add edge.Cell at row ${e}, column ${t} changed from "${i}" to "${r}".`),t==1||oldvalue)){const s=this.hot.getDataAtCell(e,0),o=this.hot.getDataAtCell(e,t);this.ea.publish(this.datachannel,{type:"changeEdge",subject:s,object:o,old:i,value:r})}}submit(){let e=this.hot.getData();console.log("submit data:",e),this.ea.publish(this.datachannel,e)}showHide(){this.showtable=!this.showtable}addRow(e="Subject name"){let t=prompt(e,"");if(t){let i=t.split(",");const r=this.hot.countRows();this.hot.alter("insert_row_below",r),this.hot.setDataAtCell(r,0,i[0]),this.hot.setDataAtCell(r,1,i.length>1?i[1]:""),this.hot.selectCell(r,0)}}addColumn(e="Object name"){let t=prompt(e,"");if(t){const i=this.hot.countCols();this.hot.alter("insert_col_end",i),this.hot.setDataAtCell(0,i,t),this.hot.selectCell(0,i)}}switchTo1Table(){}switchTo2Table(){}getNodesData(e){let t=[];for(let i=1;i<e.length;i++){let r=[e[i][0],e[i][1]];t.push(r)}for(let i=2;i<e[0].length;i++){let r=[e[0][i]];t.push(r)}return t}getEdgesData(e){let t=[];for(let i=1;i<e.length;i++)for(let r=2;r<e[i].length;r++){let s=e[i][r],o=[e[i][0],e[0][r],s];t.push(o)}return t}}yX=q6e;({e:[SX,_X,RX,EX,xX,TX],c:[LE,CX]}=U6e(yX,[aa({...hfe,name:"sv-table"})],[[Qr,0,"datachannel"],[Qr,0,"tabid"],[Qr,0,"datatype"]]));CX();const MX="network",dO=`<div>
    <div class="w3-right w3-above w3-small">    
        <input class="w3-input" ref="searchinput" value.bind="searchValue" placeholder="try searching for a nodes"/>
        <button class="w3-button w3-grey" click.trigger="layoutOnOff()">layout <span show.bind="animationstarted">on</span><span show.bind="!animationstarted">off</span></button>
        <button class="w3-button w3-grey" click.trigger="resetLayout()">reset layout</button>
    </div>
    <div ref="container" style="height:95vh;width:100%"></div>
</div>`,AX=[],PX={};let vA;function X6e(n){vA||(vA=Ti.define({name:MX,template:dO,dependencies:AX,bindables:PX})),n.register(vA)}const Z6e=Object.freeze(Object.defineProperty({__proto__:null,bindables:PX,default:dO,dependencies:AX,name:MX,register:X6e,template:dO},Symbol.toStringTag,{value:"Module"}));var HH={exports:{}},mp=typeof Reflect=="object"?Reflect:null,u5=mp&&typeof mp.apply=="function"?mp.apply:function(e,t,i){return Function.prototype.apply.call(e,t,i)},XS;mp&&typeof mp.ownKeys=="function"?XS=mp.ownKeys:Object.getOwnPropertySymbols?XS=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:XS=function(e){return Object.getOwnPropertyNames(e)};function Q6e(n){console&&console.warn&&console.warn(n)}var IX=Number.isNaN||function(e){return e!==e};function an(){an.init.call(this)}HH.exports=an;HH.exports.once=nze;an.EventEmitter=an;an.prototype._events=void 0;an.prototype._eventsCount=0;an.prototype._maxListeners=void 0;var h5=10;function NE(n){if(typeof n!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n)}Object.defineProperty(an,"defaultMaxListeners",{enumerable:!0,get:function(){return h5},set:function(n){if(typeof n!="number"||n<0||IX(n))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+n+".");h5=n}});an.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};an.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||IX(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function OX(n){return n._maxListeners===void 0?an.defaultMaxListeners:n._maxListeners}an.prototype.getMaxListeners=function(){return OX(this)};an.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var r=e==="error",s=this._events;if(s!==void 0)r=r&&s.error===void 0;else if(!r)return!1;if(r){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=s[e];if(l===void 0)return!1;if(typeof l=="function")u5(l,this,t);else for(var c=l.length,u=HX(l,c),i=0;i<c;++i)u5(u[i],this,t);return!0};function kX(n,e,t,i){var r,s,o;if(NE(t),s=n._events,s===void 0?(s=n._events=Object.create(null),n._eventsCount=0):(s.newListener!==void 0&&(n.emit("newListener",e,t.listener?t.listener:t),s=n._events),o=s[e]),o===void 0)o=s[e]=t,++n._eventsCount;else if(typeof o=="function"?o=s[e]=i?[t,o]:[o,t]:i?o.unshift(t):o.push(t),r=OX(n),r>0&&o.length>r&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=n,a.type=e,a.count=o.length,Q6e(a)}return n}an.prototype.addListener=function(e,t){return kX(this,e,t,!1)};an.prototype.on=an.prototype.addListener;an.prototype.prependListener=function(e,t){return kX(this,e,t,!0)};function J6e(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function DX(n,e,t){var i={fired:!1,wrapFn:void 0,target:n,type:e,listener:t},r=J6e.bind(i);return r.listener=t,i.wrapFn=r,r}an.prototype.once=function(e,t){return NE(t),this.on(e,DX(this,e,t)),this};an.prototype.prependOnceListener=function(e,t){return NE(t),this.prependListener(e,DX(this,e,t)),this};an.prototype.removeListener=function(e,t){var i,r,s,o,a;if(NE(t),r=this._events,r===void 0)return this;if(i=r[e],i===void 0)return this;if(i===t||i.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,i.listener||t));else if(typeof i!="function"){for(s=-1,o=i.length-1;o>=0;o--)if(i[o]===t||i[o].listener===t){a=i[o].listener,s=o;break}if(s<0)return this;s===0?i.shift():eze(i,s),i.length===1&&(r[e]=i[0]),r.removeListener!==void 0&&this.emit("removeListener",e,a||t)}return this};an.prototype.off=an.prototype.removeListener;an.prototype.removeAllListeners=function(e){var t,i,r;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var s=Object.keys(i),o;for(r=0;r<s.length;++r)o=s[r],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=i[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this};function LX(n,e,t){var i=n._events;if(i===void 0)return[];var r=i[e];return r===void 0?[]:typeof r=="function"?t?[r.listener||r]:[r]:t?tze(r):HX(r,r.length)}an.prototype.listeners=function(e){return LX(this,e,!0)};an.prototype.rawListeners=function(e){return LX(this,e,!1)};an.listenerCount=function(n,e){return typeof n.listenerCount=="function"?n.listenerCount(e):NX.call(n,e)};an.prototype.listenerCount=NX;function NX(n){var e=this._events;if(e!==void 0){var t=e[n];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}an.prototype.eventNames=function(){return this._eventsCount>0?XS(this._events):[]};function HX(n,e){for(var t=new Array(e),i=0;i<e;++i)t[i]=n[i];return t}function eze(n,e){for(;e+1<n.length;e++)n[e]=n[e+1];n.pop()}function tze(n){for(var e=new Array(n.length),t=0;t<e.length;++t)e[t]=n[t].listener||n[t];return e}function nze(n,e){return new Promise(function(t,i){function r(o){n.removeListener(e,s),i(o)}function s(){typeof n.removeListener=="function"&&n.removeListener("error",r),t([].slice.call(arguments))}$X(n,e,s,{once:!0}),e!=="error"&&ize(n,r,{once:!0})})}function ize(n,e,t){typeof n.on=="function"&&$X(n,"error",e,t)}function $X(n,e,t,i){if(typeof n.on=="function")i.once?n.once(e,t):n.on(e,t);else if(typeof n.addEventListener=="function")n.addEventListener(e,function r(s){i.once&&n.removeEventListener(e,r),t(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof n)}var $H=HH.exports;function hl(n){if(typeof n!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=n}typeof Symbol<"u"&&(hl.prototype[Symbol.iterator]=function(){return this});hl.of=function(){var n=arguments,e=n.length,t=0;return new hl(function(){return t>=e?{done:!0}:{done:!1,value:n[t++]}})};hl.empty=function(){var n=new hl(function(){return{done:!0}});return n};hl.fromSequence=function(n){var e=0,t=n.length;return new hl(function(){return e>=t?{done:!0}:{done:!1,value:n[e++]}})};hl.is=function(n){return n instanceof hl?!0:typeof n=="object"&&n!==null&&typeof n.next=="function"};var FH=hl;const ho=_f(FH);var BH={};BH.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u";BH.SYMBOL_SUPPORT=typeof Symbol<"u";var rze=FH,FX=BH,sze=FX.ARRAY_BUFFER_SUPPORT,oze=FX.SYMBOL_SUPPORT;function aze(n){return typeof n=="string"||Array.isArray(n)||sze&&ArrayBuffer.isView(n)?rze.fromSequence(n):typeof n!="object"||n===null?null:oze&&typeof n[Symbol.iterator]=="function"?n[Symbol.iterator]():typeof n.next=="function"?n:null}var BX=function(e){var t=aze(e);if(!t)throw new Error("obliterator: target is not iterable nor a valid iterator.");return t},lze=BX,cze=function(e,t){for(var i=arguments.length>1?t:1/0,r=i!==1/0?new Array(i):[],s,o=0,a=lze(e);;){if(o===i)return r;if(s=a.next(),s.done)return o!==t&&(r.length=o),r;r[o++]=s.value}};const VX=_f(cze);var uze=FH,hze=BX,dze=function(){var e=arguments,t=null,i=-1;return new uze(function(){var s=null;do{if(t===null){if(i++,i>=e.length)return{done:!0};t=hze(e[i])}if(s=t.next(),s.done===!0){t=null;continue}break}while(!0);return s})};const Rc=_f(dze);function fze(){const n=arguments[0];for(let e=1,t=arguments.length;e<t;e++)if(arguments[e])for(const i in arguments[e])n[i]=arguments[e][i];return n}let Ei=fze;typeof Object.assign=="function"&&(Ei=Object.assign);function ro(n,e,t,i){const r=n._nodes.get(e);let s=null;return r&&(i==="mixed"?s=r.out&&r.out[t]||r.undirected&&r.undirected[t]:i==="directed"?s=r.out&&r.out[t]:s=r.undirected&&r.undirected[t]),s}function Gi(n){return typeof n=="object"&&n!==null}function WX(n){let e;for(e in n)return!1;return!0}function Vs(n,e,t){Object.defineProperty(n,e,{enumerable:!1,configurable:!1,writable:!0,value:t})}function Do(n,e,t){const i={enumerable:!0,configurable:!0};typeof t=="function"?i.get=t:(i.value=t,i.writable=!1),Object.defineProperty(n,e,i)}function d5(n){return!(!Gi(n)||n.attributes&&!Array.isArray(n.attributes))}function gze(){let n=Math.floor(Math.random()*256)&255;return()=>n++}class VH extends Error{constructor(e){super(),this.name="GraphError",this.message=e}}class Ie extends VH{constructor(e){super(e),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Ie.prototype.constructor)}}class _e extends VH{constructor(e){super(e),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,_e.prototype.constructor)}}class Ye extends VH{constructor(e){super(e),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Ye.prototype.constructor)}}function jX(n,e){this.key=n,this.attributes=e,this.clear()}jX.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function zX(n,e){this.key=n,this.attributes=e,this.clear()}zX.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function UX(n,e){this.key=n,this.attributes=e,this.clear()}UX.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function um(n,e,t,i,r){this.key=e,this.attributes=r,this.undirected=n,this.source=t,this.target=i}um.prototype.attach=function(){let n="out",e="in";this.undirected&&(n=e="undirected");const t=this.source.key,i=this.target.key;this.source[n][i]=this,!(this.undirected&&t===i)&&(this.target[e][t]=this)};um.prototype.attachMulti=function(){let n="out",e="in";const t=this.source.key,i=this.target.key;this.undirected&&(n=e="undirected");const r=this.source[n],s=r[i];if(typeof s>"u"){r[i]=this,this.undirected&&t===i||(this.target[e][t]=this);return}s.previous=this,this.next=s,r[i]=this,this.target[e][t]=this};um.prototype.detach=function(){const n=this.source.key,e=this.target.key;let t="out",i="in";this.undirected&&(t=i="undirected"),delete this.source[t][e],delete this.target[i][n]};um.prototype.detachMulti=function(){const n=this.source.key,e=this.target.key;let t="out",i="in";this.undirected&&(t=i="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[t][e],delete this.target[i][n]):(this.next.previous=void 0,this.source[t][e]=this.next,this.target[i][n]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const GX=0,YX=1,pze=2,KX=3;function zc(n,e,t,i,r,s,o){let a,l,c,u;if(i=""+i,t===GX){if(a=n._nodes.get(i),!a)throw new _e(`Graph.${e}: could not find the "${i}" node in the graph.`);c=r,u=s}else if(t===KX){if(r=""+r,l=n._edges.get(r),!l)throw new _e(`Graph.${e}: could not find the "${r}" edge in the graph.`);const h=l.source.key,d=l.target.key;if(i===h)a=l.target;else if(i===d)a=l.source;else throw new _e(`Graph.${e}: the "${i}" node is not attached to the "${r}" edge (${h}, ${d}).`);c=s,u=o}else{if(l=n._edges.get(i),!l)throw new _e(`Graph.${e}: could not find the "${i}" edge in the graph.`);t===YX?a=l.source:a=l.target,c=r,u=s}return[a,c,u]}function mze(n,e,t){n.prototype[e]=function(i,r,s){const[o,a]=zc(this,e,t,i,r,s);return o.attributes[a]}}function bze(n,e,t){n.prototype[e]=function(i,r){const[s]=zc(this,e,t,i,r);return s.attributes}}function vze(n,e,t){n.prototype[e]=function(i,r,s){const[o,a]=zc(this,e,t,i,r,s);return o.attributes.hasOwnProperty(a)}}function wze(n,e,t){n.prototype[e]=function(i,r,s,o){const[a,l,c]=zc(this,e,t,i,r,s,o);return a.attributes[l]=c,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function yze(n,e,t){n.prototype[e]=function(i,r,s,o){const[a,l,c]=zc(this,e,t,i,r,s,o);if(typeof c!="function")throw new Ie(`Graph.${e}: updater should be a function.`);const u=a.attributes,h=c(u[l]);return u[l]=h,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function Cze(n,e,t){n.prototype[e]=function(i,r,s){const[o,a]=zc(this,e,t,i,r,s);return delete o.attributes[a],this.emit("nodeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:a}),this}}function Sze(n,e,t){n.prototype[e]=function(i,r,s){const[o,a]=zc(this,e,t,i,r,s);if(!Gi(a))throw new Ie(`Graph.${e}: provided attributes are not a plain object.`);return o.attributes=a,this.emit("nodeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function _ze(n,e,t){n.prototype[e]=function(i,r,s){const[o,a]=zc(this,e,t,i,r,s);if(!Gi(a))throw new Ie(`Graph.${e}: provided attributes are not a plain object.`);return Ei(o.attributes,a),this.emit("nodeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:a}),this}}function Rze(n,e,t){n.prototype[e]=function(i,r,s){const[o,a]=zc(this,e,t,i,r,s);if(typeof a!="function")throw new Ie(`Graph.${e}: provided updater is not a function.`);return o.attributes=a(o.attributes),this.emit("nodeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const Eze=[{name:n=>`get${n}Attribute`,attacher:mze},{name:n=>`get${n}Attributes`,attacher:bze},{name:n=>`has${n}Attribute`,attacher:vze},{name:n=>`set${n}Attribute`,attacher:wze},{name:n=>`update${n}Attribute`,attacher:yze},{name:n=>`remove${n}Attribute`,attacher:Cze},{name:n=>`replace${n}Attributes`,attacher:Sze},{name:n=>`merge${n}Attributes`,attacher:_ze},{name:n=>`update${n}Attributes`,attacher:Rze}];function xze(n){Eze.forEach(function({name:e,attacher:t}){t(n,e("Node"),GX),t(n,e("Source"),YX),t(n,e("Target"),pze),t(n,e("Opposite"),KX)})}function Tze(n,e,t){n.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new Ye(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Ye(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=ro(this,o,a,t),!s)throw new _e(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(t!=="mixed")throw new Ye(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new _e(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return s.attributes[r]}}function Mze(n,e,t){n.prototype[e]=function(i){let r;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new Ye(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new Ye(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+i,o=""+arguments[1];if(r=ro(this,s,o,t),!r)throw new _e(`Graph.${e}: could not find an edge for the given path ("${s}" - "${o}").`)}else{if(t!=="mixed")throw new Ye(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,r=this._edges.get(i),!r)throw new _e(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return r.attributes}}function Aze(n,e,t){n.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new Ye(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Ye(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=ro(this,o,a,t),!s)throw new _e(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(t!=="mixed")throw new Ye(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new _e(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return s.attributes.hasOwnProperty(r)}}function Pze(n,e,t){n.prototype[e]=function(i,r,s){let o;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new Ye(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new Ye(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+i,l=""+r;if(r=arguments[2],s=arguments[3],o=ro(this,a,l,t),!o)throw new _e(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(t!=="mixed")throw new Ye(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new _e(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return o.attributes[r]=s,this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function Ize(n,e,t){n.prototype[e]=function(i,r,s){let o;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new Ye(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new Ye(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+i,l=""+r;if(r=arguments[2],s=arguments[3],o=ro(this,a,l,t),!o)throw new _e(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(t!=="mixed")throw new Ye(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new _e(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof s!="function")throw new Ie(`Graph.${e}: updater should be a function.`);return o.attributes[r]=s(o.attributes[r]),this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function Oze(n,e,t){n.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new Ye(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Ye(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=ro(this,o,a,t),!s)throw new _e(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(t!=="mixed")throw new Ye(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new _e(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return delete s.attributes[r],this.emit("edgeAttributesUpdated",{key:s.key,type:"remove",attributes:s.attributes,name:r}),this}}function kze(n,e,t){n.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new Ye(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Ye(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=ro(this,o,a,t),!s)throw new _e(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(t!=="mixed")throw new Ye(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new _e(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!Gi(r))throw new Ie(`Graph.${e}: provided attributes are not a plain object.`);return s.attributes=r,this.emit("edgeAttributesUpdated",{key:s.key,type:"replace",attributes:s.attributes}),this}}function Dze(n,e,t){n.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new Ye(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Ye(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=ro(this,o,a,t),!s)throw new _e(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(t!=="mixed")throw new Ye(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new _e(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!Gi(r))throw new Ie(`Graph.${e}: provided attributes are not a plain object.`);return Ei(s.attributes,r),this.emit("edgeAttributesUpdated",{key:s.key,type:"merge",attributes:s.attributes,data:r}),this}}function Lze(n,e,t){n.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new Ye(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Ye(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=ro(this,o,a,t),!s)throw new _e(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(t!=="mixed")throw new Ye(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new _e(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof r!="function")throw new Ie(`Graph.${e}: provided updater is not a function.`);return s.attributes=r(s.attributes),this.emit("edgeAttributesUpdated",{key:s.key,type:"update",attributes:s.attributes}),this}}const Nze=[{name:n=>`get${n}Attribute`,attacher:Tze},{name:n=>`get${n}Attributes`,attacher:Mze},{name:n=>`has${n}Attribute`,attacher:Aze},{name:n=>`set${n}Attribute`,attacher:Pze},{name:n=>`update${n}Attribute`,attacher:Ize},{name:n=>`remove${n}Attribute`,attacher:Oze},{name:n=>`replace${n}Attributes`,attacher:kze},{name:n=>`merge${n}Attributes`,attacher:Dze},{name:n=>`update${n}Attributes`,attacher:Lze}];function Hze(n){Nze.forEach(function({name:e,attacher:t}){t(n,e("Edge"),"mixed"),t(n,e("DirectedEdge"),"directed"),t(n,e("UndirectedEdge"),"undirected")})}const $ze=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function Fze(n,e,t,i){let r=!1;for(const s in e){if(s===i)continue;const o=e[s];if(r=t(o.key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected),n&&r)return o.key}}function Bze(n,e,t,i){let r,s,o,a=!1;for(const l in e)if(l!==i){r=e[l];do{if(s=r.source,o=r.target,a=t(r.key,r.attributes,s.key,o.key,s.attributes,o.attributes,r.undirected),n&&a)return r.key;r=r.next}while(r!==void 0)}}function wA(n,e){const t=Object.keys(n),i=t.length;let r,s=0;return new ho(function(){do if(r)r=r.next;else{if(s>=i)return{done:!0};const a=t[s++];if(a===e){r=void 0;continue}r=n[a]}while(!r);return{done:!1,value:{edge:r.key,attributes:r.attributes,source:r.source.key,target:r.target.key,sourceAttributes:r.source.attributes,targetAttributes:r.target.attributes,undirected:r.undirected}}})}function Vze(n,e,t,i){const r=e[t];if(!r)return;const s=r.source,o=r.target;if(i(r.key,r.attributes,s.key,o.key,s.attributes,o.attributes,r.undirected)&&n)return r.key}function Wze(n,e,t,i){let r=e[t];if(!r)return;let s=!1;do{if(s=i(r.key,r.attributes,r.source.key,r.target.key,r.source.attributes,r.target.attributes,r.undirected),n&&s)return r.key;r=r.next}while(r!==void 0)}function yA(n,e){let t=n[e];return t.next!==void 0?new ho(function(){if(!t)return{done:!0};const i={edge:t.key,attributes:t.attributes,source:t.source.key,target:t.target.key,sourceAttributes:t.source.attributes,targetAttributes:t.target.attributes,undirected:t.undirected};return t=t.next,{done:!1,value:i}}):ho.of({edge:t.key,attributes:t.attributes,source:t.source.key,target:t.target.key,sourceAttributes:t.source.attributes,targetAttributes:t.target.attributes,undirected:t.undirected})}function jze(n,e){if(n.size===0)return[];if(e==="mixed"||e===n.type)return typeof Array.from=="function"?Array.from(n._edges.keys()):VX(n._edges.keys(),n._edges.size);const t=e==="undirected"?n.undirectedSize:n.directedSize,i=new Array(t),r=e==="undirected",s=n._edges.values();let o=0,a,l;for(;a=s.next(),a.done!==!0;)l=a.value,l.undirected===r&&(i[o++]=l.key);return i}function qX(n,e,t,i){if(e.size===0)return;const r=t!=="mixed"&&t!==e.type,s=t==="undirected";let o,a,l=!1;const c=e._edges.values();for(;o=c.next(),o.done!==!0;){if(a=o.value,r&&a.undirected!==s)continue;const{key:u,attributes:h,source:d,target:f}=a;if(l=i(u,h,d.key,f.key,d.attributes,f.attributes,a.undirected),n&&l)return u}}function zze(n,e){if(n.size===0)return ho.empty();const t=e!=="mixed"&&e!==n.type,i=e==="undirected",r=n._edges.values();return new ho(function(){let o,a;for(;;){if(o=r.next(),o.done)return o;if(a=o.value,!(t&&a.undirected!==i))break}return{value:{edge:a.key,attributes:a.attributes,source:a.source.key,target:a.target.key,sourceAttributes:a.source.attributes,targetAttributes:a.target.attributes,undirected:a.undirected},done:!1}})}function WH(n,e,t,i,r,s){const o=e?Bze:Fze;let a;if(t!=="undirected"&&(i!=="out"&&(a=o(n,r.in,s),n&&a)||i!=="in"&&(a=o(n,r.out,s,i?void 0:r.key),n&&a))||t!=="directed"&&(a=o(n,r.undirected,s),n&&a))return a}function Uze(n,e,t,i){const r=[];return WH(!1,n,e,t,i,function(s){r.push(s)}),r}function Gze(n,e,t){let i=ho.empty();return n!=="undirected"&&(e!=="out"&&typeof t.in<"u"&&(i=Rc(i,wA(t.in))),e!=="in"&&typeof t.out<"u"&&(i=Rc(i,wA(t.out,e?void 0:t.key)))),n!=="directed"&&typeof t.undirected<"u"&&(i=Rc(i,wA(t.undirected))),i}function jH(n,e,t,i,r,s,o){const a=t?Wze:Vze;let l;if(e!=="undirected"&&(typeof r.in<"u"&&i!=="out"&&(l=a(n,r.in,s,o),n&&l)||typeof r.out<"u"&&i!=="in"&&(i||r.key!==s)&&(l=a(n,r.out,s,o),n&&l))||e!=="directed"&&typeof r.undirected<"u"&&(l=a(n,r.undirected,s,o),n&&l))return l}function Yze(n,e,t,i,r){const s=[];return jH(!1,n,e,t,i,r,function(o){s.push(o)}),s}function Kze(n,e,t,i){let r=ho.empty();return n!=="undirected"&&(typeof t.in<"u"&&e!=="out"&&i in t.in&&(r=Rc(r,yA(t.in,i))),typeof t.out<"u"&&e!=="in"&&i in t.out&&(e||t.key!==i)&&(r=Rc(r,yA(t.out,i)))),n!=="directed"&&typeof t.undirected<"u"&&i in t.undirected&&(r=Rc(r,yA(t.undirected,i))),r}function qze(n,e){const{name:t,type:i,direction:r}=e;n.prototype[t]=function(s,o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];if(!arguments.length)return jze(this,i);if(arguments.length===1){s=""+s;const a=this._nodes.get(s);if(typeof a>"u")throw new _e(`Graph.${t}: could not find the "${s}" node in the graph.`);return Uze(this.multi,i==="mixed"?this.type:i,r,a)}if(arguments.length===2){s=""+s,o=""+o;const a=this._nodes.get(s);if(!a)throw new _e(`Graph.${t}:  could not find the "${s}" source node in the graph.`);if(!this._nodes.has(o))throw new _e(`Graph.${t}:  could not find the "${o}" target node in the graph.`);return Yze(i,this.multi,r,a,o)}throw new Ie(`Graph.${t}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function Xze(n,e){const{name:t,type:i,direction:r}=e,s="forEach"+t[0].toUpperCase()+t.slice(1,-1);n.prototype[s]=function(c,u,h){if(!(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)){if(arguments.length===1)return h=c,qX(!1,this,i,h);if(arguments.length===2){c=""+c,h=u;const d=this._nodes.get(c);if(typeof d>"u")throw new _e(`Graph.${s}: could not find the "${c}" node in the graph.`);return WH(!1,this.multi,i==="mixed"?this.type:i,r,d,h)}if(arguments.length===3){c=""+c,u=""+u;const d=this._nodes.get(c);if(!d)throw new _e(`Graph.${s}:  could not find the "${c}" source node in the graph.`);if(!this._nodes.has(u))throw new _e(`Graph.${s}:  could not find the "${u}" target node in the graph.`);return jH(!1,i,this.multi,r,d,u,h)}throw new Ie(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const o="map"+t[0].toUpperCase()+t.slice(1);n.prototype[o]=function(){const c=Array.prototype.slice.call(arguments),u=c.pop();let h;if(c.length===0){let d=0;i!=="directed"&&(d+=this.undirectedSize),i!=="undirected"&&(d+=this.directedSize),h=new Array(d);let f=0;c.push((g,p,m,v,y,w,R)=>{h[f++]=u(g,p,m,v,y,w,R)})}else h=[],c.push((d,f,g,p,m,v,y)=>{h.push(u(d,f,g,p,m,v,y))});return this[s].apply(this,c),h};const a="filter"+t[0].toUpperCase()+t.slice(1);n.prototype[a]=function(){const c=Array.prototype.slice.call(arguments),u=c.pop(),h=[];return c.push((d,f,g,p,m,v,y)=>{u(d,f,g,p,m,v,y)&&h.push(d)}),this[s].apply(this,c),h};const l="reduce"+t[0].toUpperCase()+t.slice(1);n.prototype[l]=function(){let c=Array.prototype.slice.call(arguments);if(c.length<2||c.length>4)throw new Ie(`Graph.${l}: invalid number of arguments (expecting 2, 3 or 4 and got ${c.length}).`);if(typeof c[c.length-1]=="function"&&typeof c[c.length-2]!="function")throw new Ie(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let u,h;c.length===2?(u=c[0],h=c[1],c=[]):c.length===3?(u=c[1],h=c[2],c=[c[0]]):c.length===4&&(u=c[2],h=c[3],c=[c[0],c[1]]);let d=h;return c.push((f,g,p,m,v,y,w)=>{d=u(d,f,g,p,m,v,y,w)}),this[s].apply(this,c),d}}function Zze(n,e){const{name:t,type:i,direction:r}=e,s="find"+t[0].toUpperCase()+t.slice(1,-1);n.prototype[s]=function(l,c,u){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return!1;if(arguments.length===1)return u=l,qX(!0,this,i,u);if(arguments.length===2){l=""+l,u=c;const h=this._nodes.get(l);if(typeof h>"u")throw new _e(`Graph.${s}: could not find the "${l}" node in the graph.`);return WH(!0,this.multi,i==="mixed"?this.type:i,r,h,u)}if(arguments.length===3){l=""+l,c=""+c;const h=this._nodes.get(l);if(!h)throw new _e(`Graph.${s}:  could not find the "${l}" source node in the graph.`);if(!this._nodes.has(c))throw new _e(`Graph.${s}:  could not find the "${c}" target node in the graph.`);return jH(!0,i,this.multi,r,h,c,u)}throw new Ie(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const o="some"+t[0].toUpperCase()+t.slice(1,-1);n.prototype[o]=function(){const l=Array.prototype.slice.call(arguments),c=l.pop();return l.push((h,d,f,g,p,m,v)=>c(h,d,f,g,p,m,v)),!!this[s].apply(this,l)};const a="every"+t[0].toUpperCase()+t.slice(1,-1);n.prototype[a]=function(){const l=Array.prototype.slice.call(arguments),c=l.pop();return l.push((h,d,f,g,p,m,v)=>!c(h,d,f,g,p,m,v)),!this[s].apply(this,l)}}function Qze(n,e){const{name:t,type:i,direction:r}=e,s=t.slice(0,-1)+"Entries";n.prototype[s]=function(o,a){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return ho.empty();if(!arguments.length)return zze(this,i);if(arguments.length===1){o=""+o;const l=this._nodes.get(o);if(!l)throw new _e(`Graph.${s}: could not find the "${o}" node in the graph.`);return Gze(i,r,l)}if(arguments.length===2){o=""+o,a=""+a;const l=this._nodes.get(o);if(!l)throw new _e(`Graph.${s}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(a))throw new _e(`Graph.${s}:  could not find the "${a}" target node in the graph.`);return Kze(i,r,l,a)}throw new Ie(`Graph.${s}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function Jze(n){$ze.forEach(e=>{qze(n,e),Xze(n,e),Zze(n,e),Qze(n,e)})}const e8e=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function HE(){this.A=null,this.B=null}HE.prototype.wrap=function(n){this.A===null?this.A=n:this.B===null&&(this.B=n)};HE.prototype.has=function(n){return this.A!==null&&n in this.A||this.B!==null&&n in this.B};function Pb(n,e,t,i,r){for(const s in i){const o=i[s],a=o.source,l=o.target,c=a===t?l:a;if(e&&e.has(c.key))continue;const u=r(c.key,c.attributes);if(n&&u)return c.key}}function zH(n,e,t,i,r){if(e!=="mixed"){if(e==="undirected")return Pb(n,null,i,i.undirected,r);if(typeof t=="string")return Pb(n,null,i,i[t],r)}const s=new HE;let o;if(e!=="undirected"){if(t!=="out"){if(o=Pb(n,null,i,i.in,r),n&&o)return o;s.wrap(i.in)}if(t!=="in"){if(o=Pb(n,s,i,i.out,r),n&&o)return o;s.wrap(i.out)}}if(e!=="directed"&&(o=Pb(n,s,i,i.undirected,r),n&&o))return o}function t8e(n,e,t){if(n!=="mixed"){if(n==="undirected")return Object.keys(t.undirected);if(typeof e=="string")return Object.keys(t[e])}const i=[];return zH(!1,n,e,t,function(r){i.push(r)}),i}function Ib(n,e,t){const i=Object.keys(t),r=i.length;let s=0;return new ho(function(){let a=null;do{if(s>=r)return n&&n.wrap(t),{done:!0};const l=t[i[s++]],c=l.source,u=l.target;if(a=c===e?u:c,n&&n.has(a.key)){a=null;continue}}while(a===null);return{done:!1,value:{neighbor:a.key,attributes:a.attributes}}})}function n8e(n,e,t){if(n!=="mixed"){if(n==="undirected")return Ib(null,t,t.undirected);if(typeof e=="string")return Ib(null,t,t[e])}let i=ho.empty();const r=new HE;return n!=="undirected"&&(e!=="out"&&(i=Rc(i,Ib(r,t,t.in))),e!=="in"&&(i=Rc(i,Ib(r,t,t.out)))),n!=="directed"&&(i=Rc(i,Ib(r,t,t.undirected))),i}function i8e(n,e){const{name:t,type:i,direction:r}=e;n.prototype[t]=function(s){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];s=""+s;const o=this._nodes.get(s);if(typeof o>"u")throw new _e(`Graph.${t}: could not find the "${s}" node in the graph.`);return t8e(i==="mixed"?this.type:i,r,o)}}function r8e(n,e){const{name:t,type:i,direction:r}=e,s="forEach"+t[0].toUpperCase()+t.slice(1,-1);n.prototype[s]=function(c,u){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;c=""+c;const h=this._nodes.get(c);if(typeof h>"u")throw new _e(`Graph.${s}: could not find the "${c}" node in the graph.`);zH(!1,i==="mixed"?this.type:i,r,h,u)};const o="map"+t[0].toUpperCase()+t.slice(1);n.prototype[o]=function(c,u){const h=[];return this[s](c,(d,f)=>{h.push(u(d,f))}),h};const a="filter"+t[0].toUpperCase()+t.slice(1);n.prototype[a]=function(c,u){const h=[];return this[s](c,(d,f)=>{u(d,f)&&h.push(d)}),h};const l="reduce"+t[0].toUpperCase()+t.slice(1);n.prototype[l]=function(c,u,h){if(arguments.length<3)throw new Ie(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let d=h;return this[s](c,(f,g)=>{d=u(d,f,g)}),d}}function s8e(n,e){const{name:t,type:i,direction:r}=e,s=t[0].toUpperCase()+t.slice(1,-1),o="find"+s;n.prototype[o]=function(c,u){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;c=""+c;const h=this._nodes.get(c);if(typeof h>"u")throw new _e(`Graph.${o}: could not find the "${c}" node in the graph.`);return zH(!0,i==="mixed"?this.type:i,r,h,u)};const a="some"+s;n.prototype[a]=function(c,u){return!!this[o](c,u)};const l="every"+s;n.prototype[l]=function(c,u){return!this[o](c,(d,f)=>!u(d,f))}}function o8e(n,e){const{name:t,type:i,direction:r}=e,s=t.slice(0,-1)+"Entries";n.prototype[s]=function(o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return ho.empty();o=""+o;const a=this._nodes.get(o);if(typeof a>"u")throw new _e(`Graph.${s}: could not find the "${o}" node in the graph.`);return n8e(i==="mixed"?this.type:i,r,a)}}function a8e(n){e8e.forEach(e=>{i8e(n,e),r8e(n,e),s8e(n,e),o8e(n,e)})}function rS(n,e,t,i,r){const s=i._nodes.values(),o=i.type;let a,l,c,u,h,d;for(;a=s.next(),a.done!==!0;){let f=!1;if(l=a.value,o!=="undirected"){u=l.out;for(c in u){h=u[c];do d=h.target,f=!0,r(l.key,d.key,l.attributes,d.attributes,h.key,h.attributes,h.undirected),h=h.next;while(h)}}if(o!=="directed"){u=l.undirected;for(c in u)if(!(e&&l.key>c)){h=u[c];do d=h.target,d.key!==c&&(d=h.source),f=!0,r(l.key,d.key,l.attributes,d.attributes,h.key,h.attributes,h.undirected),h=h.next;while(h)}}t&&!f&&r(l.key,null,l.attributes,null,null,null,null)}}function l8e(n,e){const t={key:n};return WX(e.attributes)||(t.attributes=Ei({},e.attributes)),t}function c8e(n,e,t){const i={key:e,source:t.source.key,target:t.target.key};return WX(t.attributes)||(i.attributes=Ei({},t.attributes)),n==="mixed"&&t.undirected&&(i.undirected=!0),i}function u8e(n){if(!Gi(n))throw new Ie('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in n))throw new Ie("Graph.import: serialized node is missing its key.");if("attributes"in n&&(!Gi(n.attributes)||n.attributes===null))throw new Ie("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function h8e(n){if(!Gi(n))throw new Ie('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in n))throw new Ie("Graph.import: serialized edge is missing its source.");if(!("target"in n))throw new Ie("Graph.import: serialized edge is missing its target.");if("attributes"in n&&(!Gi(n.attributes)||n.attributes===null))throw new Ie("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in n&&typeof n.undirected!="boolean")throw new Ie("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const d8e=gze(),f8e=new Set(["directed","undirected","mixed"]),f5=new Set(["domain","_events","_eventsCount","_maxListeners"]),g8e=[{name:n=>`${n}Edge`,generateKey:!0},{name:n=>`${n}DirectedEdge`,generateKey:!0,type:"directed"},{name:n=>`${n}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:n=>`${n}EdgeWithKey`},{name:n=>`${n}DirectedEdgeWithKey`,type:"directed"},{name:n=>`${n}UndirectedEdgeWithKey`,type:"undirected"}],p8e={allowSelfLoops:!0,multi:!1,type:"mixed"};function m8e(n,e,t){if(t&&!Gi(t))throw new Ie(`Graph.addNode: invalid attributes. Expecting an object but got "${t}"`);if(e=""+e,t=t||{},n._nodes.has(e))throw new Ye(`Graph.addNode: the "${e}" node already exist in the graph.`);const i=new n.NodeDataClass(e,t);return n._nodes.set(e,i),n.emit("nodeAdded",{key:e,attributes:t}),i}function g5(n,e,t){const i=new n.NodeDataClass(e,t);return n._nodes.set(e,i),n.emit("nodeAdded",{key:e,attributes:t}),i}function XX(n,e,t,i,r,s,o,a){if(!i&&n.type==="undirected")throw new Ye(`Graph.${e}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(i&&n.type==="directed")throw new Ye(`Graph.${e}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(a&&!Gi(a))throw new Ie(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`);if(s=""+s,o=""+o,a=a||{},!n.allowSelfLoops&&s===o)throw new Ye(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const l=n._nodes.get(s),c=n._nodes.get(o);if(!l)throw new _e(`Graph.${e}: source node "${s}" not found.`);if(!c)throw new _e(`Graph.${e}: target node "${o}" not found.`);const u={key:null,undirected:i,source:s,target:o,attributes:a};if(t)r=n._edgeKeyGenerator();else if(r=""+r,n._edges.has(r))throw new Ye(`Graph.${e}: the "${r}" edge already exists in the graph.`);if(!n.multi&&(i?typeof l.undirected[o]<"u":typeof l.out[o]<"u"))throw new Ye(`Graph.${e}: an edge linking "${s}" to "${o}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const h=new um(i,r,l,c,a);n._edges.set(r,h);const d=s===o;return i?(l.undirectedDegree++,c.undirectedDegree++,d&&(l.undirectedLoops++,n._undirectedSelfLoopCount++)):(l.outDegree++,c.inDegree++,d&&(l.directedLoops++,n._directedSelfLoopCount++)),n.multi?h.attachMulti():h.attach(),i?n._undirectedSize++:n._directedSize++,u.key=r,n.emit("edgeAdded",u),r}function b8e(n,e,t,i,r,s,o,a,l){if(!i&&n.type==="undirected")throw new Ye(`Graph.${e}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(i&&n.type==="directed")throw new Ye(`Graph.${e}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(a){if(l){if(typeof a!="function")throw new Ie(`Graph.${e}: invalid updater function. Expecting a function but got "${a}"`)}else if(!Gi(a))throw new Ie(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`)}s=""+s,o=""+o;let c;if(l&&(c=a,a=void 0),!n.allowSelfLoops&&s===o)throw new Ye(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let u=n._nodes.get(s),h=n._nodes.get(o),d,f;if(!t&&(d=n._edges.get(r),d)){if((d.source.key!==s||d.target.key!==o)&&(!i||d.source.key!==o||d.target.key!==s))throw new Ye(`Graph.${e}: inconsistency detected when attempting to merge the "${r}" edge with "${s}" source & "${o}" target vs. ("${d.source.key}", "${d.target.key}").`);f=d}if(!f&&!n.multi&&u&&(f=i?u.undirected[o]:u.out[o]),f){const y=[f.key,!1,!1,!1];if(l?!c:!a)return y;if(l){const w=f.attributes;f.attributes=c(w),n.emit("edgeAttributesUpdated",{type:"replace",key:f.key,attributes:f.attributes})}else Ei(f.attributes,a),n.emit("edgeAttributesUpdated",{type:"merge",key:f.key,attributes:f.attributes,data:a});return y}a=a||{},l&&c&&(a=c(a));const g={key:null,undirected:i,source:s,target:o,attributes:a};if(t)r=n._edgeKeyGenerator();else if(r=""+r,n._edges.has(r))throw new Ye(`Graph.${e}: the "${r}" edge already exists in the graph.`);let p=!1,m=!1;u||(u=g5(n,s,{}),p=!0,s===o&&(h=u,m=!0)),h||(h=g5(n,o,{}),m=!0),d=new um(i,r,u,h,a),n._edges.set(r,d);const v=s===o;return i?(u.undirectedDegree++,h.undirectedDegree++,v&&(u.undirectedLoops++,n._undirectedSelfLoopCount++)):(u.outDegree++,h.inDegree++,v&&(u.directedLoops++,n._directedSelfLoopCount++)),n.multi?d.attachMulti():d.attach(),i?n._undirectedSize++:n._directedSize++,g.key=r,n.emit("edgeAdded",g),[r,!0,p,m]}function Tg(n,e){n._edges.delete(e.key);const{source:t,target:i,attributes:r}=e,s=e.undirected,o=t===i;s?(t.undirectedDegree--,i.undirectedDegree--,o&&(t.undirectedLoops--,n._undirectedSelfLoopCount--)):(t.outDegree--,i.inDegree--,o&&(t.directedLoops--,n._directedSelfLoopCount--)),n.multi?e.detachMulti():e.detach(),s?n._undirectedSize--:n._directedSize--,n.emit("edgeDropped",{key:e.key,attributes:r,source:t.key,target:i.key,undirected:s})}class en extends $H.EventEmitter{constructor(e){if(super(),e=Ei({},p8e,e),typeof e.multi!="boolean")throw new Ie(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${e.multi}".`);if(!f8e.has(e.type))throw new Ie(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${e.type}".`);if(typeof e.allowSelfLoops!="boolean")throw new Ie(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${e.allowSelfLoops}".`);const t=e.type==="mixed"?jX:e.type==="directed"?zX:UX;Vs(this,"NodeDataClass",t);const i="geid_"+d8e()+"_";let r=0;const s=()=>{let o;do o=i+r++;while(this._edges.has(o));return o};Vs(this,"_attributes",{}),Vs(this,"_nodes",new Map),Vs(this,"_edges",new Map),Vs(this,"_directedSize",0),Vs(this,"_undirectedSize",0),Vs(this,"_directedSelfLoopCount",0),Vs(this,"_undirectedSelfLoopCount",0),Vs(this,"_edgeKeyGenerator",s),Vs(this,"_options",e),f5.forEach(o=>Vs(this,o,this[o])),Do(this,"order",()=>this._nodes.size),Do(this,"size",()=>this._edges.size),Do(this,"directedSize",()=>this._directedSize),Do(this,"undirectedSize",()=>this._undirectedSize),Do(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),Do(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),Do(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),Do(this,"multi",this._options.multi),Do(this,"type",this._options.type),Do(this,"allowSelfLoops",this._options.allowSelfLoops),Do(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(e){return this._nodes.has(""+e)}hasDirectedEdge(e,t){if(this.type==="undirected")return!1;if(arguments.length===1){const i=""+e,r=this._edges.get(i);return!!r&&!r.undirected}else if(arguments.length===2){e=""+e,t=""+t;const i=this._nodes.get(e);return i?i.out.hasOwnProperty(t):!1}throw new Ie(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(e,t){if(this.type==="directed")return!1;if(arguments.length===1){const i=""+e,r=this._edges.get(i);return!!r&&r.undirected}else if(arguments.length===2){e=""+e,t=""+t;const i=this._nodes.get(e);return i?i.undirected.hasOwnProperty(t):!1}throw new Ie(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(e,t){if(arguments.length===1){const i=""+e;return this._edges.has(i)}else if(arguments.length===2){e=""+e,t=""+t;const i=this._nodes.get(e);return i?typeof i.out<"u"&&i.out.hasOwnProperty(t)||typeof i.undirected<"u"&&i.undirected.hasOwnProperty(t):!1}throw new Ie(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(e,t){if(this.type==="undirected")return;if(e=""+e,t=""+t,this.multi)throw new Ye("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const i=this._nodes.get(e);if(!i)throw new _e(`Graph.directedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new _e(`Graph.directedEdge: could not find the "${t}" target node in the graph.`);const r=i.out&&i.out[t]||void 0;if(r)return r.key}undirectedEdge(e,t){if(this.type==="directed")return;if(e=""+e,t=""+t,this.multi)throw new Ye("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const i=this._nodes.get(e);if(!i)throw new _e(`Graph.undirectedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new _e(`Graph.undirectedEdge: could not find the "${t}" target node in the graph.`);const r=i.undirected&&i.undirected[t]||void 0;if(r)return r.key}edge(e,t){if(this.multi)throw new Ye("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,t=""+t;const i=this._nodes.get(e);if(!i)throw new _e(`Graph.edge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new _e(`Graph.edge: could not find the "${t}" target node in the graph.`);const r=i.out&&i.out[t]||i.undirected&&i.undirected[t]||void 0;if(r)return r.key}areDirectedNeighbors(e,t){e=""+e,t=""+t;const i=this._nodes.get(e);if(!i)throw new _e(`Graph.areDirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:t in i.in||t in i.out}areOutNeighbors(e,t){e=""+e,t=""+t;const i=this._nodes.get(e);if(!i)throw new _e(`Graph.areOutNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:t in i.out}areInNeighbors(e,t){e=""+e,t=""+t;const i=this._nodes.get(e);if(!i)throw new _e(`Graph.areInNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:t in i.in}areUndirectedNeighbors(e,t){e=""+e,t=""+t;const i=this._nodes.get(e);if(!i)throw new _e(`Graph.areUndirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="directed"?!1:t in i.undirected}areNeighbors(e,t){e=""+e,t=""+t;const i=this._nodes.get(e);if(!i)throw new _e(`Graph.areNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&(t in i.in||t in i.out)||this.type!=="directed"&&t in i.undirected}areInboundNeighbors(e,t){e=""+e,t=""+t;const i=this._nodes.get(e);if(!i)throw new _e(`Graph.areInboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&t in i.in||this.type!=="directed"&&t in i.undirected}areOutboundNeighbors(e,t){e=""+e,t=""+t;const i=this._nodes.get(e);if(!i)throw new _e(`Graph.areOutboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&t in i.out||this.type!=="directed"&&t in i.undirected}inDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new _e(`Graph.inDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree}outDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new _e(`Graph.outDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.outDegree}directedDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new _e(`Graph.directedDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree+t.outDegree}undirectedDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new _e(`Graph.undirectedDegree: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:t.undirectedDegree}inboundDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new _e(`Graph.inboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=t.undirectedDegree),this.type!=="undirected"&&(i+=t.inDegree),i}outboundDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new _e(`Graph.outboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=t.undirectedDegree),this.type!=="undirected"&&(i+=t.outDegree),i}degree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new _e(`Graph.degree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=t.undirectedDegree),this.type!=="undirected"&&(i+=t.inDegree+t.outDegree),i}inDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new _e(`Graph.inDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree-t.directedLoops}outDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new _e(`Graph.outDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.outDegree-t.directedLoops}directedDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new _e(`Graph.directedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree+t.outDegree-t.directedLoops*2}undirectedDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new _e(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:t.undirectedDegree-t.undirectedLoops*2}inboundDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new _e(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=t.undirectedDegree,r+=t.undirectedLoops*2),this.type!=="undirected"&&(i+=t.inDegree,r+=t.directedLoops),i-r}outboundDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new _e(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=t.undirectedDegree,r+=t.undirectedLoops*2),this.type!=="undirected"&&(i+=t.outDegree,r+=t.directedLoops),i-r}degreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new _e(`Graph.degreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=t.undirectedDegree,r+=t.undirectedLoops*2),this.type!=="undirected"&&(i+=t.inDegree+t.outDegree,r+=t.directedLoops*2),i-r}source(e){e=""+e;const t=this._edges.get(e);if(!t)throw new _e(`Graph.source: could not find the "${e}" edge in the graph.`);return t.source.key}target(e){e=""+e;const t=this._edges.get(e);if(!t)throw new _e(`Graph.target: could not find the "${e}" edge in the graph.`);return t.target.key}extremities(e){e=""+e;const t=this._edges.get(e);if(!t)throw new _e(`Graph.extremities: could not find the "${e}" edge in the graph.`);return[t.source.key,t.target.key]}opposite(e,t){e=""+e,t=""+t;const i=this._edges.get(t);if(!i)throw new _e(`Graph.opposite: could not find the "${t}" edge in the graph.`);const r=i.source.key,s=i.target.key;if(e===r)return s;if(e===s)return r;throw new _e(`Graph.opposite: the "${e}" node is not attached to the "${t}" edge (${r}, ${s}).`)}hasExtremity(e,t){e=""+e,t=""+t;const i=this._edges.get(e);if(!i)throw new _e(`Graph.hasExtremity: could not find the "${e}" edge in the graph.`);return i.source.key===t||i.target.key===t}isUndirected(e){e=""+e;const t=this._edges.get(e);if(!t)throw new _e(`Graph.isUndirected: could not find the "${e}" edge in the graph.`);return t.undirected}isDirected(e){e=""+e;const t=this._edges.get(e);if(!t)throw new _e(`Graph.isDirected: could not find the "${e}" edge in the graph.`);return!t.undirected}isSelfLoop(e){e=""+e;const t=this._edges.get(e);if(!t)throw new _e(`Graph.isSelfLoop: could not find the "${e}" edge in the graph.`);return t.source===t.target}addNode(e,t){return m8e(this,e,t).key}mergeNode(e,t){if(t&&!Gi(t))throw new Ie(`Graph.mergeNode: invalid attributes. Expecting an object but got "${t}"`);e=""+e,t=t||{};let i=this._nodes.get(e);return i?(t&&(Ei(i.attributes,t),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:i.attributes,data:t})),[e,!1]):(i=new this.NodeDataClass(e,t),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:t}),[e,!0])}updateNode(e,t){if(t&&typeof t!="function")throw new Ie(`Graph.updateNode: invalid updater function. Expecting a function but got "${t}"`);e=""+e;let i=this._nodes.get(e);if(i){if(t){const s=i.attributes;i.attributes=t(s),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:i.attributes})}return[e,!1]}const r=t?t({}):{};return i=new this.NodeDataClass(e,r),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:r}),[e,!0]}dropNode(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new _e(`Graph.dropNode: could not find the "${e}" node in the graph.`);let i;if(this.type!=="undirected"){for(const r in t.out){i=t.out[r];do Tg(this,i),i=i.next;while(i)}for(const r in t.in){i=t.in[r];do Tg(this,i),i=i.next;while(i)}}if(this.type!=="directed")for(const r in t.undirected){i=t.undirected[r];do Tg(this,i),i=i.next;while(i)}this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:t.attributes})}dropEdge(e){let t;if(arguments.length>1){const i=""+arguments[0],r=""+arguments[1];if(t=ro(this,i,r,this.type),!t)throw new _e(`Graph.dropEdge: could not find the "${i}" -> "${r}" edge in the graph.`)}else if(e=""+e,t=this._edges.get(e),!t)throw new _e(`Graph.dropEdge: could not find the "${e}" edge in the graph.`);return Tg(this,t),this}dropDirectedEdge(e,t){if(arguments.length<2)throw new Ye("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new Ye("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");e=""+e,t=""+t;const i=ro(this,e,t,"directed");if(!i)throw new _e(`Graph.dropDirectedEdge: could not find a "${e}" -> "${t}" edge in the graph.`);return Tg(this,i),this}dropUndirectedEdge(e,t){if(arguments.length<2)throw new Ye("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new Ye("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const i=ro(this,e,t,"undirected");if(!i)throw new _e(`Graph.dropUndirectedEdge: could not find a "${e}" -> "${t}" edge in the graph.`);return Tg(this,i),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const e=this._nodes.values();let t;for(;t=e.next(),t.done!==!0;)t.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(e){return this._attributes[e]}getAttributes(){return this._attributes}hasAttribute(e){return this._attributes.hasOwnProperty(e)}setAttribute(e,t){return this._attributes[e]=t,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}updateAttribute(e,t){if(typeof t!="function")throw new Ie("Graph.updateAttribute: updater should be a function.");const i=this._attributes[e];return this._attributes[e]=t(i),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}removeAttribute(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this}replaceAttributes(e){if(!Gi(e))throw new Ie("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(e){if(!Gi(e))throw new Ie("Graph.mergeAttributes: provided attributes are not a plain object.");return Ei(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this}updateAttributes(e){if(typeof e!="function")throw new Ie("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(e,t){if(typeof e!="function")throw new Ie("Graph.updateEachNodeAttributes: expecting an updater function.");if(t&&!d5(t))throw new Ie("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._nodes.values();let r,s;for(;r=i.next(),r.done!==!0;)s=r.value,s.attributes=e(s.key,s.attributes);this.emit("eachNodeAttributesUpdated",{hints:t||null})}updateEachEdgeAttributes(e,t){if(typeof e!="function")throw new Ie("Graph.updateEachEdgeAttributes: expecting an updater function.");if(t&&!d5(t))throw new Ie("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._edges.values();let r,s,o,a;for(;r=i.next(),r.done!==!0;)s=r.value,o=s.source,a=s.target,s.attributes=e(s.key,s.attributes,o.key,a.key,o.attributes,a.attributes,s.undirected);this.emit("eachEdgeAttributesUpdated",{hints:t||null})}forEachAdjacencyEntry(e){if(typeof e!="function")throw new Ie("Graph.forEachAdjacencyEntry: expecting a callback.");rS(!1,!1,!1,this,e)}forEachAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new Ie("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");rS(!1,!1,!0,this,e)}forEachAssymetricAdjacencyEntry(e){if(typeof e!="function")throw new Ie("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");rS(!1,!0,!1,this,e)}forEachAssymetricAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new Ie("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");rS(!1,!0,!0,this,e)}nodes(){return typeof Array.from=="function"?Array.from(this._nodes.keys()):VX(this._nodes.keys(),this._nodes.size)}forEachNode(e){if(typeof e!="function")throw new Ie("Graph.forEachNode: expecting a callback.");const t=this._nodes.values();let i,r;for(;i=t.next(),i.done!==!0;)r=i.value,e(r.key,r.attributes)}findNode(e){if(typeof e!="function")throw new Ie("Graph.findNode: expecting a callback.");const t=this._nodes.values();let i,r;for(;i=t.next(),i.done!==!0;)if(r=i.value,e(r.key,r.attributes))return r.key}mapNodes(e){if(typeof e!="function")throw new Ie("Graph.mapNode: expecting a callback.");const t=this._nodes.values();let i,r;const s=new Array(this.order);let o=0;for(;i=t.next(),i.done!==!0;)r=i.value,s[o++]=e(r.key,r.attributes);return s}someNode(e){if(typeof e!="function")throw new Ie("Graph.someNode: expecting a callback.");const t=this._nodes.values();let i,r;for(;i=t.next(),i.done!==!0;)if(r=i.value,e(r.key,r.attributes))return!0;return!1}everyNode(e){if(typeof e!="function")throw new Ie("Graph.everyNode: expecting a callback.");const t=this._nodes.values();let i,r;for(;i=t.next(),i.done!==!0;)if(r=i.value,!e(r.key,r.attributes))return!1;return!0}filterNodes(e){if(typeof e!="function")throw new Ie("Graph.filterNodes: expecting a callback.");const t=this._nodes.values();let i,r;const s=[];for(;i=t.next(),i.done!==!0;)r=i.value,e(r.key,r.attributes)&&s.push(r.key);return s}reduceNodes(e,t){if(typeof e!="function")throw new Ie("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new Ie("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let i=t;const r=this._nodes.values();let s,o;for(;s=r.next(),s.done!==!0;)o=s.value,i=e(i,o.key,o.attributes);return i}nodeEntries(){const e=this._nodes.values();return new ho(()=>{const t=e.next();if(t.done)return t;const i=t.value;return{value:{node:i.key,attributes:i.attributes},done:!1}})}export(){const e=new Array(this._nodes.size);let t=0;this._nodes.forEach((r,s)=>{e[t++]=l8e(s,r)});const i=new Array(this._edges.size);return t=0,this._edges.forEach((r,s)=>{i[t++]=c8e(this.type,s,r)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:i}}import(e,t=!1){if(e instanceof en)return e.forEachNode((l,c)=>{t?this.mergeNode(l,c):this.addNode(l,c)}),e.forEachEdge((l,c,u,h,d,f,g)=>{t?g?this.mergeUndirectedEdgeWithKey(l,u,h,c):this.mergeDirectedEdgeWithKey(l,u,h,c):g?this.addUndirectedEdgeWithKey(l,u,h,c):this.addDirectedEdgeWithKey(l,u,h,c)}),this;if(!Gi(e))throw new Ie("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!Gi(e.attributes))throw new Ie("Graph.import: invalid attributes. Expecting a plain object.");t?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}let i,r,s,o,a;if(e.nodes){if(s=e.nodes,!Array.isArray(s))throw new Ie("Graph.import: invalid nodes. Expecting an array.");for(i=0,r=s.length;i<r;i++){o=s[i],u8e(o);const{key:l,attributes:c}=o;t?this.mergeNode(l,c):this.addNode(l,c)}}if(e.edges){let l=!1;if(this.type==="undirected"&&(l=!0),s=e.edges,!Array.isArray(s))throw new Ie("Graph.import: invalid edges. Expecting an array.");for(i=0,r=s.length;i<r;i++){a=s[i],h8e(a);const{source:c,target:u,attributes:h,undirected:d=l}=a;let f;"key"in a?(f=t?d?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:d?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,f.call(this,a.key,c,u,h)):(f=t?d?this.mergeUndirectedEdge:this.mergeDirectedEdge:d?this.addUndirectedEdge:this.addDirectedEdge,f.call(this,c,u,h))}}return this}nullCopy(e){const t=new en(Ei({},this._options,e));return t.replaceAttributes(Ei({},this.getAttributes())),t}emptyCopy(e){const t=this.nullCopy(e);return this._nodes.forEach((i,r)=>{const s=Ei({},i.attributes);i=new t.NodeDataClass(r,s),t._nodes.set(r,i)}),t}copy(e){if(e=e||{},typeof e.type=="string"&&e.type!==this.type&&e.type!=="mixed")throw new Ye(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${e.type}" because this would mean losing information about the current graph.`);if(typeof e.multi=="boolean"&&e.multi!==this.multi&&e.multi!==!0)throw new Ye("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof e.allowSelfLoops=="boolean"&&e.allowSelfLoops!==this.allowSelfLoops&&e.allowSelfLoops!==!0)throw new Ye("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const t=this.emptyCopy(e),i=this._edges.values();let r,s;for(;r=i.next(),r.done!==!0;)s=r.value,XX(t,"copy",!1,s.undirected,s.key,s.source.key,s.target.key,Ei({},s.attributes));return t}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const e={};this._nodes.forEach((s,o)=>{e[o]=s.attributes});const t={},i={};this._edges.forEach((s,o)=>{const a=s.undirected?"--":"->";let l="",c=s.source.key,u=s.target.key,h;s.undirected&&c>u&&(h=c,c=u,u=h);const d=`(${c})${a}(${u})`;o.startsWith("geid_")?this.multi&&(typeof i[d]>"u"?i[d]=0:i[d]++,l+=`${i[d]}. `):l+=`[${o}]: `,l+=d,t[l]=s.attributes});const r={};for(const s in this)this.hasOwnProperty(s)&&!f5.has(s)&&typeof this[s]!="function"&&typeof s!="symbol"&&(r[s]=this[s]);return r.attributes=this._attributes,r.nodes=e,r.edges=t,Vs(r,"constructor",this.constructor),r}}typeof Symbol<"u"&&(en.prototype[Symbol.for("nodejs.util.inspect.custom")]=en.prototype.inspect);g8e.forEach(n=>{["add","merge","update"].forEach(e=>{const t=n.name(e),i=e==="add"?XX:b8e;n.generateKey?en.prototype[t]=function(r,s,o){return i(this,t,!0,(n.type||this.type)==="undirected",null,r,s,o,e==="update")}:en.prototype[t]=function(r,s,o,a){return i(this,t,!1,(n.type||this.type)==="undirected",r,s,o,a,e==="update")}})});xze(en);Hze(en);Jze(en);a8e(en);class ZX extends en{constructor(e){const t=Ei({type:"directed"},e);if("multi"in t&&t.multi!==!1)throw new Ie("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(t.type!=="directed")throw new Ie('DirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}class QX extends en{constructor(e){const t=Ei({type:"undirected"},e);if("multi"in t&&t.multi!==!1)throw new Ie("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(t.type!=="undirected")throw new Ie('UndirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}class JX extends en{constructor(e){const t=Ei({multi:!0},e);if("multi"in t&&t.multi!==!0)throw new Ie("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(t)}}class eZ extends en{constructor(e){const t=Ei({type:"directed",multi:!0},e);if("multi"in t&&t.multi!==!0)throw new Ie("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(t.type!=="directed")throw new Ie('MultiDirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}class tZ extends en{constructor(e){const t=Ei({type:"undirected",multi:!0},e);if("multi"in t&&t.multi!==!0)throw new Ie("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(t.type!=="undirected")throw new Ie('MultiUndirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}function hm(n){n.from=function(e,t){const i=Ei({},e.options,t),r=new n(i);return r.import(e),r}}hm(en);hm(ZX);hm(QX);hm(JX);hm(eZ);hm(tZ);en.Graph=en;en.DirectedGraph=ZX;en.UndirectedGraph=QX;en.MultiGraph=JX;en.MultiDirectedGraph=eZ;en.MultiUndirectedGraph=tZ;en.InvalidArgumentsGraphError=Ie;en.NotFoundGraphError=_e;en.UsageGraphError=Ye;function v8e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Zv(n){var e=v8e(n,"string");return typeof e=="symbol"?e:e+""}function br(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function p5(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,Zv(i.key),i)}}function vr(n,e,t){return e&&p5(n.prototype,e),t&&p5(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function Lp(n){return Lp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Lp(n)}function nZ(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nZ=function(){return!!n})()}function Se(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function w8e(n,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Se(n)}function vo(n,e,t){return e=Lp(e),w8e(n,nZ()?Reflect.construct(e,t||[],Lp(n).constructor):e.apply(n,t))}function fO(n,e){return fO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t},fO(n,e)}function wo(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&fO(n,e)}function y8e(n){if(Array.isArray(n))return n}function C8e(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i,r,s,o,a=[],l=!0,c=!1;try{if(s=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(i=s.call(t)).done)&&(a.push(i.value),a.length!==e);l=!0);}catch(u){c=!0,r=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw r}}return a}}function gO(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=Array(e);t<e;t++)i[t]=n[t];return i}function iZ(n,e){if(n){if(typeof n=="string")return gO(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?gO(n,e):void 0}}function S8e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zR(n,e){return y8e(n)||C8e(n,e)||iZ(n,e)||S8e()}var CA={black:"#000000",silver:"#C0C0C0",gray:"#808080",grey:"#808080",white:"#FFFFFF",maroon:"#800000",red:"#FF0000",purple:"#800080",fuchsia:"#FF00FF",green:"#008000",lime:"#00FF00",olive:"#808000",yellow:"#FFFF00",navy:"#000080",blue:"#0000FF",teal:"#008080",aqua:"#00FFFF",darkblue:"#00008B",mediumblue:"#0000CD",darkgreen:"#006400",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",springgreen:"#00FF7F",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",rebeccapurple:"#663399",mediumaquamarine:"#66CDAA",dimgray:"#696969",dimgrey:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",slategrey:"#708090",lightslategray:"#778899",lightslategrey:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370DB",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",palevioletred:"#DB7093",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",lightyellow:"#FFFFE0",ivory:"#FFFFF0"},rZ=new Int8Array(4),SA=new Int32Array(rZ.buffer,0,1),_8e=new Float32Array(rZ.buffer,0,1),R8e=/^\s*rgba?\s*\(/,E8e=/^\s*rgba?\s*\(\s*([0-9]*)\s*,\s*([0-9]*)\s*,\s*([0-9]*)(?:\s*,\s*(.*)?)?\)\s*$/;function x8e(n){var e=0,t=0,i=0,r=1;if(n[0]==="#")n.length===4?(e=parseInt(n.charAt(1)+n.charAt(1),16),t=parseInt(n.charAt(2)+n.charAt(2),16),i=parseInt(n.charAt(3)+n.charAt(3),16)):(e=parseInt(n.charAt(1)+n.charAt(2),16),t=parseInt(n.charAt(3)+n.charAt(4),16),i=parseInt(n.charAt(5)+n.charAt(6),16)),n.length===9&&(r=parseInt(n.charAt(7)+n.charAt(8),16)/255);else if(R8e.test(n)){var s=n.match(E8e);s&&(e=+s[1],t=+s[2],i=+s[3],s[4]&&(r=+s[4]))}return{r:e,g:t,b:i,a:r}}var bp={};for(var sS in CA)bp[sS]=dm(CA[sS]),bp[CA[sS]]=bp[sS];function sZ(n,e,t,i,r){return SA[0]=i<<24|t<<16|e<<8|n,SA[0]=SA[0]&4278190079,_8e[0]}function dm(n){if(n=n.toLowerCase(),typeof bp[n]<"u")return bp[n];var e=x8e(n),t=e.r,i=e.g,r=e.b,s=e.a;s=s*255|0;var o=sZ(t,i,r,s);return bp[n]=o,o}var _A={};function oZ(n){if(typeof _A[n]<"u")return _A[n];var e=(n&16711680)>>>16,t=(n&65280)>>>8,i=n&255,r=255,s=sZ(e,t,i,r);return _A[n]=s,s}function m5(n,e,t,i){return t+(e<<8)+(n<<16)}function b5(n,e,t,i,r,s){var o=Math.floor(t/s*r),a=Math.floor(n.drawingBufferHeight/s-i/s*r),l=new Uint8Array(4);n.bindFramebuffer(n.FRAMEBUFFER,e),n.readPixels(o,a,1,1,n.RGBA,n.UNSIGNED_BYTE,l);var c=zR(l,4),u=c[0],h=c[1],d=c[2],f=c[3];return[u,h,d,f]}function me(n,e,t){return(e=Zv(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function v5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function We(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?v5(Object(t),!0).forEach(function(i){me(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):v5(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function T8e(n,e){for(;!{}.hasOwnProperty.call(n,e)&&(n=Lp(n))!==null;);return n}function pO(){return pO=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(n,e,t){var i=T8e(n,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?n:t):r.value}},pO.apply(null,arguments)}function aZ(n,e,t,i){var r=pO(Lp(n.prototype),e,t);return typeof r=="function"?function(s){return r.apply(t,s)}:r}function M8e(n){return n.normalized?1:n.size}function RA(n){var e=0;return n.forEach(function(t){return e+=M8e(t)}),e}function lZ(n,e,t){var i=n==="VERTEX"?e.VERTEX_SHADER:e.FRAGMENT_SHADER,r=e.createShader(i);if(r===null)throw new Error("loadShader: error while creating the shader");e.shaderSource(r,t),e.compileShader(r);var s=e.getShaderParameter(r,e.COMPILE_STATUS);if(!s){var o=e.getShaderInfoLog(r);throw e.deleteShader(r),new Error(`loadShader: error while compiling the shader:
`.concat(o,`
`).concat(t))}return r}function A8e(n,e){return lZ("VERTEX",n,e)}function P8e(n,e){return lZ("FRAGMENT",n,e)}function I8e(n,e){var t=n.createProgram();if(t===null)throw new Error("loadProgram: error while creating the program.");var i,r;for(i=0,r=e.length;i<r;i++)n.attachShader(t,e[i]);n.linkProgram(t);var s=n.getProgramParameter(t,n.LINK_STATUS);if(!s)throw n.deleteProgram(t),new Error("loadProgram: error while linking the program.");return t}function w5(n){var e=n.gl,t=n.buffer,i=n.program,r=n.vertexShader,s=n.fragmentShader;e.deleteShader(r),e.deleteShader(s),e.deleteProgram(i),e.deleteBuffer(t)}var y5=`#define PICKING_MODE
`,O8e=me(me(me(me(me(me(me(me({},WebGL2RenderingContext.BOOL,1),WebGL2RenderingContext.BYTE,1),WebGL2RenderingContext.UNSIGNED_BYTE,1),WebGL2RenderingContext.SHORT,2),WebGL2RenderingContext.UNSIGNED_SHORT,2),WebGL2RenderingContext.INT,4),WebGL2RenderingContext.UNSIGNED_INT,4),WebGL2RenderingContext.FLOAT,4),cZ=function(){function n(e,t,i){br(this,n),me(this,"array",new Float32Array),me(this,"constantArray",new Float32Array),me(this,"capacity",0),me(this,"verticesCount",0);var r=this.getDefinition();if(this.VERTICES=r.VERTICES,this.VERTEX_SHADER_SOURCE=r.VERTEX_SHADER_SOURCE,this.FRAGMENT_SHADER_SOURCE=r.FRAGMENT_SHADER_SOURCE,this.UNIFORMS=r.UNIFORMS,this.ATTRIBUTES=r.ATTRIBUTES,this.METHOD=r.METHOD,this.CONSTANT_ATTRIBUTES="CONSTANT_ATTRIBUTES"in r?r.CONSTANT_ATTRIBUTES:[],this.CONSTANT_DATA="CONSTANT_DATA"in r?r.CONSTANT_DATA:[],this.isInstanced="CONSTANT_ATTRIBUTES"in r,this.ATTRIBUTES_ITEMS_COUNT=RA(this.ATTRIBUTES),this.STRIDE=this.VERTICES*this.ATTRIBUTES_ITEMS_COUNT,this.renderer=i,this.normalProgram=this.getProgramInfo("normal",e,r.VERTEX_SHADER_SOURCE,r.FRAGMENT_SHADER_SOURCE,null),this.pickProgram=t?this.getProgramInfo("pick",e,y5+r.VERTEX_SHADER_SOURCE,y5+r.FRAGMENT_SHADER_SOURCE,t):null,this.isInstanced){var s=RA(this.CONSTANT_ATTRIBUTES);if(this.CONSTANT_DATA.length!==this.VERTICES)throw new Error("Program: error while getting constant data (expected ".concat(this.VERTICES," items, received ").concat(this.CONSTANT_DATA.length," instead)"));this.constantArray=new Float32Array(this.CONSTANT_DATA.length*s);for(var o=0;o<this.CONSTANT_DATA.length;o++){var a=this.CONSTANT_DATA[o];if(a.length!==s)throw new Error("Program: error while getting constant data (one vector has ".concat(a.length," items instead of ").concat(s,")"));for(var l=0;l<a.length;l++)this.constantArray[o*s+l]=a[l]}this.STRIDE=this.ATTRIBUTES_ITEMS_COUNT}}return vr(n,[{key:"kill",value:function(){w5(this.normalProgram),this.pickProgram&&(w5(this.pickProgram),this.pickProgram=null)}},{key:"getProgramInfo",value:function(t,i,r,s,o){var a=this.getDefinition(),l=i.createBuffer();if(l===null)throw new Error("Program: error while creating the WebGL buffer.");var c=A8e(i,r),u=P8e(i,s),h=I8e(i,[c,u]),d={};a.UNIFORMS.forEach(function(p){var m=i.getUniformLocation(h,p);m&&(d[p]=m)});var f={};a.ATTRIBUTES.forEach(function(p){f[p.name]=i.getAttribLocation(h,p.name)});var g;if("CONSTANT_ATTRIBUTES"in a&&(a.CONSTANT_ATTRIBUTES.forEach(function(p){f[p.name]=i.getAttribLocation(h,p.name)}),g=i.createBuffer(),g===null))throw new Error("Program: error while creating the WebGL constant buffer.");return{name:t,program:h,gl:i,frameBuffer:o,buffer:l,constantBuffer:g||{},uniformLocations:d,attributeLocations:f,isPicking:t==="pick",vertexShader:c,fragmentShader:u}}},{key:"bindProgram",value:function(t){var i=this,r=0,s=t.gl,o=t.buffer;this.isInstanced?(s.bindBuffer(s.ARRAY_BUFFER,t.constantBuffer),r=0,this.CONSTANT_ATTRIBUTES.forEach(function(a){return r+=i.bindAttribute(a,t,r,!1)}),s.bufferData(s.ARRAY_BUFFER,this.constantArray,s.STATIC_DRAW),s.bindBuffer(s.ARRAY_BUFFER,t.buffer),r=0,this.ATTRIBUTES.forEach(function(a){return r+=i.bindAttribute(a,t,r,!0)}),s.bufferData(s.ARRAY_BUFFER,this.array,s.DYNAMIC_DRAW)):(s.bindBuffer(s.ARRAY_BUFFER,o),r=0,this.ATTRIBUTES.forEach(function(a){return r+=i.bindAttribute(a,t,r)}),s.bufferData(s.ARRAY_BUFFER,this.array,s.DYNAMIC_DRAW)),s.bindBuffer(s.ARRAY_BUFFER,null)}},{key:"unbindProgram",value:function(t){var i=this;this.isInstanced?(this.CONSTANT_ATTRIBUTES.forEach(function(r){return i.unbindAttribute(r,t,!1)}),this.ATTRIBUTES.forEach(function(r){return i.unbindAttribute(r,t,!0)})):this.ATTRIBUTES.forEach(function(r){return i.unbindAttribute(r,t)})}},{key:"bindAttribute",value:function(t,i,r,s){var o=O8e[t.type];if(typeof o!="number")throw new Error('Program.bind: yet unsupported attribute type "'.concat(t.type,'"'));var a=i.attributeLocations[t.name],l=i.gl;if(a!==-1){l.enableVertexAttribArray(a);var c=this.isInstanced?(s?this.ATTRIBUTES_ITEMS_COUNT:RA(this.CONSTANT_ATTRIBUTES))*Float32Array.BYTES_PER_ELEMENT:this.ATTRIBUTES_ITEMS_COUNT*Float32Array.BYTES_PER_ELEMENT;if(l.vertexAttribPointer(a,t.size,t.type,t.normalized||!1,c,r),this.isInstanced&&s)if(l instanceof WebGL2RenderingContext)l.vertexAttribDivisor(a,1);else{var u=l.getExtension("ANGLE_instanced_arrays");u&&u.vertexAttribDivisorANGLE(a,1)}}return t.size*o}},{key:"unbindAttribute",value:function(t,i,r){var s=i.attributeLocations[t.name],o=i.gl;if(s!==-1&&(o.disableVertexAttribArray(s),this.isInstanced&&r))if(o instanceof WebGL2RenderingContext)o.vertexAttribDivisor(s,0);else{var a=o.getExtension("ANGLE_instanced_arrays");a&&a.vertexAttribDivisorANGLE(s,0)}}},{key:"reallocate",value:function(t){t!==this.capacity&&(this.capacity=t,this.verticesCount=this.VERTICES*t,this.array=new Float32Array(this.isInstanced?this.capacity*this.ATTRIBUTES_ITEMS_COUNT:this.verticesCount*this.ATTRIBUTES_ITEMS_COUNT))}},{key:"hasNothingToRender",value:function(){return this.verticesCount===0}},{key:"renderProgram",value:function(t,i){var r=i.gl,s=i.program;r.enable(r.BLEND),r.useProgram(s),this.setUniforms(t,i),this.drawWebGL(this.METHOD,i)}},{key:"render",value:function(t){this.hasNothingToRender()||(this.pickProgram&&(this.pickProgram.gl.viewport(0,0,t.width*t.pixelRatio/t.downSizingRatio,t.height*t.pixelRatio/t.downSizingRatio),this.bindProgram(this.pickProgram),this.renderProgram(We(We({},t),{},{pixelRatio:t.pixelRatio/t.downSizingRatio}),this.pickProgram),this.unbindProgram(this.pickProgram)),this.normalProgram.gl.viewport(0,0,t.width*t.pixelRatio,t.height*t.pixelRatio),this.bindProgram(this.normalProgram),this.renderProgram(t,this.normalProgram),this.unbindProgram(this.normalProgram))}},{key:"drawWebGL",value:function(t,i){var r=i.gl,s=i.frameBuffer;if(r.bindFramebuffer(r.FRAMEBUFFER,s),!this.isInstanced)r.drawArrays(t,0,this.verticesCount);else if(r instanceof WebGL2RenderingContext)r.drawArraysInstanced(t,0,this.VERTICES,this.capacity);else{var o=r.getExtension("ANGLE_instanced_arrays");o&&o.drawArraysInstancedANGLE(t,0,this.VERTICES,this.capacity)}}}]),n}(),uZ=function(n){wo(e,n);function e(){return br(this,e),vo(this,e,arguments)}return vr(e,[{key:"kill",value:function(){aZ(e,"kill",this)([])}},{key:"process",value:function(i,r,s){var o=r*this.STRIDE;if(s.hidden){for(var a=o+this.STRIDE;o<a;o++)this.array[o]=0;return}return this.processVisibleItem(oZ(i),o,s)}}]),e}(cZ),UH=function(n){wo(e,n);function e(){var t;br(this,e);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return t=vo(this,e,[].concat(r)),me(Se(t),"drawLabel",void 0),t}return vr(e,[{key:"kill",value:function(){aZ(e,"kill",this)([])}},{key:"process",value:function(i,r,s,o,a){var l=r*this.STRIDE;if(a.hidden||s.hidden||o.hidden){for(var c=l+this.STRIDE;l<c;l++)this.array[l]=0;return}return this.processVisibleItem(oZ(i),l,s,o,a)}}]),e}(cZ);function k8e(n,e){return function(){function t(i,r,s){br(this,t),me(this,"drawLabel",e),this.programs=n.map(function(o){return new o(i,r,s)})}return vr(t,[{key:"reallocate",value:function(r){this.programs.forEach(function(s){return s.reallocate(r)})}},{key:"process",value:function(r,s,o,a,l){this.programs.forEach(function(c){return c.process(r,s,o,a,l)})}},{key:"render",value:function(r){this.programs.forEach(function(s){return s.render(r)})}},{key:"kill",value:function(){this.programs.forEach(function(r){return r.kill()})}}]),t}()}function D8e(n,e,t,i,r){var s=r.edgeLabelSize,o=r.edgeLabelFont,a=r.edgeLabelWeight,l=r.edgeLabelColor.attribute?e[r.edgeLabelColor.attribute]||r.edgeLabelColor.color||"#000":r.edgeLabelColor.color,c=e.label;if(c){n.fillStyle=l,n.font="".concat(a," ").concat(s,"px ").concat(o);var u=t.size,h=i.size,d=t.x,f=t.y,g=i.x,p=i.y,m=(d+g)/2,v=(f+p)/2,y=g-d,w=p-f,R=Math.sqrt(y*y+w*w);if(!(R<u+h)){d+=y*u/R,f+=w*u/R,g-=y*h/R,p-=w*h/R,m=(d+g)/2,v=(f+p)/2,y=g-d,w=p-f,R=Math.sqrt(y*y+w*w);var x=n.measureText(c).width;if(x>R){var S="…";for(c=c+S,x=n.measureText(c).width;x>R&&c.length>1;)c=c.slice(0,-2)+S,x=n.measureText(c).width;if(c.length<4)return}var T;y>0?w>0?T=Math.acos(y/R):T=Math.asin(w/R):w>0?T=Math.acos(y/R)+Math.PI:T=Math.asin(y/R)+Math.PI/2,n.save(),n.translate(m,v),n.rotate(T),n.fillText(c,-x/2,e.size/2+s),n.restore()}}}function hZ(n,e,t){if(e.label){var i=t.labelSize,r=t.labelFont,s=t.labelWeight,o=t.labelColor.attribute?e[t.labelColor.attribute]||t.labelColor.color||"#000":t.labelColor.color;n.fillStyle=o,n.font="".concat(s," ").concat(i,"px ").concat(r),n.fillText(e.label,e.x+e.size+3,e.y+i/3)}}function L8e(n,e,t){var i=t.labelSize,r=t.labelFont,s=t.labelWeight;n.font="".concat(s," ").concat(i,"px ").concat(r),n.fillStyle="#FFF",n.shadowOffsetX=0,n.shadowOffsetY=0,n.shadowBlur=8,n.shadowColor="#000";var o=2;if(typeof e.label=="string"){var a=n.measureText(e.label).width,l=Math.round(a+5),c=Math.round(i+2*o),u=Math.max(e.size,i/2)+o,h=Math.asin(c/2/u),d=Math.sqrt(Math.abs(Math.pow(u,2)-Math.pow(c/2,2)));n.beginPath(),n.moveTo(e.x+d,e.y+c/2),n.lineTo(e.x+u+l,e.y+c/2),n.lineTo(e.x+u+l,e.y-c/2),n.lineTo(e.x+d,e.y-c/2),n.arc(e.x,e.y,u,h,-h),n.closePath(),n.fill()}else n.beginPath(),n.arc(e.x,e.y,e.size+o,0,Math.PI*2),n.closePath(),n.fill();n.shadowOffsetX=0,n.shadowOffsetY=0,n.shadowBlur=0,hZ(n,e,t)}var N8e=`
precision highp float;

varying vec4 v_color;
varying vec2 v_diffVector;
varying float v_radius;

uniform float u_correctionRatio;

const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main(void) {
  float border = u_correctionRatio * 2.0;
  float dist = length(v_diffVector) - v_radius + border;

  // No antialiasing for picking mode:
  #ifdef PICKING_MODE
  if (dist > border)
    gl_FragColor = transparent;
  else
    gl_FragColor = v_color;

  #else
  float t = 0.0;
  if (dist > border)
    t = 1.0;
  else if (dist > 0.0)
    t = dist / border;

  gl_FragColor = mix(v_color, transparent, t);
  #endif
}
`,H8e=N8e,$8e=`
attribute vec4 a_id;
attribute vec4 a_color;
attribute vec2 a_position;
attribute float a_size;
attribute float a_angle;

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_correctionRatio;

varying vec4 v_color;
varying vec2 v_diffVector;
varying float v_radius;
varying float v_border;

const float bias = 255.0 / 254.0;

void main() {
  float size = a_size * u_correctionRatio / u_sizeRatio * 4.0;
  vec2 diffVector = size * vec2(cos(a_angle), sin(a_angle));
  vec2 position = a_position + diffVector;
  gl_Position = vec4(
    (u_matrix * vec3(position, 1)).xy,
    0,
    1
  );

  v_diffVector = diffVector;
  v_radius = size / 2.0;

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,F8e=$8e,dZ=WebGLRenderingContext,C5=dZ.UNSIGNED_BYTE,EA=dZ.FLOAT,B8e=["u_sizeRatio","u_correctionRatio","u_matrix"],$E=function(n){wo(e,n);function e(){return br(this,e),vo(this,e,arguments)}return vr(e,[{key:"getDefinition",value:function(){return{VERTICES:3,VERTEX_SHADER_SOURCE:F8e,FRAGMENT_SHADER_SOURCE:H8e,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:B8e,ATTRIBUTES:[{name:"a_position",size:2,type:EA},{name:"a_size",size:1,type:EA},{name:"a_color",size:4,type:C5,normalized:!0},{name:"a_id",size:4,type:C5,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_angle",size:1,type:EA}],CONSTANT_DATA:[[e.ANGLE_1],[e.ANGLE_2],[e.ANGLE_3]]}}},{key:"processVisibleItem",value:function(i,r,s){var o=this.array,a=dm(s.color);o[r++]=s.x,o[r++]=s.y,o[r++]=s.size,o[r++]=a,o[r++]=i}},{key:"setUniforms",value:function(i,r){var s=r.gl,o=r.uniformLocations,a=o.u_sizeRatio,l=o.u_correctionRatio,c=o.u_matrix;s.uniform1f(l,i.correctionRatio),s.uniform1f(a,i.sizeRatio),s.uniformMatrix3fv(c,!1,i.matrix)}}]),e}(uZ);me($E,"ANGLE_1",0);me($E,"ANGLE_2",2*Math.PI/3);me($E,"ANGLE_3",4*Math.PI/3);var V8e=`
precision mediump float;

varying vec4 v_color;

void main(void) {
  gl_FragColor = v_color;
}
`,W8e=V8e,j8e=`
attribute vec2 a_position;
attribute vec2 a_normal;
attribute float a_radius;
attribute vec3 a_barycentric;

#ifdef PICKING_MODE
attribute vec4 a_id;
#else
attribute vec4 a_color;
#endif

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_correctionRatio;
uniform float u_minEdgeThickness;
uniform float u_lengthToThicknessRatio;
uniform float u_widenessToThicknessRatio;

varying vec4 v_color;

const float bias = 255.0 / 254.0;

void main() {
  float minThickness = u_minEdgeThickness;

  float normalLength = length(a_normal);
  vec2 unitNormal = a_normal / normalLength;

  // These first computations are taken from edge.vert.glsl and
  // edge.clamped.vert.glsl. Please read it to get better comments on what's
  // happening:
  float pixelsThickness = max(normalLength / u_sizeRatio, minThickness);
  float webGLThickness = pixelsThickness * u_correctionRatio;
  float webGLNodeRadius = a_radius * 2.0 * u_correctionRatio / u_sizeRatio;
  float webGLArrowHeadLength = webGLThickness * u_lengthToThicknessRatio * 2.0;
  float webGLArrowHeadThickness = webGLThickness * u_widenessToThicknessRatio;

  float da = a_barycentric.x;
  float db = a_barycentric.y;
  float dc = a_barycentric.z;

  vec2 delta = vec2(
      da * (webGLNodeRadius * unitNormal.y)
    + db * ((webGLNodeRadius + webGLArrowHeadLength) * unitNormal.y + webGLArrowHeadThickness * unitNormal.x)
    + dc * ((webGLNodeRadius + webGLArrowHeadLength) * unitNormal.y - webGLArrowHeadThickness * unitNormal.x),

      da * (-webGLNodeRadius * unitNormal.x)
    + db * (-(webGLNodeRadius + webGLArrowHeadLength) * unitNormal.x + webGLArrowHeadThickness * unitNormal.y)
    + dc * (-(webGLNodeRadius + webGLArrowHeadLength) * unitNormal.x - webGLArrowHeadThickness * unitNormal.y)
  );

  vec2 position = (u_matrix * vec3(a_position + delta, 1)).xy;

  gl_Position = vec4(position, 0, 1);

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,z8e=j8e,fZ=WebGLRenderingContext,S5=fZ.UNSIGNED_BYTE,oS=fZ.FLOAT,U8e=["u_matrix","u_sizeRatio","u_correctionRatio","u_minEdgeThickness","u_lengthToThicknessRatio","u_widenessToThicknessRatio"],gZ={lengthToThicknessRatio:2.5,widenessToThicknessRatio:2};function pZ(n){var e=We(We({},gZ),{});return function(t){wo(i,t);function i(){return br(this,i),vo(this,i,arguments)}return vr(i,[{key:"getDefinition",value:function(){return{VERTICES:3,VERTEX_SHADER_SOURCE:z8e,FRAGMENT_SHADER_SOURCE:W8e,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:U8e,ATTRIBUTES:[{name:"a_position",size:2,type:oS},{name:"a_normal",size:2,type:oS},{name:"a_radius",size:1,type:oS},{name:"a_color",size:4,type:S5,normalized:!0},{name:"a_id",size:4,type:S5,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_barycentric",size:3,type:oS}],CONSTANT_DATA:[[1,0,0],[0,1,0],[0,0,1]]}}},{key:"processVisibleItem",value:function(s,o,a,l,c){var u=c.size||1,h=l.size||1,d=a.x,f=a.y,g=l.x,p=l.y,m=dm(c.color),v=g-d,y=p-f,w=v*v+y*y,R=0,x=0;w&&(w=1/Math.sqrt(w),R=-y*w*u,x=v*w*u);var S=this.array;S[o++]=g,S[o++]=p,S[o++]=-R,S[o++]=-x,S[o++]=h,S[o++]=m,S[o++]=s}},{key:"setUniforms",value:function(s,o){var a=o.gl,l=o.uniformLocations,c=l.u_matrix,u=l.u_sizeRatio,h=l.u_correctionRatio,d=l.u_minEdgeThickness,f=l.u_lengthToThicknessRatio,g=l.u_widenessToThicknessRatio;a.uniformMatrix3fv(c,!1,s.matrix),a.uniform1f(u,s.sizeRatio),a.uniform1f(h,s.correctionRatio),a.uniform1f(d,s.minEdgeThickness),a.uniform1f(f,e.lengthToThicknessRatio),a.uniform1f(g,e.widenessToThicknessRatio)}}]),i}(UH)}pZ();var G8e=`
precision mediump float;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;
varying float v_feather;

const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main(void) {
  // We only handle antialiasing for normal mode:
  #ifdef PICKING_MODE
  gl_FragColor = v_color;
  #else
  float dist = length(v_normal) * v_thickness;

  float t = smoothstep(
    v_thickness - v_feather,
    v_thickness,
    dist
  );

  gl_FragColor = mix(v_color, transparent, t);
  #endif
}
`,mZ=G8e,Y8e=`
attribute vec4 a_id;
attribute vec4 a_color;
attribute vec2 a_normal;
attribute float a_normalCoef;
attribute vec2 a_positionStart;
attribute vec2 a_positionEnd;
attribute float a_positionCoef;
attribute float a_radius;
attribute float a_radiusCoef;

uniform mat3 u_matrix;
uniform float u_zoomRatio;
uniform float u_sizeRatio;
uniform float u_pixelRatio;
uniform float u_correctionRatio;
uniform float u_minEdgeThickness;
uniform float u_lengthToThicknessRatio;
uniform float u_feather;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;
varying float v_feather;

const float bias = 255.0 / 254.0;

void main() {
  float minThickness = u_minEdgeThickness;

  float radius = a_radius * a_radiusCoef;
  vec2 normal = a_normal * a_normalCoef;
  vec2 position = a_positionStart * (1.0 - a_positionCoef) + a_positionEnd * a_positionCoef;

  float normalLength = length(normal);
  vec2 unitNormal = normal / normalLength;

  // These first computations are taken from edge.vert.glsl. Please read it to
  // get better comments on what's happening:
  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);
  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;

  // Here, we move the point to leave space for the arrow head:
  float direction = sign(radius);
  float webGLNodeRadius = direction * radius * 2.0 * u_correctionRatio / u_sizeRatio;
  float webGLArrowHeadLength = webGLThickness * u_lengthToThicknessRatio * 2.0;

  vec2 compensationVector = vec2(-direction * unitNormal.y, direction * unitNormal.x) * (webGLNodeRadius + webGLArrowHeadLength);

  // Here is the proper position of the vertex
  gl_Position = vec4((u_matrix * vec3(position + unitNormal * webGLThickness + compensationVector, 1)).xy, 0, 1);

  v_thickness = webGLThickness / u_zoomRatio;

  v_normal = unitNormal;

  v_feather = u_feather * u_correctionRatio / u_zoomRatio / u_pixelRatio * 2.0;

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,K8e=Y8e,bZ=WebGLRenderingContext,_5=bZ.UNSIGNED_BYTE,ad=bZ.FLOAT,q8e=["u_matrix","u_zoomRatio","u_sizeRatio","u_correctionRatio","u_pixelRatio","u_feather","u_minEdgeThickness","u_lengthToThicknessRatio"],X8e={lengthToThicknessRatio:gZ.lengthToThicknessRatio};function vZ(n){var e=We(We({},X8e),{});return function(t){wo(i,t);function i(){return br(this,i),vo(this,i,arguments)}return vr(i,[{key:"getDefinition",value:function(){return{VERTICES:6,VERTEX_SHADER_SOURCE:K8e,FRAGMENT_SHADER_SOURCE:mZ,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:q8e,ATTRIBUTES:[{name:"a_positionStart",size:2,type:ad},{name:"a_positionEnd",size:2,type:ad},{name:"a_normal",size:2,type:ad},{name:"a_color",size:4,type:_5,normalized:!0},{name:"a_id",size:4,type:_5,normalized:!0},{name:"a_radius",size:1,type:ad}],CONSTANT_ATTRIBUTES:[{name:"a_positionCoef",size:1,type:ad},{name:"a_normalCoef",size:1,type:ad},{name:"a_radiusCoef",size:1,type:ad}],CONSTANT_DATA:[[0,1,0],[0,-1,0],[1,1,1],[1,1,1],[0,-1,0],[1,-1,-1]]}}},{key:"processVisibleItem",value:function(s,o,a,l,c){var u=c.size||1,h=a.x,d=a.y,f=l.x,g=l.y,p=dm(c.color),m=f-h,v=g-d,y=l.size||1,w=m*m+v*v,R=0,x=0;w&&(w=1/Math.sqrt(w),R=-v*w*u,x=m*w*u);var S=this.array;S[o++]=h,S[o++]=d,S[o++]=f,S[o++]=g,S[o++]=R,S[o++]=x,S[o++]=p,S[o++]=s,S[o++]=y}},{key:"setUniforms",value:function(s,o){var a=o.gl,l=o.uniformLocations,c=l.u_matrix,u=l.u_zoomRatio,h=l.u_feather,d=l.u_pixelRatio,f=l.u_correctionRatio,g=l.u_sizeRatio,p=l.u_minEdgeThickness,m=l.u_lengthToThicknessRatio;a.uniformMatrix3fv(c,!1,s.matrix),a.uniform1f(u,s.zoomRatio),a.uniform1f(g,s.sizeRatio),a.uniform1f(f,s.correctionRatio),a.uniform1f(d,s.pixelRatio),a.uniform1f(h,s.antiAliasingFeather),a.uniform1f(p,s.minEdgeThickness),a.uniform1f(m,e.lengthToThicknessRatio)}}]),i}(UH)}vZ();function Z8e(n){return k8e([vZ(),pZ()])}var Q8e=Z8e(),J8e=Q8e,e4e=`
attribute vec4 a_id;
attribute vec4 a_color;
attribute vec2 a_normal;
attribute float a_normalCoef;
attribute vec2 a_positionStart;
attribute vec2 a_positionEnd;
attribute float a_positionCoef;

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_zoomRatio;
uniform float u_pixelRatio;
uniform float u_correctionRatio;
uniform float u_minEdgeThickness;
uniform float u_feather;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;
varying float v_feather;

const float bias = 255.0 / 254.0;

void main() {
  float minThickness = u_minEdgeThickness;

  vec2 normal = a_normal * a_normalCoef;
  vec2 position = a_positionStart * (1.0 - a_positionCoef) + a_positionEnd * a_positionCoef;

  float normalLength = length(normal);
  vec2 unitNormal = normal / normalLength;

  // We require edges to be at least "minThickness" pixels thick *on screen*
  // (so we need to compensate the size ratio):
  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);

  // Then, we need to retrieve the normalized thickness of the edge in the WebGL
  // referential (in a ([0, 1], [0, 1]) space), using our "magic" correction
  // ratio:
  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;

  // Here is the proper position of the vertex
  gl_Position = vec4((u_matrix * vec3(position + unitNormal * webGLThickness, 1)).xy, 0, 1);

  // For the fragment shader though, we need a thickness that takes the "magic"
  // correction ratio into account (as in webGLThickness), but so that the
  // antialiasing effect does not depend on the zoom level. So here's yet
  // another thickness version:
  v_thickness = webGLThickness / u_zoomRatio;

  v_normal = unitNormal;

  v_feather = u_feather * u_correctionRatio / u_zoomRatio / u_pixelRatio * 2.0;

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,t4e=e4e,wZ=WebGLRenderingContext,R5=wZ.UNSIGNED_BYTE,Ob=wZ.FLOAT,n4e=["u_matrix","u_zoomRatio","u_sizeRatio","u_correctionRatio","u_pixelRatio","u_feather","u_minEdgeThickness"],i4e=function(n){wo(e,n);function e(){return br(this,e),vo(this,e,arguments)}return vr(e,[{key:"getDefinition",value:function(){return{VERTICES:6,VERTEX_SHADER_SOURCE:t4e,FRAGMENT_SHADER_SOURCE:mZ,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:n4e,ATTRIBUTES:[{name:"a_positionStart",size:2,type:Ob},{name:"a_positionEnd",size:2,type:Ob},{name:"a_normal",size:2,type:Ob},{name:"a_color",size:4,type:R5,normalized:!0},{name:"a_id",size:4,type:R5,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_positionCoef",size:1,type:Ob},{name:"a_normalCoef",size:1,type:Ob}],CONSTANT_DATA:[[0,1],[0,-1],[1,1],[1,1],[0,-1],[1,-1]]}}},{key:"processVisibleItem",value:function(i,r,s,o,a){var l=a.size||1,c=s.x,u=s.y,h=o.x,d=o.y,f=dm(a.color),g=h-c,p=d-u,m=g*g+p*p,v=0,y=0;m&&(m=1/Math.sqrt(m),v=-p*m*l,y=g*m*l);var w=this.array;w[r++]=c,w[r++]=u,w[r++]=h,w[r++]=d,w[r++]=v,w[r++]=y,w[r++]=f,w[r++]=i}},{key:"setUniforms",value:function(i,r){var s=r.gl,o=r.uniformLocations,a=o.u_matrix,l=o.u_zoomRatio,c=o.u_feather,u=o.u_pixelRatio,h=o.u_correctionRatio,d=o.u_sizeRatio,f=o.u_minEdgeThickness;s.uniformMatrix3fv(a,!1,i.matrix),s.uniform1f(l,i.zoomRatio),s.uniform1f(d,i.sizeRatio),s.uniform1f(h,i.correctionRatio),s.uniform1f(u,i.pixelRatio),s.uniform1f(c,i.antiAliasingFeather),s.uniform1f(f,i.minEdgeThickness)}}]),e}(UH),GH=function(n){wo(e,n);function e(){var t;return br(this,e),t=vo(this,e),t.rawEmitter=Se(t),t}return vr(e)}($H.EventEmitter),FE=function(e){return e!==null&&typeof e=="object"&&typeof e.addUndirectedEdgeWithKey=="function"&&typeof e.dropNode=="function"&&typeof e.multi=="boolean"};const r4e=_f(FE);var s4e=function(e){return e},o4e=function(e){return e*e},a4e=function(e){return e*(2-e)},l4e=function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},c4e=function(e){return e*e*e},u4e=function(e){return--e*e*e+1},h4e=function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},d4e={linear:s4e,quadraticIn:o4e,quadraticOut:a4e,quadraticInOut:l4e,cubicIn:c4e,cubicOut:u4e,cubicInOut:h4e},f4e={easing:"quadraticInOut",duration:150};function Vo(){return Float32Array.of(1,0,0,0,1,0,0,0,1)}function aS(n,e,t){return n[0]=e,n[4]=typeof t=="number"?t:e,n}function E5(n,e){var t=Math.sin(e),i=Math.cos(e);return n[0]=i,n[1]=t,n[3]=-t,n[4]=i,n}function x5(n,e,t){return n[6]=e,n[7]=t,n}function ou(n,e){var t=n[0],i=n[1],r=n[2],s=n[3],o=n[4],a=n[5],l=n[6],c=n[7],u=n[8],h=e[0],d=e[1],f=e[2],g=e[3],p=e[4],m=e[5],v=e[6],y=e[7],w=e[8];return n[0]=h*t+d*s+f*l,n[1]=h*i+d*o+f*c,n[2]=h*r+d*a+f*u,n[3]=g*t+p*s+m*l,n[4]=g*i+p*o+m*c,n[5]=g*r+p*a+m*u,n[6]=v*t+y*s+w*l,n[7]=v*i+y*o+w*c,n[8]=v*r+y*a+w*u,n}function mO(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,i=n[0],r=n[1],s=n[3],o=n[4],a=n[6],l=n[7],c=e.x,u=e.y;return{x:c*i+u*s+a*t,y:c*r+u*o+l*t}}function g4e(n,e){var t=n.height/n.width,i=e.height/e.width;return t<1&&i>1||t>1&&i<1?1:Math.min(Math.max(i,1/i),Math.max(1/t,t))}function kb(n,e,t,i,r){var s=n.angle,o=n.ratio,a=n.x,l=n.y,c=e.width,u=e.height,h=Vo(),d=Math.min(c,u)-2*i,f=g4e(e,t);return r?(ou(h,x5(Vo(),a,l)),ou(h,aS(Vo(),o)),ou(h,E5(Vo(),s)),ou(h,aS(Vo(),c/d/2/f,u/d/2/f))):(ou(h,aS(Vo(),2*(d/c)*f,2*(d/u)*f)),ou(h,E5(Vo(),-s)),ou(h,aS(Vo(),1/o)),ou(h,x5(Vo(),-a,-l))),h}function p4e(n,e,t){var i=mO(n,{x:Math.cos(e.angle),y:Math.sin(e.angle)},0),r=i.x,s=i.y;return 1/Math.sqrt(Math.pow(r,2)+Math.pow(s,2))/t.width}function m4e(n){if(!n.order)return{x:[0,1],y:[0,1]};var e=1/0,t=-1/0,i=1/0,r=-1/0;return n.forEachNode(function(s,o){var a=o.x,l=o.y;a<e&&(e=a),a>t&&(t=a),l<i&&(i=l),l>r&&(r=l)}),{x:[e,t],y:[i,r]}}function b4e(n){if(!r4e(n))throw new Error("Sigma: invalid graph instance.");n.forEachNode(function(e,t){if(!Number.isFinite(t.x)||!Number.isFinite(t.y))throw new Error("Sigma: Coordinates of node ".concat(e," are invalid. A node must have a numeric 'x' and 'y' attribute."))})}function v4e(n,e,t){var i=document.createElement(n);if(e)for(var r in e)i.style[r]=e[r];if(t)for(var s in t)i.setAttribute(s,t[s]);return i}function T5(){return typeof window.devicePixelRatio<"u"?window.devicePixelRatio:1}function M5(n,e,t){return t.sort(function(i,r){var s=e(i)||0,o=e(r)||0;return s<o?-1:s>o?1:0})}function A5(n){var e=zR(n.x,2),t=e[0],i=e[1],r=zR(n.y,2),s=r[0],o=r[1],a=Math.max(i-t,o-s),l=(i+t)/2,c=(o+s)/2;(a===0||Math.abs(a)===1/0||isNaN(a))&&(a=1),isNaN(l)&&(l=0),isNaN(c)&&(c=0);var u=function(d){return{x:.5+(d.x-l)/a,y:.5+(d.y-c)/a}};return u.applyTo=function(h){h.x=.5+(h.x-l)/a,h.y=.5+(h.y-c)/a},u.inverse=function(h){return{x:l+a*(h.x-.5),y:c+a*(h.y-.5)}},u.ratio=a,u}function P5(n,e){var t=e.size;if(t!==0){var i=n.length;n.length+=t;var r=0;e.forEach(function(s){n[i+r]=s,r++})}}function xA(n){n=n||{};for(var e=0,t=arguments.length<=1?0:arguments.length-1;e<t;e++){var i=e+1<1||arguments.length<=e+1?void 0:arguments[e+1];i&&Object.assign(n,i)}return n}var YH={hideEdgesOnMove:!1,hideLabelsOnMove:!1,renderLabels:!0,renderEdgeLabels:!1,enableEdgeEvents:!1,defaultNodeColor:"#999",defaultNodeType:"circle",defaultEdgeColor:"#ccc",defaultEdgeType:"line",labelFont:"Arial",labelSize:14,labelWeight:"normal",labelColor:{color:"#000"},edgeLabelFont:"Arial",edgeLabelSize:14,edgeLabelWeight:"normal",edgeLabelColor:{attribute:"color"},stagePadding:30,defaultDrawEdgeLabel:D8e,defaultDrawNodeLabel:hZ,defaultDrawNodeHover:L8e,minEdgeThickness:1.7,antiAliasingFeather:1,dragTimeout:100,draggedEventsTolerance:3,inertiaDuration:200,inertiaRatio:3,zoomDuration:250,zoomingRatio:1.7,doubleClickTimeout:300,doubleClickZoomingRatio:2.2,doubleClickZoomingDuration:200,tapMoveTolerance:10,zoomToSizeRatioFunction:Math.sqrt,itemSizesReference:"screen",autoRescale:!0,autoCenter:!0,labelDensity:1,labelGridCellSize:100,labelRenderedSizeThreshold:6,nodeReducer:null,edgeReducer:null,zIndex:!1,minCameraRatio:null,maxCameraRatio:null,enableCameraRotation:!0,allowInvalidContainer:!1,nodeProgramClasses:{},nodeHoverProgramClasses:{},edgeProgramClasses:{}},w4e={circle:$E},y4e={arrow:J8e,line:i4e};function I5(n){if(typeof n.labelDensity!="number"||n.labelDensity<0)throw new Error("Settings: invalid `labelDensity`. Expecting a positive number.");var e=n.minCameraRatio,t=n.maxCameraRatio;if(typeof e=="number"&&typeof t=="number"&&t<e)throw new Error("Settings: invalid camera ratio boundaries. Expecting `maxCameraRatio` to be greater than `minCameraRatio`.")}function C4e(n){var e=xA({},YH,n);return e.nodeProgramClasses=xA({},w4e,e.nodeProgramClasses),e.edgeProgramClasses=xA({},y4e,e.edgeProgramClasses),e}var lS=1.5,O5=function(n){wo(e,n);function e(){var t;return br(this,e),t=vo(this,e),me(Se(t),"x",.5),me(Se(t),"y",.5),me(Se(t),"angle",0),me(Se(t),"ratio",1),me(Se(t),"minRatio",null),me(Se(t),"maxRatio",null),me(Se(t),"enabledRotation",!0),me(Se(t),"nextFrame",null),me(Se(t),"previousState",null),me(Se(t),"enabled",!0),t.previousState=t.getState(),t}return vr(e,[{key:"enable",value:function(){return this.enabled=!0,this}},{key:"disable",value:function(){return this.enabled=!1,this}},{key:"getState",value:function(){return{x:this.x,y:this.y,angle:this.angle,ratio:this.ratio}}},{key:"hasState",value:function(i){return this.x===i.x&&this.y===i.y&&this.ratio===i.ratio&&this.angle===i.angle}},{key:"getPreviousState",value:function(){var i=this.previousState;return i?{x:i.x,y:i.y,angle:i.angle,ratio:i.ratio}:null}},{key:"getBoundedRatio",value:function(i){var r=i;return typeof this.minRatio=="number"&&(r=Math.max(r,this.minRatio)),typeof this.maxRatio=="number"&&(r=Math.min(r,this.maxRatio)),r}},{key:"validateState",value:function(i){var r={};return typeof i.x=="number"&&(r.x=i.x),typeof i.y=="number"&&(r.y=i.y),this.enabledRotation&&typeof i.angle=="number"&&(r.angle=i.angle),typeof i.ratio=="number"&&(r.ratio=this.getBoundedRatio(i.ratio)),r}},{key:"isAnimated",value:function(){return!!this.nextFrame}},{key:"setState",value:function(i){if(!this.enabled)return this;this.previousState=this.getState();var r=this.validateState(i);return typeof r.x=="number"&&(this.x=r.x),typeof r.y=="number"&&(this.y=r.y),this.enabledRotation&&typeof r.angle=="number"&&(this.angle=r.angle),typeof r.ratio=="number"&&(this.ratio=r.ratio),this.hasState(this.previousState)||this.emit("updated",this.getState()),this}},{key:"updateState",value:function(i){return this.setState(i(this.getState())),this}},{key:"animate",value:function(i){var r=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0;if(!o)return new Promise(function(f){return r.animate(i,s,f)});if(this.enabled){var a=We(We({},f4e),s),l=this.validateState(i),c=typeof a.easing=="function"?a.easing:d4e[a.easing],u=Date.now(),h=this.getState(),d=function f(){var g=(Date.now()-u)/a.duration;if(g>=1){r.nextFrame=null,r.setState(l),r.animationCallback&&(r.animationCallback.call(null),r.animationCallback=void 0);return}var p=c(g),m={};typeof l.x=="number"&&(m.x=h.x+(l.x-h.x)*p),typeof l.y=="number"&&(m.y=h.y+(l.y-h.y)*p),r.enabledRotation&&typeof l.angle=="number"&&(m.angle=h.angle+(l.angle-h.angle)*p),typeof l.ratio=="number"&&(m.ratio=h.ratio+(l.ratio-h.ratio)*p),r.setState(m),r.nextFrame=requestAnimationFrame(f)};this.nextFrame?(cancelAnimationFrame(this.nextFrame),this.animationCallback&&this.animationCallback.call(null),this.nextFrame=requestAnimationFrame(d)):d(),this.animationCallback=o}}},{key:"animatedZoom",value:function(i){return i?typeof i=="number"?this.animate({ratio:this.ratio/i}):this.animate({ratio:this.ratio/(i.factor||lS)},i):this.animate({ratio:this.ratio/lS})}},{key:"animatedUnzoom",value:function(i){return i?typeof i=="number"?this.animate({ratio:this.ratio*i}):this.animate({ratio:this.ratio*(i.factor||lS)},i):this.animate({ratio:this.ratio*lS})}},{key:"animatedReset",value:function(i){return this.animate({x:.5,y:.5,ratio:1,angle:0},i)}},{key:"copy",value:function(){return e.from(this.getState())}}],[{key:"from",value:function(i){var r=new e;return r.setState(i)}}]),e}(GH);function Yo(n,e){var t=e.getBoundingClientRect();return{x:n.clientX-t.left,y:n.clientY-t.top}}function ql(n,e){var t=We(We({},Yo(n,e)),{},{sigmaDefaultPrevented:!1,preventSigmaDefault:function(){t.sigmaDefaultPrevented=!0},original:n});return t}function Db(n){var e="x"in n?n:We(We({},n.touches[0]||n.previousTouches[0]),{},{original:n.original,sigmaDefaultPrevented:n.sigmaDefaultPrevented,preventSigmaDefault:function(){n.sigmaDefaultPrevented=!0,e.sigmaDefaultPrevented=!0}});return e}function S4e(n,e){return We(We({},ql(n,e)),{},{delta:yZ(n)})}var _4e=2;function ZS(n){for(var e=[],t=0,i=Math.min(n.length,_4e);t<i;t++)e.push(n[t]);return e}function Lb(n,e,t){var i={touches:ZS(n.touches).map(function(r){return Yo(r,t)}),previousTouches:e.map(function(r){return Yo(r,t)}),sigmaDefaultPrevented:!1,preventSigmaDefault:function(){i.sigmaDefaultPrevented=!0},original:n};return i}function yZ(n){if(typeof n.deltaY<"u")return n.deltaY*-3/360;if(typeof n.detail<"u")return n.detail/-9;throw new Error("Captor: could not extract delta from event.")}var CZ=function(n){wo(e,n);function e(t,i){var r;return br(this,e),r=vo(this,e),r.container=t,r.renderer=i,r}return vr(e)}(GH),R4e=["doubleClickTimeout","doubleClickZoomingDuration","doubleClickZoomingRatio","dragTimeout","draggedEventsTolerance","inertiaDuration","inertiaRatio","zoomDuration","zoomingRatio"],E4e=R4e.reduce(function(n,e){return We(We({},n),{},me({},e,YH[e]))},{}),x4e=function(n){wo(e,n);function e(t,i){var r;return br(this,e),r=vo(this,e,[t,i]),me(Se(r),"enabled",!0),me(Se(r),"draggedEvents",0),me(Se(r),"downStartTime",null),me(Se(r),"lastMouseX",null),me(Se(r),"lastMouseY",null),me(Se(r),"isMouseDown",!1),me(Se(r),"isMoving",!1),me(Se(r),"movingTimeout",null),me(Se(r),"startCameraState",null),me(Se(r),"clicks",0),me(Se(r),"doubleClickTimeout",null),me(Se(r),"currentWheelDirection",0),me(Se(r),"settings",E4e),r.handleClick=r.handleClick.bind(Se(r)),r.handleRightClick=r.handleRightClick.bind(Se(r)),r.handleDown=r.handleDown.bind(Se(r)),r.handleUp=r.handleUp.bind(Se(r)),r.handleMove=r.handleMove.bind(Se(r)),r.handleWheel=r.handleWheel.bind(Se(r)),r.handleLeave=r.handleLeave.bind(Se(r)),r.handleEnter=r.handleEnter.bind(Se(r)),t.addEventListener("click",r.handleClick,{capture:!1}),t.addEventListener("contextmenu",r.handleRightClick,{capture:!1}),t.addEventListener("mousedown",r.handleDown,{capture:!1}),t.addEventListener("wheel",r.handleWheel,{capture:!1}),t.addEventListener("mouseleave",r.handleLeave,{capture:!1}),t.addEventListener("mouseenter",r.handleEnter,{capture:!1}),document.addEventListener("mousemove",r.handleMove,{capture:!1}),document.addEventListener("mouseup",r.handleUp,{capture:!1}),r}return vr(e,[{key:"kill",value:function(){var i=this.container;i.removeEventListener("click",this.handleClick),i.removeEventListener("contextmenu",this.handleRightClick),i.removeEventListener("mousedown",this.handleDown),i.removeEventListener("wheel",this.handleWheel),i.removeEventListener("mouseleave",this.handleLeave),i.removeEventListener("mouseenter",this.handleEnter),document.removeEventListener("mousemove",this.handleMove),document.removeEventListener("mouseup",this.handleUp)}},{key:"handleClick",value:function(i){var r=this;if(this.enabled){if(this.clicks++,this.clicks===2)return this.clicks=0,typeof this.doubleClickTimeout=="number"&&(clearTimeout(this.doubleClickTimeout),this.doubleClickTimeout=null),this.handleDoubleClick(i);setTimeout(function(){r.clicks=0,r.doubleClickTimeout=null},this.settings.doubleClickTimeout),this.draggedEvents<this.settings.draggedEventsTolerance&&this.emit("click",ql(i,this.container))}}},{key:"handleRightClick",value:function(i){this.enabled&&this.emit("rightClick",ql(i,this.container))}},{key:"handleDoubleClick",value:function(i){if(this.enabled){i.preventDefault(),i.stopPropagation();var r=ql(i,this.container);if(this.emit("doubleClick",r),!r.sigmaDefaultPrevented){var s=this.renderer.getCamera(),o=s.getBoundedRatio(s.getState().ratio/this.settings.doubleClickZoomingRatio);s.animate(this.renderer.getViewportZoomedState(Yo(i,this.container),o),{easing:"quadraticInOut",duration:this.settings.doubleClickZoomingDuration})}}}},{key:"handleDown",value:function(i){if(this.enabled){if(i.button===0){this.startCameraState=this.renderer.getCamera().getState();var r=Yo(i,this.container),s=r.x,o=r.y;this.lastMouseX=s,this.lastMouseY=o,this.draggedEvents=0,this.downStartTime=Date.now(),this.isMouseDown=!0}this.emit("mousedown",ql(i,this.container))}}},{key:"handleUp",value:function(i){var r=this;if(!(!this.enabled||!this.isMouseDown)){var s=this.renderer.getCamera();this.isMouseDown=!1,typeof this.movingTimeout=="number"&&(clearTimeout(this.movingTimeout),this.movingTimeout=null);var o=Yo(i,this.container),a=o.x,l=o.y,c=s.getState(),u=s.getPreviousState()||{x:0,y:0};this.isMoving?s.animate({x:c.x+this.settings.inertiaRatio*(c.x-u.x),y:c.y+this.settings.inertiaRatio*(c.y-u.y)},{duration:this.settings.inertiaDuration,easing:"quadraticOut"}):(this.lastMouseX!==a||this.lastMouseY!==l)&&s.setState({x:c.x,y:c.y}),this.isMoving=!1,setTimeout(function(){var h=r.draggedEvents>0;r.draggedEvents=0,h&&r.renderer.refresh()},0),this.emit("mouseup",ql(i,this.container))}}},{key:"handleMove",value:function(i){var r=this;if(this.enabled){var s=ql(i,this.container);if(this.emit("mousemovebody",s),(i.target===this.container||i.composedPath()[0]===this.container)&&this.emit("mousemove",s),!s.sigmaDefaultPrevented&&this.isMouseDown){this.isMoving=!0,this.draggedEvents++,typeof this.movingTimeout=="number"&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){r.movingTimeout=null,r.isMoving=!1},this.settings.dragTimeout);var o=this.renderer.getCamera(),a=Yo(i,this.container),l=a.x,c=a.y,u=this.renderer.viewportToFramedGraph({x:this.lastMouseX,y:this.lastMouseY}),h=this.renderer.viewportToFramedGraph({x:l,y:c}),d=u.x-h.x,f=u.y-h.y,g=o.getState(),p=g.x+d,m=g.y+f;o.setState({x:p,y:m}),this.lastMouseX=l,this.lastMouseY=c,i.preventDefault(),i.stopPropagation()}}}},{key:"handleLeave",value:function(i){this.emit("mouseleave",ql(i,this.container))}},{key:"handleEnter",value:function(i){this.emit("mouseenter",ql(i,this.container))}},{key:"handleWheel",value:function(i){var r=this;if(this.enabled){i.preventDefault(),i.stopPropagation();var s=yZ(i);if(s){var o=S4e(i,this.container);if(this.emit("wheel",o),!o.sigmaDefaultPrevented){var a=s>0?1/this.settings.zoomingRatio:this.settings.zoomingRatio,l=this.renderer.getCamera(),c=l.getBoundedRatio(l.getState().ratio*a),u=s>0?1:-1,h=Date.now();this.currentWheelDirection===u&&this.lastWheelTriggerTime&&h-this.lastWheelTriggerTime<this.settings.zoomDuration/5||(l.animate(this.renderer.getViewportZoomedState(Yo(i,this.container),c),{easing:"quadraticOut",duration:this.settings.zoomDuration},function(){r.currentWheelDirection=0}),this.currentWheelDirection=u,this.lastWheelTriggerTime=h)}}}}},{key:"setSettings",value:function(i){this.settings=i}}]),e}(CZ),T4e=["dragTimeout","inertiaDuration","inertiaRatio","doubleClickTimeout","doubleClickZoomingRatio","doubleClickZoomingDuration","tapMoveTolerance"],M4e=T4e.reduce(function(n,e){return We(We({},n),{},me({},e,YH[e]))},{}),A4e=function(n){wo(e,n);function e(t,i){var r;return br(this,e),r=vo(this,e,[t,i]),me(Se(r),"enabled",!0),me(Se(r),"isMoving",!1),me(Se(r),"hasMoved",!1),me(Se(r),"touchMode",0),me(Se(r),"startTouchesPositions",[]),me(Se(r),"lastTouches",[]),me(Se(r),"lastTap",null),me(Se(r),"settings",M4e),r.handleStart=r.handleStart.bind(Se(r)),r.handleLeave=r.handleLeave.bind(Se(r)),r.handleMove=r.handleMove.bind(Se(r)),t.addEventListener("touchstart",r.handleStart,{capture:!1}),t.addEventListener("touchcancel",r.handleLeave,{capture:!1}),document.addEventListener("touchend",r.handleLeave,{capture:!1,passive:!1}),document.addEventListener("touchmove",r.handleMove,{capture:!1,passive:!1}),r}return vr(e,[{key:"kill",value:function(){var i=this.container;i.removeEventListener("touchstart",this.handleStart),i.removeEventListener("touchcancel",this.handleLeave),document.removeEventListener("touchend",this.handleLeave),document.removeEventListener("touchmove",this.handleMove)}},{key:"getDimensions",value:function(){return{width:this.container.offsetWidth,height:this.container.offsetHeight}}},{key:"handleStart",value:function(i){var r=this;if(this.enabled){i.preventDefault();var s=ZS(i.touches);if(this.touchMode=s.length,this.startCameraState=this.renderer.getCamera().getState(),this.startTouchesPositions=s.map(function(f){return Yo(f,r.container)}),this.touchMode===2){var o=zR(this.startTouchesPositions,2),a=o[0],l=a.x,c=a.y,u=o[1],h=u.x,d=u.y;this.startTouchesAngle=Math.atan2(d-c,h-l),this.startTouchesDistance=Math.sqrt(Math.pow(h-l,2)+Math.pow(d-c,2))}this.emit("touchdown",Lb(i,this.lastTouches,this.container)),this.lastTouches=s,this.lastTouchesPositions=this.startTouchesPositions}}},{key:"handleLeave",value:function(i){if(!(!this.enabled||!this.startTouchesPositions.length)){switch(i.cancelable&&i.preventDefault(),this.movingTimeout&&(this.isMoving=!1,clearTimeout(this.movingTimeout)),this.touchMode){case 2:if(i.touches.length===1){this.handleStart(i),i.preventDefault();break}case 1:if(this.isMoving){var r=this.renderer.getCamera(),s=r.getState(),o=r.getPreviousState()||{x:0,y:0};r.animate({x:s.x+this.settings.inertiaRatio*(s.x-o.x),y:s.y+this.settings.inertiaRatio*(s.y-o.y)},{duration:this.settings.inertiaDuration,easing:"quadraticOut"})}this.hasMoved=!1,this.isMoving=!1,this.touchMode=0;break}if(this.emit("touchup",Lb(i,this.lastTouches,this.container)),!i.touches.length){var a=Yo(this.lastTouches[0],this.container),l=this.startTouchesPositions[0],c=Math.pow(a.x-l.x,2)+Math.pow(a.y-l.y,2);if(!i.touches.length&&c<Math.pow(this.settings.tapMoveTolerance,2))if(this.lastTap&&Date.now()-this.lastTap.time<this.settings.doubleClickTimeout){var u=Lb(i,this.lastTouches,this.container);if(this.emit("doubletap",u),this.lastTap=null,!u.sigmaDefaultPrevented){var h=this.renderer.getCamera(),d=h.getBoundedRatio(h.getState().ratio/this.settings.doubleClickZoomingRatio);h.animate(this.renderer.getViewportZoomedState(a,d),{easing:"quadraticInOut",duration:this.settings.doubleClickZoomingDuration})}}else{var f=Lb(i,this.lastTouches,this.container);this.emit("tap",f),this.lastTap={time:Date.now(),position:f.touches[0]||f.previousTouches[0]}}}this.lastTouches=ZS(i.touches),this.startTouchesPositions=[]}}},{key:"handleMove",value:function(i){var r=this;if(!(!this.enabled||!this.startTouchesPositions.length)){i.preventDefault();var s=ZS(i.touches),o=s.map(function(b){return Yo(b,r.container)}),a=this.lastTouches;this.lastTouches=s,this.lastTouchesPositions=o;var l=Lb(i,a,this.container);if(this.emit("touchmove",l),!l.sigmaDefaultPrevented&&(this.hasMoved||(this.hasMoved=o.some(function(b,C){var _=r.startTouchesPositions[C];return _&&(b.x!==_.x||b.y!==_.y)})),!!this.hasMoved)){this.isMoving=!0,this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){r.isMoving=!1},this.settings.dragTimeout);var c=this.renderer.getCamera(),u=this.startCameraState,h=this.renderer.getSetting("stagePadding");switch(this.touchMode){case 1:{var d=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0]),f=d.x,g=d.y,p=this.renderer.viewportToFramedGraph(o[0]),m=p.x,v=p.y;c.setState({x:u.x+f-m,y:u.y+g-v});break}case 2:{var y={x:.5,y:.5,angle:0,ratio:1},w=o[0],R=w.x,x=w.y,S=o[1],T=S.x,P=S.y,E=Math.atan2(P-x,T-R)-this.startTouchesAngle,A=Math.hypot(P-x,T-R)/this.startTouchesDistance,L=c.getBoundedRatio(u.ratio/A);y.ratio=L,y.angle=u.angle+E;var W=this.getDimensions(),F=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0],{cameraState:u}),V=Math.min(W.width,W.height)-2*h,H=V/W.width,N=V/W.height,j=L/V,k=R-V/2/H,K=x-V/2/N,ie=[k*Math.cos(-y.angle)-K*Math.sin(-y.angle),K*Math.cos(-y.angle)+k*Math.sin(-y.angle)];k=ie[0],K=ie[1],y.x=F.x-k*j,y.y=F.y+K*j,c.setState(y);break}}}}}},{key:"setSettings",value:function(i){this.settings=i}}]),e}(CZ);function P4e(n){if(Array.isArray(n))return gO(n)}function I4e(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function O4e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function k5(n){return P4e(n)||I4e(n)||iZ(n)||O4e()}function k4e(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.includes(i))continue;t[i]=n[i]}return t}function TA(n,e){if(n==null)return{};var t,i,r=k4e(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)t=s[i],e.includes(t)||{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}var D5=function(){function n(e,t){br(this,n),this.key=e,this.size=t}return vr(n,null,[{key:"compare",value:function(t,i){return t.size>i.size?-1:t.size<i.size||t.key>i.key?1:-1}}]),n}(),L5=function(){function n(){br(this,n),me(this,"width",0),me(this,"height",0),me(this,"cellSize",0),me(this,"columns",0),me(this,"rows",0),me(this,"cells",{})}return vr(n,[{key:"resizeAndClear",value:function(t,i){this.width=t.width,this.height=t.height,this.cellSize=i,this.columns=Math.ceil(t.width/i),this.rows=Math.ceil(t.height/i),this.cells={}}},{key:"getIndex",value:function(t){var i=Math.floor(t.x/this.cellSize),r=Math.floor(t.y/this.cellSize);return r*this.columns+i}},{key:"add",value:function(t,i,r){var s=new D5(t,i),o=this.getIndex(r),a=this.cells[o];a||(a=[],this.cells[o]=a),a.push(s)}},{key:"organize",value:function(){for(var t in this.cells){var i=this.cells[t];i.sort(D5.compare)}}},{key:"getLabelsToDisplay",value:function(t,i){var r=this.cellSize*this.cellSize,s=r/t/t,o=s*i/r,a=Math.ceil(o),l=[];for(var c in this.cells)for(var u=this.cells[c],h=0;h<Math.min(a,u.length);h++)l.push(u[h].key);return l}}]),n}();function D4e(n){var e=n.graph,t=n.hoveredNode,i=n.highlightedNodes,r=n.displayedNodeLabels,s=[];return e.forEachEdge(function(o,a,l,c){(l===t||c===t||i.has(l)||i.has(c)||r.has(l)&&r.has(c))&&s.push(o)}),s}var N5=150,H5=50,ac=Object.prototype.hasOwnProperty;function L4e(n,e,t){if(!ac.call(t,"x")||!ac.call(t,"y"))throw new Error('Sigma: could not find a valid position (x, y) for node "'.concat(e,'". All your nodes must have a number "x" and "y". Maybe your forgot to apply a layout or your "nodeReducer" is not returning the correct data?'));return t.color||(t.color=n.defaultNodeColor),!t.label&&t.label!==""&&(t.label=null),t.label!==void 0&&t.label!==null?t.label=""+t.label:t.label=null,t.size||(t.size=2),ac.call(t,"hidden")||(t.hidden=!1),ac.call(t,"highlighted")||(t.highlighted=!1),ac.call(t,"forceLabel")||(t.forceLabel=!1),(!t.type||t.type==="")&&(t.type=n.defaultNodeType),t.zIndex||(t.zIndex=0),t}function N4e(n,e,t){return t.color||(t.color=n.defaultEdgeColor),t.label||(t.label=""),t.size||(t.size=.5),ac.call(t,"hidden")||(t.hidden=!1),ac.call(t,"forceLabel")||(t.forceLabel=!1),(!t.type||t.type==="")&&(t.type=n.defaultEdgeType),t.zIndex||(t.zIndex=0),t}var $5=function(n){wo(e,n);function e(t,i){var r,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(br(this,e),r=vo(this,e),me(Se(r),"elements",{}),me(Se(r),"canvasContexts",{}),me(Se(r),"webGLContexts",{}),me(Se(r),"pickingLayers",new Set),me(Se(r),"textures",{}),me(Se(r),"frameBuffers",{}),me(Se(r),"activeListeners",{}),me(Se(r),"labelGrid",new L5),me(Se(r),"nodeDataCache",{}),me(Se(r),"edgeDataCache",{}),me(Se(r),"nodeProgramIndex",{}),me(Se(r),"edgeProgramIndex",{}),me(Se(r),"nodesWithForcedLabels",new Set),me(Se(r),"edgesWithForcedLabels",new Set),me(Se(r),"nodeExtent",{x:[0,1],y:[0,1]}),me(Se(r),"nodeZExtent",[1/0,-1/0]),me(Se(r),"edgeZExtent",[1/0,-1/0]),me(Se(r),"matrix",Vo()),me(Se(r),"invMatrix",Vo()),me(Se(r),"correctionRatio",1),me(Se(r),"customBBox",null),me(Se(r),"normalizationFunction",A5({x:[0,1],y:[0,1]})),me(Se(r),"graphToViewportRatio",1),me(Se(r),"itemIDsIndex",{}),me(Se(r),"nodeIndices",{}),me(Se(r),"edgeIndices",{}),me(Se(r),"width",0),me(Se(r),"height",0),me(Se(r),"pixelRatio",T5()),me(Se(r),"pickingDownSizingRatio",2*r.pixelRatio),me(Se(r),"displayedNodeLabels",new Set),me(Se(r),"displayedEdgeLabels",new Set),me(Se(r),"highlightedNodes",new Set),me(Se(r),"hoveredNode",null),me(Se(r),"hoveredEdge",null),me(Se(r),"renderFrame",null),me(Se(r),"renderHighlightedNodesFrame",null),me(Se(r),"needToProcess",!1),me(Se(r),"checkEdgesEventsFrame",null),me(Se(r),"nodePrograms",{}),me(Se(r),"nodeHoverPrograms",{}),me(Se(r),"edgePrograms",{}),r.settings=C4e(s),I5(r.settings),b4e(t),!(i instanceof HTMLElement))throw new Error("Sigma: container should be an html element.");r.graph=t,r.container=i,r.createWebGLContext("edges",{picking:s.enableEdgeEvents}),r.createCanvasContext("edgeLabels"),r.createWebGLContext("nodes",{picking:!0}),r.createCanvasContext("labels"),r.createCanvasContext("hovers"),r.createWebGLContext("hoverNodes"),r.createCanvasContext("mouse",{style:{touchAction:"none",userSelect:"none"}}),r.resize();for(var o in r.settings.nodeProgramClasses)r.registerNodeProgram(o,r.settings.nodeProgramClasses[o],r.settings.nodeHoverProgramClasses[o]);for(var a in r.settings.edgeProgramClasses)r.registerEdgeProgram(a,r.settings.edgeProgramClasses[a]);return r.camera=new O5,r.bindCameraHandlers(),r.mouseCaptor=new x4e(r.elements.mouse,Se(r)),r.mouseCaptor.setSettings(r.settings),r.touchCaptor=new A4e(r.elements.mouse,Se(r)),r.touchCaptor.setSettings(r.settings),r.bindEventHandlers(),r.bindGraphHandlers(),r.handleSettingsUpdate(),r.refresh(),r}return vr(e,[{key:"registerNodeProgram",value:function(i,r,s){return this.nodePrograms[i]&&this.nodePrograms[i].kill(),this.nodeHoverPrograms[i]&&this.nodeHoverPrograms[i].kill(),this.nodePrograms[i]=new r(this.webGLContexts.nodes,this.frameBuffers.nodes,this),this.nodeHoverPrograms[i]=new(s||r)(this.webGLContexts.hoverNodes,null,this),this}},{key:"registerEdgeProgram",value:function(i,r){return this.edgePrograms[i]&&this.edgePrograms[i].kill(),this.edgePrograms[i]=new r(this.webGLContexts.edges,this.frameBuffers.edges,this),this}},{key:"unregisterNodeProgram",value:function(i){if(this.nodePrograms[i]){var r=this.nodePrograms,s=r[i],o=TA(r,[i].map(Zv));s.kill(),this.nodePrograms=o}if(this.nodeHoverPrograms[i]){var a=this.nodeHoverPrograms,l=a[i],c=TA(a,[i].map(Zv));l.kill(),this.nodePrograms=c}return this}},{key:"unregisterEdgeProgram",value:function(i){if(this.edgePrograms[i]){var r=this.edgePrograms,s=r[i],o=TA(r,[i].map(Zv));s.kill(),this.edgePrograms=o}return this}},{key:"resetWebGLTexture",value:function(i){var r=this.webGLContexts[i],s=this.frameBuffers[i],o=this.textures[i];o&&r.deleteTexture(o);var a=r.createTexture();return r.bindFramebuffer(r.FRAMEBUFFER,s),r.bindTexture(r.TEXTURE_2D,a),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,this.width,this.height,0,r.RGBA,r.UNSIGNED_BYTE,null),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,a,0),this.textures[i]=a,this}},{key:"bindCameraHandlers",value:function(){var i=this;return this.activeListeners.camera=function(){i.scheduleRender()},this.camera.on("updated",this.activeListeners.camera),this}},{key:"unbindCameraHandlers",value:function(){return this.camera.removeListener("updated",this.activeListeners.camera),this}},{key:"getNodeAtPosition",value:function(i){var r=i.x,s=i.y,o=b5(this.webGLContexts.nodes,this.frameBuffers.nodes,r,s,this.pixelRatio,this.pickingDownSizingRatio),a=m5.apply(void 0,k5(o)),l=this.itemIDsIndex[a];return l&&l.type==="node"?l.id:null}},{key:"bindEventHandlers",value:function(){var i=this;this.activeListeners.handleResize=function(){i.scheduleRefresh()},window.addEventListener("resize",this.activeListeners.handleResize),this.activeListeners.handleMove=function(s){var o=Db(s),a={event:o,preventSigmaDefault:function(){o.preventSigmaDefault()}},l=i.getNodeAtPosition(o);if(l&&i.hoveredNode!==l&&!i.nodeDataCache[l].hidden){i.hoveredNode&&i.emit("leaveNode",We(We({},a),{},{node:i.hoveredNode})),i.hoveredNode=l,i.emit("enterNode",We(We({},a),{},{node:l})),i.scheduleHighlightedNodesRender();return}if(i.hoveredNode&&i.getNodeAtPosition(o)!==i.hoveredNode){var c=i.hoveredNode;i.hoveredNode=null,i.emit("leaveNode",We(We({},a),{},{node:c})),i.scheduleHighlightedNodesRender();return}if(i.settings.enableEdgeEvents){var u=i.hoveredNode?null:i.getEdgeAtPoint(a.event.x,a.event.y);u!==i.hoveredEdge&&(i.hoveredEdge&&i.emit("leaveEdge",We(We({},a),{},{edge:i.hoveredEdge})),u&&i.emit("enterEdge",We(We({},a),{},{edge:u})),i.hoveredEdge=u)}},this.activeListeners.handleMoveBody=function(s){var o=Db(s);i.emit("moveBody",{event:o,preventSigmaDefault:function(){o.preventSigmaDefault()}})},this.activeListeners.handleLeave=function(s){var o=Db(s),a={event:o,preventSigmaDefault:function(){o.preventSigmaDefault()}};i.hoveredNode&&(i.emit("leaveNode",We(We({},a),{},{node:i.hoveredNode})),i.scheduleHighlightedNodesRender()),i.settings.enableEdgeEvents&&i.hoveredEdge&&(i.emit("leaveEdge",We(We({},a),{},{edge:i.hoveredEdge})),i.scheduleHighlightedNodesRender()),i.emit("leaveStage",We({},a))},this.activeListeners.handleEnter=function(s){var o=Db(s),a={event:o,preventSigmaDefault:function(){o.preventSigmaDefault()}};i.emit("enterStage",We({},a))};var r=function(o){return function(a){var l=Db(a),c={event:l,preventSigmaDefault:function(){l.preventSigmaDefault()}},u=i.getNodeAtPosition(l);if(u)return i.emit("".concat(o,"Node"),We(We({},c),{},{node:u}));if(i.settings.enableEdgeEvents){var h=i.getEdgeAtPoint(l.x,l.y);if(h)return i.emit("".concat(o,"Edge"),We(We({},c),{},{edge:h}))}return i.emit("".concat(o,"Stage"),c)}};return this.activeListeners.handleClick=r("click"),this.activeListeners.handleRightClick=r("rightClick"),this.activeListeners.handleDoubleClick=r("doubleClick"),this.activeListeners.handleWheel=r("wheel"),this.activeListeners.handleDown=r("down"),this.activeListeners.handleUp=r("up"),this.mouseCaptor.on("mousemove",this.activeListeners.handleMove),this.mouseCaptor.on("mousemovebody",this.activeListeners.handleMoveBody),this.mouseCaptor.on("click",this.activeListeners.handleClick),this.mouseCaptor.on("rightClick",this.activeListeners.handleRightClick),this.mouseCaptor.on("doubleClick",this.activeListeners.handleDoubleClick),this.mouseCaptor.on("wheel",this.activeListeners.handleWheel),this.mouseCaptor.on("mousedown",this.activeListeners.handleDown),this.mouseCaptor.on("mouseup",this.activeListeners.handleUp),this.mouseCaptor.on("mouseleave",this.activeListeners.handleLeave),this.mouseCaptor.on("mouseenter",this.activeListeners.handleEnter),this.touchCaptor.on("touchdown",this.activeListeners.handleDown),this.touchCaptor.on("touchdown",this.activeListeners.handleMove),this.touchCaptor.on("touchup",this.activeListeners.handleUp),this.touchCaptor.on("touchmove",this.activeListeners.handleMove),this.touchCaptor.on("tap",this.activeListeners.handleClick),this.touchCaptor.on("doubletap",this.activeListeners.handleDoubleClick),this.touchCaptor.on("touchmove",this.activeListeners.handleMoveBody),this}},{key:"bindGraphHandlers",value:function(){var i=this,r=this.graph,s=new Set(["x","y","zIndex","type"]);return this.activeListeners.eachNodeAttributesUpdatedGraphUpdate=function(o){var a,l=(a=o.hints)===null||a===void 0?void 0:a.attributes;i.graph.forEachNode(function(u){return i.updateNode(u)});var c=!l||l.some(function(u){return s.has(u)});i.refresh({partialGraph:{nodes:r.nodes()},skipIndexation:!c,schedule:!0})},this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate=function(o){var a,l=(a=o.hints)===null||a===void 0?void 0:a.attributes;i.graph.forEachEdge(function(u){return i.updateEdge(u)});var c=l&&["zIndex","type"].some(function(u){return l==null?void 0:l.includes(u)});i.refresh({partialGraph:{edges:r.edges()},skipIndexation:!c,schedule:!0})},this.activeListeners.addNodeGraphUpdate=function(o){var a=o.key;i.addNode(a),i.refresh({partialGraph:{nodes:[a]},skipIndexation:!1,schedule:!0})},this.activeListeners.updateNodeGraphUpdate=function(o){var a=o.key;i.refresh({partialGraph:{nodes:[a]},skipIndexation:!1,schedule:!0})},this.activeListeners.dropNodeGraphUpdate=function(o){var a=o.key;i.removeNode(a),i.refresh({schedule:!0})},this.activeListeners.addEdgeGraphUpdate=function(o){var a=o.key;i.addEdge(a),i.refresh({partialGraph:{edges:[a]},schedule:!0})},this.activeListeners.updateEdgeGraphUpdate=function(o){var a=o.key;i.refresh({partialGraph:{edges:[a]},skipIndexation:!1,schedule:!0})},this.activeListeners.dropEdgeGraphUpdate=function(o){var a=o.key;i.removeEdge(a),i.refresh({schedule:!0})},this.activeListeners.clearEdgesGraphUpdate=function(){i.clearEdgeState(),i.clearEdgeIndices(),i.refresh({schedule:!0})},this.activeListeners.clearGraphUpdate=function(){i.clearEdgeState(),i.clearNodeState(),i.clearEdgeIndices(),i.clearNodeIndices(),i.refresh({schedule:!0})},r.on("nodeAdded",this.activeListeners.addNodeGraphUpdate),r.on("nodeDropped",this.activeListeners.dropNodeGraphUpdate),r.on("nodeAttributesUpdated",this.activeListeners.updateNodeGraphUpdate),r.on("eachNodeAttributesUpdated",this.activeListeners.eachNodeAttributesUpdatedGraphUpdate),r.on("edgeAdded",this.activeListeners.addEdgeGraphUpdate),r.on("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),r.on("edgeAttributesUpdated",this.activeListeners.updateEdgeGraphUpdate),r.on("eachEdgeAttributesUpdated",this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate),r.on("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),r.on("cleared",this.activeListeners.clearGraphUpdate),this}},{key:"unbindGraphHandlers",value:function(){var i=this.graph;i.removeListener("nodeAdded",this.activeListeners.addNodeGraphUpdate),i.removeListener("nodeDropped",this.activeListeners.dropNodeGraphUpdate),i.removeListener("nodeAttributesUpdated",this.activeListeners.updateNodeGraphUpdate),i.removeListener("eachNodeAttributesUpdated",this.activeListeners.eachNodeAttributesUpdatedGraphUpdate),i.removeListener("edgeAdded",this.activeListeners.addEdgeGraphUpdate),i.removeListener("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),i.removeListener("edgeAttributesUpdated",this.activeListeners.updateEdgeGraphUpdate),i.removeListener("eachEdgeAttributesUpdated",this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate),i.removeListener("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),i.removeListener("cleared",this.activeListeners.clearGraphUpdate)}},{key:"getEdgeAtPoint",value:function(i,r){var s=b5(this.webGLContexts.edges,this.frameBuffers.edges,i,r,this.pixelRatio,this.pickingDownSizingRatio),o=m5.apply(void 0,k5(s)),a=this.itemIDsIndex[o];return a&&a.type==="edge"?a.id:null}},{key:"process",value:function(){var i=this;this.emit("beforeProcess");var r=this.graph,s=this.settings,o=this.getDimensions();if(this.nodeExtent=m4e(this.graph),!this.settings.autoRescale){var a=o.width,l=o.height,c=this.nodeExtent,u=c.x,h=c.y;this.nodeExtent={x:[(u[0]+u[1])/2-a/2,(u[0]+u[1])/2+a/2],y:[(h[0]+h[1])/2-l/2,(h[0]+h[1])/2+l/2]}}this.normalizationFunction=A5(this.customBBox||this.nodeExtent);var d=new O5,f=kb(d.getState(),o,this.getGraphDimensions(),this.getStagePadding());this.labelGrid.resizeAndClear(o,s.labelGridCellSize);for(var g={},p={},m={},v={},y=1,w=r.nodes(),R=0,x=w.length;R<x;R++){var S=w[R],T=this.nodeDataCache[S],P=r.getNodeAttributes(S);T.x=P.x,T.y=P.y,this.normalizationFunction.applyTo(T),typeof T.label=="string"&&!T.hidden&&this.labelGrid.add(S,T.size,this.framedGraphToViewport(T,{matrix:f})),g[T.type]=(g[T.type]||0)+1}this.labelGrid.organize();for(var E in this.nodePrograms){if(!ac.call(this.nodePrograms,E))throw new Error('Sigma: could not find a suitable program for node type "'.concat(E,'"!'));this.nodePrograms[E].reallocate(g[E]||0),g[E]=0}this.settings.zIndex&&this.nodeZExtent[0]!==this.nodeZExtent[1]&&(w=M5(this.nodeZExtent,function($){return i.nodeDataCache[$].zIndex},w));for(var A=0,L=w.length;A<L;A++){var W=w[A];p[W]=y,v[p[W]]={type:"node",id:W},y++;var F=this.nodeDataCache[W];this.addNodeToProgram(W,p[W],g[F.type]++)}for(var V={},H=r.edges(),N=0,j=H.length;N<j;N++){var k=H[N],K=this.edgeDataCache[k];V[K.type]=(V[K.type]||0)+1}this.settings.zIndex&&this.edgeZExtent[0]!==this.edgeZExtent[1]&&(H=M5(this.edgeZExtent,function($){return i.edgeDataCache[$].zIndex},H));for(var ie in this.edgePrograms){if(!ac.call(this.edgePrograms,ie))throw new Error('Sigma: could not find a suitable program for edge type "'.concat(ie,'"!'));this.edgePrograms[ie].reallocate(V[ie]||0),V[ie]=0}for(var b=0,C=H.length;b<C;b++){var _=H[b];m[_]=y,v[m[_]]={type:"edge",id:_},y++;var I=this.edgeDataCache[_];this.addEdgeToProgram(_,m[_],V[I.type]++)}return this.itemIDsIndex=v,this.nodeIndices=p,this.edgeIndices=m,this.emit("afterProcess"),this}},{key:"handleSettingsUpdate",value:function(i){var r=this.settings;if(this.camera.minRatio=r.minCameraRatio,this.camera.maxRatio=r.maxCameraRatio,this.camera.enabledRotation=r.enableCameraRotation,this.camera.setState(this.camera.validateState(this.camera.getState())),i){if(i.edgeProgramClasses!==r.edgeProgramClasses){for(var s in r.edgeProgramClasses)r.edgeProgramClasses[s]!==i.edgeProgramClasses[s]&&this.registerEdgeProgram(s,r.edgeProgramClasses[s]);for(var o in i.edgeProgramClasses)r.edgeProgramClasses[o]||this.unregisterEdgeProgram(o)}if(i.nodeProgramClasses!==r.nodeProgramClasses||i.nodeHoverProgramClasses!==r.nodeHoverProgramClasses){for(var a in r.nodeProgramClasses)(r.nodeProgramClasses[a]!==i.nodeProgramClasses[a]||r.nodeHoverProgramClasses[a]!==i.nodeHoverProgramClasses[a])&&this.registerNodeProgram(a,r.nodeProgramClasses[a],r.nodeHoverProgramClasses[a]);for(var l in i.nodeProgramClasses)r.nodeProgramClasses[l]||this.unregisterNodeProgram(l)}}return this.mouseCaptor.setSettings(this.settings),this.touchCaptor.setSettings(this.settings),this}},{key:"renderLabels",value:function(){if(!this.settings.renderLabels)return this;var i=this.camera.getState(),r=this.labelGrid.getLabelsToDisplay(i.ratio,this.settings.labelDensity);P5(r,this.nodesWithForcedLabels),this.displayedNodeLabels=new Set;for(var s=this.canvasContexts.labels,o=0,a=r.length;o<a;o++){var l=r[o],c=this.nodeDataCache[l];if(!this.displayedNodeLabels.has(l)&&!c.hidden){var u=this.framedGraphToViewport(c),h=u.x,d=u.y,f=this.scaleSize(c.size);if(!(!c.forceLabel&&f<this.settings.labelRenderedSizeThreshold)&&!(h<-N5||h>this.width+N5||d<-H5||d>this.height+H5)){this.displayedNodeLabels.add(l);var g=this.settings.defaultDrawNodeLabel,p=this.nodePrograms[c.type],m=(p==null?void 0:p.drawLabel)||g;m(s,We(We({key:l},c),{},{size:f,x:h,y:d}),this.settings)}}}return this}},{key:"renderEdgeLabels",value:function(){if(!this.settings.renderEdgeLabels)return this;var i=this.canvasContexts.edgeLabels;i.clearRect(0,0,this.width,this.height);var r=D4e({graph:this.graph,hoveredNode:this.hoveredNode,displayedNodeLabels:this.displayedNodeLabels,highlightedNodes:this.highlightedNodes});P5(r,this.edgesWithForcedLabels);for(var s=new Set,o=0,a=r.length;o<a;o++){var l=r[o],c=this.graph.extremities(l),u=this.nodeDataCache[c[0]],h=this.nodeDataCache[c[1]],d=this.edgeDataCache[l];if(!s.has(l)&&!(d.hidden||u.hidden||h.hidden)){var f=this.settings.defaultDrawEdgeLabel,g=this.edgePrograms[d.type],p=(g==null?void 0:g.drawLabel)||f;p(i,We(We({key:l},d),{},{size:this.scaleSize(d.size)}),We(We(We({key:c[0]},u),this.framedGraphToViewport(u)),{},{size:this.scaleSize(u.size)}),We(We(We({key:c[1]},h),this.framedGraphToViewport(h)),{},{size:this.scaleSize(h.size)}),this.settings),s.add(l)}}return this.displayedEdgeLabels=s,this}},{key:"renderHighlightedNodes",value:function(){var i=this,r=this.canvasContexts.hovers;r.clearRect(0,0,this.width,this.height);var s=function(f){var g=i.nodeDataCache[f],p=i.framedGraphToViewport(g),m=p.x,v=p.y,y=i.scaleSize(g.size),w=i.settings.defaultDrawNodeHover,R=i.nodePrograms[g.type],x=(R==null?void 0:R.drawHover)||w;x(r,We(We({key:f},g),{},{size:y,x:m,y:v}),i.settings)},o=[];this.hoveredNode&&!this.nodeDataCache[this.hoveredNode].hidden&&o.push(this.hoveredNode),this.highlightedNodes.forEach(function(d){d!==i.hoveredNode&&o.push(d)}),o.forEach(function(d){return s(d)});var a={};o.forEach(function(d){var f=i.nodeDataCache[d].type;a[f]=(a[f]||0)+1});for(var l in this.nodeHoverPrograms)this.nodeHoverPrograms[l].reallocate(a[l]||0),a[l]=0;o.forEach(function(d){var f=i.nodeDataCache[d];i.nodeHoverPrograms[f.type].process(0,a[f.type]++,f)}),this.webGLContexts.hoverNodes.clear(this.webGLContexts.hoverNodes.COLOR_BUFFER_BIT);var c=this.getRenderParams();for(var u in this.nodeHoverPrograms){var h=this.nodeHoverPrograms[u];h.render(c)}}},{key:"scheduleHighlightedNodesRender",value:function(){var i=this;this.renderHighlightedNodesFrame||this.renderFrame||(this.renderHighlightedNodesFrame=requestAnimationFrame(function(){i.renderHighlightedNodesFrame=null,i.renderHighlightedNodes(),i.renderEdgeLabels()}))}},{key:"render",value:function(){var i=this;this.emit("beforeRender");var r=function(){return i.emit("afterRender"),i};if(this.renderFrame&&(cancelAnimationFrame(this.renderFrame),this.renderFrame=null),this.resize(),this.needToProcess&&this.process(),this.needToProcess=!1,this.clear(),this.pickingLayers.forEach(function(m){return i.resetWebGLTexture(m)}),!this.graph.order)return r();var s=this.mouseCaptor,o=this.camera.isAnimated()||s.isMoving||s.draggedEvents||s.currentWheelDirection,a=this.camera.getState(),l=this.getDimensions(),c=this.getGraphDimensions(),u=this.getStagePadding();this.matrix=kb(a,l,c,u),this.invMatrix=kb(a,l,c,u,!0),this.correctionRatio=p4e(this.matrix,a,l),this.graphToViewportRatio=this.getGraphToViewportRatio();var h=this.getRenderParams();for(var d in this.nodePrograms){var f=this.nodePrograms[d];f.render(h)}if(!this.settings.hideEdgesOnMove||!o)for(var g in this.edgePrograms){var p=this.edgePrograms[g];p.render(h)}return this.settings.hideLabelsOnMove&&o||(this.renderLabels(),this.renderEdgeLabels(),this.renderHighlightedNodes()),r()}},{key:"addNode",value:function(i){var r=Object.assign({},this.graph.getNodeAttributes(i));this.settings.nodeReducer&&(r=this.settings.nodeReducer(i,r));var s=L4e(this.settings,i,r);this.nodeDataCache[i]=s,this.nodesWithForcedLabels.delete(i),s.forceLabel&&!s.hidden&&this.nodesWithForcedLabels.add(i),this.highlightedNodes.delete(i),s.highlighted&&!s.hidden&&this.highlightedNodes.add(i),this.settings.zIndex&&(s.zIndex<this.nodeZExtent[0]&&(this.nodeZExtent[0]=s.zIndex),s.zIndex>this.nodeZExtent[1]&&(this.nodeZExtent[1]=s.zIndex))}},{key:"updateNode",value:function(i){this.addNode(i);var r=this.nodeDataCache[i];this.normalizationFunction.applyTo(r)}},{key:"removeNode",value:function(i){delete this.nodeDataCache[i],delete this.nodeProgramIndex[i],this.highlightedNodes.delete(i),this.hoveredNode===i&&(this.hoveredNode=null),this.nodesWithForcedLabels.delete(i)}},{key:"addEdge",value:function(i){var r=Object.assign({},this.graph.getEdgeAttributes(i));this.settings.edgeReducer&&(r=this.settings.edgeReducer(i,r));var s=N4e(this.settings,i,r);this.edgeDataCache[i]=s,this.edgesWithForcedLabels.delete(i),s.forceLabel&&!s.hidden&&this.edgesWithForcedLabels.add(i),this.settings.zIndex&&(s.zIndex<this.edgeZExtent[0]&&(this.edgeZExtent[0]=s.zIndex),s.zIndex>this.edgeZExtent[1]&&(this.edgeZExtent[1]=s.zIndex))}},{key:"updateEdge",value:function(i){this.addEdge(i)}},{key:"removeEdge",value:function(i){delete this.edgeDataCache[i],delete this.edgeProgramIndex[i],this.hoveredEdge===i&&(this.hoveredEdge=null),this.edgesWithForcedLabels.delete(i)}},{key:"clearNodeIndices",value:function(){this.labelGrid=new L5,this.nodeExtent={x:[0,1],y:[0,1]},this.nodeDataCache={},this.edgeProgramIndex={},this.nodesWithForcedLabels=new Set,this.nodeZExtent=[1/0,-1/0]}},{key:"clearEdgeIndices",value:function(){this.edgeDataCache={},this.edgeProgramIndex={},this.edgesWithForcedLabels=new Set,this.edgeZExtent=[1/0,-1/0]}},{key:"clearIndices",value:function(){this.clearEdgeIndices(),this.clearNodeIndices()}},{key:"clearNodeState",value:function(){this.displayedNodeLabels=new Set,this.highlightedNodes=new Set,this.hoveredNode=null}},{key:"clearEdgeState",value:function(){this.displayedEdgeLabels=new Set,this.highlightedNodes=new Set,this.hoveredEdge=null}},{key:"clearState",value:function(){this.clearEdgeState(),this.clearNodeState()}},{key:"addNodeToProgram",value:function(i,r,s){var o=this.nodeDataCache[i],a=this.nodePrograms[o.type];if(!a)throw new Error('Sigma: could not find a suitable program for node type "'.concat(o.type,'"!'));a.process(r,s,o),this.nodeProgramIndex[i]=s}},{key:"addEdgeToProgram",value:function(i,r,s){var o=this.edgeDataCache[i],a=this.edgePrograms[o.type];if(!a)throw new Error('Sigma: could not find a suitable program for edge type "'.concat(o.type,'"!'));var l=this.graph.extremities(i),c=this.nodeDataCache[l[0]],u=this.nodeDataCache[l[1]];a.process(r,s,c,u,o),this.edgeProgramIndex[i]=s}},{key:"getRenderParams",value:function(){return{matrix:this.matrix,invMatrix:this.invMatrix,width:this.width,height:this.height,pixelRatio:this.pixelRatio,zoomRatio:this.camera.ratio,cameraAngle:this.camera.angle,sizeRatio:1/this.scaleSize(),correctionRatio:this.correctionRatio,downSizingRatio:this.pickingDownSizingRatio,minEdgeThickness:this.settings.minEdgeThickness,antiAliasingFeather:this.settings.antiAliasingFeather}}},{key:"getStagePadding",value:function(){var i=this.settings,r=i.stagePadding,s=i.autoRescale;return s&&r||0}},{key:"createLayer",value:function(i,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this.elements[i])throw new Error('Sigma: a layer named "'.concat(i,'" already exists'));var o=v4e(r,{position:"absolute"},{class:"sigma-".concat(i)});return s.style&&Object.assign(o.style,s.style),this.elements[i]=o,"beforeLayer"in s&&s.beforeLayer?this.elements[s.beforeLayer].before(o):"afterLayer"in s&&s.afterLayer?this.elements[s.afterLayer].after(o):this.container.appendChild(o),o}},{key:"createCanvas",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.createLayer(i,"canvas",r)}},{key:"createCanvasContext",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.createCanvas(i,r),o={preserveDrawingBuffer:!1,antialias:!1};return this.canvasContexts[i]=s.getContext("2d",o),this}},{key:"createWebGLContext",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=(r==null?void 0:r.canvas)||this.createCanvas(i,r);r.hidden&&s.remove();var o=We({preserveDrawingBuffer:!1,antialias:!1},r),a;a=s.getContext("webgl2",o),a||(a=s.getContext("webgl",o)),a||(a=s.getContext("experimental-webgl",o));var l=a;if(this.webGLContexts[i]=l,l.blendFunc(l.ONE,l.ONE_MINUS_SRC_ALPHA),r.picking){this.pickingLayers.add(i);var c=l.createFramebuffer();if(!c)throw new Error("Sigma: cannot create a new frame buffer for layer ".concat(i));this.frameBuffers[i]=c}return l}},{key:"killLayer",value:function(i){var r=this.elements[i];if(!r)throw new Error("Sigma: cannot kill layer ".concat(i,", which does not exist"));if(this.webGLContexts[i]){var s,o=this.webGLContexts[i];(s=o.getExtension("WEBGL_lose_context"))===null||s===void 0||s.loseContext(),delete this.webGLContexts[i]}else this.canvasContexts[i]&&delete this.canvasContexts[i];return r.remove(),delete this.elements[i],this}},{key:"getCamera",value:function(){return this.camera}},{key:"setCamera",value:function(i){this.unbindCameraHandlers(),this.camera=i,this.bindCameraHandlers()}},{key:"getContainer",value:function(){return this.container}},{key:"getGraph",value:function(){return this.graph}},{key:"setGraph",value:function(i){i!==this.graph&&(this.unbindGraphHandlers(),this.checkEdgesEventsFrame!==null&&(cancelAnimationFrame(this.checkEdgesEventsFrame),this.checkEdgesEventsFrame=null),this.graph=i,this.bindGraphHandlers(),this.refresh())}},{key:"getMouseCaptor",value:function(){return this.mouseCaptor}},{key:"getTouchCaptor",value:function(){return this.touchCaptor}},{key:"getDimensions",value:function(){return{width:this.width,height:this.height}}},{key:"getGraphDimensions",value:function(){var i=this.customBBox||this.nodeExtent;return{width:i.x[1]-i.x[0]||1,height:i.y[1]-i.y[0]||1}}},{key:"getNodeDisplayData",value:function(i){var r=this.nodeDataCache[i];return r?Object.assign({},r):void 0}},{key:"getEdgeDisplayData",value:function(i){var r=this.edgeDataCache[i];return r?Object.assign({},r):void 0}},{key:"getNodeDisplayedLabels",value:function(){return new Set(this.displayedNodeLabels)}},{key:"getEdgeDisplayedLabels",value:function(){return new Set(this.displayedEdgeLabels)}},{key:"getSettings",value:function(){return We({},this.settings)}},{key:"getSetting",value:function(i){return this.settings[i]}},{key:"setSetting",value:function(i,r){var s=We({},this.settings);return this.settings[i]=r,I5(this.settings),this.handleSettingsUpdate(s),this.scheduleRefresh(),this}},{key:"updateSetting",value:function(i,r){return this.setSetting(i,r(this.settings[i])),this}},{key:"resize",value:function(i){var r=this.width,s=this.height;if(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,this.pixelRatio=T5(),this.width===0)if(this.settings.allowInvalidContainer)this.width=1;else throw new Error("Sigma: Container has no width. You can set the allowInvalidContainer setting to true to stop seeing this error.");if(this.height===0)if(this.settings.allowInvalidContainer)this.height=1;else throw new Error("Sigma: Container has no height. You can set the allowInvalidContainer setting to true to stop seeing this error.");if(!i&&r===this.width&&s===this.height)return this;for(var o in this.elements){var a=this.elements[o];a.style.width=this.width+"px",a.style.height=this.height+"px"}for(var l in this.canvasContexts)this.elements[l].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[l].setAttribute("height",this.height*this.pixelRatio+"px"),this.pixelRatio!==1&&this.canvasContexts[l].scale(this.pixelRatio,this.pixelRatio);for(var c in this.webGLContexts){this.elements[c].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[c].setAttribute("height",this.height*this.pixelRatio+"px");var u=this.webGLContexts[c];if(u.viewport(0,0,this.width*this.pixelRatio,this.height*this.pixelRatio),this.pickingLayers.has(c)){var h=this.textures[c];h&&u.deleteTexture(h)}}return this.emit("resize"),this}},{key:"clear",value:function(){return this.emit("beforeClear"),this.webGLContexts.nodes.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,null),this.webGLContexts.nodes.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.webGLContexts.edges.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,null),this.webGLContexts.edges.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.webGLContexts.hoverNodes.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.canvasContexts.labels.clearRect(0,0,this.width,this.height),this.canvasContexts.hovers.clearRect(0,0,this.width,this.height),this.canvasContexts.edgeLabels.clearRect(0,0,this.width,this.height),this.emit("afterClear"),this}},{key:"refresh",value:function(i){var r=this,s=(i==null?void 0:i.skipIndexation)!==void 0?i==null?void 0:i.skipIndexation:!1,o=(i==null?void 0:i.schedule)!==void 0?i.schedule:!1,a=!i||!i.partialGraph;if(a)this.clearEdgeIndices(),this.clearNodeIndices(),this.graph.forEachNode(function(R){return r.addNode(R)}),this.graph.forEachEdge(function(R){return r.addEdge(R)});else{for(var l,c,u=((l=i.partialGraph)===null||l===void 0?void 0:l.nodes)||[],h=0,d=(u==null?void 0:u.length)||0;h<d;h++){var f=u[h];if(this.updateNode(f),s){var g=this.nodeProgramIndex[f];if(g===void 0)throw new Error('Sigma: node "'.concat(f,`" can't be repaint`));this.addNodeToProgram(f,this.nodeIndices[f],g)}}for(var p=(i==null||(c=i.partialGraph)===null||c===void 0?void 0:c.edges)||[],m=0,v=p.length;m<v;m++){var y=p[m];if(this.updateEdge(y),s){var w=this.edgeProgramIndex[y];if(w===void 0)throw new Error('Sigma: edge "'.concat(y,`" can't be repaint`));this.addEdgeToProgram(y,this.edgeIndices[y],w)}}}return(a||!s)&&(this.needToProcess=!0),o?this.scheduleRender():this.render(),this}},{key:"scheduleRender",value:function(){var i=this;return this.renderFrame||(this.renderFrame=requestAnimationFrame(function(){i.render()})),this}},{key:"scheduleRefresh",value:function(i){return this.refresh(We(We({},i),{},{schedule:!0}))}},{key:"getViewportZoomedState",value:function(i,r){var s=this.camera.getState(),o=s.ratio,a=s.angle,l=s.x,c=s.y,u=this.settings,h=u.minCameraRatio,d=u.maxCameraRatio;typeof d=="number"&&(r=Math.min(r,d)),typeof h=="number"&&(r=Math.max(r,h));var f=r/o,g={x:this.width/2,y:this.height/2},p=this.viewportToFramedGraph(i),m=this.viewportToFramedGraph(g);return{angle:a,x:(p.x-m.x)*(1-f)+l,y:(p.y-m.y)*(1-f)+c,ratio:r}}},{key:"viewRectangle",value:function(){var i=this.viewportToFramedGraph({x:0,y:0}),r=this.viewportToFramedGraph({x:this.width,y:0}),s=this.viewportToFramedGraph({x:0,y:this.height});return{x1:i.x,y1:i.y,x2:r.x,y2:r.y,height:r.y-s.y}}},{key:"framedGraphToViewport",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=!!r.cameraState||!!r.viewportDimensions||!!r.graphDimensions,o=r.matrix?r.matrix:s?kb(r.cameraState||this.camera.getState(),r.viewportDimensions||this.getDimensions(),r.graphDimensions||this.getGraphDimensions(),r.padding||this.getStagePadding()):this.matrix,a=mO(o,i);return{x:(1+a.x)*this.width/2,y:(1-a.y)*this.height/2}}},{key:"viewportToFramedGraph",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=!!r.cameraState||!!r.viewportDimensions||!r.graphDimensions,o=r.matrix?r.matrix:s?kb(r.cameraState||this.camera.getState(),r.viewportDimensions||this.getDimensions(),r.graphDimensions||this.getGraphDimensions(),r.padding||this.getStagePadding(),!0):this.invMatrix,a=mO(o,{x:i.x/this.width*2-1,y:1-i.y/this.height*2});return isNaN(a.x)&&(a.x=0),isNaN(a.y)&&(a.y=0),a}},{key:"viewportToGraph",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.normalizationFunction.inverse(this.viewportToFramedGraph(i,r))}},{key:"graphToViewport",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.framedGraphToViewport(this.normalizationFunction(i),r)}},{key:"getGraphToViewportRatio",value:function(){var i={x:0,y:0},r={x:1,y:1},s=Math.sqrt(Math.pow(i.x-r.x,2)+Math.pow(i.y-r.y,2)),o=this.graphToViewport(i),a=this.graphToViewport(r),l=Math.sqrt(Math.pow(o.x-a.x,2)+Math.pow(o.y-a.y,2));return l/s}},{key:"getBBox",value:function(){return this.nodeExtent}},{key:"getCustomBBox",value:function(){return this.customBBox}},{key:"setCustomBBox",value:function(i){return this.customBBox=i,this.scheduleRender(),this}},{key:"kill",value:function(){this.emit("kill"),this.removeAllListeners(),this.unbindCameraHandlers(),window.removeEventListener("resize",this.activeListeners.handleResize),this.mouseCaptor.kill(),this.touchCaptor.kill(),this.unbindGraphHandlers(),this.clearIndices(),this.clearState(),this.nodeDataCache={},this.edgeDataCache={},this.highlightedNodes.clear(),this.renderFrame&&(cancelAnimationFrame(this.renderFrame),this.renderFrame=null),this.renderHighlightedNodesFrame&&(cancelAnimationFrame(this.renderHighlightedNodesFrame),this.renderHighlightedNodesFrame=null);for(var i=this.container;i.firstChild;)i.removeChild(i.firstChild);this.canvasContexts={},this.webGLContexts={},this.elements={};for(var r in this.nodePrograms)this.nodePrograms[r].kill();for(var s in this.nodeHoverPrograms)this.nodeHoverPrograms[s].kill();for(var o in this.edgePrograms)this.edgePrograms[o].kill();this.nodePrograms={},this.nodeHoverPrograms={},this.edgePrograms={};for(var a in this.elements)this.killLayer(a)}},{key:"scaleSize",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.camera.ratio;return i/this.settings.zoomToSizeRatioFunction(r)*(this.getSetting("itemSizesReference")==="positions"?r*this.graphToViewportRatio:1)}},{key:"getCanvases",value:function(){var i={};for(var r in this.elements)this.elements[r]instanceof HTMLCanvasElement&&(i[r]=this.elements[r]);return i}}]),e}(GH);function H4e(n){return!n||typeof n!="object"||typeof n=="function"||Array.isArray(n)||n instanceof Set||n instanceof Map||n instanceof RegExp||n instanceof Date}function SZ(n,e){n=n||{};var t={};for(var i in e){var r=n[i],s=e[i];if(!H4e(s)){t[i]=SZ(r,s);continue}r===void 0?t[i]=s:t[i]=r}return t}var $4e=SZ,ky={};function F4e(n){return typeof n!="number"||isNaN(n)?1:n}function B4e(n,e){var t={},i=function(o){return typeof o>"u"?e:o};typeof e=="function"&&(i=e);var r=function(o){return i(o[n])},s=function(){return i(void 0)};return typeof n=="string"?(t.fromAttributes=r,t.fromGraph=function(o,a){return r(o.getNodeAttributes(a))},t.fromEntry=function(o,a){return r(a)}):typeof n=="function"?(t.fromAttributes=function(){throw new Error("graphology-utils/getters/createNodeValueGetter: irrelevant usage.")},t.fromGraph=function(o,a){return i(n(a,o.getNodeAttributes(a)))},t.fromEntry=function(o,a){return i(n(o,a))}):(t.fromAttributes=s,t.fromGraph=s,t.fromEntry=s),t}function _Z(n,e){var t={},i=function(o){return typeof o>"u"?e:o};typeof e=="function"&&(i=e);var r=function(o){return i(o[n])},s=function(){return i(void 0)};return typeof n=="string"?(t.fromAttributes=r,t.fromGraph=function(o,a){return r(o.getEdgeAttributes(a))},t.fromEntry=function(o,a){return r(a)},t.fromPartialEntry=t.fromEntry,t.fromMinimalEntry=t.fromEntry):typeof n=="function"?(t.fromAttributes=function(){throw new Error("graphology-utils/getters/createEdgeValueGetter: irrelevant usage.")},t.fromGraph=function(o,a){var l=o.extremities(a);return i(n(a,o.getEdgeAttributes(a),l[0],l[1],o.getNodeAttributes(l[0]),o.getNodeAttributes(l[1]),o.isUndirected(a)))},t.fromEntry=function(o,a,l,c,u,h,d){return i(n(o,a,l,c,u,h,d))},t.fromPartialEntry=function(o,a,l,c){return i(n(o,a,l,c))},t.fromMinimalEntry=function(o,a){return i(n(o,a))}):(t.fromAttributes=s,t.fromGraph=s,t.fromEntry=s,t.fromMinimalEntry=s),t}ky.createNodeValueGetter=B4e;ky.createEdgeValueGetter=_Z;ky.createEdgeWeightGetter=function(n){return _Z(n,F4e)};const{createNodeValueGetter:F5,createEdgeValueGetter:V4e}=ky;var W4e=function(e,t,i){const{nodeXAttribute:r,nodeYAttribute:s}=i,{attraction:o,repulsion:a,gravity:l,inertia:c,maxMove:u}=i.settings;let{shouldSkipNode:h,shouldSkipEdge:d,isNodeFixed:f}=i;f=F5(f),h=F5(h,!1),d=V4e(d,!1);const g=e.filterNodes((v,y)=>!h.fromEntry(v,y)),p=g.length;for(let v=0;v<p;v++){const y=g[v],w=e.getNodeAttributes(y),R=t[y];R?t[y]={dx:R.dx*c,dy:R.dy*c,x:w[r]||0,y:w[s]||0}:t[y]={dx:0,dy:0,x:w[r]||0,y:w[s]||0}}if(a)for(let v=0;v<p;v++){const y=g[v],w=t[y];for(let R=v+1;R<p;R++){const x=g[R],S=t[x],T=S.x-w.x,P=S.y-w.y,E=Math.sqrt(T*T+P*P)||1,A=a/E*T,L=a/E*P;w.dx-=A,w.dy-=L,S.dx+=A,S.dy+=L}}if(o&&e.forEachEdge((v,y,w,R,x,S,T)=>{if(w===R||h.fromEntry(w,x)||h.fromEntry(R,S)||d.fromEntry(v,y,w,R,x,S,T))return;const P=t[w],E=t[R],A=E.x-P.x,L=E.y-P.y,W=Math.sqrt(A*A+L*L)||1,F=o*W*A,V=o*W*L;P.dx+=F,P.dy+=V,E.dx-=F,E.dy-=V}),l)for(let v=0;v<p;v++){const y=g[v],w=t[y],{x:R,y:x}=w,S=Math.sqrt(R*R+x*x)||1;t[y].dx-=R*l*S,t[y].dy-=x*l*S}const m=!1;for(let v=0;v<p;v++){const y=g[v],w=t[y],R=Math.sqrt(w.dx*w.dx+w.dy*w.dy);R>u&&(w.dx*=u/R,w.dy*=u/R),f.fromGraph(e,y)?w.fixed=!0:(w.x+=w.dx,w.y+=w.dy,w.fixed=!1)}return{converged:m}},KH={};KH.assignLayoutChanges=function(n,e,t){const{nodeXAttribute:i,nodeYAttribute:r}=t;n.updateEachNodeAttributes((s,o)=>{const a=e[s];return!a||a.fixed||(o[i]=a.x,o[r]=a.y),o},{attributes:["x","y"]})};KH.collectLayoutChanges=function(n){const e={};for(const t in n){const i=n[t];e[t]={x:i.x,y:i.y}}return e};var j4e={nodeXAttribute:"x",nodeYAttribute:"y",isNodeFixed:"fixed",shouldSkipNode:null,shouldSkipEdge:null,settings:{attraction:5e-4,repulsion:.1,gravity:1e-4,inertia:.6,maxMove:200}};const z4e=FE,U4e=$4e,G4e=W4e,Y4e=KH,K4e=j4e;function Dy(n,e){if(!z4e(n))throw new Error("graphology-layout-force/worker: the given graph is not a valid graphology instance.");e=U4e(e,K4e),this.callbacks={},e.onConverged&&(this.callbacks.onConverged=e.onConverged),this.graph=n,this.params=e,this.nodeStates={},this.frameID=null,this.running=!1,this.killed=!1}Dy.prototype.isRunning=function(){return this.running};Dy.prototype.runFrame=function(){let{converged:n}=G4e(this.graph,this.nodeStates,this.params);Y4e.assignLayoutChanges(this.graph,this.nodeStates,this.params),n=!1,n?(this.callbacks.onConverged&&this.callbacks.onConverged(),this.stop()):this.frameID=window.requestAnimationFrame(()=>this.runFrame())};Dy.prototype.stop=function(){return this.running=!1,this.frameID!==null&&(window.cancelAnimationFrame(this.frameID),this.frameID=null),this};Dy.prototype.start=function(){if(this.killed)throw new Error("graphology-layout-force/worker.start: layout was killed.");this.running||(this.running=!0,this.runFrame())};Dy.prototype.kill=function(){this.stop(),delete this.nodeStates,this.killed=!0};var q4e=function(){var e,t={};(function(){var r=0,s=1,o=2,a=3;function l(u,h){return u+"§"+h}function c(){return .01*(.5-Math.random())}t.exports=function(h,d){var f=h.margin,g=h.ratio,p=h.expansion,m=h.gridSize,v=h.speed,y,w,R,x,S,T,P=!0,E=d.length,A=E/a|0,L=new Float32Array(A),W=new Float32Array(A),F=1/0,V=1/0,H=-1/0,N=-1/0;for(y=0;y<E;y+=a)R=d[y+r],x=d[y+s],T=d[y+o]*g+f,F=Math.min(F,R-T),H=Math.max(H,R+T),V=Math.min(V,x-T),N=Math.max(N,x+T);var j=H-F,k=N-V,K=(F+H)/2,ie=(V+N)/2;F=K-p*j/2,H=K+p*j/2,V=ie-p*k/2,N=ie+p*k/2;var b=new Array(m*m),C=b.length,_;for(_=0;_<C;_++)b[_]=[];var I,$,M,B,z,U,le,ue,be,fe;for(y=0;y<E;y+=a)for(R=d[y+r],x=d[y+s],T=d[y+o]*g+f,I=R-T,$=R+T,M=x-T,B=x+T,z=Math.floor(m*(I-F)/(H-F)),U=Math.floor(m*($-F)/(H-F)),le=Math.floor(m*(M-V)/(N-V)),ue=Math.floor(m*(B-V)/(N-V)),be=z;be<=U;be++)for(fe=le;fe<=ue;fe++)b[be*m+fe].push(y);var Z,Y=new Set,ne,de,he,ce,D,O,G,te,X,re,J,Q,se;for(_=0;_<C;_++)for(Z=b[_],y=0,S=Z.length;y<S;y++)for(ne=Z[y],he=d[ne+r],D=d[ne+s],G=d[ne+o],w=y+1;w<S;w++)de=Z[w],X=l(ne,de),!(C>1&&Y.has(X))&&(C>1&&Y.add(X),ce=d[de+r],O=d[de+s],te=d[de+o],re=ce-he,J=O-D,Q=Math.sqrt(re*re+J*J),se=Q<G*g+f+(te*g+f),se&&(P=!1,de=de/a|0,Q>0?(L[de]+=re/Q*(1+G),W[de]+=J/Q*(1+G)):(L[de]+=j*c(),W[de]+=k*c())));for(y=0,w=0;y<E;y+=a,w++)d[y+r]+=L[w]*.1*v,d[y+s]+=W[w]*.1*v;return{converged:P}}})();var i=t.exports;self.addEventListener("message",function(r){var s=r.data;e=new Float32Array(s.nodes);var o=i(s.settings,e);self.postMessage({result:o,nodes:e.buffer},[e.buffer])})},fm={},UR=3;fm.validateSettings=function(n){return"gridSize"in n&&typeof n.gridSize!="number"||n.gridSize<=0?{message:"the `gridSize` setting should be a positive number."}:"margin"in n&&typeof n.margin!="number"||n.margin<0?{message:"the `margin` setting should be 0 or a positive number."}:"expansion"in n&&typeof n.expansion!="number"||n.expansion<=0?{message:"the `expansion` setting should be a positive number."}:"ratio"in n&&typeof n.ratio!="number"||n.ratio<=0?{message:"the `ratio` setting should be a positive number."}:"speed"in n&&typeof n.speed!="number"||n.speed<=0?{message:"the `speed` setting should be a positive number."}:null};fm.graphToByteArray=function(n,e){var t=n.order,i=new Float32Array(t*UR),r=0;return n.forEachNode(function(s,o){typeof e=="function"&&(o=e(s,o)),i[r]=o.x,i[r+1]=o.y,i[r+2]=o.size||1,r+=UR}),i};fm.assignLayoutChanges=function(n,e,t){var i=0;n.forEachNode(function(r){var s={x:e[i],y:e[i+1]};typeof t=="function"&&(s=t(r,s)),n.mergeNodeAttributes(r,s),i+=UR})};fm.collectLayoutChanges=function(n,e,t){var i={},r=0;return n.forEachNode(function(s){var o={x:e[r],y:e[r+1]};typeof t=="function"&&(o=t(s,o)),i[s]=o,r+=UR}),i};fm.createWorker=function(e){var t=window.URL||window.webkitURL,i=e.toString(),r=t.createObjectURL(new Blob(["("+i+").call(this);"],{type:"text/javascript"})),s=new Worker(r);return t.revokeObjectURL(r),s};var X4e={gridSize:20,margin:5,expansion:1.1,ratio:1,speed:3},Z4e=q4e,Q4e=FE,BE=fm,J4e=X4e;function hh(n,e){if(e=e||{},!Q4e(n))throw new Error("graphology-layout-noverlap/worker: the given graph is not a valid graphology instance.");var t=Object.assign({},J4e,e.settings),i=BE.validateSettings(t);if(i)throw new Error("graphology-layout-noverlap/worker: "+i.message);this.worker=null,this.graph=n,this.settings=t,this.matrices=null,this.running=!1,this.killed=!1,this.inputReducer=e.inputReducer,this.outputReducer=e.outputReducer,this.callbacks={onConverged:typeof e.onConverged=="function"?e.onConverged:null},this.handleMessage=this.handleMessage.bind(this);var r=!1,s=this;this.handleAddition=function(){r||(r=!0,s.spawnWorker(),setTimeout(function(){r=!1},0))},n.on("nodeAdded",this.handleAddition),n.on("edgeAdded",this.handleAddition),this.spawnWorker()}hh.prototype.isRunning=function(){return this.running};hh.prototype.spawnWorker=function(){this.worker&&this.worker.terminate(),this.worker=BE.createWorker(Z4e),this.worker.addEventListener("message",this.handleMessage),this.running&&(this.running=!1,this.start())};hh.prototype.handleMessage=function(n){if(this.running){var e=new Float32Array(n.data.nodes);if(BE.assignLayoutChanges(this.graph,e,this.outputReducer),this.matrices.nodes=e,n.data.result.converged){this.callbacks.onConverged&&this.callbacks.onConverged(),this.stop();return}this.askForIterations()}};hh.prototype.askForIterations=function(){var n=this.matrices,e={settings:this.settings,nodes:n.nodes.buffer},t=[n.nodes.buffer];return this.worker.postMessage(e,t),this};hh.prototype.start=function(){if(this.killed)throw new Error("graphology-layout-noverlap/worker.start: layout was killed.");return this.running?this:(this.matrices={nodes:BE.graphToByteArray(this.graph,this.inputReducer)},this.running=!0,this.askForIterations(),this)};hh.prototype.stop=function(){return this.running=!1,this};hh.prototype.kill=function(){if(this.killed)return this;this.running=!1,this.killed=!0,this.matrices=null,this.worker.terminate(),this.graph.removeListener("nodeAdded",this.handleAddition),this.graph.removeListener("edgeAdded",this.handleAddition)};var eUe=hh;const tUe=_f(eUe);var nUe=function(){var e,t,i={};(function(){var s=0,o=1,a=2,l=3,c=4,u=5,h=6,d=7,f=8,g=9,p=0,m=1,v=2,y=0,w=1,R=2,x=3,S=4,T=5,P=6,E=7,A=8,L=3,W=10,F=3,V=9,H=10;i.exports=function(j,k,K){var ie,b,C,_,I,$,M,B,z,U,le=k.length,ue=K.length,be=j.adjustSizes,fe=j.barnesHutTheta*j.barnesHutTheta,Z,Y,ne,de,he,ce,D,O=[];for(C=0;C<le;C+=W)k[C+c]=k[C+a],k[C+u]=k[C+l],k[C+a]=0,k[C+l]=0;if(j.outboundAttractionDistribution){for(Z=0,C=0;C<le;C+=W)Z+=k[C+h];Z/=le/W}if(j.barnesHutOptimize){var G=1/0,te=-1/0,X=1/0,re=-1/0,J,Q,se;for(C=0;C<le;C+=W)G=Math.min(G,k[C+s]),te=Math.max(te,k[C+s]),X=Math.min(X,k[C+o]),re=Math.max(re,k[C+o]);var oe=te-G,ae=re-X;for(oe>ae?(X-=(oe-ae)/2,re=X+oe):(G-=(ae-oe)/2,te=G+ae),O[0+y]=-1,O[0+w]=(G+te)/2,O[0+R]=(X+re)/2,O[0+x]=Math.max(te-G,re-X),O[0+S]=-1,O[0+T]=-1,O[0+P]=0,O[0+E]=0,O[0+A]=0,ie=1,C=0;C<le;C+=W)for(b=0,se=L;;)if(O[b+T]>=0){k[C+s]<O[b+w]?k[C+o]<O[b+R]?J=O[b+T]:J=O[b+T]+V:k[C+o]<O[b+R]?J=O[b+T]+V*2:J=O[b+T]+V*3,O[b+E]=(O[b+E]*O[b+P]+k[C+s]*k[C+h])/(O[b+P]+k[C+h]),O[b+A]=(O[b+A]*O[b+P]+k[C+o]*k[C+h])/(O[b+P]+k[C+h]),O[b+P]+=k[C+h],b=J;continue}else if(O[b+y]<0){O[b+y]=C;break}else{if(O[b+T]=ie*V,B=O[b+x]/2,z=O[b+T],O[z+y]=-1,O[z+w]=O[b+w]-B,O[z+R]=O[b+R]-B,O[z+x]=B,O[z+S]=z+V,O[z+T]=-1,O[z+P]=0,O[z+E]=0,O[z+A]=0,z+=V,O[z+y]=-1,O[z+w]=O[b+w]-B,O[z+R]=O[b+R]+B,O[z+x]=B,O[z+S]=z+V,O[z+T]=-1,O[z+P]=0,O[z+E]=0,O[z+A]=0,z+=V,O[z+y]=-1,O[z+w]=O[b+w]+B,O[z+R]=O[b+R]-B,O[z+x]=B,O[z+S]=z+V,O[z+T]=-1,O[z+P]=0,O[z+E]=0,O[z+A]=0,z+=V,O[z+y]=-1,O[z+w]=O[b+w]+B,O[z+R]=O[b+R]+B,O[z+x]=B,O[z+S]=O[b+S],O[z+T]=-1,O[z+P]=0,O[z+E]=0,O[z+A]=0,ie+=4,k[O[b+y]+s]<O[b+w]?k[O[b+y]+o]<O[b+R]?J=O[b+T]:J=O[b+T]+V:k[O[b+y]+o]<O[b+R]?J=O[b+T]+V*2:J=O[b+T]+V*3,O[b+P]=k[O[b+y]+h],O[b+E]=k[O[b+y]+s],O[b+A]=k[O[b+y]+o],O[J+y]=O[b+y],O[b+y]=-1,k[C+s]<O[b+w]?k[C+o]<O[b+R]?Q=O[b+T]:Q=O[b+T]+V:k[C+o]<O[b+R]?Q=O[b+T]+V*2:Q=O[b+T]+V*3,J===Q)if(se--){b=J;continue}else{se=L;break}O[Q+y]=C;break}}if(j.barnesHutOptimize)for(Y=j.scalingRatio,C=0;C<le;C+=W)for(b=0;;)if(O[b+T]>=0)if(ce=Math.pow(k[C+s]-O[b+E],2)+Math.pow(k[C+o]-O[b+A],2),U=O[b+x],4*U*U/ce<fe){if(ne=k[C+s]-O[b+E],de=k[C+o]-O[b+A],be===!0?ce>0?(D=Y*k[C+h]*O[b+P]/ce,k[C+a]+=ne*D,k[C+l]+=de*D):ce<0&&(D=-Y*k[C+h]*O[b+P]/Math.sqrt(ce),k[C+a]+=ne*D,k[C+l]+=de*D):ce>0&&(D=Y*k[C+h]*O[b+P]/ce,k[C+a]+=ne*D,k[C+l]+=de*D),b=O[b+S],b<0)break;continue}else{b=O[b+T];continue}else{if($=O[b+y],$>=0&&$!==C&&(ne=k[C+s]-k[$+s],de=k[C+o]-k[$+o],ce=ne*ne+de*de,be===!0?ce>0?(D=Y*k[C+h]*k[$+h]/ce,k[C+a]+=ne*D,k[C+l]+=de*D):ce<0&&(D=-Y*k[C+h]*k[$+h]/Math.sqrt(ce),k[C+a]+=ne*D,k[C+l]+=de*D):ce>0&&(D=Y*k[C+h]*k[$+h]/ce,k[C+a]+=ne*D,k[C+l]+=de*D)),b=O[b+S],b<0)break;continue}else for(Y=j.scalingRatio,_=0;_<le;_+=W)for(I=0;I<_;I+=W)ne=k[_+s]-k[I+s],de=k[_+o]-k[I+o],be===!0?(ce=Math.sqrt(ne*ne+de*de)-k[_+f]-k[I+f],ce>0?(D=Y*k[_+h]*k[I+h]/ce/ce,k[_+a]+=ne*D,k[_+l]+=de*D,k[I+a]-=ne*D,k[I+l]-=de*D):ce<0&&(D=100*Y*k[_+h]*k[I+h],k[_+a]+=ne*D,k[_+l]+=de*D,k[I+a]-=ne*D,k[I+l]-=de*D)):(ce=Math.sqrt(ne*ne+de*de),ce>0&&(D=Y*k[_+h]*k[I+h]/ce/ce,k[_+a]+=ne*D,k[_+l]+=de*D,k[I+a]-=ne*D,k[I+l]-=de*D));for(z=j.gravity/j.scalingRatio,Y=j.scalingRatio,C=0;C<le;C+=W)D=0,ne=k[C+s],de=k[C+o],ce=Math.sqrt(Math.pow(ne,2)+Math.pow(de,2)),j.strongGravityMode?ce>0&&(D=Y*k[C+h]*z):ce>0&&(D=Y*k[C+h]*z/ce),k[C+a]-=ne*D,k[C+l]-=de*D;for(Y=1*(j.outboundAttractionDistribution?Z:1),M=0;M<ue;M+=F)_=K[M+p],I=K[M+m],B=K[M+v],he=Math.pow(B,j.edgeWeightInfluence),ne=k[_+s]-k[I+s],de=k[_+o]-k[I+o],be===!0?(ce=Math.sqrt(ne*ne+de*de)-k[_+f]-k[I+f],j.linLogMode?j.outboundAttractionDistribution?ce>0&&(D=-Y*he*Math.log(1+ce)/ce/k[_+h]):ce>0&&(D=-Y*he*Math.log(1+ce)/ce):j.outboundAttractionDistribution?ce>0&&(D=-Y*he/k[_+h]):ce>0&&(D=-Y*he)):(ce=Math.sqrt(Math.pow(ne,2)+Math.pow(de,2)),j.linLogMode?j.outboundAttractionDistribution?ce>0&&(D=-Y*he*Math.log(1+ce)/ce/k[_+h]):ce>0&&(D=-Y*he*Math.log(1+ce)/ce):j.outboundAttractionDistribution?(ce=1,D=-Y*he/k[_+h]):(ce=1,D=-Y*he)),ce>0&&(k[_+a]+=ne*D,k[_+l]+=de*D,k[I+a]-=ne*D,k[I+l]-=de*D);var we,xe,Fe,Ke,ht,tt;if(be===!0)for(C=0;C<le;C+=W)k[C+g]!==1&&(we=Math.sqrt(Math.pow(k[C+a],2)+Math.pow(k[C+l],2)),we>H&&(k[C+a]=k[C+a]*H/we,k[C+l]=k[C+l]*H/we),xe=k[C+h]*Math.sqrt((k[C+c]-k[C+a])*(k[C+c]-k[C+a])+(k[C+u]-k[C+l])*(k[C+u]-k[C+l])),Fe=Math.sqrt((k[C+c]+k[C+a])*(k[C+c]+k[C+a])+(k[C+u]+k[C+l])*(k[C+u]+k[C+l]))/2,Ke=.1*Math.log(1+Fe)/(1+Math.sqrt(xe)),ht=k[C+s]+k[C+a]*(Ke/j.slowDown),k[C+s]=ht,tt=k[C+o]+k[C+l]*(Ke/j.slowDown),k[C+o]=tt);else for(C=0;C<le;C+=W)k[C+g]!==1&&(xe=k[C+h]*Math.sqrt((k[C+c]-k[C+a])*(k[C+c]-k[C+a])+(k[C+u]-k[C+l])*(k[C+u]-k[C+l])),Fe=Math.sqrt((k[C+c]+k[C+a])*(k[C+c]+k[C+a])+(k[C+u]+k[C+l])*(k[C+u]+k[C+l]))/2,Ke=k[C+d]*Math.log(1+Fe)/(1+Math.sqrt(xe)),k[C+d]=Math.min(1,Math.sqrt(Ke*(Math.pow(k[C+a],2)+Math.pow(k[C+l],2))/(1+Math.sqrt(xe)))),ht=k[C+s]+k[C+a]*(Ke/j.slowDown),k[C+s]=ht,tt=k[C+o]+k[C+l]*(Ke/j.slowDown),k[C+o]=tt);return{}}})();var r=i.exports;self.addEventListener("message",function(s){var o=s.data;e=new Float32Array(o.nodes),o.edges&&(t=new Float32Array(o.edges)),r(o.settings,e,t),self.postMessage({nodes:e.buffer},[e.buffer])})},dh={},$w=10,B5=3;dh.assign=function(n){n=n||{};var e=Array.prototype.slice.call(arguments).slice(1),t,i,r;for(t=0,r=e.length;t<r;t++)if(e[t])for(i in e[t])n[i]=e[t][i];return n};dh.validateSettings=function(n){return"linLogMode"in n&&typeof n.linLogMode!="boolean"?{message:"the `linLogMode` setting should be a boolean."}:"outboundAttractionDistribution"in n&&typeof n.outboundAttractionDistribution!="boolean"?{message:"the `outboundAttractionDistribution` setting should be a boolean."}:"adjustSizes"in n&&typeof n.adjustSizes!="boolean"?{message:"the `adjustSizes` setting should be a boolean."}:"edgeWeightInfluence"in n&&typeof n.edgeWeightInfluence!="number"?{message:"the `edgeWeightInfluence` setting should be a number."}:"scalingRatio"in n&&!(typeof n.scalingRatio=="number"&&n.scalingRatio>=0)?{message:"the `scalingRatio` setting should be a number >= 0."}:"strongGravityMode"in n&&typeof n.strongGravityMode!="boolean"?{message:"the `strongGravityMode` setting should be a boolean."}:"gravity"in n&&!(typeof n.gravity=="number"&&n.gravity>=0)?{message:"the `gravity` setting should be a number >= 0."}:"slowDown"in n&&!(typeof n.slowDown=="number"||n.slowDown>=0)?{message:"the `slowDown` setting should be a number >= 0."}:"barnesHutOptimize"in n&&typeof n.barnesHutOptimize!="boolean"?{message:"the `barnesHutOptimize` setting should be a boolean."}:"barnesHutTheta"in n&&!(typeof n.barnesHutTheta=="number"&&n.barnesHutTheta>=0)?{message:"the `barnesHutTheta` setting should be a number >= 0."}:null};dh.graphToByteArrays=function(n,e){var t=n.order,i=n.size,r={},s,o=new Float32Array(t*$w),a=new Float32Array(i*B5);return s=0,n.forEachNode(function(l,c){r[l]=s,o[s]=c.x,o[s+1]=c.y,o[s+2]=0,o[s+3]=0,o[s+4]=0,o[s+5]=0,o[s+6]=1,o[s+7]=1,o[s+8]=c.size||1,o[s+9]=c.fixed?1:0,s+=$w}),s=0,n.forEachEdge(function(l,c,u,h,d,f,g){var p=r[u],m=r[h],v=e(l,c,u,h,d,f,g);o[p+6]+=v,o[m+6]+=v,a[s]=p,a[s+1]=m,a[s+2]=v,s+=B5}),{nodes:o,edges:a}};dh.assignLayoutChanges=function(n,e,t){var i=0;n.updateEachNodeAttributes(function(r,s){return s.x=e[i],s.y=e[i+1],i+=$w,t?t(r,s):s})};dh.readGraphPositions=function(n,e){var t=0;n.forEachNode(function(i,r){e[t]=r.x,e[t+1]=r.y,t+=$w})};dh.collectLayoutChanges=function(n,e,t){for(var i=n.nodes(),r={},s=0,o=0,a=e.length;s<a;s+=$w){if(t){var l=Object.assign({},n.getNodeAttributes(i[o]));l.x=e[s],l.y=e[s+1],l=t(i[o],l),r[i[o]]={x:l.x,y:l.y}}else r[i[o]]={x:e[s],y:e[s+1]};o++}return r};dh.createWorker=function(e){var t=window.URL||window.webkitURL,i=e.toString(),r=t.createObjectURL(new Blob(["("+i+").call(this);"],{type:"text/javascript"})),s=new Worker(r);return t.revokeObjectURL(r),s};var iUe={linLogMode:!1,outboundAttractionDistribution:!1,adjustSizes:!1,edgeWeightInfluence:1,scalingRatio:1,strongGravityMode:!1,gravity:1,slowDown:1,barnesHutOptimize:!1,barnesHutTheta:.5},rUe=nUe,sUe=FE,oUe=ky.createEdgeWeightGetter,Np=dh,aUe=iUe;function fh(n,e){if(e=e||{},!sUe(n))throw new Error("graphology-layout-forceatlas2/worker: the given graph is not a valid graphology instance.");var t=oUe("getEdgeWeight"in e?e.getEdgeWeight:"weight").fromEntry,i=Np.assign({},aUe,e.settings),r=Np.validateSettings(i);if(r)throw new Error("graphology-layout-forceatlas2/worker: "+r.message);this.worker=null,this.graph=n,this.settings=i,this.getEdgeWeight=t,this.matrices=null,this.running=!1,this.killed=!1,this.outputReducer=typeof e.outputReducer=="function"?e.outputReducer:null,this.handleMessage=this.handleMessage.bind(this);var s=void 0,o=this;this.handleGraphUpdate=function(){o.worker&&o.worker.terminate(),s&&clearTimeout(s),s=setTimeout(function(){s=void 0,o.spawnWorker()},0)},n.on("nodeAdded",this.handleGraphUpdate),n.on("edgeAdded",this.handleGraphUpdate),n.on("nodeDropped",this.handleGraphUpdate),n.on("edgeDropped",this.handleGraphUpdate),this.spawnWorker()}fh.prototype.isRunning=function(){return this.running};fh.prototype.spawnWorker=function(){this.worker&&this.worker.terminate(),this.worker=Np.createWorker(rUe),this.worker.addEventListener("message",this.handleMessage),this.running&&(this.running=!1,this.start())};fh.prototype.handleMessage=function(n){if(this.running){var e=new Float32Array(n.data.nodes);Np.assignLayoutChanges(this.graph,e,this.outputReducer),this.outputReducer&&Np.readGraphPositions(this.graph,e),this.matrices.nodes=e,this.askForIterations()}};fh.prototype.askForIterations=function(n){var e=this.matrices,t={settings:this.settings,nodes:e.nodes.buffer},i=[e.nodes.buffer];return n&&(t.edges=e.edges.buffer,i.push(e.edges.buffer)),this.worker.postMessage(t,i),this};fh.prototype.start=function(){if(this.killed)throw new Error("graphology-layout-forceatlas2/worker.start: layout was killed.");return this.running?this:(this.matrices=Np.graphToByteArrays(this.graph,this.getEdgeWeight),this.running=!0,this.askForIterations(!0),this)};fh.prototype.stop=function(){return this.running=!1,this};fh.prototype.kill=function(){if(this.killed)return this;this.running=!1,this.killed=!0,this.matrices=null,this.worker.terminate(),this.graph.removeListener("nodeAdded",this.handleGraphUpdate),this.graph.removeListener("edgeAdded",this.handleGraphUpdate),this.graph.removeListener("nodeDropped",this.handleGraphUpdate),this.graph.removeListener("edgeDropped",this.handleGraphUpdate)};var lUe=fh;const cUe=_f(lUe);function bO(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=Array(e);t<e;t++)i[t]=n[t];return i}function uUe(n){if(Array.isArray(n))return bO(n)}function hUe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function dUe(n,e){if(n){if(typeof n=="string")return bO(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?bO(n,e):void 0}}function fUe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qH(n){return uUe(n)||hUe(n)||dUe(n)||fUe()}function XH(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function gUe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function RZ(n){var e=gUe(n,"string");return typeof e=="symbol"?e:e+""}function pUe(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,RZ(i.key),i)}}function ZH(n,e,t){return e&&pUe(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function Hp(n){return Hp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Hp(n)}function EZ(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(EZ=function(){return!!n})()}function jo(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function mUe(n,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jo(n)}function xZ(n,e,t){return e=Hp(e),mUe(n,EZ()?Reflect.construct(e,t||[],Hp(n).constructor):e.apply(n,t))}function bUe(n,e){for(;!{}.hasOwnProperty.call(n,e)&&(n=Hp(n))!==null;);return n}function vO(){return vO=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(n,e,t){var i=bUe(n,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?n:t):r.value}},vO.apply(null,arguments)}function V5(n,e,t,i){var r=vO(Hp(n.prototype),e,t);return typeof r=="function"?function(s){return r.apply(t,s)}:r}function wO(n,e){return wO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t},wO(n,e)}function TZ(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&wO(n,e)}function sr(n,e,t){return(e=RZ(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function vUe(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.includes(i))continue;t[i]=n[i]}return t}function wUe(n,e){if(n==null)return{};var t,i,r=vUe(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)t=s[i],e.includes(t)||{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function W5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function ys(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?W5(Object(t),!0).forEach(function(i){sr(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):W5(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function yUe(n){var e=n.texturesCount,t=`
precision highp float;

varying vec4 v_color;
varying vec2 v_diffVector;
varying float v_radius;
varying vec4 v_texture;
varying float v_textureIndex;

uniform sampler2D u_atlas[`.concat(e,`];
uniform float u_correctionRatio;
uniform float u_cameraAngle;
uniform float u_percentagePadding;
uniform bool u_colorizeImages;
uniform bool u_keepWithinCircle;

const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

const float radius = 0.5;

void main(void) {
  float border = 2.0 * u_correctionRatio;
  float dist = length(v_diffVector);
  vec4 color = gl_FragColor;

  float c = cos(-u_cameraAngle);
  float s = sin(-u_cameraAngle);
  vec2 diffVector = mat2(c, s, -s, c) * (v_diffVector);

  // No antialiasing for picking mode:
  #ifdef PICKING_MODE
  border = 0.0;
  color = v_color;

  #else
  // First case: No image to display
  if (v_texture.w <= 0.0) {
    if (!u_colorizeImages) {
      color = v_color;
    }
  }

  // Second case: Image loaded into the texture
  else {
    float paddingRatio = 1.0 + 2.0 * u_percentagePadding;
    float coef = u_keepWithinCircle ? 1.0 : `).concat(Math.SQRT2,`;
    vec2 coordinateInTexture = diffVector * vec2(paddingRatio, -paddingRatio) / v_radius / 2.0 * coef + vec2(0.5, 0.5);
    int index = int(v_textureIndex + 0.5); // +0.5 avoid rounding errors

    bool noTextureFound = false;
    vec4 texel;

    `).concat(qH(new Array(e)).map(function(i,r){return"if (index == ".concat(r,") texel = texture2D(u_atlas[").concat(r,"], (v_texture.xy + coordinateInTexture * v_texture.zw), -1.0);")}).join(`
    else `)+`else {
      texel = texture2D(u_atlas[0], (v_texture.xy + coordinateInTexture * v_texture.zw), -1.0);
      noTextureFound = true;
    }`,`

    if (noTextureFound) {
      color = v_color;
    } else {
      // Colorize all visible image pixels:
      if (u_colorizeImages) {
        color = mix(gl_FragColor, v_color, texel.a);
      }

      // Colorize background pixels, keep image pixel colors:
      else {
        color = vec4(mix(v_color, texel, texel.a).rgb, max(texel.a, v_color.a));
      }

      // Erase pixels "in the padding":
      if (abs(diffVector.x) > v_radius / paddingRatio || abs(diffVector.y) > v_radius / paddingRatio) {
        color = u_colorizeImages ? gl_FragColor : v_color;
      }
    }
  }
  #endif

  // Crop in a circle when u_keepWithinCircle is truthy:
  if (u_keepWithinCircle) {
    if (dist < v_radius - border) {
      gl_FragColor = color;
    } else if (dist < v_radius) {
      gl_FragColor = mix(transparent, color, (v_radius - dist) / border);
    }
  }

  // Crop in a square else:
  else {
    float squareHalfSize = v_radius * `).concat(Math.SQRT1_2*Math.cos(Math.PI/12),`;
    if (abs(diffVector.x) > squareHalfSize || abs(diffVector.y) > squareHalfSize) {
      gl_FragColor = transparent;
    } else {
      gl_FragColor = color;
    }
  }
}
`);return t}var CUe=`
attribute vec4 a_id;
attribute vec4 a_color;
attribute vec2 a_position;
attribute float a_size;
attribute float a_angle;
attribute vec4 a_texture;
attribute float a_textureIndex;

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_correctionRatio;

varying vec4 v_color;
varying vec2 v_diffVector;
varying float v_radius;
varying vec4 v_texture;
varying float v_textureIndex;

const float bias = 255.0 / 254.0;
const float marginRatio = 1.05;

void main() {
  float size = a_size * u_correctionRatio / u_sizeRatio * 4.0;
  vec2 diffVector = size * vec2(cos(a_angle), sin(a_angle));
  vec2 position = a_position + diffVector * marginRatio;
  gl_Position = vec4(
    (u_matrix * vec3(position, 1)).xy,
    0,
    1
  );

  v_diffVector = diffVector;
  v_radius = size / 2.0 / marginRatio;

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;

  // Pass the texture coordinates:
  v_textureIndex = a_textureIndex;
  v_texture = a_texture;
  #endif

  v_color.a *= bias;
}
`,SUe=CUe;function mf(){mf=function(){return e};var n,e={},t=Object.prototype,i=t.hasOwnProperty,r=Object.defineProperty||function(N,j,k){N[j]=k.value},s=typeof Symbol=="function"?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function c(N,j,k){return Object.defineProperty(N,j,{value:k,enumerable:!0,configurable:!0,writable:!0}),N[j]}try{c({},"")}catch{c=function(j,k,K){return j[k]=K}}function u(N,j,k,K){var ie=j&&j.prototype instanceof v?j:v,b=Object.create(ie.prototype),C=new V(K||[]);return r(b,"_invoke",{value:A(N,k,C)}),b}function h(N,j,k){try{return{type:"normal",arg:N.call(j,k)}}catch(K){return{type:"throw",arg:K}}}e.wrap=u;var d="suspendedStart",f="suspendedYield",g="executing",p="completed",m={};function v(){}function y(){}function w(){}var R={};c(R,o,function(){return this});var x=Object.getPrototypeOf,S=x&&x(x(H([])));S&&S!==t&&i.call(S,o)&&(R=S);var T=w.prototype=v.prototype=Object.create(R);function P(N){["next","throw","return"].forEach(function(j){c(N,j,function(k){return this._invoke(j,k)})})}function E(N,j){function k(ie,b,C,_){var I=h(N[ie],N,b);if(I.type!=="throw"){var $=I.arg,M=$.value;return M&&typeof M=="object"&&i.call(M,"__await")?j.resolve(M.__await).then(function(B){k("next",B,C,_)},function(B){k("throw",B,C,_)}):j.resolve(M).then(function(B){$.value=B,C($)},function(B){return k("throw",B,C,_)})}_(I.arg)}var K;r(this,"_invoke",{value:function(ie,b){function C(){return new j(function(_,I){k(ie,b,_,I)})}return K=K?K.then(C,C):C()}})}function A(N,j,k){var K=d;return function(ie,b){if(K===g)throw Error("Generator is already running");if(K===p){if(ie==="throw")throw b;return{value:n,done:!0}}for(k.method=ie,k.arg=b;;){var C=k.delegate;if(C){var _=L(C,k);if(_){if(_===m)continue;return _}}if(k.method==="next")k.sent=k._sent=k.arg;else if(k.method==="throw"){if(K===d)throw K=p,k.arg;k.dispatchException(k.arg)}else k.method==="return"&&k.abrupt("return",k.arg);K=g;var I=h(N,j,k);if(I.type==="normal"){if(K=k.done?p:f,I.arg===m)continue;return{value:I.arg,done:k.done}}I.type==="throw"&&(K=p,k.method="throw",k.arg=I.arg)}}}function L(N,j){var k=j.method,K=N.iterator[k];if(K===n)return j.delegate=null,k==="throw"&&N.iterator.return&&(j.method="return",j.arg=n,L(N,j),j.method==="throw")||k!=="return"&&(j.method="throw",j.arg=new TypeError("The iterator does not provide a '"+k+"' method")),m;var ie=h(K,N.iterator,j.arg);if(ie.type==="throw")return j.method="throw",j.arg=ie.arg,j.delegate=null,m;var b=ie.arg;return b?b.done?(j[N.resultName]=b.value,j.next=N.nextLoc,j.method!=="return"&&(j.method="next",j.arg=n),j.delegate=null,m):b:(j.method="throw",j.arg=new TypeError("iterator result is not an object"),j.delegate=null,m)}function W(N){var j={tryLoc:N[0]};1 in N&&(j.catchLoc=N[1]),2 in N&&(j.finallyLoc=N[2],j.afterLoc=N[3]),this.tryEntries.push(j)}function F(N){var j=N.completion||{};j.type="normal",delete j.arg,N.completion=j}function V(N){this.tryEntries=[{tryLoc:"root"}],N.forEach(W,this),this.reset(!0)}function H(N){if(N||N===""){var j=N[o];if(j)return j.call(N);if(typeof N.next=="function")return N;if(!isNaN(N.length)){var k=-1,K=function ie(){for(;++k<N.length;)if(i.call(N,k))return ie.value=N[k],ie.done=!1,ie;return ie.value=n,ie.done=!0,ie};return K.next=K}}throw new TypeError(typeof N+" is not iterable")}return y.prototype=w,r(T,"constructor",{value:w,configurable:!0}),r(w,"constructor",{value:y,configurable:!0}),y.displayName=c(w,l,"GeneratorFunction"),e.isGeneratorFunction=function(N){var j=typeof N=="function"&&N.constructor;return!!j&&(j===y||(j.displayName||j.name)==="GeneratorFunction")},e.mark=function(N){return Object.setPrototypeOf?Object.setPrototypeOf(N,w):(N.__proto__=w,c(N,l,"GeneratorFunction")),N.prototype=Object.create(T),N},e.awrap=function(N){return{__await:N}},P(E.prototype),c(E.prototype,a,function(){return this}),e.AsyncIterator=E,e.async=function(N,j,k,K,ie){ie===void 0&&(ie=Promise);var b=new E(u(N,j,k,K),ie);return e.isGeneratorFunction(j)?b:b.next().then(function(C){return C.done?C.value:b.next()})},P(T),c(T,l,"Generator"),c(T,o,function(){return this}),c(T,"toString",function(){return"[object Generator]"}),e.keys=function(N){var j=Object(N),k=[];for(var K in j)k.push(K);return k.reverse(),function ie(){for(;k.length;){var b=k.pop();if(b in j)return ie.value=b,ie.done=!1,ie}return ie.done=!0,ie}},e.values=H,V.prototype={constructor:V,reset:function(N){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(F),!N)for(var j in this)j.charAt(0)==="t"&&i.call(this,j)&&!isNaN(+j.slice(1))&&(this[j]=n)},stop:function(){this.done=!0;var N=this.tryEntries[0].completion;if(N.type==="throw")throw N.arg;return this.rval},dispatchException:function(N){if(this.done)throw N;var j=this;function k(I,$){return b.type="throw",b.arg=N,j.next=I,$&&(j.method="next",j.arg=n),!!$}for(var K=this.tryEntries.length-1;K>=0;--K){var ie=this.tryEntries[K],b=ie.completion;if(ie.tryLoc==="root")return k("end");if(ie.tryLoc<=this.prev){var C=i.call(ie,"catchLoc"),_=i.call(ie,"finallyLoc");if(C&&_){if(this.prev<ie.catchLoc)return k(ie.catchLoc,!0);if(this.prev<ie.finallyLoc)return k(ie.finallyLoc)}else if(C){if(this.prev<ie.catchLoc)return k(ie.catchLoc,!0)}else{if(!_)throw Error("try statement without catch or finally");if(this.prev<ie.finallyLoc)return k(ie.finallyLoc)}}}},abrupt:function(N,j){for(var k=this.tryEntries.length-1;k>=0;--k){var K=this.tryEntries[k];if(K.tryLoc<=this.prev&&i.call(K,"finallyLoc")&&this.prev<K.finallyLoc){var ie=K;break}}ie&&(N==="break"||N==="continue")&&ie.tryLoc<=j&&j<=ie.finallyLoc&&(ie=null);var b=ie?ie.completion:{};return b.type=N,b.arg=j,ie?(this.method="next",this.next=ie.finallyLoc,m):this.complete(b)},complete:function(N,j){if(N.type==="throw")throw N.arg;return N.type==="break"||N.type==="continue"?this.next=N.arg:N.type==="return"?(this.rval=this.arg=N.arg,this.method="return",this.next="end"):N.type==="normal"&&j&&(this.next=j),m},finish:function(N){for(var j=this.tryEntries.length-1;j>=0;--j){var k=this.tryEntries[j];if(k.finallyLoc===N)return this.complete(k.completion,k.afterLoc),F(k),m}},catch:function(N){for(var j=this.tryEntries.length-1;j>=0;--j){var k=this.tryEntries[j];if(k.tryLoc===N){var K=k.completion;if(K.type==="throw"){var ie=K.arg;F(k)}return ie}}throw Error("illegal catch attempt")},delegateYield:function(N,j,k){return this.delegate={iterator:H(N),resultName:j,nextLoc:k},this.method==="next"&&(this.arg=n),m}},e}function j5(n,e,t,i,r,s,o){try{var a=n[s](o),l=a.value}catch(c){return void t(c)}a.done?e(l):Promise.resolve(l).then(i,r)}function QH(n){return function(){var e=this,t=arguments;return new Promise(function(i,r){var s=n.apply(e,t);function o(l){j5(s,i,r,o,a,"next",l)}function a(l){j5(s,i,r,o,a,"throw",l)}o(void 0)})}}var JH={size:{mode:"max",value:512},objectFit:"cover",correctCentering:!1,maxTextureSize:4096,debounceTimeout:500,crossOrigin:"anonymous"},_Ue=1;function yO(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.crossOrigin;return new Promise(function(i,r){var s=new Image;s.addEventListener("load",function(){i(s)},{once:!0}),s.addEventListener("error",function(o){r(o.error)},{once:!0}),t&&s.setAttribute("crossOrigin",t),s.src=n})}function RUe(n){return CO.apply(this,arguments)}function CO(){return CO=QH(mf().mark(function n(e){var t,i,r,s,o,a,l,c,u,h,d,f,g,p=arguments;return mf().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(t=p.length>1&&p[1]!==void 0?p[1]:{},i=t.size,r=t.crossOrigin,r!=="use-credentials"){v.next=7;break}return v.next=4,fetch(e,{credentials:"include"});case 4:s=v.sent,v.next=10;break;case 7:return v.next=9,fetch(e);case 9:s=v.sent;case 10:return v.next=12,s.text();case 12:if(o=v.sent,a=new DOMParser().parseFromString(o,"image/svg+xml"),l=a.documentElement,c=l.getAttribute("width"),u=l.getAttribute("height"),!(!c||!u)){v.next=19;break}throw new Error("loadSVGImage: cannot use `size` if target SVG has no definite dimensions.");case 19:return typeof i=="number"&&(l.setAttribute("width",""+i),l.setAttribute("height",""+i)),h=new XMLSerializer().serializeToString(a),d=new Blob([h],{type:"image/svg+xml"}),f=URL.createObjectURL(d),g=yO(f),g.finally(function(){return URL.revokeObjectURL(f)}),v.abrupt("return",g);case 26:case"end":return v.stop()}},n)})),CO.apply(this,arguments)}function EUe(n){return SO.apply(this,arguments)}function SO(){return SO=QH(mf().mark(function n(e){var t,i,r,s,o,a,l=arguments;return mf().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(i=l.length>1&&l[1]!==void 0?l[1]:{},r=i.size,s=i.crossOrigin,o=((t=e.split(/[#?]/)[0].split(".").pop())===null||t===void 0?void 0:t.trim().toLowerCase())==="svg",!(o&&r)){u.next=16;break}return u.prev=3,u.next=6,RUe(e,{size:r,crossOrigin:s});case 6:a=u.sent,u.next=14;break;case 9:return u.prev=9,u.t0=u.catch(3),u.next=13,yO(e,{crossOrigin:s});case 13:a=u.sent;case 14:u.next=19;break;case 16:return u.next=18,yO(e,{crossOrigin:s});case 18:a=u.sent;case 19:return u.abrupt("return",a);case 20:case"end":return u.stop()}},n,null,[[3,9]])})),SO.apply(this,arguments)}function xUe(n,e,t){var i=t.objectFit,r=t.size,s=t.correctCentering,o=i==="contain"?Math.max(n.width,n.height):Math.min(n.width,n.height),a=r.mode==="auto"?o:r.mode==="force"?r.value:Math.min(r.value,o),l=(n.width-o)/2,c=(n.height-o)/2;if(s){var u=e.getCorrectionOffset(n,o);l=u.x,c=u.y}return{sourceX:l,sourceY:c,sourceSize:o,destinationSize:a}}function TUe(n,e,t){for(var i=e.canvas,r=i.width,s=i.height,o=[],a=t.x,l=t.y,c=t.rowHeight,u=t.maxRowWidth,h={},d=0,f=n.length;d<f;d++){var g=n[d],p=g.key,m=g.image,v=g.sourceSize,y=g.sourceX,w=g.sourceY,R=g.destinationSize,x=R+_Ue;l+x>s||a+x>r&&l+x+c>s||(a+x>r&&(u=Math.max(u,a),a=0,l+=c,c=x),o.push({key:p,image:m,sourceX:y,sourceY:w,sourceSize:v,destinationX:a,destinationY:l,destinationSize:R}),h[p]={x:a,y:l,size:R},a+=x,c=Math.max(c,x))}u=Math.max(u,a);for(var S=u,T=l+c,P=0,E=o.length;P<E;P++){var A=o[P],L=A.image,W=A.sourceSize,F=A.sourceX,V=A.sourceY,H=A.destinationSize,N=A.destinationX,j=A.destinationY;e.drawImage(L,F,V,W,W,N,j,H,H)}return{atlas:h,texture:e.getImageData(0,0,S,T),cursor:{x:a,y:l,rowHeight:c,maxRowWidth:u}}}function MUe(n,e,t){var i=n.atlas,r=n.textures,s=n.cursor,o={atlas:ys({},i),textures:qH(r.slice(0,-1)),cursor:ys({},s)},a=[];for(var l in e){var c,u=e[l];if(u.status==="ready"){var h=(c=i[l])===null||c===void 0?void 0:c.textureIndex;typeof h!="number"&&a.push(ys({key:l},u))}}for(var d=function(){var g=TUe(a,t,o.cursor),p=g.atlas,m=g.texture,v=g.cursor;o.cursor=v;var y=[];a.forEach(function(w){p[w.key]?o.atlas[w.key]=ys(ys({},p[w.key]),{},{textureIndex:o.textures.length}):y.push(w)}),o.textures.push(m),a=y,a.length&&(o.cursor={x:0,y:0,rowHeight:0,maxRowWidth:0},t.clearRect(0,0,t.canvas.width,t.canvas.height))};a.length;)d();return o}var AUe=function(){function n(){XH(this,n),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d",{willReadFrequently:!0})}return ZH(n,[{key:"getCorrectionOffset",value:function(t,i){this.canvas.width=i,this.canvas.height=i,this.context.clearRect(0,0,i,i),this.context.drawImage(t,0,0,i,i);for(var r=this.context.getImageData(0,0,i,i).data,s=new Uint8ClampedArray(r.length/4),o=0;o<r.length;o++)s[o]=r[o*4+3];for(var a=0,l=0,c=0,u=0;u<i;u++)for(var h=0;h<i;h++){var d=s[u*i+h];c+=d,a+=d*h,l+=d*u}var f=a/c,g=l/c;return{x:f-i/2,y:g-i/2}}}]),n}(),QS=function(n){TZ(e,n);function e(){var t,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return XH(this,e),t=xZ(this,e),sr(jo(t),"canvas",document.createElement("canvas")),sr(jo(t),"ctx",t.canvas.getContext("2d",{willReadFrequently:!0})),sr(jo(t),"corrector",new AUe),sr(jo(t),"imageStates",{}),sr(jo(t),"textures",[t.ctx.getImageData(0,0,1,1)]),sr(jo(t),"lastTextureCursor",{x:0,y:0,rowHeight:0,maxRowWidth:0}),sr(jo(t),"atlas",{}),t.options=ys(ys({},JH),i),t.canvas.width=t.options.maxTextureSize,t.canvas.height=t.options.maxTextureSize,t}return ZH(e,[{key:"scheduleGenerateTexture",value:function(){var i=this;typeof this.frameId!="number"&&(typeof this.options.debounceTimeout=="number"?this.frameId=window.setTimeout(function(){i.generateTextures(),i.frameId=void 0},this.options.debounceTimeout):this.generateTextures())}},{key:"generateTextures",value:function(){var i=MUe({atlas:this.atlas,textures:this.textures,cursor:this.lastTextureCursor},this.imageStates,this.ctx),r=i.atlas,s=i.textures,o=i.cursor;this.atlas=r,this.textures=s,this.lastTextureCursor=o,this.emit(e.NEW_TEXTURE_EVENT,{atlas:r,textures:s})}},{key:"registerImage",value:function(){var t=QH(mf().mark(function r(s){var o,a;return mf().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!this.imageStates[s]){c.next=2;break}return c.abrupt("return");case 2:return this.imageStates[s]={status:"loading"},c.prev=3,o=this.options.size,c.next=7,EUe(s,{size:o.mode==="force"?o.value:void 0,crossOrigin:this.options.crossOrigin||void 0});case 7:a=c.sent,this.imageStates[s]=ys({status:"ready",image:a},xUe(a,this.corrector,this.options)),this.scheduleGenerateTexture(),c.next=15;break;case 12:c.prev=12,c.t0=c.catch(3),this.imageStates[s]={status:"error"};case 15:case"end":return c.stop()}},r,this,[[3,12]])}));function i(r){return t.apply(this,arguments)}return i}()},{key:"getAtlas",value:function(){return this.atlas}},{key:"getTextures",value:function(){return this.textures}}]),e}($H.EventEmitter);sr(QS,"NEW_TEXTURE_EVENT","newTexture");var PUe=["drawHover","drawLabel","drawingMode","keepWithinCircle","padding","colorAttribute","imageAttribute"],MZ=WebGLRenderingContext,z5=MZ.UNSIGNED_BYTE,Nb=MZ.FLOAT,IUe=ys(ys({},JH),{},{drawingMode:"background",keepWithinCircle:!0,drawLabel:void 0,drawHover:void 0,padding:0,colorAttribute:"color",imageAttribute:"image"}),OUe=["u_sizeRatio","u_correctionRatio","u_cameraAngle","u_percentagePadding","u_matrix","u_colorizeImages","u_keepWithinCircle","u_atlas"];function GR(n){var e,t=document.createElement("canvas").getContext("webgl"),i=Math.min(t.getParameter(t.MAX_TEXTURE_SIZE),JH.maxTextureSize);t.canvas.remove();var r=ys(ys(ys({},IUe),{maxTextureSize:i}),n||{}),s=r.drawHover,o=r.drawLabel,a=r.drawingMode,l=r.keepWithinCircle,c=r.padding,u=r.colorAttribute,h=r.imageAttribute,d=wUe(r,PUe),f=new QS(d);return e=function(g){TZ(p,g);function p(m,v,y){var w;return XH(this,p),w=xZ(this,p,[m,v,y]),sr(jo(w),"drawLabel",o),sr(jo(w),"drawHover",s),sr(jo(w),"textureManagerCallback",null),w.textureManagerCallback=function(R){var x=R.atlas,S=R.textures,T=S.length!==w.textures.length;w.atlas=x,w.textureImages=S,T&&w.upgradeShaders(),w.bindTextures(),w.latestRenderParams&&w.render(w.latestRenderParams),w.renderer&&w.renderer.refresh&&w.renderer.refresh()},f.on(QS.NEW_TEXTURE_EVENT,w.textureManagerCallback),w.atlas=f.getAtlas(),w.textureImages=f.getTextures(),w.textures=w.textureImages.map(function(){return m.createTexture()}),w.bindTextures(),w}return ZH(p,[{key:"getDefinition",value:function(){return{VERTICES:3,VERTEX_SHADER_SOURCE:SUe,FRAGMENT_SHADER_SOURCE:yUe({texturesCount:f.getTextures().length}),METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:OUe,ATTRIBUTES:[{name:"a_position",size:2,type:Nb},{name:"a_size",size:1,type:Nb},{name:"a_color",size:4,type:z5,normalized:!0},{name:"a_id",size:4,type:z5,normalized:!0},{name:"a_texture",size:4,type:Nb},{name:"a_textureIndex",size:1,type:Nb}],CONSTANT_ATTRIBUTES:[{name:"a_angle",size:1,type:Nb}],CONSTANT_DATA:[[p.ANGLE_1],[p.ANGLE_2],[p.ANGLE_3]]}}},{key:"upgradeShaders",value:function(){var v=this.getDefinition(),y=this.normalProgram,w=y.program,R=y.buffer,x=y.vertexShader,S=y.fragmentShader,T=y.gl;T.deleteProgram(w),T.deleteBuffer(R),T.deleteShader(x),T.deleteShader(S),this.normalProgram=this.getProgramInfo("normal",T,v.VERTEX_SHADER_SOURCE,v.FRAGMENT_SHADER_SOURCE,null)}},{key:"kill",value:function(){var v,y=(v=this.normalProgram)===null||v===void 0?void 0:v.gl;if(y)for(var w=0;w<this.textures.length;w++)y.deleteTexture(this.textures[w]);this.textureManagerCallback&&(f.off(QS.NEW_TEXTURE_EVENT,this.textureManagerCallback),this.textureManagerCallback=null),V5(p,"kill",this)([])}},{key:"bindTextures",value:function(){for(var v=this.normalProgram.gl,y=0;y<this.textureImages.length;y++){if(y>=this.textures.length){var w=v.createTexture();w&&this.textures.push(w)}v.activeTexture(v.TEXTURE0+y),v.bindTexture(v.TEXTURE_2D,this.textures[y]),v.texImage2D(v.TEXTURE_2D,0,v.RGBA,v.RGBA,v.UNSIGNED_BYTE,this.textureImages[y]),v.generateMipmap(v.TEXTURE_2D)}}},{key:"renderProgram",value:function(v,y){if(!y.isPicking)for(var w=y.gl,R=0;R<this.textureImages.length;R++)w.activeTexture(w.TEXTURE0+R),w.bindTexture(w.TEXTURE_2D,this.textures[R]);V5(p,"renderProgram",this)([v,y])}},{key:"processVisibleItem",value:function(v,y,w){var R=this.array,x=dm(w[u]),S=w[h],T=S?this.atlas[S]:void 0;if(typeof S=="string"&&!T&&f.registerImage(S),R[y++]=w.x,R[y++]=w.y,R[y++]=w.size,R[y++]=x,R[y++]=v,T&&typeof T.textureIndex=="number"){var P=this.textureImages[T.textureIndex],E=P.width,A=P.height;R[y++]=T.x/E,R[y++]=T.y/A,R[y++]=T.size/E,R[y++]=T.size/A,R[y++]=T.textureIndex}else R[y++]=0,R[y++]=0,R[y++]=0,R[y++]=0,R[y++]=0}},{key:"setUniforms",value:function(v,y){var w=y.gl,R=y.uniformLocations,x=R.u_sizeRatio,S=R.u_correctionRatio,T=R.u_matrix,P=R.u_atlas,E=R.u_colorizeImages,A=R.u_keepWithinCircle,L=R.u_cameraAngle,W=R.u_percentagePadding;this.latestRenderParams=v,w.uniform1f(S,v.correctionRatio),w.uniform1f(x,l?v.sizeRatio:v.sizeRatio/Math.SQRT2),w.uniform1f(L,v.cameraAngle),w.uniform1f(W,c),w.uniformMatrix3fv(T,!1,v.matrix),w.uniform1iv(P,qH(new Array(this.textureImages.length)).map(function(F,V){return V})),w.uniform1i(E,a==="color"?1:0),w.uniform1i(A,l?1:0)}}]),p}(uZ),sr(e,"ANGLE_1",0),sr(e,"ANGLE_2",2*Math.PI/3),sr(e,"ANGLE_3",4*Math.PI/3),sr(e,"textureManager",f),e}GR();GR({keepWithinCircle:!1,size:{mode:"force",value:256},drawingMode:"color",correctCentering:!0});const U5="#000000";class kUe{constructor(){this.typeColorMap={},this.currentIndex=0}getDynamicColor(e){console.log("getdynamiccolor",e);const t=137.508,i=(e*t+220)%360,r=100,s=(e+50)*t%30+40;return this.hslToRgb(i,r,s)}getColor(e){if(this.typeColorMap.hasOwnProperty(e))return this.typeColorMap[e];{const t=this.getDynamicColor(this.currentIndex);return this.typeColorMap[e]=t,this.currentIndex++,t}}hslToRgb(e,t,i){t/=100,i/=100;const r=(1-Math.abs(2*i-1))*t,s=r*(1-Math.abs(e/60%2-1)),o=i-r/2;let a,l,c;e>=0&&e<60?(a=r,l=s,c=0):e>=60&&e<120?(a=s,l=r,c=0):e>=120&&e<180?(a=0,l=r,c=s):e>=180&&e<240?(a=0,l=s,c=r):e>=240&&e<300?(a=s,l=0,c=r):(a=r,l=0,c=s);const u=Math.round((a+o)*255),h=Math.round((l+o)*255),d=Math.round((c+o)*255),f=g=>{const p=g.toString(16);return p.length===1?"0"+p:p};return`#${f(u)}${f(h)}${f(d)}`.toUpperCase()}hslStringToHex(e){const i=/hsl\(\s*(\d+),\s*(\d+)%,\s*(\d+)%\s*\)/i.exec(e);if(!i)throw new Error("Invalid HSL string format. Expected format: 'hsl(h, s%, l%)'");const r=parseInt(i[1],10),s=parseInt(i[2],10),o=parseInt(i[3],10);return this.hslToRgb(r,s,o)}getRelationshipColor(e){const t=parseFloat(e);if(isNaN(t)||t<-1||t>1)return"#808080";let i,r,s;if(t<0){const o=Math.abs(t);i=200-200*o,r=100-100*o,s=80-30*o}else if(t>0){const o=t;i=0,r=0+100*o,s=50+30*o}else return"#808080";return this.hslToRgb(i,r,s)}}function DUe(n,e,t,i,r,s){n.beginPath(),n.moveTo(e+s,t),n.lineTo(e+i-s,t),n.quadraticCurveTo(e+i,t,e+i,t+s),n.lineTo(e+i,t+r-s),n.quadraticCurveTo(e+i,t+r,e+i-s,t+r),n.lineTo(e+s,t+r),n.quadraticCurveTo(e,t+r,e,t+r-s),n.lineTo(e,t+s),n.quadraticCurveTo(e,t,e+s,t),n.closePath()}function cS(n,e){const t=parseFloat(n);return!isNaN(t)&&t>=-1&&t<=1?Math.abs(t)*e:e}var AZ;let PZ,IZ,OZ,kZ,DZ,LZ,NZ;function LUe(n,e,t,i,r,s){var o,a,l,c,u,h,d,f=Symbol.metadata||Symbol.for("Symbol.metadata"),g=Object.defineProperty,p=Object.create,m=[p(null),p(null)],v=e.length;function y(S,T,P){return function(E,A){T&&(A=E,E=n);for(var L=0;L<S.length;L++)A=S[L].apply(E,P?[A]:[]);return P?A:E}}function w(S,T,P,E){if(typeof S!="function"&&(E||S!==void 0))throw new TypeError(T+" must "+(P||"be")+" a function"+(E?"":" or undefined"));return S}function R(S,T,P,E,A,L,W,F,V,H,N){function j(Y){if(!N(Y))throw new TypeError("Attempted to access private element on non-instance")}var k=[].concat(T[0]),K=T[3],ie=!W,b=A===1,C=A===3,_=A===4,I=A===2;function $(Y,ne,de){return function(he,ce){return ne&&(ce=he,he=S),de&&de(he),M[Y].call(he,ce)}}if(!ie){var M={},B=[],z=C?"get":_||b?"set":"value";if(V?(H||b?M={get:G5(function(){return K(this)},E,"get"),set:function(Y){T[4](this,Y)}}:M[z]=K,H||G5(M[z],E,I?"":z)):H||(M=Object.getOwnPropertyDescriptor(S,E)),!H&&!V){if((a=m[+F][E])&&(a^A)!=7)throw Error("Decorating two elements with the same name ("+M[z].name+") is not supported yet");m[+F][E]=A<3?1:A}}for(var U=S,le=k.length-1;le>=0;le-=P?2:1){var ue=w(k[le],"A decorator","be",!0),be=P?k[le-1]:void 0,fe={},Z={kind:["field","accessor","method","getter","setter","class"][A],name:E,metadata:o,addInitializer:(function(Y,ne){if(Y.v)throw new TypeError("attempted to call addInitializer after decoration was finished");w(ne,"An initializer","be",!0),L.push(ne)}).bind(null,fe)};if(ie)a=ue.call(be,U,Z),fe.v=1,w(a,"class decorators","return")&&(U=a);else if(Z.static=F,Z.private=V,a=Z.access={has:V?N.bind():function(Y){return E in Y}},_||(a.get=V?I?function(Y){return j(Y),M.value}:$("get",0,j):function(Y){return Y[E]}),I||C||(a.set=V?$("set",0,j):function(Y,ne){Y[E]=ne}),U=ue.call(be,b?{get:M.get,set:M.set}:M[z],Z),fe.v=1,b){if(typeof U=="object"&&U)(a=w(U.get,"accessor.get"))&&(M.get=a),(a=w(U.set,"accessor.set"))&&(M.set=a),(a=w(U.init,"accessor.init"))&&B.unshift(a);else if(U!==void 0)throw new TypeError("accessor decorators must return an object with get, set, or init properties or undefined")}else w(U,(H?"field":"method")+" decorators","return")&&(H?B.unshift(U):M[z]=U)}return A<2&&W.push(y(B,F,1),y(L,F,0)),H||ie||(V?b?W.splice(-1,0,$("get",F),$("set",F)):W.push(I?M[z]:w.call.bind(M[z])):g(S,E,M)),U}function x(S){return g(S,f,{configurable:!0,enumerable:!0,value:o})}return o=p(o??null),u=[],h=function(S){S&&u.push(y(S))},d=function(S,T){for(var P=0;P<t.length;P++){var E=t[P],A=E[1],L=7&A;if((8&A)==S&&!L==T){var W=E[2],F=!!E[3],V=16&A;R(S?n:n.prototype,E,V,F?"#"+W:NUe(W),L,L<2?[]:S?c=c||[]:l=l||[],u,!!S,F,T,S&&F?function(H){return $Ue(H)===n}:r)}}},d(8,0),d(0,0),d(8,1),d(0,1),h(l),h(c),a=u,v||x(n),{e:a,get c(){var S=[];return v&&[x(n=R(n,[e],i,n.name,5,S)),y(S,1)]}}}function NUe(n){var e=HUe(n,"string");return typeof e=="symbol"?e:e+""}function HUe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function G5(n,e,t){typeof e=="symbol"&&(e=(e=e.description)?"["+e+"]":"");try{Object.defineProperty(n,"name",{configurable:!0,value:t?t+" "+e:e})}catch{}return n}function $Ue(n){if(Object(n)!==n)throw TypeError("right-hand side of 'in' should be an object, got "+(n!==null?typeof n:"null"));return n}let HZ;class FUe{constructor(){this.ea=ve(Ww),this.container=void 0,this.searchinput=void 0,this.animationstarted=!0,this.tabid=IZ(this),this.datachannel=(OZ(this),kZ(this)),this.searchValue=(DZ(this),LZ(this)),this.state=(NZ(this),{searchQuery:""})}searchValueChanged(e,t){console.log("searchValue changed",e,t),this.setSearchQuery(e)}attached(){this.typeColorMap=new kUe,console.log("colormap,",this.typeColorMap),this.ea.subscribe("loadnodesedges",e=>this.transformNodesEdgesToGraph(e.nodes,e.edges)),this.ea.subscribe("showtab",e=>{this.tabid===this.showtabid&&(this.layout?this.startAnimate():(console.warn("empty layout"),this.renderer=new $5(this.graph,this.container,{nodeProgramClasses:{image:GR()},renderEdgeLabels:!0,allowInvalidContainer:!0,edgeLabelSize:12,labelSize:12}),this.startAnimate()))}),this.datachannel?this.ea.subscribe(this.datachannel,e=>{console.log("network received data:",e),Array.isArray(e)?this.transformDataToGraph(e):(this.layout&&this.stopAnimate(),e.type=="changeNode"?(console.log("network changeNode"),this.renameNode(e.old,e.value)):e.type=="changeType"?(console.log("network changeType"),this.changeNodeType(e.node,e.value)):e.type=="changeEdge"?(console.log("network changeEdge"),this.updateEdge(e.subject,e.object,e.value)):console.warn("not recognized change",e),this.layout&&this.startAnimate())}):console.warn("datachannel empty"),this.transformNodesEdgesToGraph([],[]),this.setNearestEdgeHover()}setSearchQuery(e){if(this.state.searchQuery=e,this.searchValue!==e&&(this.searchValue=e),e){const t=e.toLowerCase(),i=this.graph.nodes().map(r=>({id:r,label:this.graph.getNodeAttribute(r,"label")})).filter(({label:r})=>r.toLowerCase().includes(t));if(i.length===1&&i[0].label===e){this.state.selectedNode=i[0].id,this.state.suggestions=void 0;const r=this.renderer.getNodeDisplayData(state.selectedNode);this.renderer.getCamera().animate(r,{duration:500})}else this.state.selectedNode=void 0,this.state.suggestions=new Set(i.map(({id:r})=>r))}else this.state.selectedNode=void 0,this.state.suggestions=void 0;this.renderer.refresh({skipIndexation:!0})}setHoveredNode(e){e&&(this.state.hoveredNode=e,this.state.hoveredNeighbors=new Set(this.graph.neighbors(e))),e||(this.state.hoveredNode=void 0,this.state.hoveredNeighbors=void 0),this.renderer.refresh({skipIndexation:!0})}setHoveredEdge(e){e&&(this.state.hoveredEdge=e,this.state.hoveredNeighbors=new Set([this.graph.source(e),this.graph.target(e)])),e||(this.state.hoveredEdge=void 0,this.state.hoveredNeighbors=void 0),this.renderer.refresh({skipIndexation:!0})}changeNodeType(e,t){const i=this.typeColorMap.getColor(t);if(console.log("changeNodeType",e),console.log("changeNodeType",t),!this.graph.hasNode(e)){console.log(`Node "${e}" does not exist. Creating.`);const r=this.graph.order*2*Math.PI/this.graph.order;this.graph.addNode(e,{label:e,size:15,color:i,x:100*Math.cos(r),y:100*Math.sin(r)})}this.graph.setNodeAttribute(e,"color",i),this.graph.setNodeAttribute(e,"subjectType",t)}renameNode(e,t){if(!e){console.log("oldname is null create Node"),this.changeNodeType(t,"default");return}if(!this.graph.hasNode(e)){console.error(`Node "${e}" does not exist.`);return}if(this.graph.hasNode(t)){console.error(`Node "${t}" already exists.`);return}const i=this.graph.getNodeAttributes(e);i.label=t,this.graph.addNode(t,i),this.graph.forEachEdge(e,(r,s,o,a)=>{const l=o===e?a:o;this.graph.addEdge(t,l,s)}),this.graph.dropNode(e)}updateEdge(e,t,i){if(!i||i==0){this.graph.hasEdge(e,t)&&this.graph.dropEdge(e,t),console.log(`Edge between "${e}" and "${t}" has been removed.`);return}this.graph.hasEdge(e,t)?(this.graph.setEdgeAttribute(e,t,"label",i),this.graph.setEdgeAttribute(e,t,"size",1+cS(i,5)),console.log(`Edge between "${e}" and "${t}" updated with label: "${i}".`)):i!==""&&i!==0?(this.graph.addEdge(e,t,{relationship:"related",type:"line",label:i,size:1+cS(i,5)}),console.log(`Edge between "${e}" and "${t}" has been added with label: "${i}".`)):console.warn(`Edge between "${e}" and "${t}" does not exist and no action was taken.`)}showEdgeLabel(e){const i=document.getElementsByClassName("sigma-hovers")[0].getContext("2d"),r=this.graph.getEdgeAttributes(e),s=this.renderer.getSettings(),o=this.renderer.getSetting("defaultDrawEdgeHover");typeof o=="function"&&o(i,r,e,s)}showgraph(){console.log("showgraph()"),this.renderer=new $5(this.graph,this.container,{nodeProgramClasses:{image:GR()},renderEdgeLabels:!0,allowInvalidContainer:!0,labelSize:10,edgeLabelSize:10,enableEdgeEvents:!0}),this.renderer.on("enterNode",({node:e})=>{this.setHoveredNode(e)}),this.renderer.on("leaveNode",()=>{this.setHoveredNode(void 0)}),this.renderer.on("clickEdge",({edge:e})=>{let t=this.graph.getEdgeAttributes(e);this.ea.publish("edgeDetail",{edge:e,predicate:t.info.predicate,subject:t.info.subject,object:t.info.object,citation:t.info.citation,doi:t.info.doc_id,llm_id:t.info.llm_id,finding:t.info.finding})}),this.renderer.on("clickNode",({node:e})=>{let t=this.graph.getNodeAttributes(e);this.ea.publish("nodeDetail",{node:e,predicate:"",subject:t.label,object:"",citation:t.citation,doi:t.doc_id,llm_id:t.llm_id,finding:t.finding})}),this.renderer.on("enterEdge",({edge:e})=>{this.hoveredEdge=!0,this.setHoveredEdge(e),this.showEdgeLabel(e),this.renderer.refresh()}),this.renderer.on("leaveEdge",()=>{this.hoveredEdge=!1,this.setHoveredEdge(void 0)}),this.renderer.on("clickStage",e=>{if(this.state.hoveredEdge){let t=this.graph.getEdgeAttributes(this.state.hoveredEdge);this.ea.publish("edgeDetail",{edge:this.state.hoveredEdge,predicate:t.info.predicate,subject:t.info.subject,object:t.info.object,citation:t.info.citation,doi:t.info.doc_id,llm_id:t.info.llm_id,finding:t.info.finding})}}),this.renderer.setSetting("defaultDrawNodeHover",(e,t,i)=>{const r=i.labelSize,s=i.labelFont,o=i.labelWeight,a=r-1,l=t.label,c=t.clusterLabel,u=t.doiLabel,h=t.tag!=="unknown"?t.tag:"";e.beginPath(),e.fillStyle="#fff",e.shadowOffsetX=0,e.shadowOffsetY=2,e.shadowBlur=8,e.shadowColor="#000",e.font=`${o} ${r}px ${s}`;const d=e.measureText(l).width;e.font=`${o} ${a}px ${s}`;const f=c?e.measureText(c).width:0,g=h?e.measureText(h).width:0,p=u?e.measureText(u).width:0,m=Math.max(d,f,g,p),v=Math.round(t.x),y=Math.round(t.y),w=Math.round(m+r/2+t.size+3),R=Math.round(r/2+4),x=c?Math.round(a/2+9):0,S=Math.round(a/2+9),T=u?Math.round(a/2+9):0;DUe(e,v,y-x-12,w,S+R+x+T+20,5),e.closePath(),e.fill(),e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0,e.fillStyle=U5,e.font=`${o} ${r}px ${s}`,e.fillText(l,t.x+t.size+3,t.y+r/3),c&&(e.fillStyle=t.color,e.font=`${o} ${a}px ${s}`,e.fillText(c,t.x+t.size+3,t.y-2*r/3-2)),e.fillStyle=t.color,e.font=`${o} ${a}px ${s}`,e.fillText(h,t.x+t.size+3,t.y+r/3+3+a),u&&(e.fillStyle=U5,e.font=`${o} ${a}px ${s}`,e.fillText(u,t.x+t.size+3,t.y+r/3+3+a*2),e.fillText(t.citation,t.x+t.size+3,t.y+r/3+3+a*3))}),this.renderer.setSetting("nodeReducer",(e,t)=>{const i={...t};return this.state.hoveredNeighbors&&!this.state.hoveredNeighbors.has(e)&&this.state.hoveredNode!==e&&(i.label="",i.color="#f6f6f6"),this.state.selectedNode===e?i.highlighted=!0:this.state.suggestions&&(this.state.suggestions.has(e)?i.forceLabel=!0:(i.label="",i.color="#f6f6f6")),i}),this.renderer.setSetting("edgeReducer",(e,t)=>{const i={...t};return this.state.hoveredNode&&!this.graph.extremities(e).every(r=>r===this.state.hoveredNode||this.graph.areNeighbors(r,this.state.hoveredNode))&&(i.hidden=!0),this.state.suggestions&&(!this.state.suggestions.has(this.graph.source(e))||!this.state.suggestions.has(this.graph.target(e)))&&(i.hidden=!0),i}),this.renderer.setSetting("defaultDrawEdgeHover",(e,t,i,r)=>{const o=r.labelFont||"Arial",a=r.labelWeight||"bold",l=this.graph.getNodeAttributes(this.graph.source(i)),c=this.graph.getNodeAttributes(this.graph.target(i)),u=t.label||"",h=l.label||"Unknown",d=c.label||"Unknown";e.font=`${a} 10px ${o}`;const f=e.measureText(h).width,g=e.measureText(d).width,p=e.measureText(u).width,m=Math.max(f,g,p),v=(l.x+c.x)/2,y=(l.y+c.y)/2,w=5,R=14,x=m+w*2,S=R*3+w*2;(l.x+c.x)/2,(l.y+c.y)/2;const T=this.renderer.graphToViewport({x:v,y});e.beginPath(),e.fillStyle="rgba(255, 255, 255,0.3)",e.shadowOffsetX=1,e.shadowOffsetY=1,e.shadowBlur=1,e.shadowColor="#888",e.fillRect(T.x-x/2,T.y-S/2,x,S),e.closePath(),e.fill(),e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0,e.fillStyle="#000",e.font=`${a} 10px ${o}`,e.fillText(h,T.x-m/2,T.y-S/2+R),e.fillStyle="rgba(0, 0, 127, 1)",e.fillText(u,T.x-m/2,T.y-S/2+R*2),e.fillStyle="#000",e.fillText(d,T.x-m/2,T.y-S/2+R*3)}),this.layout=new tUe(this.graph,{settings:{gridSize:2,margin:90,expansion:1.1,ratio:1,speed:.05}}),this.layout2=new cUe(this.graph,{settings:{adjustSizes:!0,linLogMode:!1,gravity:.7,barnesHutOptimize:!0,barnesHutTheta:.1,edgeWeightInfluence:1,scalingRatio:30,slowDown:3,strongGravityMode:!1,outboundAttractionDistribution:!1}}),this.startAnimate()}transformNodesEdgesToGraph(e,t){this.graph?this.graph.clear():this.graph=new en({multi:!0,type:"directed"}),this.layout&&this.stopAnimate(),e.length==0&&(e=[{name:"This is demo",type:"generic",doi:"some doi"},{name:"1.switch to 'Knowledge Base Selection'",type:"generic",doi:"some doi"},{name:"2.select knowledge base 1",type:"generic",doi:"some doi"}]),t.length==0&&(t=[]);for(let i=0;i<e.length;i++){const r=e[i].name,s=e[i].type,o=this.typeColorMap.getColor(s);console.log("colormap subject",r),console.log("colormap subjectType",s);let a=(i+t.length)*2*Math.PI/(e.length+t.length);const l=r.toLowerCase();this.graph.hasNode(l)||this.graph.addNode(l,{label:r,tag:"",clusterLabel:s,doiLabel:e[i].doc_id,citation:e[i].citation,llm_id:e[i].llm_id,finding:e[i].finding,size:6,color:o,subjectType:s,x:300*Math.cos(a),y:300*Math.sin(a)})}for(let i=0;i<t.length;i++){const r=t[i].object,s=r.toLowerCase();if(!this.graph.hasNode(s)){let l=i*2*Math.PI/(e.length+t.length);this.graph.addNode(s,{label:r,tag:"finding",clusterLabel:"feature",size:6,color:"black",x:200*Math.cos(l),y:200*Math.sin(l)})}const o=t[i].subject,a=o.toLowerCase();if(!this.graph.hasNode(a)){let l=i*2*Math.PI/(e.length+t.length);this.graph.addNode(a,{label:o,tag:"derived feature",clusterLabel:"derived feature",size:6,color:"pink",x:300*Math.cos(l),y:300*Math.sin(l)})}}for(let i=0;i<t.length;i++){const r=t[i].subject,s=t[i].object,o=r.toLowerCase(),a=s.toLowerCase(),l=t[i].predicate;if(l&&l!=0){const c=`${o}-${a}`;this.graph.hasEdge(c)||this.graph.addEdge(o,a,{relationship:l,type:"arrow",label:l,info:t[i],size:2+cS(l,1),color:"darkgray"})}}this.layout?this.layoutOnOff():this.showgraph(),this.ea.publish("colormap",this.typeColorMap)}transformDataToGraph(e){this.graph?this.graph.clearEdges():this.graph=new en({type:"undirected"}),this.layout&&this.stopAnimate(),e.length==0&&(e=[["Biomarker","Type","CEA","CA19_9","Tumor Size","Metabolic Activity","ctDNA","CRP","Bowel MovementPatterns","Ki-67","Cascpase-3","MMP-1","Cell Proliferation"],["APC","Tumor suppressor gene",.8,.3,.9,.7,.6,.2,.1,.9,-.6,-.7,.9],["KRAS","Kirsten Rat Sarcoma Viral Oncogene Homolog",.7,.4,.8,.6,.5,.3,0,.8,-.5,.2,.8],["TP53","Tumor Protein 53",.6,.2,.7,.5,.4,.4,.1,.7,.9,-.4,.7],["MLH1","Mismatch Repair gene",.5,.3,.6,.4,.7,.5,.2,.6,.7,-.3,.6],["MSH2","Mismatch Repair gene",.5,.3,.6,.4,.7,.5,.2,.6,.7,-.3,.6],["BRAF","Oncogene MAPK/ERK signaling pathway",.4,.5,.5,.8,.3,.3,0,.5,-.2,.5,.5],["SMAD4","Tumor suppressor gene",.3,.2,.4,.3,.2,.4,.1,.4,.6,-.5,.4],["PIK3CA","Oncogene",.6,.4,.7,.6,.5,.3,0,.7,-.4,.3,.7],["NRAS","Oncogene",.4,.3,.5,.5,.4,.2,.1,.5,-.3,.2,.5],["CTNNB1","Cell adhesion signaling pathway",.3,.2,.4,.3,.3,.1,0,.4,-.2,-.1,.4],["FBXW7","Tumor suppressor gene",.2,.1,.3,.2,.2,.3,.1,.3,.5,-.4,.3]]);const t=e[0],i=t.slice(2);for(let r=0;r<i.length;r++){const s=i[r];if(!this.graph.hasNode(s)){let o=r*2*Math.PI/(e.length+i.length);this.graph.addNode(s,{label:s,tag:"object",clusterLabel:"knowledge",size:15,color:"black",x:100*Math.cos(o),y:100*Math.sin(o)})}}for(let r=1;r<e.length;r++){const s=e[r],o=s[0],a=s[1],l=this.typeColorMap.getColor(a);console.log("colormap2 subject",o),console.log("colormap2 subjectType",a);let c=(r+i.length)*2*Math.PI/(e.length+i.length);this.graph.hasNode(o)||this.graph.addNode(o,{label:o,tag:a,clusterLabel:"gene",size:7,color:l,subjectType:a,x:100*Math.cos(c),y:100*Math.sin(c)});for(let u=2;u<t.length;u++){const h=t[u],d=s[u];if(d&&d!=0){const f=`${o}-${h}`;this.graph.hasEdge(f)||this.graph.addEdge(o,h,{relationship:"related",type:"line",label:d,size:1+cS(d,5),color:"lightgrey"})}}}this.layoutOnOff()}layoutOnOff(){this.animationstarted=!this.animationstarted,this.animationstarted?this.startAnimate():(this.layout2.stop,this.layout.stop())}stopAnimate(){this.layout.stop()}startAnimate(){this.animationstarted&&(this.layout2.start(),setTimeout(()=>{this.layout2.stop(),this.layout.start()},5e3),setTimeout(()=>{this.animationstarted=!1,this.layout.stop()},1e4))}resetLayout(){const e=this.graph.nodes(),t=e.length;e.forEach((i,r)=>{const s=r*2*Math.PI/t;this.graph.setNodeAttribute(i,"x",100*Math.cos(s)),this.graph.setNodeAttribute(i,"y",100*Math.sin(s))})}loadkg(e){}distanceToSegment(e,t,i){const r=(i.x-t.x)**2+(i.y-t.y)**2;if(r===0)return Math.hypot(e.x-t.x,e.y-t.y);let s=((e.x-t.x)*(i.x-t.x)+(e.y-t.y)*(i.y-t.y))/r;s=Math.max(0,Math.min(1,s));const o={x:t.x+s*(i.x-t.x),y:t.y+s*(i.y-t.y)};return Math.hypot(e.x-o.x,e.y-o.y)}setNearestEdgeHover(){let e=this;this.container.addEventListener("mousemove",t=>{if(e.state.hoveredNode||this.hoveredEdge)return;const i=e.renderer.viewportToGraph({x:t.x,y:t.y});let r=null,s=1/0;const o=5e3;e.graph.forEachEdge(a=>{const l=e.graph.source(a),c=e.graph.target(a),u=e.graph.getNodeAttributes(l),h=e.graph.getNodeAttributes(c),d={x:u.x,y:u.y},f={x:h.x,y:h.y},g=(i.x-(d.x+f.x)/2)**2+(i.y-(d.y+f.y)/2)**2;g<s&&(s=g,r=a)}),s<o&&r?(e.setHoveredEdge(r),e.renderer.refresh(),e.showEdgeLabel.bind(e)(r)):(e.setHoveredEdge(void 0),e.renderer.refresh())})}}AZ=FUe;({e:[IZ,OZ,kZ,DZ,LZ,NZ],c:[HZ,PZ]}=LUe(AZ,[aa({...Z6e,name:"sv-network"})],[[Qr,0,"tabid"],[Qr,0,"datachannel"],[Qr,0,"searchValue"]]));PZ();const $Z="tabs",_O=`    <div class="w3-bar" if.bind="!vertical">
        <button class.bind="inactiveclass" style="width:145px">&nbsp;</button>
        <button repeat.for="id of ids" class.bind="id.cls" click.trigger="open(id)">\${id.title}</button>
    </div>
    <nav class="w3-bar-block" style="width:50px;float:left" if.bind="vertical">
        <button repeat.for="id of ids" class.bind="id.cls" click.trigger="open(id)">\${id.title}</button>
    </nav>
`,FZ=[],BZ={};let MA;function BUe(n){MA||(MA=Ti.define({name:$Z,template:_O,dependencies:FZ,bindables:BZ})),n.register(MA)}const VUe=Object.freeze(Object.defineProperty({__proto__:null,bindables:BZ,default:_O,dependencies:FZ,name:$Z,register:BUe,template:_O},Symbol.toStringTag,{value:"Module"}));var VZ;let WZ,jZ,zZ,UZ,GZ,YZ,KZ,qZ,XZ,ZZ,QZ;function WUe(n,e,t,i,r,s){var o,a,l,c,u,h,d,f=Symbol.metadata||Symbol.for("Symbol.metadata"),g=Object.defineProperty,p=Object.create,m=[p(null),p(null)],v=e.length;function y(S,T,P){return function(E,A){T&&(A=E,E=n);for(var L=0;L<S.length;L++)A=S[L].apply(E,P?[A]:[]);return P?A:E}}function w(S,T,P,E){if(typeof S!="function"&&(E||S!==void 0))throw new TypeError(T+" must "+(P||"be")+" a function"+(E?"":" or undefined"));return S}function R(S,T,P,E,A,L,W,F,V,H,N){function j(Y){if(!N(Y))throw new TypeError("Attempted to access private element on non-instance")}var k=[].concat(T[0]),K=T[3],ie=!W,b=A===1,C=A===3,_=A===4,I=A===2;function $(Y,ne,de){return function(he,ce){return ne&&(ce=he,he=S),de&&de(he),M[Y].call(he,ce)}}if(!ie){var M={},B=[],z=C?"get":_||b?"set":"value";if(V?(H||b?M={get:Y5(function(){return K(this)},E,"get"),set:function(Y){T[4](this,Y)}}:M[z]=K,H||Y5(M[z],E,I?"":z)):H||(M=Object.getOwnPropertyDescriptor(S,E)),!H&&!V){if((a=m[+F][E])&&(a^A)!=7)throw Error("Decorating two elements with the same name ("+M[z].name+") is not supported yet");m[+F][E]=A<3?1:A}}for(var U=S,le=k.length-1;le>=0;le-=P?2:1){var ue=w(k[le],"A decorator","be",!0),be=P?k[le-1]:void 0,fe={},Z={kind:["field","accessor","method","getter","setter","class"][A],name:E,metadata:o,addInitializer:(function(Y,ne){if(Y.v)throw new TypeError("attempted to call addInitializer after decoration was finished");w(ne,"An initializer","be",!0),L.push(ne)}).bind(null,fe)};if(ie)a=ue.call(be,U,Z),fe.v=1,w(a,"class decorators","return")&&(U=a);else if(Z.static=F,Z.private=V,a=Z.access={has:V?N.bind():function(Y){return E in Y}},_||(a.get=V?I?function(Y){return j(Y),M.value}:$("get",0,j):function(Y){return Y[E]}),I||C||(a.set=V?$("set",0,j):function(Y,ne){Y[E]=ne}),U=ue.call(be,b?{get:M.get,set:M.set}:M[z],Z),fe.v=1,b){if(typeof U=="object"&&U)(a=w(U.get,"accessor.get"))&&(M.get=a),(a=w(U.set,"accessor.set"))&&(M.set=a),(a=w(U.init,"accessor.init"))&&B.unshift(a);else if(U!==void 0)throw new TypeError("accessor decorators must return an object with get, set, or init properties or undefined")}else w(U,(H?"field":"method")+" decorators","return")&&(H?B.unshift(U):M[z]=U)}return A<2&&W.push(y(B,F,1),y(L,F,0)),H||ie||(V?b?W.splice(-1,0,$("get",F),$("set",F)):W.push(I?M[z]:w.call.bind(M[z])):g(S,E,M)),U}function x(S){return g(S,f,{configurable:!0,enumerable:!0,value:o})}return o=p(o??null),u=[],h=function(S){S&&u.push(y(S))},d=function(S,T){for(var P=0;P<t.length;P++){var E=t[P],A=E[1],L=7&A;if((8&A)==S&&!L==T){var W=E[2],F=!!E[3],V=16&A;R(S?n:n.prototype,E,V,F?"#"+W:jUe(W),L,L<2?[]:S?c=c||[]:l=l||[],u,!!S,F,T,S&&F?function(H){return UUe(H)===n}:r)}}},d(8,0),d(0,0),d(8,1),d(0,1),h(l),h(c),a=u,v||x(n),{e:a,get c(){var S=[];return v&&[x(n=R(n,[e],i,n.name,5,S)),y(S,1)]}}}function jUe(n){var e=zUe(n,"string");return typeof e=="symbol"?e:e+""}function zUe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Y5(n,e,t){typeof e=="symbol"&&(e=(e=e.description)?"["+e+"]":"");try{Object.defineProperty(n,"name",{configurable:!0,value:t?t+" "+e:e})}catch{}return n}function UUe(n){if(Object(n)!==n)throw TypeError("right-hand side of 'in' should be an object, got "+(n!==null?typeof n:"null"));return n}let JZ;class GUe{constructor(){this.ea=ve(Ww),this.idlist=jZ(this),this.titlelist=(zZ(this),UZ(this)),this.ids=(GZ(this),[]),this.w3class=YZ(this,"w3-bar-item"),this.vertical=(KZ(this),qZ(this,!1)),this.listen=(XZ(this),ZZ(this)),this.activeclasstemplate=(QZ(this),"w3-button w3-white w3-border-top w3-border-left w3-border-right"),this.inactiveclasstemplate="w3-button w3-border-bottom w3-theme-l5",this.activeclasstemplatevertical="w3-bar-item w3-button w3-white w3-border-top w3-border-left w3-border-bottom",this.inactiveclasstemplatevertical="w3-bar-item w3-button w3-border-right w3-theme-l5",this.handleChange=e=>{if(e.detail&&e.detail.id){let t=this.ids.find(i=>i.name===e.detail.id);t&&this.open(t)}}}bound(){if(typeof this.vertical=="string"&&(this.vertical=this.vertical==="true"),this.w3class?(this.activeclass=this.w3class+" "+(this.vertical?this.activeclasstemplatevertical:this.activeclasstemplate),this.inactiveclass=this.w3class+" "+(this.vertical?this.inactiveclasstemplatevertical:this.inactiveclasstemplate)):(this.activeclass=this.vertical?this.activeclasstemplatevertical:this.activeclasstemplate,this.inactiveclass=this.vertical?this.activeclasstemplatevertical:this.activeclasstemplate),this.idlist&&(this.ids=this.idlist.split(",").map(e=>({name:e,title:e,cls:this.inactiveclass})),this.titlelist)){let e=this.titlelist.split(",");for(let t=0;t<e.length;t++)this.ids[t]&&(this.ids[t].title=e[t])}this.subscription1=this.ea.subscribe("quizshow",e=>{const t=this.check(e);t&&this.open(t)})}attached(){console.log("tabs component",this),this.open(this.ids[0]),this.listen&&(console.log("tabs component listening custom event with name:",this.listen),document.addEventListener(this.listen,this.handleChange))}check(e){if(e.includes(";")){const t=e.split(";");return this.ids.find(i=>i.name===t[1])}else return null}unbinding(){this.subscription1.dispose()}open(e){if(this.active)this.setinactive(this.active),this.setactive(e),this.active=e;else{for(let t of this.ids)t!==this.active&&this.setinactive(t);this.setactive(e),this.active=e}}setactive(e){let t=document.getElementById(e.name);t&&(t.style.display="block",e.cls=this.activeclass,this.ea.publish("showtab",e.name))}setinactive(e){let t=document.getElementById(e.name);t&&(t.style.display="none",e.cls=this.inactiveclass,this.ea.publish("hidetab",e.name))}}VZ=GUe;({e:[jZ,zZ,UZ,GZ,YZ,KZ,qZ,XZ,ZZ,QZ],c:[JZ,WZ]}=WUe(VZ,[aa({...VUe,name:"sv-tabs"})],[[Qr,0,"idlist"],[Qr,0,"titlelist"],[Qr,0,"w3class"],[Qr,0,"vertical"],[Qr,0,"listen"]]));WZ();const eQ="table-network",RO=`<sv-tabs idlist="view,source,description" titlelist="View,Knowledge Base Selection,Description"
    style="position:relative;z-index:1;width:50%;display:block"></sv-tabs>
<sv-network tabid="visual" datachannel="data" style="width:100vw;height:100vh;position:fixed;top:0;left:0"></sv-network>    
<sv-info style="width:400px;height:400px;position:fixed;bottom:0;right:0;background-color:rgba(255, 255, 255, 0.8);" class="w3-border w3-round w3-margin w3-padding"></sv-info>
<div id="view" style="position:absolute;opacity:80%;z-index:1;background-color: white;">    
</div>
<!--div id="help"><au-slot></au-slot></div-->
<div id="source" style="width:300px;opacity:90%;z-index:1">    
   <sv-pdf-uploader></sv-pdf-uploader>   
</div>
<div id="description" style="width:300px;opacity:90%;z-index:1">
    <div class="w3-small">
        <ul>
            <li><b>version 02/2025</b> initial version - knowledge constructed using one way extracting using LLMs</li>
            <li><b>version 03/2025</b> workflow version - knowledge constructed using findings(LLM) -> named entity recognition {NER) models (en_ner_bionlp13cg_md)-> triplet construction (LLM)</li>
        </ul>
    </div>
</div>
<!--div id="nodes" style="position:absolute;height:90vh;opacity:90%;z-index:1">
    <sv-table component.ref="svNodes" datachannel="data" datatype="nodes" tabid="nodes"></sv-table>
</div>
<div id="edges" style="position:absolute;height:90vh;opacity:90%;z-index:1">
    <sv-table-filtered component.ref="svEdges" datachannel="data" datatype="edges" tabid="edges"></sv-table-filtered>
</div>
<div id="noedtable" style="position:absolute;height:90vh;opacity:90%;z-index:1">
    <sv-table component.ref="svTable" datachannel="data" tabid="noedtable"></sv-table>
</div-->
`,tQ=[],nQ={};let AA;function YUe(n){AA||(AA=Ti.define({name:eQ,template:RO,dependencies:tQ,bindables:nQ})),n.register(AA)}const KUe=Object.freeze(Object.defineProperty({__proto__:null,bindables:nQ,default:RO,dependencies:tQ,name:eQ,register:YUe,template:RO},Symbol.toStringTag,{value:"Module"}));var iQ;let rQ;function qUe(n,e,t,i,r,s){var o,a,l,c,u,h,d,f=Symbol.metadata||Symbol.for("Symbol.metadata"),g=Object.defineProperty,p=Object.create,m=[p(null),p(null)],v=e.length;function y(S,T,P){return function(E,A){T&&(A=E,E=n);for(var L=0;L<S.length;L++)A=S[L].apply(E,P?[A]:[]);return P?A:E}}function w(S,T,P,E){if(typeof S!="function"&&(E||S!==void 0))throw new TypeError(T+" must "+(P||"be")+" a function"+(E?"":" or undefined"));return S}function R(S,T,P,E,A,L,W,F,V,H,N){function j(Y){if(!N(Y))throw new TypeError("Attempted to access private element on non-instance")}var k=[].concat(T[0]),K=T[3],ie=!W,b=A===1,C=A===3,_=A===4,I=A===2;function $(Y,ne,de){return function(he,ce){return ne&&(ce=he,he=S),de&&de(he),M[Y].call(he,ce)}}if(!ie){var M={},B=[],z=C?"get":_||b?"set":"value";if(V?(H||b?M={get:K5(function(){return K(this)},E,"get"),set:function(Y){T[4](this,Y)}}:M[z]=K,H||K5(M[z],E,I?"":z)):H||(M=Object.getOwnPropertyDescriptor(S,E)),!H&&!V){if((a=m[+F][E])&&(a^A)!=7)throw Error("Decorating two elements with the same name ("+M[z].name+") is not supported yet");m[+F][E]=A<3?1:A}}for(var U=S,le=k.length-1;le>=0;le-=P?2:1){var ue=w(k[le],"A decorator","be",!0),be=P?k[le-1]:void 0,fe={},Z={kind:["field","accessor","method","getter","setter","class"][A],name:E,metadata:o,addInitializer:(function(Y,ne){if(Y.v)throw new TypeError("attempted to call addInitializer after decoration was finished");w(ne,"An initializer","be",!0),L.push(ne)}).bind(null,fe)};if(ie)a=ue.call(be,U,Z),fe.v=1,w(a,"class decorators","return")&&(U=a);else if(Z.static=F,Z.private=V,a=Z.access={has:V?N.bind():function(Y){return E in Y}},_||(a.get=V?I?function(Y){return j(Y),M.value}:$("get",0,j):function(Y){return Y[E]}),I||C||(a.set=V?$("set",0,j):function(Y,ne){Y[E]=ne}),U=ue.call(be,b?{get:M.get,set:M.set}:M[z],Z),fe.v=1,b){if(typeof U=="object"&&U)(a=w(U.get,"accessor.get"))&&(M.get=a),(a=w(U.set,"accessor.set"))&&(M.set=a),(a=w(U.init,"accessor.init"))&&B.unshift(a);else if(U!==void 0)throw new TypeError("accessor decorators must return an object with get, set, or init properties or undefined")}else w(U,(H?"field":"method")+" decorators","return")&&(H?B.unshift(U):M[z]=U)}return A<2&&W.push(y(B,F,1),y(L,F,0)),H||ie||(V?b?W.splice(-1,0,$("get",F),$("set",F)):W.push(I?M[z]:w.call.bind(M[z])):g(S,E,M)),U}function x(S){return g(S,f,{configurable:!0,enumerable:!0,value:o})}return o=p(o??null),u=[],h=function(S){S&&u.push(y(S))},d=function(S,T){for(var P=0;P<t.length;P++){var E=t[P],A=E[1],L=7&A;if((8&A)==S&&!L==T){var W=E[2],F=!!E[3],V=16&A;R(S?n:n.prototype,E,V,F?"#"+W:XUe(W),L,L<2?[]:S?c=c||[]:l=l||[],u,!!S,F,T,S&&F?function(H){return QUe(H)===n}:r)}}},d(8,0),d(0,0),d(8,1),d(0,1),h(l),h(c),a=u,v||x(n),{e:a,get c(){var S=[];return v&&[x(n=R(n,[e],i,n.name,5,S)),y(S,1)]}}}function XUe(n){var e=ZUe(n,"string");return typeof e=="symbol"?e:e+""}function ZUe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function K5(n,e,t){typeof e=="symbol"&&(e=(e=e.description)?"["+e+"]":"");try{Object.defineProperty(n,"name",{configurable:!0,value:t?t+" "+e:e})}catch{}return n}function QUe(n){if(Object(n)!==n)throw TypeError("right-hand side of 'in' should be an object, got "+(n!==null?typeof n:"null"));return n}let sQ;class JUe{constructor(){this.hidetable=!1,this.svTable=void 0,this.svEdges=void 0,this.svNodes=void 0}attached(){console.log("table-network attached()")}showHide(){}showHideTable(){this.hidetable=!this.hidetable}addRow(){this.svTable&&typeof this.svTable.addRow=="function"?this.svTable.addRow():console.warn("svTable reference is not available or addRow method is undefined.",this.svTable)}addColumn(){this.svTable&&typeof this.svTable.addColumn=="function"?this.svTable.addColumn():console.warn("svTable reference is not available or addColumn method is undefined.",this.svTable)}}iQ=JUe;[sQ,rQ]=qUe(iQ,[aa({...KUe,name:"sv-table-network"})],[]).c;rQ();const oQ="table-filtered",EO=`<div class="w3-row">
        <div class="w3-col" style="width:80px">
                <ul class="w3-ul w3-hoverable w3-small">
                        <li title="all" click.trigger="all()">all</li>
                        <li repeat.for="subject of subjects" click.trigger="filter(subject)" class="w3-padding-small" title.bind="subject">\${subject}
                        </li>
                </ul>
        </div>
        <div class="w3-col" style="width: calc(100% - 100px)">
                <div ref="mytable" show.bind="showtable"></div>
        </div>
</div>`,aQ=[],lQ={};let PA;function e7e(n){PA||(PA=Ti.define({name:oQ,template:EO,dependencies:aQ,bindables:lQ})),n.register(PA)}const t7e=Object.freeze(Object.defineProperty({__proto__:null,bindables:lQ,default:EO,dependencies:aQ,name:oQ,register:e7e,template:EO},Symbol.toStringTag,{value:"Module"}));var cQ;let uQ;function n7e(n,e,t,i,r,s){var o,a,l,c,u,h,d,f=Symbol.metadata||Symbol.for("Symbol.metadata"),g=Object.defineProperty,p=Object.create,m=[p(null),p(null)],v=e.length;function y(S,T,P){return function(E,A){T&&(A=E,E=n);for(var L=0;L<S.length;L++)A=S[L].apply(E,P?[A]:[]);return P?A:E}}function w(S,T,P,E){if(typeof S!="function"&&(E||S!==void 0))throw new TypeError(T+" must "+(P||"be")+" a function"+(E?"":" or undefined"));return S}function R(S,T,P,E,A,L,W,F,V,H,N){function j(Y){if(!N(Y))throw new TypeError("Attempted to access private element on non-instance")}var k=[].concat(T[0]),K=T[3],ie=!W,b=A===1,C=A===3,_=A===4,I=A===2;function $(Y,ne,de){return function(he,ce){return ne&&(ce=he,he=S),de&&de(he),M[Y].call(he,ce)}}if(!ie){var M={},B=[],z=C?"get":_||b?"set":"value";if(V?(H||b?M={get:q5(function(){return K(this)},E,"get"),set:function(Y){T[4](this,Y)}}:M[z]=K,H||q5(M[z],E,I?"":z)):H||(M=Object.getOwnPropertyDescriptor(S,E)),!H&&!V){if((a=m[+F][E])&&(a^A)!=7)throw Error("Decorating two elements with the same name ("+M[z].name+") is not supported yet");m[+F][E]=A<3?1:A}}for(var U=S,le=k.length-1;le>=0;le-=P?2:1){var ue=w(k[le],"A decorator","be",!0),be=P?k[le-1]:void 0,fe={},Z={kind:["field","accessor","method","getter","setter","class"][A],name:E,metadata:o,addInitializer:(function(Y,ne){if(Y.v)throw new TypeError("attempted to call addInitializer after decoration was finished");w(ne,"An initializer","be",!0),L.push(ne)}).bind(null,fe)};if(ie)a=ue.call(be,U,Z),fe.v=1,w(a,"class decorators","return")&&(U=a);else if(Z.static=F,Z.private=V,a=Z.access={has:V?N.bind():function(Y){return E in Y}},_||(a.get=V?I?function(Y){return j(Y),M.value}:$("get",0,j):function(Y){return Y[E]}),I||C||(a.set=V?$("set",0,j):function(Y,ne){Y[E]=ne}),U=ue.call(be,b?{get:M.get,set:M.set}:M[z],Z),fe.v=1,b){if(typeof U=="object"&&U)(a=w(U.get,"accessor.get"))&&(M.get=a),(a=w(U.set,"accessor.set"))&&(M.set=a),(a=w(U.init,"accessor.init"))&&B.unshift(a);else if(U!==void 0)throw new TypeError("accessor decorators must return an object with get, set, or init properties or undefined")}else w(U,(H?"field":"method")+" decorators","return")&&(H?B.unshift(U):M[z]=U)}return A<2&&W.push(y(B,F,1),y(L,F,0)),H||ie||(V?b?W.splice(-1,0,$("get",F),$("set",F)):W.push(I?M[z]:w.call.bind(M[z])):g(S,E,M)),U}function x(S){return g(S,f,{configurable:!0,enumerable:!0,value:o})}return s!==void 0&&(o=s[f]),o=p(o??null),u=[],h=function(S){S&&u.push(y(S))},d=function(S,T){for(var P=0;P<t.length;P++){var E=t[P],A=E[1],L=7&A;if((8&A)==S&&!L==T){var W=E[2],F=!!E[3],V=16&A;R(S?n:n.prototype,E,V,F?"#"+W:i7e(W),L,L<2?[]:S?c=c||[]:l=l||[],u,!!S,F,T,S&&F?function(H){return s7e(H)===n}:r)}}},d(8,0),d(0,0),d(8,1),d(0,1),h(l),h(c),a=u,v||x(n),{e:a,get c(){var S=[];return v&&[x(n=R(n,[e],i,n.name,5,S)),y(S,1)]}}}function i7e(n){var e=r7e(n,"string");return typeof e=="symbol"?e:e+""}function r7e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function q5(n,e,t){typeof e=="symbol"&&(e=(e=e.description)?"["+e+"]":"");try{Object.defineProperty(n,"name",{configurable:!0,value:t?t+" "+e:e})}catch{}return n}function s7e(n){if(Object(n)!==n)throw TypeError("right-hand side of 'in' should be an object, got "+(n!==null?typeof n:"null"));return n}let hQ;class o7e extends LE{constructor(...e){super(...e),this.subjects=["all","APC","NRAS","PIK3CA"]}attached(){super.attached(),this.subjects=[...new Set(this.data.map(e=>e[0]))]}all(){this.hot.loadData(this.data)}filter(e){console.log("filtering",e);const t=this.data.filter(i=>i[0]===e);this.hot.loadData(t)}}cQ=o7e;[hQ,uQ]=n7e(cQ,[aa({...t7e,name:"sv-table-filtered"})],[],0,void 0,LE).c;uQ();const dQ="pdf-uploader",xO=`<div  class="w3-card w3-margin w3-padding">
  <!--<b>1. Choose file (PDF)</b>
    <form>
      <input class="w3-input" type="file" accept="*/*" change.trigger="handleFileChange($event)" />
    </form>
    <b>2. select API to extract</b><br/>
    <button class="w3-button w3-theme-d1 w3-ripple w3-margin" type="button" click.trigger="setUrl('http://localhost:5000/upload')">DEBUG localhost:5000</button><br/>
    <button class="w3-button w3-theme-d1 w3-ripple w3-margin" type="button" click.trigger="setUrl('http://sasdnode1.vito.local:56455/upload')">internal</button><br/>
    <button class="w3-button w3-theme-d1 w3-ripple w3-margin" type="button" click.trigger="setUrl('https://app.oncoscreen.io/upload')">external</button><br/>
    <div class="w3-small">custom URL:<input type="text" class="w3-input" value.bind="url"/></div>
    <b>3. </b>
    <button class="w3-button w3-theme-d1 w3-ripple" type="button" click.trigger="uploadFile()">Extract knowledge</button>
  -->
    <b>Select knowledge to load:</b><br/>
  <button class="w3-button w3-theme-d1 w3-ripple w3-margin" style="line-height:0.8" type="button" click.trigger="loadKG('kg1.json')">knowledge base 1<br/><span class="w3-tiny">version 02 - 8 ONCOSCREEN articles<br/>LLM: llama3.3:70b q4</span></button><br/>
  <button class="w3-button w3-theme-d1 w3-ripple w3-margin" style="line-height:0.8" type="button" click.trigger="loadKG('kgx1.json')">knowledge base 1<br/><span class="w3-tiny">version 03 - 8 ONCOSCREEN articles<br/>LLM: llama3.3:70b q8 + NER bionlp13cg</span></button><br/>
  <button class="w3-button w3-theme-d1 w3-ripple w3-margin" style="line-height:0.8" type="button" click.trigger="loadKG('kgx1-1.json')">knowledge base 1<br/><span class="w3-tiny">version 03 - 8 ONCOSCREEN articles<br/>LLM: deepseek-r1 + NER bionlp13cg</span></button><br/>
  <button class="w3-button w3-theme-d1 w3-ripple w3-margin" style="line-height:0.8" type="button" click.trigger="loadKG('kgx1-2.json')">knowledge base 1<br/><span class="w3-tiny">version 03 - 8 ONCOSCREEN articles<br/>LLM: phi14:4b + NER bionlp13cg</span></button><br/>
  <button class="w3-button w3-theme-d1 w3-ripple w3-margin" style="line-height:0.8" type="button" click.trigger="loadKG('kgx1-3.json')">knowledge base 1<br/><span class="w3-tiny">version 03 - 8 ONCOSCREEN articles<br/>LLM: qwen2.5:72b + NER bionlp13cg</span></button><br/>
  <button class="w3-button w3-theme-d1 w3-ripple w3-margin" style="line-height:0.8" type="button" click.trigger="loadKG('kgx1-4.json')">knowledge base 1<br/><span class="w3-tiny">version 03 - 8 ONCOSCREEN articles<br/>LLM: mistral-large:123b + NER bionlp13cg</span></button><br/>
  <button class="w3-button w3-theme-d1 w3-ripple w3-margin" style="line-height:0.8" type="button" click.trigger="loadKG('kgx_consensus.json')">knowledge base 2<br/><span class="w3-tiny">version 03 - 8 CRC related articles<br/>LLM: llama3.3:70b q8 + NER bionlp13cg</span></button><br/>
  <button class="w3-button w3-theme-d1 w3-ripple w3-margin" style="line-height:0.8" type="button" click.trigger="loadKG('kgx_ipo.json')">knowledge base 3<br/><span class="w3-tiny">version 03 - 4 IPO articles<br/>LLM: llama3.3:70b q8 + NER bionlp13cg</span></button><br/>

  </div>`,fQ=[],gQ={};let IA;function a7e(n){IA||(IA=Ti.define({name:dQ,template:xO,dependencies:fQ,bindables:gQ})),n.register(IA)}const l7e=Object.freeze(Object.defineProperty({__proto__:null,bindables:gQ,default:xO,dependencies:fQ,name:dQ,register:a7e,template:xO},Symbol.toStringTag,{value:"Module"}));var pQ;let mQ;function c7e(n,e,t,i,r,s){var o,a,l,c,u,h,d,f=Symbol.metadata||Symbol.for("Symbol.metadata"),g=Object.defineProperty,p=Object.create,m=[p(null),p(null)],v=e.length;function y(S,T,P){return function(E,A){T&&(A=E,E=n);for(var L=0;L<S.length;L++)A=S[L].apply(E,P?[A]:[]);return P?A:E}}function w(S,T,P,E){if(typeof S!="function"&&(E||S!==void 0))throw new TypeError(T+" must "+(P||"be")+" a function"+(E?"":" or undefined"));return S}function R(S,T,P,E,A,L,W,F,V,H,N){function j(Y){if(!N(Y))throw new TypeError("Attempted to access private element on non-instance")}var k=[].concat(T[0]),K=T[3],ie=!W,b=A===1,C=A===3,_=A===4,I=A===2;function $(Y,ne,de){return function(he,ce){return ne&&(ce=he,he=S),de&&de(he),M[Y].call(he,ce)}}if(!ie){var M={},B=[],z=C?"get":_||b?"set":"value";if(V?(H||b?M={get:X5(function(){return K(this)},E,"get"),set:function(Y){T[4](this,Y)}}:M[z]=K,H||X5(M[z],E,I?"":z)):H||(M=Object.getOwnPropertyDescriptor(S,E)),!H&&!V){if((a=m[+F][E])&&(a^A)!=7)throw Error("Decorating two elements with the same name ("+M[z].name+") is not supported yet");m[+F][E]=A<3?1:A}}for(var U=S,le=k.length-1;le>=0;le-=P?2:1){var ue=w(k[le],"A decorator","be",!0),be=P?k[le-1]:void 0,fe={},Z={kind:["field","accessor","method","getter","setter","class"][A],name:E,metadata:o,addInitializer:(function(Y,ne){if(Y.v)throw new TypeError("attempted to call addInitializer after decoration was finished");w(ne,"An initializer","be",!0),L.push(ne)}).bind(null,fe)};if(ie)a=ue.call(be,U,Z),fe.v=1,w(a,"class decorators","return")&&(U=a);else if(Z.static=F,Z.private=V,a=Z.access={has:V?N.bind():function(Y){return E in Y}},_||(a.get=V?I?function(Y){return j(Y),M.value}:$("get",0,j):function(Y){return Y[E]}),I||C||(a.set=V?$("set",0,j):function(Y,ne){Y[E]=ne}),U=ue.call(be,b?{get:M.get,set:M.set}:M[z],Z),fe.v=1,b){if(typeof U=="object"&&U)(a=w(U.get,"accessor.get"))&&(M.get=a),(a=w(U.set,"accessor.set"))&&(M.set=a),(a=w(U.init,"accessor.init"))&&B.unshift(a);else if(U!==void 0)throw new TypeError("accessor decorators must return an object with get, set, or init properties or undefined")}else w(U,(H?"field":"method")+" decorators","return")&&(H?B.unshift(U):M[z]=U)}return A<2&&W.push(y(B,F,1),y(L,F,0)),H||ie||(V?b?W.splice(-1,0,$("get",F),$("set",F)):W.push(I?M[z]:w.call.bind(M[z])):g(S,E,M)),U}function x(S){return g(S,f,{configurable:!0,enumerable:!0,value:o})}return o=p(o??null),u=[],h=function(S){S&&u.push(y(S))},d=function(S,T){for(var P=0;P<t.length;P++){var E=t[P],A=E[1],L=7&A;if((8&A)==S&&!L==T){var W=E[2],F=!!E[3],V=16&A;R(S?n:n.prototype,E,V,F?"#"+W:u7e(W),L,L<2?[]:S?c=c||[]:l=l||[],u,!!S,F,T,S&&F?function(H){return d7e(H)===n}:r)}}},d(8,0),d(0,0),d(8,1),d(0,1),h(l),h(c),a=u,v||x(n),{e:a,get c(){var S=[];return v&&[x(n=R(n,[e],i,n.name,5,S)),y(S,1)]}}}function u7e(n){var e=h7e(n,"string");return typeof e=="symbol"?e:e+""}function h7e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function X5(n,e,t){typeof e=="symbol"&&(e=(e=e.description)?"["+e+"]":"");try{Object.defineProperty(n,"name",{configurable:!0,value:t?t+" "+e:e})}catch{}return n}function d7e(n){if(Object(n)!==n)throw TypeError("right-hand side of 'in' should be an object, got "+(n!==null?typeof n:"null"));return n}let bQ;class f7e{constructor(){this.ea=ve(Ww),this.file=null,this.url="http://localhost:5000/upload"}handleFileChange(e){this.file=e.target.files[0]}async uploadFile(){if(!this.file){alert("Please select a file to upload.");return}const e=new FormData;e.append("file",this.file);try{const t=await fetch(this.url,{method:"POST",body:e});t.ok?alert("File uploaded successfully!"):alert(`Failed to upload file: ${t.statusText}`)}catch(t){alert(`Error uploading file: ${t.message}`)}}setUrl(e){this.url=e}attached(){this.loadKG("kgx1-1.json")}async loadKG(e){try{const t=await fetch(e);if(!t.ok)throw new Error(`HTTP error! Status: ${t.status}`);const i=await t.json();let r=[],s=[];if(console.log("loadKG() jsondata",i),i.biomarkers)for(let a of Object.keys(i.biomarkers)){const l=i.biomarkers[a],c=i.documents[l.doc_id];let u={name:l.name,type:l.details.type,description:l.details.description,findings:l.details.findings,doi:l.doc_id,citation:c.short_citation,long_citation:c.long_citation,llm:l.llm_id,notes:l.details.notes};if(r.push(u),l.details.knowledge&&typeof l.details.knowledge[Symbol.iterator]=="function")for(let h of l.details.knowledge){let d={subject:l.name,predicate:h.predicate,object:h.object,finding:l.name,doi:l.doc_id,citation:c.short_citation,llm:l.llm_id};s.push(d)}else console.warn("no knowledge for node:",l.name)}else if(i.knowledge)for(let a of Object.keys(i.knowledge)){const l=i.knowledge[a],c=i.documents[l.doc_id],u=Array.from(new Set(l.details.flatMap(h=>[h.subject,h.object])));for(let h of u){const d=l.entities[h]??"generic";let f={name:h,type:d,doc_id:l.doc_id,citation:c.short_citation,llm_id:l.llm_id,finding:l.name};r.push(f)}for(let h of l.details){let d={subject:h.subject,predicate:h.predicate,object:h.object,finding:l.name,doc_id:l.doc_id,llm_id:l.llm_id,citation:c.short_citation};s.push(d)}}const o={nodes:r,edges:s};this.ea.publish("loadnodesedges",o)}catch(t){return console.error("Error fetching JSON:",t),null}}}pQ=f7e;[bQ,mQ]=c7e(pQ,[aa({...l7e,name:"sv-pdf-uploader"})],[]).c;mQ();const vQ="info",TO='<b>INFO</b><br/>\n<i class="w3-small">node:</i><b>${subject}</b><br/>\n<i class="w3-small">predicate:</i><b>${predicate}</b><br/>\n<i class="w3-small">object:</i><b>${object}</b><br/>\n<i class="w3-small">source:</i>${citation} <a href="https://dx.doi.org/${doi}" target="_blank">${doi}</a><br/>\n<i class="w3-small">finding:</i><div style="line-height: 0.9;text-align: justify;">${finding}</div><br/>\n<i class="w3-small">extracted by llm:</i>${llm_id}\n<div class="w3-white" style="opacity:1"><i class="w3-small">legend colors:</i><br/><span repeat.for="ci of colormap"><b style="color:${ci.color}">&#x23fa;</b><i>${ci.label}</i> </span></div>\n\n',wQ=[],yQ={};let OA;function g7e(n){OA||(OA=Ti.define({name:vQ,template:TO,dependencies:wQ,bindables:yQ})),n.register(OA)}const p7e=Object.freeze(Object.defineProperty({__proto__:null,bindables:yQ,default:TO,dependencies:wQ,name:vQ,register:g7e,template:TO},Symbol.toStringTag,{value:"Module"}));var CQ;let SQ;function m7e(n,e,t,i,r,s){var o,a,l,c,u,h,d,f=Symbol.metadata||Symbol.for("Symbol.metadata"),g=Object.defineProperty,p=Object.create,m=[p(null),p(null)],v=e.length;function y(S,T,P){return function(E,A){T&&(A=E,E=n);for(var L=0;L<S.length;L++)A=S[L].apply(E,P?[A]:[]);return P?A:E}}function w(S,T,P,E){if(typeof S!="function"&&(E||S!==void 0))throw new TypeError(T+" must "+(P||"be")+" a function"+(E?"":" or undefined"));return S}function R(S,T,P,E,A,L,W,F,V,H,N){function j(Y){if(!N(Y))throw new TypeError("Attempted to access private element on non-instance")}var k=[].concat(T[0]),K=T[3],ie=!W,b=A===1,C=A===3,_=A===4,I=A===2;function $(Y,ne,de){return function(he,ce){return ne&&(ce=he,he=S),de&&de(he),M[Y].call(he,ce)}}if(!ie){var M={},B=[],z=C?"get":_||b?"set":"value";if(V?(H||b?M={get:Z5(function(){return K(this)},E,"get"),set:function(Y){T[4](this,Y)}}:M[z]=K,H||Z5(M[z],E,I?"":z)):H||(M=Object.getOwnPropertyDescriptor(S,E)),!H&&!V){if((a=m[+F][E])&&(a^A)!=7)throw Error("Decorating two elements with the same name ("+M[z].name+") is not supported yet");m[+F][E]=A<3?1:A}}for(var U=S,le=k.length-1;le>=0;le-=P?2:1){var ue=w(k[le],"A decorator","be",!0),be=P?k[le-1]:void 0,fe={},Z={kind:["field","accessor","method","getter","setter","class"][A],name:E,metadata:o,addInitializer:(function(Y,ne){if(Y.v)throw new TypeError("attempted to call addInitializer after decoration was finished");w(ne,"An initializer","be",!0),L.push(ne)}).bind(null,fe)};if(ie)a=ue.call(be,U,Z),fe.v=1,w(a,"class decorators","return")&&(U=a);else if(Z.static=F,Z.private=V,a=Z.access={has:V?N.bind():function(Y){return E in Y}},_||(a.get=V?I?function(Y){return j(Y),M.value}:$("get",0,j):function(Y){return Y[E]}),I||C||(a.set=V?$("set",0,j):function(Y,ne){Y[E]=ne}),U=ue.call(be,b?{get:M.get,set:M.set}:M[z],Z),fe.v=1,b){if(typeof U=="object"&&U)(a=w(U.get,"accessor.get"))&&(M.get=a),(a=w(U.set,"accessor.set"))&&(M.set=a),(a=w(U.init,"accessor.init"))&&B.unshift(a);else if(U!==void 0)throw new TypeError("accessor decorators must return an object with get, set, or init properties or undefined")}else w(U,(H?"field":"method")+" decorators","return")&&(H?B.unshift(U):M[z]=U)}return A<2&&W.push(y(B,F,1),y(L,F,0)),H||ie||(V?b?W.splice(-1,0,$("get",F),$("set",F)):W.push(I?M[z]:w.call.bind(M[z])):g(S,E,M)),U}function x(S){return g(S,f,{configurable:!0,enumerable:!0,value:o})}return o=p(o??null),u=[],h=function(S){S&&u.push(y(S))},d=function(S,T){for(var P=0;P<t.length;P++){var E=t[P],A=E[1],L=7&A;if((8&A)==S&&!L==T){var W=E[2],F=!!E[3],V=16&A;R(S?n:n.prototype,E,V,F?"#"+W:b7e(W),L,L<2?[]:S?c=c||[]:l=l||[],u,!!S,F,T,S&&F?function(H){return w7e(H)===n}:r)}}},d(8,0),d(0,0),d(8,1),d(0,1),h(l),h(c),a=u,v||x(n),{e:a,get c(){var S=[];return v&&[x(n=R(n,[e],i,n.name,5,S)),y(S,1)]}}}function b7e(n){var e=v7e(n,"string");return typeof e=="symbol"?e:e+""}function v7e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Z5(n,e,t){typeof e=="symbol"&&(e=(e=e.description)?"["+e+"]":"");try{Object.defineProperty(n,"name",{configurable:!0,value:t?t+" "+e:e})}catch{}return n}function w7e(n){if(Object(n)!==n)throw TypeError("right-hand side of 'in' should be an object, got "+(n!==null?typeof n:"null"));return n}let _Q;class y7e{constructor(){this.ea=ve(Ww),this.colormap=[{color:"blue",label:"generic"},{color:"red",label:"GENE"}]}attached(){this.ea.subscribe("edgeDetail",e=>{console.log("info edgeDetail",e),this.subject=e.subject,this.object=e.object,this.predicate=e.predicate,this.doi=e.doi,this.citation=e.citation,this.finding=e.finding,this.llm_id=e.llm_id}),this.ea.subscribe("nodeDetail",e=>{console.log("info nodeDetail",e),this.subject=e.subject,this.object="",this.predicate="",this.doi=e.doi,this.citation=e.citation,this.finding=e.finding,this.llm_id=e.llm_id}),this.ea.subscribe("colormap",e=>{console.log("info colormap",e),this.colormap=[];for(let t of Object.keys(e.typeColorMap)){const i={color:e.typeColorMap[t],label:t};this.colormap.push(i)}})}}CQ=y7e;[_Q,SQ]=m7e(CQ,[aa({...p7e,name:"sv-info"})],[]).c;SQ();gv.register(Iie.shadowDOM({})).register(S1).register(y7).register(LE).register(g7).register(HZ).register(JZ).register(sQ).register(hQ).register(bQ).register(_Q).app(Q8).start()});export default C7e();
